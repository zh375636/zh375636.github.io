<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="IntroductionHi there, welcome to Configuring Azure VNet integration here at Cloud Academy. My name is Brian Harrison and I’m a Cloud Solution Architect. Let’s start by doing a quick introduction of bo">
<meta property="og:type" content="article">
<meta property="og:title" content="AZ-700-Configuring-Azure-VNet-Integration-23">
<meta property="og:url" content="https://example.com/2022/11/18/AZ-700-Configuring-Azure-VNet-Integration-23/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:description" content="IntroductionHi there, welcome to Configuring Azure VNet integration here at Cloud Academy. My name is Brian Harrison and I’m a Cloud Solution Architect. Let’s start by doing a quick introduction of bo">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-11-19T00:11:05.000Z">
<meta property="article:modified_time" content="2022-11-23T04:14:30.000Z">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/2022/11/18/AZ-700-Configuring-Azure-VNet-Integration-23/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>AZ-700-Configuring-Azure-VNet-Integration-23 | Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-700-Configuring-Azure-VNet-Integration-23/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          AZ-700-Configuring-Azure-VNet-Integration-23
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:11:05" itemprop="dateCreated datePublished" datetime="2022-11-18T20:11:05-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-23 00:14:30" itemprop="dateModified" datetime="2022-11-23T00:14:30-04:00">2022-11-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-700/" itemprop="url" rel="index"><span itemprop="name">AZ-700</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-700-Configuring-Azure-VNet-Integration-23/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-700-Configuring-Azure-VNet-Integration-23/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hi there, welcome to Configuring Azure VNet integration here at Cloud Academy.</p>
<p>My name is Brian Harrison and I’m a Cloud Solution Architect.</p>
<p>Let’s start by doing a quick introduction of both myself as well as the course content before we dive into the deeper networking topics that we’re going to be covering.</p>
<p>As I mentioned, my name is Brian Harrison and I am a Public Cloud Solution Architect. I’ve been working for more than a decade with both Microsoft and Amazon in numerous different capacities focusing on both Infrastructure as a Service as well as Application Development.</p>
<p>Here are a couple of links that you can use to get in contact with me should you choose to:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://twitter.com/briancharrison">https://twitter.com/briancharrison</a></li>
<li><a target="_blank" rel="noopener" href="https://linkedin.com/in/briancharrison">https://linkedin.com/in/briancharrison</a></li>
</ul>
<p>Here’s also an email address that you can use if you would like to contact Cloud Academy directly and provide you some feedback, or you think some information should be changed: <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/introduction/?context_resource=lp&context_id=4445">support@cloudacademy.com</a></p>
<p>Who exactly should attend this course? It’s going to be primarily Azure network engineers, but they can fall into two different categories.</p>
<p>The first are going to be those that work with solution architects, cloud administrators, security engineers, and application developers to deliver Azure Solutions. Those that are more operationally focused.</p>
<p>The second are those that are going to be recommending planning, implementing, and maintaining Azure Network Solutions, maintaining network architectures, primarily those that are going to design and develop networking solutions.</p>
<p>From an objective perspective and also think of this as our agenda, we have three primary topics that we’re going to be covering.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/app-service-vnet-integration/">App Service</a> and how to configure them for <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/implementing-vnet-integration-demo/">regional VNet integration</a></li>
<li><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/azure-kubernetes-service-aks-vnet-integration/">Azure Kubernetes service</a> and how it can be <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/aks-setup-demo/">configured for VNet integration</a> as well as the different networking models that are supported within</li>
<li><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/app-service-environment-ase-client-access/">App Service environments</a>, which is a different version of App Services, specifically an isolated version and how you can configure it so that your clients can access those App Services</li>
</ul>
<p>From a prerequisites perspective, there are definitely going to be certain skills that you’ll need to have in place before taking this course:</p>
<ul>
<li>Expert Azure administration skills. You need to understand the Azure portal the Azure object model and so on</li>
<li>Extensive experience and knowledge of networking, hybrid connections, network security as these are all going to be covered</li>
<li>Subject matter expertise in planning, implementing, and maintaining Azure Network Solutions including routing and private access.</li>
</ul>
<p>Again, should you have any feedback for Cloud Academy, here is the email address that I showed a little while ago and this is where you can provide both positive and negative feedback about this particular course.</p>
<p>One thing to keep in mind, at the time that I put this course together, I did do a number of demonstrations related to how to do specific configurations. Those demonstrations were using the Azure portal. However, Microsoft is known to make changes to the Azure portal very, very rapidly, so there could be screen changes from the screen grabs that I took versus what you may see live in the Azure portal today. Just be aware of that.</p>
<p>Let’s go ahead and start talking about Azure App Services and how you would configure them for regional VNet integration.</p>
<h1 id="App-Service-VNet-Integration"><a href="#App-Service-VNet-Integration" class="headerlink" title="App Service VNet Integration"></a>App Service VNet Integration</h1><p>Hi there, let’s continue our discussion of VNet integrations by starting with an overview of the VNet integration with an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-app-service-949/introduction/">Azure App Service</a>: what the capabilities are, what the features are, and what things you can’t do with respect to App Service VNet integration.</p>
<p>As an overview, the VNet integration gives you access to services within your VNet from your App Service. For example, if you want to maybe make your database more tightly locked down than leveraging a PaaS service, you can place a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">virtual machine</a> inside of your virtual network and then make your App Service leverage that database, rather than something that has a public endpoint.</p>
<p>The App Service VNet integration does not provide access to your App Service from services inside of your virtual network.</p>
<p>The App Service will still accept public endpoint access, and if you do need to talk to the App Service from within your virtual network, you will need to use that public routing to get there.</p>
<p>Now from a feature and requirements perspective, when you deploy your App Service you will need to take advantage of one of the following tiers of your App Service Plan:</p>
<ul>
<li>Standard Tier</li>
<li>One of the versions of Premium Tier</li>
<li>Elastic Premium Tier.</li>
</ul>
<p>You’ll notice that neither one of the shared tiers are listed: the free or the basic tiers. In addition, the isolated tier is not listed either, because that one is associated with App Service Environments, which we will talk about in a later video.</p>
<p>The VNet integration supports both TCP and UDP traffic when connecting to your virtual network and it works with both standard App Services, whether they be code-based or container-based as well as Function-based App Services for your service connectivity.</p>
<p>I can tell you from my own personal experience that I’ve leveraged the Function app VNet integration, and I’ve done it across ExpressRoute connections to an On-premises network.</p>
<p>A single App Service can connect up to five separate VNets and have them all be integrated at the same time, thereby allowing you to take advantage of services that are in different VNets within the same region as well as in other regions.</p>
<p>With that being a starting point, there are two different kinds of VNet integration. There’s regional, which refers to the App Service and the virtual network being in the same region. Then there is global, where they are in different regions.</p>
<p>Regional requires a dedicated unused subnet. The subnet can’t even have service endpoints associated with it. It has to be completely empty.</p>
<p>For global VNet integration, there is going to be a requirement for a virtual network gateway to be attached to the virtual network that you want to connect to that is in the different region.</p>
<p>What kind of resources can you integrate with or can you access from your App Service? </p>
<ul>
<li>You can access any resource that is sitting in the virtual network itself.</li>
<li>You can access any service endpoint or private endpoint secured service</li>
<li>You can access any resource that is in a peered virtual network, meaning any virtual network that is automatically connected via virtual network peering to the one that the App Service is integrated with.</li>
<li>You can access resources across <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-networks-1207/expressroute/">Azure ExpressRoute</a> connections where the ExpressRoute is connected to the virtual network that the App Service is integrated with</li>
</ul>
<p>Keep in mind, in both the Peering scenario as well as the ExpressRoute scenario, you will need to make sure that the traffic does flow in both directions. This is represented by a check box when you set up the peering or is managed by your VPN routing.</p>
<p>Now let’s take a look at what all of this means, how you would actually set up these configurations inside of the Azure portal, and we’ll do that by looking at App Services first in the next video.</p>
<h1 id="Implementing-VNet-Integration-Demo"><a href="#Implementing-VNet-Integration-Demo" class="headerlink" title="Implementing VNet Integration Demo"></a>Implementing VNet Integration Demo</h1><p>In this video I want us to take a look at the actual configurations for implementing the VNET integration inside of an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-app-service-949/introduction/">Azure App Service</a>.</p>
<p>To do that, let’s go ahead and jump into the portal and see how you would do it in there, and then you can take that and leverage it inside of a script or continue to do it in the portal.</p>
<p>Here we are at the overview page for my App Service. It is a standard App Service that is running within a standard tier, as you can see right here through the App Service plan tab.</p>
<p>As we talked about, this is one of the requirements for even allowing VNet integration to be possible.</p>
<p>In order to actually configure VNet integration, you’re going to go through the networking tab or networking navigation bar item and just go ahead and click on it.</p>
<p>You’re going to have a number of different options here that will allow you to, set up access restrictions, assign addresses, maybe connect a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/using-redis-cache-and-cdn-in-azure/using-rediscache-and-cdn-in-azure-how-azure-cdn-works/">CDN</a>, but the key point is VNet integration.</p>
<p>As you can see right now it’s currently set to off. </p>
<p>We click on that.</p>
<p>We bring up the page to show us that right now no VNets have been currently integrated. </p>
<p>I have two Vnets in my subscription. One in this region where this App Service lives, which is South Central, and then I have one that sits inside of North Central.</p>
<p>The process for configuring your App Service is going to be the same no matter whether it’s regional or global. The difference is on the VNet side, and we’ll take a look at the VNet configuration options in the next video.</p>
<p>All we’re going to do here is click on the add VNet button. </p>
<p>It’s going to give us an option to choose our subscription.</p>
<p>Then we’re going to choose the virtual network.</p>
<p>Here is the one that’s currently sitting in the same region, South Central, and then we’re going to specify do we want to go ahead and create a new <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-network-security/ip-addresses-subnets/">subnet</a> that’s going to be dedicated for this App Service or do we want to use one that’s existing?</p>
<p>I already have an empty one and it’s called Subnet App Services, so we’re going to choose that one.</p>
<p>Click OK and now all we have to do is wait for the configuration to finish and there it is.</p>
<p>We’ve got it up and running and now the VNet integration has been enabled, which you can see right here.</p>
<p>We can also see the address space which should correspond to the address space of the subnet that we chose and can validate that we are in fact connected to VNet integrations.</p>
<p>It’s that simple. You can do this via the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-cli/">Azure CLI</a>. You can also do it via Azure PowerShell, but it is usually a one-time action, so I can’t imagine that you’re going to need to do this all that often.</p>
<p>In the next video, we’ll take a look at how to configure the actual virtual network so that it can receive an App Service integration.</p>
<h1 id="VNet-Setup-Demo"><a href="#VNet-Setup-Demo" class="headerlink" title="VNet Setup Demo"></a>VNet Setup Demo</h1><p>Hi there. In this video, we’re going to be focusing on the VNet and the configurations that are required the VNet and the configurations that are required in order for an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-app-service-949/introduction/">App Service</a> to integrate with it and we’ll take a look at both a regional version as well as a global version. But before we do that, let’s take a look at some specific features that are allowed inside of your virtual network that you can actually use from a networking perspective.</p>
<p>So, for example, once your network has been integrated with your App Service, you absolutely can prevent or allow traffic using network security group rules for that App Service for what services, VMs, what have you, it can actually talk to successfully once that traffic has entered in. Any kind of routing that you would want to implement. Maybe you want to make sure that traffic that comes from that App Service runs through intrusion detection&#x2F;intrusion prevention, maybe you want it to run through a web application firewall.</p>
<p>There are any number of different possibilities for how you might want to route that traffic in order for you to make sure that traffic is correct, you can absolutely implement user-defined routing, whether that be application routing or network routing. You can absolutely use <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/azure-network-connectivity-name-resolution/azure-dns/">Azure Private DNS</a> Zones.</p>
<p>So, once that integration has been implemented, if you want to allow access to a service inside of that virtual network from the App Service, there is absolutely no reason why you can’t define the name of that service in your virtual network using Azure Private DNS Zones and the App Service because the integration has been implemented or connected, we’ll be able to see where that service exists and be able to resolve it correctly.</p>
<p>Let’s go ahead and jump on into the Azure portal and let’s take a look at both of the virtual networks that I have deployed and the integrations or configurations that I have set within them. The first one that we’ll take a look at is the South Central or the regional virtual network that’s in the same region as our App Service and this is just the overview page. The key configuration here is within the subnets. Once we look in the subnets, the primary requirement, as I talked about at the beginning, is to make sure that you have a dedicated subnet just for the App Service. And you can actually see that here under Delegated 2, there is a Microsoft.Web&#x2F;ServerFarms. That corresponds to the resource provider for App Services. That corresponds to the resource provider for App Services. Don’t get worried about that name. That name has been around for an extremely long time, and it is extremely difficult to change those names, hence why it is still in existence. But you can absolutely see that your App Service has been integrated with this particular subnet.</p>
<p>Now, remember I talked about the ability to leverage other types of PaaS services to leverage other types of PaaS services that have been connected to your virtual network. So, if we were to actually go to our subnet endpoints, for example, I absolutely– and I absolutely have one here configured for a service endpoint for Microsoft.SQL. I could very easily add KeyVault, Event Hub, Cognitive Services. Any of those that you want to take advantage of and access from your App Service, you can do that by creating the necessary service endpoints and allow the traffic to flow through your virtual network, maybe for those reasons that I talked about earlier where you want your traffic to be routed through intrusion detection prevention, web application firewalls, things like that. That would be a reason for routing that traffic through to virtual network to a service endpointed-based service. And Microsoft has been over the years adding more and more services, PaaS-based services, to this list.</p>
<p>Now, you can also route your traffic or connect to private endpoint-based services. Those actually don’t show up here. The private endpoints are associated directly with the individual, say Microsoft.SQL or Azure.PostGreSQL or Azure.MySQL when you create those private endpoints and those private endpoints have been connected to the virtual network, then you’ll be able to connect to those CNAME records associated with those services appropriately.</p>
<p>Now, on the global virtual network side, I have a separate virtual network that is sitting in North Central US and the big key thing here, right here on the overview page to see, is that I have a connected device called my VNet gateway. This is the required piece that needs to be in place in order for a global App Service VNet integration to exist in order for a global App Service VNet integration to exist because you’re actually going to connect to the VNet gateway first before the App Services traffic can actually make it into the virtual network.</p>
<p>When you create your virtual network gateway, you will define which virtual network you’re going to connect to. If you do not already have a gateway subnet created, it will create one for you and create the necessary IP range associated with it and then the network gateway will be attached. The Virtual Network Gateway does have some requirements with respect to how it is configured in order to allow for the App Service VNet integration to work, so let’s take a quick look at that.</p>
<p>The big key thing here is the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-networks-1207/vpn-gateways/">VPN</a> type. It needs to be a route-based VPN and then, of course, it needs to be connected to the virtual network. A public IP address will be created automatically unless you already have one existing, of course, and it will be that public IP address that the App Service actually connects to in order to access the virtual network. In addition, there is one other set of configurations and that’s the point to site configurations. In here you need to define an address pool that can be given to any client that connects to the virtual network gateway and it needs to be an address pool that is not going to overlap with the gateway subnet’s address pool.</p>
<p>So, the address pool for the virtual network is in the 10. range. We needed to do something that was not in the 10. range, so I chose 192.168. In addition, you need a tunnel type to be of SSTP and the authentication type should be Azure certificate. But according to the documentation, you do not actually need to upload a cert, you just need to specify that as the authentication type. Once you’ve done those things, you should be able to connect to your virtual network via the VNet integration section that we showed in the last video for your App Service configurations. That should do it.</p>
<p>App Service VNet integration is not very difficult. It works extremely well, as I mentioned. I’ve implemented it with some of my customers in the past and I definitely recommend it. In the next set of videos, we’re gonna start to take a look at <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-kubernetes-service-aks-1268/introduction/">Azure Kubernetes service</a> and how to integrate it within the scope of a virtual network in order to privatize that deployment.</p>
<h1 id="Azure-Kubernetes-Service-AKS-VNet-Integration"><a href="#Azure-Kubernetes-Service-AKS-VNet-Integration" class="headerlink" title="Azure Kubernetes Service (AKS) VNet Integration"></a>Azure Kubernetes Service (AKS) VNet Integration</h1><p>In this video, we’re going to start by taking a look at the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-kubernetes-service-aks-1268/introduction/">Azure Kubernetes service</a> and how it is going to integrate into a Virtual Network inside of your Azure subscription.</p>
<p>Azure Kubernetes service is a very different beast than Azure App Services and the reasoning behind that is: although it is absolutely considered Platform as a Service, Microsoft manages only a portion of it. It gets deployed as Infrastructure as a Service, therefore giving you more control over the environment than an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-app-service-949/introduction/">Azure App Service</a> does. It also means that it gives you more networking integration capabilities.</p>
<p>Let’s start by understanding exactly what are the resources that you’re going to be leveraging for an Azure Kubernetes cluster, when that cluster gets deployed. </p>
<p>The first is of course a Virtual Network, which is in fact required. The Virtual Network can either be manually attached to or automatically created depending upon the networking model that you’re going to choose, and we’ll talk about that in a little bit. </p>
<p>Of course, there is going to need to be a load balancer to allow for scalability. The minimum recommended cluster size for Azure Kubernetes is typically three VMs, so that load balancer will need to be there at a minimum in order for Kubernetes just to work, let alone support your application.</p>
<p>Network Security Groups should absolutely be applied to the subnets that your cluster is placed into in order to prevent traffic that should not be flowing.</p>
<p>The basis of Azure Kubernetes is going to be the virtual machines which provide the nodes for your Azure Kubernetes cluster.</p>
<p>If you are going to provide any kind of scaling for your Kubernetes cluster, maybe you know that your user base is going to shrink and grow over time, then you’re going to want to take advantage of VM scale sets to allow that cluster to grow and shrink.</p>
<p>I talked about the fact that Kubernetes, when deployed inside of Azure, supports two different networking models. The first is called Kubenet and this is the default Kubernetes model that most customers are used to. If they’re deploying Kubernetes either On-Premises or in another cloud service provider, it does the following: </p>
<ul>
<li>it conserves IP address space</li>
<li>It uses a Kubernetes internal and external load balancer for reaching of pods </li>
<li>It allows the manual managing and maintaining of user-defined routes </li>
<li>It provides for a maximum of 400 nodes per cluster.</li>
</ul>
<p>This is what is built into the Kubernetes engine.</p>
<p>Microsoft has provided a second networking model called the Azure CNI which adds IP addresses to the pods as well as the nodes. Of course, this means that all of your network IP addresses are going to need to be extremely well defined before implementing your cluster, depending upon how many nodes you believe are going to be deployed within that cluster and how many pods within those nodes. </p>
<p>In this model, the pods get full <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-networks-1207/course-introduction/">Virtual Network</a> connectivity and can be directly reached via their private IP address from connected networks. This requires a much larger IP address space, and much better planning.</p>
<p>In Kubernetes case, this is a sample diagram of what a Kubernetes implementation would look like.</p>
<p>You have individual nodes that have actual IP addresses. These are 192.168.* ranges and they are the IP addresses of the Virtual Network. Then you’ll notice that there is a set of 10.* IP address associated with the pods. These are the internal IP address ranges that Kubernetes is leveraging in order for the services to talk to one another within Kubernetes, but those IP addresses are not published to the rest of the virtual network for anyone to access them individually.</p>
<p>The difference with Azure CNI is going to be that the pod IP addresses would have a 192.168 IP address range, just like the nodes do.</p>
<p>What are the differences between the two networking models?</p>
<p>Both networking models support automatic configuration of VNet resources if you choose to. They also both support manual creation and attachment of VNet resources which is partially true. </p>
<p>What I mean by that is when you go through the Azure wizard, if you choose Kubenet as your networking model, you will automatically have a VNet created for you. You cannot attach Kubernetes to an existing VNet through the wizard. If you do it through the CLI or PowerShell, you do have more control. Manual creation and attachment is going to be available for the Azure CNI by default. However, you do have the ability to automatically create one as well. </p>
<p>With respect to network policies for Azure Kubernetes service, they can be defined and changes can be made through both models. </p>
<p>Manual VNet resource creation allows for user-defined routes and service endpoint configurations whereas automatic VNet resource creation prevents those configurations. So in the Kubenet case, if you’re going through the wizard, when the VNet gets created, there will be User Defined Routes automatically set up to allow for Kubernetes to leverage the cube Kubenet model. </p>
<p>In an Azure CNI case where the IP addresses are now attached to the pods, you are the only one that is going to know what the requirements are for a User Defined Route based on how the pods are going to communicate. </p>
<p>When should you use the different networking models? </p>
<p>If the following scenarios are true, the Kubenet should be the right networking model for you:</p>
<ul>
<li>If you have a limited IP address space</li>
<li>Most of the pod communication is internal to the cluster</li>
<li>You don’t need advanced features of AKS like virtual nodes or Azure network policy</li>
<li>If you have a very solid understanding of your application </li>
<li>The pods or the services associated with your application are not going to be either spoken to individually or doing a lot of outbound address talking</li>
</ul>
<p>In addition, if your networking is being managed by a separate team and they are controlling IP address availability, that’s another reason for choosing Kubenet over Azure CNI.</p>
<p>The reverse scenarios are going to be true, for Azure CNI to be the right mode for you. The following should be what you are looking for: </p>
<ul>
<li>You have available IP addresses for both the nodes in the pods </li>
<li>Most of the pod communication is to resources outside of the cluster rather than strictly internal</li>
<li>You don’t want to manage user-defined routes when you specify Azure CNI, the user-defined routes are not only created for you automatically, but they’re actually managed by Azure automatically as well.</li>
<li>You also don’t need advanced features.</li>
</ul>
<p>However, you can leverage advanced features with Azure CNI if you choose to.</p>
<p>There are definitely a number of differences between the networking models. I’m not going to go through each line of the table with the slide deck, but here are a few standouts: </p>
<ul>
<li>Pod to pod connectivity is absolutely supported in both models</li>
<li>Access to resources secured by service endpoints, meaning PaaS services that have been privatized to your virtual network is supported in both models</li>
<li>One thing that is not supported in both models is support for Windows node pools rather than Linux node pools. Kubenet does not support Windows node pools whereas Azure CNI does today</li>
<li>You can deploy a cluster into existing or new virtual networks in both models</li>
</ul>
<p>Just make sure to understand the similarities and differences before you make a decision on which networking model you want to implement.</p>
<p>In the next video, we’ll take a look at how to specify these network integrations for AKS by leveraging the Azure portal.</p>
<h1 id="AKS-Setup-Demo"><a href="#AKS-Setup-Demo" class="headerlink" title="AKS Setup Demo"></a>AKS Setup Demo</h1><p>In this video I want us to continue our conversation about the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-kubernetes-service-aks-1268/introduction/">Azure Kubernetes service</a> and specifically how it’s going to integrate into your VNet. The best way to see that is to walk through the Creation wizard for an Azure Kubernetes cluster and see what their requirements are in that wizard for creating the cluster and putting it into an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-networks-1207/course-introduction/">Azure virtual network</a>. </p>
<p>We are in the Azure portal and I have already kicked off the Azure Kubernetes cluster creation wizard and I’ve already filled in some of the fields that aren’t really relevant to networking at all.</p>
<p>Things like specifying a resource group, giving the cluster a name, choosing a region, availability zones, version of Kubernetes, those kinds of things aren’t necessarily specific to networking.</p>
<p>Once we start to Scroll down, we then can specify manual or auto-scaling for the method of scaling for your cluster. Not everybody needs scaling at all for their Kubernetes cluster. If they know their application, they know the user base for that particular application and they can set up a cluster that is going to just maintain that application, then auto-scaling may not be needed.</p>
<p>Hence using the manual scale method where you’re actually going to specify a static value.</p>
<p>However, if you are going to provide scalability and elasticity for your application to allow for your user base to shrink and grow over time, you’re going to want to specify a minimum and maximum node count range.</p>
<p>I’m bringing this up because although most people would not consider this a networking issue.</p>
<p>For the Azure CNI based networking model it is going to be important because you’re going to need to allocate IP addresses for the nodes as well as the pods, so making sure to prepare and understand how many potential IP addresses you’re going to need for your cluster is going to be extremely important.</p>
<p>The next tab we’re going to take a look at is Node pools. This also ties back into the exact same discussion I was just mentioning, which is you start off with an agent pool which is primarily running the orchestration engine of Kubernetes and then maybe you want to separate out your workload or your application into a separate node pool.</p>
<p>You could absolutely do that, so if you’ll remember, I said three to six for the minimum and maximum scaling. Maybe the first three are going to be your agent pool. The remaining three will be your application pool. Again, this ties back into the number of IP addresses that you’re going to need in your virtual network if you are using Azure CNI.</p>
<p>You can also turn on Azure virtual nodes which connects your cluster to Azure container instances. That is a very advanced feature and is not specific to this discussion, but I just wanted to mention it.</p>
<p>Lastly on the tab, if you are in fact using scaling, you’re going to automatically check the enable virtual machine scale sets so that you can specify how that scaling is going to be managed. Whether it be via processor percentage or queue length or any number of different health checks that can be performed against your cluster.</p>
<p>Next tab is on authentication. I’m just going to go ahead and skip past this, because this has no bearing on networking.</p>
<p>Now we have the networking tab, and this is where you’re going to specify a number of different things. You’re going to specify which network configuration you’re going to choose, the Kubenet or Azure CNI. If you are going to choose Azure CNI then you have the ability to either select a new or existing virtual network.</p>
<p>Now, because of the particular region that I chose at the beginning in the Basics tab, I do not have any existing virtual networks in this region. However, if I had chosen a different region, say, and actually, let’s go ahead and go back and do that. Let’s choose South Central and then go back to the networking tab. I should now have an available VNet that I can actually place the cluster into. </p>
<p>The minute that I do that you’ll notice I’ve got some error messages. They are letting me know that because of the fact that I’m using Azure CNI, that my subnet IP ranges are not large enough to support the node pools and then eventuality of the pods running in those node pools. You need to have a minimum of 555 addresses. Therefore, the &#x2F;24 is not going to do it for me. I’m going to need something in the neighborhood of probably a &#x2F;20. That’s what happens when you choose Azure CNI.</p>
<p>If we specify Azure Kubenet, then the only thing we need to specify is a DNS name prefix. It’s going to choose a load balancer. We’re going to specify any HTTP application routing, whether or not this should be a private cluster, meaning that the load balancer would have a private IP address rather than a public one, and do we want to set authorized IP address ranges.</p>
<p>You’ll notice there is no selection here for the choosing of an existing or new virtual network.</p>
<p>In this instance, it’s going to automatically create a virtual network for you, and then you’ll have access to modify it or configure it afterward, but the virtual network will get created for you by default. </p>
<p>Lastly, do you want to specify any network policies? The default is none, but you can absolutely specify Calico. However, the Azure network policy is not compatible with Kubenet. If you chose Azure CNI, then the Azure network policy option would be available.</p>
<p>That is really all that there is with respect to VNet integrations.</p>
<p>Once you have your cluster up and running, you can absolutely set your default user-defined routes. You can create additional network security groups and have them all be applied inside of the virtual network, but this is going to be the minimum configuration that you’re going to start with when you create your cluster. </p>
<p>It’s then going to be dependent on your specific application requirements as to what additional services and features you need to integrate into that environment.</p>
<p>In the next set of videos, we’re going to take a look at <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-app-service-949/introduction/">App Services</a> and, specifically application service environments and how they can be integrated to provide a private PaaS App Service instance inside of your virtual network.</p>
<h1 id="App-Service-Environment-ASE-Client-Access"><a href="#App-Service-Environment-ASE-Client-Access" class="headerlink" title="App Service Environment (ASE) Client Access"></a>App Service Environment (ASE) Client Access</h1><p>In this last video, we’re going to cover <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-app-service-949/introduction/">App Service</a> environments and specifically how your clients will access them. </p>
<p>App Service environments are slightly different from a standard public-facing App Service which we talked about in the first few videos. Let’s start by really asking what actually is an application service environment or an ASE is.</p>
<p>First of all, it is still an App Service, and it has all of the same capabilities and features that a standard App Service does, meaning that it is a PaaS service and Microsoft is in fact going to be managing it. However, it gets deployed into an Isolated Tier based App Plan and as such when it does get created, Microsoft is going to ask you for a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-networks-1207/course-introduction/">Virtual Network</a> that it can be placed into and it exists solely within that virtual network.</p>
<p>All of the other features and capabilities of the App Service still apply, but now instead of it having a public IP address and a public name, it is going to exist inside of your virtual network, and it will have a CNAME that Microsoft applies, but it will only be accessible from within that Virtual Network until you define otherwise. It can have both internal and external endpoints, but most customers that I have worked with have used it strictly for internal purposes or they have created a public endpoint using another device such as a network virtual appliance, Azure Application Gateway or the like and it can allow for both inbound and outbound traffic.</p>
<p>Now, if you’ll remember correctly from the App Service VNet integration we talked about in the first few videos, the App Service only had the ability to talk into services inside of the virtual network, not the reverse. Services inside of the virtual network could not talk to the App Service or could not instigate traffic with the App Service. Only the App Service could instigate traffic with services in the VNet. </p>
<p>With an Application Service Environment, the traffic can be instigated in both ways. Both internal services and the Application Service Environment can see one another.</p>
<p>From a client access perspective, you’re going to access the application service environment in much the same way that you do with any infrastructure as a service-based solution. </p>
<p>You can allow for port forwarding from a jump box or Azure Bastion for example.</p>
<p>You can allow for traffic through an internal or external load balancer. Remember, App Services have a load balancer attached to them by default to allow for scalability. You can define whether that load balancer will have a private endpoint or a public endpoint, and Microsoft does supply different CNAMEs for each specific solution. </p>
<p>You can use User Defined Routes for any traffic coming in and out of that App Service. So if you want the traffic to go through an intrusion detection&#x2F;prevention device or a web application firewall, you can absolutely force that. </p>
<p>The one key factor that a lot of my customers have done over the years is they have created these App Services to reduce the amount of administration overhead and allowed their internal users on their internal networks On-Premises to be able to access these App Services via an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-networks-1207/expressroute/">ExpressRoute</a>.</p>
<p>So, there’s any number of different options for accessing the App Service, but the key factor here is that the App Service is still in App Service. It’s just now isolated, and network secured like an infrastructure as a service-based solution would be.</p>
<p>With that, we’ll wrap up the course with a conclusion video. Hope you’ve enjoyed this and I hope to see you soon.</p>
<h1 id="Wrap-Up"><a href="#Wrap-Up" class="headerlink" title="Wrap-Up"></a>Wrap-Up</h1><p>Let’s do a quick wrap-up of what we’ve discussed here within our course. </p>
<p>We covered how to set up integration with your public-facing App Service so that the App Service can talk to resources inside of a virtual network and we’ve done it where both the App Service and the virtual network are in the same region. </p>
<p>We also did talk about how to set up a global based integration, but that wasn’t really the focus of this particular course. </p>
<p>We also covered the networking options for <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/azure-kubernetes-service-aks-vnet-integration/">Azure Kubernetes service</a>, specifically Kubenet and Azure CNI, as well as some of the pluses and minuses for each one. Why you wouldn’t want to use them and so on. </p>
<p>Lastly, we talked about how you would take an Azure App Service and turn it into an App Service Environment, also called an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/app-service-vnet-integration/">isolated App Service</a>. Once it was created, how would your clients access that app service from the outside? </p>
<p>In addition to the information that I’ve provided in the course, I always like to provide some additional links to documentation that Microsoft provides should you want to look at any of these topics in more detail. The links that you see in the deck can be found down below in the course material section of the course. Each one of these links do take you to a documentation page related to each one of the topics we discussed: </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/implementing-vnet-integration-demo/">VNet integration</a> and how to enable it</li>
<li>The different <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/aks-setup-demo/">networking models for AKS</a></li>
<li>How to configure the Azure CNI and Azure Kubenet </li>
<li>How to access your <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-vnet-integration-2345/app-service-environment-ase-client-access/">application service environment</a></li>
</ul>
<p>Don’t forget the Cloud Academy has a very large library of additional Azure-related courses should there be other topics that you might have an interest in. </p>
<p>Thank you very much, hope you’ve enjoyed the course and hope to see you again soon. </p>
<h1 id="1Introduction"><a href="#1Introduction" class="headerlink" title="1Introduction"></a>1<strong>Introduction</strong></h1><p><a target="_blank" rel="noopener" href="https://twitter.com/briancharrison">Brian Harrison Twitter profile</a></p>
<p><a target="_blank" rel="noopener" href="https://linkedin.com/in/briancharrison">Brian Harrison LinkedIn profile</a></p>
<h1 id="8Wrap-Up"><a href="#8Wrap-Up" class="headerlink" title="8Wrap-Up"></a>8<strong>Wrap-Up</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/app-service/overview-vnet-integration">Azure App Service VNet Integration</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/app-service/configure-vnet-integration-enable">Enable App Service VNet Integration</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/aks/concepts-network">Network Concepts for AKS</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/aks/configure-azure-cni">Configure Azure CNI for AKS</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/aks/configure-kubenet">Configure Azure Kubenet for AKS</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/app-service/environment/using-an-ase#app-access">Client Access for ASE</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/app-service/environment/networking">Network Requirements for ASE</a></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/11/18/AZ-700-Designing-and-Implementing-Azure-Service-Endpoints-22/" rel="prev" title="AZ-700-Designing-and-Implementing-Azure-Service-Endpoints-22">
      <i class="fa fa-chevron-left"></i> AZ-700-Designing-and-Implementing-Azure-Service-Endpoints-22
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/18/AZ-700-Lab-Configuring-Web-Apps-for-Private-Access-using-VNet-Integration-24/" rel="next" title="AZ-700-Lab-Configuring-Web-Apps-for-Private-Access-using-VNet-Integration-24">
      AZ-700-Lab-Configuring-Web-Apps-for-Private-Access-using-VNet-Integration-24 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction"><span class="nav-number">1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#App-Service-VNet-Integration"><span class="nav-number">2.</span> <span class="nav-text">App Service VNet Integration</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Implementing-VNet-Integration-Demo"><span class="nav-number">3.</span> <span class="nav-text">Implementing VNet Integration Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#VNet-Setup-Demo"><span class="nav-number">4.</span> <span class="nav-text">VNet Setup Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Azure-Kubernetes-Service-AKS-VNet-Integration"><span class="nav-number">5.</span> <span class="nav-text">Azure Kubernetes Service (AKS) VNet Integration</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#AKS-Setup-Demo"><span class="nav-number">6.</span> <span class="nav-text">AKS Setup Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#App-Service-Environment-ASE-Client-Access"><span class="nav-number">7.</span> <span class="nav-text">App Service Environment (ASE) Client Access</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Wrap-Up"><span class="nav-number">8.</span> <span class="nav-text">Wrap-Up</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1Introduction"><span class="nav-number">9.</span> <span class="nav-text">1Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8Wrap-Up"><span class="nav-number">10.</span> <span class="nav-text">8Wrap-Up</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2736</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
