<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Course IntroductionHi and welcome to this Implementing Continuous Feedback with Azure DevOps Course. This is an Intermediate level course suited to project managers and developers or anyone wanting to">
<meta property="og:type" content="article">
<meta property="og:title" content="AZ-400-Implementing-Continuous-Feedback-with-Azure-DevOps-22">
<meta property="og:url" content="https://example.com/2022/11/18/AZ-400-Implementing-Continuous-Feedback-with-Azure-DevOps-22/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:description" content="Course IntroductionHi and welcome to this Implementing Continuous Feedback with Azure DevOps Course. This is an Intermediate level course suited to project managers and developers or anyone wanting to">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-11-19T00:38:00.000Z">
<meta property="article:modified_time" content="2022-11-27T18:16:50.000Z">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/2022/11/18/AZ-400-Implementing-Continuous-Feedback-with-Azure-DevOps-22/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>AZ-400-Implementing-Continuous-Feedback-with-Azure-DevOps-22 | Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Hang's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-400-Implementing-Continuous-Feedback-with-Azure-DevOps-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          AZ-400-Implementing-Continuous-Feedback-with-Azure-DevOps-22
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:38:00" itemprop="dateCreated datePublished" datetime="2022-11-18T20:38:00-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-27 14:16:50" itemprop="dateModified" datetime="2022-11-27T14:16:50-04:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-400/" itemprop="url" rel="index"><span itemprop="name">AZ-400</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-400-Implementing-Continuous-Feedback-with-Azure-DevOps-22/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-400-Implementing-Continuous-Feedback-with-Azure-DevOps-22/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Course-Introduction"><a href="#Course-Introduction" class="headerlink" title="Course Introduction"></a>Course Introduction</h1><p>Hi and welcome to this Implementing Continuous Feedback with Azure DevOps Course. This is an Intermediate level course suited to project managers and developers or anyone wanting to learn how to make use of feedback mechanisms to improve application reliability, performance and user satisfaction. </p>
<p>It will help having a basic understanding of application design and the software development lifecycle. </p>
<p>In this course, we will start by describing what feedback is, and then types of feedback that are of most use in improving application performance and usability. We will then move on to how we can integrate feedback into the software development lifecycle and what tools we can use to simplify that task. Finally, we will look at optimizing feedback mechanisms to get meaningful data from feedback noise.</p>
<p>My name is Hallam Webber and I’ll be your instructor for this course. We welcome all comments and feedback, no pun intended, so please feel free to reach out to us at <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> with any questions or comments. Let’s begin!</p>
<h1 id="What-is-Feedback"><a href="#What-is-Feedback" class="headerlink" title="What is Feedback?"></a>What is Feedback?</h1><p>What is feedback?</p>
<p>When people think of feedback generally one of two types come to mind, and which one of those will depend largely on how old you are. In the modern consumer marketing world, the younger audience might first think of customer feedback in the form of ratings or surveys. This has become pervasive in our social media-driven society where continuous improvement and customer satisfaction have become corporate clichés. We will look at this later. Older people might first think of audio feedback as first popularized by the likes of Jimi Hendrix. While both of these are examples of feedback, I want to start by looking at feedback loops.</p>
<p>At the elementary level, a feedback loop is where the output of a system is fed back as input into itself. Positive feedback loops tend to amplify a system’s output, as in audio feedback while negative feedback loops tend to make a system more stable, directing it towards an average output. Self-drive cars and machine learning systems are good examples of feedback loops. In the context of application software, we want feedback from the code that will allow us to improve reliability and performance. We take the output metrics from the code and feed it back as input into the development system. In theory, very simple. In practice not so much. I hear you ask “what are these output metrics, and where do they come from?”</p>
<h1 id="Error-Feedback"><a href="#Error-Feedback" class="headerlink" title="Error Feedback"></a>Error Feedback</h1><p>Let’s start with something we are all familiar with, exceptions, errors and crashes. I think it’s fair to say that making your app bug, or at least crash free would be the number one priority. Not to state the obvious, but its very bad manners to have your app crash with an unhandled exception. While on the face of it, exception handling may seem binary – the app had an exception or it didn’t, this is not how it goes. I’m sure most of you are aware of the undocumented feature meme, making fun of an application’s unexpected behavior. This type of error or misbehavior is subtle, and its capture is accordingly more complex so I will tackle it after addressing crashes and exceptions.</p>
<p>At the very least your app should have some general exception handler to allow it to exit gracefully. While not crashing out, exiting with some generic error message isn’t much better and will leave users frustrated. Like any product, if it breaks people won’t buy it. If you are developing for an enterprise environment where staff are forced to use your app, users will bad mouth it and it will take some time to regain their trust even when the bugs are fixed. Most, as in 99.9% of users will not report a bug with any kind of useful information about what function they were performing at the time and the application state at the time, assuming that they could. In an ideal world we would have tested the app and it would be deployed bug free. As this almost never happens the next best thing, is that we, the developers are informed of these exception situations with relevant application state data so that they can be addressed and remedied as quickly as possible.</p>
<p>If we were going to design an error feedback, or bug tracking solution from scratch what would it look like? This solution needs to work on 2 levels. From a project perspective there needs to be a bird’s eye view of the current state, global reporting and monitoring at a glance. Enter the project dashboard. We need to easily see the number of outstanding issues, work in progress and completed tickets. What bugs those issues relate to, and where those issues are in relation to resolution. A good comprehension of the current state of play allows for effective project management in terms of directing resources to where they are most needed. Without this information any predictions in delivery times range from less than optimal to arbitrary. The other level a bug tracking solution works at is ticket level, managing and monitoring individual issues. We need to capture the bug with as much diagnostic information as possible. Then enter the bug into a workflow. This should involve an initial categorization, which at a bare minimum, should discriminate between crashes and non-fatal errors using a priority rating. Then there should be the ability to assign the bug to a development resource, with that resource updating the current status of the bug and the resolution process. Once the bug issue has been resolved or fixed, then the bug status can be set to closed.</p>
<p>For a start we would need to capture the exception in the application. This would involve recording the location of the exception, like the function and library, perhaps with the input parameters. Ideally you would want to know what operating system and version the app was running on, and even the device. Once the critical data has been collected it needs to be transmitted to an error log external to the application. Once the error data has been received it would be nice if it was automatically classified and prioritized. For example, an exception that caused the app to crash would be marked as critical, while a null object exception that was caught, handled and not visible to the user maybe giving a lower priority. The exception priority will influence whether a special release is urgently needed, or the fix can be incorporated into the next planned release. The fix is implemented, and the new release is deployed, closing the feedback loop.</p>
<h1 id="Capturing-Errors-with-App-Center"><a href="#Capturing-Errors-with-App-Center" class="headerlink" title="Capturing Errors with App Center"></a>Capturing Errors with App Center</h1><p>This all makes sense and is logical, but there is a lot going on here. To build and implement an error capturing framework yourself would be a significant undertaking, perhaps more involved than the application it’s supposed to monitor. As this scenario is common to all software projects its not surprising that there is a raft of products designed to help developers integrate exception capture and bug tracking with development workflow. </p>
<p>Products like Raygun will collect exception data from your application, help you prioritize and diagnose the issue, and then link to a development workflow system like Jira or Zendesk. </p>
<p>As it happens, Azure’s relatively new App Centre has just the features you need to capture and analyze exception data with very little effort.</p>
<p>Setting up an app for error tracking in App Center is easy. Navigate to appcenter.ms. Click Add new app. In the Add new app dialog give your app a name and select the Release Type. Release types are what you might expect. Alpha, beta, enterprise, production and store, or you can create your own custom release name. Then select the OS and platform. There is a wide range of OS and platform support, although there is currently no support for JavaScript based SPA apps which does seem like quite an oversight. There is a link at the bottom of the dialog to tell Microsoft if you are using another platform, and I would encourage you to do so.</p>
<p>Integrating basic error detection into your application is quick and simple. Start by installing the Microsoft AppCenter Crashes package into your project. Add the using statement to your source code. Before you can use AppCenter Crashes you must start the SDK with AppCenter start. You need to supply the app secret you obtained when registering your application with App Center, and the type of services you want to use. In this case, that parameter will be typeof crashes. We are going to record exceptions and crashes, that is an exception that causes the application to crash, as oppose to a caught exception. </p>
<p>Looking first at a typical try catch scenario, we can call the Crashes TrackError method of the SDK within the catch block. TrackError takes an exception as its parameter. The Crashes SDK also has callbacks that can be used for processing error reports from a previously crashed session or getting user feedback from the UI. The callbacks need to be set up before calling App Center start. Conversely you need to start the App Center SDK before calling any of its methods.</p>
<p>This ErrorInitialization function illustrates how you might put these features together on app startup. Firstly, we setup our callback saying we only want to process an error report if it isn’t a blue screen of death. Next, we start the App Center. Then we find out if the application crashed out the last time it ran. If it did, we get the crash report from the last session and display a message to the user. This last session functionality is very useful as it allows us to easily figure out if the last session went badly and let the user know, that we know all is not well and action will be taken to remedy the problem.</p>
<p>As a side note, Microsoft say, “By default, an unhandled exception in a WinForms application does not trigger a crash (the application does not exit) if the debugger is not attached.” One way around this situation is to call Application SetUnhandledExceptionMode to ThrowException. This will get Winform applications to correctly display crashes in App Center..</p>
<p>User privacy is another factor to keep in mind and the Crashes SDK does provide a call back feature, ShouldAwaitUserConfirmation, where you can ask the user to confirm whether or not they consent to sending error data. This simple example does not cater for the AlwaysSend option that is available with the NotifyUserConfirmation method. You also have the ability to attach files to your error report. This would be useful for sending detailed application state in data driven or highly configurable apps. At the moment the maximum size of attachments per error report is 7 megabytes.</p>
<p>In your project’s App Center go to diagnostics to see a dashboard of all issues. This is where you see the crashes and exceptions separated into groups. A group is all the instances of a particular crash or exceptions. I did find it interesting that the grouping is based on the location within the code as a whole rather than the location within a function as identified by it’s signature. The Main_FORM Tables_LB_Click crash is exactly the same exception, but the one that occurred most recently on line 153, was after I added the ErrorInitialization function above it. Clicking on a group will take through to a detail view.</p>
<p>Here we can see the stack trace plus the number of times the crash has occurred and the number of impacted users. What’s particularly useful for mobile developers is a breakdown of devices and OSes that the crash has occurred on. On the top right you can change the status of the crash group from open to closed or ignored. Clicking on the Reports tab will display all the instances of the crash.</p>
<p>Clicking on a report or instance will display additional information like country and language, and also how far into the session or after app startup did the crash occur under the heading Crashed after. The threads tab shows the stack trace data, while attachments will display any data files that have been uploaded with the error report. Events are analytic events that were recorded just prior to the crash – we’ll have a look at those later.</p>
<p>Ideally, we want to be notified A.S.A.P when our app has crashed. This can be easily set up by going into settings and selecting email notifications. Then under crashes select when you want to be emailed about a crash event. Your choices are immediately, daily or never. On the right is an example of crash group email. It has basic information with a link to the crash group.</p>
<h1 id="Integrating-App-Center-with-Workflows"><a href="#Integrating-App-Center-with-Workflows" class="headerlink" title="Integrating App Center with Workflows"></a>Integrating App Center with Workflows</h1><p>While an email is great at telling you when something has happened, you could hardly say it’s closing the error feedback loop. What we need now is to integrate the error reports with our development workflow or bug tracking software. Once again go into settings and this time select services. Select the bug tracker service you would like to integrate with. In keeping with the Azure theme, I selected Azure DevOps. The other out of the box alternatives are GitHub and Jira. After authenticating, select the project from DevOps and click add. Now if you go into your Azure DevOps subscription and navigate to service hooks within project settings you can see App Center added as a service hook.</p>
<p>If you are using GitHub, integration is just as easy. It’s the same process as for Azure DevOps with the hopefully obvious difference of selecting GitHub from the add bug tracker selection list. As you can see when a crash comes through to App Center it will get pushed into the GitHub issue queue. Once again, basic details are supplied with a link to the App Center error report. Changing an error report’s status in App Center will update the status in GitHub.</p>
<h1 id="Applications-Misbehaving"><a href="#Applications-Misbehaving" class="headerlink" title="Applications Misbehaving"></a>Applications Misbehaving</h1><p>Now let’s have a look at when an application or system, doesn’t produce any exceptions, but at the same time doesn’t behave as intended. There are potentially 2 ways to detect this situation, but it really depends on your application. The easiest to implement and most proactive is to regularly validate the state of the app’s data. At a very simple level for example, you might have an incoming message queue to a call center growing without those messages being responded to in a timely fashion. Now there could be lots of reasons why this might happen. Everyone in the call center has gone on holiday, the messages have unknown data in them, a database or server is off-line, or an unanticipated situation has occurred that has put the application into and endless loop. Basically, for a particular set of inputs you expect a related set of outputs. If this is not the case, then an alert should be raised with a corresponding bug tracking ticket, to at the very least investigate and decide if this is an issue requiring a bug fix.</p>
<p>What if a user is experiencing abnormal application behavior that isn’t resulting in exceptions or crashes? You would hope that the user will contact your help desk either through a facility in the application, via a web page or email. If they do, then this is easy enough to push the issue into the existing workflow. You can use the Crashes TrackError method with error report attachments to push all relevant user supplied data into the App Center when the user submits their help desk ticket. You can access App Center directly using it’s API to upload a crash or error report. The API even allows you to upload an Apple crash log. The API also supports calls to interrogate App Center data and delete instances of errors. As so many services and social and technical media platforms like Twitter, Facebook and Stackoverflow have APIs it is possible to build integrations for many different sources. The major problem will be filtering meaningful data from the noise. Personally, in terms of an error feedback loop, I would draw the line at social media and say that social media integration or monitoring falls more under the domain of user satisfaction and feedback that we shall look into later.</p>
<h1 id="Application-Insights-Telemetry"><a href="#Application-Insights-Telemetry" class="headerlink" title="Application Insights Telemetry"></a>Application Insights Telemetry</h1><p>While the App Center is great there is one glaring omission at the moment. It doesn’t cater for traditional web apps. But before there was the App Center there was, and still is, Application Insights Telemetry. Adding telemetry is very easy. From within Visual Studio select Add Application Insights Telemetry from the project menu and follow the wizard. When installed you’ll find a connection to Application Insights services, the insights package added, and an instrumentationKey added to appsettings.json. If your web app happens to be an MVC app you’ll find a reference to Application Insights Javascript snippet added to Layout.cshtml. The caveat with this very simple set up is that your Visual Studio subscription credentials are the same as, or linked with your Azure subscription. If not you will be prompted to supply them. If you are using a JavaScript framework like Angular or VueJs there are Application Insights NPM packages you can install. So, what does the telemetry tell us?</p>
<p>If we go to Azure and then select application insights and then pick our telemetry app which has been automatically created based on our Visual Studio project, we will get an overview dashboard. This shows us failed requests, server requests, server response time and availability. </p>
<p>Now if we go to our app and do some navigating and then select live metrics stream. Let’s just wait for that to boot up - here we go. If we click on a few links we can see the live data coming through. This is all well and good but what about if we have a failure. So, I’ll initiate a failed page request by asking for a non-existent path. We can see the failures coming through both graphically, and on the far right we can see the requested path that is causing the failure.</p>
<p>To get notified of failures we must create an alert. We do this by go down to the alerts menu item and then click create new alert. We must start with a condition which is going to trigger the alert. As you can see there’s plenty of options here to choose from, but I’m interested in failed requests so I’m going to select that. We can see the number of failed requests so far. I’ll set the threshold to one and change the granularity to one minute for the purposes of demonstration. The next thing I need to do is create an Action Group. I’ll name the group email failed requests, with short name email 404. You have a lot of action types to choose from, which is great from an integration point of view, but I’m just going to stick with an email message just to begin with. I’ll just enter the email details. OK and we’ll just give that group a name. I need to select the group that I’ve just created this is a very important step, and if you don’t the alerts won’t work. And give the alert rule a name. I should point out that just below the description field there is a drop-down list where you can set the severity level. As you can see there have been 4 alerts in total.</p>
<p>Here we have an example of the email alert that gets sent by the telemetry service. On the right is the action type drop down list showing the other integrations you can enable. Let’s look at how you can turn Application Insight alerts into issues within Azure DevOps.</p>
<h1 id="Integrating-Application-Insights-with-Workflows"><a href="#Integrating-Application-Insights-with-Workflows" class="headerlink" title="Integrating Application Insights with Workflows"></a>Integrating Application Insights with Workflows</h1><p>To enable integration between Application Insights and Azure DevOps we must setup work items. Select work items from the Configure menu. Make sure Azure DevOps Services is selected as the tracking system and then enter you domain.visualstudio.com url. As an aside, if you have switched over to the new dev.azure.com domain, use that. You switch to the new domain by going into overview within Organization settings on your DevOps site and simply flick the use new url switch. Microsoft says not all requests will be redirected to the new domain, so some planning will be required before making this move. Back to work items and enter the project name. The area, which for default project setups will be the same as the project name. I’ve seen in forums that a few people have trouble with the authorization, and I believe this is due to the fact that they are not using an active directory identity. The problem arises as you can login to visual studio, Azure DevOps and the Azure portal with the same email, that is not necessarily an active directory identity. If you find yourself getting an OAuth authorization error after clicking the authorize button, ten to one that will be the problem.</p>
<p>Now that I’ve authorized with the correct identity, I can create a ticket in Azure DevOps from an Application Insights exception. If I go into failures under the investigate menu and drill into the operations a select one, I can create a work item from one of the instances. After opening the instance just click create work item at the top. Under new work item you can edit the fields if needed and assign the work item. Click ok and the item will appear in your work items board within your Azure DevOps project. Click on the item to enter values such effort required and any additional information or related work items.</p>
<p>When a work item ticket is created and assigned through your Azure DevOps project an email notification is sent. Within Visual Studio’s team explorer, you can select work items to view. Clicking on a work item will open it in a browser, although selecting Complete work item from the context menu will change the status to closed, directly from visual studio.</p>
<p>Work item flow is not a one-way street and work items, be they bugs, issues, features, tasks or user stories, can be created in Visual Studio team explorer and flow through to Azure DevOps for workflow management.</p>
<h1 id="Making-Sense-of-Insights-Data"><a href="#Making-Sense-of-Insights-Data" class="headerlink" title="Making Sense of Insights Data"></a>Making Sense of Insights Data</h1><p>Azure DevOps provides a customizable dashboard that lets you see many of your project’s metrics at a glance. You customize the dashboard by adding graphical widgets from a palette. Select the widget you want and drag it onto the dashboard surface. As you can see there is a large selection of preinstalled workflow metrics to choose from. I’m just going to add a couple to give you an idea. Assigned to me is an obvious choice and requires no explanation or configuration. Chart for work items is a generic work items graph that you populate with a custom query. After dropping the widget, you need to create your query by going into queries under the Boards menu. Query creation is reasonably straight forward. There are conditional statements where you set the variables and operators from drop down lists. The conditions are combined with “and” and “or” operators. Save your query. Go back to the dashboard and click on the upper right corner of the widget to configure it. Select your query from the drop-down list and specify the chart type. Next select the “group by” variable and customize the series colors if desired. Save the configuration. The widgets are interactive, if you click on the metric you can drill down to the underlying data and tasks.</p>
<h1 id="Integrations-Built-into-Application-Insights"><a href="#Integrations-Built-into-Application-Insights" class="headerlink" title="Integrations Built into Application Insights"></a>Integrations Built into Application Insights</h1><p>Within Azure you also have the ability to connect to a variety of third-party IT service management systems or services. This is achieved using a generic IT service management connector. You may recall ITSM as one of the options in the action type drop-down list from Application Insights alert notifications. To set this up create a new IT service Management connector from the marketplace. Within the management connector resource create a new log analytics resource if none exists. Go into the ITSM Connections resource and under workspace data sources click ITSM Connections. Give your connection a name and select one of the third-party partner type services. Fill in the relevant connection parameters and click OK to complete the connection setup.</p>
<h1 id="Feature-and-Usage-Feedback-Loop"><a href="#Feature-and-Usage-Feedback-Loop" class="headerlink" title="Feature and Usage Feedback Loop"></a>Feature and Usage Feedback Loop</h1><p>Designing a feature and usage feedback system is in principle not dissimilar to an error feedback loop, however it is more nuanced and complex. For a start, there is no right or wrong. Improving is more subtle than fixing, which translates into not all changes are improvements. There are more data sources, in this case metrics, and they require analysis and interpretation to be most useful. We will see how you can gain insight, excuse the pun, with Azure, and also with App Centre.</p>
<p>While we were looking at Application Insights you might have noticed that most of the metrics weren’t related to just errors, but to system and application performance, such as server response time and page load time. Knowing about system metrics is almost as important as knowing about exceptions. A user could easily mistake very slow page loading for an error, especially if they give up waiting. Whatever the reason for slow performance, be that page loading or server response time we want our applications to be a pleasure to use, not a chore.</p>
<p>We can drill down into performance or system metrics by clicking metrics under the monitoring menu. In here we can add charts with multiple metrics. You might want to have chart of client or browser side performance showing page load time and client processing time. Just create a new chart and begin adding metrics. Another chart might focus on server and network performance. One thing to keep in mind when combining metrics is not to have too many on one chart and make sure they are of a similar scale so one metric doesn’t turn the others into a flat line at the bottom of the graph.</p>
<p>We can go to performance under the investigate menu and look at load times and number of page hits. Click on a page for load times specific to that page. By clicking on the overall load time and then the drill into examples button we get a list of the individual asset load times. You can use this to get an idea of the loading time impact of the asset and if necessary, create a work item to look at speeding it up.</p>
<p>Not only is it important to know how your app is operating from an internal code and system perspective, but it is very useful to know how your users are, or are not interacting with it. Are users finding it intuitive to use? Are there features that users will like, but can not find them? If your app is a shopping platform your need to know if there is some technical or navigational issue why views aren’t being converted into sales. </p>
<p>A good place to start is knowing who your uses are, in terms of location. There is no denying that culture does play a part in user behavior and attitudes. This can relate to supported languages and time zones your users are in, through to what kind of icons you are using to represent features or actions. You want the icons to be self-explanatory and not offensive to a particular cultural group. The user’s insight also tells you which browsers and operating systems you need to support, or which new browser features you may be able to take advantage of.</p>
<p>The user flows feature under usage is quite a dramatic graphical illustration of how users navigate through your application. In a large application this is a useful tool for discovering feature usage. It may help you determine where to concentrate development efforts to expand features or remove options to simplify the application. If you have a flow or path that you want users to follow to a purchase, for example, this tool will help you understand if that process is working and how it could be improved.</p>
<p>Application Insights has also introduced the concept of impact, which is a graphical representation of page conversion rates relative to page load times. Impact is in essence a correlation between one action leading to another. For example, what is the correlation between a user being on the “special deal page” and then navigating to the checkout. For those of you with a statistical bent the impact figure is based on the time tested Pearson correlation coefficient. As with all statistical measures sample size is extremely important, that is the larger the better. If your dataset is statistically robust then impact will provide an objective and unambiguous picture of user behavior.</p>
<h1 id="App-Center-Analytics"><a href="#App-Center-Analytics" class="headerlink" title="App Center Analytics"></a>App Center Analytics</h1><p>Let’s now go back to the App Center and see how we can incorporate analytics into a mobile or desktop application. Adding analytics is pretty much the same procedure as for crashes. Install the analytics package and add the using statement. Then add the typeof analytics parameter to the AppCenter start statement. You need to put the Analytics TrackEvent statement everywhere in your code where you want to log events. That could be in user interface events, navigation or API calls.</p>
<p>The overview page gives you basic user session data over time. The number of users and the duration of their sessions. You also get a breakdown of devices and operating systems running your app, as well as countries and languages. The countries display relies on a devices SIM card, so this won’t work for desktop applications. You are able to filter the overview and events by version and time frame. While you can integrate App Center data with Application Insights, from my experience there appears little to be gained from it at this time.</p>
<p>The events page is where we can see all the TrackEvent calls we set up within the application. There is a raw count figure, number of users and per user count. Clicking on an event will display event detail which is basically those same metrics but presented graphically over time. Unlike Application Insights the usefulness of event tracking is very dependent on the placement of TrackEvent calls and what data you choose to send back. My feeling is that this service is a long way from maturity and we will see is capabilities grow over time.</p>
<p>Log flow is App Center’s version of Application Insights live metric stream. This displays calls to TrackEvent in real time, give or take latency delays. You could think of it as being akin to a live stream of debug statements. </p>
<h1 id="Customer-Feedback-Loop"><a href="#Customer-Feedback-Loop" class="headerlink" title="Customer Feedback Loop"></a>Customer Feedback Loop</h1><p>So far, we have looked at purely technical and system-oriented feedback. While system feedback is objective and relatively easy to collect, it by no means tells the whole story from a product development perspective. If your users are also your customers then making sure they are at least satisfied, if not happy, is important. This is especially true in the context of the widely adopted subscription model. Even if your users aren’t paying for your software you want to know if it is meeting their needs as best it can, enabling them to do their jobs efficiently. Ideally you would want this feedback to be integrated into your system and usage feedback loop. This serves to have one repository of issues that can feed into the development workflow system and allows you to easily relate user feedback with automatically collected system issues.</p>
<p>Let’s look at the types of user feedback we might want to analyze. Issues that come through the help desk fall into 2 basic categories, bugs or non-conforming behavior and incorrect usage. In a help desk situation, you have the ability to perform manual triage and create work items. The user issues can be grouped with related metrics or exception data.</p>
<p>You can build user feed back systems within the app like send a smile, or even put feature specific feedback at critical points like star ratings or binary answer questions. This is a double-edged sword. It allows you to target specific aspects of the app’s behavior, but you don’t want to annoy or inconvenience the user. An obvious candidate for a single question is the staple of the Net Promoter Score. On a scale of 0 to 10 how likely are you to recommend this product, service or company. Middle to low scores can be followed up with a more in-depth questionnaire to drill down to specific issues.</p>
<p>Surveys are another way to garner customer feedback. These could be through the app or delivered separately via email. Once again you are treading a fine line between gathering information and annoying the user. Survey design is a science in its own right, but generally speaking, questions that are multi-choice are easy to analyze, whereas free text answers, are where all the nuggets of knowledge, or the “unknown unknowns” reside. Another thing to keep in mind is that surveys where participants self-select tend to get responders who have a specific problem, so while good for finding issues may not reflect overall customer satisfaction.</p>
<p>Forums or user groups are another source of good customer feedback where a thread is dedicated to a particular topic. This is one place where the issues are already categorized, but still require you to pull the information from text or dialogue.</p>
<p>Finally, social media. In terms of how your app is truly perceived this where the gold is, but it is gold that is difficult to mine. You don’t know exactly where it is, and when you find it, it isn’t usually in an easily digestible form. This is definitely a situation where you don’t want to reinvent the wheel. There are plenty of services that monitor social media that you can subscribe to. When collecting the mentions it is usual procedure is to code the verbatim, that is categorize the data so it can be more easily analyzed.</p>
<p>There are several ways you can record your user feedback ranging from spreadsheets to dedicated project management tools such as JIRA, Basecamp or DevOps. The central goal is to have indicative examples of feedback in one place that can be directly related to work items. I say indicative examples because you don’t need every instance, just the ones that best illustrate the issue the work item ticket addresses. As for survey, questionnaire and rating data, this needs to be distilled down to essential and actionable facts that are correlated with user attributes such experience or time using the app.</p>
<h1 id="Baselines-and-Noise"><a href="#Baselines-and-Noise" class="headerlink" title="Baselines and Noise"></a>Baselines and Noise</h1><p>I’m sure you are aware of the concept of baselines. A known state, preferably good, that we can measure against to decide if system performance is optimal. In the case of Application Insights alerts we can view a summary of generated alerts over a specified time span within alert monitoring. There is a breakdown of alerts by severity. Clicking on a severity line will take you to a detail screen showing individual alert instances. Within this page there are various drop-down lists to filter the alert list. Smart alert groups have recently been introduced where machine learning algorithms are used to group alerts by similarity or correlated occurrence</p>
<p>To establish a baseline of your telemetry data you can review the apps analytics log. Under monitoring click Logs Analytics. Raw log data is vast and descriptive, basically there is a lot of it, and with that in mind Azure provides the Kusto query language to interrogate the logs. I can hear you, not another syntax to learn. Good news is that it’s really simple and the intellisense within the browser works a treat. In the left schema pane there are your tables, and if you expand one, as I have done here for requests you see the fields. A query starts with the table name – like a from clause without the from. You add additional clauses with the pipe character. Each clause pipes into the next one so their order is important. You can have multiple where clauses or join conditions with ands and ors as you would in SQL. The project clause is analogous to select in SQL – I guess these are the fields you are projecting into the result set. Finally, in this example we have a summarize clause which is analogous to a group by statement. So, this query is a count of requests to urls by result code where I’ve excluded urls that have ‘lib’, ‘css’ and ‘js’ in the path, and have occurred in the last 14 days. The results can be viewed as a table or a graph. These queries can be saved and easily executed at a latter date, making this an excellent tool for telemetry comparison over time.</p>
<p>Depending on the size of your application you could be looking at quite a lot of feedback data coming in, but hopefully not too many crash reports. There is definitely the possibility of being swamped by data resulting in paralysis by indecision or hyper responsiveness and consequential fatigue - the boy who cried wolf scenario. To avoid this, you need to establish baselines where you can decide what is real and what is just noise.</p>
<p>Within Application Insights you have several options for filtering alert messages. Firstly, there is the basic static alert that I demonstrated earlier where you can set the threshold value. This is fine when dealing with absolutes or critical events, but for most cases has limited usefulness. For more complex and changeable situations we can set dynamic alerts. These alerts are dynamic on several levels. There is the obvious scalability factor as your user base grows. In many cases there will be a seasonal component, whether that is that the app is used inside or outside of business hours, or usage patterns change as your primary markets get up or go to bed. According to Microsoft none of these things matter as, and I paraphrase “Thresholds detection leverages advanced machine learning from historical data”. They do mention the word deviation more than once in their literature, which leads one to think of standard deviations from normally distributed data. However, in my experience not all data comes in the form of a bell curve, so it must be a bit more sophisticated than that. Instead of setting a threshold value you set a threshold sensitivity. High sensitivity will give the most alerts as the smallest departure from historical behavior will trigger an alert. Medium sensitivity, which is the default is more balanced. While low sensitivity will require more and larger deviations from past data to trigger an alert. </p>
<p>When you select dynamic logic, you get the ability to set the number of violations that occur within a time frame before an alert is triggered. I recently had a situation with a service communicating with a supplier’s service every minute. If the communications went down, it was critical for operational staff to know. But for whatever, probably network related, reason there were occasional glitches, resulting in sporadic outage alerts. By setting the aggregation type to count, the sensitivity to high, and in Advanced settings, the number of violations to 6 in the last 10 minutes, an alert will be sent when communication has really gone down and not just spurious failures. </p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>In this course we started by looking at what feedback is, and the types of feedback that can be useful for refining your application once it’s been deployed. Starting with exception or error feedback we saw how a loop should be designed to integrate with development workflows. We then learned how diagnostic feedback could be incorporated into mobile and desktop apps using App Center. Then we analyzed those exceptions and saw how to use those exception events to send notifications and create work items that were integrated with Azure DevOps and GitHub. For web applications we saw how exception data could be pulled from Application Insights telemetry metrics. We set up alert rules that would send notifications via email or integrate directly with third party systems. Again, we learned how work items created in Application Insights could be fed through into Azure DevOps and then appear in Visual Studio Team Explorer for actioning.</p>
<p>We need a way to easily assess the state of our development workflow and with Azure DevOps we can use the dashboard facility to create a custom dashboard with a variety of graphical widgets. </p>
<p>Feature and usage is the next feedback element we examined. Using Application Insights, we can monitor the performance of an application not only in system performance terms, but also how users interact with it. The live metrics feature let us see real time usage. This is valuable information from a UI perspective. It allows to see whether the app is fulfilling its objectives in terms of conversion, and also is the application intuitive to use. This is valuable information for assessing efficacy of features, or whether those features need to be made more prominent within the application, or perhaps removed as they are redundant. Application Insights tells us where in the world and what operating system and browser is running our app.</p>
<p>Next, we went back to the App Center to see how we could implement event tracking and analytics in non-browser applications. Using the TrackEvent statement sprinkled liberally through an application you can see events being logged, and the log flow lets you see those events being triggered in real time.</p>
<p>User feedback is the final element in the feedback trio. This ranges from help desk contacts which are easy to categorize and integrate with workflows, through in app ratings and questionnaires, to forums and social media. Each of types of feedback have their pros and cons which more or less lie along the dimension of information accessibility versus information richness. Ratings are easy to deal with but are one dimensional. Questionnaires and surveys have more information, but the participants are self-selecting and normally have an axe to grind. Social media is where the unvarnished truth lies, but that is the most difficult to extract and integrate.</p>
<p>To make really good use of all this feedback data we need to know how it relates to our baseline state. We can use the feedback tools to arrive at baselines by analyzing historical data and monitoring changes over time. In the context of alerts the data coming in is dense and it will contain a fair amount of noise, so we saw how set up filtering to be notified of real events.</p>
<p>Using a combination of App Center, Application Insight and Azure DevOps you can build feedback collection and workflow integration solutions that will help you implement continuous feedback with relative ease.</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/11/18/AZ-400-Using-PowerShell-DSC-on-Windows-21/" rel="prev" title="AZ-400-Using-PowerShell-DSC-on-Windows-21">
      <i class="fa fa-chevron-left"></i> AZ-400-Using-PowerShell-DSC-on-Windows-21
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/18/AZ-400-Implementing-Azure-Active-Directory-Privileged-Identity-Management-23/" rel="next" title="AZ-400-Implementing-Azure-Active-Directory-Privileged-Identity-Management-23">
      AZ-400-Implementing-Azure-Active-Directory-Privileged-Identity-Management-23 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Course-Introduction"><span class="nav-number">1.</span> <span class="nav-text">Course Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#What-is-Feedback"><span class="nav-number">2.</span> <span class="nav-text">What is Feedback?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Error-Feedback"><span class="nav-number">3.</span> <span class="nav-text">Error Feedback</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Capturing-Errors-with-App-Center"><span class="nav-number">4.</span> <span class="nav-text">Capturing Errors with App Center</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Integrating-App-Center-with-Workflows"><span class="nav-number">5.</span> <span class="nav-text">Integrating App Center with Workflows</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Applications-Misbehaving"><span class="nav-number">6.</span> <span class="nav-text">Applications Misbehaving</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Application-Insights-Telemetry"><span class="nav-number">7.</span> <span class="nav-text">Application Insights Telemetry</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Integrating-Application-Insights-with-Workflows"><span class="nav-number">8.</span> <span class="nav-text">Integrating Application Insights with Workflows</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Making-Sense-of-Insights-Data"><span class="nav-number">9.</span> <span class="nav-text">Making Sense of Insights Data</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Integrations-Built-into-Application-Insights"><span class="nav-number">10.</span> <span class="nav-text">Integrations Built into Application Insights</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Feature-and-Usage-Feedback-Loop"><span class="nav-number">11.</span> <span class="nav-text">Feature and Usage Feedback Loop</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#App-Center-Analytics"><span class="nav-number">12.</span> <span class="nav-text">App Center Analytics</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Customer-Feedback-Loop"><span class="nav-number">13.</span> <span class="nav-text">Customer Feedback Loop</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Baselines-and-Noise"><span class="nav-number">14.</span> <span class="nav-text">Baselines and Noise</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Summary"><span class="nav-number">15.</span> <span class="nav-text">Summary</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2736</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">72</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
