<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Course IntroductionGreetings, welcome to Cloud Academy’s course on implementing Azure infrastructure compliance and security. I’m glad to have you along on what is bound to be an exciting and enlighte">
<meta property="og:type" content="article">
<meta property="og:title" content="AZ-400-Implementing-Azure-Infrastructure-Compliance-and-Security-20">
<meta property="og:url" content="https://example.com/2022/11/18/AZ-400-Implementing-Azure-Infrastructure-Compliance-and-Security-20/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:description" content="Course IntroductionGreetings, welcome to Cloud Academy’s course on implementing Azure infrastructure compliance and security. I’m glad to have you along on what is bound to be an exciting and enlighte">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-11-19T00:37:57.000Z">
<meta property="article:modified_time" content="2022-11-27T17:29:56.000Z">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/2022/11/18/AZ-400-Implementing-Azure-Infrastructure-Compliance-and-Security-20/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>AZ-400-Implementing-Azure-Infrastructure-Compliance-and-Security-20 | Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Hang's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-400-Implementing-Azure-Infrastructure-Compliance-and-Security-20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          AZ-400-Implementing-Azure-Infrastructure-Compliance-and-Security-20
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:37:57" itemprop="dateCreated datePublished" datetime="2022-11-18T20:37:57-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-27 13:29:56" itemprop="dateModified" datetime="2022-11-27T13:29:56-04:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-400/" itemprop="url" rel="index"><span itemprop="name">AZ-400</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-400-Implementing-Azure-Infrastructure-Compliance-and-Security-20/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-400-Implementing-Azure-Infrastructure-Compliance-and-Security-20/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Course-Introduction"><a href="#Course-Introduction" class="headerlink" title="Course Introduction"></a>Course Introduction</h1><p>Greetings, welcome to Cloud Academy’s course on implementing Azure infrastructure compliance and security. I’m glad to have you along on what is bound to be an exciting and enlightening journey into the world of the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure cloud</a>. But before we begin, I will briefly introduce myself since it’s the polite thing to do. My name is Jonathan Bethune. I am a course developer with Cloud Academy. For many years I have worked as a software developer and consultant but long before that I was actually a high school teacher. I must say it’s a lot of fun getting back into teaching, only now I get to teach technology.</p>
<p>This course is meant to help you better understand Microsoft Azure, specifically those features related to security and compliance. The course should be helpful both for people aiming to pass a certification exam and for folks already out in the field just looking for some practical help.</p>
<p>So you’re probably wondering, you know, what are the prerequisites for a course like this? What exactly do we expect you to already know? Well, just a few things. For one, you should be familiar with cloud providers generally. You should already have some basic knowledge of Azure. We’re not gonna teach you how to set up an account or anything like that. Secondly, you should have some basic understanding of programming and cloud infrastructure. We will be looking at PowerShell scripts and working with virtual instances. If this is your first time seeing either of those things you might wanna consider a more rudimentary class.</p>
<p>So let’s get more specific. Learning objectives. This course has three. One, students will learn how to scan infrastructure using Azure tools to prevent drift leading to compliance violations. Two, students will learn how to automate configuration using Azure Automation and Desired State Configuration. And three, students will learn how to create secure and compliant software pipelines in Azure. Now, these three objectives map to the three sections of the course. Each section will include explanations and video demonstrations to ensure you learn everything.</p>
<p>And lastly, I would like to also invite folks to send us feedback: questions, concerns, suggestions. We always appreciate people taking the time to do that. So thank you in advance for that. And without further ado, let’s dig in and start learning.</p>
<h3 id="Lectures"><a href="#Lectures" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="Compliance-amp-Security-Scanning"><a href="#Compliance-amp-Security-Scanning" class="headerlink" title="Compliance &amp; Security Scanning"></a>Compliance &amp; Security Scanning</h1><p>Compliance and security are two critical concepts in the world of cloud software systems. They reinforce each other in important ways, so I would like to start by making sure you understand the distinction early and clearly. Security refers specifically to how well-protected our system is from threats. And by threats we might mean external agents and bad actors like hackers, and also how well protected we are from internal actors like careless employees, any other thing that might compromise our systems. So that’s security. Compliance refers to the degree to which our architecture conforms to a specific standard. So we may have defined an amazing security standard to protect for everything. However, our system is not really safe unless it is also compliant with that standard. So by the same token, being compliant is not helpful if our standard is too weak.</p>
<p>I’m going to reiterate this for emphasis ‘cause it’s important. The state of having a secure software environment comes from both having a solid security standard and ensuring that your system is compliant with that standard. In practice, it’s very difficult to ensure security without thinking about compliance. Security just on its own is very abstract and nebulous, am I secure or not? Compliance gives us a framework for defining threats and prioritizing solutions for hardening our systems.</p>
<p>In this first lesson as part of section one, we’re going to demonstrate how we can define security standards in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> and gain confidence that we are compliant with those standards.</p>
<p>So let’s start by talking about Azure Security Center and policies. So Azure Security Center, or ASC as we can call it, is Azure’s comprehensive platform-wide infrastructure security tool set. ASC is deeply integrated with all Azure services and does not require any additional deployment. It can be used with other clouds or on-prem solutions, it is at its most intuitive, though, in an Azure environment. ASC includes scanning tools for general vulnerability assessment. There’s a VM scanning tool for checking Azure instances as well as a newer container image scanner that will identify known vulnerabilities within containers, software containers, in your Azure Registry. Scans occur automatically when containers are uploaded and run continuously on a schedule. Note that these features are part of the standard tier price, not the free tier. So you do have to enable that in your subscription.</p>
<p>A basic construct of Azure Security Center is the policy. ASC policies are what define the security standards used for measuring compliance. ASC includes dozens of pre-defined industry standards such as SOC TSP, ISO 27001, PCI. These standards are widely used and exhaustively studied and audited. They cover things like access control, incident response, encryption, and a host of other security concerns. Some will apply to specific Azure services. ASC also has support for defining custom policies if you have needs specific to your organization.</p>
<p>The ASC dashboard lets us see all of our policies in one place and map them to specific resource groups and subscriptions. Of particular use is the Regulatory Compliance dashboard which lets us see precisely how compliant our system is with industry and org-specific standards. What’s more, ASC also gives an overall security score with severity rankings. Thanks to this in practice, you really don’t need to spend a lot of time actually creating original policies from scratch and updating them. With the built-in industry security standards, the compliance dashboard, and the security score, you have all the tools you need to lock down your environment just by following Security Center’s lead.</p>
<p>Compliance with ASC security policies is tracked automatically over time in the dashboard. We can easily see which subscriptions are covered by specific ASC policies and which resources are compliant. This is all just extremely helpful for auditing purposes, particularly for businesses that are in industries with very strict regulations regarding data security. The dashboard will give us an audit trail should something go wrong and should there be a need for forensic investigation.</p>
<p>So that’s basically it for ASC. We will go deeper into the actual dashboard in the demo. In the next lesson, we’re gonna talk about drift which is a phenomena of systems that may be compliant but they don’t always stay compliant. So we’ll see ya there, thanks for listening.</p>
<h3 id="Lectures-1"><a href="#Lectures-1" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="Security-Center-Demo"><a href="#Security-Center-Demo" class="headerlink" title="Security Center Demo"></a>Security Center Demo</h1><p>Howdy friends. So in this demo, we’re going to do a brief introduction to Azure Security Center. We’ll show how to navigate the ASC dashboard in the browser, check out our security scores, show where the security policies are defined, and talk about how we can improve compliance. The whole demo is only a couple of minutes so just sit back and enjoy.</p>
<p>So let’s start with the Azure portal. We’re going to assume you already have or know how to set up an <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> account. This isn’t a beginner tutorial so if you have an account, Security Center is enabled by default. It will have the basic functionality for free tier accounts. But for this class, we are going to assume that you have upgraded, that you’re using the standard tier features because we do cover some standard tier features in this class. So let’s first take a look at the dashboard.</p>
<p>So right away, the overview here gives us a nice little snapshot of the world basically. This particular Azure account is just a dummy account. It’s very small, it’s just running a single VM. However, what’s cool is we can see right away how compliant our system is with various regulatory standards, things like PCI DSS or SOC TSP. So, let’s think about this though. Let’s dig a little bit deeper into what the score means, 295 out of 530.</p>
<p>What exactly is this score? In the Secure Score dashboard here, we can see exactly which areas of our system need attention with regards to security. Here we can see sections for Identity and access management, Networking, Compute, Data and storage, etc, etc. And we can drill down into specific tasks. You can click on one and see here, there should be more than one owner assigned to your subscription. All right, pretty straightforward. It’ll guide us toward solving that. So these are tasks that will harden our system. Oh, it’s saying Security Center. Okay, so that’s just the security score.</p>
<p>But let’s be a little more specific here. Let’s talk about compliance, let’s talk policies here. In the Security Policy section here, we can drill down into our subscription which is a free trial and we can see exactly which policies are in effect. In here, we can see a few. There’s the default ASC here, Security Center Policy. And then these policies here, these are industry and regulatory standards, all right. So these are compliance policies that again, deals with things like PCI DSS, SOC, and then here, we see Azure’s own standard Azure CIS 1.1.0 and ISO 27001. These are out-of-the-box industry policies that you get and add more if you want. You can click here and add additional policies like Swift and NIST. And then, what’s cool is we can also define custom policies here in the custom initiatives section. There’s one here I’ve created called Block VMs and you can see in its description, No public IPs, which actually is not a very good description. But if we drill down on that, we click on it and we can see that it has two policies with distinct effects, built-in effects. Network interfaces should not have public IPs and then also Internet-facing virtual machines should be protected in network security groups. So this is our own custom policy.</p>
<p>So, going from there, as we’ve said in the earlier lessons, you know, it’s one thing to have good policies. The most important thing though is compliance with those policies. That’s really what we care about. So, what we’re gonna do is look at the Regulatory Compliance dashboard. This is really one of my favorite things about Azure. The Compliance dashboard is a tool for tracking compliance and we get in one neat place a very clear picture of our cloud environment’s compliance with multiple industry standards. As a former network security engineer, this is one of my favorite things if I’m working in an Azure environment. We can see here exactly what’s failing, what’s passing. We can look at specific standards, again, PCI and SOC. Probably one of the coolest things about it is that we can get very granular. We can select individual standards here, like ISO 27001. And then we can see exactly where we have gaps in those standards and drill down to specific issues here like Network Security Management, all the way down to Controls and then, that’ll get us down to the exact requirements and recommendations. And click on that and get solutions and advice for solving those issues right away. So here we’ve drilled down to just in time network access should be applied at virtual machines, right? And then, we can go straight into solving that issue.</p>
<p>So, there you have it really, at a high-level. That is ASC. It’s one of Azure’s most compelling solutions I think when compared to other cloud providers. There are many helpful features here we didn’t even go into. File Integrity Monitoring. You have Adaptive network hardening. You have various other management dashboards and tools. It’s just a nice single source of truth for all things security in Azure cloud. And hopefully now with this walkthrough, you have some confidence in managing security policies and compliance in an Azure context. Thanks for watching.</p>
<h3 id="Useful-Links"><a href="#Useful-Links" class="headerlink" title="Useful Links"></a>Useful Links</h3><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/security-center/security-center-compliance-dashboard">https://docs.microsoft.com/en-us/azure/security-center/security-center-compliance-dashboard</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/security-center/security-center-vulnerability-assessment-recommendations">https://docs.microsoft.com/en-us/azure/security-center/security-center-vulnerability-assessment-recommendations</a></p>
<p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/blog/integrated-vulnerability-assessment-with-azure-security-center/">https://azure.microsoft.com/en-us/blog/integrated-vulnerability-assessment-with-azure-security-center/</a></p>
<p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/updates/scan-container-images-for-vulnerabilities-in-azure-security-center/">https://azure.microsoft.com/en-us/updates/scan-container-images-for-vulnerabilities-in-azure-security-center/</a></p>
<h3 id="Lectures-2"><a href="#Lectures-2" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="Preventing-Drift"><a href="#Preventing-Drift" class="headerlink" title="Preventing Drift"></a>Preventing Drift</h1><p>Now that you are grounded in Azure’s toolset for getting your systems compliant, we now are going to learn how to keep them that way. Drift is the bane of many a systems engineer. By drift we mean configuration drift, not the cool racing technique. The reality of drift, the reality that over time software systems tend to become less compliant and more chaotic. Now this happens a thousand different ways. A hotfix will get deployed and it updates a yaml file but doesn’t put the change into version control. Or a firewall is opened up during a maintenance window but the port and protocol rules are not returned to their strict settings afterward. Or a server gets rebooted, blowing away some critical in-memory credential. The older our infrastructure is, the more likely we will have all sorts of lore and history and drift building up and making it less stable. Configuration drift is a very serious security threat.</p>
<p>Fortunately <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> gives us some helpful tools for detecting drift in our configuration. Now your first line of defense is the Azure Resource Manager or ARM. This is the logical grouping of resources in Azure, and it’s frankly one of the most helpful features when compared to other cloud providers. ARM deployment templates allow you to define a discrete set of resources, as well as their configuration in one easy to monitor, monitor and update place. These templates can be treated as infrastructure as code and checked into version control. The infrastructure as code is a really important concept.</p>
<p>If you’ve ever worked with Terraform or Cloudformation, you may be familiar with the concept already. But the basic idea of infrastructure as code is that you don’t want to make any ad hoc changes to your environment, by clicking around in the web console or manually running scripts. You don’t wanna do arbitrary changes this way. As systems engineers, we’re often tempted to just SSH to a server, edit some file, restart the service and then be on our way, right? It fixes the problem, right? Wrong, it creates technical debt. We absolutely must avoid this type of approach. Using our resource manager, and ARM templates, every change can be version controlled, public, transparent, and easily undone.</p>
<p>Now the second line of defense is the activity log. This is your one stop shop in Azure for seeing changes to Azure resources. Now, this won’t catch everything necessarily, if you SSH to a server, but most changes whether it’s done with a CLI tool or script or using the console. If anyone has made that change to Azure resources, that change should be reflected in the activity log. It’s a good idea to backup these logs and to audit them regularly.</p>
<p>Now, your third line of defense is at the VM level, the level of virtual machines and it’s a nifty little tool called change tracking. And this is a slightly newer feature. And it works with Windows hosts and many Linux distributions, but not all. See the documentation <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/change-tracking">link</a> for the full list of supported Linux distros.</p>
<p>Now, you enable this feature by turning on inventory and change tracking from your Azure automation account, or from the virtual machine UI in the web. The video demo we’ll go over will show you how to do it. Once it’s enabled, Azure will identify changes to running software, such as Linux daemons and Windows services. And what’s really cool there’s also a built in FIM, File Integrity Monitoring, FIM solution, and this FIM solution lets you define specific files that you want to track for changes as well as the content of the files themselves. So you can see if some config file or credential has been changed and you can even see a diff of those changes.</p>
<p>So our goal in this section was detecting drift, and to maintain compliance with security policies. I hope you’ve got some good ideas. Now we went through our main lines of defense. In section two we’ll go one better and learn how to prevent drift by using a really cool service known as Desired State Configuration or DSC. Be sure to check out the video demos to lock in your understanding of compliance and ASC before moving on to the next section where we will learn how to automate much of that cumbersome compliance and security policy work. See you there!</p>
<h3 id="Lectures-3"><a href="#Lectures-3" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="ARM-Activity-Log-amp-Track-Changes-Demo"><a href="#ARM-Activity-Log-amp-Track-Changes-Demo" class="headerlink" title="ARM, Activity Log &amp; Track Changes Demo"></a>ARM, Activity Log &amp; Track Changes Demo</h1><p>Greetings, welcome to the second demo for our course on Azure security and compliance. This demo will be pretty short, we’re just going to review the “three lines of defense” for detecting drift in an <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> cloud environment. We’ll be showing off the Azure Resource Manager portal, the activity log, and how to enable the track changes feature. So let’s dive right in.</p>
<p>First of all, we’ll start off in our portal, and we’ll go to the Resource Groups section. Now, in our test account here we only have a few small groups, in two geographic regions here, US east one and two. To see our config, we’ll just click on our group that’s interesting to us. So for us let’s try “TestGroup1.” And right away we can get a lay of the land, we can see in the menu that there is an overview here which is where we start. We have a number of additional things like access control, and the activity log up here, which we’ll come back to. As we mentioned in the lesson one of this section, one of the key things in the Resource Manager, in ARM is the concept of deployment templates.</p>
<p>So let’s take a quick look at that. We can just click on “deployments” actually. Then select the one that we care about, it will take a second to load. Okay, so once those are loaded, we can see our deployments. And we can select any of the ones we care about. There’s not a lot of deployments here ‘cause we’ve just done a few basic VM’s, but if we click on any one at random, we can see, for example, this one, creation of a server. And if we go into this server creation, cool thing is we can actually click on the template and we get this big JSON file that describes everything about the deployment, about the resource. So this is human readable and parseable, which is pretty cool. So it’s very easy to manage this kind of thing in version control if you wanted to. They have an infrastructure’s code paradigm. In the web portal, we get nice time stamps and status reports on every deployment, and we can check the parameters as well, and scripts. Really it’s a great first source of truth for identifying drift. So we’ll go back to our resource group.</p>
<p>And now, we’re gonna take a look at the activity log. Now, the activity log we can also get from the Resource Group menu. The log will just give us information about Azure environment events detectable by the API. So this is an important thing to note. If you SSH to a server and edit a file or do some other more surgical operation, it won’t necessarily be reflected here unless you have detailed change tracking enabled which we will talk about. But keep that in mind.</p>
<p>The activity log is for things recognizable by the Azure API. And it’s still very easy as a high level source of truth to parse when it comes to resources. So we can see a few events here. One of the nice things is that we can change the timeframe, this is really only the last six hours. So we can change it to the last week, and we can see how much broader range of options here, of output, right? And we can also add additional filters here aside from time span. So, this is another really easy way to catch drift, by going through and parsing this log. Okay, so now the last thing we’re gonna do is we’re going to show off the track changes feature. And this is not difficult to do but there are a few prerequisites.</p>
<p>Now, first of all, one thing you need is you have to enable an Azure Automation account, which is not enabled by default. So, you just go to that item in your portal, and you’ll have to enable it, you have to select it. And you can enable it even with a free tier account. If that is done, if you have an Azure Automation account, here you see there’s two. Then, all you need is a Log Analytics work space. To define that, you can see the item here in Azure services or you can search for it. You can literally just type Azure log analytics, or just log analytics and it’ll just pop up, if you can’t find it. And then you need to define a workspace, and when you create new, you’ll have to give it a name and a location. Now, the location is actually really important. One note here is that the regions do not have a one to one mapping, the Log Analytics workspace and your Automation account. So for example, if your Log Analytics account is in US region east one, US east one, you’ll actually need an Azure Automation account in east two. So, that mapping is a little bit annoying, we’ll give you a <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/how-to/region-mappings">link</a> to the documentation to see those mappings.</p>
<p>But anyway, as far as enabling it, you go into your Automation account, this is one basic account. This account does not have change tracking enabled, but to actually enable it, basically we just go in to our Automation account, and we click on the change tracking here, and we will pick the workspace we care about.</p>
<p>The Automation account has a lot of different features. I’m gonna actually go to an account that has it enabled. I could actually do a whole lesson on just Azure Automation account because honestly as a DevOps guy it’s really a dream tool set, all of the stuff they have here. But this is a security-focused class so we’ll focus in on that. Once you have change tracking here enabled, you’ll see here that you have a few different options here.</p>
<p>So, we have options for files, for daemons, for events, registry, software window services. There’s no changes in this account because it’s a pretty empty account, but the cool thing is you can do diffs by clicking on individual things here. And I think from here it’s fairly intuitive, but this is our final point for this demo. That about does it. Resource Manager, activity log, and change tracking. Three ways to preempt and stop drift in your environment. All pretty easy to see in the web, and easy to work with at the API level. So, hopefully this is helpful. Cheers.</p>
<h3 id="Useful-Links-1"><a href="#Useful-Links-1" class="headerlink" title="Useful Links"></a>Useful Links</h3><p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/da-dk/blog/tracking-configuration-changes-for-your-azure-vm/">https://azure.microsoft.com/da-dk/blog/tracking-configuration-changes-for-your-azure-vm/</a></p>
<p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/updates/azure-stack-security-drift-detection/">https://azure.microsoft.com/en-us/updates/azure-stack-security-drift-detection/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.auditwolf.com/blog/configuration-drift">https://www.auditwolf.com/blog/configuration-drift</a></p>
<h3 id="Lectures-4"><a href="#Lectures-4" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="Desired-State-Configuration-DSC"><a href="#Desired-State-Configuration-DSC" class="headerlink" title="Desired State Configuration (DSC)"></a>Desired State Configuration (DSC)</h1><p>If you are an infrastructure engineer responsible for managing an <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> environment, Azure Desired State Configuration is your friend. Desired State Configuration, or DSC for short, is a declarative PowerShell platform that lets you turn infrastructure into code.</p>
<p>Infrastructure as code is not really a new concept, but it is a powerful one. Cloud infrastructure has to be managed and accounted for somewhere. When it isn’t in code, it usually ends up in a dozen other places, scripts, developer laptop BASH history, Chef server logs, and data bags, and YAML files on a forgotten server. The table in an SQL database, a product manager’s email, a post-it note on someone’s monitor, etc, etc. Managing infrastructure configuration is very hard when it isn’t transparently all in one place. This is the problem the whole infrastructure as code thing is meant to solve. Ideally, our infrastructure is defined in a shared audited version-controlled repository in GitHub or somewhere like it.</p>
<p>DSC lets us do exactly that using Powershell. If you’ve ever worked with tools like Chef or Puppet or Terraform, then you can start to get a mental picture. In DSC there are three basic concepts: resources, configurations, and the local confirmation manager, or LCM. Resources are the things: Azure VMs, individual files, processes, and other Azure assets. Think of them as our nouns, the object of our configurations. Configurations then, as you may have guessed, are like verbs. They describe the desired state of our resources. Configurations can incorporate a wide variety of parameters. We will dive into an example in a moment. But let’s go to lastly, the LCM, the local configuration manager. This is the brain of the operation, responsible for ensuring our resources are in sync with our configuration. The LCM continuously pulls the state of our infrastructure to ensure everything is running as defined.</p>
<p>Now here’s a very simple example. Take a look at this. This includes a single named configuration referencing a single node called TEST-PC1. Node resources are our Azure VMs. These are Windows host and the configuration type here is a Windows feature. Each gets its own block and we’re defining a parameter for that feature. Here specifically a flag, ensuring a named feature is present.</p>
<p>So how do we actually use this configuration code? There are two prerequisites both of which, thankfully, can be done right from the web browser. First of all, the VMs needs to be connected to DSC. This just requires going into your automation account, clicking on DSC, and then selecting add to connect the node to DSC. Secondly, you need to upload and compile the configuration code. So you have your .ps1 config text file locally on your laptop and what you can do from the dashboard is upload it or copy paste it using the configuration editor. You can also do this using CLI tools. Once the config is uploaded you need to compile it. </p>
<p>Now, this just makes sure that there are no syntax errors or problems before the config is applied. Once these two steps are done, connecting the VM to DSC and then compiling the config after uploading it, you can just apply the config to the desired node right in the web portal with a simple point and click. Now, this should give you a sense of how configurations and resources look in actual code.</p>
<p>But we can’t forget about the third element, the LCM. The local configuration manager actually has its own configuration. We can adjust how frequently the LCM executes configurations and we can toggle the LCM back and forth between the push and pull model. The push model is the default, where the LCM server will just regularly push configurations out to all designated resources. The latter pull model allows for more flexibility as this requires you to define some form of pull service. This lets you specify for individual resources exactly which pull service endpoint to use for config or resources.</p>
<p>And then finally we should mention that DSC has support for partial configurations. That is pulling configuration from multiple sources and then combining them into one complete config. This might sound strange but there is a reason for this use case. It can be done in both a push model and a pull model. Now this more complex use case, what it does actually is it adds a really interesting flexibility to your configuration management paradigm.</p>
<p>So here’s an example scenario where this might be helpful. Imagine you’re in a larger team with different groups of developers and these different groups of developers have specific responsibilities. So for example one team is responsible for the database config and another team is responsible for app config. Using partial configurations, each team can define their own part of the system and then use DSC to assemble it all come deployment time.</p>
<p>Okay, so now we have some basic understanding of Azure DSC. This is crucial before we move on into the next level of automation. DSC is really just a subset of our Azure Automation Account. Before we can see how it relates to security compliance we’ll need to explain how we can effectively administrate DSC infrastructure, how we can manage it. The next lesson will cover that and include a demo showing how to actually utilize DSC scripts. See you there.</p>
<h3 id="Useful-Links-2"><a href="#Useful-Links-2" class="headerlink" title="Useful Links"></a>Useful Links</h3><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/automation-dsc-overview">https://docs.microsoft.com/en-us/azure/automation/automation-dsc-overview</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/powershell/scripting/dsc/managing-nodes/metaconfig?view=powershell-7">https://docs.microsoft.com/en-us/powershell/scripting/dsc/managing-nodes/metaconfig?view=powershell-7</a></p>
<h3 id="Lectures-5"><a href="#Lectures-5" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="Azure-Desired-State-Configuration-Demo"><a href="#Azure-Desired-State-Configuration-Demo" class="headerlink" title="Azure Desired State Configuration Demo"></a>Azure Desired State Configuration Demo</h1><p>Okay, howdy and welcome to the first video demo for section two in our course on Azure security and compliance. In this video, we’re going to do a brief introduction to Azure Desired State Configuration in the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> web portal. We’re going to show how to first import a node into our DSC system so that it can be assigned configurations. Then we’ll create a very simple DSC script so you can see some code. And then finally, we’ll upload our DSC code, we’ll compile it and we’ll assign it to a node at which point we can see the node become compliant.</p>
<p>So we’ll start by importing a node into our DSC account. So, we’ll assume you already have a node ready to go that you know how to launch a node. So one thing to be aware of is the region mapping between nodes in Azure Automation services. We’ll have links about that in the lesson. But basically, to import nodes, there’s a couple of ways you can do it. You can use the CLI tools or the API or you can use the Web Console. Now for this demo, we’re gonna use the Web Console because it makes it easier to see exactly what’s happening. But of course, do be aware everything we do here can be readily scripted, using PowerShell.</p>
<p>If you have to do, do it at a larger scale, pointing and clicking around for lots of nodes can be kind of painful. So to actually import the node, we’ll just go into our automation account for this will use this basicAccount2 and we can look and see information about nodes in DSC portal in the state configuration DSC section.</p>
<p>Now, when we go here, we can see that initially, there are no nodes available. So we wanna add a node, we’re gonna click on Add. And this will show us the nodes are available here we can see there’s only one. So we click on that node and to connect we just click Connect. And there’s some default configuration here, we can change if you want but for our purposes, the default is fine. And this will take a second. Now be aware that if your node is not in the right region, you’ll probably get an error in this connection period. It’ll bubble up. So do be aware of that issue make sure that the account and the nodes are in the right regions.</p>
<p>Okay, so once the node connects and it might take a little while for the connection to finish, you’ll be able to see the node in your state configuration portal. You’ll see it here. So once we have that, we want to next assign some DSC configuration to it and before that, we have to create the code of that configuration. So we can do this a couple of ways. We can write the script and in a file and upload it. We can also use the built in text editor here, we can go to compose configuration, and write the script right there. We’re going to use the former method, we’re gonna write a configuration file and upload it, so to do that, we click on configurations, and we click on Add. Now, I’m not gonna edit a whole thing from scratch. I actually have some basic config from Microsoft documentation, which I can show you right here. Very short, simple file. So what we’re gonna do is upload this file. We’ll go to our uploader here, here we can see it, we can add a description we’ll say, some test config, obviously you wanna do a better screen description than that and then just click OK. And your that file, that TestConfig.ps1 file, it will be uploaded into the dashboard. So we can see it right there.</p>
<p>Now, once that’s done and saved, we now have the configuration ready to go in our account, but we can’t assign it to the node as is, before we can assign it to our node we need to compile it. This is also pretty simple to do. We just go select the configuration that we’re interested in and we’re gonna select compile. Yes, we’re sure we wanna compile it. Now, if there is an error in the config, it will show up here. The compilation will fail if there’s a syntax error, for example. And it takes a second to run this compilation, but once it’s done, we’ll be able to actually use it.</p>
<p>Okay, and once again, once the compilation is done and it might take a little bit, we should see in the compiled configuration section, we should see that test config is available, it’s now usable. So we can actually assign this to a node, which is pretty straightforward. We click on our nodes, and we go to assign node configuration. And then we should see the available compiled configurations. There’s one here, we’ll select that and it’ll assign it to a node and what’s really cool is that once it is assigned, DSC will automatically check to see that the node is compliant with that configuration. So we can go back and we can refresh. And we can see we have one node here. And it’s pending to check if it is compliant and once that check is finished, it will go green here, we’ll see that it’s compliant. So you can see why we would want our security policies incorporated into DSC. We effectively automate security compliance by having it all in this one place.</p>
<p>So that’s it for this demo. You should now have a basic understanding of Azure DSC and how to use it in the Azure portal. So thank you for watching. And here it is now, it’s green, it’s compliant.</p>
<h3 id="Lectures-6"><a href="#Lectures-6" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="Azure-Automation-State-Configuration"><a href="#Azure-Automation-State-Configuration" class="headerlink" title="Azure Automation State Configuration"></a>Azure Automation State Configuration</h1><p>In the previous lesson, we learned all about the magic of DSC. A PowerShell toolset of declaring configuration state. This is great for getting everything nearly defined and establishing a proper infrastructure as code paradigm. But how do we keep things in a good state? Aside from obsessively refreshing the dashboard every 20 seconds. How can we add a layer of automation and management above DSC to guarantee compliance with all of the level of configuration we have defined in DSC?</p>
<p>Outside of <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a>, there are a lot of different tools and frameworks. We mentioned a few such as Chef and Puppet, Ansible, Terraform. However, within Azure, we have a very powerful service that integrates quite neatly with PowerShell DSC. It is known as Azure Automation Configuration State and if you’re a DevOps engineer using Azure, this too will become your best friend.</p>
<p>We will refer to Azure Automation State Configuration as AASC for simplicity’s sake because it’s a long name. And we want to differentiate it from Azure Security Center, ASC. So AASC, Azure Automation State Configuration, works on top of DSC. It is built right into the Azure automation dashboard as state configuration with DSC in parentheses in the left-hand menu basically. So recall that DSC is comprised of resources and configurations and the LCM. By itself, we would need to think of a way to manage all of these artifacts generated and referenced by the various PowerShell scripts. Comprising our overall DSC infrastructure. What AASC does is it gives us a centralized system for managing all of our DSC artifacts with an intuitive pull-based deployment model.</p>
<p>AASC lets you manage not only DSC artifacts but the target nodes and the reporting settings. The pole server collects state data from all target nodes automatically and can be configured to send reports to the log analytics service if you want reports to be more actionable. We will come back to that in a bit. AASC works with both Windows and Linux operating systems and can be configured to work within private networks and proxies. The only prerequisites for actually using Azure state configuration is that you have an Azure automation account and are using a Standard Azure Resource Manager VM since the classic VM version isn’t supported yet but that may change.</p>
<p>So that’s enough about the high-level features in specs. Let’s actually talk through a practical example so you can understand how AASC will make your life easier. So let’s start with a basic example of DSC configuration. Here we have a pretty basic script that’s meant to ensure a specific config based on whether or not a node is a web server. So we’re just you know in confirming a specific setting based on the node. So we can check this code into a git repo and we can run it manually from a terminal if we want. But what do we gain if we integrate it with AASC?</p>
<p>With the whole dashboard and Azure report. From the Azure portal, we can import this script with just a few clicks. We go into Azure automation section, we click on state configuration, the DSC page, we click into configurations and then we select add. And from there, we upload our config file. There’s also a text box to add a description which I strongly recommend doing. You wanna know some info about the scripts you’ll thank your future self. Now as before once you upload that config, you have to compile it into the node configuration before it can be applied to the pull server and actually run on machines. And this is again just a few clicks in the UI, we did that last lesson.</p>
<p>So once compilation succeeds, the new configuration can be applied to one or more node groups. Now, this may not seem like a big deal applying to node groups from the portal, you know. It may not seem all that important when you’re just dealing with a single, simple PowerShell script. However, remember that a more realistic application architecture is gonna have far more moving parts than this. We might have a queuing system, we might have a caching layer, we might have multiple front ends, we could have proxies and authentication systems and different databases, etc. We could need dozens of PowerShell scripts of varying sizes to keep everything in a healthy state and avoid drift. Managing all of that is no easy task. AASC makes it a lot easier and the even cooler thing about AASC is that it not only manages our DSC code but it let us manage the VMs themselves.</p>
<p>AASC supports adding Azure nodes both under the standard resource management and even VMs and other clouds and it lets us manage classic nodes, classic nodes not the classic resource manager but classic nodes themselves. So we’ll add a link to the documentation about this. This kind of multi-cloud functionality but what this means is that AASC lets us manage for example AWS EC2 nodes. This is a bit of out of scope, for this class to go into detail on that but it’s nice to know that if you do have or if you need to set up a multi-cloud infrastructure Azure does give you the tools to at least manage much of your config in one place. </p>
<p>Now one best practice we want to mention here for scenarios where you need quick response times to compliance failure, is that you should forward AASC reporting data to Azure Monitor logs. As mentioned AASC readily integrates with your Azure log analytics account. With a few PowerShell commands you can configure Azure Monitoring to aggregate AASC data so that it is viewable in the Monitoring section of the AASC dashboard. So you can look at the logs and monitor all of the reporting data going on in your automation state dashboard. You can then set up queries to trigger emails or alerts or other actions if a monitor detects a compliance failure in the logs. So this is really important for cases where compliance failures are very dangerous. So for the exact walkthrough on this, see the documentation link to show exactly how to set that up, if it’s an interest to you.</p>
<p>So that about wraps up Azure Automation State Configuration as we can see it is one of the best solutions for automating compliance by managing DSC infrastructure in an Azure cloud. It takes practice to really understand it always a lot of moving parts, so be sure to watch our demos and play around with it on your own. In the next lesson, we go one step further by introducing VM agents and extensions. It will be a blast, see you there.</p>
<h3 id="Useful-Links-3"><a href="#Useful-Links-3" class="headerlink" title="Useful Links"></a>Useful Links</h3><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/tutorial-configure-servers-desired-state">https://docs.microsoft.com/en-us/azure/automation/tutorial-configure-servers-desired-state</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/automation-dsc-overview">https://docs.microsoft.com/en-us/azure/automation/automation-dsc-overview</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/automation-quickstart-dsc-configuration">https://docs.microsoft.com/en-us/azure/automation/automation-quickstart-dsc-configuration</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/powershell/scripting/dsc/overview/overview?view=powershell-7">https://docs.microsoft.com/en-us/powershell/scripting/dsc/overview/overview?view=powershell-7</a></p>
<h3 id="Lectures-7"><a href="#Lectures-7" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="VM-Agents-amp-Extensions"><a href="#VM-Agents-amp-Extensions" class="headerlink" title="VM Agents &amp; Extensions"></a>VM Agents &amp; Extensions</h1><p>We can see that Azure Automation State Configuration, AASC, and DSC work together as a unit to help manage state changes in our system in an automated and transparent manner. The tool set we have covered is quite solid for defining, deploying, and updating <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> resources, particularly VMs, in exactly the form we want. But what about post-deployment configuration on actual running virtual machines? DSC is great for onboarding nodes and has some support for updating config, particularly Windows nodes if we have commands to force poll the latest configuration. However, if we have more precise configuration to do on various running instances, we need something more surgical.</p>
<p>This is the use case that the Azure custom script extension was meant to solve. It is designed specifically for post-deployment actions.</p>
<p>Note that the custom script extension is not the only extension available to Azure VMs. There are lots other useful extensions such as the VM access extension and the diagnostics extension. These may be helpful for access control and monitoring respectively. The custom script extension, as the name implies, is designed purely for running any sort of arbitrary script on target instances. It gives you the flexibility to handle any sort of administrative, monitoring, software installation, or maintenance task.</p>
<p>So let’s talk a little bit about extensions generally. How do these extensions work? Do we just copy&#x2F;paste code snippets somewhere? Not exactly, Azure utilizes lightweight processes in their VM’s known as agents to manage extensions. An Azure VM agent is a small background application that lets you run various extensions and interact with Azure APIs. VM agents are installed and running by default in any Windows marketplace VM in Azure. You can install VM agents on Linux servers as well very easily. There are official RPM and DEB packages available on most popular Linux flavors. See the documentation <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/agent-windows">link</a> and <a target="_blank" rel="noopener" href="https://github.com/Azure/WALinuxAgent">GitHub page</a> for specifics.</p>
<p>VM agents give us a flexible way of interacting with running servers without having to worry about firewalls and ssh sessions. If a VM has an agent running, executing a custom script is as easy as a CLI command. We use the <code>Set-AzVMExtension</code> command and set the ExtensionType flag to CustomScriptExtension. There is another flag for the actual terminal command to run on the VM which may just be a random shell command or a call to some other script on the server</p>
<p>So how exactly do custom scripts fit into our overall compliance and security model? Being able to run arbitrary scripts thanks to the VM agent is nice and all, but engineers randomly running scripts is not a hallmark of a stable system. As with any tool if we are not mindful about how we use it we could end up only creating new problems.</p>
<p>We saw in the previous two lessons that Azure ASC security center and automation state configuration, and DSC, they allow us to centralize our configuration and track compliance automatically. However, we may not be able to prevent all types of configuration drift. There may be low-level environment settings we need to tune that are not exposed by the DSC API. In such a scenario we might want to update config on live servers without editing our DSC code. We may even want to do this while simultaneously adding or updating cronjobs. Well, custom scripts are perfect for this sort of maintenance.</p>
<p>We will conclude this section with a brief demo so that you can actually see how custom scripts work in the real world. Otherwise, this is probably gonna seem too abstract. Once you get through that demo about agents and extensions, you’ll be ready for the final section of this course on pipelines. It’s gonna be a blast, see you there.</p>
<h3 id="Lectures-8"><a href="#Lectures-8" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="VM-Agents-amp-Extensions-Demo"><a href="#VM-Agents-amp-Extensions-Demo" class="headerlink" title="VM Agents &amp; Extensions Demo"></a>VM Agents &amp; Extensions Demo</h1><p>Okay, greetings again friends. Welcome to the fourth video demo in our course on Azure Security and Compliance. In this video, we’re gonna learn all about VM agents and extensions. We’ll do a brief review of Azure Automation State Configuration in the dashboard. We’ll then show you how to install extensions on Windows VMs and we’ll review the steps for a Linux VM agent installation. And we will then show how to execute arbitrary commands from the console. And lastly, we will demonstrate how to use the CLI to execute commands and scripts. So by the end of this, you should have a solid understanding of the VM agent and custom script tool set.</p>
<p>Okay, so let’s start by going back to our Automation account and we’ll take a look at the State configuration dashboard that’s… right here. And we can do a quick check up on our node of last time. We’re in nodes here. And we can see that it is still indeed compliant with our DSC config. Again, this is a great way to automate security compliance in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a>. We can actually review the DSC config source code if we want. We can go into configurations and just click on it and we can view the source. And there’s the code right there. Now from this dashboard, we can also add configurations to the node if we want manually. We can click here and go to assign node configuration. So we can do a lot of updating and adding manually through the web portal here. Ideally, we would script a lot of this. Remember, we can do all of this stuff using Powershell and that’s how we’re gonna wanna do it if we wanna maintain an infrastructure as code paradigm.</p>
<p>Okay, so now let’s talk a bit about Azure VM extensions. And so to do that, first, you need to go our virtual machine dashboard. So, we’ll just click on the virtual machine and then we can see here there’s a lot of info about the virtual machines and monitoring here. But what we’re interested in on the left side we can see there’s a menu item here called extensions. So we click here and we can see that our little test node already has two extensions installed. We have… one here for DSC and we have here the custom script extension. So as we mentioned all of the official Azure Windows VMs automatically have the custom script extension installed by default. The DSC extension was installed when we connected our node to the Azure Automation State Configuration account. So that’s why we see these two here.</p>
<p>Now for Linux virtual machines, we’ll have to install the VM agent and the extensions ourselves. And there are a lot of different versions of Linux with their own little details and installation requirements that will impact just how we set things up. So instead of running through a demo which might only apply to a small set of people, I’m just gonna show you the GitHub code and repos for the VM agents and the extensions and you take it from there by just following their read me. So here we have the repo for the Linux agent. It’s pretty straightforward. We can see the setup scripts here in Python and there’s read-mes for different versions of Linux installation commands. So for the extensions themselves, we can see here is the code base. We can see here is DSC. We can see again all in Python the testing code here. We also can see the custom script extension here.</p>
<p>Okay so if you want to look through the actual code base, this is the place. We’ll include links and installation is really just from following the read me files. For our video demo, for the rest of this demo, we’re gonna still to Windows server, to Windows VMs as they work right out of the box. So going back to the VM here, we can see that we have the custom script extension installed right out of the box. And this is very cool. This means we can evoke the extension from Powershell and run arbitrary commands and those commands could call other scripts if necessary.</p>
<p>Now from the web console, we do have a very simpler way of running a one-of command. In the operation section, if we go down here in the menu, we can see there’s an item here called run command. And if we click on that, it’ll talk us to this menu. And what’s really cool about this, is that… it actually comes with a number of predefined commands for common use cases here. So for example, if we click on it we can see… For example, this IP config command. This is a good one. We can run this with no parameters. We’ll just click run. And it’ll come up with this little console here for the output and it will give us the output here. It takes a few minutes to run because it needs to connect to the VM and run the command through the VM agent.</p>
<p>Okay so once that’s done here we can see the output of the IP config command. So, we have some information here. So, we can see it successfully ran the command. So that’s pretty cool. We have these predefined commands that we can just run. These are helpful for common use cases. But if we want to run an arbitrary command or script, we click here on the run Powershell script command. This will give us a text box and here we can just paste in the command we want to run. Now another option is we can run… Powershell from a terminal either on our local development machine or laptop or we can run it from the Azure web portal using the Azure Cloud Shell.</p>
<p>So let’s try that. Let’s try using the cloud shell. We just click up here and it’ll kick off a shell environment which will connect and once that’s ready to go we will attempt to running a script. Okay, that’s looking good. Authenticating and we should be good to go. There we are. Okay so now that we have the shell running what we’re gonna do is run a command from the shell environment. And I have a couple here saved in my notepad here. We’re going to run a command to instantiate a very basic web server so that we can see the VM name from the public IP. And that’s a very basic thing that I just basically copied from the documentation.</p>
<p>Here’s the command. We can see that we’re evoking the extension type here, custom script extension, and the Powershell command is adding WindowsFeature Web-Server. And we’re just setting it some default output for when we go to it. So we hit enter and we click run. It will take a second to finish. Okay, we’ll just wait for that. Okay, once that’s done we can see that we a status code okay. The command ran successfully.</p>
<p>So now we’re just gonna run another command to get our public IP. We can actually get this from the console if we want but just for fun we’ll do it from the command line. So we’ll paste this and that should give us our IP address. That one ran a lot faster. So we should be able… If this worked we should be able to go into the browser, go to this IP address and see our VM name. So let’s give that a try and it looks like it worked. </p>
<p>So there’s our VM name coming TestWindowsVM and it should work the same for you as long as you don’t have any security rules blocking public IPs. Make sure that’s not an issue. So that’s basically it. We have covered how to… check extensions. We’ve gone over the ASC portal, running custom scripts both from the web portal and from the CLI. I mean this is a really powerful feature set. If you can think about how’d scale this, it’s absolutely critical for maintaining a compliant system without incurring too many disruptions. So I hope this has been helpful and thanks for watching. Cheers.</p>
<h3 id="Useful-Links-4"><a href="#Useful-Links-4" class="headerlink" title="Useful Links"></a>Useful Links</h3><p>VM Agent: <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/agent-windows">https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/agent-windows</a></p>
<p>Custom Script Extension: <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/custom-script-linux">https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/custom-script-linux</a></p>
<p>DEMO: <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/tutorial-automate-vm-deployment?toc=https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/toc.json&amp;bc=https://docs.microsoft.com/en-us/azure/bread/toc.json">https://docs.microsoft.com/en-us/azure/virtual-machines/windows/tutorial-automate-vm-deployment?toc=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fazure%2Fvirtual-machines%2Fextensions%2Ftoc.json&amp;bc=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fazure%2Fbread%2Ftoc.json</a></p>
<h3 id="Lectures-9"><a href="#Lectures-9" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="Security-amp-Compliance-Pipelines"><a href="#Security-amp-Compliance-Pipelines" class="headerlink" title="Security &amp; Compliance Pipelines"></a>Security &amp; Compliance Pipelines</h1><p>Through sections one and two of this class, we have gradually ascended a ladder of automation, if you will. We started by talking about compliance and creating policies to ensure our system is secure. Then we figured out how to transparently automate much of that configuration using DSC. And then we automated even further by using Azure Automation State Configuration and VM agents with custom scripts to ensure things stay compliant. Now it’s time to assume our ultimate form of automation: Using secure pipelines to guarantee that every code or config change deployed to our system is automatically checked, tested, and released with full compliance and security totally assured.</p>
<p>This is where the fun begins. So let’s start by talking about pipelines. A software pipeline is a process for getting a code change from a developer’s laptop out into the real world with end users. Obviously we don’t want to do this in a cavalier fashion. We don’t want to just SCP a script up to a server and restart it and call it a day. We want to test things out. We want to check code quality. We want to make sure everything is reviewed and compliant and safe before finally deploying to our production environment.</p>
<p>So the modern paradigm for this is known as CI&#x2F;CD, or, continuous integration and continuous delivery. In the DevOps world we use tools like Github, Jenkins, Gitlab, CircleCI to automate a lot of this work. <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a> offers its own very robust solution in the form of Azure Pipelines.</p>
<p>Azure Pipelines are much like other CI&#x2F;CD services. They let you automate building, testing, deployment of software. And the set up is very simple. All you need to do is define an organization in the Azure DevOps portal and make sure that your code is hosted in some version control system like Github. You can create and configure your pipeline from the browser. However, to keep a proper infrastructure as code methodology, you will want to put all of your pipeline configuration in a yaml file, something named azure-pipelines.yml. This is the file Azure will care about, and this is where you will define your pipeline steps and tasks.</p>
<p>Now, there’s many different stages, you know, test stage, deployment stage, within a pipeline. One of the most important features though specific to Azure Pipelines is the gate. Gates are very important. Our release pipeline has these different steps and between these steps we can define gates. Gates are basically conditions or checks that ensure our software meets some standard before moving on to the next step. If our release fails the check performed by the gate, it will stop the CI&#x2F;CD process and give us an error message. This is an essential component of automating security compliance in our software delivery process.</p>
<p>Now there are many kinds of gates that we can select. In the web UI in the DevOps dashboard we can see the different options. There are delay gates that simply pause the pipeline for some amount of time, as well as manual intervention gates that stop everything until a human performs some action, perhaps a check or something. There are also gates that run Azure Functions. There are gates that check Azure monitor alerts. There are gates that invoke REST APIs. But perhaps most importantly, there are gates that check compliance with security policies. Now that last one we’ll come back to in a bit.</p>
<p>So now, a secure software pipeline does not start with security policies and checks and gates or test environments running a build of the app. Really, the pipeline starts with a solid code review process. And that process should incorporate automated code quality checks, Linters, manual reviews by other engineers. This is really where you start. And we can kick off this process for a specific branch, if we’re using git, and a code hosting service like Github, and then have merge requests that launch deeper tests. Code that passes initial checks and manual review should undergo static analysis.</p>
<p>Now, ideally you also are checking OSS licenses and third party dependencies as well. But this can be a big pain, but there are some tools that can help, tools like WhiteSource software. They can help you with it. Code that has made it this far, where you’re at least checking the third party dependencies and open sourced licenses. Once it’s gotten past all of that analysis, you wanna deploy to a test environment. What that deploy looks like exactly will depend on your application. It will depend on your specific architecture. It might entail spinning up a virtual machine, or deploying a container, or updating a storage bucket, or something else. Since our focus is on security we won’t delve too deeply into that, into infrastructure minutiae. We will instead walk through a simple example of that in our demo anyway. And what we wanna focus on is that once our software is in a test environment, we need to do some form of security scanning. Scanning is really critical and there are a lot of tools.</p>
<p>Microsoft, in their documentation, they recommend using OWASP ZAP for handling automated penetration testing. Now, what is OWASP ZAP? Okay, OWASP, O-W-A-S-P, stands for Open Web Application Security Project, and ZAP is one of their tools, it stands for Zed Attack Proxy tool. The OWASP group does a lot of great work in security. It’s a big, long-lived international group. They work with an open source tool set, so very easy to audit and look at and configure. OWASP ZAP is one of their most popular tools for web application security scanning. And it’s readily integrated into an Azure pipeline process as part of your gates, if you will.</p>
<p>The challenge that we face with CI&#x2F;CD pipeline, in a CI&#x2F;CD pipeline context, with this tool, is that really thorough scans that crawl through an entire website and attempt a wide variety of attacks, these take a long time to run. It’s really common for these scans to run anywhere from tens of minutes to several hours for a more complex app. So therefore, if you make these tests into a gate for any and all code changes, it will slow your development cycle down to a crawl. And so, for this reason, it’s recommended that you have a more simple automated scan for CI&#x2F;CD. And again, OWASP ZAP, they have tools for this, simple test scans. And then, separately, you have a nightly full active scan that does a comprehensive test in a QA or a dev environment. So this is kind of a split approach.</p>
<p>Penetration testing is really important for application security, however we have to also ensure that our infrastructure meets compliance standards. And fortunately this is readily handled by using gates in our pipelines. As we mentioned, in the Azure DevOps dashboard we can create pre-deployment conditions as gates. And as mentioned, there are many types, but the one that’s really interesting to us here is the Security and Compliance Assessment type of gate. This type of gate ensures that a release in our pipeline will fail if it violates a policy defined in Azure Security Center.</p>
<p>Now, this feature lets us incorporate compliance and security right in our release process. It relies on us first selecting the right security policies defined in Azure Security Center. Now remember, good policies alone don’t make us secure; compliance with good policies are what make us secure. And therefore, if we can make the check for the compliance automatic, then we can make security automatic. And fortunately, Azure Security Center includes several industry standards right out of the box, so you can just select the one that best matches your product without actually having to define an entire set of security standards and policies from scratch.</p>
<p>So, there you have it, whew! This was a doozy of a lesson, a lot of material, but hopefully chock-full of useful stuff. If we can put all or most of this into practice, we can sleep comfortably knowing that our Azure infrastructure is as secure as can be. Check out the demo for this section for a walkthrough of how to set up a pipeline and use gates. And, once you’re done with that, you’re finished with all of our lesson content, so, see you there. Thank you.</p>
<h3 id="Lectures-10"><a href="#Lectures-10" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="Azure-Pipelines-amp-Gates-Demo"><a href="#Azure-Pipelines-amp-Gates-Demo" class="headerlink" title="Azure Pipelines &amp; Gates Demo"></a>Azure Pipelines &amp; Gates Demo</h1><p>Okay, greetings once again, friends. Welcome to the fifth and final demo for our course on Azure Security and Compliance. This will be a very DevOps-focused video as we dig into Azure Pipelines. We’ll learn how to set up a basic pipeline for CI&#x2F;CD using the Pipeline service, and then we’ll then add a gate to demonstrate how we can automate security compliance checks. So without further ado, let’s dive right in.</p>
<p>So first off, we need to go into Azure DevOps. That’s where the Pipeline service is set up. And like a lot of other <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> components, it’s not enabled by default. You have to enable Azure DevOps. You’ll go into your DevOps organization after you create it and you’ll need to set up a project. This is also very simple, just point and click through. You can create a project. Here we have something called TestProject7. This will be our basic test project for this demo.</p>
<p>Now, when you first set up a pipeline, Azure DevOps is going to need to know where the source code is hosted. So for example, if we go to Pipelines and we click New Pipeline, very first thing it says is, “Where is your code?” So we have some options here for popular services like GitHub and BitBucket, but be aware, we have this really cool option Other Git, any generic Git repository. This is very helpful if you’re using a less popular service. As of the creation of this course there’s no option here for GitLab. And I hope they add that because I’m a big fan of GitLab. I love GitLab. So if you’re using GitLab or if you’re just hosting your Git repo at some random location, as long as you have the URL and its open, you can get to it using this Other Git option. Be aware that also if you are using BitBucket or GitHub or something like that, you have to authorize it. So if you click on GitHub, it’s gonna ask for permission to pull code from the repository. So assuming you’re logged in, it’ll find your GitHub, it’ll try to access it and it will request permission. You just have to click to grab that permission. It’s just one click.</p>
<p>So we can actually see this in GitHub. We can go to our test project here and we can see this is our TestProject40. This is what we’re connecting to Azure Pipelines. And to see the connection actually, we can go into settings and if we go to Integrations and Services we can see that Azure Pipelines is listed. That is connected to this repository and it has permission to pull from the repo. Now the actual pipeline configuration is defined in a file called azure-pipelines.yml. That’s where we were a second ago. We can see that this config is actually really, really simple. All it’s doing is printing to the console. It’s doing an echo “Hello world” in an environment called QA. So not really doing a lot of work.</p>
<p>Now, the standard way to configure a build job like this is to have it run whenever a change is merged into a particular branch in our git repository. Now we can do that by either editing our YAML or editing the job in the console. And when we edit the YAML, we care about this word trigger here, by default it’s set to master but we can actually customize the behavior to have it do pull request triggers or even scheduled triggers if we just want a job to run at specific intervals. So we go back to our pipeline here, we can see the amount of times it’s run. And we can also run the pipeline manually by just clicking run pipeline here without having to worry about any triggers.</p>
<p>So let’s give this a click. Let’s see if it works. It’s gonna by default work off of masters. We’ll just click run. And it’ll take a few seconds but it’s a pretty simple build job. So we let it go through its deployment. And it should just be a second to finish. Let’s try giving that a refresh. Ah, here we go. We can see the duration. We can see it’s actually running. But it’s just echoing output to the console so it should be pretty quick. And there we go, done, successful. We could actually see the logs of the deploy here as well.</p>
<p>Now from looking at this, as I’m sure you can tell, we could go into a lot more depth with Azure DevOps, the portal and the pipelines. It really is an incredible tool set, especially as a DevOps engineer. I really appreciate it so I do recommend checking out other courses on DevOps specifically. Since this is a security course though, we’re gonna skip digging into all the YAML config and all of that and we’re gonna focus on the most critical security feature in Pipelines, and that is automating security compliance checks. And in order to do that, we’re gonna need to create a gate.</p>
<p>Gates are connected to releases in Azure DevOps. Thus far we’ve been working with a generic build pipeline with no real concept of releases and only one environment really to worry about. To show off how gates work, let’s create a brand new release pipeline from scratch, right from the portal. And again, this all can be done with the CLI and scripting but we’re gonna go from the portal here. We’re just gonna click on the releases section and we’ll do new pipeline. And what we do for our pipeline, we have to define stages. So you can see there’s many different deployment types. We’re gonna just do an empty job for stage one and then we’ll add a new stage two, which’ll also be an empty job. So you can note, we’re not actually deploying any code anywhere. There’s really no tasks to worry about but one thing that’s worth noting is the variety of deployment types. So deploy to Kubernetes cluster, deploy to Azure Apps Service, Job App, Azure Functions, if we scroll down, there’s a lot of deployment types here. But we’ll leave this as empty for right now. Our interest is not on the specific content of the deployment job. Our interest is in what happens in between two stages. And that’s really where we’re gonna have a gate. So to create the gate, we’re gonna click on this little icon here next to the stage with the little guy on it where it says pre-deployment conditions.</p>
<p>So we’re gonna click on that. And what you’ll see there are a few options here as well, triggers, after stage, after release. Our interest, again, is gates. So we’re gonna click on gates. You have to enable it. So you click enable and then you’re gonna click add. And so here we can see a few different types of gates show up. We can invoke an Azure Function between stages. We can query monitor alerts here. We can invoke a REST API. These are the ones that pop up right away. But here’s the one we really care about, check Azure policy compliance. So we click on that and in order to make that work, we have to select our Azure subscription. So this our free trial subscription here. And then once that comes up, you have to authorize it usually. When you authorize it, be aware that it might have a pop-up block. I had to turn off my pop-up blocker for the authorization to work. So be aware of that. You can also select resource groups, to restrict it a little bit. It’s not a requirement but once you have that done, you can just close this dialogue and now you have a pre-deployment condition defined for this stage. So you can click save. You can save it in a folder. We don’t have to have any comment. And now we have a pipeline with automated security compliance checking. Now you might be wondering, what does compliant mean here exactly? If a release violates one of our policies it will throw an error and fail.</p>
<p>So really what compliant means is determined by your security center account. Whatever you have defined in your security setting, this is where you define your policies and so if you have a policy for some network rule or something like that and if it violates that in the pipeline, this is where it’ll fail. So there you have it. We now have some understanding of how to work with Azure Pipelines to create CI&#x2F;CD pipelines and most importantly, how to define security compliance gates for deployment. This is definitely something you’re gonna want to play around with and experiment with on your own to understand the behavior. Check the Azure documentation links (below) for more info and some nice how-to guides. And thank you for making it this far in the class and good luck.</p>
<h3 id="Useful-Links-5"><a href="#Useful-Links-5" class="headerlink" title="Useful Links"></a>Useful Links</h3><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/devops/migrate/security-validation-cicd-pipeline?view=azure-devops">https://docs.microsoft.com/en-us/azure/devops/migrate/security-validation-cicd-pipeline?view=azure-devops</a></p>
<p>Pipelines: <a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/services/devops/pipelines/">https://azure.microsoft.com/en-us/services/devops/pipelines/</a></p>
<p>Gates: <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/devops/pipelines/policies/azure-policy?view=azure-devops">https://docs.microsoft.com/en-us/azure/devops/pipelines/policies/azure-policy?view=azure-devops</a></p>
<h3 id="Lectures-11"><a href="#Lectures-11" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-summary/">Course Summary</a></p>
<h1 id="Course-Summary"><a href="#Course-Summary" class="headerlink" title="Course Summary"></a>Course Summary</h1><p>Congratulations, you’ve done it. You’ve really done it. You have made it to the end of Cloud Academy’s course on Azure Infrastructure Compliance and Security. Nice job.</p>
<p>Before we pop the champagne though, let’s take a moment to briefly review our learning objectives. There were three. First, we taught you how to scan infrastructure and prevent drift leading to compliance violations. That was in section one where we went over Azure Security Center in detail and showed off some other management tools. Secondly, we taught you how to automate configuration management. Tools are great, but even greater is getting them to work on their own. In section two, we showed you how to do that with Azure Automation State Configuration, DSC, and VM agents in custom scripts. Finally, we showed how to create secured software pipelines. This is really the end goal of our compliance work, getting to a point where end-to-end we have full assurance that our system is up to strict standards. Section three covered that.</p>
<p>You should now be more confident taking responsibility for compliance in an <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> cloud environment. With this skill set, you can help teams get peace of mind about whether or not their Azure infrastructure meets the highest standards for security. Where you go from here is up to you. We wish luck to those of you going on to take certification exams or continue their studies or pursue work on a software team.</p>
<p>Lastly, once again, I’d really like to invite folks to send us feedback about the course. We are always looking to improve any way we can. We thank all of our students, past, present, and future for helping us to get better. Thanks again, and good luck, and congratulations!</p>
<h3 id="Lectures-12"><a href="#Lectures-12" class="headerlink" title="Lectures"></a>Lectures</h3><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/course-introduction/">Course Introduction</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/compliance-security-scanning/">Compliance &amp; Security Scanning</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-center-demo/">Security Center Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/preventing-drift/">Preventing Drift</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/arm-activity-log-track-changes-demo/">ARM, Activity Log &amp; Track Changes Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/desired-state-configuration-dsc/">Desired State Configuration (DSC)</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-desired-state-configuration-demo/">Azure Desired State Configuration Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-automation-state-configuration/">Azure Automation State Configuration</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions/">VM Agents &amp; Extensions</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/vm-agents-extensions-demo/">VM Agents &amp; Extensions Demo</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/security-compliance-pipelines/">Security &amp; Compliance Pipelines</a> - <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/implementing-azure-infrastructure-compliance-and-security/azure-pipelines-gates-demo/">Azure Pipelines &amp; Gates Demo</a></p>
<h1 id="3Security-Center-Demo"><a href="#3Security-Center-Demo" class="headerlink" title="3Security Center Demo"></a>3<strong>Security Center Demo</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/security-center/security-center-compliance-dashboard">Security Center Compliance Dashboard</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/security-center/security-center-vulnerability-assessment-recommendations">Security Center Vulnerability Assessment Recommendations</a></p>
<p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/blog/integrated-vulnerability-assessment-with-azure-security-center/">Integrated Vulnerability Assessment Blog Post</a></p>
<p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/updates/scan-container-images-for-vulnerabilities-in-azure-security-center/">Scan Container Images for Vulnerabilities</a></p>
<h1 id="5ARM-Activity-Log-amp-Track-Changes-Demo"><a href="#5ARM-Activity-Log-amp-Track-Changes-Demo" class="headerlink" title="5ARM, Activity Log &amp; Track Changes Demo"></a>5<strong>ARM, Activity Log &amp; Track Changes Demo</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/how-to/region-mappings%C2%A7">Region Mappings</a></p>
<p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/da-dk/blog/tracking-configuration-changes-for-your-azure-vm/">Tracking Configuration Changes</a></p>
<p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/updates/azure-stack-security-drift-detection/">Azure Stack Security Drift Detection</a></p>
<p><a target="_blank" rel="noopener" href="https://www.auditwolf.com/blog/configuration-drift">Configuration Drift Blog Post</a></p>
<h1 id="6Desired-State-Configuration-DSC"><a href="#6Desired-State-Configuration-DSC" class="headerlink" title="6Desired State Configuration (DSC)"></a>6<strong>Desired State Configuration (DSC)</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/automation-dsc-overview">Automation DSC Overview</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/powershell/scripting/dsc/managing-nodes/metaconfig?view=powershell-7">Configuring the Local Configuration Manager</a></p>
<h1 id="8Azure-Automation-State-Configuration"><a href="#8Azure-Automation-State-Configuration" class="headerlink" title="8Azure Automation State Configuration"></a>8<strong>Azure Automation State Configuration</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/tutorial-configure-servers-desired-state">Configuring Servers Desired State</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/automation-dsc-overview">Automation DSC Overview</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/automation/automation-quickstart-dsc-configuration">Automation Quickstart DSC Configuration</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/powershell/scripting/dsc/overview/overview?view=powershell-7">Windows PowerShell Desired State Configuration Overview</a></p>
<h1 id="10VM-Agents-amp-Extensions-Demo"><a href="#10VM-Agents-amp-Extensions-Demo" class="headerlink" title="10VM Agents &amp; Extensions Demo"></a>10<strong>VM Agents &amp; Extensions Demo</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/agent-windows">VM Agent</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/custom-script-linux">Custom Script Extension</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/tutorial-automate-vm-deployment?toc=https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/toc.json&bc=https">DEMO</a></p>
<h1 id="12Azure-Pipelines-amp-Gates-Demo"><a href="#12Azure-Pipelines-amp-Gates-Demo" class="headerlink" title="12Azure Pipelines &amp; Gates Demo"></a>12<strong>Azure Pipelines &amp; Gates Demo</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/devops/migrate/security-validation-cicd-pipeline?view=azure-devops">Securing Azure Pipelines</a></p>
<p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/services/devops/pipelines/">Pipelines</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/devops/pipelines/policies/azure-policy?view=azure-devops">Gates</a></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/11/18/AZ-400-Introduction-to-Azure-Resource-Manager-19/" rel="prev" title="AZ-400-Introduction-to-Azure-Resource-Manager-19">
      <i class="fa fa-chevron-left"></i> AZ-400-Introduction-to-Azure-Resource-Manager-19
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/18/AZ-400-Using-PowerShell-DSC-on-Windows-21/" rel="next" title="AZ-400-Using-PowerShell-DSC-on-Windows-21">
      AZ-400-Using-PowerShell-DSC-on-Windows-21 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Course-Introduction"><span class="nav-number">1.</span> <span class="nav-text">Course Introduction</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures"><span class="nav-number">1.0.1.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Compliance-amp-Security-Scanning"><span class="nav-number">2.</span> <span class="nav-text">Compliance &amp; Security Scanning</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-1"><span class="nav-number">2.0.1.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Security-Center-Demo"><span class="nav-number">3.</span> <span class="nav-text">Security Center Demo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Useful-Links"><span class="nav-number">3.0.1.</span> <span class="nav-text">Useful Links</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-2"><span class="nav-number">3.0.2.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Preventing-Drift"><span class="nav-number">4.</span> <span class="nav-text">Preventing Drift</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-3"><span class="nav-number">4.0.1.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ARM-Activity-Log-amp-Track-Changes-Demo"><span class="nav-number">5.</span> <span class="nav-text">ARM, Activity Log &amp; Track Changes Demo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Useful-Links-1"><span class="nav-number">5.0.1.</span> <span class="nav-text">Useful Links</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-4"><span class="nav-number">5.0.2.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Desired-State-Configuration-DSC"><span class="nav-number">6.</span> <span class="nav-text">Desired State Configuration (DSC)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Useful-Links-2"><span class="nav-number">6.0.1.</span> <span class="nav-text">Useful Links</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-5"><span class="nav-number">6.0.2.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Azure-Desired-State-Configuration-Demo"><span class="nav-number">7.</span> <span class="nav-text">Azure Desired State Configuration Demo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-6"><span class="nav-number">7.0.1.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Azure-Automation-State-Configuration"><span class="nav-number">8.</span> <span class="nav-text">Azure Automation State Configuration</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Useful-Links-3"><span class="nav-number">8.0.1.</span> <span class="nav-text">Useful Links</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-7"><span class="nav-number">8.0.2.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#VM-Agents-amp-Extensions"><span class="nav-number">9.</span> <span class="nav-text">VM Agents &amp; Extensions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-8"><span class="nav-number">9.0.1.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#VM-Agents-amp-Extensions-Demo"><span class="nav-number">10.</span> <span class="nav-text">VM Agents &amp; Extensions Demo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Useful-Links-4"><span class="nav-number">10.0.1.</span> <span class="nav-text">Useful Links</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-9"><span class="nav-number">10.0.2.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Security-amp-Compliance-Pipelines"><span class="nav-number">11.</span> <span class="nav-text">Security &amp; Compliance Pipelines</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-10"><span class="nav-number">11.0.1.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Azure-Pipelines-amp-Gates-Demo"><span class="nav-number">12.</span> <span class="nav-text">Azure Pipelines &amp; Gates Demo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Useful-Links-5"><span class="nav-number">12.0.1.</span> <span class="nav-text">Useful Links</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-11"><span class="nav-number">12.0.2.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Course-Summary"><span class="nav-number">13.</span> <span class="nav-text">Course Summary</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lectures-12"><span class="nav-number">13.0.1.</span> <span class="nav-text">Lectures</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3Security-Center-Demo"><span class="nav-number">14.</span> <span class="nav-text">3Security Center Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5ARM-Activity-Log-amp-Track-Changes-Demo"><span class="nav-number">15.</span> <span class="nav-text">5ARM, Activity Log &amp; Track Changes Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6Desired-State-Configuration-DSC"><span class="nav-number">16.</span> <span class="nav-text">6Desired State Configuration (DSC)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8Azure-Automation-State-Configuration"><span class="nav-number">17.</span> <span class="nav-text">8Azure Automation State Configuration</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10VM-Agents-amp-Extensions-Demo"><span class="nav-number">18.</span> <span class="nav-text">10VM Agents &amp; Extensions Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12Azure-Pipelines-amp-Gates-Demo"><span class="nav-number">19.</span> <span class="nav-text">12Azure Pipelines &amp; Gates Demo</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2736</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">72</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
