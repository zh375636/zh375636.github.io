<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="IntroductionHi there, welcome to Advanced VM Management in Microsoft Azure. My name is Thomas Mitchell and I’ll be taking you through this course. I’m an Azure instructor at Cloud Academy, and I have">
<meta property="og:type" content="article">
<meta property="og:title" content="AZ-104-Advanced-VM-Management-in-Azure-13">
<meta property="og:url" content="https://example.com/2022/11/18/AZ-104-Advanced-VM-Management-in-Azure-13/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:description" content="IntroductionHi there, welcome to Advanced VM Management in Microsoft Azure. My name is Thomas Mitchell and I’ll be taking you through this course. I’m an Azure instructor at Cloud Academy, and I have">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-11-19T00:22:00.000Z">
<meta property="article:modified_time" content="2022-11-22T15:40:46.000Z">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/2022/11/18/AZ-104-Advanced-VM-Management-in-Azure-13/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>AZ-104-Advanced-VM-Management-in-Azure-13 | Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Advanced-VM-Management-in-Azure-13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          AZ-104-Advanced-VM-Management-in-Azure-13
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:22:00" itemprop="dateCreated datePublished" datetime="2022-11-18T20:22:00-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:40:46" itemprop="dateModified" datetime="2022-11-22T11:40:46-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Advanced-VM-Management-in-Azure-13/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Advanced-VM-Management-in-Azure-13/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hi there, welcome to Advanced VM Management in Microsoft Azure. My name is Thomas Mitchell and I’ll be taking you through this course. I’m an Azure instructor at Cloud Academy, and I have over 25 years of IT experience, several of those with cloud technologies. If you have any questions, feel free to connect with me on LinkedIn, or send an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>This course is intended for those who are interested in learning about VM scale sets, VM configuration management, and VM monitoring. To get the most from this course you should have a basic understanding of Microsoft Azure and of the Azure Portal.</p>
<p>We’re going to start things off by looking at virtual machine scale sets. You’ll learn about vertical scaling and horizontal scaling. I’ll even show you, via a hands-on demonstration, how to deploy a VM scale set with autoscaling enabled.</p>
<p>Next, we’ll take a look at configuration management. I’ll introduce you to the many tools that can be used to manage VM configurations. You’ll even learn how to deploy software using VM extensions.</p>
<p>We’ll wrap things up by covering VM monitoring.</p>
<p>By the time you finish this course, you should have an understanding of how to scale VMs, manage VM configurations, and monitor VMs.</p>
<p>We’d love to get your feedback on this course, so please give it a rating when you’re finished. If you’re ready to learn about Azure VM management, let’s get started.</p>
<h1 id="Virtual-Machines-Scale-Sets"><a href="#Virtual-Machines-Scale-Sets" class="headerlink" title="Virtual Machines Scale Sets"></a>Virtual Machines Scale Sets</h1><p>Hello and welcome to “Virtual Machine Scale Sets.” In this lecture, I’m going to introduce you to the concept of virtual machine scale sets and why you should use them. We will also take look at the differences between virtual machines and virtual machine scale sets, and how to monitor scale sets.</p>
<p>An <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/vertical-scaling-vs-horizontal-scaling/">Azure virtual machine scale set</a> is essentially a group of identical, load-balanced VMs. You can configure an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">Azure VM</a> scale set to automatically increase the number of VM instances or decrease the number of VM instances based on demand or on a predefined schedule. Organizations use scale sets to ensure high availability for their applications and so they can centrally manage, configure, and update all VMs within the scale set. VM scale sets are often used to build large-scale compute solutions, to service big data solutions, and to host large container workloads.</p>
<p>Because applications that run on a virtual machine scale set are distributed across several instances within the scale set, such applications benefit from redundancy and increased performance. An application that’s hosted on a virtual machine scale set is usually accessed through a load balancer. The load balancer serves as a single point of access and then distributes application requests to any one of the numerous instances within the scale set itself.</p>
<p>A VM scale set allows you to perform maintenance and even updates on an application instance, without the need for any downtime. This is because requests are automatically distributed to other available instances within the scale set while you are performing your maintenance.</p>
<p>Virtual machine scale sets allow you to easily create and manage multiple VMs that have the same configuration, because, in a scale set, all underlying VM instances are created from the same base OS image and configuration. That being the case, it becomes fairly easy to manage dozens or even hundreds of virtual machines without needing to worry about performing configuration tasks or even about network management.</p>
<p>VM scale sets can be used with Azure load balancers for basic layer four traffic distribution, or if you need more advanced layer seven distribution or SSL termination, you can use a scale set with Azure Application Gateway. Because scale sets sit behind load balancers, they provide high-availability and application resiliency. You can even use availability zones with scale sets to ensure that your VM instances within the scale sets are spread out within a single <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> data center or even across multiple Azure data centers.</p>
<p>The key benefit of a VM scale set is its ability to automatically scale as resource demand dictates. As demand for an application increases, a VM scale set can automatically increase the number of VM instances to support the application load. The VM scale set can also automatically reduce the number of VM instances as demand for the application decreases. This is known as autoscaling. This autoscaling feature helps control costs because it minimizes the number of VM instances that are running.</p>
<p>VM scale sets can support as many as 1000 virtual machine instances if you use Azure-supplied VM images. If you choose to use your own custom VM images, the limit is 600 VM instances. The table on your screen highlights the key differences between virtual machines and scale sets.</p>
<p>As you can see, if you host an application on a manual group of virtual machines instead of a VM scale set, the process for adding additional instances to support the application becomes a manual process. While a VM scale set can automatically create new instances from a central config, using a manual group of VMs requires you to create, configure, and then ensure compliance of all of the additional VM instances that you manually spin up.</p>
<p>Load-balancing a group of VMs is also a manual process, whereas a VM scale set handles the load-balancing for you automatically.</p>
<p>VM scale sets, as you can see here in the third row of the table, automate the distribution of VM instances across availability sets or availability zones. Doing things the hard way with a manual group of VMs requires you to manually perform these tasks.</p>
<p>Lastly, do you really want to manually monitor your VMs if you need to scale? Because that’s what you need to do if you decide to host an application on a manual group of VMs, rather than on a scale set. VM scale sets, as you can see in this last row, allow you to autoscale based on host metrics, in-guest metrics, application insights, or on a schedule.</p>
<p>Deploying a scale set incurs no additional costs outside of the underlying VM instance costs, load balancer costs, and any managed disk storage costs. There are also no costs associated with the cloud management and autoscaling features, outside of the charges for the VMs that are spun up.</p>
<p>To monitor a VM scale set, you should use <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/azure-monitor-for-vms/">Azure Monitor</a> for VMs. Azure Monitor for VMs automates the collection of CPU, memory, disk, and network performance counters from all the VMs within a scale set. You can also monitor an application running on a VM scale set using application insights. Application Insights collects information about applications that you can use to keep tabs on application performance.</p>
<h1 id="Vertical-Scaling-vs-Horizontal-Scaling"><a href="#Vertical-Scaling-vs-Horizontal-Scaling" class="headerlink" title="Vertical Scaling vs. Horizontal Scaling"></a>Vertical Scaling vs. Horizontal Scaling</h1><p>Hello and welcome to Vertical Scaling vs. Horizontal Scaling. In the next lesson, I’m going to perform a demonstration that shows you how to deploy a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/vertical-scaling-vs-horizontal-scaling/">VM scale set</a> that implements <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-implementing-a-vm-scale-set-with-autoscaling/">autoscale</a>. However, before we do that, it makes sense to quickly explain to you the different ways that you can scale.</p>
<p>There are two different ways of scaling. You can scale up and down, or you can scale in and out. Scaling up and down, which is also referred to as vertical scaling, is the process of upgrading an existing <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a> to a more powerful virtual machine, or downgrading to a smaller, less powerful virtual machine. In <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a>, this means resizing the existing VM to a larger size with more RAM and more CPU, or to a smaller size with less RAM and less CPU. Because vertical scaling involves the re-size of virtual machines, this kind of scaling results in VM restarts.</p>
<p>Scaling out is a way to handle an increased load on an application or website. Scaling out is commonly referred to as horizontal scaling. When you scale out, you keep the same VM size, but you add more VM instances to the scale set. Instead of growing the size of the VMs in the scale set, you increase the number of VMs in the scale set. When you scale back in, you reduce the number of VMs in the scale set.</p>
<p>You might want to use vertical scaling to scale down an application’s server over the weekend, when the application is in use. By scaling down over the weekend, you can save on compute costs.</p>
<p>A common use for scaling in and out, or horizontal scaling, is when you have a public-facing website or web application. When supporting this type of application, it usually makes sense to add instances to support increased workloads, while removing instances when that load drops. This allows you to keep up with demand without causing an outage.</p>
<p>Microsoft recommends horizontal scaling whenever possible.</p>
<h1 id="DEMO-Implementing-a-VM-Scale-Set-with-Autoscaling"><a href="#DEMO-Implementing-a-VM-Scale-Set-with-Autoscaling" class="headerlink" title="DEMO: Implementing a VM Scale Set with Autoscaling"></a>DEMO: Implementing a VM Scale Set with Autoscaling</h1><p>Hello, and welcome back. In this lesson here, we’re going to walk through a demonstration where I’ll show you how to deploy a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/virtual-machines-scale-sets/">virtual machine scale set</a> that utilizes autoscaling.</p>
<p>On the screen here, you can see I’m logged in to my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> Portal, and I’m in a resource group called VMStuff that I created ahead of this lab. To create our VM scale set, that will be load balanced by the way, what we’re going to do here is click Add to kick things off here. And from the Marketplace, we are going to search for scale set. And we can see we have Virtual machine scale set here. And we’ll go ahead and create the scale set.</p>
<p>The creation process for a VM scale set, if you look here, looks rather similar to a VM creation process, and that’s largely because what we’re doing is creating a VM configuration that’s going to be used to spin out VMs within that scale set. So it stands to reason that it would look quite similar to a VM deployment.</p>
<p>On this Basics page here, what we need to do is provide some basic information for our scale set. We’re going to deploy into our lab subscription and then into my VMStuff resource group. What I’ll do here is give my scale set a name, and we’ll deploy into East US. We’re not gonna do any Availability zone here. And the image we’re going to use is going to be a Windows Server 2016 data center image. We’ll leave Spot instance at its default of No since we’re not using spot instances, and we’ll leave the default Size here of one processor and 3 1&#x2F;2 gig of RAM. Let me specify my admin information here. And we’ll leave the option for the Hybrid Benefit turned off. And we’ll stick with the default Disk options here. You can see that the default is Premium SSD for the OS, and the Encryption type is Encryption at rest with a platform-managed key.</p>
<p>We’ll go into Networking next here. Now in this Networking page, I need to define the virtual network that’s going to host the VMs in the scale set. I can either select the dropdown here and use an existing virtual network, or if I don’t have any created already, which you can see here I don’t, it’s going to create a virtual network for me. So I’ll allow it to create the virtual network for me and then under Network interface, this Network interface is the NIC that <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a> or virtual machines that get spun up will use to connect to our virtual network. </p>
<p>Now, remember, the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/configuration-management-tools-for-virtual-machines/">virtual machine configuration</a> we’re using here is essentially, I guess I could call it a gold image. This is going to be the configuration that new VMs are spun up with when we autoscale up. Whatever I configure here, this is how those machines will be configured when they’re spun up when they grow through the autoscale process.</p>
<p>Now, what I’m going to do for this demonstration here is edit my new NIC, which it’s calling VMStuff-vnet-nic01. And I’m going to give this a public IP, which is not something that’s necessary because we’re going to load balance our scale set, so that’s how you would normally access the VMs through an application in production through the load balancer. But to demonstrate the process of autoscale, I want to be able to get into my individual VM to put a load on it so I can show you how that autoscale works.</p>
<p>What I’ll do here is I’ll edit my Network interface, and I will allow 3389 in on the public IP. And we’ll OK it. So with this configuration, when our scale set is deployed, it’s going to be deployed using VMs that do have a public IP attached, so I can get to them outside of the scale set.</p>
<p>Now, what we’re going to do for this exercise is use a load balancer, so I’ll turn load balancer on. And then when I do that, I have two options. I can configure an application gateway if I’m going to be using a web, if I’m gonna use this for IIS, for example, I would more than likely use an application gateway to load balance it. If I’m going to be load balancing other traffic, then I’d wanna use an Azure load balancer, which is what we’re going to use here. In my dropdown here, I have the option for gateway or load balancer, so I’ll leave it at Azure load balancer. And I’ll accept the default load balancer name and the default backend pool. If I had an existing load balancer, I could select it from the dropdown, but you can see here we don’t have any existing load balancers configured. So I’ll leave that alone. And the backend pool is what’s going to include the backend VMs that are part of the scale set.</p>
<p>Now, at this point, we can click on Next for Scaling, and this is where we can configure the autoscale options for our VM scale set. If we hover over the instance count here, we can see that this is the number of virtual machines that are initially deployed as part of the scale set. And we’ll leave this at the default of two.</p>
<p>If we hover over here again, we can see that we can set this from anywhere from zero to 1,000. I don’t want to go broke, so we’re certainly not going to set it to 1,000. Two is sufficient for this demonstration. And then in the Scaling policy, we can either configure it for manual scaling or custom. The manual scale option, as you can see here in the pop-up maintains a fixed instance count. Using custom autoscale allows the scale set to scale up and down based on a schedule or on metrics. So we’ll go ahead and select Custom here because manual’s no fun. Now, when we select Custom here, we need to specify the minimum value for our autoscale for the specific scale set and, of course, the maximum value as well. The defaults here are one and 10, and we’ll leave them at their defaults. You can look at this scaling policy, and these values as really the lower and upper ranges of where the scale set will operate. These options here for Scale out and Scale in allow us to tell Azure how to control the autoscale for this VM scale set.</p>
<p>Now, what I’m going to do here, the default CPU threshold here is the CPU usage percentage threshold for triggering the Scale out autoscale rule. If we hover over the icon here for the threshold in Scale in, it’s the same thing but for the Scale in rules. So this percentage here tells Azure when to scale the scale set out, or add the VMs, and this threshold down here tells Azure when to remove VMs from the scale set.</p>
<p>Now, this duration here, you’re telling Azure to look at that duration of time. If, for example, in this screen here where we’re looking at a 75% CPU threshold for 10 minutes, Azure is going to look at the performance of the existing scale set. And if the scale set has a 75% utilization on the CPU for at least 10 minutes, it will add this number of VMs to the scale set. Now, what I’m going to do here for this demonstration is change this to 50% and five minutes. Now, notice, if I change this to three, it won’t let me. It has to be between five and 60 minutes.</p>
<p>Now, what I’m telling Azure here to do is if my scale set hovers at 50% for at least five minutes, add another VM to the scale set. And we’ll keep doing that. After it adds the first VM, it will again keep tracking, and if my CPU threshold is still at least 50% for another five-minute stretch, it will add another VM. And it will keep doing that up until the Maximum of VMs value here, which is 10. Now, for Scale in, I’ll leave this at its default because this will work for our demonstration here. I’m telling Azure that once my CPU utilization for the scale set falls to 25%, again, for five minutes, this duration is the same, what we’ll do is decrease the number of VMs by one.</p>
<p>We’ll leave the Diagnostic logs disabled for now. We’re not worried about diagnostic logs at this point. In this dropdown here, I have a couple different options for my Scale in policy. If I select the dropdown, I can see I have three options. I have the default option, which will balance my scale set across my availability zones and fault domains and then delete the VM with the highest instance ID, or I can tell it to balance across the availability zones and then delete the newest created VM. The last option here is the same thing but to delete the oldest VM. I’ll just leave it at its default setting here, and then we’ll click Management.</p>
<p>The Upgrade policy here, if we hover over the icon next to Upgrade mode, this is the setting that controls how my VM instances in the scale set are brought up to date with the latest scale set model. And what that means is if I make changes to my scale set, VMs that were deployed within that scale set before those changes need to be upgraded to include those new settings so they know how to behave.</p>
<p>In this dropdown, I have three options. I can make it automatic. I can manually perform the upgrades, or I can tell Azure to do upgrades in a rolling matter in batches. If we select Automatic, instances will automatically upgrade in random order. If I do it manually, those instances will remain out of date until I manually upgrade them. For this exercise, I’m going to choose the Manual option. And then the rest of the options here, this Monitoring should look familiar to you if you’ve deployed a VM because it’s doing exactly what you would expect it to with a VM.</p>
<p>We also have the Identity option here for System assigned managed identity, which we’ll leave off. We don’t have any use for that here. And then if we hover over the icon next to automatic OS upgrades, we can see that we can enable automatic OS image upgrades for the VMs in my scale set. And what this does is allow us to automatically upgrade the OS disk for all instances within the scale set. We’ll leave this off for this demonstration, and then the instance termination notification here is just the option to receive notifications through the Azure Metadata Service, letting me know that instances were terminated. I’m not worried about getting notifications here, so we’ll click Next for Health, and then we have the option to configure Health monitoring on our instances.</p>
<p>Now, if I was going to be doing automatic OS updates or automatic VM instance upgrades, which I did not choose early on, I need to turn this on. Since I’m doing everything manually, I’ll leave this off. And then we’ll go ahead and click Next for advanced, and then the allocation policy here, we can see that we can set a cap on our allocation of our instances.</p>
<p>Basically what we can do is tell Azure, do we want to allow scaling beyond 100 instances? We’re never going to get to that point so we’ll leave this at No. And then the Spreading algorithm here determines how the VMs within that scale set are going to be balanced across our fault domains.</p>
<p>Max spreading spreads the VMs across as many fault domains as possible within each zone. With Fixed spreadings as you can see here, the VMs are always spread across exactly five fault domains. We’ll leave this at the default here. We’re not interested in any kind of high availability here because we’re going to have maybe three VMs running at the same time.</p>
<p>We’re using a Windows machine, so we don’t have any need for Cloud init so it’s not supported since it’s a Linux feature. And we don’t need any changes to our Proximity placement group or to the generation of our VM. We’ll go ahead and click Next for Tags. We’re not going to tag anything here, so we’ll just go to Next, and we’ll review our settings.</p>
<p>Let it do a validation. And at this point, we can review our settings here, and we’ll go ahead and click Create. And what this is going to do is spin out the load balancer. It’s going to spin up the virtual network. It’s going to spin up the VMs within the scale set. It’s going to configure the frontend and backend for the load balancer to allow everything to work through that load balancer. We will get a public IP that we could use.</p>
<p>For example, let’s say we were going to put IIS on our VMs. What we would do is create the same IIS application or website on the image that we created the VM from, and that’s where you would get into custom images, which we’re not doing here. But let’s assume we were going to put IIS on that. You would then have that application on all of your VMs, and then users would access that application through the load balancer. I’m not too interested in testing the application for this demonstration. I just wanted to show you how to deploy a basic VM scale set with autoscale.</p>
<p>We’ll let this deployment run. This will take a little bit because, again, it’s creating quite a bit of stuff. If we go back home and we go into VMStuff here, we can see we’re starting to create resources. We got the virtual network, the vmstuffdiag storage account that was created when our boot diagnostics was enabled. We got the public IP. We got our load balancer and the public IP for our load balancer along with the basic network security group. I’m going to pause the video right now. We’ll let this run, and then when it’s up and everything’s been deployed, we’ll bounce back in and I’ll show you how this autoscale works.</p>
<p>Welcome back. So the deployment of our scale set has completed. On the screen here, you can see all of the resources that were deployed as part of that VM scale set. If we click on my scale set here, we can take a look at the Overview page of the scale set, along with all of the different settings. If I click on instances, I can see the instances that are currently running. I have the MyScaleSet_3 instance, which is running and is the latest model, and we have MyScaleSet_0, which is also running, but it’s currently updating.</p>
<p>At some point, this updating VM will actually show a running state, and there we go. So we have our scale set with two instances that are running. If we click on Overview for our scale set, we can see that our CPU is averaging about 40%. So this isn’t going to kick off any new instances because our threshold is 50%.</p>
<p>Now, what I’ve done before coming back to you is I’ve logged in to the instance three, I think it is. Yeah, MyScaleSet_3, I’m actually logged into that via RDP. And that’s over on my other screen. Let me bring it up here. And now what I’m going to do, since these are really low end VMs, it doesn’t take much to tip them over to really drive up CPU utilization. What I’m going to try and do here is maybe do a Windows Defender virus scan or something on this VM on my other laptop screen here. And we’ll see if we can get this to kick off another instance.</p>
<p>Let me go in and just offscreen here I’m searching for Defender here. So I’ll bring up Windows Defender, and I’m going to kick off a full scan. And let me take a look at Task Manager on this VM over here. All right, what I’m going to do is drag my VM over just for a quick second, and you can see I have an 84% CPU utilization now going on this VM.</p>
<p>So what I’m going to do is drag this back over onto my other screen, and we’ll wait for the threshold to pass. Now, remember, if we click on Scaling here, for our scale set, we can see that were looking for an average CPU over 50%, and that average needs to be at least five minutes.</p>
<p>So let’s bounce back over into Instances here, and we’ll do a refresh. And we can see now that we have a new instance spinning up because the utilization of our scale set over the last five minutes is averaging over 50%, and that’s because of the massive CPU growth and utilization that I’ve kicked off by performing a scan, so it’s skewing that average because we only have five minutes of time. But when it’s done it has looked at my instance here, and we can see where we’re over 50%. This drop here is the drop that was incurred when we spun up this new instance. And we can see it’s updating, but it’s still running.</p>
<p>Now, what I’m going to do is switch back over to my VM, and I’ve canceled the scan that was occurring. Now, what that’s going to do is drop the CPU utilization way down because there’s really nothing going on on the VM. We’ll give this a few minutes and what should happen is we should start to see a reduction in the number of instances within our scale set. We’ll go ahead and refresh here.</p>
<p>Now, you’ll notice on that refresh, the status for MyScaleSet_4 has changed from Running, Updating, to Deleting. So what the scale set has detected is that drop in CPU utilization, and what it’s doing is removing the newly added instance that it added to the scale set when I began that scan.</p>
<p>Let’s try and refresh again here. And now MyScaleSet_4 is going away. And it’s also taking down MyScaleSet_3. And what it’s gonna do is take MyScaleSet down to the minimum of one instance because it’s sensing that’s all it needs to support the current load, which is none, on the scale set itself. And we’ll refresh here. And if I drag over my RDP session, we can see that I’ve lost connectivity to MyScaleSet_3. That’s because the VM has gone away. And we’ll refresh one more time here. And now we can see neither 3 or 4 is running.</p>
<p>They’re currently just going through the deletion process. And while this is deleting, I’ll just reiterate here, if we click on Networking here under Settings, if we select Load balancing, we can see the load balancer that we created as part of the deployment. We can see it has a Frontend IP address. We don’t have a Frontend DNS Address for it. What you would typically do in a production environment is assign a public or maybe even a private DNS entry for it, and it would point to this frontend IP address for the load balancer. And then your users would access that application through the DNS name, which points to the load balancer IP, which load balances the underlying VM instances in the scale set.</p>
<p>So I’ll bounce back into Instances here, and we’ll refresh one more time. And we can see now, we only have the one instance left in our scale set. With that, you now know how to deploy a VM scale set that’s load balanced and that leverages autoscale.</p>
<h1 id="Configuration-Management-Tools-for-Virtual-Machines"><a href="#Configuration-Management-Tools-for-Virtual-Machines" class="headerlink" title="Configuration Management Tools for Virtual Machines"></a>Configuration Management Tools for Virtual Machines</h1><p>Hello and welcome to Configuration Management Tools For Virtual Machines. In this lesson, we’re going to take a look at some of the key tools that are often used for VM configuration management. We will take a look at tools like Ansible, Chef, and Puppet. We will also look at Cloud-INIT for Linux virtual machines and at <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> custom script extensions for both Linux and Windows VMs. We’ll round things out with virtual machine extensions and PowerShell Desired State Configuration.</p>
<p>Let’s start with Ansible. Ansible is used for VM creation, application deployment, and for configuration management. It’s an automation engine that uses an agentless model to manage target machines. To configure VMs with Ansible, you define specific configuration tasks in what are known as playbooks. Ansible modules are then used to perform specific configuration tasks.</p>
<p>Chef is another tool that can be used to manage VM configuration. You can use Chef to configure, deploy, and manage your infrastructure. Using Chef to manage the configuration of virtual machines requires you to install the Chef client on them. The Chef client communicates with one or more centralized Chef servers that hold and manage the configurations for your virtual machines.</p>
<p>Like Chef, Puppet is another enterprise-ready, automation platform. It’s used to automate the deployment process as well as application delivery. To use Puppet, you install agents on your target VMs. This allows Puppet Master to define your desired configuration. You can even integrate Puppet with solutions like Jenkins and GitHub. This is typically done to improve the DevOps workflow for the organization.</p>
<p>When it comes to automating the configuration of a Linux VM, you can use Cloud-INIT. Cloud-INIT is a popular way of customizing a Linux VM during its initial boot. Cloud-INIT can install packages and even write files. It can also be used to configure users and security. Since it runs during the initial boot process, Cloud-INIT doesn’t require any agents nor does it require any additional steps.</p>
<p>When you use Cloud-INIT to customize a Linux VM, you don’t use apt-get install, nor do you use YUM to install packages. What you do is define a list of packages that you want to install. Cloud-INIT will then use the package management tool for your specific distro to install your defined packages.</p>
<p>The Azure custom script extension can be used to download and execute scripts on both Linux VMs and Windows VMs. While the custom script extension is often used during the creation of a VM, it can also be used even after the VM has been created.</p>
<p>Scripts that are used with the Azure custom script extension can be downloaded from Azure storage or from other public locations. GitHub repositories are a common source for script downloads.</p>
<p>A common example of the Azure custom script extension in action, that you’ll often find online, is where it is used to automatically install IIS on a Windows VM. We will actually work through a demonstration of this later on.</p>
<p>Azure VM extensions are used to perform post-deployment configuration and automation tasks on <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">Azure VMs</a>. These extensions are essentially small applications that can be used to perform things like VM configuration, to install applications, and even to deploy monitoring and security solutions to virtual machines.</p>
<p>Virtual machine extensions are often used to deploy things like antivirus agents, monitoring agents, and even agents that are used by Chef and Puppet. You can use a virtual machine extension during the initial deployment of a new VM, or you can run extensions against a VM after it’s been deployed.</p>
<p>Later on, we’ll walk through a demonstration where we’ll <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-deploying-software-with-vm-extensions/">deploy software to a VM</a> using virtual machine extensions.</p>
<p>PowerShell Desired State Configuration, or DSC, is a management platform that you can use to specify the configuration of target machines. You can use it to configure Windows machines natively, or you can use it on Linux through the open management infrastructure server offering from the open group.</p>
<p>PowerShell DSC is typically used to ensure a VM remains configured as required. You use a DSC configuration to specify what software should be installed on a VM. You can also use a DSC configuration to define how a VM should be configured.</p>
<p>To use PowerShell DSC, you must deploy a Local Configuration Manager engine on each target VM. This local engine, or LCM, configures the VM based on configurations that are pushed down to it. These configurations are stored on a central pull server, which communicates with the local LCM engine on each target VM so that it can provide the necessary configurations while also reporting on compliance.</p>
<h1 id="DEMO-Deploying-Software-with-VM-Extensions"><a href="#DEMO-Deploying-Software-with-VM-Extensions" class="headerlink" title="DEMO: Deploying Software with VM Extensions"></a>DEMO: Deploying Software with VM Extensions</h1><p>Hello and welcome back. In this demonstration, I am going to show you how to deploy software to a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a> using VM extensions.</p>
<p>On the screen here you can see I’m logged in to my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal. I’m on the Overview page of my virtual machine, called VM01. This virtual machine I have running is a Windows Server 2016 Datacenter OS. Now, offscreen I’m logged into this VM via RDP and I’m just pulling it over here onto my main screen here.</p>
<p>Now, let’s go into services and we’ll take a look at what we have running here. This is just a plain, vanilla install of Windows 2016. Nothing spectacular here, just basic services are running. What I’m going to do is minimize this, and from my Overview page for the VM, I’m going to browse down to Extensions under Settings.</p>
<p>If I select Extensions here and I click add, what happens is I get a blade that shows up here of all the different Windows-based extensions that I can install on my virtual machine. We have things like the Agent for Cloud Workload Protection for Symantec, the Puppet Agent, SentinelOne, NVIDIA GPU drivers, all this fun stuff. We also have the Custom Script Extension, the PowerShell Desired State configuration. All these different things we can install, usually agents, on our virtual machine.</p>
<p>What we’re going to do here in this demonstration, is install the Network Watcher Agent for Windows. Now, this Network Watcher Agent allows you to monitor your VM’s network performance and health. To do that we simply, like I did here, is select it from the list and click Create. And then since there’s nothing here, there’s no licensing or any information that we need to agree to, we simply have the OK button down here. And each of these blades will be different depending on what you’re installing. So we’ll go ahead and okay it.</p>
<p>We can see that the deployment is submitted and what’ll happen is once this deployment gets submitted it’ll show up in the list here of extensions. And if we click the notification bell up here, we can see that the deployment is still in progress. And we can see now that the provisioning has succeeded here. If we bounce over to our virtual machine, let me drag him back up over here, and we’ll refresh this, if we scroll up here we can see we now have the Azure Network Watcher Agent installed and running. And that’s really all there is to it.</p>
<p>Now, you’re not going to install a whole bunch of different software using these preconfigured extensions, but what you can do is leverage the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-deploying-iis-with-custom-script-extension/">Custom Script Extension</a> to call different scripts to pull different software in, and you can use the PowerShell Desired State configuration to maintain a configuration on the VM. These two options here are really where the power of extensions come into play.</p>
<h1 id="DEMO-Deploying-IIS-with-Custom-Script-Extension"><a href="#DEMO-Deploying-IIS-with-Custom-Script-Extension" class="headerlink" title="DEMO: Deploying IIS with Custom Script Extension"></a>DEMO: Deploying IIS with Custom Script Extension</h1><p>Hello, and welcome back. In this brief demonstration, I’m going to show you how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-deploying-software-with-vm-extensions/">deploy software using VM extensions</a>. More specifically, the custom script extension. What we’re going to do here is install IIS on a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a> called VMO1.</p>
<p>So on the screen here, I’m logged into my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal and I’m at the overview page for VMO1, which is a running Windows Server 2016 data center VM. What I’m going to do is grab my RDP session because I am RDPED into the server right now. And we can see if we go into Manage and Remove Roles. That web server or IIS is currently not installed on this VM.</p>
<p>So instead of installing It from within the VM itself. What we’re going to do is use a custom script extension to do it for us. So let me minimize this RDP session here. And what we’re going to do to begin this installation is first create a PowerShell script, which is a PS1 file. And that PS1 file needs to call the install Windows feature, a PowerShell command.</p>
<p>Now if I drag my PowerShell command in here, I have a script called Enable IIS that I created and this is on my local workstation. And in the PS1 script, I’m calling install Windows feature. And I’m specifying the web server feature with a name flag. And I’m also telling it to include the IIS management tools.</p>
<p>So again, this is a file called Enable IIS and it’s a PS1 file or a PowerShell script. So I’ll do drag this over here back onto my other screen. What we’re going to do is reference that file when we deploy this custom script extension. So to deploy that Enable IIS file to my VMO1 virtual machine and to execute it, what I need to do is click on extensions under Settings.</p>
<p>Now from the extensions blade here, what I need to do to deploy my custom script extension is click add here. And then I can select Custom script extension here from the list in the left pane. So we’ll go ahead and select our custom script extension. And what we’ll do is we’ll create our extension.</p>
<p>Now when we do this, we need to specify the script file, which in this case is the Enable IIS, PS1 file that I created ahead of this lab. And then I can specify any optional arguments. Now my script doesn’t need arguments to install IIS, So this field will be left blank. But what we’ll do here is we’ll select our Enable IIS script here, and we can see that as your uploads it automatically to temporary storage. And it does this so the VM can then pull that script down and execute it.</p>
<p>So we’ll go ahead and okay this, and we can see the deployment being submitted and then going into progress. What this custom script extension will do is switch over to transitioning shortly, and eventually it’ll move on to provisioning succeeded.</p>
<p>While this is going on, let me drag my VM back over. And we’ll refresh here, the Server Manager. And once the script runs, we’ll see the IIS service show up here. It’s Matter of fact, let me go into manage here and just see if it’s showing up yet. We can see web server is now listed as installed. If we cancel out of here and do a refresh, we can see IIS is now installed and running. If we minimize our RDP session, and refresh our extension screen here, we can see that provisioning has succeeded on our VM.</p>
<p>So what our custom script extension did was take the PS1 PowerShell script that I created that calls the install Windows feature, and it uploaded it to temporary storage and Azure, the Windows VM then pulled down that script and executed it. And when it executed it called the install Windows feature and installed the IIS service on the VM.</p>
<p>So that’s how you can use the custom script extension to install other applications and Software other than what you get here out of the box from Azure itself. So with that, we’ll call it a wrap and I’ll see you in the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/overview-of-azure-managed-disks/">next lesson</a>.</p>
<h1 id="Azure-Monitor-for-VMs"><a href="#Azure-Monitor-for-VMs" class="headerlink" title="Azure Monitor for VMs"></a>Azure Monitor for VMs</h1><p>Hello and welcome to Azure Monitor for VMs. Over the next few minutes, we’re going to look at what Azure Monitor for VMs is and what it provides.</p>
<p>Azure Monitor for VMs is a cloud offering that you can use to monitor both <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">Azure virtual machines</a> and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/virtual-machines-scale-sets/">virtual machine scale sets</a>. What it does is analyze both the performance and health of Windows and Linux virtual machines. It monitors processes running on the VMs, dependencies on other resources, and it can even monitor external processes. Azure Monitor for VMs can even monitor virtual machines and physical machines that are on-prem or hosted by other cloud providers.</p>
<p>Azure Monitor for VMs provides predefined trending performance charts that show key performance metrics for the OS of the VM being monitored. It also provides a dependency map. This dependency map is pretty slick because it shows interconnected components with the virtual machine being monitored from all of your resource groups and subscriptions.</p>
<p>The dependency map gets its data from the Microsoft dependency agent, which in turn, relies on the log analytics agent for its connection to log analytics. This means that to use the map feature in Azure Monitor for VMs, your system needs to have the log analytics agent installed, and it needs to be configured with the dependency agent. Microsoft recommends that you use the Azure VM dependency agent extension for both Windows and Linux to install the agent on your Azure VMs.</p>
<p>The integration of Azure Monitor for VMs with Azure Monitor logs provides aggregation capabilities, filtering capabilities, and the ability to analyze VM data trends over time. To view the collected data, you can either look at it from the Insights page for a single VM, or you can see an aggregated view of all VMs from within Azure Monitor.</p>
<p>Organizations typically use Azure Monitor to identify performance bottlenecks and network issues that affect applications.</p>
<p>The data that gets collected by your virtual machines is stored in Azure Monitor. A log analytics workspace is required to store the performance and dependency data that’s collected.</p>
<p>You can set up Azure Monitor for VMs in a few different ways. To monitor a single VM or VM scale set, you can do so right from the Insights link right from the page for the individual VM or scale set. If you need to monitor more than one Azure VM or scale set, it’s usually best to use Azure Policy to do so. That being said, you can also use PowerShell, if you need to monitor more than one Azure VM or scale set as well.</p>
<p>The table on your screen shows all of the different operating systems that Azure Monitor for VMs supports.</p>
<p>I should point out before we dive into the upcoming demonstration that you need to have at least the log analytics contributor role to enable and access the Azure Monitor for VM features. If you want to view the performance, health, and map data, you need to have the monitoring reader role for the particular Azure VM that you’re interested in.</p>
<p>In the upcoming demonstration, we’ll enable <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-monitoring-an-azure-vm-with-azure-monitor-for-vms/">Azure Monitor</a> for a single VM through the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal.</p>
<h1 id="DEMO-Monitoring-an-Azure-VM-with-Azure-Monitor-for-VMs"><a href="#DEMO-Monitoring-an-Azure-VM-with-Azure-Monitor-for-VMs" class="headerlink" title="DEMO: Monitoring an Azure VM with Azure Monitor for VMs"></a>DEMO: Monitoring an Azure VM with Azure Monitor for VMs</h1><p>Hello, and welcome back. In this brief demonstration. I’m going to walk you through the process of enabling <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/azure-monitor-for-vms/">Azure monitor</a> for VMs for a single <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a>.</p>
<p>On the screen here you can see I’m logged into my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal, and I’m in my resource group that I created, that’s called VMStuff. And in VMStuff, I have a virtual machine called MyVM. What we’re going to do here is enable monitoring for this virtual machine. And it’s actually a pretty, straightforward process.</p>
<p>From my VMStuff resource group, what I’ll do here is select MyVM, and at this point I’m at the overview page for the virtual machine. To enable Azure Monitor for VMs, I simply scroll down on the left here, to the monitoring section, and under monitoring there’s an option here for insights.</p>
<p>So we’re going to go ahead and select insights. If the VM is not yet enabled for Azure monitor, you’ll get this screen here, this get more visibility screen, and you’ll see the blue button here to enable the VM. So what we’ll do here to enable it is click the enable button, and then what happens is it prompts me for a log analytics workspace.</p>
<p>We can see that it’s telling me here that the VM isn’t currently connected to any workspace, and that I need to select an existing one. It defaults here to my lab subscription, where I’m working, and then I have an option in this dropdown, to select an existing log analytics workspace.</p>
<p>Now, if I didn’t have a log analytics workspace available, I’d have to create one for this. Since we already have a default workspace, we’ll use the one that it chose for us. And then from here we can simply click enable. And what this does is deploys insights. And once this is done, our virtual machine here will be enabled for Azure Monitor for VMs.</p>
<p>So let’s let Azure do its thing here. And this takes a few minutes. And then once this is done, I’ll show you what it looks like. We can see that our deployment has succeeded here, and we’ll close this. And it’s telling us that monitoring data is being collected and routed to insights.</p>
<p>So this can take up to 10 minutes. So what I’m going to do is pause this video, and we’ll come back when this data has arrived. So hang tight. Welcome back, so our insights deployment has completed. And now if we look at the insights page under monitoring for our VM, we have two options, we have performance and we have map.</p>
<p>The map option allows us to discover application dependencies, while the performance tab here allows us to look at overall utilization of the VM, and its performance.</p>
<p>From the performance tab here, we can take a look at our logical disk performance, information on CPU utilization, Ram, IOPS, disk throughput, and all kinds of other data about our virtual machine. And if we bounce back out to the map tab here, we can see the different processes that are running on the VM, and we can see where the ports are in use for those different processes.</p>
<p>So this tab here, this map tab provides you with a way to view dependencies for the VM, while the performance tab allows you to view the performance of your virtual machine.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Congratulations, you’ve come to the end of Advanced VM Management in Azure. Let’s review what you’ve learned.</p>
<p>We started things off by looking at virtual machine scale sets. You learned about vertical scaling and horizontal scaling. You also saw a hands-on demo on how to deploy a VM scale set with autoscaling enabled.</p>
<p>We then looked at configuration management. I introduced you to many tools that can be used to manage VM configurations. You learned how to deploy an Azure PowerShell DSC Configuration and how to deploy software using VM extensions.</p>
<p>We wrapped up by covering VM monitoring.</p>
<p>At this point, you should have a basic understanding of how to scale VMs, how to manage VM configurations, and how to monitor VMs.</p>
<p>To learn more about Azure virtual machines, you can, and should, read Microsoft’s published documentation. Be sure to also watch for new courses on Cloud Academy, because we’re always publishing new ones. Be sure to give this course a rating, and if you have any questions or comments, please let us know. Thanks for watching and happy learning!</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/11/18/AZ-104-Knowledge-Check-Getting-Started-with-Azure-Virtual-Machines-12/" rel="prev" title="AZ-104-Knowledge-Check-Getting-Started-with-Azure-Virtual-Machines-12">
      <i class="fa fa-chevron-left"></i> AZ-104-Knowledge-Check-Getting-Started-with-Azure-Virtual-Machines-12
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/18/AZ-104-Azure-Key-Vault-and-Disk-Encryption-14/" rel="next" title="AZ-104-Azure-Key-Vault-and-Disk-Encryption-14">
      AZ-104-Azure-Key-Vault-and-Disk-Encryption-14 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction"><span class="nav-number">1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Virtual-Machines-Scale-Sets"><span class="nav-number">2.</span> <span class="nav-text">Virtual Machines Scale Sets</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vertical-Scaling-vs-Horizontal-Scaling"><span class="nav-number">3.</span> <span class="nav-text">Vertical Scaling vs. Horizontal Scaling</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DEMO-Implementing-a-VM-Scale-Set-with-Autoscaling"><span class="nav-number">4.</span> <span class="nav-text">DEMO: Implementing a VM Scale Set with Autoscaling</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Configuration-Management-Tools-for-Virtual-Machines"><span class="nav-number">5.</span> <span class="nav-text">Configuration Management Tools for Virtual Machines</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DEMO-Deploying-Software-with-VM-Extensions"><span class="nav-number">6.</span> <span class="nav-text">DEMO: Deploying Software with VM Extensions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DEMO-Deploying-IIS-with-Custom-Script-Extension"><span class="nav-number">7.</span> <span class="nav-text">DEMO: Deploying IIS with Custom Script Extension</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Azure-Monitor-for-VMs"><span class="nav-number">8.</span> <span class="nav-text">Azure Monitor for VMs</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DEMO-Monitoring-an-Azure-VM-with-Azure-Monitor-for-VMs"><span class="nav-number">9.</span> <span class="nav-text">DEMO: Monitoring an Azure VM with Azure Monitor for VMs</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Summary"><span class="nav-number">10.</span> <span class="nav-text">Summary</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2736</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
