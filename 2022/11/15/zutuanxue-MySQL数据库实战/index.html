<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="数据库介绍 阅读 (127201)   分享 数据库(Database)是按照数据结构来组织、存储和管理数据的仓库，它产生于距今六十多年前，随着信息技术和市场的发展，特别是二十世纪九十年代以后，数据管理不再仅仅是存储和管理数据，而转变成用户所需要的各种数据管理的方式。数据库有很多种类型，从最简单的存储有各种数据的表格到能够进行海量数据存储的大型数据库系统都在各个方面得到了广泛的应用。 在信息化社会">
<meta property="og:type" content="article">
<meta property="og:title" content="zutuanxue-MySQL数据库实战">
<meta property="og:url" content="https://example.com/2022/11/15/zutuanxue-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:description" content="数据库介绍 阅读 (127201)   分享 数据库(Database)是按照数据结构来组织、存储和管理数据的仓库，它产生于距今六十多年前，随着信息技术和市场的发展，特别是二十世纪九十年代以后，数据管理不再仅仅是存储和管理数据，而转变成用户所需要的各种数据管理的方式。数据库有很多种类型，从最简单的存储有各种数据的表格到能够进行海量数据存储的大型数据库系统都在各个方面得到了广泛的应用。 在信息化社会">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185856048.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185877802.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185890762.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185901929.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186097183.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186112844.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186134688.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186163795.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186172227.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186189059.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186208888.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186370700.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186384589.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186400724.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186444899.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186460999.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186477455.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186494146.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186509787.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186527639.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186542299.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186557642.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186572803.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186588911.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186603371.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186618860.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186632233.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186647147.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186661203.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186683271.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186700884.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186715524.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186727307.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186745243.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186756221.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186773023.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186786858.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186796440.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186810087.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187016784.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187353636.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187402867.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187415619.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187429998.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187442067.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187455034.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187929354.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187963975.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188686160.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188795282.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188695335.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188705609.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603189560330.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603189560330.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240514001.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240575339.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240588322.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240601021.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240617595.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241036981.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241052871.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241065129.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241079269.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241161787.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241222140.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241592735.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241661863.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241674165.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241693324.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241714996.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519226794.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519241295.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519252162.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603518979561.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603518996760.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519029171.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519053659.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519068528.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519086079.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519101214.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519132024.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519178063.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519846736.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519903738.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519921512.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519985050.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520015989.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520032028.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520068046.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520109258.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520139013.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520161317.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520873279.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521032491.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521094762.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521169582.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521230682.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521251515.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521269958.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521286648.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521654232.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521671030.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521684164.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521704494.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521717747.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521732225.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521748776.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521889167.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521923781.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521943126.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521967385.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521994010.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/29/1603972949435.jpg">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/29/1603972978082.png">
<meta property="og:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/29/1603973198714.png">
<meta property="article:published_time" content="2022-11-15T16:19:56.000Z">
<meta property="article:modified_time" content="2022-11-28T13:57:08.000Z">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185856048.png">

<link rel="canonical" href="https://example.com/2022/11/15/zutuanxue-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>zutuanxue-MySQL数据库实战 | Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/zutuanxue-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          zutuanxue-MySQL数据库实战
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-15 12:19:56" itemprop="dateCreated datePublished" datetime="2022-11-15T12:19:56-04:00">2022-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-28 09:57:08" itemprop="dateModified" datetime="2022-11-28T09:57:08-04:00">2022-11-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/zutuanxue/" itemprop="url" rel="index"><span itemprop="name">zutuanxue</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/zutuanxue-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/zutuanxue-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="数据库介绍"><a href="#数据库介绍" class="headerlink" title="数据库介绍"></a>数据库介绍</h1><p> 阅读 (127201) </p>
<p> 分享</p>
<p>数据库(Database)是按照数据结构来组织、存储和管理数据的仓库，它产生于距今六十多年前，随着信息技术和市场的发展，特别是二十世纪九十年代以后，数据管理不再仅仅是存储和管理数据，而转变成用户所需要的各种数据管理的方式。数据库有很多种类型，从最简单的存储有各种数据的表格到能够进行海量数据存储的大型数据库系统都在各个方面得到了广泛的应用。</p>
<p>在信息化社会，充分有效地管理和利用各类信息资源，是进行科学研究和决策管理的前提条件。数据库技术是管理信息系统、办公自动化系统、决策支持系统等各类信息系统的核心部分，是进行科学研究和决策管理的重要技术手段。</p>
<h2 id="一、数据库管理系统"><a href="#一、数据库管理系统" class="headerlink" title="一、数据库管理系统"></a>一、数据库管理系统</h2><h3 id="1-1、数据存储方式"><a href="#1-1、数据存储方式" class="headerlink" title="1.1、数据存储方式"></a>1.1、数据存储方式</h3><p>计算机数据（Data）的存储一般以硬盘为数据存储空间资源，从而保证计算机内的数据能够持续保存。对于数据的处理，一般会采用数据库相关的技术进行处理，从而保证数据处理的高效性。</p>
<p>采用数据库的管理模式不仅提高了数据的存储效率，而且在存储的层面上提高了数据的安全性。通过分类的存储模式让数据管理更加安全便捷，更能实现对数据的调用和对比，并且方便查询等操作的使用。</p>
<h3 id="1-2、数据库管理系统"><a href="#1-2、数据库管理系统" class="headerlink" title="1.2、数据库管理系统"></a>1.2、数据库管理系统</h3><p><strong>常见的数据库管理系统：</strong></p>
<p>MySQL:开源免费的数据库，小型的数据库。已经被Oracle收购了，MySQL6.x版本也开始收费。</p>
<p>Oracle:收费的大型数据库，Oracle公司的产品。Oracle收购SUN公司，收购MYSQL。</p>
<p>DB2:IBM公司的数据库产品,收费的。常应用在银行系统中.</p>
<p>SQLServer:MicroSoft 公司收费的中型的数据库。C#、.net等语言常使用。</p>
<p>SyBase:已经淡出历史舞台。提供了一个非常专业数据建模的工具PowerDesigner。</p>
<p>SQLite:嵌入式的小型数据库，应用在手机端。</p>
<p>Java常用的数据库:MySQL，Oracle。</p>
<p>Python常用的数据库:MySQL。</p>
<h3 id="1-3、数据库与数据库管理系统关系"><a href="#1-3、数据库与数据库管理系统关系" class="headerlink" title="1.3、数据库与数据库管理系统关系"></a>1.3、数据库与数据库管理系统关系</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185856048.png" alt="image20200128210246764.png"></p>
<h2 id="2、数据库"><a href="#2、数据库" class="headerlink" title="2、数据库"></a>2、数据库</h2><p>数据库就是存储数据的仓库，由数据库表组成，其本质是一个文件系统，数据库按照特定的格式将数据存储起来，用户可以对数据库中的数据进行增加，修改，删除及查询操作。</p>
<h3 id="2-1、数据库表"><a href="#2-1、数据库表" class="headerlink" title="2.1、数据库表"></a>2.1、数据库表</h3><p>数据库中以表为组织单位存储数据。</p>
<p>数据库表由：表名、表字段、表记录构成</p>
<p><strong>如：</strong></p>
<p>在学生档案中，学生信息（<strong>数据库表</strong>）是由学号、姓名、性别、年龄、籍贯、院系、联系电话（<strong>表中字段</strong>）等特征组成的，那么这些具体的特征值所构成的一条记录就是一个学生的信息数据，例如“2016010102，张三，男，26，山西，计算机学院，18513232232”（<strong>记录</strong>）。</p>
<h3 id="2-2、数据库表记录"><a href="#2-2、数据库表记录" class="headerlink" title="2.2、数据库表记录"></a>2.2、数据库表记录</h3><p>根据表字段所规定的数据类型，我们可以向其中填入一条条的数据，而表中的每条数据类似类的实例对象。表中的一行一行的信息我们称之为记录。</p>
<h4 id="2-2-1、数据库"><a href="#2-2-1、数据库" class="headerlink" title="2.2.1、数据库"></a>2.2.1、数据库</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185877802.png" alt="image20200128212446704.png"></p>
<h4 id="2-2-2、数据库表结构"><a href="#2-2-2、数据库表结构" class="headerlink" title="2.2.2、数据库表结构"></a>2.2.2、数据库表结构</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185890762.png" alt="image20200128212610860.png"></p>
<h4 id="2-2-3、记录"><a href="#2-2-3、记录" class="headerlink" title="2.2.3、记录"></a>2.2.3、记录</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185901929.png" alt="image20200128212711794.png"></p>
<h1 id="MySql安装与使用"><a href="#MySql安装与使用" class="headerlink" title="MySql安装与使用"></a>MySql安装与使用</h1><p> 阅读 (156474) </p>
<p> 分享</p>
<p>mysql是目前最流行的关系型数据库管理系统,在WEB应用方面MySQL是最好的RDBMS(Relational Database Management System：关系数据库管理系统)应用软件之一。</p>
<p>MySQL是非常灵活的一款数据库，虽然它不是绝对完美，但它的灵活足够适应很多高要求的环境。为了发挥MySQL的性能并很好的使用它，我们就得先了解其设计。MySQL的灵活主要体现在我们可以通过不同的配置使他在不同的硬件上都能运行的很好。但是MySQL最重要，与众不同的特性是它的存储引擎架构，这种架构将查询处理及其他系统任务和数据的存储&#x2F;提取相分离。</p>
<h2 id="一、mysql概述"><a href="#一、mysql概述" class="headerlink" title="一、mysql概述"></a>一、mysql概述</h2><h3 id="1-1、关系型数据库"><a href="#1-1、关系型数据库" class="headerlink" title="1.1、关系型数据库"></a>1.1、关系型数据库</h3><p>关系型数据库天然就是二维表格，因此存储在数据表的行和列中。数据表可以彼此关联协作存储，也很容易提取数据。</p>
<h3 id="1-2、MySQL数据库"><a href="#1-2、MySQL数据库" class="headerlink" title="1.2、MySQL数据库"></a>1.2、MySQL数据库</h3><p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB公司开发，目前属于Oracle公司。</p>
<p>MySQL可将数据保存在不同的表中，而不是将所有数据放在一个大的仓库内，从而加快了访问速度并提高了灵活性。</p>
<p>MySQL 使用了标准的 SQL 语言形式。支持大型的数据库，可以处理拥有上千万条记录的大型数据库。MySQL 还可用于多种系统中，且支持多种语言。</p>
<h3 id="1-3、RDBMS术语"><a href="#1-3、RDBMS术语" class="headerlink" title="1.3、RDBMS术语"></a>1.3、RDBMS术语</h3><p>数据库：数据库是一些关联表的集合。</p>
<p>数据表：表是数据的矩阵。在一个数据库中的表看起来像一个简单的电子表格。</p>
<p>列：一列（数据元素）包含了相同的数据，例如邮政编码的数据。</p>
<p>行：一行（&#x3D;元组，或者记录）是一组相关的数据，例如一条用户订阅的数据。</p>
<p>亢余：存储两倍数据，亢余降低了性能，但是提高了数据的安全性。</p>
<p>主键：主键是唯一的，一个数据表中只能够包含一个主键，你可以使用主键来查询数据。</p>
<p>外键：外键用于关联两个表。</p>
<p>复合键：复合键（组合键）将多个列作为一个索引键，一般用于复合索引。</p>
<p>索引：使用索引可快速访问数据库表中的特定信息。索引是对数据库表中一列或者多列的值进行排序的一种结构。类似于书籍的目录。</p>
<h3 id="1-4、mysql下载"><a href="#1-4、mysql下载" class="headerlink" title="1.4、mysql下载"></a>1.4、mysql下载</h3><p><a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186097183.png" alt="image20200223135527926.png"></p>
<p>点击“Download”后，我们要先登录Oracle，才能进行下载。</p>
<h2 id="2、mysql安装"><a href="#2、mysql安装" class="headerlink" title="2、mysql安装"></a>2、mysql安装</h2><h3 id="2-1、指定安装文件位置"><a href="#2-1、指定安装文件位置" class="headerlink" title="2.1、指定安装文件位置"></a>2.1、指定安装文件位置</h3><p>将mysql安装包放到&#x2F;usr&#x2F;local&#x2F;下面</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186112844.png" alt="image20200223011252870.png"></p>
<h3 id="2-2、解压"><a href="#2-2、解压" class="headerlink" title="2.2、解压"></a>2.2、解压</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue local]# xz -d mysql-8.0.17-linux-glibc2.12-x86_64.tar.xz </span><br><span class="line">[root@zutuanxue local]# tar -xvf mysql-8.0.17-linux-glibc2.12-x86_64.tar </span><br></pre></td></tr></table></figure>

<h3 id="2-3、改名"><a href="#2-3、改名" class="headerlink" title="2.3、改名"></a>2.3、改名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue local]# mv mysql-8.0.17-linux-glibc2.12-x86_64 mysql</span><br></pre></td></tr></table></figure>

<h3 id="2-4、创建用户组"><a href="#2-4、创建用户组" class="headerlink" title="2.4、创建用户组"></a>2.4、创建用户组</h3><p>mysql用户组、mysql用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue local]# groupadd mysql</span><br><span class="line">[root@zutuanxue local]# useradd -r -g mysql mysql</span><br><span class="line">[root@zutuanxue local]# passwd mysql</span><br><span class="line">#更改密码：Ww1985929wW</span><br></pre></td></tr></table></figure>

<h3 id="2-5、修改MySQL配置文件"><a href="#2-5、修改MySQL配置文件" class="headerlink" title="2.5、修改MySQL配置文件"></a>2.5、修改MySQL配置文件</h3><p>&#x2F;etc&#x2F;my.cnf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># For advice on how to change settings please see</span><br><span class="line"># http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html</span><br><span class="line"># *** DO NOT EDIT THIS FILE. It&#x27;s a template which will be copied to the</span><br><span class="line"># *** default location during install, and will be replaced if you</span><br><span class="line"># *** upgrade to a newer version of MySQL.</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size = 128M</span><br><span class="line"></span><br><span class="line"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="line"># changes to the binary log between backups.</span><br><span class="line"># log_bin</span><br><span class="line"></span><br><span class="line"># These are commonly set, remove the # and set as required.</span><br><span class="line">basedir = /usr/local/mysql</span><br><span class="line">datadir = /usr/local/mysql/data</span><br><span class="line">port = 3306</span><br><span class="line"># server_id = .....</span><br><span class="line">socket = /tmp/mysql.sock</span><br><span class="line">character-set-server = utf8</span><br><span class="line">skip-name-resolve</span><br><span class="line">log-error = /usr/local/mysql/data/error.log</span><br><span class="line">pid-file = /usr/local/mysql/data/mysql.pid</span><br><span class="line"></span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size = 128M</span><br><span class="line"># sort_buffer_size = 2M</span><br><span class="line"># read_rnd_buffer_size = 2M </span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br></pre></td></tr></table></figure>

<h3 id="2-6、创建data文件夹"><a href="#2-6、创建data文件夹" class="headerlink" title="2.6、创建data文件夹"></a>2.6、创建data文件夹</h3><p>data文件夹是用于存储数据库文件，他的位置是在mysql目录下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# mkdir data</span><br></pre></td></tr></table></figure>

<h3 id="2-7、更改mysql目录权限"><a href="#2-7、更改mysql目录权限" class="headerlink" title="2.7、更改mysql目录权限"></a>2.7、更改mysql目录权限</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# chown -R mysql .</span><br><span class="line">[root@zutuanxue mysql]# chgrp -R mysql .</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186134688.png" alt="image20200223012815486.png"></p>
<h3 id="2-8、初始化数据库"><a href="#2-8、初始化数据库" class="headerlink" title="2.8、初始化数据库"></a>2.8、初始化数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data</span><br></pre></td></tr></table></figure>

<p>执行完后查看初始密码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# vim /usr/local/mysql/data/error.log</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186163795.png" alt="image20200223013228179.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186172227.png" alt="image20200223182708100.png"></p>
<h3 id="2-9、启动mysql服务"><a href="#2-9、启动mysql服务" class="headerlink" title="2.9、启动mysql服务"></a>2.9、启动mysql服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server start</span><br><span class="line">Starting MySQL... SUCCESS! </span><br></pre></td></tr></table></figure>

<h3 id="2-10、修改root密码"><a href="#2-10、修改root密码" class="headerlink" title="2.10、修改root密码"></a>2.10、修改root密码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./bin/mysql -uroot -prj%-:yqHb98g</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186189059.png" alt="image20200223014851493.png"></p>
<p><strong>修改密码：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;Root123456&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br></pre></td></tr></table></figure>

<h2 id="3、mysql操作"><a href="#3、mysql操作" class="headerlink" title="3、mysql操作"></a>3、mysql操作</h2><h3 id="3-1、服务器操作"><a href="#3-1、服务器操作" class="headerlink" title="3.1、服务器操作"></a>3.1、服务器操作</h3><p>启动、停止、重启</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server restart</span><br><span class="line">Shutting down MySQL. SUCCESS! </span><br><span class="line">Starting MySQL.. SUCCESS! </span><br><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server stop</span><br><span class="line">Shutting down MySQL.. SUCCESS! </span><br><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server start</span><br><span class="line">Starting MySQL.. SUCCESS! </span><br></pre></td></tr></table></figure>

<h3 id="3-2、设置远程连接"><a href="#3-2、设置远程连接" class="headerlink" title="3.2、设置远程连接"></a>3.2、设置远程连接</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create user &#x27;root&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;Root123456&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant all on *.* to &#x27;root&#x27;@&#x27;%&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>遇到问题：</strong></p>
<p>Can’t connect to MySQL server on ‘192.168.1.121’ (61)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# systemctl stop firewalld.service </span><br><span class="line">[root@zutuanxue mysql]# firewall-cmd --state</span><br></pre></td></tr></table></figure>

<h2 id="4、mysql卸载"><a href="#4、mysql卸载" class="headerlink" title="4、mysql卸载"></a>4、mysql卸载</h2><h3 id="4-1、停止mysql服务"><a href="#4-1、停止mysql服务" class="headerlink" title="4.1、停止mysql服务"></a>4.1、停止mysql服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server stop</span><br><span class="line">Shutting down MySQL.... SUCCESS! </span><br></pre></td></tr></table></figure>

<h3 id="4-2、查找所有mysql相关文件夹"><a href="#4-2、查找所有mysql相关文件夹" class="headerlink" title="4.2、查找所有mysql相关文件夹"></a>4.2、查找所有mysql相关文件夹</h3><p>查找</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# find / -name mysql</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186208888.png" alt="image20200223024128126.png"></p>
<p>删除所有查出来的文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# rm -rf /var/lib/selinux/targeted/active/modules/100/mysql</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<h3 id="4-3、删除配置文件"><a href="#4-3、删除配置文件" class="headerlink" title="4.3、删除配置文件"></a>4.3、删除配置文件</h3><p>配置文件一般有&#x2F;etc&#x2F;my.cnf 或&#x2F;etc&#x2F;init.d&#x2F;mysql.server，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# rm -f /etc/my.cnf</span><br><span class="line">[root@zutuanxue mysql]# rm -rf /etc/init.d/mysql.server</span><br></pre></td></tr></table></figure>

<h3 id="4-4、删除用户组"><a href="#4-4、删除用户组" class="headerlink" title="4.4、删除用户组"></a>4.4、删除用户组</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue mysql]# userdel mysql</span><br><span class="line">[root@zutuanxue mysql]# id mysql</span><br><span class="line">id: “mysql”：无此用户</span><br></pre></td></tr></table></figure>

<h1 id="MySql客户端"><a href="#MySql客户端" class="headerlink" title="MySql客户端"></a>MySql客户端</h1><p> 阅读 (216008) </p>
<p> 分享</p>
<p>Navicat for MySQL是一套管理和开发MySQL或MariaDB的理想解决方案，支持单一程序，可同时连接到MySQL和MariaDB。这个功能齐备的前端软件为数据库管理、开发和维护提供了直观而强大的图形界面，给MySQL或MariaDB新手以及专业人士提供了一组全面的工具。</p>
<h2 id="1、Navicat-for-MySQL下载与安装"><a href="#1、Navicat-for-MySQL下载与安装" class="headerlink" title="1、Navicat for MySQL下载与安装"></a>1、Navicat for MySQL下载与安装</h2><h3 id="1-1、下载"><a href="#1-1、下载" class="headerlink" title="1.1、下载"></a>1.1、下载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.navicat.com.cn/download/navicat-for-mysql</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186370700.png" alt="image20200222233257400.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186384589.png" alt="image20200222233338007.png"></p>
<h3 id="1-2、下载完成"><a href="#1-2、下载完成" class="headerlink" title="1.2、下载完成"></a>1.2、下载完成</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186400724.png" alt="image20200222233455188.png"></p>
<h3 id="1-3、安装"><a href="#1-3、安装" class="headerlink" title="1.3、安装"></a>1.3、安装</h3><p><strong>右击“navicat150_mysql_cs_x64.exe”，以管理员身份运行，选择“是”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186444899.png" alt="image20200222233702941.png"></p>
<p><strong>跳出安装程序对话框，选择“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186460999.png" alt="image20200222233952780.png"></p>
<p><strong>选择“我同意”，继续“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186477455.png" alt="image20200222234125462.png"></p>
<p><strong>选择“安装路径”，继承“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186494146.png" alt="image20200222234450664.png"></p>
<p><strong>选择“快捷方式路径”，继续“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186509787.png" alt="image20200222234354406.png"></p>
<p><strong>选择在“桌面创建快捷方式”，继续“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186527639.png" alt="image20200222234708924.png"></p>
<p><strong>进入“装备安装”界面，点击“安装”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186542299.png" alt="image20200222234904299.png"></p>
<p><strong>进入“安装”界面，直到跳出“完成”界面</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186557642.png" alt="image20200222235023235.png"></p>
<p><strong>点击“完成”，安装成功</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186572803.png" alt="image20200222235103254.png"></p>
<h3 id="1-4、Navicat-for-MySQL连接MySQL数据库"><a href="#1-4、Navicat-for-MySQL连接MySQL数据库" class="headerlink" title="1.4、Navicat for MySQL连接MySQL数据库"></a>1.4、Navicat for MySQL连接MySQL数据库</h3><h4 id="1-4-1、打开Navicat-for-MySQL"><a href="#1-4-1、打开Navicat-for-MySQL" class="headerlink" title="1.4.1、打开Navicat for MySQL"></a>1.4.1、打开Navicat for MySQL</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186588911.png" alt="image20200222235353143.png"></p>
<h4 id="1-4-2、创建新连接"><a href="#1-4-2、创建新连接" class="headerlink" title="1.4.2、创建新连接"></a>1.4.2、创建新连接</h4><p><strong>连接-&gt;MySQL</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186603371.png" alt="image20200222235549717.png"></p>
<p><strong>文件-&gt;新建连接-&gt;MySQL</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186618860.png" alt="image20200222235719188.png"></p>
<p><strong>新建连接对话框，输入对应信息，点击“测试连接”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186632233.png" alt="image20200223000045104.png"></p>
<p><strong>连接成功</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186647147.png" alt="image20200223000156896.png"></p>
<p><strong>确认连接后如下：</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186661203.png" alt="image20200223000512002.png"></p>
<h2 id="2、Navicat-for-MySQL操作-上"><a href="#2、Navicat-for-MySQL操作-上" class="headerlink" title="2、Navicat for MySQL操作-上"></a>2、Navicat for MySQL操作-上</h2><h3 id="2-1、数据库操作"><a href="#2-1、数据库操作" class="headerlink" title="2.1、数据库操作"></a>2.1、数据库操作</h3><h4 id="2-2-1、创建数据库"><a href="#2-2-1、创建数据库" class="headerlink" title="2.2.1、创建数据库"></a>2.2.1、创建数据库</h4><p><strong>右击“MySQL连接”，选择“新建数据库”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186683271.png" alt="image20200223001205072.png"></p>
<h4 id="2-2-2、删除数据库"><a href="#2-2-2、删除数据库" class="headerlink" title="2.2.2、删除数据库"></a>2.2.2、删除数据库</h4><p><strong>右击想要删除的数据库，选择“删除数据库”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186700884.png" alt="image20200223001414043.png"></p>
<h3 id="2-2、数据库表操作"><a href="#2-2、数据库表操作" class="headerlink" title="2.2、数据库表操作"></a>2.2、数据库表操作</h3><h4 id="2-2-1、新建表"><a href="#2-2-1、新建表" class="headerlink" title="2.2.1、新建表"></a>2.2.1、新建表</h4><p><strong>右击“表”，选择“新建表”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186715524.png" alt="image20200223001746104.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186727307.png" alt="image20200223002004707.png"></p>
<h2 id="3、Navicat-for-MySQL操作-下"><a href="#3、Navicat-for-MySQL操作-下" class="headerlink" title="3、Navicat for MySQL操作-下"></a>3、Navicat for MySQL操作-下</h2><h3 id="3-1、数据库表操作"><a href="#3-1、数据库表操作" class="headerlink" title="3.1、数据库表操作"></a>3.1、数据库表操作</h3><h4 id="3-1-1、操作表中结构与记录"><a href="#3-1-1、操作表中结构与记录" class="headerlink" title="3.1.1、操作表中结构与记录"></a>3.1.1、操作表中结构与记录</h4><p><strong>表结构（表的修改）</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186745243.png" alt="image20200223002415540.png"></p>
<p><strong>表记录（记录的增加、删除、修改、查看）</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186756221.png" alt="image20200223002826369.png"></p>
<h4 id="3-1-2、删除表"><a href="#3-1-2、删除表" class="headerlink" title="3.1.2、删除表"></a>3.1.2、删除表</h4><p><strong>右击想删除的表，选择“删除表”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186773023.png" alt="image20200223003000136.png"></p>
<h3 id="3-2、命令列窗口的打开"><a href="#3-2、命令列窗口的打开" class="headerlink" title="3.2、命令列窗口的打开"></a>3.2、命令列窗口的打开</h3><p><strong>右击连接&#x2F;数据库，选择“命令列窗口”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186786858.png" alt="image20200223003312998.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186796440.png" alt="image20200223003438588.png"></p>
<p>相当于</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186810087.png" alt="image20200223003552091.png"></p>
<h1 id="SQL介绍"><a href="#SQL介绍" class="headerlink" title="SQL介绍"></a>SQL介绍</h1><p> 阅读 (134527) </p>
<p> 分享</p>
<p>结构化查询语言是高级的非过程化编程语言，允许用户在高层数据结构上工作。它不要求用户指定对数据的存放方法，也不需要用户了解具体的数据存放方式，所以具有完全不同底层结构的不同数据库系统, 可以使用相同的结构化查询语言作为数据输入与管理的接口。结构化查询语言语句可以嵌套，这使它具有极大的灵活性和强大的功能。</p>
<h2 id="一、SQL概述"><a href="#一、SQL概述" class="headerlink" title="一、SQL概述"></a>一、SQL概述</h2><h3 id="1-1、什么是SQL"><a href="#1-1、什么是SQL" class="headerlink" title="1.1、什么是SQL"></a>1.1、什么是SQL</h3><p>结构化查询语言(Structured Query Language)简称SQL，是一种特殊目的的编程语言，是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统；同时也是数据库脚本文件的扩展名。</p>
<h3 id="1-2、SQL作用"><a href="#1-2、SQL作用" class="headerlink" title="1.2、SQL作用"></a>1.2、SQL作用</h3><p>是一种所有关系型数据库的查询规范，不同的数据库都支持。</p>
<p>通用的数据库操作语言，可以用在不同的数据库中。</p>
<p>不同的数据库 SQL 语句有一些区别</p>
<h2 id="二、SQL分类"><a href="#二、SQL分类" class="headerlink" title="二、SQL分类"></a>二、SQL分类</h2><p><strong>数据查询语言（DQL:Data Query Language）：</strong></p>
<p>其语句，也称为“数据检索语句”，用以从表中获得数据，确定数据怎样在应用程序给出。保留字SELECT是DQL（也是所有SQL）用得最多的动词，其他DQL常用的保留字有WHERE，ORDER BY，GROUP BY和HAVING。这些DQL保留字常与其他类型的SQL语句一起使用。</p>
<p><strong>数据操作语言</strong>（<strong>DML</strong>：<strong>Data Manipulation Language</strong>）：</p>
<p>其语句包括动词INSERT，UPDATE和DELETE。它们分别用于添加，修改和删除表中的行。也称为动作查询语言。</p>
<p><strong>事务处理语言（TPL）：</strong></p>
<p>它的语句能确保被DML语句影响的表的所有行及时得以更新。TPL语句包括BEGIN TRANSACTION，COMMIT和ROLLBACK。</p>
<p>**数据定义语言（*<em>DDL*<em>）：</em></em></p>
<p>其语句包括动词CREATE和DROP。在数据库中创建新表或删除表（CREAT TABLE 或 DROP TABLE）；为表加入索引等。DDL包括许多与人数据库目录中获得数据有关的保留字。它也是动作查询的一部分。</p>
<p><strong>指针控制语言（CCL）：</strong></p>
<p>它的语句，像DECLARE CURSOR，FETCH INTO和UPDATE WHERE CURRENT用于对一个或多个表单独立的操作。</p>
<p><strong>数据控制语言</strong>（<strong>DCL</strong>）：</p>
<p>它的语句通过GRANT或REVOKE获得许可，确定单个用户和用户组对数据库对象的访问。某些RDBMS可用GRANT或REVOKE控制对表单个列的访问。</p>
<h2 id="三、MySql语法"><a href="#三、MySql语法" class="headerlink" title="三、MySql语法"></a>三、MySql语法</h2><p>每条语句以分号（;）结尾。</p>
<p>SQL 中不区分大小写，关键字中认为大写和小写是一样的</p>
<p>3种注释方法：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187016784.png" alt="image20200128220353753.png"></p>
<h1 id="DDL语句"><a href="#DDL语句" class="headerlink" title="DDL语句"></a>DDL语句</h1><p> 阅读 (121140) </p>
<p> 分享</p>
<p>数据库模式定义语言DDL(Data Definition Language)，是用于描述数据库中要存储的现实世界实体的语言。</p>
<p>数据库模式定义语言并非程序设计语言，DDL数据库模式定义语言是SQL语言（结构化查询语言）的组成部分。DDL描述的模式，必须由计算机软件进行编译，转换为便于计算机存储、查询和操纵的格式，完成这个转换工作的程序称为模式编译器。</p>
<p>模式编译器处理模式定义主要产生两种类型的数据：数据字典以及数据类型和结构定义。</p>
<h2 id="一、数据库操作-上"><a href="#一、数据库操作-上" class="headerlink" title="一、数据库操作-上"></a>一、数据库操作-上</h2><h3 id="1-1、DDL概述"><a href="#1-1、DDL概述" class="headerlink" title="1.1、DDL概述"></a>1.1、DDL概述</h3><p>DDL（data definition language）数据库定义语言：其实就是我们在创建表的时候用到的一些sql，比如说：CREATE、ALTER、DROP等。DDL主要是用在操作数据库，定义或改变数据库表的结构，数据类型等初始化工作。</p>
<h3 id="1-2、创建数据库"><a href="#1-2、创建数据库" class="headerlink" title="1.2、创建数据库"></a>1.2、创建数据库</h3><p><strong>直接创建数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create database 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>判断数据库是否已经存在，不存在则创建</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create database if not exists 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>创建数据库并指定字符集</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create database 数据库名 character set 字符集;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#创建数据库</span><br><span class="line">mysql&gt; create database zutuanxue;</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)#创建成功</span><br><span class="line">#在次创建同名数据库</span><br><span class="line">mysql&gt; create database zutuanxue;</span><br><span class="line">Can&#x27;t create database &#x27;zutuanxue&#x27;; database exists #无法创建数据库“zutuanxue”；数据库存在</span><br><span class="line">#判断是否存在，如果不存在则创建数据库zutuanxue</span><br><span class="line">mysql&gt; create database if not exists zutuanxue;</span><br><span class="line">Query OK, 1 rows affected, 1 warnings (0.01 秒)</span><br><span class="line">#创建数据库并指定字符集为 gbk</span><br><span class="line">mysql&gt; create database zutuanxue01 default character set gbk;</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> default 可以不要</p>
<p><strong>补充：了解字符集查看</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#查看字符集</span><br><span class="line">mysql&gt; show character set;</span><br><span class="line">+----------+---------------------------------+---------------------+--------+</span><br><span class="line">| Charset  | Description                     | Default collation   | Maxlen |</span><br><span class="line">+----------+---------------------------------+---------------------+--------+</span><br><span class="line">| armscii8 | ARMSCII-8 Armenian              | armscii8_general_ci | 1      |</span><br><span class="line">| ascii    | US ASCII                        | ascii_general_ci    | 1      |</span><br><span class="line">| big5     | Big5 Traditional Chinese        | big5_chinese_ci     | 2      |</span><br><span class="line">| binary   | Binary pseudo charset           | binary              | 1      |</span><br><span class="line">| cp1250   | Windows Central European        | cp1250_general_ci   | 1      |</span><br><span class="line">| cp1251   | Windows Cyrillic                | cp1251_general_ci   | 1      |</span><br><span class="line">| cp1256   | Windows Arabic                  | cp1256_general_ci   | 1      |</span><br><span class="line">| cp1257   | Windows Baltic                  | cp1257_general_ci   | 1      |</span><br><span class="line">| cp850    | DOS West European               | cp850_general_ci    | 1      |</span><br><span class="line">| cp852    | DOS Central European            | cp852_general_ci    | 1      |</span><br><span class="line">| cp866    | DOS Russian                     | cp866_general_ci    | 1      |</span><br><span class="line">| cp932    | SJIS for Windows Japanese       | cp932_japanese_ci   | 2      |</span><br><span class="line">| dec8     | DEC West European               | dec8_swedish_ci     | 1      |</span><br><span class="line">| eucjpms  | UJIS for Windows Japanese       | eucjpms_japanese_ci | 3      |</span><br><span class="line">| euckr    | EUC-KR Korean                   | euckr_korean_ci     | 2      |</span><br><span class="line">| gb18030  | China National Standard GB18030 | gb18030_chinese_ci  | 4      |</span><br><span class="line">| gb2312   | GB2312 Simplified Chinese       | gb2312_chinese_ci   | 2      |</span><br><span class="line">| gbk      | GBK Simplified Chinese          | gbk_chinese_ci      | 2      |</span><br><span class="line">| geostd8  | GEOSTD8 Georgian                | geostd8_general_ci  | 1      |</span><br><span class="line">| greek    | ISO 8859-7 Greek                | greek_general_ci    | 1      |</span><br><span class="line">| hebrew   | ISO 8859-8 Hebrew               | hebrew_general_ci   | 1      |</span><br><span class="line">| hp8      | HP West European                | hp8_english_ci      | 1      |</span><br><span class="line">| keybcs2  | DOS Kamenicky Czech-Slovak      | keybcs2_general_ci  | 1      |</span><br><span class="line">| koi8r    | KOI8-R Relcom Russian           | koi8r_general_ci    | 1      |</span><br><span class="line">| koi8u    | KOI8-U Ukrainian                | koi8u_general_ci    | 1      |</span><br><span class="line">| latin1   | cp1252 West European            | latin1_swedish_ci   | 1      |</span><br><span class="line">| latin2   | ISO 8859-2 Central European     | latin2_general_ci   | 1      |</span><br><span class="line">| latin5   | ISO 8859-9 Turkish              | latin5_turkish_ci   | 1      |</span><br><span class="line">| latin7   | ISO 8859-13 Baltic              | latin7_general_ci   | 1      |</span><br><span class="line">| macce    | Mac Central European            | macce_general_ci    | 1      |</span><br><span class="line">| macroman | Mac West European               | macroman_general_ci | 1      |</span><br><span class="line">| sjis     | Shift-JIS Japanese              | sjis_japanese_ci    | 2      |</span><br><span class="line">| swe7     | 7bit Swedish                    | swe7_swedish_ci     | 1      |</span><br><span class="line">| tis620   | TIS620 Thai                     | tis620_thai_ci      | 1      |</span><br><span class="line">| ucs2     | UCS-2 Unicode                   | ucs2_general_ci     | 2      |</span><br><span class="line">| ujis     | EUC-JP Japanese                 | ujis_japanese_ci    | 3      |</span><br><span class="line">| utf16    | UTF-16 Unicode                  | utf16_general_ci    | 4      |</span><br><span class="line">| utf16le  | UTF-16LE Unicode                | utf16le_general_ci  | 4      |</span><br><span class="line">| utf32    | UTF-32 Unicode                  | utf32_general_ci    | 4      |</span><br><span class="line">| utf8     | UTF-8 Unicode                   | utf8_general_ci     | 3      |</span><br><span class="line">| utf8mb4  | UTF-8 Unicode                   | utf8mb4_0900_ai_ci  | 4      |</span><br><span class="line">+----------+---------------------------------+---------------------+--------+</span><br><span class="line">41 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="1-3、查看数据库"><a href="#1-3、查看数据库" class="headerlink" title="1.3、查看数据库"></a>1.3、查看数据库</h3><p><strong>查看所有数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<p><strong>查看某个数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show create database 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#查看所有数据库</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mb                 |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| zutuanxue           |</span><br><span class="line">| zutuanxue01         |</span><br><span class="line">+--------------------+</span><br><span class="line">7 行于数据集 (0.01 秒)</span><br><span class="line">#查看数据库zutuanxue的信息</span><br><span class="line">mysql&gt; show create database zutuanxue;</span><br><span class="line">+----------+-------------------------------------------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                                                 |</span><br><span class="line">+----------+-------------------------------------------------------------------------------------------------+</span><br><span class="line">| zutuanxue | CREATE DATABASE `zutuanxue` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */ |</span><br><span class="line">+----------+-------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、数据库操作-下"><a href="#二、数据库操作-下" class="headerlink" title="二、数据库操作-下"></a>二、数据库操作-下</h2><h3 id="2-1、修改数据库"><a href="#2-1、修改数据库" class="headerlink" title="2.1、修改数据库"></a>2.1、修改数据库</h3><p><strong>修改字符集</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter database 数据库名 character set 字符集;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#需求：将zutuanxue01数据库的字符集改成 utf8</span><br><span class="line">mysql&gt; alter database zutuanxue01 character set utf8;</span><br><span class="line">Query OK, 1 rows affected, 1 warnings (0.09 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>为什么修改的不是数据库名？</p>
<p>容易引起数据丢失。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename database 旧数据库名 to 新数据库名;</span><br></pre></td></tr></table></figure>

<p>这个是5.1.7到5.1.23版本可以用，但是官方不推荐，会有丢失数据的危险</p>
<h3 id="2-2、删除数据库"><a href="#2-2、删除数据库" class="headerlink" title="2.2、删除数据库"></a>2.2、删除数据库</h3><p><strong>删除数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式:</span><br><span class="line">drop database 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#需求：删除zutuanxue01数据库</span><br><span class="line">mysql&gt; drop database zutuanxue01;</span><br><span class="line">Query OK, 0 rows affected (0.07 秒)</span><br><span class="line">#查看所有数据库</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mb                 |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| zutuanxue           |</span><br><span class="line">+--------------------+</span><br><span class="line">6 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-3、使用数据库"><a href="#2-3、使用数据库" class="headerlink" title="2.3、使用数据库"></a>2.3、使用数据库</h3><p><strong>查看当前数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select database();#mysql中的全局函数</span><br></pre></td></tr></table></figure>

<p><strong>切换数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">use 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#查看当前使用的数据库</span><br><span class="line">mysql&gt; select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| NULL       |#当前没有使用的数据库</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">#切换或指定当前使用的数据库</span><br><span class="line">mysql&gt; use zutuanxue;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line">#查看当前使用的数据库</span><br><span class="line">mysql&gt; select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| zutuanxue   |#当前使用的数据库为zutuanxue</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、数据库表操作-上"><a href="#三、数据库表操作-上" class="headerlink" title="三、数据库表操作-上"></a>三、数据库表操作-上</h2><h3 id="3-1、创建表"><a href="#3-1、创建表" class="headerlink" title="3.1、创建表"></a>3.1、创建表</h3><p><strong>创建表结构</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 数据库表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>关键字说明</strong></p>
<p>create：创建</p>
<p>table：表</p>
<h3 id="3-2、数据类型（mysql）"><a href="#3-2、数据类型（mysql）" class="headerlink" title="3.2、数据类型（mysql）"></a>3.2、数据类型（mysql）</h3><p><strong>数字类型</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187353636.png" alt="image20200206171122469.png"></p>
<p><strong>日期类型</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187402867.png" alt="image20200206171204522.png"></p>
<p><strong>字符串类型</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187415619.png" alt="image20200206171241199.png"></p>
<p><strong>BLOB&#x2F;TEXT</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187429998.png" alt="image20200206171350662.png"></p>
<p><strong>BINARY&#x2F;VARBINARY</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187442067.png" alt="image20200206171423603.png"></p>
<p><strong>ENUM&#x2F;SET</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187455034.png" alt="image20200206171501339.png"></p>
<p><strong>案例：</strong></p>
<p>创建一个学生表，里面包含了编号、学生名字、出生年月等数据</p>
<p><strong>分析：</strong></p>
<p>表名：students</p>
<p>字段有：编号（id,int类型）、学生名字（sname,varchar()类型）、出生日期（birthday date类型）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">create table students(</span><br><span class="line">   id int, -- 学生id</span><br><span class="line">   sname varchar(20), -- 学生名字</span><br><span class="line">   birthday date -- 学生出生日期</span><br><span class="line">);</span><br><span class="line">#想要创建数据库表先进入，数据库</span><br><span class="line">mysql&gt; use zutuanxue;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line">#创建表</span><br><span class="line">mysql&gt; create table students(id int ,sname varchar(20),birthday date);</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line">#查看所有表</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+--------------------+</span><br><span class="line">| Tables_in_zutuanxue |</span><br><span class="line">+--------------------+</span><br><span class="line">| students           |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、查看表"><a href="#3-3、查看表" class="headerlink" title="3.3、查看表"></a>3.3、查看表</h3><p><strong>查看所有表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<p><strong>查看表结构</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">desc 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>查看表SQL信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show create table 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看zutuanxue数据库下的所有表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#进入mysql数据库</span><br><span class="line">mysql&gt; use zutuanxue;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line">#查看数据库里的所有表</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+--------------------+</span><br><span class="line">| Tables_in_zutuanxue |</span><br><span class="line">+--------------------+</span><br><span class="line">| students           |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看students数据库表的结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看students数据库表的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#查看students数据库表SQL信息</span><br><span class="line">mysql&gt; show create table students;</span><br><span class="line">+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table    | Create Table                                                                                                                                                                                 |</span><br><span class="line">+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| students | CREATE TABLE `students` (</span><br><span class="line">  `id` int(11) DEFAULT NULL,</span><br><span class="line">  `sname` varchar(20) DEFAULT NULL,</span><br><span class="line">  `birthday` date DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |</span><br><span class="line">+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="4、数据库表操作-中"><a href="#4、数据库表操作-中" class="headerlink" title="4、数据库表操作-中"></a>4、数据库表操作-中</h2><h3 id="4-1、快速建表"><a href="#4-1、快速建表" class="headerlink" title="4.1、快速建表"></a>4.1、快速建表</h3><p><strong>建新表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 新数据库表名 like 旧数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>创建一个students01表，要求表结构与students相同</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#创建一个新表与旧表结构相同</span><br><span class="line">mysql&gt; create table students01 like students;</span><br><span class="line">Query OK, 0 rows affected (0.11 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students01;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="4-2、删除表"><a href="#4-2、删除表" class="headerlink" title="4.2、删除表"></a>4.2、删除表</h3><p><strong>直接删除表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop table 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>判断表是否存在，存在则删除</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop table if exists 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#直接删除students01;</span><br><span class="line">mysql&gt; drop table students01;</span><br><span class="line">Query OK, 0 rows affected (0.09 秒)</span><br><span class="line">#有就删除students01,没有就不删除;</span><br><span class="line">mysql&gt; drop table if exists students01;</span><br><span class="line">Query OK, 0 rows affected, 1 warnings (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="5、数据库表操作-下"><a href="#5、数据库表操作-下" class="headerlink" title="5、数据库表操作-下"></a>5、数据库表操作-下</h2><h3 id="5-1、修改表"><a href="#5-1、修改表" class="headerlink" title="5.1、修改表"></a>5.1、修改表</h3><p><strong>添加表字段</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 add 字段名 字段类型；</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>为students表添加一个字段性别（sex char类型)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#增加字段</span><br><span class="line">mysql&gt; alter table students add sex char;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">| sex      | char(1)     | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>修改表字段类型</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 modify 字段名 新字段类型;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>将students表中字段性别（sex）的字段类型改为varchar(2)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#修改字段类型</span><br><span class="line">mysql&gt; alter table students modify sex varchar(2);</span><br><span class="line">Query OK, 0 rows affected (0.06 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">| sex      | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>修改表字段名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 change 旧字段名 新字段名 字段类型;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>将students表中的性别（sex）改成班级（classes）类型为varchar(10)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#修改字段名</span><br><span class="line">mysql&gt; alter table students change sex classes varchar(10);</span><br><span class="line">Query OK, 0 rows affected (0.07 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">| classes  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>删除表中字段</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 drop 字段名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>删除students表中的班级（classes）字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#删除字段</span><br><span class="line">mysql&gt; alter table students drop classes;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>修改表名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">rename table 数据库表名 to 新数据库表;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#修改表名</span><br><span class="line">mysql&gt; rename table students to student;</span><br><span class="line">Query OK, 0 rows affected (0.04 秒)</span><br><span class="line">#查看所有表</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+--------------------+</span><br><span class="line">| Tables_in_zutuanxue |</span><br><span class="line">+--------------------+</span><br><span class="line">| student            |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>修改字符集</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 character set 字符集;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>修改student表的字符集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#修改数据库表字符集</span><br><span class="line">mysql&gt; alter table student character set gbk;</span><br><span class="line">Query OK, 0 rows affected (0.07 秒)</span><br><span class="line">#查看数据库表SQL信息</span><br><span class="line">mysql&gt; show create table student;</span><br><span class="line">+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table   | Create Table                                                                                                                                                                                                  |</span><br><span class="line">+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| student | CREATE TABLE `student` (</span><br><span class="line">  `id` int(11) DEFAULT NULL,</span><br><span class="line">  `sname` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,</span><br><span class="line">  `birthday` date DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="DML语句"><a href="#DML语句" class="headerlink" title="DML语句"></a>DML语句</h1><p> 阅读 (192019) </p>
<p> 分享</p>
<p>数据操纵语言DML（Data Manipulation Language），用户通过它可以实现对数据库的基本操作。就是我们最经常用到的UPDATE、INSERT、DELETE。 主要用来对数据库的数据进行一些操作。</p>
<h2 id="一、表记录操作-上"><a href="#一、表记录操作-上" class="headerlink" title="一、表记录操作-上"></a>一、表记录操作-上</h2><h3 id="1-1、DML概述"><a href="#1-1、DML概述" class="headerlink" title="1.1、DML概述"></a>1.1、DML概述</h3><p>DML 操作是指对数据库中表记录的操作，主要包括表记录的插入（insert）、更新（update）和删除（delete），是开发人员日常使用最频繁的操作。</p>
<h3 id="1-2、插入记录"><a href="#1-2、插入记录" class="headerlink" title="1.2、插入记录"></a>1.2、插入记录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">insert into 数据库表名 [字段名列表] values(字段值列表)</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p><strong>insert into 数据库表名：</strong>指定增加记录的表</p>
<p><strong>[字段名列表]：</strong>表示要给那些字段加入字段值，没有，就为所有字段</p>
<p><strong>values（字段值列表）：</strong>表示为对应的字段加入对应的字段值</p>
<p><strong>为所有字段插入值</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">insert into 数据库表名(字段名1,字段名2...,字段名n)values(字段值1,字段值2...,字段值n);</span><br><span class="line">或</span><br><span class="line">insert into 数据库表名 values(字段值1,字段值2...,字段值n);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#指定所有字段插入记录</span><br><span class="line">mysql&gt; insert into student(id,sname,birthday)values(1,&quot;林志颖&quot;,&quot;1974-10-18&quot;);</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br><span class="line">#不指定字段，默认所有字段插入记录</span><br><span class="line">mysql&gt; insert into student values(2,&quot;郭德纲&quot;,&quot;1973-01-18&quot;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#查看数据库表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">| id   | sname     | birthday   |</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 |</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>插入部分字段值</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">insert into 数据库表名(字段名1,字段名2...)values(字段值1,字段值2...);</span><br><span class="line">#注意：没有给定字段的值，为null;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#插入部分字段值</span><br><span class="line">mysql&gt; insert into student(id,sname)values(3,&quot;柳岩&quot;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#查看数据库表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">| id   | sname     | birthday   |</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 |</span><br><span class="line">| 3    | 柳岩    | NULL       |</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>只插入部份字段值时，前面必须带字段名字。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into student values(4,&quot;王宝强&quot;);</span><br><span class="line">Column count doesn&#x27;t match value count at row 1#列计数与第1行的值计数不匹配</span><br></pre></td></tr></table></figure>

<h2 id="二、表记录操作-下"><a href="#二、表记录操作-下" class="headerlink" title="二、表记录操作-下"></a>二、表记录操作-下</h2><h3 id="2-1、更新记录"><a href="#2-1、更新记录" class="headerlink" title="2.1、更新记录"></a>2.1、更新记录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">update 数据库表名 set 字段名1=字段值1,字段名2=字段值2...,字段名n=字段值n [where 条件表达式];</span><br><span class="line">#注意：更新的数据可以是0-N条记录</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p><strong>update 数据库表名：</strong>指定需要更新的数据库表</p>
<p><strong>set 字段名&#x3D;字段值：</strong>修改指定的数据库表中字段的值</p>
<p><strong>[where 条件表达式]：</strong>修改满足条件的记录的字段值，可省略</p>
<p><strong>不带条件记录更新</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">update 数据库表名 set 字段名1=字段值1,字段名2=字段值2...,字段名n=字段值n;  #表示修改表中所有记录</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>加入一个性别（sex varchar(2)）字段，将sex的值都改为“男”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#在student表中增加字段sex</span><br><span class="line">mysql&gt; alter table student add sex varchar(2);</span><br><span class="line">Query OK, 0 rows affected (0.24 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc student;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">| sex      | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line">#修改student表中sex字段的值为&#x27;男&#x27;</span><br><span class="line">mysql&gt; update student set sex=&#x27;男&#x27;;</span><br><span class="line">Query OK, 3 rows affected (0.09 秒)</span><br><span class="line">#查看表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | NULL       | 男  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>带条件记录更新</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">update 数据库表名 set 字段名1=字段值1,字段名2=字段值2...,字段名n=字段值n [where 条件表达式];   #表示修改表中满足条件的记录</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>修改id&#x3D;3的记录，将sex改为’女’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#修改id为3记录中的sex改为&#x27;女&#x27;</span><br><span class="line">mysql&gt; update student set sex=&#x27;女&#x27; where id=3;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#查看表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | NULL       | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>修改id&#x3D;3的记录，将sex改为’女’，birthday改为1980-11-08</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#修改id为3记录中的sex改为&#x27;女&#x27;,birthday改为1980-11-08</span><br><span class="line">mysql&gt; update student set sex=&#x27;女&#x27;,birthday=&#x27;1980-11-08&#x27; where id=3;</span><br><span class="line">Query OK, 1 rows affected (0.11 秒)</span><br><span class="line">#查看表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | 1980-11-08 | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、删除记录"><a href="#2-2、删除记录" class="headerlink" title="2.2、删除记录"></a>2.2、删除记录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">delete from 数据库表名 [where 条件表达式];</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p><strong>delete from 数据库表名：</strong>指定删除记录的表</p>
<p><strong>[where 条件表达式]：</strong>删除满足条件的记录的字段值，可省略</p>
<p><strong>带条件删除记录</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">delete from 数据库表名 [where 条件表达式]; #删除满足条件的记录</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除id为1的记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#删除id=1的记录</span><br><span class="line">mysql&gt; delete from student where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br><span class="line">#查看所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | 1980-11-08 | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>不带条件删除记录</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">delete from 数据库表名;    #删除表中所有的记录</span><br><span class="line">或</span><br><span class="line">truncate table 数据库表名;   #删除表中所有的记录</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除表中所有记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#删除所有记录</span><br><span class="line">mysql&gt; delete from student;</span><br><span class="line">Query OK, 2 rows affected (0.08 秒)</span><br><span class="line">#查看所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">空的数据集 (0.01 秒)</span><br><span class="line">#删除所有记录</span><br><span class="line">mysql&gt; truncate table student;</span><br><span class="line">Query OK, 0 rows affected (0.08 秒)</span><br><span class="line">#查看所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">空的数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>truncate删除的是表的结构，再创建一张表；delete删除的是表的记录；</p>
<h1 id="DQL语句"><a href="#DQL语句" class="headerlink" title="DQL语句"></a>DQL语句</h1><p> 阅读 (179770) </p>
<p> 分享</p>
<p>DQL（Data QueryLanguage ）数据查询语言，基本结构是由SELECT子句，FROM子句，WHERE子句组成的查询块。</p>
<h2 id="一、DQL概述"><a href="#一、DQL概述" class="headerlink" title="一、DQL概述"></a>一、DQL概述</h2><h3 id="1-1、什么是DQL"><a href="#1-1、什么是DQL" class="headerlink" title="1.1、什么是DQL"></a>1.1、什么是DQL</h3><p>DQL：数据查询语言，用于从数据库表中查询数据，并不会修改数据，只是一种显示数据的方式。由select语句构成。</p>
<h3 id="1-2、记录查询格式"><a href="#1-2、记录查询格式" class="headerlink" title="1.2、记录查询格式"></a>1.2、记录查询格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [where 条件表达式];</span><br></pre></td></tr></table></figure>

<p><strong>格式说明：</strong></p>
<p>select *&#x2F;字段列表： 查询完后需要展示的字段</p>
<p>from 数据库表名： 指定要查询的数据库表</p>
<p>[where 条件表达式]： 查询满足条件的记录</p>
<h2 id="二、记录查询"><a href="#二、记录查询" class="headerlink" title="二、记录查询"></a>二、记录查询</h2><h3 id="2-1、简单查询"><a href="#2-1、简单查询" class="headerlink" title="2.1、简单查询"></a>2.1、简单查询</h3><p><strong>查询表中的记录和列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select * from 数据库表名;   #查询表中所有记录,显示所有列</span><br><span class="line">或</span><br><span class="line">select 字段名1,字段名2,...,字段名n from 数据库表名;   #查询表中所有记录，显示指定列</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询student表中的所有记录，显示所有列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#显示所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 2    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | 1980-11-08 | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询student表中的所有记录，显示所有姓名、性别列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#显示所有记录,显示列为姓名、性别</span><br><span class="line">mysql&gt; select sname,sex from student;</span><br><span class="line">+-----------+------+</span><br><span class="line">| sname     | sex  |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 郭德纲 | 男  |</span><br><span class="line">| 林志颖 | 男  |</span><br><span class="line">| 柳岩    | 女  |</span><br><span class="line">+-----------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、别名查询"><a href="#2-2、别名查询" class="headerlink" title="2.2、别名查询"></a>2.2、别名查询</h3><p>别名有二种：字段别名、表别名</p>
<p>作用：</p>
<p>字段别名查询出记录显示新的名字，并不影响表的结构。</p>
<p>表别名取了一个新的名字，可以代替表名使用。</p>
<p><strong>字段别名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 字段名1 as 别名1,字段名2 as 别名2,...,字段名n as 别名n from 数据库表名; </span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询student表中的sname和sex，以别名’姓名’和’性别’显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#使用字段别名显示姓名、性别</span><br><span class="line">mysql&gt; select sname as 姓名,sex as 性别 from student;</span><br><span class="line">+-----------+------+</span><br><span class="line">| 姓名        | 性别   |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 郭德纲 | 男  |</span><br><span class="line">| 林志颖 | 男  |</span><br><span class="line">| 柳岩    | 女  |</span><br><span class="line">+-----------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>表别名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 字段名1 as 别名1,字段名2 as 别名2,...,字段名n as 别名n from 数据库表名 as 别名; </span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>查询student表中的sname和sex，以别名’姓名’和’性别’显示，并为student表取了一个别名 s</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#使用字段别名显示姓名、性别，表别名没有具体表现</span><br><span class="line">mysql&gt; select sname as 姓名,sex as 性别 from student as s;</span><br><span class="line">+-----------+------+</span><br><span class="line">| 姓名        | 性别   |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 郭德纲 | 男  |</span><br><span class="line">| 林志颖 | 男  |</span><br><span class="line">| 柳岩    | 女  |</span><br><span class="line">+-----------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>表别名一般用于多表查询，单表查询中没有具体体现。</p>
<h3 id="2-3、清除重复记录查询"><a href="#2-3、清除重复记录查询" class="headerlink" title="2.3、清除重复记录查询"></a>2.3、清除重复记录查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select distinct 字段名 from 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>去掉性别重复的记录</p>
<p>去掉性别和姓名同时重复的记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#查看所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 2    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | 1980-11-08 | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line">#查看sex不重复的记录</span><br><span class="line">mysql&gt; select distinct sex from student;</span><br><span class="line">+------+</span><br><span class="line">| sex  |</span><br><span class="line">+------+</span><br><span class="line">| 男  |</span><br><span class="line">| 女  |</span><br><span class="line">+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line">#查看sex,sname都不重复的记录</span><br><span class="line">mysql&gt; select distinct sex,sname from student;</span><br><span class="line">+------+-----------+</span><br><span class="line">| sex  | sname     |</span><br><span class="line">+------+-----------+</span><br><span class="line">| 男  | 郭德纲 |</span><br><span class="line">| 男  | 林志颖 |</span><br><span class="line">| 女  | 柳岩    |</span><br><span class="line">+------+-----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-4、运算查询"><a href="#2-4、运算查询" class="headerlink" title="2.4、运算查询"></a>2.4、运算查询</h3><p><strong>字段与固定值运算</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 字段名+固定值 from 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>运算的字段必须是数值型</p>
<p><strong>案例：</strong></p>
<p>查询student表中年龄减10岁，并显示sname和age</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select age-10 as age ,sname from student;</span><br><span class="line">+-----+--------+</span><br><span class="line">| age | sname  |</span><br><span class="line">+-----+--------+</span><br><span class="line">|  37 | 郭德纲 |</span><br><span class="line">|  36 | 林志颖 |</span><br><span class="line">|  30 | 柳岩   |</span><br><span class="line">+-----+--------+</span><br><span class="line">3 rows in set</span><br></pre></td></tr></table></figure>

<p><strong>字段与字段运算</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 字段名+字段名 from 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>运算的字段必须是数值型</p>
<p><strong>案例：</strong></p>
<p>查询student表中age与id的和，并显示出来age和id</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select age+id,age,id</span><br><span class="line"> from student;</span><br><span class="line">+--------+-----+----+</span><br><span class="line">| age+id | age | id |</span><br><span class="line">+--------+-----+----+</span><br><span class="line">|     48 |  47 |  1 |</span><br><span class="line">|     48 |  46 |  2 |</span><br><span class="line">|     43 |  40 |  3 |</span><br><span class="line">+--------+-----+----+</span><br><span class="line">3 rows in set</span><br></pre></td></tr></table></figure>

<h2 id="三、条件查询"><a href="#三、条件查询" class="headerlink" title="三、条件查询"></a>三、条件查询</h2><h3 id="3-1、条件查询前准备"><a href="#3-1、条件查询前准备" class="headerlink" title="3.1、条件查询前准备"></a>3.1、条件查询前准备</h3><p>新建学生信息表（students）</p>
<p><strong>字段：</strong>学生ID（sid）、学生姓名(sname)、学生性别(sex)、学生年龄(age)、英语成绩(english)、数学成绩(math)、入学时间(entertime)、备注(remark)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">create table students(</span><br><span class="line">    sid int,</span><br><span class="line">    sname varchar(20),</span><br><span class="line">    sex varchar(2),</span><br><span class="line">    age int,</span><br><span class="line">    english double(4,1),</span><br><span class="line">    math double(4,1),</span><br><span class="line">    entertime date,</span><br><span class="line">    remark text</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187929354.png" alt="image20200207010430241.png"></p>
<p><strong>记录：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">insert into students values</span><br><span class="line">(1,&#x27;张三&#x27;,&#x27;男&#x27;,19,98.5,88,&#x27;2017-09-01&#x27;,&#x27;他来自四川&#x27;),</span><br><span class="line">(2,&#x27;李四&#x27;,&#x27;男&#x27;,20,80,88,&#x27;2017-09-01&#x27;,&#x27;他来自重庆&#x27;),</span><br><span class="line">(3,&#x27;张红&#x27;,&#x27;女&#x27;,19,86,80,&#x27;2017-09-01&#x27;,&#x27;他来自北京&#x27;),</span><br><span class="line">(4,&#x27;张八&#x27;,&#x27;男&#x27;,18,80,85,&#x27;2017-09-01&#x27;,&#x27;他来自天津&#x27;),</span><br><span class="line">(5,&#x27;李三&#x27;,&#x27;男&#x27;,19,60,88,&#x27;2017-09-01&#x27;,&#x27;他来自湖北&#x27;),</span><br><span class="line">(6,&#x27;王六&#x27;,&#x27;女&#x27;,20,50,70,&#x27;2017-09-01&#x27;,&#x27;他来自湖南&#x27;),</span><br><span class="line">(7,&#x27;刘红&#x27;,&#x27;女&#x27;,18,90,98,&#x27;2017-09-01&#x27;,&#x27;他来自甘肃&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187963975.png" alt="image20200207011044328.png"></p>
<h3 id="3-2、基础比较运算符"><a href="#3-2、基础比较运算符" class="headerlink" title="3.2、基础比较运算符"></a>3.2、基础比较运算符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">&gt;、&lt;、&lt;=、&gt;=、=、&lt;&gt;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>在SQL中“&lt;&gt;”，表示不等于，mysql中也可以用“!&#x3D;”表示</p>
<p>在SQL中没有“&#x3D;&#x3D;”</p>
<p><strong>案例：</strong></p>
<p>查询学生信息表中英语成绩大于80的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where english&gt;80;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中英语成绩小于80的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where english&lt;80;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄大于等于19岁的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where age&gt;=19;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄小于等于19岁的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where age&lt;=19;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中数学成绩等于88的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where math=88;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄不等于18岁的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where age&lt;&gt;18;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄大于等于20岁的学生的姓名和性别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sname,sex from students where age&gt;=20;</span><br><span class="line">+--------+------+</span><br><span class="line">| sname  | sex  |</span><br><span class="line">+--------+------+</span><br><span class="line">| 李四 | 男  |</span><br><span class="line">| 王六 | 女  |</span><br><span class="line">+--------+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、提高比较运算符"><a href="#3-3、提高比较运算符" class="headerlink" title="3.3、提高比较运算符"></a>3.3、提高比较运算符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">between...and...  #在一定的范围内</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>包含头尾</p>
<p><strong>案例：</strong></p>
<p>查询学生信息表中英语成绩80到90岁之间的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where english between 80 and 90;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line">格式：</span><br><span class="line">in(值1,值2...,值n)  #表示用n个值相等</span><br><span class="line">not in(值1,值2...,值n)  #表示用n个值不相等</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中sid为1，3，5的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sid in(1,3,5);</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中sid除了1，3，5的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sid not in(1,3,5);</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line">格式：</span><br><span class="line">like &#x27;%值%&#x27;  #模糊查询</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql通配符</span><br><span class="line"></span><br><span class="line">%  :匹配任意多个字符</span><br><span class="line"></span><br><span class="line">_   ：匹配一个字符</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中姓’张’的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;张%&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from students where sname like &#x27;张&#x27;;</span><br><span class="line">空的数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中包含’红’字的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;%红%&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中姓’王’的二个字的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;王_&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">格式：</span><br><span class="line">is null   #表示某字段值为null</span><br><span class="line">is not null    #表示某字段值不为null</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>不能写成：字段名&#x3D;null</p>
<p><strong>案例：</strong></p>
<p>查询学生信息表中age为null学生信息</p>
<p>查询学生信息表中english为null学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where age is null;</span><br><span class="line">+------+--------+------+------+---------+------+-----------+--------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime | remark |</span><br><span class="line">+------+--------+------+------+---------+------+-----------+--------+</span><br><span class="line">| 8    | 王五 | 男  | NULL | NULL    | NULL | NULL      | NULL   |</span><br><span class="line">+------+--------+------+------+---------+------+-----------+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from students where english is null;</span><br><span class="line">+------+-----------+------+------+---------+------+-----------+--------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime | remark |</span><br><span class="line">+------+-----------+------+------+---------+------+-----------+--------+</span><br><span class="line">| 8    | 王五    | 男  | NULL | NULL    | NULL | NULL      | NULL   |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL      | NULL   |</span><br><span class="line">+------+-----------+------+------+---------+------+-----------+--------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中english不为null学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where english is not null;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-4、逻辑运算符"><a href="#3-4、逻辑运算符" class="headerlink" title="3.4、逻辑运算符"></a>3.4、逻辑运算符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">and #与，二边条件同时成立，成立  &amp;&amp;</span><br><span class="line">or #或，二边条件有一边成立，成立  ||</span><br><span class="line">not  #非，一边条件成立，取反；一边条件不成立，取反  ！</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中english大于85的男生的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where english&gt;85 and sex=&#x27;男&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄大于等于20岁或数学成绩大于85的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where age&gt;=20 or math&gt;85;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中除了年龄大于等于20岁或数学成绩大于85的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where not (age&gt;=20 or math&gt;85);</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="DQL语句排序与分组"><a href="#DQL语句排序与分组" class="headerlink" title="DQL语句排序与分组"></a>DQL语句排序与分组</h1><p> 阅读 (178868) </p>
<p> 分享</p>
<h2 id="一、DQL-排序"><a href="#一、DQL-排序" class="headerlink" title="一、DQL-排序"></a>一、DQL-排序</h2><p>排序是计算机内经常进行的一种操作，其目的是将一组“无序”的记录序列调整为“有序”的记录序列。分内部排序和外部排序，若整个排序过程不需要访问外存便能完成，则称此类排序问题为内部排序。反之，若参加排序的记录数量很大，整个序列的排序过程不可能在内存中完成，则称此类排序问题为外部排序。内部排序的过程是一个逐步扩大记录的有序序列长度的过程。</p>
<h3 id="1-1、排序概述"><a href="#1-1、排序概述" class="headerlink" title="1.1、排序概述"></a>1.1、排序概述</h3><p>将数据库表中杂乱无章的数据记录，通过字段的升序或降序的顺序排列的过程叫做排序。</p>
<h3 id="1-2、排序语法"><a href="#1-2、排序语法" class="headerlink" title="1.2、排序语法"></a>1.2、排序语法</h3><p>通过order by子句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [where 条件表达式] [order by 字段名 [asc/desc]];</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p>asc：升序，默认值</p>
<p>desc：降序</p>
<h3 id="1-3、单列排序"><a href="#1-3、单列排序" class="headerlink" title="1.3、单列排序"></a>1.3、单列排序</h3><p>按照一个字段进行排序</p>
<p><strong>案例：</strong></p>
<p>查看学生信息表中按照英语成绩升序排列，去掉成绩为null的学生。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where english is not null order by english;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">7 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="1-4、组合排序"><a href="#1-4、组合排序" class="headerlink" title="1.4、组合排序"></a>1.4、组合排序</h3><p>按照多个字段进行排序，先按1字段排序，在按2字段排序，在按n字段排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [where 条件表达式] [order by 字段名1 [asc/desc],字段名2 [asc/desc],...,字段名n [asc/desc]];</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看学生信息表中先按照数学成绩升序排列，在按照英语成绩降序排列，最后去掉成绩为null的学生。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where english is not null order by math,english desc;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、DQL-分组"><a href="#二、DQL-分组" class="headerlink" title="二、DQL 分组"></a>二、DQL 分组</h2><p>数据分组是根据统计研究的需要，将原始数据按照某种标准划分成不同的组别，分组后的的数据称为分组数据。</p>
<p>数据分组应遵循两个基本原则：</p>
<p>穷尽性原则</p>
<p>这一原则就是要求调查的每一单位都能无一例外地划归到某一组去，不会产生“遗漏”现象。</p>
<p>互斥性原则</p>
<p>这一原则就是要求将调查单位分组后，各个组的范围应该互不相容、互为排斥。即每个调查单位在特定的分组标志下只能归属某一组，而不能同时或可能同时归属到几个组。</p>
<h3 id="2-1、分组概述"><a href="#2-1、分组概述" class="headerlink" title="2.1、分组概述"></a>2.1、分组概述</h3><ul>
<li>什么是分组</li>
</ul>
<p>分组就是将一组行记录按列或表达式的值分组成摘要行记录。通过GROUP BY子句返回每个分组的一个行记录。换句话说，它减少了在结果集中的行数。</p>
<ul>
<li>分组语法</li>
</ul>
<p>– 语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [group by 分组字段名 [having 条件表达式]];</span><br></pre></td></tr></table></figure>

<p>– 分组方式</p>
<p>将学生信息表中男、女同学进行分组</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188686160.png" alt="image20200209001000938.png"></p>
<p><strong>原始数据</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188795282.png" alt="image20200209001300283.png"></p>
<p><strong>分组为：男一组，女一组</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188695335.png" alt="image20200209001300283.png"></p>
<p><strong>返回每组第一条数据</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188705609.png" alt="image20200209002544753.png"></p>
<h3 id="2-2、分组应用"><a href="#2-2、分组应用" class="headerlink" title="2.2、分组应用"></a>2.2、分组应用</h3><ul>
<li>实际分组方式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sex from students group by sex;</span><br><span class="line">+------+</span><br><span class="line">| sex  |</span><br><span class="line">+------+</span><br><span class="line">| 男  |</span><br><span class="line">| 女  |</span><br><span class="line">+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>当我们使用某个字段分组,在查询的时候也需要将这个字段查询出来,否则看不到数据属于哪组的。</p>
<p>单独分组没什么用处，分组的目的就是为了统计，一般分组会跟<strong>聚合函数</strong>一起使用。</p>
<p><strong>案例：</strong></p>
<p>查询学生信息表中男、女同学的人数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sex,count(*) from students group by sex;</span><br><span class="line">+------+----------+</span><br><span class="line">| sex  | count(*) |</span><br><span class="line">+------+----------+</span><br><span class="line">| 男  | 6        |</span><br><span class="line">| 女  | 3        |</span><br><span class="line">+------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<ul>
<li>where与having</li>
</ul>
<p>– where**</p>
<p>查询学生信息表中数学成绩在80分以上的，男、女同学的人数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#where后面不能用聚合函数</span><br><span class="line">mysql&gt; select sex,count(*) from students where math&gt;80 group by sex;</span><br><span class="line">+------+----------+</span><br><span class="line">| sex  | count(*) |</span><br><span class="line">+------+----------+</span><br><span class="line">| 男  | 4        |</span><br><span class="line">| 女  | 1        |</span><br><span class="line">+------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>where是将不符合条件的先去掉，在分组。</p>
<p>– having</p>
<p>查询学生信息表中男、女同学的人数，人数超过3人显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#having n&gt;3 可以写成 having count(*)&gt;3</span><br><span class="line">mysql&gt; select sex,count(*) as n from students group by sex having n&gt;3;</span><br><span class="line">+------+---+</span><br><span class="line">| sex  | n |</span><br><span class="line">+------+---+</span><br><span class="line">| 男  | 6 |</span><br><span class="line">+------+---+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>having是先分组，在将分组后不符合条件的去掉。</p>
<p>– where与having区别</p>
<p><strong>where</strong> <strong>子句</strong></p>
<p>在分组之前过滤数据，即先过滤再分组。</p>
<p>where 后面不可以使用聚合函数。</p>
<p><strong>having</strong> <strong>子句</strong></p>
<p>在分组之后过滤数据，即先分组再过滤。</p>
<p>having 后面可以使用聚合函数。</p>
<h1 id="DQL-聚合函数"><a href="#DQL-聚合函数" class="headerlink" title="DQL-聚合函数"></a>DQL-聚合函数</h1><p> 阅读 (161008) </p>
<p> 分享</p>
<p>SQL基本函数，聚合函数对一组值执行计算，并返回单个值，也被称为组函数。</p>
<p>聚合函数对一组值执行计算并返回单一的值。除 COUNT 以外，聚合函数忽略空值，如果COUNT函数的应用对象是一个确定列名，并且该列存在空值，此时COUNT仍会忽略空值。</p>
<p>所有聚合函数都具有确定性。任何时候用一组给定的输入值调用它们时，都返回相同的值。聚合函数可以应用于查询语句的SELECT中，或者HAVING子句中，但不可用于WHERE语句中，因为WHERE是对逐条的行记录进行筛选。</p>
<h2 id="一、聚合函数概述"><a href="#一、聚合函数概述" class="headerlink" title="一、聚合函数概述"></a>一、聚合函数概述</h2><h3 id="1-1、什么是聚合函数"><a href="#1-1、什么是聚合函数" class="headerlink" title="1.1、什么是聚合函数"></a>1.1、什么是聚合函数</h3><p>SQL基本函数，聚合函数对一组值执行计算，并返回单个值，也被称为组函数。 聚合函数经常与 SELECT 语句的 GROUP BY 子句的HAVING一同使用。</p>
<h3 id="1-2、聚合函数的特点"><a href="#1-2、聚合函数的特点" class="headerlink" title="1.2、聚合函数的特点"></a>1.2、聚合函数的特点</h3><p>除了 COUNT 以外，聚合函数忽略空值。<br>聚合函数经常与 SELECT 语句的 GROUP BY 子句一同使用。<br>所有聚合函数都具有确定性。任何时候用一组给定的输入值调用它们时，都返回相同的值。</p>
<h3 id="1-3、常用聚合函数"><a href="#1-3、常用聚合函数" class="headerlink" title="1.3、常用聚合函数"></a>1.3、常用聚合函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">count(字段名)：统计总行数</span><br><span class="line">sum(字段名)：计算列总和</span><br><span class="line">avg(字段名)：求某一列平均值</span><br><span class="line">min(字段名)：求某一列的最小值</span><br><span class="line">max(字段名)：求某一列的最大值</span><br></pre></td></tr></table></figure>

<h3 id="1-4、聚合函数语法"><a href="#1-4、聚合函数语法" class="headerlink" title="1.4、聚合函数语法"></a>1.4、聚合函数语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 聚合函数(字段名) from 数据库表名;</span><br></pre></td></tr></table></figure>

<h2 id="二、聚合函数应用"><a href="#二、聚合函数应用" class="headerlink" title="二、聚合函数应用"></a>二、聚合函数应用</h2><h3 id="2-1、聚合函数基础应用"><a href="#2-1、聚合函数基础应用" class="headerlink" title="2.1、聚合函数基础应用"></a>2.1、聚合函数基础应用</h3><p><strong>案例：</strong></p>
<p>查看学生信息表中通过英语成绩统计所有的学生数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(english) as 学生人数 from students;</span><br><span class="line">+-----+</span><br><span class="line">| 总人数 |</span><br><span class="line">+-----+</span><br><span class="line">| 7   |</span><br><span class="line">+-----+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>null的记录是不会统计，如果要想统计null，可以用ifnull(字段名,默认值)</p>
<p>默认值里设置：null用0表示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(ifnull(english,0)) as 总人数 from students;</span><br><span class="line">+-----+</span><br><span class="line">| 总人数 |</span><br><span class="line">+-----+</span><br><span class="line">| 9   |</span><br><span class="line">+-----+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>除了前面这个方法可以统计学生人数外，我们还可以：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#比较常用的方法</span><br><span class="line">mysql&gt; select count(*) from students;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">| 9        |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中年龄大于19的总人数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*) from students where age&gt;19;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">| 2        |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中英语成绩的总分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sum(english) as 英语总分 from students;</span><br><span class="line">+-------+</span><br><span class="line">| 英语总分  |</span><br><span class="line">+-------+</span><br><span class="line">| 544.5 |</span><br><span class="line">+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中英语成绩的平均分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select avg(english) as 英语平均分 from students;</span><br><span class="line">+----------+</span><br><span class="line">| 英语平均分    |</span><br><span class="line">+----------+</span><br><span class="line">| 77.78571 |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中英语成绩的最高分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select max(english) as 英语最高分 from students;</span><br><span class="line">+-------+</span><br><span class="line">| 英语最高分 |</span><br><span class="line">+-------+</span><br><span class="line">| 98.5  |</span><br><span class="line">+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中英语成绩的最低分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select min(english) as 英语最低分 from students;</span><br><span class="line">+-------+</span><br><span class="line">| 英语最低分 |</span><br><span class="line">+-------+</span><br><span class="line">| 50.0  |</span><br><span class="line">+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、聚合函数分组应用"><a href="#2-2、聚合函数分组应用" class="headerlink" title="2.2、聚合函数分组应用"></a>2.2、聚合函数分组应用</h3><p><strong>案例：</strong></p>
<p>统计学生信息表中男生的人数与女生的人数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*),sex from students group by sex;</span><br><span class="line">+----------+------+</span><br><span class="line">| count(*) | sex  |</span><br><span class="line">+----------+------+</span><br><span class="line">| 6        | 男  |</span><br><span class="line">| 3        | 女  |</span><br><span class="line">+----------+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*),sex,sum(english),avg(math) from students group by sex;</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">| count(*) | sex  | sum(english) | avg(math) |</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">| 6        | 男  | 318.5        | 87.25000  |</span><br><span class="line">| 3        | 女  | 226.0        | 82.66667  |</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩，总人数超过3人显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*) as n,sex,sum(english),avg(math) from students group by sex having n&gt;3;</span><br><span class="line">+---+------+--------------+-----------+</span><br><span class="line">| n | sex  | sum(english) | avg(math) |</span><br><span class="line">+---+------+--------------+-----------+</span><br><span class="line">| 6 | 男  | 318.5        | 87.25000  |</span><br><span class="line">+---+------+--------------+-----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、聚合函数应用扩展"><a href="#三、聚合函数应用扩展" class="headerlink" title="三、聚合函数应用扩展"></a>三、聚合函数应用扩展</h2><h3 id="3-1、group-concat"><a href="#3-1、group-concat" class="headerlink" title="3.1、group_concat"></a>3.1、group_concat</h3><p>group_concat(字段名)可以作为一个输出字段来使用，表示分组之后，根据分组结果，使用group_concat()来放置每一组的某字段的值的集合。</p>
<p><strong>案例：</strong></p>
<p>统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩及数学成绩的集合</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*),sex,sum(english),avg(math),group_concat(math) from students group by sex;</span><br><span class="line">+----------+------+--------------+-----------+---------------------+</span><br><span class="line">| count(*) | sex  | sum(english) | avg(math) | group_concat(math)  |</span><br><span class="line">+----------+------+--------------+-----------+---------------------+</span><br><span class="line">| 3        | 女  | 226.0        | 82.66667  | 80.0,70.0,98.0      |</span><br><span class="line">| 6        | 男  | 318.5        | 87.25000  | 88.0,88.0,85.0,88.0 |</span><br><span class="line">+----------+------+--------------+-----------+---------------------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、with-rollup"><a href="#3-2、with-rollup" class="headerlink" title="3.2、with rollup"></a>3.2、with rollup</h3><p>在最后新增一行，来记录当前列里所有记录的总和</p>
<p><strong>案例：</strong></p>
<p>统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩及增加显示列的记录总和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*),sex,sum(english),avg(math) from students group by sex with rollup;</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">| count(*) | sex  | sum(english) | avg(math) |</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">| 3        | 女  | 226.0        | 82.66667  |</span><br><span class="line">| 6        | 男  | 318.5        | 87.25000  |</span><br><span class="line">| 9        | NULL | 544.5        | 85.28571  |</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h1 id="DQL-limit分页"><a href="#DQL-limit分页" class="headerlink" title="DQL-limit分页"></a>DQL-limit分页</h1><p> 阅读 (134847) </p>
<p> 分享</p>
<p>在我们使用查询语句的时候，经常要返回前几条或者中间某几行数据，这个时候怎么办呢？不用担心，mysql已经为我们提供了这样一个功能-limit。</p>
<h2 id="一、limit概述"><a href="#一、limit概述" class="headerlink" title="一、limit概述"></a>一、limit概述</h2><p>Limit是限制的意思，所以limit的作用就是限制查询记录的条数。</p>
<h2 id="二、limit语法"><a href="#二、limit语法" class="headerlink" title="二、limit语法"></a>二、limit语法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [limit offset,length];</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p>offset：起始行数，从 0 开始计数，如果省略，默认就是 0</p>
<p>length： 返回的行数</p>
<h2 id="三、limit应用"><a href="#三、limit应用" class="headerlink" title="三、limit应用"></a>三、limit应用</h2><p><strong>案例：</strong></p>
<p>查询学生信息表中前5条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#offset可以省略，省略时，从0开始</span><br><span class="line">mysql&gt; select * from students limit 5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中从第3条记录开始，查询出5条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students limit 2,5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、limit分页"><a href="#四、limit分页" class="headerlink" title="四、limit分页"></a>四、limit分页</h2><h3 id="4-1、什么是分页"><a href="#4-1、什么是分页" class="headerlink" title="4.1、什么是分页"></a>4.1、什么是分页</h3><p>打开百度，输入我们想要查看的信息，查出来的数据会有成千上万条数据，那么这些数据在页面不能一次性展示，这个时候我们就需要用到分页。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603189560330.png" alt="image20200209012451326.png"></p>
<h3 id="4-2、MySql中的分页"><a href="#4-2、MySql中的分页" class="headerlink" title="4.2、MySql中的分页"></a>4.2、MySql中的分页</h3><p><strong>案例：</strong></p>
<p>查询学生信息表中的信息，按5条记录为一页展示</p>
<p><strong>第一页</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students limit 0,5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>第二页</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students limit 5,5;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六    | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红    | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">| 8    | 王五    | 男  | NULL | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>limit中offset在发生着变化，第一页是0，第二页是(前一页的offset+length)，而length并没有发生变化。</p>
<p>如果最后一页的记录数没有指定的length条，是有多少显示多少</p>
<h1 id="DQL-limit分页-1"><a href="#DQL-limit分页-1" class="headerlink" title="DQL-limit分页"></a>DQL-limit分页</h1><p> 阅读 (134847) </p>
<p> 分享</p>
<p>在我们使用查询语句的时候，经常要返回前几条或者中间某几行数据，这个时候怎么办呢？不用担心，mysql已经为我们提供了这样一个功能-limit。</p>
<h2 id="一、limit概述-1"><a href="#一、limit概述-1" class="headerlink" title="一、limit概述"></a>一、limit概述</h2><p>Limit是限制的意思，所以limit的作用就是限制查询记录的条数。</p>
<h2 id="二、limit语法-1"><a href="#二、limit语法-1" class="headerlink" title="二、limit语法"></a>二、limit语法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [limit offset,length];</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p>offset：起始行数，从 0 开始计数，如果省略，默认就是 0</p>
<p>length： 返回的行数</p>
<h2 id="三、limit应用-1"><a href="#三、limit应用-1" class="headerlink" title="三、limit应用"></a>三、limit应用</h2><p><strong>案例：</strong></p>
<p>查询学生信息表中前5条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#offset可以省略，省略时，从0开始</span><br><span class="line">mysql&gt; select * from students limit 5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中从第3条记录开始，查询出5条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students limit 2,5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、limit分页-1"><a href="#四、limit分页-1" class="headerlink" title="四、limit分页"></a>四、limit分页</h2><h3 id="4-1、什么是分页-1"><a href="#4-1、什么是分页-1" class="headerlink" title="4.1、什么是分页"></a>4.1、什么是分页</h3><p>打开百度，输入我们想要查看的信息，查出来的数据会有成千上万条数据，那么这些数据在页面不能一次性展示，这个时候我们就需要用到分页。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603189560330.png" alt="image20200209012451326.png"></p>
<h3 id="4-2、MySql中的分页-1"><a href="#4-2、MySql中的分页-1" class="headerlink" title="4.2、MySql中的分页"></a>4.2、MySql中的分页</h3><p><strong>案例：</strong></p>
<p>查询学生信息表中的信息，按5条记录为一页展示</p>
<p><strong>第一页</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students limit 0,5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>第二页</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students limit 5,5;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六    | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红    | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">| 8    | 王五    | 男  | NULL | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>limit中offset在发生着变化，第一页是0，第二页是(前一页的offset+length)，而length并没有发生变化。</p>
<p>如果最后一页的记录数没有指定的length条，是有多少显示多少</p>
<h1 id="DQL-模糊查询"><a href="#DQL-模糊查询" class="headerlink" title="DQL-模糊查询"></a>DQL-模糊查询</h1><p> 阅读 (167937) </p>
<p> 分享</p>
<p>模糊查询即模糊检索，是指搜索系统自动按照用户输入关键词的同义词进行模糊检索，从而得出较多的检索结果。与之相反的是“精准搜索”。模糊检索也可以说是同义词检索，这里的同义词是用户通过“检索管理”中的“同义词典”来配置的。</p>
<p>用户在检索页面中输入同义词中任何一个词检索时，只要选中“模糊检索”复选框，则该关键词的所有同义词信息也都被检索出来。</p>
<p>举例：例如配置了“电脑”与“computer”为同义词后，检索“电脑”，则包含“computer”的网页也会出现在检索结果中。</p>
<h2 id="一、模糊查询概述"><a href="#一、模糊查询概述" class="headerlink" title="一、模糊查询概述"></a>一、模糊查询概述</h2><h3 id="1-1、什么是模糊查询"><a href="#1-1、什么是模糊查询" class="headerlink" title="1.1、什么是模糊查询"></a>1.1、什么是模糊查询</h3><p>模糊查询是针对字符串操作的，类似正则表达式，没有正则表达式强大。</p>
<h3 id="1-2、通配符"><a href="#1-2、通配符" class="headerlink" title="1.2、通配符"></a>1.2、通配符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%：表示任意0个或多个字符。</span><br><span class="line">_： 表示任意单个字符。</span><br><span class="line">[ ]：表示括号内所列字符中的一个（类似正则表达式）。</span><br><span class="line">[^ ] ：表示不在括号所列之内的单个字符。</span><br></pre></td></tr></table></figure>

<h3 id="1-3、回顾-和"><a href="#1-3、回顾-和" class="headerlink" title="1.3、回顾%和_"></a>1.3、回顾%和_</h3><h4 id="1-3-1、-应用"><a href="#1-3-1、-应用" class="headerlink" title="1.3.1、%应用"></a>1.3.1、%应用</h4><p>可匹配任意类型和长度的字符，有些情况下若是中文，请使用两个百分号（%%）表示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 like %字符串%;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询出学生信息表中姓名里有‘三’的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;%三%&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2、-应用"><a href="#1-3-2、-应用" class="headerlink" title="1.3.2、_应用"></a>1.3.2、_应用</h4><p>匹配单个任意字符，它常用来限制表达式的字符长度语句。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 like _字符串_;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中姓名里含有‘红’字，二个字的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;_红&#x27; or sname like &#x27;红_&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、模糊查询应用"><a href="#二、模糊查询应用" class="headerlink" title="二、模糊查询应用"></a>二、模糊查询应用</h2><h3 id="2-1、-应用"><a href="#2-1、-应用" class="headerlink" title="2.1、[ ]应用"></a>2.1、[ ]应用</h3><p>指定一个字符、字符串或范围，要求所匹配对象为它们中的任一个。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 regexp [字符串]字符串;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中姓名里有张和李的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sname regexp &#x27;[张李]&#x27;;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三    | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四    | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红    | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八    | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 三李    | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">6 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中姓名为张红和李红的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#[张李]红  张红 李红</span><br><span class="line">mysql&gt; select * from students where sname regexp &#x27;[张李]红&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄包含789这几个数字的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where age regexp &#x27;[789]&#x27;;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三    | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红    | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八    | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 三李    | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 7    | 刘红    | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">6 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>如 [ ] 内有一系列字符（01234、abcde之类的）则可略写为“0-4”、“a-e”</p>
<h3 id="2-2、-应用"><a href="#2-2、-应用" class="headerlink" title="2.2、[^]应用"></a>2.2、[^]应用</h3><p>其取值和 [] 相同，但它要求所匹配对象为指定字符以外的任一个字符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 regexp [^字符串]字符串;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中姓名不是张红、李红，而是其他红的人的信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sname regexp &#x27;[^张李]红&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄不包含7891这几个数字的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where age regexp &#x27;[^7891]&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中姓张和姓李的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students where sname regexp &#x27;^[张李]&#x27;;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三    | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四    | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红    | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八    | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[]表示的是：字符串开始的第一个字符</span><br></pre></td></tr></table></figure>

<h1 id="MySQL约束"><a href="#MySQL约束" class="headerlink" title="MySQL约束"></a>MySQL约束</h1><p> 阅读 (201392) </p>
<p> 分享</p>
<p>约束是按照约定（特定）条件限制，管束等意思。约束的作用是添加、删除。</p>
<p>在数据库中对表中的数据进行限制，保证数据的正确性、有效性和完整性。一个表如果添加了约束，不正确的数据将无法插入到表中。约束在创建表的时候添加比较合适。</p>
<h2 id="一、约束概述"><a href="#一、约束概述" class="headerlink" title="一、约束概述"></a>一、约束概述</h2><h3 id="1-1、什么是约束"><a href="#1-1、什么是约束" class="headerlink" title="1.1、什么是约束"></a>1.1、什么是约束</h3><p>约束用于限制加入表的数据的类型。</p>
<p>可以在创建表时规定约束（通过 CREATE TABLE 语句），或者在表创建之后也可以（通过 ALTER TABLE 语句）。</p>
<h3 id="1-2、约束作用"><a href="#1-2、约束作用" class="headerlink" title="1.2、约束作用"></a>1.2、约束作用</h3><p>对表中的数据进行限制，保证数据的正确性、有效性和完整性。一个表如果添加了约束，不正确的数据将无法插入到表中。约束在创建表的时候添加比较合适。</p>
<h3 id="1-3、约束分类"><a href="#1-3、约束分类" class="headerlink" title="1.3、约束分类"></a>1.3、约束分类</h3><p><strong>主键</strong> primary key</p>
<p><strong>唯一</strong> unique</p>
<p><strong>非空</strong> not null</p>
<p><strong>默认值</strong> default</p>
<p><strong>外键</strong> foreign key</p>
<p><strong>检查约束</strong> check</p>
<h2 id="二、主键约束"><a href="#二、主键约束" class="headerlink" title="二、主键约束"></a>二、主键约束</h2><h3 id="2-1、主键约束格式"><a href="#2-1、主键约束格式" class="headerlink" title="2.1、主键约束格式"></a>2.1、主键约束格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">格式1：</span><br><span class="line">字段名 字段类型 primary key  #在create table 语句中设置主键</span><br><span class="line">格式2：</span><br><span class="line">alter table 数据库表名 add primary key(字段名); #在已经创建好的数据库表中增加主键</span><br><span class="line">格式3：</span><br><span class="line">alter table 数据库表名 drop primary key; #在已经创建好的数据库表中删除主键</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>非空 not null</p>
<p>唯一</p>
<h3 id="2-2、主键约束作用"><a href="#2-2、主键约束作用" class="headerlink" title="2.2、主键约束作用"></a>2.2、主键约束作用</h3><p>是每一条记录的唯一标识，不会重复。</p>
<p><strong>如：</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240514001.png" alt="image20200210091102251.png"></p>
<p><strong>注意：</strong></p>
<p>通常主键，单独给每张表设计一个 id 的字段，把 id 作为主键。</p>
<p>主键是给数据库和程序使用的，不是给最终的客户使用的。所以主键有没有含义没有关系，只要不重复，非空就行。</p>
<h3 id="2-3、主键约束应用"><a href="#2-3、主键约束应用" class="headerlink" title="2.3、主键约束应用"></a>2.3、主键约束应用</h3><p>创建一个老师表，里面包含了字段名（tid，tname，sex，age），将tid做为主键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">create table teacher(</span><br><span class="line">   tid int primary key, -- sid为主键</span><br><span class="line">   tname varchar(20),</span><br><span class="line">   sex varchar(2),</span><br><span class="line">   age int</span><br><span class="line">);</span><br><span class="line">mysql&gt; create table teacher(</span><br><span class="line">   tid int primary key, -- sid为主键</span><br><span class="line">   tname varchar(20),</span><br><span class="line">   sex varchar(2),</span><br><span class="line">   age int</span><br><span class="line">);</span><br><span class="line">Query OK, 0 rows affected (0.10 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc teacher;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| tid   | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| tname | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex   | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>往老师表中插入记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#插入记录</span><br><span class="line">mysql&gt; insert into teacher values(1,&#x27;李小四&#x27;,&#x27;男&#x27;,45);</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br><span class="line">#插入相同记录</span><br><span class="line">mysql&gt; insert into teacher values(1,&#x27;李小四&#x27;,&#x27;男&#x27;,45);</span><br><span class="line">Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line">mysql&gt; select * from teacher;</span><br><span class="line">+-----+-----------+------+------+</span><br><span class="line">| tid | tname     | sex  | age  |</span><br><span class="line">+-----+-----------+------+------+</span><br><span class="line">| 1   | 李小四 | 男  | 45   |</span><br><span class="line">+-----+-----------+------+------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">#插入一条null记录</span><br><span class="line">mysql&gt; insert into teacher values(null,&#x27;李小四&#x27;,&#x27;男&#x27;,45);</span><br><span class="line">Column &#x27;tid&#x27; cannot be null</span><br></pre></td></tr></table></figure>

<p>去掉老师表中的主键约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table teacher drop primary key;</span><br><span class="line">Query OK, 1 rows affected (0.07 秒)</span><br><span class="line">mysql&gt; desc teacher;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| tid   | int(11)     | NO   |     | NULL    |       |</span><br><span class="line">| tname | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex   | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>为老师表添加主键约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table teacher add primary key(tid);</span><br><span class="line">Query OK, 0 rows affected (0.25 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc teacher;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| tid   | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| tname | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex   | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、主键自增"><a href="#三、主键自增" class="headerlink" title="三、主键自增"></a>三、主键自增</h2><h3 id="3-1、主键自增格式"><a href="#3-1、主键自增格式" class="headerlink" title="3.1、主键自增格式"></a>3.1、主键自增格式</h3><p>在数据库表中，主键一般情况下，我们是用一个id字段来表示，如果让我们自己添加的话要做到不能重复、不能为空就比较麻烦，所以主键我们都是设置为自动增长。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">字段名 字段类型 primary key auto_increment</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>创建一个用户表，表里面有用户名和密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table user(</span><br><span class="line">   uid int primary key auto_increment,</span><br><span class="line">   uname varchar(20),</span><br><span class="line">   pword varchar(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>在用户表中插入二条件数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into user(uname,pword)values(&#x27;zutuanxue01&#x27;,&#x27;00001&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.06 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user(uname,pword)values(&#x27;zutuanxue02&#x27;,&#x27;00002&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| uid | uname      | pword |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| 1   | zutuanxue01 | 00001 |</span><br><span class="line">| 2   | zutuanxue02 | 00002 |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>设置表字段的自增长后，他的默认起始值从1开始</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into user values(null,&#x27;zutuanxue03&#x27;,&#x27;00003&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| uid | uname      | pword |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| 1   | zutuanxue01 | 00001 |</span><br><span class="line">| 2   | zutuanxue02 | 00002 |</span><br><span class="line">| 3   | zutuanxue03 | 00003 |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、修改主键自增起始值"><a href="#3-2、修改主键自增起始值" class="headerlink" title="3.2、修改主键自增起始值"></a>3.2、修改主键自增起始值</h3><h4 id="3-2-1、创建表后修改"><a href="#3-2-1、创建表后修改" class="headerlink" title="3.2.1、创建表后修改"></a>3.2.1、创建表后修改</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 auto_increment=起始值;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>修改用户表中主键自增长的起始值为100</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table user auto_increment=100;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user values(null,&#x27;zutuanxue04&#x27;,&#x27;00004&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.10 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| uid | uname      | pword |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| 1   | zutuanxue01 | 00001 |</span><br><span class="line">| 2   | zutuanxue02 | 00002 |</span><br><span class="line">| 3   | zutuanxue03 | 00003 |</span><br><span class="line">| 100 | zutuanxue04 | 00004 |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-2、创建表时修改"><a href="#3-2-2、创建表时修改" class="headerlink" title="3.2.2、创建表时修改"></a>3.2.2、创建表时修改</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 数据库表名(</span><br><span class="line">  字段名1 字段类型 primary key auto_increment,</span><br><span class="line">  字段名2 字段类型,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型,</span><br><span class="line">)auto_increment=超始值;</span><br></pre></td></tr></table></figure>

<p>创建一个新用户表，表里面有用户名和密码，并设置起始值为100</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table new_user(</span><br><span class="line">   uid int primary key auto_increment,</span><br><span class="line">   uname varchar(20),</span><br><span class="line">   pword varchar(20)</span><br><span class="line">)auto_increment=100;</span><br></pre></td></tr></table></figure>

<p>在新用户表中插入一条件数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into new_user(uname,pword)values(&#x27;zutuanxue01&#x27;,&#x27;00001&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.10 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from new_user;</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| uid | uname      | pword |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| 100 | zutuanxue01 | 00001 |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、记录删除后对自增的影响"><a href="#3-3、记录删除后对自增的影响" class="headerlink" title="3.3、记录删除后对自增的影响"></a>3.3、记录删除后对自增的影响</h3><h4 id="3-3-1、delete"><a href="#3-3-1、delete" class="headerlink" title="3.3.1、delete"></a>3.3.1、delete</h4><p>删除记录后，对自增长字段没有影响</p>
<p><strong>案例：</strong></p>
<p>删除用户数据库表中的所有记录，在插入1条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from user;</span><br><span class="line">Query OK, 4 rows affected (0.11 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user values(null,&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| uid | uname    | pword    |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| 101 | zhangsan | zhangsan |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-2、truncate"><a href="#3-3-2、truncate" class="headerlink" title="3.3.2、truncate"></a>3.3.2、truncate</h4><p>删除记录后，自增长字段重新从1开始</p>
<p><strong>案例：</strong></p>
<p>删除用户数据库表中的所有记录，在插入1条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; truncate user;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user values(null,&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| uid | uname    | pword    |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| 1   | zhangsan | zhangsan |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">mysql&gt; truncate new_user;</span><br><span class="line">Query OK, 0 rows affected (0.06 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into new_user values(null,&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from new_user;</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| uid | uname    | pword    |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| 1   | zhangsan | zhangsan |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、唯一约束"><a href="#四、唯一约束" class="headerlink" title="四、唯一约束"></a>四、唯一约束</h2><p>唯一约束就是：设计表中的某一个字段不能出现重复的记录</p>
<h3 id="4-1、唯一约束格式"><a href="#4-1、唯一约束格式" class="headerlink" title="4.1、唯一约束格式"></a>4.1、唯一约束格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字段名 字段类型 unique  #在create table 语句中设置唯一约束</span><br></pre></td></tr></table></figure>

<h3 id="4-2、唯一约束应用"><a href="#4-2、唯一约束应用" class="headerlink" title="4.2、唯一约束应用"></a>4.2、唯一约束应用</h3><h4 id="4-2-1、插入相同记录"><a href="#4-2-1、插入相同记录" class="headerlink" title="4.2.1、插入相同记录"></a>4.2.1、插入相同记录</h4><p><strong>案例：</strong></p>
<p>创建一个新的表t1，表里包含字段名（id,name）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table t1(</span><br><span class="line">  id int,</span><br><span class="line">  name varchar(20) unique -- 姓名唯一，不能出现重复</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>往表中插入一条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t1 values(1,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br></pre></td></tr></table></figure>

<p>继续插入同一条件记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t1 values(1,&#x27;zhangsan&#x27;);</span><br><span class="line">Duplicate entry &#x27;zhangsan&#x27; for key &#x27;name&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-1、插入null记录"><a href="#4-2-1、插入null记录" class="headerlink" title="4.2.1、插入null记录"></a>4.2.1、插入null记录</h4><p>案例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t1 values(1,null);</span><br><span class="line">Query OK, 1 rows affected (0.02 秒)</span><br><span class="line">mysql&gt; insert into t1 values(1,null);</span><br><span class="line">Query OK, 1 rows affected (0.05 秒)</span><br><span class="line">mysql&gt; select * from t1;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | name     |</span><br><span class="line">+------+----------+</span><br><span class="line">| 1    | zhangsan |</span><br><span class="line">| 1    | NULL     |</span><br><span class="line">| 1    | NULL     |</span><br><span class="line">+------+----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>null表示的是没有数据，所有不存在重复的问题</p>
<h2 id="五、非空约束"><a href="#五、非空约束" class="headerlink" title="五、非空约束"></a>五、非空约束</h2><p>非空约束就是：数据库表中的字段的值，不能为null</p>
<h3 id="5-1、非空约束格式"><a href="#5-1、非空约束格式" class="headerlink" title="5.1、非空约束格式"></a>5.1、非空约束格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字段名 字段类型 not null  #在create table 语句中设置字段值不能为null</span><br></pre></td></tr></table></figure>

<h3 id="5-2、非空约束应用"><a href="#5-2、非空约束应用" class="headerlink" title="5.2、非空约束应用"></a>5.2、非空约束应用</h3><p><strong>案例：</strong></p>
<p>创建一个新的表t2，表里包含字段名（id,name）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table t2(</span><br><span class="line">  id int,</span><br><span class="line">  name varchar(20) not null -- 姓名的记录不能为null</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>往表中插入一条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t2 values(1,&#x27;lisi&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.10 秒)</span><br></pre></td></tr></table></figure>

<p>往表中插入一条姓名为null的记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t2 values(1, null);</span><br><span class="line">Column &#x27;name&#x27; cannot be null</span><br><span class="line">mysql&gt; select * from t2;</span><br><span class="line">+------+------+</span><br><span class="line">| id   | name |</span><br><span class="line">+------+------+</span><br><span class="line">| 1    | lisi |</span><br><span class="line">+------+------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>字段设置了非空与唯一约束与主键区别？</p>
<p>主键数在一个表中，只能有一个。自增长只能用在主键上</p>
<p>非空与唯一约束可以设置在N个字段上</p>
<h2 id="六、默认值"><a href="#六、默认值" class="headerlink" title="六、默认值"></a>六、默认值</h2><p>默认值就是：当我们在增加记录的时候如果不去设置值，那么自动的会用默认值补齐，字段默认的默认值是null</p>
<h3 id="6-1、默认值格式"><a href="#6-1、默认值格式" class="headerlink" title="6.1、默认值格式"></a>6.1、默认值格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字段名 字段类型 default 默认值  #在create table 语句中设置字段的默认值，不设置默认值为null</span><br></pre></td></tr></table></figure>

<h3 id="6-2、默认值应用"><a href="#6-2、默认值应用" class="headerlink" title="6.2、默认值应用"></a>6.2、默认值应用</h3><p><strong>案例：</strong></p>
<p>创建一个新的表t3，表里包含字段名（id,name）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table t3(</span><br><span class="line">  id int,</span><br><span class="line">  name varchar(20) default &#x27;lisi&#x27; -- 增加时如果不加入姓名，姓名为‘lisi’</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>往表中插入一条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t3 values(1,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p>往表中插入一条id为1的记录，其他信息不用增加</p>
<p><strong>方法一：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t3(id) values(1);</span><br><span class="line">Query OK, 1 rows affected (0.06 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t3;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | name     |</span><br><span class="line">+------+----------+</span><br><span class="line">| 1    | zhangsan |</span><br><span class="line">| 1    | lisi     |</span><br><span class="line">+------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>方法二：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t3 values(1,default);</span><br><span class="line">Query OK, 1 rows affected (0.09 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t3;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | name     |</span><br><span class="line">+------+----------+</span><br><span class="line">| 1    | zhangsan |</span><br><span class="line">| 1    | lisi     |</span><br><span class="line">| 1    | lisi     |</span><br><span class="line">+------+----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="七、外键约束产生"><a href="#七、外键约束产生" class="headerlink" title="七、外键约束产生"></a>七、外键约束产生</h2><h3 id="7-1、数据冗余"><a href="#7-1、数据冗余" class="headerlink" title="7.1、数据冗余"></a>7.1、数据冗余</h3><p>数据冗余是指数据之间的重复，也可以说是同一数据存储在不同数据文件中的现象。</p>
<h3 id="7-2、表的数据冗余"><a href="#7-2、表的数据冗余" class="headerlink" title="7.2、表的数据冗余"></a>7.2、表的数据冗余</h3><p><strong>员工表</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240575339.png" alt="image20200213223102058.png"></p>
<p>除了数据冗余的问题外，假如我们的研发部搬到了北京，这这时候，我们就要去修改我们的研发部的地点，这样的修改数据的时候也会很麻烦。</p>
<p><strong>问题解决</strong></p>
<p>数据冗余、数据增、删、改？</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240588322.png" alt="image20200213224403897.png"></p>
<h3 id="7-3、为什么要使用外键约束"><a href="#7-3、为什么要使用外键约束" class="headerlink" title="7.3、为什么要使用外键约束"></a>7.3、为什么要使用外键约束</h3><p><strong>新的问题？</strong></p>
<p>假如我们在员工表中增加一条记录</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240601021.png" alt="image20200213225528342.png"></p>
<p>员工表中的记录dep_id中的3，在部门表中并没有这个id的记录。我们也将这条记录加入了进去。那么我们的员工王六就没有对应的部门了。这种情况在实际的应用中是不允许的。</p>
<p><strong>实际情况：</strong></p>
<p>我们员工表中的dep_id的值，只能是部门表中存在的id。</p>
<p><strong>解决方法：</strong></p>
<p>使用外键约束</p>
<h3 id="7-4、什么是外键约束"><a href="#7-4、什么是外键约束" class="headerlink" title="7.4、什么是外键约束"></a>7.4、什么是外键约束</h3><p>一张表的一个字段受限于另外一张表的一个字段对应的值。这里涉及到两张表：被引用的表叫主表（父表），另外一张叫从表（子表）。</p>
<p><strong>子表：</strong>定义了外键的表，外键的取值要么取父表中字段对应的值，要么取NULL值，严重受限于父表</p>
<p><strong>父表：</strong>被引用的字段要具有唯一性（绝大多数都是用的父表的主键）</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240617595.png" alt="image20200213230844619.png"></p>
<h3 id><a href="#" class="headerlink" title></a></h3><h2 id="八、外键约束"><a href="#八、外键约束" class="headerlink" title="八、外键约束"></a>八、外键约束</h2><h3 id="8-1、外键约束格式"><a href="#8-1、外键约束格式" class="headerlink" title="8.1、外键约束格式"></a>8.1、外键约束格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式一：</span><br><span class="line">[constraint][外键约束名称] foreign key(外键字段名) references 主表名称(主键字段名);  #在create table时设置 </span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>创建一个班级表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">create table classes( -- 班级表</span><br><span class="line">cid int primary key auto_increment,-- 班级ID</span><br><span class="line">cname varchar(20),-- 班级名称  </span><br><span class="line">crenshu int(3),-- 班级人数</span><br><span class="line">cmajor varchar(10),-- 专业</span><br><span class="line">cmark text -- 备注</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; desc classes;</span><br><span class="line">+---------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field   | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+---------+-------------+------+-----+---------+----------------+</span><br><span class="line">| cid     | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| cname   | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| crenshu | int(3)      | YES  |     | NULL    |                |</span><br><span class="line">| cmajor  | varchar(10) | YES  |     | NULL    |                |</span><br><span class="line">| cmark   | text        | YES  |     | NULL    |                |</span><br><span class="line">+---------+-------------+------+-----+---------+----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>插入班级信息:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into classes values(null,&#x27;一班&#x27;,60,&#x27;计算机&#x27;,&#x27;学校的王牌专业&#x27;),(null,&#x27;二班&#x27;,50,&#x27;财务会计&#x27;,&#x27;学校最好就业专业&#x27;);</span><br><span class="line">Query OK, 2 rows affected (0.06 秒)</span><br><span class="line">mysql&gt; select * from classes;</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| cid | cname  | crenshu | cmajor       | cmark                    |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| 3   | 一班 | 60      | 计算机    | 学校的王牌专业    |</span><br><span class="line">| 4   | 二班 | 50      | 财务会计 | 学校最好就业专业 |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>创建一个学生表（与班级表建立主外键关联）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">create table stu  -- 学生表</span><br><span class="line">(</span><br><span class="line">sid int primary key auto_increment, -- 学生ID</span><br><span class="line">sname varchar(20),-- 学生姓名</span><br><span class="line">ssex varchar(2),-- 性别</span><br><span class="line">stell varchar(11),-- 电话号码</span><br><span class="line">sdate date ,-- 入学日期</span><br><span class="line">srmark varchar(30),-- 备注</span><br><span class="line">sclassid int,-- 外键对应主表中的主建  </span><br><span class="line">-- 创建外键约束</span><br><span class="line">constraint stu_sclassid_fk foreign key (sclassid) references classes(cid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| sid      | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| ssex     | varchar(2)  | YES  |     | NULL    |                |</span><br><span class="line">| stell    | varchar(11) | YES  |     | NULL    |                |</span><br><span class="line">| sdate    | date        | YES  |     | NULL    |                |</span><br><span class="line">| srmark   | varchar(30) | YES  |     | NULL    |                |</span><br><span class="line">| sclassid | int(11)     | YES  | MUL | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">7 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>PRI主键约束； UNI唯一约束； MUL可以重复。</p>
<p>插入学生信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into stu values(null,&#x27;张三&#x27;,&#x27;男&#x27;,&#x27;13111111111&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩不错&#x27;,3);</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into stu values(null,&#x27;李四&#x27;,&#x27;男&#x27;,&#x27;13112211112&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩一般&#x27;,1);</span><br><span class="line">Cannot add or update a child row: a foreign key constraint fails (`zutuanxue`.`stu`, CONSTRAINT `stu_sclassid_fk` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 3        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line">格式二：</span><br><span class="line">alter table 从表名称 add [constraint][外键约束名称] foreign key(外键字段名) references 主表名称(主键字段名);  #建好表后修改</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>创建一个学生表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">create table stu1  -- 学生表</span><br><span class="line">(</span><br><span class="line">sid int primary key auto_increment, -- 学生ID</span><br><span class="line">sname varchar(20),-- 学生姓名</span><br><span class="line">ssex varchar(2),-- 性别</span><br><span class="line">stell varchar(11),-- 电话号码</span><br><span class="line">sdate date ,-- 入学日期</span><br><span class="line">srmark varchar(30),-- 备注</span><br><span class="line">sclassid int -- 外键对应主表中的主建  </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| sid      | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| ssex     | varchar(2)  | YES  |     | NULL    |                |</span><br><span class="line">| stell    | varchar(11) | YES  |     | NULL    |                |</span><br><span class="line">| sdate    | date        | YES  |     | NULL    |                |</span><br><span class="line">| srmark   | varchar(30) | YES  |     | NULL    |                |</span><br><span class="line">| sclassid | int(11)     | YES  |     | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>为我们的学生表stu1加入我们的外键约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table stu1 add constraint stu_sclassid_fk1</span><br><span class="line">foreign key (sclassid) references classes(cid);</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| sid      | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| ssex     | varchar(2)  | YES  |     | NULL    |                |</span><br><span class="line">| stell    | varchar(11) | YES  |     | NULL    |                |</span><br><span class="line">| sdate    | date        | YES  |     | NULL    |                |</span><br><span class="line">| srmark   | varchar(30) | YES  |     | NULL    |                |</span><br><span class="line">| sclassid | int(11)     | YES  | MUL | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>插入学生信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into stu1 values(null,&#x27;张三&#x27;,&#x27;男&#x27;,&#x27;13111111111&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩不错&#x27;,3);</span><br><span class="line">Query OK, 1 rows affected (0.07 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into stu1 values(null,&#x27;李四&#x27;,&#x27;男&#x27;,&#x27;13112211112&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩一般&#x27;,1);</span><br><span class="line">Cannot add or update a child row: a foreign key constraint fails (`zutuanxue`.`stu1`, CONSTRAINT `stu_sclassid_fk1` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu1;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 3        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="8-2、删除外键约束"><a href="#8-2、删除外键约束" class="headerlink" title="8.2、删除外键约束"></a>8.2、删除外键约束</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 从表 drop foreign key 外键约束名称;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除stu1中的外表关联</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table stu1 drop foreign key stu_sclassid_fk1;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| sid      | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| ssex     | varchar(2)  | YES  |     | NULL    |                |</span><br><span class="line">| stell    | varchar(11) | YES  |     | NULL    |                |</span><br><span class="line">| sdate    | date        | YES  |     | NULL    |                |</span><br><span class="line">| srmark   | varchar(30) | YES  |     | NULL    |                |</span><br><span class="line">| sclassid | int(11)     | YES  | MUL | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into stu1 values(null,&#x27;李四&#x27;,&#x27;男&#x27;,&#x27;13112211112&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩一般&#x27;,1);</span><br><span class="line">Query OK, 1 rows affected (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu1;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 3        |</span><br><span class="line">| 3   | 李四 | 男  | 13112211112 | 2019-09-01 | 学习成绩一般 | 1        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="九、级联操作"><a href="#九、级联操作" class="headerlink" title="九、级联操作"></a>九、级联操作</h2><h3 id="9-1、为什么要级联"><a href="#9-1、为什么要级联" class="headerlink" title="9.1、为什么要级联"></a>9.1、为什么要级联</h3><p>当我们的主表班级表中的cid发生变化时，我们应该如何去改变我们的从表学生表中的sclassid？这个时候我们就需要级联。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from classes;</span><br><span class="line">Cannot delete or update a parent row: a foreign key constraint fails (`zutuanxue`.`stu`, CONSTRAINT `stu_sclassid_fk` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br><span class="line">mysql&gt; delete from classes where cid=3;</span><br><span class="line">Cannot delete or update a parent row: a foreign key constraint fails (`zutuanxue`.`stu`, CONSTRAINT `stu_sclassid_fk` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br><span class="line">mysql&gt; update classes set cid=1 where cid=3;</span><br><span class="line">Cannot delete or update a parent row: a foreign key constraint fails (`zutuanxue`.`stu`, CONSTRAINT `stu_sclassid_fk` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br></pre></td></tr></table></figure>

<h3 id="9-2、级联是什么"><a href="#9-2、级联是什么" class="headerlink" title="9.2、级联是什么"></a>9.2、级联是什么</h3><p>在修改和删除主表的主键时，同时更新或删除副表的外键值，称为级联操作。</p>
<p>级联操作分为二种：级联更新、级联删除</p>
<h3 id="9-2、级联操作方式"><a href="#9-2、级联操作方式" class="headerlink" title="9.2、级联操作方式"></a>9.2、级联操作方式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">on update cascade #级联更新</span><br><span class="line">on delete cascade #级联操作</span><br></pre></td></tr></table></figure>

<p>只能是创建表的时候创建级联关系。更新主表中的主键，从表中的外键列也自动同步更新</p>
<p><strong>案例：</strong></p>
<p>创建一个学生表（与班级表建立主外键关联，并加入级联操作）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table stu  -- 学生表</span><br><span class="line">(</span><br><span class="line">sid int primary key auto_increment, -- 学生ID</span><br><span class="line">sname varchar(20),-- 学生姓名</span><br><span class="line">ssex varchar(2),-- 性别</span><br><span class="line">stell varchar(11),-- 电话号码</span><br><span class="line">sdate date ,-- 入学日期</span><br><span class="line">srmark varchar(30),-- 备注</span><br><span class="line">sclassid int,-- 外键对应主表中的主建  </span><br><span class="line">-- 创建外键约束</span><br><span class="line">constraint stu_sclassid_fk foreign key (sclassid) references classes(cid) on update cascade on delete cascade</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>在学生表中插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into stu values(null,&#x27;张三&#x27;,&#x27;男&#x27;,&#x27;13111111111&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩不错&#x27;,3);</span><br><span class="line">Query OK, 1 rows affected (0.11 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into stu values(null,&#x27;李四&#x27;,&#x27;男&#x27;,&#x27;13112211112&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩一般&#x27;,4);</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 3        |</span><br><span class="line">| 2   | 李四 | 男  | 13112211112 | 2019-09-01 | 学习成绩一般 | 4        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>修改我们班级表中的主键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from classes;</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| cid | cname  | crenshu | cmajor       | cmark                    |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| 3   | 一班 | 60      | 计算机    | 学校的王牌专业    |</span><br><span class="line">| 4   | 二班 | 50      | 财务会计 | 学校最好就业专业 |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; update classes set cid=1 where cid=3;</span><br><span class="line">Query OK, 1 rows affected (0.06 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from classes;</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| cid | cname  | crenshu | cmajor       | cmark                    |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| 1   | 一班 | 60      | 计算机    | 学校的王牌专业    |</span><br><span class="line">| 4   | 二班 | 50      | 财务会计 | 学校最好就业专业 |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 1        |</span><br><span class="line">| 2   | 李四 | 男  | 13112211112 | 2019-09-01 | 学习成绩一般 | 4        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>删除我们班级表中的主键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from classes where cid=4;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from classes;</span><br><span class="line">+-----+--------+---------+-----------+-----------------------+</span><br><span class="line">| cid | cname  | crenshu | cmajor    | cmark                 |</span><br><span class="line">+-----+--------+---------+-----------+-----------------------+</span><br><span class="line">| 1   | 一班 | 60      | 计算机 | 学校的王牌专业 |</span><br><span class="line">+-----+--------+---------+-----------+-----------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 1        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="十、检查约束"><a href="#十、检查约束" class="headerlink" title="十、检查约束"></a>十、检查约束</h2><h3 id="10-1、什么是检查约束"><a href="#10-1、什么是检查约束" class="headerlink" title="10.1、什么是检查约束"></a>10.1、什么是检查约束</h3><p>检查约束指定某列中的值必须满足布尔表达式，根据用户自己的需求来进行限制。</p>
<h3 id="10-2、检查约束使用"><a href="#10-2、检查约束使用" class="headerlink" title="10.2、检查约束使用"></a>10.2、检查约束使用</h3><h4 id="10-2-1、行级添加"><a href="#10-2-1、行级添加" class="headerlink" title="10.2.1、行级添加"></a>10.2.1、行级添加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名</span><br><span class="line">(</span><br><span class="line">  check (字段名1 != 字段名1),</span><br><span class="line">  字段名1 字段类型 check (表达式),</span><br><span class="line">  字段名2 字段类型 constraint 唯一约束名 check (表达式) [not enforced]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>表达式中可以包含该字段名: 字段名 &gt; 0<br>表达式注意事项<br>1.允许使用文字，内置函数和运算符<br>2.不允许在使用了auto_increment的列上使用<br>3.不允许存储函数和用户定义的函数<br>4.不允许子查询等<br>如果省略或指定为enforced，则创建并强制执行约束。<br>如果指定为not enforced，则创建约束但不强制执行。</p>
<p><strong>案例：</strong></p>
<p>创建一个表t4</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table t4</span><br><span class="line">(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  username varchar(32),</span><br><span class="line">  phone varchar(11) check(length(phone) =11)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t4 values(null,&#x27;zhangsan&#x27;,&#x27;13812221222&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t4 values(null,&#x27;zhangsan&#x27;,&#x27;1381222125&#x27;);</span><br><span class="line">Check constraint &#x27;t4_chk_1&#x27; is violated.</span><br></pre></td></tr></table></figure>

<h4 id="10-2-2、表级添加"><a href="#10-2-2、表级添加" class="headerlink" title="10.2.2、表级添加"></a>10.2.2、表级添加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名</span><br><span class="line">(</span><br><span class="line">  字段名1 字段类型,</span><br><span class="line">  字段名2 字段类型,</span><br><span class="line">  [constraint 检查约束名] check(布尔表达式) [ not enforced]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>创建一个表t5</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table t5</span><br><span class="line">(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  username varchar(32),</span><br><span class="line">  phone varchar(11),</span><br><span class="line">  constraint t5_check_phone check(length(phone) =11)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t5 values(null,&#x27;zhangsan&#x27;,&#x27;13812222222&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t5 values(null,&#x27;zhangsan&#x27;,&#x27;1381222222&#x27;);</span><br><span class="line">Check constraint &#x27;t4_check_phone&#x27; is violated.</span><br></pre></td></tr></table></figure>

<h4 id="10-2-3、表后添加"><a href="#10-2-3、表后添加" class="headerlink" title="10.2.3、表后添加"></a>10.2.3、表后添加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 add constraint 检查约束名 check(检查约束);</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>创建一个表t6</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create table t6</span><br><span class="line">(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  username varchar(32),</span><br><span class="line">  phone varchar(11)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table t6 add constraint t6_check_phone check(length(phone)=11);</span><br><span class="line">Query OK, 0 rows affected (0.09 秒)</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t6 values(null,&#x27;zhangsan&#x27;,&#x27;13812221222&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t6 values(null,&#x27;zhangsan&#x27;,&#x27;1381222125&#x27;);</span><br><span class="line">Check constraint &#x27;t6_check_phone&#x27; is violated.</span><br></pre></td></tr></table></figure>

<h4 id="10-2-4、约束删除"><a href="#10-2-4、约束删除" class="headerlink" title="10.2.4、约束删除"></a>10.2.4、约束删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 drop check 检查约束名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>删除t6表中的检查约束t6_check_phone</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t6 drop check t6_check_phone;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t6 values(null,&#x27;zhangsan&#x27;,&#x27;1381222125&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="表与表之间关系"><a href="#表与表之间关系" class="headerlink" title="表与表之间关系"></a>表与表之间关系</h1><p> 阅读 (189460) </p>
<p> 分享</p>
<p>可以在数据库图表中的表之间创建关系，以显示一个表中的列与另一个表中的列是如何相链接的。</p>
<p>在一个关系型数据库中，利用关系可以避免多余的数据。</p>
<h2 id="一、表与表之间关系概述"><a href="#一、表与表之间关系概述" class="headerlink" title="一、表与表之间关系概述"></a>一、表与表之间关系概述</h2><h3 id="1-1、什么是表与表之间关系"><a href="#1-1、什么是表与表之间关系" class="headerlink" title="1.1、什么是表与表之间关系"></a>1.1、什么是表与表之间关系</h3><p>在关系型数据库中，为了避免数据冗余，我们的一些表与表之间肯定是有一定的关系。</p>
<p>如：学生表与老师表，部门表与员工表，用户表与权限表等。</p>
<p>在表设计的时候，就应该体现出来表与表之间的这种关系。</p>
<h3 id="1-2、表与表之间关系分类"><a href="#1-2、表与表之间关系分类" class="headerlink" title="1.2、表与表之间关系分类"></a>1.2、表与表之间关系分类</h3><h4 id="1-2-1、一对多关系"><a href="#1-2-1、一对多关系" class="headerlink" title="1.2.1、一对多关系"></a>1.2.1、一对多关系</h4><p>一对多关系是最普通的一种关系。在这种关系中，A 表中的一行可以匹配 B 表中的多行，但是 B 表中的一行只能匹配 A 表中的一行。</p>
<p>只有当一个相关列是一个主键或具有唯一约束时，才能创建一对多关系。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241036981.png" alt="image20200215112949021.png"></p>
<p><strong>注意：</strong></p>
<p>一对多的创建原则：</p>
<p>主外键关连</p>
<h4 id="1-2-2、一对一关系"><a href="#1-2-2、一对一关系" class="headerlink" title="1.2.2、一对一关系"></a>1.2.2、一对一关系</h4><p>在一对一关系中，A 表中的一行最多只能匹配于 B 表中的一行，反之亦然。如果相关列都是主键或都具有唯一约束，则可以创建一对一关系。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241052871.png" alt="image20200215122050731.png"></p>
<p><strong>注意：</strong></p>
<p>一对一的创建原则：</p>
<p>外键唯一：主表的主键和从表的外键（唯一），形成主外键关系，外键唯一 UNIQUE</p>
<p>外键是主键：主表的主键和从表的主键，形成主外键关系</p>
<h4 id="1-2-3、多对多关系"><a href="#1-2-3、多对多关系" class="headerlink" title="1.2.3、多对多关系"></a>1.2.3、多对多关系</h4><p>在多对多关系中，A 表中的一行可以匹配 B 表中的多行，反之亦然。要创建这种关系，需要定义第三个表，称为结合表，它的主键由 A 表和 B 表的外部键组成。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241065129.png" alt="image20200215121200999.png"></p>
<p><strong>注意：</strong></p>
<p>多对多的创建原则：</p>
<p>二个表与中间表创建1对多的关系。</p>
<h2 id="2、一对多应用"><a href="#2、一对多应用" class="headerlink" title="2、一对多应用"></a>2、一对多应用</h2><p>创建一对多关系：主外键关连</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241079269.png" alt="image20200215123556759.png"></p>
<p>新华出版社（Python爬虫、Linux）</p>
<p>海燕出版社（操作系统、数学）</p>
<p>摆渡出版社（英语、网页设计）</p>
<p>大众出版社（）</p>
<p><strong>案例：</strong></p>
<p>这是一个书和出版社的一个例子，书要关联出版社（多个书可以是一个出版社，一个出版社也可以有好多书）。</p>
<p>表的创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#出版社表（被关联表）</span><br><span class="line">create table press(</span><br><span class="line">id int primary key auto_increment, </span><br><span class="line">name char(20)-- 出版社名字</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#书表（关联表）</span><br><span class="line">create table book(</span><br><span class="line">book_id int primary key auto_increment,</span><br><span class="line">book_name varchar(20),</span><br><span class="line">book_price int,</span><br><span class="line">press_id int,</span><br><span class="line">constraint fk_pressid_id foreign key(press_id) references press(id)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into press(name) values(&#x27;新华出版社&#x27;), (&#x27;海燕出版社&#x27;), (&#x27;摆渡出版社&#x27;), (&#x27;大众出版社&#x27;);</span><br><span class="line">Query OK, 4 rows affected (0.09 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into book(book_name,book_price,press_id) values(&#x27;Python爬虫&#x27;,100,1), (&#x27;Linux&#x27;,80,1), (&#x27;操作系统&#x27;,70,2), (&#x27;数学&#x27;,50,2), (&#x27;英语&#x27;,103,3), (&#x27;网页设计&#x27;,22,3);</span><br><span class="line">Query OK, 6 rows affected (0.07 秒)</span><br></pre></td></tr></table></figure>

<p>查看数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from press;</span><br><span class="line">+----+-----------------+</span><br><span class="line">| id | name            |</span><br><span class="line">+----+-----------------+</span><br><span class="line">| 1  | 新华出版社 |</span><br><span class="line">| 2  | 海燕出版社 |</span><br><span class="line">| 3  | 摆渡出版社 |</span><br><span class="line">| 4  | 大众出版社 |</span><br><span class="line">+----+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from book;</span><br><span class="line">+---------+--------------+------------+----------+</span><br><span class="line">| book_id | book_name    | book_price | press_id |</span><br><span class="line">+---------+--------------+------------+----------+</span><br><span class="line">| 1       | Python爬虫 | 100        | 1        |</span><br><span class="line">| 2       | Linux        | 80         | 1        |</span><br><span class="line">| 3       | 操作系统 | 70         | 2        |</span><br><span class="line">| 4       | 数学       | 50         | 2        |</span><br><span class="line">| 5       | 英语       | 103        | 3        |</span><br><span class="line">| 6       | 网页设计 | 22         | 3        |</span><br><span class="line">+---------+--------------+------------+----------+</span><br><span class="line">6 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、一对一应用"><a href="#三、一对一应用" class="headerlink" title="三、一对一应用"></a>三、一对一应用</h2><p>创建一对一：外键唯一，user_id唯一对应一个uid，user_id必须在uid里出现</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241161787.png" alt="image20200215164955805.png"></p>
<p><strong>案例：</strong></p>
<p>用户和管理员（只有管理员才可以登录，一个管理员对应一个用户）</p>
<p>表创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#用户表（被关联表）</span><br><span class="line">create table user(</span><br><span class="line">id int primary key auto_increment, #主键自增</span><br><span class="line">name char(10)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#管理员表（关联表）</span><br><span class="line">create table manager(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">user_id int unique,</span><br><span class="line">password varchar(16),</span><br><span class="line">foreign key(user_id) references user(id)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into user(name)values(&#x27;susan1&#x27;),(&#x27;susan2&#x27;),(&#x27;susan3&#x27;),(&#x27;susan4&#x27;),(&#x27;susan5&#x27;),(&#x27;susan6&#x27;);</span><br><span class="line">Query OK, 6 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into manager(user_id,password) values(4,&#x27;sds156&#x27;),(2,&#x27;531561&#x27;),(6,&#x27;f3swe&#x27;);</span><br><span class="line">Query OK, 3 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p>查看数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from user;</span><br><span class="line">+----+--------+</span><br><span class="line">| id | name   |</span><br><span class="line">+----+--------+</span><br><span class="line">| 1  | susan1 |</span><br><span class="line">| 2  | susan2 |</span><br><span class="line">| 3  | susan3 |</span><br><span class="line">| 4  | susan4 |</span><br><span class="line">| 5  | susan5 |</span><br><span class="line">| 6  | susan6 |</span><br><span class="line">+----+--------+</span><br><span class="line">6 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from manager;</span><br><span class="line">+----+---------+----------+</span><br><span class="line">| id | user_id | password |</span><br><span class="line">+----+---------+----------+</span><br><span class="line">| 1  | 4       | sds156   |</span><br><span class="line">| 2  | 2       | 531561   |</span><br><span class="line">| 3  | 6       | f3swe    |</span><br><span class="line">+----+---------+----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="4、多对多应用"><a href="#4、多对多应用" class="headerlink" title="4、多对多应用"></a>4、多对多应用</h2><p>创建多对多：要把book_id和author_id设置成联合唯一</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241222140.png" alt="image20200215161523092.png"></p>
<p>九阳神功（egon、e3）</p>
<p>葵花宝典（egon、e4）</p>
<p>辟邪剑谱（e1、e2、e3）</p>
<p>降龙十巴掌（e4）</p>
<p><strong>或者</strong></p>
<p>egon（九阳神功、葵花宝典）</p>
<p>e1（辟邪剑谱）</p>
<p>e2（辟邪剑谱）</p>
<p>e3（九阳神功、辟邪剑谱）</p>
<p>e4（葵花宝典、降龙十巴掌）</p>
<p><strong>案例：</strong></p>
<p>这是一个书和作者的一个例子，书要关联作者（一个作者可以写多个书，一本书也可以有多个作者，双向的一对多，即多对多）。</p>
<p>表创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#书表（被关联表）</span><br><span class="line">create table book1(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(10),</span><br><span class="line">price float(3,2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#作者表（被关联表）</span><br><span class="line">create table author(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name char(5)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#作者和书表（关联表）</span><br><span class="line">create table author2book(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">book_id int not null,</span><br><span class="line">author_id int not null,</span><br><span class="line">unique(book_id,author_id),</span><br><span class="line">foreign key(book_id) references book1(id)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade,</span><br><span class="line">foreign key(author_id) references author(id)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into book1(name,price) values(&#x27;九阳神功&#x27;,9.9), (&#x27;葵花宝典&#x27;,9.5), (&#x27;辟邪剑谱&#x27;,5),  (&#x27;降龙十巴掌&#x27;,7.3);</span><br><span class="line">Query OK, 4 rows affected (0.09 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into author(name) values(&#x27;egon&#x27;),(&#x27;e1&#x27;),(&#x27;e2&#x27;),(&#x27;e3&#x27;),(&#x27;e4&#x27;);</span><br><span class="line">Query OK, 5 rows affected (0.07 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into author2book(book_id,author_id) values(1,1),(1,4),(2,1),(2,5),(3,2),(3,3),(3,4),(4,5);</span><br><span class="line">Query OK, 8 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p>查看数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from book1;</span><br><span class="line">+----+-----------------+-------+</span><br><span class="line">| id | name            | price |</span><br><span class="line">+----+-----------------+-------+</span><br><span class="line">| 1  | 九阳神功    | 9.90  |</span><br><span class="line">| 2  | 葵花宝典    | 9.50  |</span><br><span class="line">| 3  | 辟邪剑谱    | 5.00  |</span><br><span class="line">| 4  | 降龙十巴掌 | 7.30  |</span><br><span class="line">+----+-----------------+-------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from author;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">| 1  | egon |</span><br><span class="line">| 2  | e1   |</span><br><span class="line">| 3  | e2   |</span><br><span class="line">| 4  | e3   |</span><br><span class="line">| 5  | e4   |</span><br><span class="line">+----+------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from author2book;</span><br><span class="line">+----+---------+-----------+</span><br><span class="line">| id | book_id | author_id |</span><br><span class="line">+----+---------+-----------+</span><br><span class="line">| 1  | 1       | 1         |</span><br><span class="line">| 2  | 1       | 4         |</span><br><span class="line">| 3  | 2       | 1         |</span><br><span class="line">| 4  | 2       | 5         |</span><br><span class="line">| 5  | 3       | 2         |</span><br><span class="line">| 6  | 3       | 3         |</span><br><span class="line">| 7  | 3       | 4         |</span><br><span class="line">| 8  | 4       | 5         |</span><br><span class="line">+----+---------+-----------+</span><br><span class="line">8 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="多表连接查询"><a href="#多表连接查询" class="headerlink" title="多表连接查询"></a>多表连接查询</h1><p> 阅读 (153087) </p>
<p> 分享</p>
<p>连接查询是关系数据库中最主要的查询，主要包括内连接、外连接和交叉连接等。通过连接运算符可以实现多个表查询。连接是关系数据库模型的主要特点，也是它区别于其它类型数据库管理系统的一个标志。 在关系数据库管理系统中，表建立时各数据之间的关系不必确定，常把一个实体的所有信息存放在一个表中。当检索数据时，通过连接操作查询出存放在多个表中的不同实体的信息。连接操作给用户带来很大的灵活性，他们可以在任何时候增加新的数据类型。为不同实体创建新的表，然后通过连接进行查询。</p>
<h2 id="一、多表连接查询概述"><a href="#一、多表连接查询概述" class="headerlink" title="一、多表连接查询概述"></a>一、多表连接查询概述</h2><h3 id="1-1、什么是多表查询"><a href="#1-1、什么是多表查询" class="headerlink" title="1.1、什么是多表查询"></a>1.1、什么是多表查询</h3><p>连接是在多个表之间通过一定的连接条件，使表之间发生关联，进而能从多个表之间获取数据。</p>
<p><strong>比如：</strong></p>
<p>有一个部门表，有一个员工表，我想查询某部门中的所有员工的信息。这时我们要先找出部门ID，通过部门ID查询出对应的员工信息。</p>
<p>这样我们在查询我们需要的信息的时候就应用了多表。所以这就是我们的多表查询。</p>
<h3 id="1-2、多表查询的作用"><a href="#1-2、多表查询的作用" class="headerlink" title="1.2、多表查询的作用"></a>1.2、多表查询的作用</h3><p><strong>比如：</strong></p>
<p>我们想查询员工A的名字和他所在的部门的名字，则需要使用多表查询。</p>
<p>那么我们使用一条 SQL 语句查询多张表，因为查询结果在多张不同的表中。而我们的结果要从每张表取 1 列或多列。这就是多表查询的作用。</p>
<h3 id="1-3、多表查询分类"><a href="#1-3、多表查询分类" class="headerlink" title="1.3、多表查询分类"></a>1.3、多表查询分类</h3><p>多表查询可以分为二类查询：</p>
<p><strong>内连接：</strong>隐匿内连接、显示内连接</p>
<p><strong>外连接：</strong>左外连接、右外连接</p>
<h3 id="1-4、笛卡尔积现象"><a href="#1-4、笛卡尔积现象" class="headerlink" title="1.4、笛卡尔积现象"></a>1.4、笛卡尔积现象</h3><h4 id="1-4-1、数据准备"><a href="#1-4-1、数据准备" class="headerlink" title="1.4.1、数据准备"></a>1.4.1、数据准备</h4><p>创建表和数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#部门表</span><br><span class="line">create table dept(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(20)</span><br><span class="line">);</span><br><span class="line">insert into dept (name) values (&#x27;研发部&#x27;),(&#x27;渠道部&#x27;),(&#x27;教务部&#x27;);</span><br><span class="line"></span><br><span class="line"># 创建员工表</span><br><span class="line">create table emp (</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(10),</span><br><span class="line">gender char(1), -- 性别</span><br><span class="line">salary double, -- 工资</span><br><span class="line">join_date date, -- 入职日期</span><br><span class="line">dept_id int,</span><br><span class="line">foreign key (dept_id) references dept(id) -- 外键，关联部门表(部门表的主键) </span><br><span class="line">);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;张三&#x27;,&#x27;男&#x27;,7200,&#x27;2013-02-24&#x27;,1);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;李四&#x27;,&#x27;男&#x27;,3600,&#x27;2010-12-02&#x27;,2);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;王五&#x27;,&#x27;男&#x27;,9000,&#x27;2008-08-08&#x27;,2);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;赵六&#x27;,&#x27;女&#x27;,5000,&#x27;2015-10-07&#x27;,3);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;吴七&#x27;,&#x27;女&#x27;,4500,&#x27;2011-03-14&#x27;,1);</span><br></pre></td></tr></table></figure>

<p>显示表中数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+----+-----------+</span><br><span class="line">| id | name      |</span><br><span class="line">+----+-----------+</span><br><span class="line">| 1  | 研发部 |</span><br><span class="line">| 2  | 渠道部 |</span><br><span class="line">| 3  | 教务部 |</span><br><span class="line">+----+-----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-4-2、什么是笛卡尔积"><a href="#1-4-2、什么是笛卡尔积" class="headerlink" title="1.4.2、什么是笛卡尔积"></a>1.4.2、什么是笛卡尔积</h4><p>案例：</p>
<p>查询所有员工和所有部门</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp,dept;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241592735.png" alt="image20200215173505470.png"></p>
<p>左表的每条数据和右表的每条数据组合，这种效果就是笛卡尔积</p>
<h4 id="1-4-3、清除笛卡尔积"><a href="#1-4-3、清除笛卡尔积" class="headerlink" title="1.4.3、清除笛卡尔积"></a>1.4.3、清除笛卡尔积</h4><p>我们发现笛卡尔积所产生的数据并不是都是有用的，只有员工.dept_id&#x3D;部门.id的值才是我们想要的。</p>
<p>所以我们需要过滤掉没有用的数据。那么如何设置过滤条件呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp,dept where emp.dept_id=dept.id;</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id | id(2) | name(2)   |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       | 1     | 研发部 |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       | 1     | 研发部 |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       | 2     | 渠道部 |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       | 2     | 渠道部 |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       | 3     | 教务部 |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">mysql&gt; select emp.name,dept.name from emp,dept where emp.dept_id=dept.id;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| name   | name(2)   |</span><br><span class="line">+--------+-----------+</span><br><span class="line">| 张三 | 研发部 |</span><br><span class="line">| 吴七 | 研发部 |</span><br><span class="line">| 李四 | 渠道部 |</span><br><span class="line">| 王五 | 渠道部 |</span><br><span class="line">| 赵六 | 教务部 |</span><br><span class="line">+--------+-----------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、内连接"><a href="#二、内连接" class="headerlink" title="二、内连接"></a>二、内连接</h2><p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示。如：从表.外键&#x3D;主表.主键</p>
<h3 id="2-1、隐式内连接"><a href="#2-1、隐式内连接" class="headerlink" title="2.1、隐式内连接"></a>2.1、隐式内连接</h3><p>看不到 join 关键字，条件使用 where 指定</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 左表，右表 where 条件表达式;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>查询员工表中所有员工及所在部门</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp,dept where emp.dept_id=dept.id;</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id | id(2) | name(2)   |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       | 1     | 研发部 |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       | 1     | 研发部 |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       | 2     | 渠道部 |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       | 2     | 渠道部 |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       | 3     | 教务部 |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br></pre></td></tr></table></figure>

<h3 id="2-2、显式内连接"><a href="#2-2、显式内连接" class="headerlink" title="2.2、显式内连接"></a>2.2、显式内连接</h3><p>使用inner join…on语句，可以省略inner</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 左表 [inner] join 右表 on 条件表达式;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>查询王五的信息，显示员工 id，姓名，性别，工资和所在的部门名称。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select emp.id,emp.name,emp.gender,emp.salary,dept.name from emp join dept on emp.dept_id=dept.id where emp.name=&#x27;王五&#x27;;</span><br><span class="line">+----+--------+--------+--------+-----------+</span><br><span class="line">| id | name   | gender | salary | name(2)   |</span><br><span class="line">+----+--------+--------+--------+-----------+</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 渠道部 |</span><br><span class="line">+----+--------+--------+--------+-----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>SQL优化</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select emp.id,emp.name,emp.gender,emp.salary,dept.name from emp join dept on emp.dept_id=dept.id where emp.name=&#x27;王五&#x27;;</span><br><span class="line">或</span><br><span class="line">select e.id,e.name,e.gender,e.salary,d.name from emp e join dept d on e.dept_id=d.id where e.name=&#x27;王五&#x27;;</span><br><span class="line">或</span><br><span class="line">select e.id,e.name,gender,salary,d.name from emp e join dept d on dept_id=d.id where e.name=&#x27;王五&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="2-3、内连接使用步骤"><a href="#2-3、内连接使用步骤" class="headerlink" title="2.3、内连接使用步骤"></a>2.3、内连接使用步骤</h3><ul>
<li>确认查询的数据库表</li>
<li>确认数据库表连接条件</li>
<li>确认数据库表查询条件</li>
<li>确认数据库表显示字段</li>
</ul>
<h2 id="三、左-x2F-右连接"><a href="#三、左-x2F-右连接" class="headerlink" title="三、左&#x2F;右连接"></a>三、左&#x2F;右连接</h2><h3 id="3-1、左连接"><a href="#3-1、左连接" class="headerlink" title="3.1、左连接"></a>3.1、左连接</h3><p>使用 left outer join…on，outer 可以省略</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 左表 left [outer] join 右表 on 条件表达式;</span><br></pre></td></tr></table></figure>

<p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示；否则，显示 NULL</p>
<p><strong>案例：</strong></p>
<p>在部门表中增加一个部门</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into dept(name) values(&#x27;执行部&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br></pre></td></tr></table></figure>

<p>用内连接查询信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept d inner join emp e on d.id=e.dept_id;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241661863.png" alt="image20200215182047845.png"></p>
<p>用左连接查询信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept d left join emp e on d.id=e.dept_id;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241674165.png" alt="image20200215182100590.png"></p>
<p><strong>注意：</strong></p>
<p>左连接表示的是在内连接的基础上保证左表的信息全部显示</p>
<h3 id="3-2、右连接"><a href="#3-2、右连接" class="headerlink" title="3.2、右连接"></a>3.2、右连接</h3><p>使用 right outer join…on，outer 可以省略</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 左表 right [outer] join 右表 on 条件表达式;</span><br></pre></td></tr></table></figure>

<p>用右边表的记录去匹配左边表的记录，如果符合条件的则显示；否则，显示 NULL</p>
<p><strong>案例：</strong></p>
<p>在员工表中加入一个新员工</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into emp values (null, &#x27;王一&#x27;,&#x27;男&#x27;,6666,&#x27;2013-12-05&#x27;,null);</span><br><span class="line">Query OK, 1 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>用内连接查询信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept d inner join emp e on d.id=e.dept_id;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241693324.png" alt="image20200215182047845.png"></p>
<p>用右连接查询信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept d right join emp e on d.id=e.dept_id;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241714996.png" alt="image20200215183504384.png"></p>
<p><strong>注意：</strong></p>
<p>右连接表示的是在内连接的基础上保证右表的信息全部显示</p>
<h1 id="MySQL子查询"><a href="#MySQL子查询" class="headerlink" title="MySQL子查询"></a>MySQL子查询</h1><p> 阅读 (189263) </p>
<p> 分享</p>
<p>在SQL语言中，一个SELECT-FROM-WHERE语句称为一个查询块。当获得一个查询的答案需要多个步骤的操作，首先必须创建一个查询来确定用户不知道但包含在数据库中的值，将一个查询块嵌套在另一个查询块的WHERE字句或HAVING短语的条件中查询块称为子查询或内层查询。上层的查询块曾为父查询或外层查询。子查询的结果作为输入传递回“父查询”或“外部查询”。父查询将这个值结合到计算中，以便确定最后的输出。</p>
<h2 id="一、子查询概述"><a href="#一、子查询概述" class="headerlink" title="一、子查询概述"></a>一、子查询概述</h2><h3 id="1-1、什么是子查询"><a href="#1-1、什么是子查询" class="headerlink" title="1.1、什么是子查询"></a>1.1、什么是子查询</h3><p>子查询是一种常用计算机语言sql中select语言中嵌套查询下层的程序模块。当一个查询是另一个查询的条件时，称之为子查询。</p>
<p><strong>如：</strong></p>
<p>查询渠道部有那些员工</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#第一步，查询出&#x27;渠道部&#x27;的id</span><br><span class="line">mysql&gt; select id from dept where name=&#x27;渠道部&#x27;;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 2  |</span><br><span class="line">+----+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line">#第二步，通过查询出的‘渠道部’的id，在查询渠道部的员工信息</span><br><span class="line">mysql&gt; select * from emp where dept_id=2;</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>子查询方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp where dept_id=(select id from dept where name=&#x27;渠道部&#x27;);</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">2 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h3 id="1-2、子查询特点"><a href="#1-2、子查询特点" class="headerlink" title="1.2、子查询特点"></a>1.2、子查询特点</h3><p>一个查询的结果做为另一个查询的条件</p>
<p>有查询的嵌套，内部的查询称为子查询</p>
<p>子查询要使用括号</p>
<h3 id="1-3、子查询结果的三种情况"><a href="#1-3、子查询结果的三种情况" class="headerlink" title="1.3、子查询结果的三种情况"></a>1.3、子查询结果的三种情况</h3><p>单行单列</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519226794.png" alt="image20200215215222589.png"></p>
<p>多行单列</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519241295.png" alt="image20200215215408848.png"></p>
<p>多行多列</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519252162.png" alt="image20200215215431152.png"></p>
<h2 id="二、单行单列查询"><a href="#二、单行单列查询" class="headerlink" title="二、单行单列查询"></a>二、单行单列查询</h2><p>子查询结果只要是单行单列，肯定在 WHERE 后面作为条件，父查询使用：比较运算符，如：&gt; 、&lt;、&lt;&gt;、&#x3D;、&gt;&#x3D;、&lt;&#x3D;等</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名=(子查询);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询工资最高的员工信息</p>
<p>分析：</p>
<p>先找出最高工资，在查找员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select max(salary) from emp;</span><br><span class="line">+-------------+</span><br><span class="line">| max(salary) |</span><br><span class="line">+-------------+</span><br><span class="line">| 9000        |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp where salary=(select max(salary) from emp);</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询工资小于平均工资的员工信息</p>
<p>分析：</p>
<p>先算出员工的平均工资，在查看小于平均工资的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select avg(salary) from emp;</span><br><span class="line">+-------------------+</span><br><span class="line">| avg(salary)       |</span><br><span class="line">+-------------------+</span><br><span class="line">| 5994.333333333333 |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp where salary&lt;(select avg(salary) from emp);</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">3 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、单行多列查询"><a href="#三、单行多列查询" class="headerlink" title="三、单行多列查询"></a>三、单行多列查询</h2><p>子查询结果只要是单行多列，结果集类似于一个数组，父查询使用in、not in运算符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 in (子查询);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询工资大于 5000 的员工，来自于哪些部门的名字</p>
<p>分析：</p>
<p>先找出工资大于5000的员工的部门ID，通过部门ID查找对应的部门名字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select dept_id from emp where salary&gt;5000;</span><br><span class="line">+---------+</span><br><span class="line">| dept_id |</span><br><span class="line">+---------+</span><br><span class="line">| 1       |</span><br><span class="line">| 2       |</span><br><span class="line">+---------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept where id in(select dept_id from emp where salary&gt;5000); </span><br><span class="line">+----+-----------+</span><br><span class="line">| id | name      |</span><br><span class="line">+----+-----------+</span><br><span class="line">| 1  | 研发部 |</span><br><span class="line">| 2  | 渠道部 |</span><br><span class="line">+----+-----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询研发部与渠道部所有的员工信息</p>
<p>分析：</p>
<p>先查找研发部与渠道部的id，通过id查找到研发部与渠道部的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id from dept where name=&#x27;研发部&#x27; or name=&#x27;渠道部&#x27;;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1  |</span><br><span class="line">| 2  |</span><br><span class="line">+----+</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp where dept_id in(select id from dept where name in(&#x27;研发部&#x27;,&#x27;渠道部&#x27;));</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、多行多列"><a href="#四、多行多列" class="headerlink" title="四、多行多列"></a>四、多行多列</h2><p>子查询结果只要是多行多列，肯定在 FROM 后面作为表，子查询作为表需要取别名，否则这张表没有名称则无法访问表中的字段。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from (子查询) [as] 表别名 where 条件表达式;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询出 2011 年以后入职的员工信息，包括部门名称</p>
<p>分析：<br>先找出2011年入职的员工信息组成一个新表，在查询所在的部门信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp where join_date&gt;=&#x27;2011-01-01&#x27;;</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept d,(select * from emp where join_date&gt;=&#x27;2011-01-01&#x27;) e where d.id=e.dept_id;</span><br><span class="line">+----+-----------+-------+---------+--------+--------+------------+---------+</span><br><span class="line">| id | name      | id(2) | name(2) | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+-----------+-------+---------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 研发部 | 1     | 张三  | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 3  | 教务部 | 4     | 赵六  | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 1  | 研发部 | 5     | 吴七  | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+-----------+-------+---------+--------+--------+------------+---------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>还可以使用表连接查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp inner join dept on emp.dept_id = dept.id where join_date &gt;=&#x27;2011-1-1&#x27;;</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id | id(2) | name(2)   |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       | 1     | 研发部 |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       | 3     | 教务部 |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       | 1     | 研发部 |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br></pre></td></tr></table></figure>

<h1 id="MySQL事务"><a href="#MySQL事务" class="headerlink" title="MySQL事务"></a>MySQL事务</h1><p> 阅读 (195783) </p>
<p> 分享</p>
<p>事务（Transaction），一般是指要做的或所做的事情。在计算机术语中是指访问并可能更新数据库中各种数据项的一个程序执行单元(unit)。事务通常由高级数据库操纵语言或编程语言（如SQL，C++或Java）书写的用户程序的执行所引起，并用形如begin transaction和end transaction语句（或函数调用）来界定。事务由事务开始(begin transaction)和事务结束(end transaction)之间执行的全体操作组成。</p>
<h2 id="一、事务概述"><a href="#一、事务概述" class="headerlink" title="一、事务概述"></a>一、事务概述</h2><h3 id="1-1、什么是事务"><a href="#1-1、什么是事务" class="headerlink" title="1.1、什么是事务"></a>1.1、什么是事务</h3><p>MySQL 事务主要用于处理操作量大，复杂度高的数据。比如说，在人员管理系统中，你删除一个人员，你既需要删除人员的基本资料，也要删除和该人员相关的信息，如信箱，文章等等，这样，这些数据库操作语句就构成一个事务！</p>
<p>事务是一个事件处理的完整的过程。比如：存款、取款、转帐等操作都可以称之为一个事务。</p>
<h3 id="1-2、事务的应用场景"><a href="#1-2、事务的应用场景" class="headerlink" title="1.2、事务的应用场景"></a>1.2、事务的应用场景</h3><p>我们想完成一次转帐业务，那么他会多次去访问我们的数据库。转帐实上就是从一个帐户上扣钱，在往一个帐户上加钱。这样我们执行了二次sql，如果其中一个sql失败，那么整个业务就没有执行成功。所有的sql都需要回滚，整个业务失败。</p>
<p><strong>数据准备</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#创建数据表</span><br><span class="line">create table yh(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(20),</span><br><span class="line">money double</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加数据</span><br><span class="line">insert into yh(name,money)values(&#x27;张三&#x27;, 1000),(&#x27;李四&#x27;, 1000);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>模拟张三给李四转500元钱</p>
<p>分析：</p>
<p>先从张三的帐户减出500，在往李四的帐户加入500元</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update yh set money=money-500 where name=&#x27;张三&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; update yh set money=money+500 where name=&#x27;李四&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 500   |</span><br><span class="line">| 2  | 李四 | 1500  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.04 秒)</span><br></pre></td></tr></table></figure>

<p><strong>如果转帐时出现问题：</strong></p>
<p>当张三账号上-500 元,服务器崩溃了。李四的账号并没有+500 元，数据就出现问题了。</p>
<p>因为他们是一个整体的业务，所以我们需要保证其中一条 SQL 语句出现问题，整个转账就算失败。只有两条 SQL 都成功了转账才算成功。这个时候就需要用到事务。</p>
<h3 id="1-3、事务提交方式"><a href="#1-3、事务提交方式" class="headerlink" title="1.3、事务提交方式"></a>1.3、事务提交方式</h3><p>mysql中有两种事务提交方式：</p>
<p>手动提交</p>
<p>自动提交</p>
<h2 id="二、事务手动提交"><a href="#二、事务手动提交" class="headerlink" title="二、事务手动提交"></a>二、事务手动提交</h2><h3 id="2-1、手动提交的过程"><a href="#2-1、手动提交的过程" class="headerlink" title="2.1、手动提交的过程"></a>2.1、手动提交的过程</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603518979561.png" alt="image20200215230939254.png"></p>
<p>事务执行成功的过程：开启事务-&gt;执行多条件SQL语句-&gt;成功-&gt;事务提交</p>
<p>事务执行失败的过程：开启事务-&gt;执行多条件SQL语句-&gt;失败-&gt;事务回滚</p>
<h3 id="2-2、语法格式"><a href="#2-2、语法格式" class="headerlink" title="2.2、语法格式"></a>2.2、语法格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">start transaction; #开启事务 </span><br><span class="line">commit; #提交事务 </span><br><span class="line">rollback; #回滚事务 </span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>事务的成功提交：模拟张三给李四转 500 元钱（成功） 目前数据库数据如下：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603518996760.png" alt="image20200215232438482.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#开启事务</span><br><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line">#执行从张三帐户扣出500元</span><br><span class="line">mysql&gt; update yh set money=money-500 where name=&#x27;张三&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#执行往李四帐户加入500元</span><br><span class="line">mysql&gt; update yh set money=money+500 where name=&#x27;李四&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#提交事务</span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.08 秒)</span><br><span class="line">#查看帐户</span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 0     |</span><br><span class="line">| 2  | 李四 | 2000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>事务回滚：模拟李四给张三转 500 元钱（失败） 目前数据库数据如下：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519029171.png" alt="image20200215232946263.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#开启事务</span><br><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line">#执行从李四帐户扣出500元</span><br><span class="line">mysql&gt; update yh set money=money-500 where name=&#x27;李四&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#执行往张三帐户加入500元，但是加了600</span><br><span class="line">mysql&gt; update yh set money=money+600 where name=&#x27;张三&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#事务回滚</span><br><span class="line">mysql&gt; rollback;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line">#查看帐户</span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 0     |</span><br><span class="line">| 2  | 李四 | 2000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、事务自动提交"><a href="#三、事务自动提交" class="headerlink" title="三、事务自动提交"></a>三、事务自动提交</h2><p>MySQL 默认每一条 DML(增删改)语句都是一个单独的事务，每条语句都会自动开启一个事务，语句执行完毕自动提交事务，MySQL 默认开始自动提交事务。</p>
<p>如：</p>
<p>事务开始-&gt;update&#x2F;delete&#x2F;insert into-&gt;事务提交</p>
<h3 id="3-1、自动提交事务"><a href="#3-1、自动提交事务" class="headerlink" title="3.1、自动提交事务"></a>3.1、自动提交事务</h3><p><strong>案例：</strong></p>
<p>自动事务提交：往张三的帐户里存入1000元，目前数据库数据如下：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519053659.png" alt="image20200215233931488.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update yh set money=money+1000 where name=&#x27;张三&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 2000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、取消自动提交"><a href="#3-2、取消自动提交" class="headerlink" title="3.2、取消自动提交"></a>3.2、取消自动提交</h3><p>查看 MySQL 是否开启自动提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select @@autocommit;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>@@表示全局变量，1 表示开启，0 表示关闭</p>
<p>取消自动提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">set autocommit=0;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select @@autocommit;</span><br><span class="line">+--------------+</span><br><span class="line">| @@autocommit |</span><br><span class="line">+--------------+</span><br><span class="line">| 1            |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; set autocommit=0;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@autocommit;</span><br><span class="line">+--------------+</span><br><span class="line">| @@autocommit |</span><br><span class="line">+--------------+</span><br><span class="line">| 0            |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>从李四的帐户取出1000元，目前数据库数据如下：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519068528.png" alt="image20200215234548334.png"></p>
<p><strong>注意：</strong></p>
<p>要在窗口A、窗口B中验证</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#窗口A</span><br><span class="line">mysql&gt; update yh set money=money-1000 where name=&#x27;李四&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">#在窗口B中查询银行帐户(第一次验证)</span><br><span class="line"></span><br><span class="line">#提交</span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.10 秒)</span><br><span class="line"></span><br><span class="line">#在窗口B中查询银行帐户(第二次验证)</span><br></pre></td></tr></table></figure>

<p>在打开一个窗口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#窗口B</span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 2000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="4、事务原理"><a href="#4、事务原理" class="headerlink" title="4、事务原理"></a>4、事务原理</h2><p>一个事务会涉及到大量的cpu计算和IO操作，这些操作被打包成一个执行单元,要么同时都完成，要么同时都不完成。</p>
<h3 id="4-1、自动提交原理图"><a href="#4-1、自动提交原理图" class="headerlink" title="4.1、自动提交原理图"></a>4.1、自动提交原理图</h3><p>如果没有显示启动事务,数据库会根据autocommit的值.默认每条sql操作都会自动提交。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519086079.png" alt="image20200218000643813.png"></p>
<h3 id="4-2、手动提交原理图"><a href="#4-2、手动提交原理图" class="headerlink" title="4.2、手动提交原理图"></a>4.2、手动提交原理图</h3><p>如果开启了事务，其中有任何一条语句因为崩溃或者其它原因无法执行，那么该组中所有的sql语句都不会执行。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519101214.png" alt="image20200218001646389.png"></p>
<h3 id="4-3、事务提交步骤"><a href="#4-3、事务提交步骤" class="headerlink" title="4.3、事务提交步骤"></a>4.3、事务提交步骤</h3><p>客户端连接上服务器端，创建连接同时创建当前用户的临时事务日志文件。</p>
<p>开启事务，改变原有的操作机制（所有的操作都会先写入临时日志文件）。</p>
<p>写入SQL，接收并执行SQL，所有的SQL操作都会写入临时文件；返回数据时，从数据库表拿取数据，但要通过临时日志文件加工在返回。</p>
<p>事务的提交或回滚，提交：同步临时日志文件中的SQL操作结果到数据库表；回滚：清除临时日志文件</p>
<h2 id="5、事务回滚"><a href="#5、事务回滚" class="headerlink" title="5、事务回滚"></a>5、事务回滚</h2><p>我们可以在mysql事务处理过程中定义保存点(SAVEPOINT)，然后回滚到指定的保存点前的状态。</p>
<p>定义保存点，以及回滚到指定保存点前状态的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">savepoint 保存点名; #定义保存点</span><br><span class="line">rollback to savepoint 保存点名;  #回滚到指定保存点</span><br><span class="line">或</span><br><span class="line">rollback to 保存点名;</span><br></pre></td></tr></table></figure>

<p><strong>数据表准备</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#创建一个管理员表</span><br><span class="line">create table manager(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  uname varchar(20),</span><br><span class="line">  pword varchar(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#插入数据</span><br><span class="line">insert into manager(uname,pword) values(&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;),(&#x27;lisi&#x27;,&#x27;lisi&#x27;);</span><br><span class="line"></span><br><span class="line">#插入数据</span><br><span class="line">insert into manager(uname,pword) values(&#x27;wangwu&#x27;,&#x27;wangwu&#x27;),(&#x27;zhaoliu&#x27;,&#x27;zhaoliu&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>开启事务</p>
<p>向表中插入二条件记录</p>
<p>设置保存点，保存点的名字为：insert_point</p>
<p>向表中插入二条件记录</p>
<p>回到保存点：insert_point</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into manager(uname,pword) values(&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;),(&#x27;lisi&#x27;,&#x27;lisi&#x27;);</span><br><span class="line">Query OK, 2 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from manager;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | uname    | pword    |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| 1  | zhangsan | zhangsan |</span><br><span class="line">| 2  | lisi     | lisi     |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; savepoint insert_point;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into manager(uname,pword) values(&#x27;wangwu&#x27;,&#x27;wangwu&#x27;),(&#x27;zhaoliu&#x27;,&#x27;zhaoliu&#x27;);</span><br><span class="line">Query OK, 2 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from manager;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | uname    | pword    |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| 1  | zhangsan | zhangsan |</span><br><span class="line">| 2  | lisi     | lisi     |</span><br><span class="line">| 3  | wangwu   | wangwu   |</span><br><span class="line">| 4  | zhaoliu  | zhaoliu  |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; rollback to savepoint insert_point;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from manager;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | uname    | pword    |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| 1  | zhangsan | zhangsan |</span><br><span class="line">| 2  | lisi     | lisi     |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>设置保存点可以让我们在失败的时候回到保存点，而不是回到事务开启的时候。</p>
<h2 id="六、事务隔离级别"><a href="#六、事务隔离级别" class="headerlink" title="六、事务隔离级别"></a>六、事务隔离级别</h2><h3 id="6-1、事务特性"><a href="#6-1、事务特性" class="headerlink" title="6.1、事务特性"></a>6.1、事务特性</h3><p><strong>原子性（Atomicity）：</strong> 事务内的操作要嘛全部完成，要嘛全部回滚。</p>
<p><strong>一致性(Consistency)：</strong> 事务执行的前后都是合法的数据状态，不会违反任何的数据完整性。</p>
<p><strong>隔离性（Isolation）:</strong> 主要是事务之间的相互的影响，根据隔离有不同的影响效果。</p>
<p><strong>持久性（Durability）：</strong> 事务一旦提交，就会体现在数据库上，不能回滚。</p>
<h3 id="6-2、事务的并发问题"><a href="#6-2、事务的并发问题" class="headerlink" title="6.2、事务的并发问题"></a>6.2、事务的并发问题</h3><p><strong>脏读：</strong> 比如事务A执行的过程中，读到了事务B未提交的内容。</p>
<p><strong>不可重复读：</strong> 指一个事务在前后两次查询的结果不一致。</p>
<p><strong>幻读：</strong> 幻读是指前后两次相同条件下的查询，后一次查询读到了前一次查询没有的行数据。</p>
<h3 id="6-3、事务的隔离级别"><a href="#6-3、事务的隔离级别" class="headerlink" title="6.3、事务的隔离级别"></a>6.3、事务的隔离级别</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519132024.png" alt="image20200218012806058.png"></p>
<p>注意：</p>
<p>隔离级别越高，性能越差，安全性越高。</p>
<h3 id="6-4、事务隔离命令"><a href="#6-4、事务隔离命令" class="headerlink" title="6.4、事务隔离命令"></a>6.4、事务隔离命令</h3><p>查看隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#格式：</span><br><span class="line">select @@transaction_isolation;</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>设置隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#格式：</span><br><span class="line">set global transaction_isolation=级别字符串</span><br><span class="line"></span><br><span class="line">mysql&gt; set global transaction_isolation=&#x27;read-committed&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>重启客户端，查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-COMMITTED          |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="7、脏读"><a href="#7、脏读" class="headerlink" title="7、脏读"></a>7、脏读</h2><h3 id="7-1、设置隔离级别"><a href="#7-1、设置隔离级别" class="headerlink" title="7.1、设置隔离级别"></a>7.1、设置隔离级别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;read-uncommitted&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-UNCOMMITTED        |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="7-2、脏读"><a href="#7-2、脏读" class="headerlink" title="7.2、脏读"></a>7.2、脏读</h3><p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519178063.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，转帐操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update yh set money=money-500 where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; update yh set money=money+500 where id=2;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户，钱已经到帐</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 500   |</span><br><span class="line">| 2  | 李四 | 1500  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行回滚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; rollback;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户，钱不见了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>脏读是比较危险的事情，如果张三在李四那里买了一个汽球花了500元，那么张三转帐给李四后，李四发货给张三，张三收到货物后把事务回滚，这样李四再也没有看到钱。</p>
<p><strong>要解决脏读的问题我们要提高隔离级别？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;read-committed&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-COMMITTED        |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，转帐操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update yh set money=money-500 where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; update yh set money=money+500 where id=2;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户，帐户没有变化</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，事务提交</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户，钱到帐了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 500   |</span><br><span class="line">| 2  | 李四 | 1500  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>这样我们就解决了脏读的问题，提高我们的隔离级别。</p>
<h2 id="八、不可重复读"><a href="#八、不可重复读" class="headerlink" title="八、不可重复读"></a>八、不可重复读</h2><h3 id="8-1、设置隔离级别"><a href="#8-1、设置隔离级别" class="headerlink" title="8.1、设置隔离级别"></a>8.1、设置隔离级别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;read-committed&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-COMMITTED        |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="8-2、不可重复读"><a href="#8-2、不可重复读" class="headerlink" title="8.2、不可重复读"></a>8.2、不可重复读</h3><p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000   |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里更新数据，并提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update yh set money=money+500 where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里在次执行，查看帐户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1500  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>看着这二个数据本身觉得没有什么问题，如果这二次的数据分别是显示在银行职员的显示器上和发送给客户，那么银行的工作人员都不知道以什么为准了。</p>
<p><strong>要解决不可重复读的问题我们要提高隔离级别？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;repeatable-read&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000   |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里更新数据，并提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update yh set money=money+500 where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里在次执行，查看帐户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>这样我们就解决了不可重复读的问题，提高我们的隔离级别。</p>
<h2 id="九、幻读"><a href="#九、幻读" class="headerlink" title="九、幻读"></a>九、幻读</h2><h3 id="9-1、设置隔离级别"><a href="#9-1、设置隔离级别" class="headerlink" title="9.1、设置隔离级别"></a>9.1、设置隔离级别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;repeatable-read&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="9-2、幻读"><a href="#9-2、幻读" class="headerlink" title="9.2、幻读"></a>9.2、幻读</h3><p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，查询ID为3的帐户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh where id=3;</span><br><span class="line">空的数据集 (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查询ID为3的帐户，没有就添加记录，并提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh where id=3;</span><br><span class="line">空的数据集 (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into yh values(3,&#x27;王五&#x27;,1000);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1500  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">| 3  | 王五 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.09 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，添加id为3的帐户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into yh values(3,&#x27;王五&#x27;,1000);</span><br><span class="line">Duplicate entry &#x27;3&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1500  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>我们在A窗口中看不到新加人员的王五信息，但是我们想自己增加王五的信息也无加入的我们的数据库，这就是幻读。</p>
<p><strong>要解决幻读的问题我们要提高隔离级别？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;serializable&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| SERIALIZABLE            |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，查询ID为3的帐户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh where id=3;</span><br><span class="line">空的数据集 (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查询ID为3的帐户，没有就添加记录，并提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from yh where id=3;</span><br><span class="line">空的数据集 (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into yh values(3,&#x27;王五&#x27;，1000);</span><br><span class="line">|  #光标闪烁，不能执行下去</span><br></pre></td></tr></table></figure>

<p>这样我们就解决了幻读的问题，提高我们了融离级别。</p>
<h1 id="MySQL视图"><a href="#MySQL视图" class="headerlink" title="MySQL视图"></a>MySQL视图</h1><p> 阅读 (210827) </p>
<p> 分享</p>
<p>视图是指计算机数据库中的视图，是一个虚拟表，其内容由查询定义。同真实的表一样，视图包含一系列带有名称的列和行数据。但是，视图并不在数据库中以存储的数据值集形式存在。行和列数据来自由定义视图的查询所引用的表，并且在引用视图时动态生成。</p>
<h2 id="一、视图概述"><a href="#一、视图概述" class="headerlink" title="一、视图概述"></a>一、视图概述</h2><h3 id="1-1、什么是视图"><a href="#1-1、什么是视图" class="headerlink" title="1.1、什么是视图"></a>1.1、什么是视图</h3><p>在 SQL 中，视图是基于 SQL 语句的结果集的可视化的表。</p>
<p>视图包含行和列，就像一个真实的表。视图中的字段就是来自一个或多个数据库中的真实的表中的字段。我们可以向视图添加 SQL 函数、WHERE 以及 JOIN 语句，我们也可以提交数据，就像这些来自于某个单一的表。</p>
<p><strong>注意：</strong></p>
<p>数据库的设计和结构不会受到视图中的函数、where 或 join 语句的影响。</p>
<h3 id="1-2、视图的作用"><a href="#1-2、视图的作用" class="headerlink" title="1.2、视图的作用"></a>1.2、视图的作用</h3><p>重复利用SQL语句</p>
<p>简化SQL查询，快速取数据</p>
<p>只用知道表的部分结构</p>
<p>保护数据，根据特定授权</p>
<p>更改数据格式和表示，视图可返回与底层表的表示和格式不同的数据</p>
<p><strong>注意：</strong><br>在视图创建后，可以用与表基本相同的方式使用（查询、过滤、排序数据、与其他视图或连结、（添加、更新））。</p>
<p>视图只是用来查看存储在别处的数据的设施，本身不包含数据，返回的数据也是从其他表检索出来的。</p>
<p>因为视图本身不包含数据，索引多个表连结或嵌套可能存在性能问题，需测试。</p>
<h3 id="1-3、视图规则和限制"><a href="#1-3、视图规则和限制" class="headerlink" title="1.3、视图规则和限制"></a>1.3、视图规则和限制</h3><p>与表一样，命名必须是唯一的(不能出现同名视图或表名)。</p>
<p>创建视图数目无限制，但是要考虑复杂查询创建为视图之后的性能影响。</p>
<p>视图不能添加索引，也不能有关联的触发器或者默认值。</p>
<p>视图可以提高安全性，必须具有足够的访问权限。</p>
<p>order by可用在视图中，但是如果从该视图检索数据select中含有order by ，那么该视图中的order by将被覆盖。</p>
<p>视图可以和表一起使用。</p>
<h3 id="1-4、视图的应用"><a href="#1-4、视图的应用" class="headerlink" title="1.4、视图的应用"></a>1.4、视图的应用</h3><p><strong>权限控制时使用</strong></p>
<p>如某几个列，允许用户查询，其他列不允许查询</p>
<p>可以通过视图，开放其中几列查询，起到权限控制作用</p>
<p><strong>简化复杂查询时使用</strong></p>
<p>查询每个栏目下商品的平均价格，并按平均价格排序，查询出平均价格前3的栏目</p>
<p><strong>视图能不能更新，删除，添加</strong></p>
<p>如果视图的每一行，是与物理表一一对应的则可以</p>
<p>视图的行是由物理表多行经过计算得到的结果，视图不可以更新的</p>
<h2 id="二、视图创建"><a href="#二、视图创建" class="headerlink" title="二、视图创建"></a>二、视图创建</h2><h3 id="2-1、创建格式"><a href="#2-1、创建格式" class="headerlink" title="2.1、创建格式"></a>2.1、创建格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create view  视图名  as  select 字段名 from 表名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>创建一个视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create view s_view as (select sname,sex,age from students);</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+------+------+</span><br><span class="line">| sname  | sex  | age  |</span><br><span class="line">+--------+------+------+</span><br><span class="line">| 张三   | 男   |   19 |</span><br><span class="line">| 李四   | 男   |   20 |</span><br><span class="line">| 张红   | 女   |   19 |</span><br><span class="line">| 张八   | 男   |   18 |</span><br><span class="line">| 三李   | 男   |   19 |</span><br><span class="line">| 王六   | 女   |   20 |</span><br><span class="line">| 刘红   | 女   |   18 |</span><br><span class="line">+--------+------+------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、视图的运算规则"><a href="#2-2、视图的运算规则" class="headerlink" title="2.2、视图的运算规则"></a>2.2、视图的运算规则</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create [algorithm = &#123;undefined | merge | temptable&#125;] view  视图名  as  select 字段名 from 表名;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>ALGORITHM ： 视图算法</p>
<p>undefined 系统自动选择算法</p>
<p>merge 当使用视图时，会把查询视图的语句和创建视图的语句合并起来，形成一条件一句，最后再从基表中查询</p>
<p>temptable 当使用视图时，会把创建视图的语句的查询结果当成一张临时表，再从临时表中进行筛选</p>
<p><strong>案例：</strong></p>
<p>用temptable创建视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create algorithm=temptable view view_t as select sname,sex,english,math from students order by math,english desc;</span><br><span class="line">Query OK, 0 rows affected (0.03 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from view_t;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 王六 | 女  | 50.0    | 70.0 |</span><br><span class="line">| 张红 | 女  | 86.0    | 80.0 |</span><br><span class="line">| 张八 | 男  | 80.0    | 85.0 |</span><br><span class="line">| 张三 | 男  | 98.5    | 88.0 |</span><br><span class="line">| 李四 | 男  | 80.0    | 88.0 |</span><br><span class="line">| 三李 | 男  | 60.0    | 88.0 |</span><br><span class="line">| 刘红 | 女  | 90.0    | 98.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">8 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from view_t group by sex;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 王六 | 女  | 50.0    | 70.0 |</span><br><span class="line">| 张八 | 男  | 80.0    | 85.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>用merge创建视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create algorithm=merge view view_m as select sname,sex,english,math from students order by math,english desc;</span><br><span class="line">Query OK, 0 rows affected (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from view_m;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 王六 | 女  | 50.0    | 70.0 |</span><br><span class="line">| 张红 | 女  | 86.0    | 80.0 |</span><br><span class="line">| 张八 | 男  | 80.0    | 85.0 |</span><br><span class="line">| 张三 | 男  | 98.5    | 88.0 |</span><br><span class="line">| 李四 | 男  | 80.0    | 88.0 |</span><br><span class="line">| 三李 | 男  | 60.0    | 88.0 |</span><br><span class="line">| 刘红 | 女  | 90.0    | 98.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">8 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from view_m group by sex;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 张三 | 男  | 98.5    | 88.0 |</span><br><span class="line">| 张红 | 女  | 86.0    | 80.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line">#查询视图的语句和创建视图的语句合并起来，形成一条件一句，最后再从基表中查询</span><br><span class="line">mysql&gt; select sname,sex,english,math from students group by sex order by math,english desc;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 张红 | 女  | 86.0    | 80.0 |</span><br><span class="line">| 张三 | 男  | 98.5    | 88.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-3、视图的权限范围"><a href="#2-3、视图的权限范围" class="headerlink" title="2.3、视图的权限范围"></a>2.3、视图的权限范围</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">[with [cascaded | local ] check option] </span><br></pre></td></tr></table></figure>

<p>WITH CHECK OPTION 表示对UPDATE、INSERT和DELETE操作时保持更新，插入或删除的行满足视图定义的条件（即子查询中的条件表达式）</p>
<p><strong>注意：</strong></p>
<p>cascaded 默认值 更新视图时要满足所有相关视图和表的条件。</p>
<p>local 表示更新视图时满足该视图本身定义的条件即可。</p>
<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create view view_1 as select sid,sname,sex,age from students where sid&lt;6;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; create view view_1_1 as select * from view_1 where sid&gt;2 with cascaded check option;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; create view view_1_2 as select * from view_1 where sid&gt;2 with local check option;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into view_1_1 values(6,&#x27;lisi&#x27;,&#x27;男&#x27;,20);</span><br><span class="line">CHECK OPTION failed &#x27;zutuanxue.view_1_1&#x27;</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into view_1_2 values(6,&#x27;lisi&#x27;,&#x27;男&#x27;,20);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-4、视图记录修改"><a href="#2-4、视图记录修改" class="headerlink" title="2.4、视图记录修改"></a>2.4、视图记录修改</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">update 数据库表名 set 字段名1=字段值1,字段名2=字段值2,...字段名n=字段值n where 条件表达式; #和表的修改一样</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>修改视图中王六的性别为‘男’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update s_view set sex=&#x27;男&#x27; where sname=&#x27;王六&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+------+------+</span><br><span class="line">| sname  | sex  | age  |</span><br><span class="line">+--------+------+------+</span><br><span class="line">| 张三   | 男   |   19 |</span><br><span class="line">| 李四   | 男   |   20 |</span><br><span class="line">| 张红   | 女   |   19 |</span><br><span class="line">| 张八   | 男   |   18 |</span><br><span class="line">| 三李   | 男   |   19 |</span><br><span class="line">| 王六   | 男   |   20 |</span><br><span class="line">| 刘红   | 女   |   18 |</span><br><span class="line">+--------+------+------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>修改了视图，对基表数据也有影响</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from students;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">|    1 | 张三   | 男   |   19 |    98.5 | 88.0 | 2017-09-01 | 他来自四川      |</span><br><span class="line">|    2 | 李四   | 男   |   20 |    80.0 | 88.0 | 2017-09-01 | 他来自重庆      |</span><br><span class="line">|    3 | 张红   | 女   |   19 |    86.0 | 80.0 | 2017-09-01 | 他来自北京      |</span><br><span class="line">|    4 | 张八   | 男   |   18 |    80.0 | 85.0 | 2017-09-01 | 他来自天津      |</span><br><span class="line">|    5 | 三李   | 男   |   19 |    60.0 | 88.0 | 2017-09-01 | 他来自湖北      |</span><br><span class="line">|    6 | 王六   | 男   |   20 |    50.0 | 70.0 | 2017-09-01 | 他来自湖南      |</span><br><span class="line">|    7 | 刘红   | 女   |   18 |    90.0 | 98.0 | 2017-09-01 | 他来自甘肃      |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>修改students表中王六的年龄为21</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update students set age=21 where sname=&#x27;王六&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+------+------+</span><br><span class="line">| sname  | sex  | age  |</span><br><span class="line">+--------+------+------+</span><br><span class="line">| 张三   | 男   |   19 |</span><br><span class="line">| 李四   | 男   |   20 |</span><br><span class="line">| 张红   | 女   |   19 |</span><br><span class="line">| 张八   | 男   |   18 |</span><br><span class="line">| 三李   | 男   |   19 |</span><br><span class="line">| 王六   | 男   |   21 |</span><br><span class="line">| 刘红   | 女   |   18 |</span><br><span class="line">+--------+------+------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="三、视图修改"><a href="#三、视图修改" class="headerlink" title="三、视图修改"></a>三、视图修改</h2><h3 id="3-1、修改格式"><a href="#3-1、修改格式" class="headerlink" title="3.1、修改格式"></a>3.1、修改格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter view 视图名称 as select 语句;</span><br><span class="line">或</span><br><span class="line">alter view 视图名称 as select 视图;</span><br><span class="line">或</span><br><span class="line">create or replace view  视图名  as  select 字段名 from 表名;</span><br></pre></td></tr></table></figure>

<h3 id="3-2、select-语句-修改"><a href="#3-2、select-语句-修改" class="headerlink" title="3.2、select 语句 修改"></a>3.2、select 语句 修改</h3><p><strong>案例：</strong></p>
<p>修改我们的s_view视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter view s_view as select sname,sex,age,remark from students;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+------+------+-----------------+</span><br><span class="line">| sname  | sex  | age  | remark          |</span><br><span class="line">+--------+------+------+-----------------+</span><br><span class="line">| 张三   | 男   |   19 | 他来自四川      |</span><br><span class="line">| 李四   | 男   |   20 | 他来自重庆      |</span><br><span class="line">| 张红   | 女   |   19 | 他来自北京      |</span><br><span class="line">| 张八   | 男   |   18 | 他来自天津      |</span><br><span class="line">| 三李   | 男   |   19 | 他来自湖北      |</span><br><span class="line">| 王六   | 女   |   20 | 他来自湖南      |</span><br><span class="line">| 刘红   | 女   |   18 | 他来自甘肃      |</span><br><span class="line">+--------+------+------+-----------------+</span><br><span class="line">8 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、select-视图-修改"><a href="#3-3、select-视图-修改" class="headerlink" title="3.3、select 视图 修改"></a>3.3、select 视图 修改</h3><p><strong>案例：</strong></p>
<p>修改我们的s_view视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create view s_view_1 as(select sname,sex,age,remark from students);</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; alter view s_view as select sname,remark from s_view_1;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+-----------------+</span><br><span class="line">| sname  | remark          |</span><br><span class="line">+--------+-----------------+</span><br><span class="line">| 张三   | 他来自四川      |</span><br><span class="line">| 李四   | 他来自重庆      |</span><br><span class="line">| 张红   | 他来自北京      |</span><br><span class="line">| 张八   | 他来自天津      |</span><br><span class="line">| 三李   | 他来自湖北      |</span><br><span class="line">| 王六   | 他来自湖南      |</span><br><span class="line">| 刘红   | 他来自甘肃      |</span><br><span class="line">+--------+-----------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="3-4、create-or-replace"><a href="#3-4、create-or-replace" class="headerlink" title="3.4、create or replace"></a>3.4、create or replace</h3><p><strong>案例：</strong></p>
<p>修改我们的s_view视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create or replace view  s_view as select sname from students;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+</span><br><span class="line">| sname  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三   |</span><br><span class="line">| 李四   |</span><br><span class="line">| 张红   |</span><br><span class="line">| 张八   |</span><br><span class="line">| 三李   |</span><br><span class="line">| 王六   |</span><br><span class="line">| 刘红   |</span><br><span class="line">+--------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="四、视图查看"><a href="#四、视图查看" class="headerlink" title="四、视图查看"></a>四、视图查看</h2><h3 id="4-1、显示视图创建情况"><a href="#4-1、显示视图创建情况" class="headerlink" title="4.1、显示视图创建情况"></a>4.1、显示视图创建情况</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show create view 视图名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show create view s_view;</span><br><span class="line">+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+</span><br><span class="line">| View   | Create View                                                                                                                                                                      | character_set_client | collation_connection |</span><br><span class="line">+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+</span><br><span class="line">| s_view | CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `s_view` AS select `s_view_1`.`sname` AS `sname`,`s_view_1`.`remark` AS `remark` from `s_view_1` | utf8mb4              | utf8mb4_0900_ai_ci   |</span><br><span class="line">+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="4-2、查看视图"><a href="#4-2、查看视图" class="headerlink" title="4.2、查看视图"></a>4.2、查看视图</h3><h3 id="4-2-1、查看视图结构"><a href="#4-2-1、查看视图结构" class="headerlink" title="4.2.1、查看视图结构"></a>4.2.1、查看视图结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">desc 视图名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看视图s_view结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc s_view;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| sname | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">1 row in set (0.02 sec)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2、查看数据库中的视图"><a href="#4-2-2、查看数据库中的视图" class="headerlink" title="4.2.2、查看数据库中的视图"></a>4.2.2、查看数据库中的视图</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show tables [like %字符串%];</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>查看数据库中所有视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">+--------------------+</span><br><span class="line">| Tables_in_zutuanxue |</span><br><span class="line">+--------------------+</span><br><span class="line">| classes            |</span><br><span class="line">| new_user           |</span><br><span class="line">| s_view             |</span><br><span class="line">| s_view_1           |</span><br><span class="line">| stu                |</span><br><span class="line">| student            |</span><br><span class="line">| students           |</span><br><span class="line">| t1                 |</span><br><span class="line">| t2                 |</span><br><span class="line">| t3                 |</span><br><span class="line">| t4                 |</span><br><span class="line">| t5                 |</span><br><span class="line">| t6                 |</span><br><span class="line">| teacher            |</span><br><span class="line">| user               |</span><br><span class="line">+--------------------+</span><br><span class="line">15 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables like &#x27;%view%&#x27;;</span><br><span class="line">+-----------------------------+</span><br><span class="line">| Tables_in_zutuanxue (%view%) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| s_view                      |</span><br><span class="line">| s_view_1                    |</span><br><span class="line">+-----------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="五、视图删除及重命名"><a href="#五、视图删除及重命名" class="headerlink" title="五、视图删除及重命名"></a>五、视图删除及重命名</h2><h3 id="5-1、视图删除"><a href="#5-1、视图删除" class="headerlink" title="5.1、视图删除"></a>5.1、视图删除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop view 视图列表;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>删除视图s_view_1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop view s_view_1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables like &#x27;%view%&#x27;;</span><br><span class="line">+-----------------------------+</span><br><span class="line">| Tables_in_zutuanxue (%view%) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| s_view                      |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="5-2、视图重命名"><a href="#5-2、视图重命名" class="headerlink" title="5.2、视图重命名"></a>5.2、视图重命名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">rename table 视图名 to 新视图名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>修改视图s_view的名字为view_s</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; rename table s_view to view_s;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables like &#x27;%view%&#x27;;</span><br><span class="line">+-----------------------------+</span><br><span class="line">| Tables_in_zutuanxue (%view%) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| view_s                      |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL-索引"><a href="#MySQL-索引" class="headerlink" title="MySQL 索引"></a>MySQL 索引</h1><p> 阅读 (219855) </p>
<p> 分享</p>
<p>在关系数据库中，索引是一种单独的、物理的对数据库表中一列或多列的值进行排序的一种存储结构，它是某个表中一列或若干列值的集合和相应的指向表中物理标识这些值的数据页的逻辑指针清单。索引的作用相当于图书的目录，可以根据目录中的页码快速找到所需的内容。</p>
<h2 id="一、索引概述"><a href="#一、索引概述" class="headerlink" title="一、索引概述"></a>一、索引概述</h2><h3 id="1-1、什么是索引"><a href="#1-1、什么是索引" class="headerlink" title="1.1、什么是索引"></a>1.1、什么是索引</h3><p>索引是用于快速找出在某个列中拥有特定值的行。</p>
<p>如果没有索引，MySQL必须从第一条记录开始读完整个表，直到找出相关的行，表越大，查询数据所花费的时间就越多。</p>
<p>如果拥有索引，MySQL能够快速到达一个位置去搜索数据文件，而不必查看所有数据，那么将会节省很大一部分时间。</p>
<h3 id="1-2、为什么建立索引"><a href="#1-2、为什么建立索引" class="headerlink" title="1.2、为什么建立索引"></a>1.2、为什么建立索引</h3><p>如果有一张产品表，记录着4W产品的信息。有一个品牌的字段记录产品的品牌，现在想要查询出这个品牌的产品。</p>
<p>如果没有索引，那么将从表中第一条记录一条条往下遍历，直到找到该条信息为止。</p>
<p>如果拥有索引，那么会将该品牌字段，通过一定的方法进行存储，好让查询该字段上的信息时，能够快速找到对应的数据，而不必在遍历4W条产品数据。</p>
<h3 id="1-3、索引存储分类"><a href="#1-3、索引存储分类" class="headerlink" title="1.3、索引存储分类"></a>1.3、索引存储分类</h3><p>其中MySQL中的索引的存储类型有两种：BTREE、HASH。要想知道在这二种存储类型中是如何查找的，那么就必须学会算法的知识，对于现在的我们只需要了解索引的作用及功能就好了。</p>
<h3 id="1-4、索引优缺点"><a href="#1-4、索引优缺点" class="headerlink" title="1.4、索引优缺点"></a>1.4、索引优缺点</h3><p><strong>优点：</strong></p>
<p>所有的字段都可以被索引，也就是可以给任意字段设置索引</p>
<p>加快数据的查询速度</p>
<p><strong>缺点：</strong></p>
<p>创建索引和维护索引要耗费时间</p>
<p>数据量的增加，所耗费的时间也会增加</p>
<p>索引也需要占空间，如果我们的索引量越来越大的话，那么索引文件可能达到我们数据的最大线值</p>
<p>表中数据发生变化时，索引也需要动态维护，降低数据维护效率</p>
<h3 id="1-5、索引的使用原则"><a href="#1-5、索引的使用原则" class="headerlink" title="1.5、索引的使用原则"></a>1.5、索引的使用原则</h3><p>通过上面说的优点和缺点，我们可以看出，索引并不是越多越好，而是需要自己合理的使用。那么那些表应该去使用索引呢？</p>
<p><strong>避免使用过多索引：</strong> 经常更新的表、数据量小的表、相同值少的字段上等</p>
<p><strong>使用索引：</strong> 经常查询的表、不同值较多的字段上等</p>
<p>一个表中很够创建多个索引，这些索引会被存放到一个索引文件中(专门存放索引的地方)</p>
<h2 id="二、索引类型"><a href="#二、索引类型" class="headerlink" title="二、索引类型"></a>二、索引类型</h2><p>索引是在存储引擎中实现的，也就是说不同的存储引擎，会使用不同的索引。</p>
<p>MyISAM和InnoDB存储引擎：只支持BTREE索引， 也就是说默认使用BTREE</p>
<p>MEMORY&#x2F;HEAP存储引擎：支持HASH和BTREE索引</p>
<p>MySQL目前主要有以下几种索引类型：</p>
<p>单列索引（普通索引、唯一索引、主键索引）</p>
<p>组合索引</p>
<p>全文索引</p>
<p>空间索引</p>
<h3 id="2-1、单列索引-普通索引"><a href="#2-1、单列索引-普通索引" class="headerlink" title="2.1、单列索引-普通索引"></a>2.1、单列索引-普通索引</h3><p>MySQL中普通索引并没有什么限制，纯粹为了查询数据更快一点。</p>
<p>可以在定义索引的字段中插入重复值和空值</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  index/key 索引名(字段名(长度))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">create table book(</span><br><span class="line">  bid int primary key auto_increment,</span><br><span class="line">  bname varchar(200),</span><br><span class="line">  bcbs varchar(200),</span><br><span class="line">  index(bname)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table book1(</span><br><span class="line">  bid int primary key auto_increment,</span><br><span class="line">  bname varchar(200),</span><br><span class="line">  bcbs varchar(200),</span><br><span class="line">  key(bname)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table book;</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                                               |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| book  | CREATE TABLE `book` (</span><br><span class="line">  `bid` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `bname` varchar(200) DEFAULT NULL,</span><br><span class="line">  `bcbs` varchar(200) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`bid`),</span><br><span class="line">  KEY `bname` (`bname`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table book1;</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                                                |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| book1 | CREATE TABLE `book1` (</span><br><span class="line">  `bid` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `bname` varchar(200) DEFAULT NULL,</span><br><span class="line">  `bcbs` varchar(200) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`bid`),</span><br><span class="line">  KEY `bname` (`bname`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>测试查询：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from book where bname=&#x27;计算机&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519846736.png" alt="image20200217091133154.png"></p>
<p><strong>id：</strong> select识别符。这是select的查询序列号，也就是一条语句中，该select是第几次出现。比如：在这条语句中select只出现了1次。</p>
<p><strong>select_type：</strong> select查询类型。</p>
<p>simple：表示为简单的select，没有使用union或子查询，就是简单的select。</p>
<p>primary：表示最外面的select ，拥有子查询时，就会出现2次select。</p>
<p>union：表示第二层。在select 之后使用了 union</p>
<p>subquery：在子查询中，第二SELECT。</p>
<p><strong>table：</strong> 数据库表的名字。他们按被读取的先后顺序排列</p>
<p><strong>type：</strong> 指定本数据表和其他数据表之间的关联关系。</p>
<p><strong>ref：</strong> 就是连接程序无法根据键值只取得一条记录的情况。</p>
<p><strong>system：</strong> 表只有一行记录（等于系统表）。</p>
<p>可能的取值有 const、eq_ref、index和all等</p>
<p><strong>possible_keys：</strong> MySQL在搜索数据记录时可以选用的各个索引，该表中就只有一个索引，bname</p>
<p><strong>key：</strong> 实际选用的索引</p>
<p><strong>key_len：</strong> 显示了mysql使用索引的长度(也就是使用的索引个数)，当 key 字段的值为 null时，索引的长度就是 null。注意，key_len的值可以告诉你在联合索引中mysql会真正使用了哪些索引。</p>
<p><strong>ref：</strong> 给出关联关系中另一个数据表中数据列的名字。常量（const）</p>
<p><strong>rows：</strong> MySQL在执行这个查询时预计会从这个数据表里读出的记录条数。</p>
<p><strong>extra：</strong> 提供了与关联操作有关的信息，没有则什么都不写。</p>
<h3 id="2-2、单列索引-唯一索引"><a href="#2-2、单列索引-唯一索引" class="headerlink" title="2.2、单列索引-唯一索引"></a>2.2、单列索引-唯一索引</h3><p>唯一索引是索引列中的值必须是唯一的，允许为空值。在使用唯一索引时要加入记录。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  unique index 索引名(字段名(长度))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">create table book2(</span><br><span class="line">  bid int,</span><br><span class="line">  bname varchar(200),</span><br><span class="line">  bcbs varchar(200),</span><br><span class="line">  unique index unique_bid(bid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table book2;</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                        |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| book2 | CREATE TABLE `book2` (</span><br><span class="line">  `bid` int(11) DEFAULT NULL,</span><br><span class="line">  `bname` varchar(200) DEFAULT NULL,</span><br><span class="line">  `bcbs` varchar(200) DEFAULT NULL,</span><br><span class="line">  UNIQUE KEY `unique_bid` (`bid`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>测试查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from book2 where bid=1;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519903738.png" alt="image20200217092552395.png"></p>
<p><strong>注意：</strong></p>
<p>要查看其中查询使用的索引，必须先往表中插入数据，然后在查询数据，不然查找一个没有的bid值，是不会使用索引的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into book2 values(1,&#x27;计算机基础&#x27;,&#x27;清华出版社&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.06 秒)</span><br><span class="line">mysql&gt; explain select * from book2 where bid=1;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519921512.png" alt="image20200217092825869.png"></p>
<p>可以看到，通过id查询时，会使用唯一索引。并且还实验了查询一个没有的id值，则不会使用索引。</p>
<h3 id="2-3、单列索引-主键索引"><a href="#2-3、单列索引-主键索引" class="headerlink" title="2.3、单列索引-主键索引"></a>2.3、单列索引-主键索引</h3><p>是一种特殊的唯一索引，不允许有空值。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  primary key 索引名(字段名(长度))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">create table book3(</span><br><span class="line">  bid int,</span><br><span class="line">  bname varchar(200),</span><br><span class="line">  bcbs varchar(200),</span><br><span class="line">  primary key(bid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table book3;</span><br><span class="line">+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                        |</span><br><span class="line">+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| book3 | CREATE TABLE `book3` (</span><br><span class="line">  `bid` int(11) NOT NULL,</span><br><span class="line">  `bname` varchar(200) DEFAULT NULL,</span><br><span class="line">  `bcbs` varchar(200) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`bid`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>测试查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into book3 values(1,&#x27;计算机基础&#x27;,&#x27;清华出版社&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.12 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; explain select * from book3 where bid=1;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519985050.png" alt="image20200217093610423.png"></p>
<p>主键索引就是：我们以前声明的主键约束，就是一个主键索引。</p>
<h3 id="2-4、组合索引"><a href="#2-4、组合索引" class="headerlink" title="2.4、组合索引"></a>2.4、组合索引</h3><p>在表中的多个字段组合上创建的索引，只有在查询条件中使用了这些字段的左边字段时，索引才会被使用，使用组合索引时遵循最左前缀集合。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  index 索引名(字段名1(长度),字段名2(长度),...字段名n(长度))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">create table stu1(</span><br><span class="line">  sid int,</span><br><span class="line">  sname varchar(20),</span><br><span class="line">  age int,</span><br><span class="line">  sex varchar(2),</span><br><span class="line">  index index_sid_sname_age(sid,sname,age)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table stu1;</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                                                                 |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| stu1  | CREATE TABLE `stu1` (</span><br><span class="line">  `sid` int(11) DEFAULT NULL,</span><br><span class="line">  `sname` varchar(20) DEFAULT NULL,</span><br><span class="line">  `age` int(11) DEFAULT NULL,</span><br><span class="line">  `sex` varchar(2) DEFAULT NULL,</span><br><span class="line">  KEY `index_sid_sname_age` (`sid`,`sname`,`age`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>最左前缀</p>
<p>组合索引就是遵从了最左前缀，利用索引中最左边的列集来匹配行，这样的列集称为最左前缀。</p>
<p>例如，这里由sid、sname和age 3个字段构成的索引，索引行中就按sid&#x2F;sname&#x2F;age的顺序存放，索引可以索引下面字段组合(sid，sname，age)、（sid,age）、(sid，sname)或者(sid)。如果要查询的字段不构成索引最左面的前缀，那么就不会是用索引，比如，age或者（sname，age）组合就不会使用索引查询</p>
<p>测试查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from stu1 where sid=1 and sname=&quot;job&quot;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520015989.png" alt="image20200217095020128.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from stu1 where age=17 and sname=&quot;job&quot;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520032028.png" alt="image20200217095150193.png"></p>
<h3 id="2-5、全文索引"><a href="#2-5、全文索引" class="headerlink" title="2.5、全文索引"></a>2.5、全文索引</h3><p>全文索引，只有在MyISAM引擎上才能使用，只能在CHAR,VARCHAR,TEXT类型字段上使用全文索引。</p>
<p>全文索引，就是在一堆文字中，通过其中的某个关键字等，就能找到该字段所属的记录行。</p>
<p>比如：有学员的备注信息里有”成绩很好，是一个好学生” 通过“好学生”，可能就可以找到该条记录。这里说的是可能，因为全文索引的使用涉及了很多细节。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  fulltext index 索引名(字段名(长度))</span><br><span class="line">)ENGINE=MyISAM;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">create table stu2(</span><br><span class="line">  sid int,</span><br><span class="line">  sname varchar(20),</span><br><span class="line">  age int,</span><br><span class="line">  sex varchar(2),</span><br><span class="line">  info text,</span><br><span class="line">  fulltext index full_info(info)</span><br><span class="line">)ENGINE=MyISAM;</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table stu2;</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                                                                  |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| stu2  | CREATE TABLE `stu2` (</span><br><span class="line">  `sid` int(11) DEFAULT NULL,</span><br><span class="line">  `sname` varchar(20) DEFAULT NULL,</span><br><span class="line">  `age` int(11) DEFAULT NULL,</span><br><span class="line">  `sex` varchar(2) DEFAULT NULL,</span><br><span class="line">  `info` text,</span><br><span class="line">  FULLTEXT KEY `full_info` (`info`)</span><br><span class="line">) ENGINE=MyISAM DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>测试全文索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from stu2 where match(info) against(&#x27;好学生&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520068046.png" alt="image20200217100917184.png"></p>
<p><strong>注意：</strong></p>
<p>在使用全文搜索时，限制较多：</p>
<p>需要使用MATCH函数</p>
<p>只能通过MyISAM引擎</p>
<p>只能在CHAR,VARCHAR,TEXT上设置全文索引</p>
<p>搜索的关键字默认至少要4个字符，搜索的关键字太短就会被忽略掉</p>
<h3 id="2-6、空间索引"><a href="#2-6、空间索引" class="headerlink" title="2.6、空间索引"></a>2.6、空间索引</h3><p>空间索引是对空间数据类型的字段建立的索引。</p>
<p>MySQL中的空间数据类型有四种，GEOMETRY（几何类型）、POINT（点）、LINESTRING（线）、POLYGON（面）。在创建空间索引时，也要使用MyISAM引擎，创建空间索引的列也不能为null。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  spatial index 索引名(字段名(长度))</span><br><span class="line">)ENGINE = MyISAM;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">create table t(</span><br><span class="line">  g geometry not null,</span><br><span class="line">  spatial index s_g(g)</span><br><span class="line">)ENGINE = MyISAM;</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table t;</span><br><span class="line">+-------+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                               |</span><br><span class="line">+-------+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| t     | CREATE TABLE `t` (</span><br><span class="line">  `g` geometry NOT NULL,</span><br><span class="line">  SPATIAL KEY `s_g` (`g`)</span><br><span class="line">) ENGINE=MyISAM DEFAULT CHARSET=utf8 |</span><br><span class="line">+-------+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、索引操作"><a href="#三、索引操作" class="headerlink" title="三、索引操作"></a>三、索引操作</h2><h3 id="3-1、创建索引"><a href="#3-1、创建索引" class="headerlink" title="3.1、创建索引"></a>3.1、创建索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据表名 add [unique|fulltext|spatial] [index|key] [索引名][字段名][asc|desc]</span><br></pre></td></tr></table></figure>

<p>查看表中索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show index from 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show index from book2;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520109258.png" alt="image20200217104030561.png"></p>
<p>Table:创建索引的表</p>
<p>Non_unique：表示索引非唯一，1代表 非唯一索引， 0代表 唯一索引，意思就是该索引是不是唯一索引</p>
<p>Key_name：索引名称</p>
<p>Seq_in_index 表示该字段在索引中的位置，单列索引的话该值为1，组合索引为每个字段在索引定义中的顺序(这个只需要知道单列索引该值就为1，组合索引为别的)</p>
<p>Column_name：表示定义索引的列字段</p>
<p>Sub_part：表示索引的长度</p>
<p>Null：表示该字段是否能为空值</p>
<p>Index_type：表示索引类型</p>
<p>我们继续为book2加一个索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table book2 add index i_bname(bname);</span><br><span class="line">Query OK, 0 rows affected (0.07 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show index from book2;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520139013.png" alt="image20200217104438329.png"></p>
<h3 id="3-2、删除索引"><a href="#3-2、删除索引" class="headerlink" title="3.2、删除索引"></a>3.2、删除索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式一：</span><br><span class="line">alter table 数据库表名 drop index 索引名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除book2中的i_bname索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table book2 drop index i_bname;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show index from book2;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520161317.png" alt="image20200217112753060.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式二：</span><br><span class="line">drop index 索引名 on 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除book2中的unique_bid索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop index unique_bid on book2;</span><br><span class="line">Query OK, 0 rows affected (0.12 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show index from book2;</span><br><span class="line">空的数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL常用函数"><a href="#MySQL常用函数" class="headerlink" title="MySQL常用函数"></a>MySQL常用函数</h1><p> 阅读 (201484) </p>
<p> 分享</p>
<p>MySQL函数，是一种控制流程函数，属于数据库用语言。</p>
<p>MySQL数据库中提供了很丰富的函数。MySQL函数包括数学函数、字符串函数、日期和时间函数、条件判断函数、系统信息函数、加密函数、格式化函数等。通过这些函数，可以简化用户的操作。</p>
<h2 id="一、数学函数"><a href="#一、数学函数" class="headerlink" title="一、数学函数"></a>一、数学函数</h2><h3 id="1-1、函数概述"><a href="#1-1、函数概述" class="headerlink" title="1.1、函数概述"></a>1.1、函数概述</h3><p>MySQL函数是MySQL数据库提供的内部函数。这些内部函数可以帮助用户更加方便的处理表中的数据。</p>
<h3 id="1-2、数学函数概述"><a href="#1-2、数学函数概述" class="headerlink" title="1.2、数学函数概述"></a>1.2、数学函数概述</h3><p>数学函数是MySQL中常用的一类函数。主要用于处理数字，包括整型、浮点数等。</p>
<h3 id="1-3、常用数学函数"><a href="#1-3、常用数学函数" class="headerlink" title="1.3、常用数学函数"></a>1.3、常用数学函数</h3><h4 id="1-3-1、abs"><a href="#1-3-1、abs" class="headerlink" title="1.3.1、abs()"></a>1.3.1、abs()</h4><p>abs(X):返回X的绝对值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select abs(-32);</span><br><span class="line">+----------+</span><br><span class="line">| abs(-32) |</span><br><span class="line">+----------+</span><br><span class="line">| 32       |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2、mod"><a href="#1-3-2、mod" class="headerlink" title="1.3.2、mod()"></a>1.3.2、mod()</h4><p>MOD(N,M)或%:返回N被M除的余数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select mod(15,7);</span><br><span class="line">+-----------+</span><br><span class="line">| mod(15,7) |</span><br><span class="line">+-----------+</span><br><span class="line">| 1         |</span><br><span class="line">+-----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select 15%7;</span><br><span class="line">+------+</span><br><span class="line">| 15%7 |</span><br><span class="line">+------+</span><br><span class="line">| 1    |</span><br><span class="line">+------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-3、ceiling"><a href="#1-3-3、ceiling" class="headerlink" title="1.3.3、ceiling()"></a>1.3.3、ceiling()</h4><p>CEILING(X):返回不小于X的最小整数值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ceiling(1.23);</span><br><span class="line">+---------------+</span><br><span class="line">| ceiling(1.23) |</span><br><span class="line">+---------------+</span><br><span class="line">| 2             |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ceiling(-1.23);</span><br><span class="line">+----------------+</span><br><span class="line">| ceiling(-1.23) |</span><br><span class="line">+----------------+</span><br><span class="line">| -1             |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-4、round"><a href="#1-3-4、round" class="headerlink" title="1.3.4、round()"></a>1.3.4、round()</h4><p>ROUND(X) :返回参数X的四舍五入的一个整数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select round(3.58);</span><br><span class="line">+-------------+</span><br><span class="line">| round(3.58) |</span><br><span class="line">+-------------+</span><br><span class="line">| 4           |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select round(-3.58);</span><br><span class="line">+--------------+</span><br><span class="line">| round(-3.58) |</span><br><span class="line">+--------------+</span><br><span class="line">| -4           |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-5、pi"><a href="#1-3-5、pi" class="headerlink" title="1.3.5、pi()"></a>1.3.5、pi()</h4><p>PI()：返回圆周率π，默认显示6位小数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select pi();</span><br><span class="line">+----------+</span><br><span class="line">| pi()     |</span><br><span class="line">+----------+</span><br><span class="line">| 3.141593 |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-2-6、sqrt"><a href="#1-2-6、sqrt" class="headerlink" title="1.2.6、sqrt()"></a>1.2.6、sqrt()</h4><p>SQRT(x)：返回非负数的x的二次方根</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sqrt(16);</span><br><span class="line">+----------+</span><br><span class="line">| sqrt(16) |</span><br><span class="line">+----------+</span><br><span class="line">| 4        |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-7、ceil"><a href="#1-3-7、ceil" class="headerlink" title="1.3.7、ceil()"></a>1.3.7、ceil()</h4><p>CEIL(x)：返回不小于x的最小整数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ceil(1.3);</span><br><span class="line">+-----------+</span><br><span class="line">| ceil(1.3) |</span><br><span class="line">+-----------+</span><br><span class="line">| 2         |</span><br><span class="line">+-----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ceil(-1.3);</span><br><span class="line">+---------------+</span><br><span class="line">| ceiling(-1.3) |</span><br><span class="line">+---------------+</span><br><span class="line">| -1            |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-8、floor"><a href="#1-3-8、floor" class="headerlink" title="1.3.8、floor()"></a>1.3.8、floor()</h4><p>FLOOR(x)：返回不大于x的最大整数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select floor(1.3);</span><br><span class="line">+------------+</span><br><span class="line">| floor(1.3) |</span><br><span class="line">+------------+</span><br><span class="line">| 1          |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select floor(-1.3);</span><br><span class="line">+-------------+</span><br><span class="line">| floor(-1.3) |</span><br><span class="line">+-------------+</span><br><span class="line">| -2          |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-9、round"><a href="#1-3-9、round" class="headerlink" title="1.3.9、round()"></a>1.3.9、round()</h4><p>ROUND(x)、ROUND(x,y)</p>
<p>前者返回最接近于x的整数，即对x进行四舍五入；后者返回最接近x的数，其值保留到小数点后面y位，若y为负值，则将保留到x到小数点左边y位</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select round(1.3555);</span><br><span class="line">+---------------+</span><br><span class="line">| round(1.3555) |</span><br><span class="line">+---------------+</span><br><span class="line">| 1             |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select round(1.3555,2);</span><br><span class="line">+-----------------+</span><br><span class="line">| round(1.3555,2) |</span><br><span class="line">+-----------------+</span><br><span class="line">| 1.36            |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-10、sign"><a href="#1-3-10、sign" class="headerlink" title="1.3.10、sign()"></a>1.3.10、sign()</h4><p>SIGN(x):返回参数x的符号，-1表示负数，0表示0，1表示正数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sign(5);</span><br><span class="line">+---------+</span><br><span class="line">| sign(5) |</span><br><span class="line">+---------+</span><br><span class="line">| 1       |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select sign(-5);</span><br><span class="line">+----------+</span><br><span class="line">| sign(-5) |</span><br><span class="line">+----------+</span><br><span class="line">| -1       |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select sign(0);</span><br><span class="line">+---------+</span><br><span class="line">| sign(0) |</span><br><span class="line">+---------+</span><br><span class="line">| 0       |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-11、pow-x-y"><a href="#1-3-11、pow-x-y" class="headerlink" title="1.3.11、pow(x,y)"></a>1.3.11、pow(x,y)</h4><p>POW(x,y)和、POWER(x,y):返回x的y次乘方的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select pow(2,4);</span><br><span class="line">+----------+</span><br><span class="line">| pow(2,4) |</span><br><span class="line">+----------+</span><br><span class="line">| 16       |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select power(3,3);</span><br><span class="line">+------------+</span><br><span class="line">| power(3,3) |</span><br><span class="line">+------------+</span><br><span class="line">| 27         |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-12、rand"><a href="#1-3-12、rand" class="headerlink" title="1.3.12、rand()"></a>1.3.12、rand()</h4><p>RAND()：随机函数，返回0-1内的随机数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select rand();</span><br><span class="line">+---------------------+</span><br><span class="line">| rand()              |</span><br><span class="line">+---------------------+</span><br><span class="line">| 0.30107216378773766 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select rand();</span><br><span class="line">+---------------------+</span><br><span class="line">| rand()              |</span><br><span class="line">+---------------------+</span><br><span class="line">| 0.37762552907469266 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-13、truncate"><a href="#1-3-13、truncate" class="headerlink" title="1.3.13、truncate()"></a>1.3.13、truncate()</h4><p>TRUNCATE(x,Y):数值截取，返回数值x截取y位小数的结果（不四舍五入）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select truncate(3.1415926,2);</span><br><span class="line">+-----------------------+</span><br><span class="line">| truncate(3.1415926,2) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| 3.14                  |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select truncate(3.1415926,4);</span><br><span class="line">+-----------------------+</span><br><span class="line">| truncate(3.1415926,4) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| 3.1415                |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、字符串函数"><a href="#二、字符串函数" class="headerlink" title="二、字符串函数"></a>二、字符串函数</h2><h3 id="2-1、字符串函数概述"><a href="#2-1、字符串函数概述" class="headerlink" title="2.1、字符串函数概述"></a>2.1、字符串函数概述</h3><p>字符串函数是MySQL中常用的一类函数。主要用于处理字符串。</p>
<h3 id="2-2、常用字符串函数"><a href="#2-2、常用字符串函数" class="headerlink" title="2.2、常用字符串函数"></a>2.2、常用字符串函数</h3><h4 id="2-2-1、ascii"><a href="#2-2-1、ascii" class="headerlink" title="2.2.1、ascii()"></a>2.2.1、ascii()</h4><p>ASCII(str):返回字符串str的最左面字符的ASCII代码值。如果str是空字符串，返回0。如果str是NULL，返回NULL。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ascii(&#x27;2&#x27;);</span><br><span class="line">+------------+</span><br><span class="line">| ascii(&#x27;2&#x27;) |</span><br><span class="line">+------------+</span><br><span class="line">| 50         |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ascii(2);</span><br><span class="line">+----------+</span><br><span class="line">| ascii(2) |</span><br><span class="line">+----------+</span><br><span class="line">| 50       |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ascii(&#x27;Ax&#x27;);</span><br><span class="line">+-------------+</span><br><span class="line">| ascii(&#x27;Ax&#x27;) |</span><br><span class="line">+-------------+</span><br><span class="line">| 65          |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ascii(&#x27;ax&#x27;);</span><br><span class="line">+-------------+</span><br><span class="line">| ascii(&#x27;ax&#x27;) |</span><br><span class="line">+-------------+</span><br><span class="line">| 97          |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2、concat"><a href="#2-2-2、concat" class="headerlink" title="2.2.2、concat()"></a>2.2.2、concat()</h4><p>CONCAT(str1,str2,…):返回来自于参数连结的字符串。如果任何参数是NULL，返回NULL。可以有超过2个的参数。一个数字参数被变换为等价的字符串形式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select concat(&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;);</span><br><span class="line">+-----------------------------+</span><br><span class="line">| concat(&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| helloworld!                 |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select concat(&#x27;hello&#x27;,null,&#x27;world&#x27;);</span><br><span class="line">+------------------------------+</span><br><span class="line">| concat(&#x27;hello&#x27;,null,&#x27;world&#x27;) |</span><br><span class="line">+------------------------------+</span><br><span class="line">| NULL                         |</span><br><span class="line">+------------------------------+</span><br><span class="line">1 行于数据集 (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select concat(12,21);</span><br><span class="line">+---------------+</span><br><span class="line">| concat(12,21) |</span><br><span class="line">+---------------+</span><br><span class="line">| 1221          |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3、length"><a href="#2-2-3、length" class="headerlink" title="2.2.3、length()"></a>2.2.3、length()</h4><p>LENGTH(str):获取字符串字节长度（返回字节数，要注意字符集）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select length(&#x27;hello world&#x27;);</span><br><span class="line">+-----------------------+</span><br><span class="line">| length(&#x27;hello world&#x27;) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| 11                    |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select length(&#x27;你好&#x27;);</span><br><span class="line">+--------------+</span><br><span class="line">| length(&#x27;你好&#x27;) |</span><br><span class="line">+--------------+</span><br><span class="line">| 6            |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>一个汉字是算三个字节，一个数字或字母算一个字节</p>
<h4 id="2-2-4、locate"><a href="#2-2-4、locate" class="headerlink" title="2.2.4、locate()"></a>2.2.4、locate()</h4><p>LOCATE(substr,str):返回子串substr在字符串str第一个出现的位置，如果substr不是在str里面，返回0.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select locate(&#x27;wo&#x27;,&#x27;hello world&#x27;);</span><br><span class="line">+----------------------------+</span><br><span class="line">| locate(&#x27;wo&#x27;,&#x27;hello world&#x27;) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| 7                          |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select locate(&#x27;wob&#x27;,&#x27;hello world&#x27;);</span><br><span class="line">+-----------------------------+</span><br><span class="line">| locate(&#x27;wob&#x27;,&#x27;hello world&#x27;) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| 0                           |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-5、instr"><a href="#2-2-5、instr" class="headerlink" title="2.2.5、instr()"></a>2.2.5、instr()</h4><p>INSTR(str,substr):返回子串substr在字符串str中的第一个出现的位置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select instr(&#x27;hello world&#x27;,&#x27;o&#x27;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| instr(&#x27;hello world&#x27;,&#x27;o&#x27;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">| 5                        |</span><br><span class="line">+--------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select instr(&#x27;hello world&#x27;,&#x27;ob&#x27;);</span><br><span class="line">+---------------------------+</span><br><span class="line">| instr(&#x27;hello world&#x27;,&#x27;ob&#x27;) |</span><br><span class="line">+---------------------------+</span><br><span class="line">| 0                         |</span><br><span class="line">+---------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-6、left"><a href="#2-2-6、left" class="headerlink" title="2.2.6、left()"></a>2.2.6、left()</h4><p>LEFT(str,len):返回字符串str的最左面len个字符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select left(&#x27;hello world&#x27;,5);</span><br><span class="line">+-----------------------+</span><br><span class="line">| left(&#x27;hello world&#x27;,5) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| hello                 |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-7、right"><a href="#2-2-7、right" class="headerlink" title="2.2.7、right()"></a>2.2.7、right()</h4><p>RIGHT(str,len):返回字符串str的最右面len个字符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select right(&#x27;hello world&#x27;,5);</span><br><span class="line">+------------------------+</span><br><span class="line">| right(&#x27;hello world&#x27;,5) |</span><br><span class="line">+------------------------+</span><br><span class="line">| world                  |</span><br><span class="line">+------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-8、substring"><a href="#2-2-8、substring" class="headerlink" title="2.2.8、substring()"></a>2.2.8、substring()</h4><p>SUBSTRING(str,pos):从字符串str的起始位置pos返回一个子串。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select substring(&#x27;hello world&#x27;,5);</span><br><span class="line">+----------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27;,5) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| o world                    |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">mysql&gt; select substring(&#x27;hello world&#x27;,2,6);</span><br><span class="line">+------------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27;,2,6) |</span><br><span class="line">+------------------------------+</span><br><span class="line">| ello w                       |</span><br><span class="line">+------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select substring(&#x27;hello world&#x27; from 7);</span><br><span class="line">+---------------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27; from 7) |</span><br><span class="line">+---------------------------------+</span><br><span class="line">| world                           |</span><br><span class="line">+---------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select substring(&#x27;hello world&#x27; from 7 for 2);</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27; from 7 for 2) |</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| wo                                    |</span><br><span class="line">+---------------------------------------+</span><br><span class="line"></span><br><span class="line">mysql&gt; select substring(&#x27;hello world&#x27; from -3 for 2);</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27; from -3 for 2) |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| rl                                     |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-9、trim"><a href="#2-2-9、trim" class="headerlink" title="2.2.9、trim()"></a>2.2.9、trim()</h4><p>TRIM(str):返回字符串str，所有前缀或后缀被删除了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select trim(&#x27;  hello world  &#x27;);</span><br><span class="line">+-------------------------+</span><br><span class="line">| trim(&#x27;  hello world  &#x27;) |</span><br><span class="line">+-------------------------+</span><br><span class="line">| hello world             |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-10、ltrim-x2F-rtrim"><a href="#2-2-10、ltrim-x2F-rtrim" class="headerlink" title="2.2.10、ltrim()&#x2F;rtrim()"></a>2.2.10、ltrim()&#x2F;rtrim()</h4><p>LTRIM(str):返回删除了其前置空格字符的字符串str。</p>
<p>RTRIM(str):返回删除了其拖后空格字符的字符串str。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ltrim(&#x27;  hello world  &#x27;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| ltrim(&#x27;  hello world  &#x27;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">| hello world              |</span><br><span class="line">+--------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select rtrim(&#x27;  hello world  &#x27;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| rtrim(&#x27;  hello world  &#x27;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">|   hello world            |</span><br><span class="line">+--------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-11、replace"><a href="#2-2-11、replace" class="headerlink" title="2.2.11、replace()"></a>2.2.11、replace()</h4><p>REPLACE(str,from_str,to_str):返回字符串str，其字符串from_str的所有出现由字符串to_str代替。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select replace(&#x27;hello world&#x27;,&#x27;o&#x27;,&#x27;O&#x27;);</span><br><span class="line">+--------------------------------+</span><br><span class="line">| replace(&#x27;hello world&#x27;,&#x27;o&#x27;,&#x27;O&#x27;) |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| hellO wOrld                    |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-3、常用字符串函数"><a href="#2-3、常用字符串函数" class="headerlink" title="2.3、常用字符串函数"></a>2.3、常用字符串函数</h3><h4 id="2-3-1、repeat"><a href="#2-3-1、repeat" class="headerlink" title="2.3.1、repeat()"></a>2.3.1、repeat()</h4><p>REPEAT(str,count):返回由重复count次的字符串str组成的一个字符串。如果count &lt;&#x3D; 0，返回一个空字符串。如果str或count是NULL，返回NULL。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select repeat(&#x27;hello&#x27;,3);</span><br><span class="line">+-------------------+</span><br><span class="line">| repeat(&#x27;hello&#x27;,3) |</span><br><span class="line">+-------------------+</span><br><span class="line">| hellohellohello   |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select repeat(&#x27;hello&#x27;,0);</span><br><span class="line">+-------------------+</span><br><span class="line">| repeat(&#x27;hello&#x27;,0) |</span><br><span class="line">+-------------------+</span><br><span class="line">|                   |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-2、reverse"><a href="#2-3-2、reverse" class="headerlink" title="2.3.2、reverse()"></a>2.3.2、reverse()</h4><p>REVERSE(str):返回颠倒字符顺序的字符串str。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select reverse(&#x27;hello world!&#x27;);</span><br><span class="line">+-------------------------+</span><br><span class="line">| reverse(&#x27;hello world!&#x27;) |</span><br><span class="line">+-------------------------+</span><br><span class="line">| !dlrow olleh            |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-3、insert"><a href="#2-3-3、insert" class="headerlink" title="2.3.3、insert()"></a>2.3.3、insert()</h4><p>INSERT(str,pos,len,newstr):返回字符串str，在位置pos起始的子串且len个字符长的子串由字符串newstr代替。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select insert(&#x27;hello world!&#x27;,5,3,&#x27;is&#x27;);</span><br><span class="line">+---------------------------------+</span><br><span class="line">| insert(&#x27;hello world!&#x27;,5,3,&#x27;is&#x27;) |</span><br><span class="line">+---------------------------------+</span><br><span class="line">| hellisorld!                     |</span><br><span class="line">+---------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-4、elt"><a href="#2-3-4、elt" class="headerlink" title="2.3.4、elt()"></a>2.3.4、elt()</h4><p>ETL(index,str1,str2,str3…):返回指定index位置的字符串</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select elt(2,&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;);</span><br><span class="line">+----------------------------+</span><br><span class="line">| elt(2,&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| world                      |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select elt(4,&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;);</span><br><span class="line">+----------------------------+</span><br><span class="line">| elt(4,&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| NULL                       |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-5、upper"><a href="#2-3-5、upper" class="headerlink" title="2.3.5、upper()"></a>2.3.5、upper()</h4><p>UPPER(x)或UCASE(x):用于将字母转成大写，x可以是单个字母也可以是字符串；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select upper(&#x27;abcdfe&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| upper(&#x27;abcdfe&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| ABCDFE          |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ucase(&#x27;abcdfe&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| ucase(&#x27;abcdfe&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| ABCDFE          |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-6、lower"><a href="#2-3-6、lower" class="headerlink" title="2.3.6、lower()"></a>2.3.6、lower()</h4><p>LOWER(x)或LCASE(x):用于将字母转成小写，x可以是单个字母也可以是字符串；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select lower(&#x27;ABCDEF&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| lower(&#x27;ABCDEF&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| abcdef          |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select lcase(&#x27;ABCDEF&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| lcase(&#x27;ABCDEF&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| abcdef          |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-7、char-length"><a href="#2-3-7、char-length" class="headerlink" title="2.3.7、char_length()"></a>2.3.7、char_length()</h4><p>CHAR_LENGTH():获取字符串字符数，获取字符串长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select char_length(&#x27;hello world&#x27;);</span><br><span class="line">+----------------------------+</span><br><span class="line">| char_length(&#x27;hello world&#x27;) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| 11                         |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select char_length(&#x27;你好&#x27;);</span><br><span class="line">+-------------------+</span><br><span class="line">| char_length(&#x27;你好&#x27;) |</span><br><span class="line">+-------------------+</span><br><span class="line">| 2                 |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>不管汉字还是数字或者是字母都算是一个字符</p>
<h4 id="2-3-8、strcmp"><a href="#2-3-8、strcmp" class="headerlink" title="2.3.8、strcmp()"></a>2.3.8、strcmp()</h4><p>STRCMP(str1,str2):比较两个字符串的大小。左边大于右边时返回1，左边等于右边时返回0，，左小于于右时返回-1。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select strcmp(&#x27;a&#x27;,&#x27;b&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| strcmp(&#x27;a&#x27;,&#x27;b&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| -1              |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select strcmp(&#x27;d&#x27;,&#x27;b&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| strcmp(&#x27;d&#x27;,&#x27;b&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| 1               |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select strcmp(&#x27;b&#x27;,&#x27;b&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| strcmp(&#x27;b&#x27;,&#x27;b&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| 0               |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-9、field"><a href="#2-3-9、field" class="headerlink" title="2.3.9、field()"></a>2.3.9、field()</h4><p>FIELD(str,str1,str2,str3…):与find_in_set类似，返回str在str1,str2,str3…中的位置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select field(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;a&#x27;,&#x27;e&#x27;);</span><br><span class="line">+--------------------------------+</span><br><span class="line">| field(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;a&#x27;,&#x27;e&#x27;) |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| 4                              |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select find_in_set(&#x27;a&#x27;,&#x27;b,c,d,a,e&#x27;);</span><br><span class="line">+------------------------------+</span><br><span class="line">| find_in_set(&#x27;a&#x27;,&#x27;b,c,d,a,e&#x27;) |</span><br><span class="line">+------------------------------+</span><br><span class="line">| 4                            |</span><br><span class="line">+------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-10、position"><a href="#2-3-10、position" class="headerlink" title="2.3.10、position()"></a>2.3.10、position()</h4><p>POSITION(str1 IN str2):返回子串str1在字符串str2中的位置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select position(&#x27;ld&#x27; in &#x27;helloworld&#x27;);</span><br><span class="line">+--------------------------------+</span><br><span class="line">| position(&#x27;ld&#x27; in &#x27;helloworld&#x27;) |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| 9                              |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-11、locate"><a href="#2-3-11、locate" class="headerlink" title="2.3.11、locate()"></a>2.3.11、locate()</h4><p>LOCATE(str1,str,pos):函数返回字符串str1在str中的第pos位置后第一次出现的位置。如果str1在str中不存在，返回0。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select locate(&#x27;hel&#x27;,&#x27;hello world&#x27;,1);</span><br><span class="line">+-------------------------------+</span><br><span class="line">| locate(&#x27;hel&#x27;,&#x27;hello world&#x27;,1) |</span><br><span class="line">+-------------------------------+</span><br><span class="line">| 1                             |</span><br><span class="line">+-------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select locate(&#x27;hel&#x27;,&#x27;hello world&#x27;,2);</span><br><span class="line">+-------------------------------+</span><br><span class="line">| locate(&#x27;hel&#x27;,&#x27;hello world&#x27;,2) |</span><br><span class="line">+-------------------------------+</span><br><span class="line">| 0                             |</span><br><span class="line">+-------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-12、substring-index"><a href="#2-3-12、substring-index" class="headerlink" title="2.3.12、substring_index()"></a>2.3.12、substring_index()</h4><p>SUBSTRING_INDEX(str,delim,count):在定界符delim及count出现前，从字符串str返回自字符串。若count为正值,则返回最终定界符(从左边开始) ，若为-1则是从后往前截取；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select substring_index(&#x27;hello/world/!&#x27;,&#x27;/&#x27;,-1);</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| substring_index(&#x27;hello/world/!&#x27;,&#x27;/&#x27;,-1) |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| !                                       |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select substring_index(&#x27;hello/world/!&#x27;,&#x27;/&#x27;,1);</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| substring_index(&#x27;hello/world/!&#x27;,&#x27;/&#x27;,1) |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| hello                                  |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、日期和时间函数"><a href="#三、日期和时间函数" class="headerlink" title="三、日期和时间函数"></a>三、日期和时间函数</h2><h3 id="3-1、日期和时间函数概述"><a href="#3-1、日期和时间函数概述" class="headerlink" title="3.1、日期和时间函数概述"></a>3.1、日期和时间函数概述</h3><p>日期和时间函数是MySQL中常用的一类函数。主要用于处理日期时间。</p>
<h3 id="3-2、常用日期和时间函数"><a href="#3-2、常用日期和时间函数" class="headerlink" title="3.2、常用日期和时间函数"></a>3.2、常用日期和时间函数</h3><h4 id="3-2-1、curdate"><a href="#3-2-1、curdate" class="headerlink" title="3.2.1、curdate()"></a>3.2.1、curdate()</h4><p>CURDATE()或CURRENT_DATE():返回当前日期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select curdate();</span><br><span class="line">+------------+</span><br><span class="line">| curdate()  |</span><br><span class="line">+------------+</span><br><span class="line">| 2020-02-17 |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select current_date();</span><br><span class="line">+----------------+</span><br><span class="line">| current_date() |</span><br><span class="line">+----------------+</span><br><span class="line">| 2020-02-17     |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-2、curtime"><a href="#3-2-2、curtime" class="headerlink" title="3.2.2、curtime()"></a>3.2.2、curtime()</h4><p>CURTIME()或CURRENT_TIME()：返回当前时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select curtime();</span><br><span class="line">+-----------+</span><br><span class="line">| curtime() |</span><br><span class="line">+-----------+</span><br><span class="line">| 03:01:16  |</span><br><span class="line">+-----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select current_time();</span><br><span class="line">+----------------+</span><br><span class="line">| current_time() |</span><br><span class="line">+----------------+</span><br><span class="line">| 03:01:26       |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-3、now"><a href="#3-2-3、now" class="headerlink" title="3.2.3、now()"></a>3.2.3、now()</h4><p>NOW():返回当前日期时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select now();</span><br><span class="line">+---------------------+</span><br><span class="line">| now()               |</span><br><span class="line">+---------------------+</span><br><span class="line">| 2020-02-17 03:02:09 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-4、month"><a href="#3-2-4、month" class="headerlink" title="3.2.4、month()"></a>3.2.4、month()</h4><p>MONTH(date)或MONTHNAME(date):返回date的月份，范围1到12</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select month(now());</span><br><span class="line">+--------------+</span><br><span class="line">| month(now()) |</span><br><span class="line">+--------------+</span><br><span class="line">| 2            |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select monthname(now());</span><br><span class="line">+------------------+</span><br><span class="line">| monthname(now()) |</span><br><span class="line">+------------------+</span><br><span class="line">| February         |</span><br><span class="line">+------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-5、week"><a href="#3-2-5、week" class="headerlink" title="3.2.5、week()"></a>3.2.5、week()</h4><p>WEEK(date):从日期中选择出周数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select week(now());</span><br><span class="line">+-------------+</span><br><span class="line">| week(now()) |</span><br><span class="line">+-------------+</span><br><span class="line">| 7           |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-6、year"><a href="#3-2-6、year" class="headerlink" title="3.2.6、year()"></a>3.2.6、year()</h4><p>YEAR(date):从日期中选择出年份</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select year(now());</span><br><span class="line">+-------------+</span><br><span class="line">| year(now()) |</span><br><span class="line">+-------------+</span><br><span class="line">| 2020        |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-7、hour"><a href="#3-2-7、hour" class="headerlink" title="3.2.7、hour()"></a>3.2.7、hour()</h4><p>HOUR(date):从日期中选择出小时数,返回time的小时，范围是0到23。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select hour(now());</span><br><span class="line">+-------------+</span><br><span class="line">| hour(now()) |</span><br><span class="line">+-------------+</span><br><span class="line">| 3           |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-8、minute"><a href="#3-2-8、minute" class="headerlink" title="3.2.8、minute()"></a>3.2.8、minute()</h4><p>MINUTE():从日期中选择出分钟数,范围是0到59。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select minute(now());</span><br><span class="line">+---------------+</span><br><span class="line">| minute(now()) |</span><br><span class="line">+---------------+</span><br><span class="line">| 12            |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-9、second"><a href="#3-2-9、second" class="headerlink" title="3.2.9、second()"></a>3.2.9、second()</h4><p>SECOND(time):回来time的秒数，范围是0到59。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select second(now());</span><br><span class="line">+---------------+</span><br><span class="line">| second(now()) |</span><br><span class="line">+---------------+</span><br><span class="line">| 41            |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、常用日期和时间函数"><a href="#3-3、常用日期和时间函数" class="headerlink" title="3.3、常用日期和时间函数"></a>3.3、常用日期和时间函数</h3><h4 id="3-3-1、weekday"><a href="#3-3-1、weekday" class="headerlink" title="3.3.1、weekday()"></a>3.3.1、weekday()</h4><p>WEEKDAY(date)或DAYNAME(date):返回date的星期索引(0&#x3D;星期一，1&#x3D;星期二, ……6&#x3D; 星期天)。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select weekday(now());</span><br><span class="line">+----------------+</span><br><span class="line">| weekday(now()) |</span><br><span class="line">+----------------+</span><br><span class="line">| 0              |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select dayname(now());</span><br><span class="line">+----------------+</span><br><span class="line">| dayname(now()) |</span><br><span class="line">+----------------+</span><br><span class="line">| Monday         |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-2、dayofweek"><a href="#3-3-2、dayofweek" class="headerlink" title="3.3.2、dayofweek()"></a>3.3.2、dayofweek()</h4><p>DAYOFWEEK(date):返回日期date的星期索引(1&#x3D;星期天，2&#x3D;星期一, …7&#x3D;星期六)。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select dayofweek(now());</span><br><span class="line">+------------------+</span><br><span class="line">| dayofweek(now()) |</span><br><span class="line">+------------------+</span><br><span class="line">| 2                |</span><br><span class="line">+------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-3、dayofmonth"><a href="#3-3-3、dayofmonth" class="headerlink" title="3.3.3、dayofmonth()"></a>3.3.3、dayofmonth()</h4><p>DAYOFMONTH(date):返回date的月份中的日期，在1到31范围内。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select dayofmonth(now());</span><br><span class="line">+-------------------+</span><br><span class="line">| dayofmonth(now()) |</span><br><span class="line">+-------------------+</span><br><span class="line">| 17                |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-4、dayofyear"><a href="#3-3-4、dayofyear" class="headerlink" title="3.3.4、dayofyear()"></a>3.3.4、dayofyear()</h4><p>DAYOFYEAR(date):返回date在一年中的日数, 在1到366范围内。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select dayofyear(now());</span><br><span class="line">+------------------+</span><br><span class="line">| dayofyear(now()) |</span><br><span class="line">+------------------+</span><br><span class="line">| 48               |</span><br><span class="line">+------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-5、quarter"><a href="#3-3-5、quarter" class="headerlink" title="3.3.5、quarter()"></a>3.3.5、quarter()</h4><p>QUARTER(date):返回date一年中的季度，范围1到4。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select quarter(now());</span><br><span class="line">+----------------+</span><br><span class="line">| quarter(now()) |</span><br><span class="line">+----------------+</span><br><span class="line">| 1              |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-6、date-add"><a href="#3-3-6、date-add" class="headerlink" title="3.3.6、date_add()"></a>3.3.6、date_add()</h4><p>DATE_ADD(date,INTERVAL expr type) ,进行日期增加的操作，可以精确到秒</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select &#x27;1997-12-31 23:59:59&#x27;+interval 1 second;</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| &#x27;1997-12-31 23:59:59&#x27;+interval 1 second |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| 1998-01-01 00:00:00                     |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select &#x27;1997-12-31&#x27;+interval 1 second;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| &#x27;1997-12-31&#x27;+interval 1 second |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| 1997-12-31 00:00:01            |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line">mysql&gt; select date_add(&#x27;1997-12-31 23:59:59&#x27;,interval 1 second);</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">| date_add(&#x27;1997-12-31 23:59:59&#x27;,interval 1 second) |</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">| 1998-01-01 00:00:00                               |</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select date_add(&#x27;1997-12-31 23:59:59&#x27;,interval &#x27;1:1&#x27; minute_second);</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">| date_add(&#x27;1997-12-31 23:59:59&#x27;,interval &#x27;1:1&#x27; minute_second) |</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">| 1998-01-01 00:01:00                                          |</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-7、date-sub"><a href="#3-3-7、date-sub" class="headerlink" title="3.3.7、date_sub()"></a>3.3.7、date_sub()</h4><p>DATE_SUB(date,INTERVAL expr type) ，进行日期减少的操作，可以精确到秒</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select &#x27;1997-12-31&#x27;-interval 1 second;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| &#x27;1997-12-31&#x27;-interval 1 second |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| 1997-12-30 23:59:59            |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">mysql&gt; select date_sub(&#x27;1997-12-31 23:59:59&#x27;,interval &#x27;1:1&#x27; minute_second);</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">| date_sub(&#x27;1997-12-31 23:59:59&#x27;,interval &#x27;1:1&#x27; minute_second) |</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">| 1997-12-31 23:58:58                                          |</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select date_sub(&#x27;1997-12-31 23:59:59&#x27;,interval 30 day);</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">| date_sub(&#x27;1997-12-31 23:59:59&#x27;,interval 30 day) |</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">| 1997-12-01 23:59:59                             |</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、系统信息函数"><a href="#四、系统信息函数" class="headerlink" title="四、系统信息函数"></a>四、系统信息函数</h2><h3 id="4-1、系统函数概述"><a href="#4-1、系统函数概述" class="headerlink" title="4.1、系统函数概述"></a>4.1、系统函数概述</h3><p>系统信息函数用来查询MySQL数据库的系统信息。</p>
<h3 id="4-2、常用系统函数"><a href="#4-2、常用系统函数" class="headerlink" title="4.2、常用系统函数"></a>4.2、常用系统函数</h3><h4 id="4-2-1、version"><a href="#4-2-1、version" class="headerlink" title="4.2.1、version()"></a>4.2.1、version()</h4><p>VERSION()函数返回数据库的版本号；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select version();</span><br><span class="line">+-----------+</span><br><span class="line">| version() |</span><br><span class="line">+-----------+</span><br><span class="line">| 8.0.17    |</span><br><span class="line">+-----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2、connection-id"><a href="#4-2-2、connection-id" class="headerlink" title="4.2.2、connection_id()"></a>4.2.2、connection_id()</h4><p>CONNECTION_ID()函数返回服务器的连接数，也就是到现在为止MySQL服务的连接次数；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select connection_id();</span><br><span class="line">+-----------------+</span><br><span class="line">| connection_id() |</span><br><span class="line">+-----------------+</span><br><span class="line">| 78              |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-3、database"><a href="#4-2-3、database" class="headerlink" title="4.2.3、database()"></a>4.2.3、database()</h4><p>DATABASE()和SCHEMA()返回当前数据库名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| zutuanxue   |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select schema();</span><br><span class="line">+----------+</span><br><span class="line">| schema() |</span><br><span class="line">+----------+</span><br><span class="line">| zutuanxue |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-4、用户函数"><a href="#4-2-4、用户函数" class="headerlink" title="4.2.4、用户函数"></a>4.2.4、用户函数</h4><p>USER()、SYSTEM_USER()、SESSION_USER()、CURRENT_USER()和CURRENT_USER这几个函数可以返回当前用户的名称。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select user();</span><br><span class="line">+--------------------+</span><br><span class="line">| user()             |</span><br><span class="line">+--------------------+</span><br><span class="line">| root@192.168.1.104 |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select system_user();</span><br><span class="line">+--------------------+</span><br><span class="line">| system_user()      |</span><br><span class="line">+--------------------+</span><br><span class="line">| root@192.168.1.104 |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select session_user();</span><br><span class="line">+--------------------+</span><br><span class="line">| session_user()     |</span><br><span class="line">+--------------------+</span><br><span class="line">| root@192.168.1.104 |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select current_user();</span><br><span class="line">+----------------+</span><br><span class="line">| current_user() |</span><br><span class="line">+----------------+</span><br><span class="line">| root@%         |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select current_user;</span><br><span class="line">+--------------+</span><br><span class="line">| current_user |</span><br><span class="line">+--------------+</span><br><span class="line">| root@%       |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-5、字符集函数"><a href="#4-2-5、字符集函数" class="headerlink" title="4.2.5、字符集函数"></a>4.2.5、字符集函数</h4><p><strong>charset()</strong></p>
<p>CHARSET(str)函数返回字符串str的字符集，一般情况这个字符集就是系统的默认字符集；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select charset(&#x27;ad&#x27;);</span><br><span class="line">+---------------+</span><br><span class="line">| charset(&#x27;ad&#x27;) |</span><br><span class="line">+---------------+</span><br><span class="line">| utf8          |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>collation()</strong></p>
<p>COLLATION(str)函数返回字符串str的字符排列方式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select collation(&#x27;ad&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| collation(&#x27;ad&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| utf8_general_ci |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="五、其他函数"><a href="#五、其他函数" class="headerlink" title="五、其他函数"></a>五、其他函数</h2><h3 id="5-1、md5"><a href="#5-1、md5" class="headerlink" title="5.1、md5()"></a>5.1、md5()</h3><p>加密函数是MySQL中用来对数据进行加密的函数。</p>
<p>MD5(str)函数可以对字符串str进行加密。MD5(str)函数主要对普通的数据进行加密。下面使用MD5(str)函数为字符串“abcd”加密。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select md5(&#x27;abcd&#x27;);</span><br><span class="line">+----------------------------------+</span><br><span class="line">| md5(&#x27;abcd&#x27;)                      |</span><br><span class="line">+----------------------------------+</span><br><span class="line">| e2fc714c4727ee9395f324cd2e7f331f |</span><br><span class="line">+----------------------------------+</span><br><span class="line">1 行于数据集 (0.04 秒)</span><br></pre></td></tr></table></figure>

<h3 id="5-2、format"><a href="#5-2、format" class="headerlink" title="5.2、format()"></a>5.2、format()</h3><p>格式化函数FORMAT(x,n)</p>
<p>FORMAT(x,n)函数可以将数字x进行格式化，将x保留到小数点后n位。这个过程需要进行四舍五入。例如FORMAT(2.356,2)返回的结果将会是2.36；FORMAT(2.353,2)返回的结果将会是2.35。下面使用FORMAT(x,n)函数来讲235.3456和235.3454进行格式化，都保留到小数点后3位。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select format(235.3456,3),format(235.3456,2);</span><br><span class="line">+--------------------+--------------------+</span><br><span class="line">| format(235.3456,3) | format(235.3456,2) |</span><br><span class="line">+--------------------+--------------------+</span><br><span class="line">| 235.346            | 235.35             |</span><br><span class="line">+--------------------+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="5-3、进制转换函数"><a href="#5-3、进制转换函数" class="headerlink" title="5.3、进制转换函数"></a>5.3、进制转换函数</h3><p>BIN(x)返回x的二进制编码；</p>
<p>HEX(x)返回x的十六进制编码；</p>
<p>OCT(x)返回x的八进制编码；</p>
<p>CONV(x,f1,f2)将x从f1进制数变成f2进制数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select bin(10);</span><br><span class="line">+---------+</span><br><span class="line">| bin(10) |</span><br><span class="line">+---------+</span><br><span class="line">| 1010    |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select hex(10);</span><br><span class="line">+---------+</span><br><span class="line">| hex(10) |</span><br><span class="line">+---------+</span><br><span class="line">| A       |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select oct(10);</span><br><span class="line">+---------+</span><br><span class="line">| oct(10) |</span><br><span class="line">+---------+</span><br><span class="line">| 12      |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select conv(10,10,2);</span><br><span class="line">+---------------+</span><br><span class="line">| conv(10,10,2) |</span><br><span class="line">+---------------+</span><br><span class="line">| 1010          |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="5-4、条件判断函数"><a href="#5-4、条件判断函数" class="headerlink" title="5.4、条件判断函数"></a>5.4、条件判断函数</h3><h4 id="5-4-1、if"><a href="#5-4-1、if" class="headerlink" title="5.4.1、if()"></a>5.4.1、if()</h4><p>IF(expr,v1,v2)如果表达式 expr 成立，返回结果 v1；否则，返回结果 v2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select if(1&gt;0,&#x27;yes&#x27;,&#x27;no&#x27;);</span><br><span class="line">+--------------------+</span><br><span class="line">| if(1&gt;0,&#x27;yes&#x27;,&#x27;no&#x27;) |</span><br><span class="line">+--------------------+</span><br><span class="line">| yes                |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select if(strcmp(&#x27;test&#x27;,&#x27;test1&#x27;),&#x27;yes&#x27;,&#x27;no&#x27;);</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| if(strcmp(&#x27;test&#x27;,&#x27;test1&#x27;),&#x27;yes&#x27;,&#x27;no&#x27;) |</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| yes                                   |</span><br><span class="line">+---------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="5-4-2、ifnull"><a href="#5-4-2、ifnull" class="headerlink" title="5.4.2、ifnull()"></a>5.4.2、ifnull()</h4><p>IFNULL(v1,v2):如果v1不为NULL，则返回v1，否则返回v2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ifnull(&#x27;yes&#x27;,&#x27;no&#x27;);</span><br><span class="line">+--------------------+</span><br><span class="line">| ifnull(&#x27;yes&#x27;,&#x27;no&#x27;) |</span><br><span class="line">+--------------------+</span><br><span class="line">| yes                |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ifnull(null,&#x27;no&#x27;);</span><br><span class="line">+-------------------+</span><br><span class="line">| ifnull(null,&#x27;no&#x27;) |</span><br><span class="line">+-------------------+</span><br><span class="line">| no                |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="5-4-3、case"><a href="#5-4-3、case" class="headerlink" title="5.4.3、case"></a>5.4.3、case</h4><p>CASE expr WHEN v1 THEN r1 [WHEN v2 THEN v2] [ELSE rn] END:如果expr等于某个vn，则返回对应位置THEN后面的结果，如果与所有值都不想等，则返回ELSE后面的rn</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select case 11 when 1 then &#x27;one&#x27; when 2 then &#x27;two&#x27; else &#x27;more&#x27; end;</span><br><span class="line">+-------------------------------------------------------------+</span><br><span class="line">| case 11 when 1 then &#x27;one&#x27; when 2 then &#x27;two&#x27; else &#x27;more&#x27; end |</span><br><span class="line">+-------------------------------------------------------------+</span><br><span class="line">| more                                                        |</span><br><span class="line">+-------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select case when 1&gt;0 then &#x27;true&#x27; else &#x27;false&#x27; end;</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">| case when 1&gt;0 then &#x27;true&#x27; else &#x27;false&#x27; end |</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">| true                                       |</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select case binary &#x27;B&#x27; when &#x27;a&#x27; then 1 when &#x27;b&#x27; then 2 end;</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">| case binary &#x27;B&#x27; when &#x27;a&#x27; then 1 when &#x27;b&#x27; then 2 end |</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">| NULL                                                |</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select case binary &#x27;B&#x27; when &#x27;a&#x27; then 1 when &#x27;B&#x27; then 2 end;</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">| case binary &#x27;B&#x27; when &#x27;a&#x27; then 1 when &#x27;B&#x27; then 2 end |</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">| 2                                                   |</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL-存储过程"><a href="#MySQL-存储过程" class="headerlink" title="MySQL 存储过程"></a>MySQL 存储过程</h1><p> 阅读 (190633) </p>
<p> 分享</p>
<p>存储过程（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的SQL 语句集，它存储在数据库中，一次编译后永久有效，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。存储过程是数据库中的一个重要对象。在数据量特别庞大的情况下利用存储过程能达到倍速的效率提升</p>
<h2 id="一、存储过程概述"><a href="#一、存储过程概述" class="headerlink" title="一、存储过程概述"></a>一、存储过程概述</h2><h3 id="1-1、什么是存储过程"><a href="#1-1、什么是存储过程" class="headerlink" title="1.1、什么是存储过程"></a>1.1、什么是存储过程</h3><p>存储过程是数据库中的一个重要对象。</p>
<p>存储过程是在数据库系统中，一组为了完成特定功能的SQL 语句集。存储过程是存储在数据库中，一次编译后，到处运行。不需要再次编译，用户通过指定存储过程的名字并传递参数（如果该存储过程带有参数）来执行。</p>
<h3 id="1-2、存储过程特点"><a href="#1-2、存储过程特点" class="headerlink" title="1.2、存储过程特点"></a>1.2、存储过程特点</h3><p>用来完成较复杂业务<br>比较灵活，易修改，好编写，可编程性强<br>编写好的存储过程可重复使用</p>
<h3 id="1-3、存储过程优缺点"><a href="#1-3、存储过程优缺点" class="headerlink" title="1.3、存储过程优缺点"></a>1.3、存储过程优缺点</h3><p><strong>优点</strong></p>
<p>存储过程在创建的时候直接编译，sql语句每次使用都要编译，效率高。</p>
<p>存储过程可以被重复使用。</p>
<p>存储过程只连接一次数据库，sql语句在访问多张表时，连接多次数据库。</p>
<p>存储的程序是安全的。存储过程的应用程序授予适当的权限。<br><strong>缺点</strong><br>在那里创建的存储过程，就只能在那里使用，可移植性差。</p>
<p>开发存储过程时，标准不定好的话，后期维护麻烦。</p>
<p>没有具体的编辑器，开发和调试都不方便。</p>
<p>太复杂的业务逻辑，存储过程也解决不了。</p>
<h2 id="二、存储过程创建"><a href="#二、存储过程创建" class="headerlink" title="二、存储过程创建"></a>二、存储过程创建</h2><h3 id="2-1、创建格式-1"><a href="#2-1、创建格式-1" class="headerlink" title="2.1、创建格式"></a>2.1、创建格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create procedure 过程名()</span><br><span class="line">begin</span><br><span class="line">......</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看员工与部门表中的全信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">create procedure dept_emp()</span><br><span class="line">begin</span><br><span class="line">	select * from dept;</span><br><span class="line">	select * from emp;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call dept_emp();</span><br><span class="line">+----+-----------+</span><br><span class="line">| id | name      |</span><br><span class="line">+----+-----------+</span><br><span class="line">| 1  | 研发部 |</span><br><span class="line">| 2  | 渠道部 |</span><br><span class="line">| 3  | 教务部 |</span><br><span class="line">| 4  | 执行部 |</span><br><span class="line">+----+-----------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">| 6  | 王一 | 男    | 8768   | 2013-12-05 | NULL    |</span><br><span class="line">| 7  | 王二 | 女    | NULL   | NULL       | NULL    |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">7 行于数据集 (0.05 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、变量"><a href="#2-2、变量" class="headerlink" title="2.2、变量"></a>2.2、变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">declare 变量名 变量类型 default 默认值; #声明变量</span><br><span class="line">set 变量名=值; #变量赋值</span><br><span class="line">select 字段名 into 变量名 from 数据库表; #查询表中字段，完成变量赋值</span><br><span class="line">select 变量名; #显示变量</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看员工表中id&#x3D;1的员工的姓名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_name()</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	select name into ename from emp where id=1;</span><br><span class="line">	select ename;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_name();</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-3、变量作用域"><a href="#2-3、变量作用域" class="headerlink" title="2.3、变量作用域"></a>2.3、变量作用域</h3><p>存储过程中变量是有作用域的，作用范围在begin和end块之间，end结束变量的作用范围即结束。</p>
<p>变量可分为：</p>
<p><strong>局部变量：</strong> begin和end块之间</p>
<p><strong>全局变量：</strong> 放在所有代码块之前；传参变量是全局的，可以在多个块之间起作用</p>
<p><strong>案例：</strong></p>
<p>查看员工的人数与部门表中的部门数，并找出最高和最低工资（局部变量）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">create procedure dept_or_emp()</span><br><span class="line">begin</span><br><span class="line">	begin</span><br><span class="line">		declare e_n int default 0;</span><br><span class="line">		declare d_n int default 0;</span><br><span class="line">		select count(*) into e_n from emp;</span><br><span class="line">		select count(*) into d_n from dept;</span><br><span class="line">		select e_n,d_n;</span><br><span class="line">	end;</span><br><span class="line">	begin</span><br><span class="line">		declare max_s double default 0;</span><br><span class="line">		declare min_s double default 0;</span><br><span class="line">		select max(salary) into max_s from emp;</span><br><span class="line">		select min(salary) into min_s from emp;</span><br><span class="line">		select max_s,min_s;</span><br><span class="line">	end;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call dept_or_emp();</span><br><span class="line">+------+------+</span><br><span class="line">| e_n  | d_n  |</span><br><span class="line">+------+------+</span><br><span class="line">| 7    | 4    |</span><br><span class="line">+------+------+</span><br><span class="line">1 行于数据集 (0.26 秒)</span><br><span class="line"></span><br><span class="line">+-------+-------+</span><br><span class="line">| max_s | min_s |</span><br><span class="line">+-------+-------+</span><br><span class="line">| 9000  | 3600  |</span><br><span class="line">+-------+-------+</span><br><span class="line">1 行于数据集 (0.26 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.26 秒)</span><br></pre></td></tr></table></figure>

<p>查看员工的人数与部门表中的部门数，并找出最高和最低工资（全局变量）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">create procedure dept_or_emp1()</span><br><span class="line">begin</span><br><span class="line">	declare e_n int default 0;</span><br><span class="line">	declare d_n int default 0;</span><br><span class="line">	declare max_s double default 0;</span><br><span class="line">	declare min_s double default 0;</span><br><span class="line">	begin</span><br><span class="line">		select count(*) into e_n from emp;</span><br><span class="line">		select count(*) into d_n from dept;</span><br><span class="line">	end;</span><br><span class="line">	begin</span><br><span class="line"></span><br><span class="line">		select max(salary) into max_s from emp;</span><br><span class="line">		select min(salary) into min_s from emp;</span><br><span class="line">	end;</span><br><span class="line">	select e_n,d_n,max_s,min_s;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call dept_or_emp1();</span><br><span class="line">+------+------+</span><br><span class="line">| e_n  | d_n  |</span><br><span class="line">+------+------+</span><br><span class="line">| 7    | 4    |</span><br><span class="line">+------+------+</span><br><span class="line">1 行于数据集 (0.22 秒)</span><br><span class="line"></span><br><span class="line">+-------+-------+</span><br><span class="line">| max_s | min_s |</span><br><span class="line">+-------+-------+</span><br><span class="line">| 9000  | 3600  |</span><br><span class="line">+-------+-------+</span><br><span class="line">1 行于数据集 (0.23 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.23 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、存储过程参数"><a href="#三、存储过程参数" class="headerlink" title="三、存储过程参数"></a>三、存储过程参数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create procedure 过程名([IN|OUT|INOUT] 参数名 参数数据类型 )</span><br><span class="line">begin</span><br><span class="line">......</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>in：传入参数</p>
<p>out：传出参数</p>
<p>inout：可以传入也可以传出</p>
<h3 id="3-1、in"><a href="#3-1、in" class="headerlink" title="3.1、in"></a>3.1、in</h3><p>表示该参数的值必须在调用存储过程事指定，如果不显示指定为in,那么默认就是in类型。</p>
<p><strong>案例：</strong></p>
<p>根据传入的id查看员工的姓名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_id(eid int)</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	select name into ename from emp where id=eid;</span><br><span class="line">	select ename;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id(1);</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id(2);</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 李四 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id(9);</span><br><span class="line">+-------+</span><br><span class="line">| ename |</span><br><span class="line">+-------+</span><br><span class="line">|       |</span><br><span class="line">+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、out"><a href="#3-2、out" class="headerlink" title="3.2、out"></a>3.2、out</h3><p>out参数也需要指定，但必须是变量，不能是常量。</p>
<p><strong>案例：</strong></p>
<p>根据传入的id，返回员工的姓名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_id1(eid int,out ename varchar(20))</span><br><span class="line">begin</span><br><span class="line">	select name into ename from emp where id=eid;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; set @ename=&#x27;&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id1(3,@ename);</span><br><span class="line">Query OK, 1 rows affected, 1 warnings (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @ename;</span><br><span class="line">+--------+</span><br><span class="line">| @ename |</span><br><span class="line">+--------+</span><br><span class="line">| 王五 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、inout"><a href="#3-3、inout" class="headerlink" title="3.3、inout"></a>3.3、inout</h3><p>如果既需要传入，同时又需要传出，则可以使用INOUT类型参数</p>
<p><strong>案例：</strong></p>
<p>根据传入的id，返回员工的id和姓名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_id2(inout eid int,out ename varchar(20))</span><br><span class="line">begin</span><br><span class="line">	select id,name into eid,ename from emp where id=eid;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; set @eid=3;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; set @ename=&#x27;&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id2(@eid,@ename);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @eid,@ename;</span><br><span class="line">+------+--------+</span><br><span class="line">| @eid | @ename |</span><br><span class="line">+------+--------+</span><br><span class="line">| 3    | 王五 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、存储过程条件"><a href="#四、存储过程条件" class="headerlink" title="四、存储过程条件"></a>四、存储过程条件</h2><h3 id="4-1、if…else…end-if"><a href="#4-1、if…else…end-if" class="headerlink" title="4.1、if…else…end if"></a>4.1、if…else…end if</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">if()</span><br><span class="line">then</span><br><span class="line">...</span><br><span class="line">else</span><br><span class="line">...</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>输入一个id，判断他是否是偶数，偶数打印对应的姓名，奇数打印id</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_if_id(eid int)</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	if(eid%2=0)</span><br><span class="line">	then</span><br><span class="line">		select name into ename from emp where id=eid;</span><br><span class="line">		select ename;</span><br><span class="line">  else</span><br><span class="line">  	select eid;</span><br><span class="line">  end if;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_id(2);</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 李四 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_id(1);</span><br><span class="line">+------+</span><br><span class="line">| eid  |</span><br><span class="line">+------+</span><br><span class="line">| 1    |</span><br><span class="line">+------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="4-2、if…elseif…else…endif"><a href="#4-2、if…elseif…else…endif" class="headerlink" title="4.2、if…elseif…else…endif"></a>4.2、if…elseif…else…endif</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">if()</span><br><span class="line">then</span><br><span class="line">...</span><br><span class="line">elseif()</span><br><span class="line">then</span><br><span class="line">...</span><br><span class="line">else</span><br><span class="line">...</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>给id为1，2，3的员工加薪1000元，其他员工不变</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_if_salary(eid int)</span><br><span class="line">begin</span><br><span class="line">	declare esalary double default 0;</span><br><span class="line">	if(eid=1)</span><br><span class="line">	then</span><br><span class="line">		update emp set salary=salary+1000 where id=eid;</span><br><span class="line">  elseif(eid=2)</span><br><span class="line">  then</span><br><span class="line">  	update emp set salary=salary+1000 where id=eid;</span><br><span class="line">  elseif(eid=3)</span><br><span class="line">  then</span><br><span class="line">  	update emp set salary=salary+1000 where id=eid;	</span><br><span class="line">  else</span><br><span class="line">  	update emp set salary=salary where id=eid;	</span><br><span class="line">  end if;</span><br><span class="line">  select salary into esalary from emp where id=eid;</span><br><span class="line">  select esalary;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_salary(1);</span><br><span class="line">+---------+</span><br><span class="line">| esalary |</span><br><span class="line">+---------+</span><br><span class="line">| 8200    |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_salary(3);</span><br><span class="line">+---------+</span><br><span class="line">| esalary |</span><br><span class="line">+---------+</span><br><span class="line">| 10000   |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_salary(9);</span><br><span class="line">+---------+</span><br><span class="line">| esalary |</span><br><span class="line">+---------+</span><br><span class="line">| 0       |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="4-3、case"><a href="#4-3、case" class="headerlink" title="4.3、case"></a>4.3、case</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">case()</span><br><span class="line">when... then...</span><br><span class="line">when... then...</span><br><span class="line">else...</span><br><span class="line">end case;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>给id为1，2，3的员工加薪1000元，其他员工不变</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_case_salary(eid int)</span><br><span class="line">begin</span><br><span class="line">	declare esalary double default 0;</span><br><span class="line">	case (eid)</span><br><span class="line">	when 1 then update emp set salary=salary+1000 where id=eid;</span><br><span class="line">  when 2 then update emp set salary=salary+1000 where id=eid;</span><br><span class="line">  when 3 then update emp set salary=salary+1000 where id=eid;	</span><br><span class="line">  else</span><br><span class="line">  	update emp set salary=salary where id=eid;	</span><br><span class="line">  end case;</span><br><span class="line">  select salary into esalary from emp where id=eid;</span><br><span class="line">  select esalary;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_case_salary(3);</span><br><span class="line">+---------+</span><br><span class="line">| esalary |</span><br><span class="line">+---------+</span><br><span class="line">| 12000   |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="五、存储过程循环"><a href="#五、存储过程循环" class="headerlink" title="五、存储过程循环"></a>五、存储过程循环</h2><h3 id="5-1、while"><a href="#5-1、while" class="headerlink" title="5.1、while"></a>5.1、while</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">while(表达式) do </span><br><span class="line">......  </span><br><span class="line">end while;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>通过id查询出员工表中的前5个员工的姓名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_view()</span><br><span class="line">begin</span><br><span class="line">	declare eid int default 1;</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	while(eid&lt;=5) do</span><br><span class="line">		select name into ename from emp where id=eid;	</span><br><span class="line">		select ename;</span><br><span class="line">		set eid=eid+1;</span><br><span class="line">	end while;	</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_view();</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 李四 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 王五 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 赵六 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 吴七 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<h3 id="5-2、repeat"><a href="#5-2、repeat" class="headerlink" title="5.2、repeat"></a>5.2、repeat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">repeat</span><br><span class="line">...</span><br><span class="line">until 条件 -- 条件成立，跳出循环</span><br><span class="line">....</span><br><span class="line">end repeat;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>通过id查询出员工表中的前5个员工的姓名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_view1()</span><br><span class="line">begin</span><br><span class="line">	declare eid int default 1;</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	repeat</span><br><span class="line">		select name into ename from emp where id=eid;		</span><br><span class="line">		select ename;</span><br><span class="line">		set eid=eid+1;</span><br><span class="line">	until eid&gt;5</span><br><span class="line">	end repeat;	</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_view1();</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 李四 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 王五 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.05 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 赵六 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.06 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 吴七 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.06 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.06 秒)</span><br></pre></td></tr></table></figure>

<h2 id="六、存储过程游标"><a href="#六、存储过程游标" class="headerlink" title="六、存储过程游标"></a>六、存储过程游标</h2><p>游标是保存查询结果的临时区域</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">declare 游标名 cursor for SQL语句; #声明游标</span><br><span class="line">open 游标名; #打开游标</span><br><span class="line">fetch 游标名 into 变量名; #取出游标的值</span><br><span class="line">close 游标名; #关闭游标</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>输出员工表中的id和姓名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_all_view()</span><br><span class="line">begin</span><br><span class="line">	declare eid int default 1;</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	declare c_emp cursor for select id,name from emp;</span><br><span class="line">	open c_emp;</span><br><span class="line">	fetch c_emp into eid,ename;</span><br><span class="line">	select eid,ename;</span><br><span class="line">	close c_emp;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_all_view();</span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1    | 张三 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p>这样我们只取出了一条信息，这个时候我们需要循环？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">create procedure emp_all_view1()</span><br><span class="line">begin</span><br><span class="line">	declare eid int default 1;</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	declare c_emp cursor for select id,name from emp;</span><br><span class="line">	</span><br><span class="line">	open c_emp;</span><br><span class="line">	loop</span><br><span class="line">		fetch c_emp into eid,ename;</span><br><span class="line">		select eid,ename;</span><br><span class="line">	end loop;</span><br><span class="line">	close c_emp;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_all_view1();</span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1    | 张三 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 2    | 李四 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 3    | 王五 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 4    | 赵六 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 5    | 吴七 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 6    | 王一 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.04 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 7    | 王二 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.05 秒)</span><br><span class="line"></span><br><span class="line">No data - zero rows fetched, selected, or processed</span><br></pre></td></tr></table></figure>

<h2 id="七、存储过程操作"><a href="#七、存储过程操作" class="headerlink" title="七、存储过程操作"></a>七、存储过程操作</h2><h3 id="7-1、存储过程查看"><a href="#7-1、存储过程查看" class="headerlink" title="7.1、存储过程查看"></a>7.1、存储过程查看</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show procedure status [like &#x27;%字符串%&#x27;];</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show procedure status;</span><br><span class="line">mysql&gt;show procedure status like &#x27;%emp%&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520873279.png" alt="image20200221144121604.png"></p>
<h3 id="7-2、存储过程删除"><a href="#7-2、存储过程删除" class="headerlink" title="7.2、存储过程删除"></a>7.2、存储过程删除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop procedure 存储过程名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop procedure emp_id;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="八、自定义函数"><a href="#八、自定义函数" class="headerlink" title="八、自定义函数"></a>八、自定义函数</h2><h3 id="8-1、自定义函数创建"><a href="#8-1、自定义函数创建" class="headerlink" title="8.1、自定义函数创建"></a>8.1、自定义函数创建</h3><p>函数与存储过程最大的区别是函数必须有返回值，否则会报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create function 函数名(参数) returns 返回类型</span><br><span class="line">begin</span><br><span class="line">.....</span><br><span class="line">return 返回值;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>通过输入的id获取员工的姓名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create function getName(eid int) returns varchar(20)</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	select name into ename from emp where id=eid;</span><br><span class="line">	return ename;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521032491.png" alt="image20200221152753864.png"></p>
<p><strong>注意：</strong></p>
<p>这是我们开启了bin-log, 我们就必须指定我们的函数指定一个参数deterministic 不确定的<br>no sql 没有SQL语句，当然也不会修改数据<br>reads sql data 只是读取数据，当然也不会修改数据<br>modifies sql data 要修改数据<br>contains sql 包含了SQL语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">create function getName(eid int) returns varchar(20) reads sql data</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	select name into ename from emp where id=eid;</span><br><span class="line">	return ename;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; select getName(1);</span><br><span class="line">+------------+</span><br><span class="line">| getName(1) |</span><br><span class="line">+------------+</span><br><span class="line">| 张三     |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="8-2、自定义函数操作"><a href="#8-2、自定义函数操作" class="headerlink" title="8.2、自定义函数操作"></a>8.2、自定义函数操作</h3><h4 id="8-2-1、自定义函数查询"><a href="#8-2-1、自定义函数查询" class="headerlink" title="8.2.1、自定义函数查询"></a>8.2.1、自定义函数查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show function status [like &#x27;%字符串%&#x27;];</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show function status；</span><br><span class="line">mysql&gt; show function status like &#x27;%getName%&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521094762.png" alt="image20200221154839122.png"></p>
<h4 id="8-2-2、自定义函数删除"><a href="#8-2-2、自定义函数删除" class="headerlink" title="8.2.2、自定义函数删除"></a>8.2.2、自定义函数删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop function 函数名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop function getName;</span><br><span class="line">Query OK, 0 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<h2 id="九、触发器"><a href="#九、触发器" class="headerlink" title="九、触发器"></a>九、触发器</h2><p>触发器与函数、存储过程一样，触发器是一种对象，它能根据对表的操作时间，触发一些动作，这些动作可以是insert,update,delete等操作。</p>
<h3 id="9-1、触发器创建"><a href="#9-1、触发器创建" class="headerlink" title="9.1、触发器创建"></a>9.1、触发器创建</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create trigger 触发器名字 触发时间 触发事件 on 表 for each row</span><br><span class="line">begin</span><br><span class="line">    -- 触发器内容主体，每行用分号结尾</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>触发时间：</strong></p>
<p>当 SQL 指令发生时，会令行中数据发生变化，而每张表中对应的行有两种状态：<strong>数据操作前和操作后</strong></p>
<p>before：表中数据发生改变前的状态</p>
<p>after：表中数据发生改变后的状态</p>
<p><strong>触发事件：</strong></p>
<p>触发器是针对数据发送改变才会被触发，对应的操作只有insert、update、delete</p>
<p><strong>案例：</strong></p>
<p>向员工表中插入数据时，记录插入的id，动作，时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#创建一个操作表</span><br><span class="line">create table emp_log(</span><br><span class="line">	id int primary key auto_increment,</span><br><span class="line">  eid int,</span><br><span class="line">  eaction varchar(20),</span><br><span class="line">  etime datetime</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp_log;</span><br><span class="line">空的数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">#创建触发器</span><br><span class="line">create trigger emp_insert after insert on emp for each row</span><br><span class="line">begin</span><br><span class="line">	insert into emp_log values(null,NEW.id,&#x27;insert&#x27;,now());</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into emp(id,name,gender)values(8,&#x27;王三&#x27;,&#x27;男&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp_log;</span><br><span class="line">+----+------+---------+---------------------+</span><br><span class="line">| id | eid  | eaction | etime               |</span><br><span class="line">+----+------+---------+---------------------+</span><br><span class="line">| 1  | 8    | insert  | 2020-02-21 03:12:44 |</span><br><span class="line">+----+------+---------+---------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="9-2、触发器操作"><a href="#9-2、触发器操作" class="headerlink" title="9.2、触发器操作"></a>9.2、触发器操作</h3><h4 id="9-2-1、触发器查看"><a href="#9-2-1、触发器查看" class="headerlink" title="9.2.1、触发器查看"></a>9.2.1、触发器查看</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show triggers [like &#x27;%字符串%&#x27;];</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show triggers;</span><br><span class="line">mysql&gt; show triggers like &#x27;%emp%&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521169582.png" alt="image20200221161653246.png"></p>
<h4 id="9-2-2、触发器删除"><a href="#9-2-2、触发器删除" class="headerlink" title="9.2.2、触发器删除"></a>9.2.2、触发器删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop trigger 触发器名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop trigger emp_insert;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="十、事件"><a href="#十、事件" class="headerlink" title="十、事件"></a>十、事件</h2><p>事件取代了原先只能由操作系统的计划任务来执行的工作，而且MySQL的事件调度器可以精确到每秒钟执行一个任务，而操作系统的计划任务只能精确到每分钟执行一次。</p>
<h3 id="10-1、事件创建"><a href="#10-1、事件创建" class="headerlink" title="10.1、事件创建"></a>10.1、事件创建</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create event[IF NOT EXISTS] event_name -- 创建事件</span><br><span class="line">on schedule 时间和频率 -- on schedule 什么时候来执行</span><br><span class="line">[on completion [NOT] preserve] -- 调度计划执行完成后是否还保留</span><br><span class="line">[enable | disable] -- 是否开启事件，默认开启</span><br><span class="line">[comment &#x27;事件描述&#x27;] -- 事件的注释</span><br><span class="line">do event_body;-- 需要执行的SQL</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>单次计划任务示例</strong><br>在2019年2月1日4点执行一次 on schedule at ‘2019-02-01 04:00:00’</p>
<p><strong>重复计划执行</strong><br>on schedule every 1 second 每秒执行一次<br>on schedule every 1 minute 每分钟执行一次<br>on schedule every 1 day 没天执行一次</p>
<p><strong>指定时间范围的重复计划任务</strong><br>每天在20:00:00执行一次 on schedule every 1 day starts ‘2019-02-01 20:00:00’</p>
<p><strong>案例：</strong></p>
<p>每5秒向emp_log,插入当前日期时间记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc emp_log;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521230682.png" alt="image20200221171724196.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create event e_insert on schedule every 5 second on completion preserve</span><br><span class="line">enable</span><br><span class="line">comment &#x27;每5秒插入一次&#x27;</span><br><span class="line">do</span><br><span class="line">begin</span><br><span class="line">	insert into emp_log values(null,1,&#x27;insert1&#x27;,now());</span><br><span class="line">end;</span><br><span class="line">#do call 存储过程 </span><br><span class="line">#do select 函数名</span><br></pre></td></tr></table></figure>

<h3 id="10-2、事件操作"><a href="#10-2、事件操作" class="headerlink" title="10.2、事件操作"></a>10.2、事件操作</h3><h4 id="10-2-1、查看事件"><a href="#10-2-1、查看事件" class="headerlink" title="10.2.1、查看事件"></a>10.2.1、查看事件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show events;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show events;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521251515.png" alt="image20200221174040539.png"></p>
<h4 id="10-2-2、启用和禁用事件"><a href="#10-2-2、启用和禁用事件" class="headerlink" title="10.2.2、启用和禁用事件"></a>10.2.2、启用和禁用事件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter event 事件名 disable/enable;</span><br></pre></td></tr></table></figure>

<p><strong>禁用事件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter event e_insert disable;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp_log;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521269958.png" alt="image20200221174401961.png"></p>
<p><strong>启用事件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter event e_insert enable;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp_log;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521286648.png" alt="image20200221174452171.png"></p>
<h4 id="10-2-3、删除事件"><a href="#10-2-3、删除事件" class="headerlink" title="10.2.3、删除事件"></a>10.2.3、删除事件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop event 事件名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop event e_insert;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show events;</span><br><span class="line">空的数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h1><p> 阅读 (152640) </p>
<p> 分享</p>
<p>数据库设计(Database Design)是指对于一个给定的应用环境，构造最优的数据库模式，建立数据库及其应用系统，使之能够有效地存储数据，满足各种用户的应用需求（信息要求和处理要求）。在数据库领域内，常常把使用数据库的各类系统统称为数据库应用系统。<br>数据库设计的设计内容包括：需求分析、概念结构设计、逻辑结构设计、物理结构设计、数据库的实施和数据库的运行和维护。</p>
<h2 id="一、范式概述"><a href="#一、范式概述" class="headerlink" title="一、范式概述"></a>一、范式概述</h2><h3 id="1-1、什么是范式"><a href="#1-1、什么是范式" class="headerlink" title="1.1、什么是范式"></a>1.1、什么是范式</h3><p>好的数据库设计对数据的存储性能和后期的程序开发，都会产生重要的影响。建立科学的，规范的数据库就需要满足一些规则来优化数据的设计和存储，这些规则就称为范式。</p>
<h3 id="1-2、范式分类"><a href="#1-2、范式分类" class="headerlink" title="1.2、范式分类"></a>1.2、范式分类</h3><p>目前关系数据库有六种范式：</p>
<p>第一范式（1NF）</p>
<p>第二范式（2NF）</p>
<p>第三范式（3NF）</p>
<p>巴斯-科德范式（BCNF）、</p>
<p>第四范式(4NF）</p>
<p>第五范式（5NF，又称完美范式）</p>
<p>一般说来，数据库只需满足第三范式(3NF）就行了。</p>
<h2 id="二、第一范式"><a href="#二、第一范式" class="headerlink" title="二、第一范式"></a>二、第一范式</h2><p>确保每个字段不可再分。确保每列原子性。</p>
<p><strong>案例：</strong></p>
<p>班级表中的字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 班级id  | 班级名称   |         上课时间        |</span><br><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 1       |    一班   | 1999-09-01~2000-01-04  |</span><br><span class="line">+---------+----------+-------------------------+</span><br></pre></td></tr></table></figure>

<p>不合理。不满足第一范式，上课时间可以再分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 班级id   | 班级名称   |   开课时间  |  结课时间  |</span><br><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 1       |    一班   | 1999-09-01 | 2000-01-04|</span><br><span class="line">+---------+----------+-------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>地址包含省、市、县、地区是否需要拆分？</strong><br>如果仅仅起地址的作用，不需要统计，可以不拆分；如果有按地区统计的功能需要拆分。一般情况下拆分</p>
<h2 id="三、第二范式"><a href="#三、第二范式" class="headerlink" title="三、第二范式"></a>三、第二范式</h2><p>一个表只能描述一件事。</p>
<p>订单表中的字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 订单编号 | 产品编号   |   订购日期  |    价格    |</span><br><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 00001   | A00001   | 1999-09-01 |   35687.0 |</span><br><span class="line">+---------+----------+------------------------+</span><br></pre></td></tr></table></figure>

<p>不合理。不满足第二范式，一个表中出现了二种描述，一个是订单，一个是产品</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">订单表</span><br><span class="line">+---------+------------+</span><br><span class="line">| 订单编号 |   订购日期  |</span><br><span class="line">+---------+------------+</span><br><span class="line">| 00001   | 1999-09-01 | </span><br><span class="line">+---------+------------+</span><br><span class="line">产品表</span><br><span class="line">+----------+------------+</span><br><span class="line">| 产品编号   |   价格     |</span><br><span class="line">+----------+------------+</span><br><span class="line">| A00001   | 35687.0    |</span><br><span class="line">+----------+------------+</span><br></pre></td></tr></table></figure>

<p><strong>如下表设计是否合理？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+------+--------+--------+---------+----------+</span><br><span class="line">| 学号  | 姓名   |   年龄  | 最高气温 |  青菜价格  | </span><br><span class="line">+------+--------+--------+---------+----------+</span><br></pre></td></tr></table></figure>

<h2 id="四、第三范式"><a href="#四、第三范式" class="headerlink" title="四、第三范式"></a>四、第三范式</h2><p>在所有的非键字段中，不能有传递依赖。消除传递依赖</p>
<p>订单表中的字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 订单编号 | 订购日期   |   顾客编号  |   顾客姓名 |</span><br><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 00001   |1999-09-01|   A000001  |    Luc    |</span><br><span class="line">+---------+----------+------------------------+</span><br></pre></td></tr></table></figure>

<p>不合理。不满足第三范式，因为我们已经可以通过顾客编号知道顾客姓名，所以我们不需要定义顾客姓名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------+----------+------------+</span><br><span class="line">| 订单编号 | 订购日期   |   顾客编号  | </span><br><span class="line">+---------+----------+------------+</span><br><span class="line">| 00001   |1999-09-01|   A000001  | </span><br><span class="line">+---------+----------+------------+</span><br></pre></td></tr></table></figure>

<p>下列设计是否满足第三范式？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+------+--------+--------+---------+----------+</span><br><span class="line">| 学号  | 姓名   |   语文  |   数学   |  总分    | </span><br><span class="line">+------+--------+--------+---------+----------+</span><br></pre></td></tr></table></figure>

<p>不满足，因为语文和数学确定了，总分就确定了。<br>上面的设计不满足第三范式，但是高考分数表就是这样设计的，为什么？<br>高考分数峰值访问量非常大，这时候就是性能更重要。当性能和规范化冲突的时候，我们首选性能。这就是“反三范式”。</p>
<h1 id="MySQL数据备份与还原"><a href="#MySQL数据备份与还原" class="headerlink" title="MySQL数据备份与还原"></a>MySQL数据备份与还原</h1><p> 阅读 (290399) </p>
<p> 分享</p>
<p>MySQL 数据库管理系统通常会采用有效的措施来维护数据库的可靠性和完整性。但是在数据库的实际使用过程当中，仍存在着一些不可预估的因素，会造成数据库运行事务的异常中断，从而影响数据的正确性，甚至会破坏数据库，导致数据库中的数据部分或全部丢失。</p>
<p>数据库系统提供了备份和恢复策略来保证数据库中数据的可靠性和完整性。</p>
<h2 id="一、mysqldump备份"><a href="#一、mysqldump备份" class="headerlink" title="一、mysqldump备份"></a>一、mysqldump备份</h2><h3 id="1-1、数据库备份"><a href="#1-1、数据库备份" class="headerlink" title="1.1、数据库备份"></a>1.1、数据库备份</h3><p>数据库备份是指通过导出数据或者复制表文件的方式来制作数据库的副本。当数据库出现故障或遭到破坏时，将备份的数据库加载到系统，从而使数据库从错误状态恢复到备份时的正确状态。</p>
<h3 id="1-2、备份-x2F-还原格式"><a href="#1-2、备份-x2F-还原格式" class="headerlink" title="1.2、备份&#x2F;还原格式"></a>1.2、备份&#x2F;还原格式</h3><h4 id="1-2-1、备份"><a href="#1-2-1、备份" class="headerlink" title="1.2.1、备份"></a>1.2.1、备份</h4><p>备份整个数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">mysqldump -u用户名 -p密码 数据库名 &gt; sql文件位置</span><br><span class="line">[root@localhost mysql]# ./bin/mysqldump -uroot -p zutuanxue &gt; /usr/local/mysql/data/zutuanxue.sql</span><br></pre></td></tr></table></figure>

<p>备份数据库中的某个表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">mysqldump -u用户名 -p密码 数据库名 数据库表名1 数据库表名2&gt; sql文件位置</span><br><span class="line">[root@localhost mysql]# ./bin/mysqldump -uroot -p zutuanxue t5 t6 &gt; ./data/1.sql</span><br></pre></td></tr></table></figure>

<p>备份多个数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">mysqldump -u用户名 -p密码 --databases 数据库名1 数据库名2&gt; sql文件位置</span><br><span class="line">[root@localhost mysql]# ./bin/mysqldump -uroot -p --databases a zutuanxue &gt; ./data/2.sql</span><br></pre></td></tr></table></figure>

<p>备份系统中所有数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">mysqldump -u用户名 -p密码 --all-databases &gt; sql文件位置</span><br><span class="line">[root@localhost mysql]# ./bin/mysqldump -uroot -p --all-databases &gt; ./data/1.sql</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2、还原"><a href="#1-2-2、还原" class="headerlink" title="1.2.2、还原"></a>1.2.2、还原</h4><p>登录mysql数据库后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">source 导入文件的路径;</span><br><span class="line"></span><br><span class="line">mysql&gt; use zutuanxue;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; source /usr/local/mysql/data/zutuanxue.sql</span><br></pre></td></tr></table></figure>

<h2 id="二、图形化的备份与还原"><a href="#二、图形化的备份与还原" class="headerlink" title="二、图形化的备份与还原"></a>二、图形化的备份与还原</h2><h3 id="2-1、备份"><a href="#2-1、备份" class="headerlink" title="2.1、备份"></a>2.1、备份</h3><p>打开数据库-&gt;右击要备份的数据库</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521654232.png" alt="image20200216142554960.png"></p>
<p>选择“结构和数据”或者“结构”，跳出存储路径，存储一个sql文件</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521671030.png" alt="image20200216142651361.png"></p>
<p>点击“保存”，跳出进度窗口</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521684164.png" alt="image20200216142820725.png"></p>
<h3 id="2-2、还原"><a href="#2-2、还原" class="headerlink" title="2.2、还原"></a>2.2、还原</h3><p>打开要还原的数据库，右击“数据库”</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521704494.png" alt="image20200216143025810.png"></p>
<p>选择“运行SQL文件”</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521717747.png" alt="image20200216143109143.png"></p>
<p>选择sql“文件”所在的位置，点击“开始”</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521732225.png" alt="image20200216143212105.png"></p>
<p>运行完成后点击关闭，查看数据库下是否有表</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521748776.png" alt="image20200216143324447.png"></p>
<h1 id="MySQL-DCL语句"><a href="#MySQL-DCL语句" class="headerlink" title="MySQL DCL语句"></a>MySQL DCL语句</h1><p> 阅读 (224981) </p>
<p> 分享</p>
<p>数据控制语言 (Data Control Language) 在SQL语言中，是一种可对数据访问权进行控制的指令，它可以控制特定用户账户对数据表、查看表、存储程序、用户自定义函数等数据库对象的控制权。由 GRANT 和 REVOKE 两个指令组成。</p>
<h2 id="一、DCL概述"><a href="#一、DCL概述" class="headerlink" title="一、DCL概述"></a>一、DCL概述</h2><h3 id="1-1、什么是DCL"><a href="#1-1、什么是DCL" class="headerlink" title="1.1、什么是DCL"></a>1.1、什么是DCL</h3><p>DCL 语句主要是DBA 用来管理系统中的对象权限时所使用，一般的开发人员很少使用。</p>
<p>DCL中主要包括创建用户、给用户授权、对用户撤销授权、查询用户授权和删除用户等操作。</p>
<h3 id="1-2、为什么学习DCL"><a href="#1-2、为什么学习DCL" class="headerlink" title="1.2、为什么学习DCL"></a>1.2、为什么学习DCL</h3><p>在一个企业里面的数据库服务器上面可能同时运行着很多个项目的数据库。所以，我们应该可以根据不同的项目建立不同的用户，分配不同的权限来管理和维护数据库。</p>
<h2 id="二、用户管理"><a href="#二、用户管理" class="headerlink" title="二、用户管理"></a>二、用户管理</h2><p>mysql数据库的用户都在mysql数据库下面的user表中</p>
<h3 id="2-1、查看用户"><a href="#2-1、查看用户" class="headerlink" title="2.1、查看用户"></a>2.1、查看用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">select * from user;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from user;</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521889167.png" alt="image20200218234525100.png"></p>
<h3 id="2-2、创建用户"><a href="#2-2、创建用户" class="headerlink" title="2.2、创建用户"></a>2.2、创建用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">create user &#x27;用户名&#x27;@&#x27;主机名&#x27; identified by &#x27;密码&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>用户名：</strong> 新用户的名字</p>
<p><strong>主机名：</strong> 指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%</p>
<p><strong>密码：</strong> 密码可以为空，如果为空则该用户可以不需要密码登陆服务器</p>
<p><strong>案例：</strong></p>
<p>创建一个用户root1，只能在本机登录（localhost）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create user &#x27;root1&#x27;@&#x27;localhost&#x27; identified by &#x27;123&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521923781.png" alt="image20200219000040373.png"></p>
<p>创建一个用户root2，可以在任何主机（%）登录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create user &#x27;root2&#x27;@&#x27;%&#x27; identified by &#x27;123&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521943126.png" alt="image20200219000412028.png"></p>
<p><strong>注意：</strong></p>
<p>指定加密方式，增加用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create user &#x27;root3&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;123&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521967385.png" alt="image20200219001939522.png"></p>
<h3 id="2-3、删除用户"><a href="#2-3、删除用户" class="headerlink" title="2.3、删除用户"></a>2.3、删除用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop user &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除root1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop user root1@localhost;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<h2 id="三、密码管理"><a href="#三、密码管理" class="headerlink" title="三、密码管理"></a>三、密码管理</h2><h3 id="3-1、修改用户密码"><a href="#3-1、修改用户密码" class="headerlink" title="3.1、修改用户密码"></a>3.1、修改用户密码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter user &#x27;用户名&#x27;@&#x27;主机名&#x27; identified by &#x27;密码&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>修改root2的密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user &#x27;root2&#x27;@&#x27;%&#x27; identified by &#x27;456&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>如果想用该root2用户连接上mysql服务端的话，我们的密码修改时应该是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user &#x27;root2&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;456&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、设置管理员（root）密码"><a href="#3-2、设置管理员（root）密码" class="headerlink" title="3.2、设置管理员（root）密码"></a>3.2、设置管理员（root）密码</h3><p>清空密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql; </span><br><span class="line"></span><br><span class="line">update user set authentication_string=&#x27;&#x27; where user=&#x27;root&#x27;;#设置提root用户的密码为‘’，本地，远程 </span><br></pre></td></tr></table></figure>

<p>设置密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter user &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;Root12345&#x27;;</span><br><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;Root12345&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="四、权限管理"><a href="#四、权限管理" class="headerlink" title="四、权限管理"></a>四、权限管理</h2><h3 id="4-1、查看用户权限"><a href="#4-1、查看用户权限" class="headerlink" title="4.1、查看用户权限"></a>4.1、查看用户权限</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">show grants for &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看’root2’，’root3’及’root’权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show grants for &#x27;root2&#x27;@&#x27;%&#x27;;</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| Grants for root2@%                |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| GRANT USAGE ON *.* TO `root2`@`%` |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show grants for &#x27;root3&#x27;@&#x27;%&#x27;;</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| Grants for root3@%                |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| GRANT USAGE ON *.* TO `root3`@`%` |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show grants for &#x27;root&#x27;@&#x27;%&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521994010.png" alt="image20200219002900607.png"></p>
<h3 id="4-2、授权"><a href="#4-2、授权" class="headerlink" title="4.2、授权"></a>4.2、授权</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">grant 权限 1, 权限 2... on 数据库名.表名 to &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>grant… on …to ：</strong>授权关键字</p>
<p><strong>权限：</strong> 如select\insert\update\delete等，如果是所有用all</p>
<p><strong>数据库名.表名：</strong> 该用户可以操作哪个数据库的哪些表。如果要授予该用户对所有数据库和表的相应操作权限则可用<em>表示，如</em>.*</p>
<p><strong>’用户名’@‘主机名’ ：</strong> 注意单引号不能省略</p>
<p><strong>案例：</strong></p>
<p>给’root2’分配，增加、删除、修改、查询表的权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; grant insert,delete,update,select on zutuanxue.* to &#x27;root2&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure>

<p>给’root3’分配所有权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; grant all on *.* to &#x27;root3&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="4-3、撤销授权"><a href="#4-3、撤销授权" class="headerlink" title="4.3、撤销授权"></a>4.3、撤销授权</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">revoke 权限 1, 权限 2... on 数据库名.表名 from &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>revoke… on …from ：</strong> 撤消授权关键字</p>
<p><strong>权限：</strong> 如select\insert\update\delete等，如果是所有用all</p>
<p><strong>数据库名.表名：</strong> 该用户可以操作哪个数据库的哪些表。如果要撤消授予该用户对所有数据库和表的相应操作权限则可用<em>表示，如</em>.*</p>
<p><strong>’用户名’@‘主机名’ ：</strong> 注意单引号不能省略</p>
<p><strong>案例：</strong></p>
<p>撤消’root2’的权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; revoke all on zutuanxue.* from &#x27;root2&#x27;@&#x27;%&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL-AB复制"><a href="#MySQL-AB复制" class="headerlink" title="MySQL AB复制"></a>MySQL AB复制</h1><p> 阅读 (324687) </p>
<p> 分享</p>
<h1 id="mysql-AB复制实战"><a href="#mysql-AB复制实战" class="headerlink" title="mysql AB复制实战"></a>mysql AB复制实战</h1><p>mysqldump解决了mysql数据库的备份，它只是基于某个时间点做备份，无法解决实时备份的问题，为了解决mysql实时备份的问题，mysql官方推出了mysql主从备份机制，可以让用户通过设置mysql主从来实现数据库实时备份。</p>
<p>1、MySQL服务器宕机怎么 单点故障</p>
<p>2、数据的安全</p>
<h2 id="一、mysql-AB复制"><a href="#一、mysql-AB复制" class="headerlink" title="一、mysql AB复制"></a>一、mysql AB复制</h2><p>通过多台机器实现一主多从的方式来实现数据备份，主服务器负责让用户读写数据，从服务器负责同步主服务器数据，也可以承担用户读的任务。</p>
<p>至少两台机器</p>
<h2 id="二、AB复制原理"><a href="#二、AB复制原理" class="headerlink" title="二、AB复制原理"></a>二、AB复制原理</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/29/1603972949435.jpg" alt="mysql_ab_原理.jpg"></p>
<p>1、用户or web 对主服务器的所有修改操作都会记录在binary log日志</p>
<p>成功的修改操作【增加 修改 删除】 记录的是SQL语句 主上的一个线程</p>
<p>2、从 有两个线程</p>
<p>IO线程：负责连接主mysql【AB通信 A授权账号】提取binlog中的SQL语句到relay log</p>
<p>SQL线程：在本地执行relay log中新增的SQL语句</p>
<p>注意：AB是异步</p>
<h2 id="三、master服务器设置"><a href="#三、master服务器设置" class="headerlink" title="三、master服务器设置"></a>三、master服务器设置</h2><p><strong>实验拓扑</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/29/1603972978082.png" alt="mysql_ab拓扑图.png"></p>
<ul>
<li>安装mysql并启动</li>
<li>关闭防火墙,selinux</li>
<li>设置时间服务器</li>
<li>修改配置文件 设置server-id&#x3D;N</li>
<li>创建slave连接master的账号，用于取SQL语句</li>
</ul>
<h3 id="3-1、安装mysql并启动"><a href="#3-1、安装mysql并启动" class="headerlink" title="3.1、安装mysql并启动"></a>3.1、安装mysql并启动</h3><p>a、安装mysql</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">官网下载mysql yum源，安装</span><br><span class="line">安装方法：yum -y install mysql-server mysql</span><br></pre></td></tr></table></figure>

<p>b、启动mysql</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld;systemctl start mysqld</span><br></pre></td></tr></table></figure>

<p>c、修改root密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;98989&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、关闭防火墙-selinux"><a href="#3-2、关闭防火墙-selinux" class="headerlink" title="3.2、关闭防火墙,selinux"></a>3.2、关闭防火墙,selinux</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# systemctl disable firewalld</span><br><span class="line">[root@node1 ~]# iptables -F</span><br><span class="line">[root@node1 ~]# iptables -t nat -F</span><br><span class="line">[root@node1 ~]# sed -i -r &#x27;/SELINUX=/c\SELINUX=disabled&#x27; /etc/selinux/config</span><br><span class="line">[root@node1 ~]# reboot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">其他机器同理</span><br></pre></td></tr></table></figure>

<h3 id="3-3、设置时间服务器"><a href="#3-3、设置时间服务器" class="headerlink" title="3.3、设置时间服务器"></a>3.3、设置时间服务器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">禁止向centos默认时间服务器同步时间</span><br><span class="line">[root@node1 ~]# sed -i.bak &#x27;/^pool 2.centos.pool.ntp.org iburst$/s//#/&#x27; /etc/chrony.conf </span><br><span class="line"></span><br><span class="line">设置时间服务器为阿里云的</span><br><span class="line">[root@node1 ~]# cat &gt;&gt; /etc/chrony.conf &lt;&lt;EOF</span><br><span class="line">&gt; server ntp1.aliyun.com</span><br><span class="line">&gt; server ntp2.aliyun.com</span><br><span class="line">&gt; server ntp3.aliyun.com</span><br><span class="line">&gt; server ntp4.aliyun.com</span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line">重启服务生效</span><br><span class="line">[root@node1 ~]# systemctl restart chronyd</span><br><span class="line">查看命令，看一下时间服务器IP地址</span><br><span class="line">[root@node1 ~]# chronyc sources -v</span><br></pre></td></tr></table></figure>

<h3 id="3-4、修改配置文件-设置server-id-x3D-N"><a href="#3-4、修改配置文件-设置server-id-x3D-N" class="headerlink" title="3.4、修改配置文件 设置server-id&#x3D;N"></a>3.4、修改配置文件 设置server-id&#x3D;N</h3><p>server-id的数字越小，优先级越高。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# echo &quot;server-id=1&quot;  &gt;&gt; /etc/my.cnf.d/mysql-server.cnf </span><br></pre></td></tr></table></figure>

<p>确认binlog是开启的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果没有开启   log-bin=binlog</span><br></pre></td></tr></table></figure>

<h3 id="3-5、创建slave连接master的账号，用于取SQL语句"><a href="#3-5、创建slave连接master的账号，用于取SQL语句" class="headerlink" title="3.5、创建slave连接master的账号，用于取SQL语句"></a>3.5、创建slave连接master的账号，用于取SQL语句</h3><p><strong>登陆进入mysql: mysql -u root -p</strong></p>
<p><strong>password:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create user sko identified by &quot;98989&quot;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant replication slave on *.* to sko;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>查看主的状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show master status \G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">             File: binlog.000002</span><br><span class="line">         Position: 155</span><br><span class="line">     Binlog_Do_DB: </span><br><span class="line"> Binlog_Ignore_DB: </span><br><span class="line">Executed_Gtid_Set: </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR: </span><br><span class="line">No query specified</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br><span class="line">mysql&gt; create database db1;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">File: binlog.000002  当前主的binlog日志</span><br><span class="line">Position: 155        当前binlog日志的SQL语句记录点</span><br></pre></td></tr></table></figure>

<h2 id="四、slave设置"><a href="#四、slave设置" class="headerlink" title="四、slave设置"></a>四、slave设置</h2><p><strong>实验步骤</strong></p>
<ul>
<li>安装mysql并启动</li>
<li>关闭防火墙、selinux</li>
<li>设置时间服务器</li>
<li>修改配置文件 设置server-id&#x3D;N+x</li>
<li>设置master主信息</li>
<li>测试同步</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- [4.1] 安装mysql并启动</span><br><span class="line">- [4.2] 关闭防火墙、selinux</span><br><span class="line">- [4.3] 设置时间服务器</span><br><span class="line"></span><br><span class="line">省略......</span><br></pre></td></tr></table></figure>

<h3 id="4-3、修改配置文件-设置server-id-x3D-N-x"><a href="#4-3、修改配置文件-设置server-id-x3D-N-x" class="headerlink" title="4.3、修改配置文件 设置server-id&#x3D;N+x"></a>4.3、修改配置文件 设置server-id&#x3D;N+x</h3><p>从服务器的server-id要比主的数字大。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@node2 ~]# echo &quot;server-id=2&quot;  &gt;&gt; /etc/my.cnf.d/mysql-server.cnf </span><br></pre></td></tr></table></figure>

<h3 id="4-4、设置slave同步"><a href="#4-4、设置slave同步" class="headerlink" title="4.4、设置slave同步"></a>4.4、设置slave同步</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; stop slave;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; change master to master_host=&#x27;192.168.98.201&#x27;,master_user=&#x27;sko&#x27;,master_password=&#x27;98989&#x27;,master_log_file=&#x27;binlog.000002&#x27;;</span><br><span class="line">Query OK, 0 rows affected, 3 warnings (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="4-5、验证slave"><a href="#4-5、验证slave" class="headerlink" title="4.5、验证slave"></a>4.5、验证slave</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show slave status \G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">               Slave_IO_State: Waiting for master to send event</span><br><span class="line">                  Master_Host: 192.168.98.201</span><br><span class="line">                  Master_User: sko</span><br><span class="line">                  Master_Port: 3306</span><br><span class="line">                Connect_Retry: 60</span><br><span class="line">              Master_Log_File: binlog.000002</span><br><span class="line">          Read_Master_Log_Pos: 337</span><br><span class="line">               Relay_Log_File: node2-relay-bin.000002</span><br><span class="line">                Relay_Log_Pos: 545</span><br><span class="line">        Relay_Master_Log_File: binlog.000002</span><br><span class="line">             Slave_IO_Running: Yes</span><br><span class="line">            Slave_SQL_Running: Yes</span><br><span class="line">              Replicate_Do_DB: </span><br><span class="line">          Replicate_Ignore_DB: </span><br><span class="line">           Replicate_Do_Table: </span><br><span class="line">       Replicate_Ignore_Table: </span><br><span class="line">      Replicate_Wild_Do_Table: </span><br><span class="line">  Replicate_Wild_Ignore_Table: </span><br><span class="line">                   Last_Errno: 0</span><br><span class="line">                   Last_Error: </span><br><span class="line">                 Skip_Counter: 0</span><br><span class="line">          Exec_Master_Log_Pos: 337</span><br><span class="line">              Relay_Log_Space: 753</span><br><span class="line">              Until_Condition: None</span><br><span class="line">               Until_Log_File: </span><br><span class="line">                Until_Log_Pos: 0</span><br><span class="line">           Master_SSL_Allowed: No</span><br><span class="line">           Master_SSL_CA_File: </span><br><span class="line">           Master_SSL_CA_Path: </span><br><span class="line">              Master_SSL_Cert: </span><br><span class="line">            Master_SSL_Cipher: </span><br><span class="line">               Master_SSL_Key: </span><br><span class="line">        Seconds_Behind_Master: 0</span><br><span class="line">Master_SSL_Verify_Server_Cert: No</span><br><span class="line">                Last_IO_Errno: 0</span><br><span class="line">                Last_IO_Error: </span><br><span class="line">               Last_SQL_Errno: 0</span><br><span class="line">               Last_SQL_Error: </span><br><span class="line">  Replicate_Ignore_Server_Ids: </span><br><span class="line">             Master_Server_Id: 1</span><br><span class="line">                  Master_UUID: ae106b21-59c3-11ea-aa77-000c29b8d045</span><br><span class="line">             Master_Info_File: mysql.slave_master_info</span><br><span class="line">                    SQL_Delay: 0</span><br><span class="line">          SQL_Remaining_Delay: NULL</span><br><span class="line">      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates</span><br><span class="line">           Master_Retry_Count: 86400</span><br><span class="line">                  Master_Bind: </span><br><span class="line">      Last_IO_Error_Timestamp: </span><br><span class="line">     Last_SQL_Error_Timestamp: </span><br><span class="line">               Master_SSL_Crl: </span><br><span class="line">           Master_SSL_Crlpath: </span><br><span class="line">           Retrieved_Gtid_Set: </span><br><span class="line">            Executed_Gtid_Set: </span><br><span class="line">                Auto_Position: 0</span><br><span class="line">         Replicate_Rewrite_DB: </span><br><span class="line">                 Channel_Name: </span><br><span class="line">           Master_TLS_Version: </span><br><span class="line">       Master_public_key_path: </span><br><span class="line">        Get_master_public_key: 0</span><br><span class="line">            Network_Namespace: </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR: </span><br><span class="line">No query specified</span><br></pre></td></tr></table></figure>

<h3 id="4-6、干货分享，如何解决AB不同步的问题"><a href="#4-6、干货分享，如何解决AB不同步的问题" class="headerlink" title="4.6、干货分享，如何解决AB不同步的问题"></a>4.6、干货分享，如何解决AB不同步的问题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">Slave_IO_Running: Yes</span><br><span class="line">#该线程负责从master上拿binlog日志到relaylog，复制线程</span><br><span class="line">#该线程如果是NO，如何排除</span><br><span class="line">#1、查主从网络是否能通信，iptables  selinux</span><br><span class="line">#2、查你的repl账号在slave上是否能连接master</span><br><span class="line"></span><br><span class="line">Slave_SQL_Running: Yes</span><br><span class="line">#该线程负责将本机relaylog中的SQL语句执行一次</span><br><span class="line">#该线程为NO,如何排除</span><br><span class="line">#该线程为NO说明relaylog中的SQL语句在本地无法执行</span><br><span class="line">#1、查看mysql&gt; show slave status \G; 找到不能执行的语句</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; show slave status \G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">               Slave_IO_State: Waiting for master to send event</span><br><span class="line">                  Master_Host: 192.168.98.201</span><br><span class="line">                  Master_User: sko</span><br><span class="line">                  Master_Port: 3306</span><br><span class="line">                Connect_Retry: 60</span><br><span class="line">              Master_Log_File: binlog.000002</span><br><span class="line">          Read_Master_Log_Pos: 515</span><br><span class="line">               Relay_Log_File: node2-relay-bin.000002</span><br><span class="line">                Relay_Log_Pos: 545</span><br><span class="line">        Relay_Master_Log_File: binlog.000002</span><br><span class="line">             Slave_IO_Running: Yes</span><br><span class="line">            Slave_SQL_Running: No</span><br><span class="line">              Replicate_Do_DB: </span><br><span class="line">          Replicate_Ignore_DB: </span><br><span class="line">           Replicate_Do_Table: </span><br><span class="line">       Replicate_Ignore_Table: </span><br><span class="line">      Replicate_Wild_Do_Table: </span><br><span class="line">  Replicate_Wild_Ignore_Table: </span><br><span class="line">                   Last_Errno: 1008</span><br><span class="line">                   Last_Error: Error &#x27;Can&#x27;t drop database &#x27;db1&#x27;; database doesn&#x27;t exist&#x27; on query. Default database: &#x27;db1&#x27;. Query: &#x27;drop database db1&#x27;</span><br><span class="line">                 Skip_Counter: 0</span><br><span class="line">          Exec_Master_Log_Pos: 337</span><br><span class="line">              Relay_Log_Space: 931</span><br><span class="line">              Until_Condition: None</span><br><span class="line">               Until_Log_File: </span><br><span class="line">                Until_Log_Pos: 0</span><br><span class="line">           Master_SSL_Allowed: No</span><br><span class="line">           Master_SSL_CA_File: </span><br><span class="line">           Master_SSL_CA_Path: </span><br><span class="line">              Master_SSL_Cert: </span><br><span class="line">            Master_SSL_Cipher: </span><br><span class="line">               Master_SSL_Key: </span><br><span class="line">        Seconds_Behind_Master: NULL</span><br><span class="line">Master_SSL_Verify_Server_Cert: No</span><br><span class="line">                Last_IO_Errno: 0</span><br><span class="line">                Last_IO_Error: </span><br><span class="line">               Last_SQL_Errno: 1008</span><br><span class="line">               Last_SQL_Error: Error &#x27;Can&#x27;t drop database &#x27;db1&#x27;; database doesn&#x27;t exist&#x27; on query. Default database: &#x27;db1&#x27;. Query: &#x27;drop database db1&#x27;</span><br><span class="line">  Replicate_Ignore_Server_Ids: </span><br><span class="line">             Master_Server_Id: 1</span><br><span class="line">                  Master_UUID: ae106b21-59c3-11ea-aa77-000c29b8d045</span><br><span class="line">             Master_Info_File: mysql.slave_master_info</span><br><span class="line">                    SQL_Delay: 0</span><br><span class="line">          SQL_Remaining_Delay: NULL</span><br><span class="line">      Slave_SQL_Running_State: </span><br><span class="line">           Master_Retry_Count: 86400</span><br><span class="line">                  Master_Bind: </span><br><span class="line">      Last_IO_Error_Timestamp: </span><br><span class="line">     Last_SQL_Error_Timestamp: 200227 20:36:57</span><br><span class="line">               Master_SSL_Crl: </span><br><span class="line">           Master_SSL_Crlpath: </span><br><span class="line">           Retrieved_Gtid_Set: </span><br><span class="line">            Executed_Gtid_Set: </span><br><span class="line">                Auto_Position: 0</span><br><span class="line">         Replicate_Rewrite_DB: </span><br><span class="line">                 Channel_Name: </span><br><span class="line">           Master_TLS_Version: </span><br><span class="line">       Master_public_key_path: </span><br><span class="line">        Get_master_public_key: 0</span><br><span class="line">            Network_Namespace: </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR: </span><br><span class="line">No query specified</span><br><span class="line"></span><br><span class="line">#这段就能看到为何不能执行，原因是slave上没有db1数据库，所以不能删除。</span><br><span class="line"> Last_SQL_Error: Error &#x27;Can&#x27;t drop database &#x27;db1&#x27;; database doesn&#x27;t exist&#x27; on query. Default database: &#x27;db1&#x27;. Query: &#x27;drop database db1&#x27;</span><br><span class="line"> </span><br><span class="line">#2、最关键的一步，如何定位错误点 </span><br><span class="line">#Read_Master_Log_Pos: 515   找到目前复制的master Binlog日志的pos位置，从这个位置开始,后续在slave上做差异还原同步。</span><br><span class="line">		</span><br><span class="line">#拓展：如何找下一个POS位置，去看你master的当前binlog日志 </span><br><span class="line">#定位错误点SQL语句的位置号</span><br><span class="line">[root@node1 ~]# mysqlbinlog /var/lib/mysql/binlog.000002|egrep -B 30 &quot;drop database db1&quot;</span><br><span class="line">.........</span><br><span class="line"># at 414    错误点SQL语句的位置号</span><br><span class="line">#200227 20:36:57 server id 1  end_log_pos 515 CRC32 0x683207a9 	Query	thread_id=8	exec_time=0	error_code=0	Xid = 17</span><br><span class="line">SET TIMESTAMP=1582853817/*!*/;</span><br><span class="line">drop database db1</span><br><span class="line">..........</span><br><span class="line"></span><br><span class="line">#定位错误点SQL语句之后一条的位置号</span><br><span class="line">[root@node1 ~]# mysqlbinlog /var/lib/mysql/binlog.000002|egrep -A 30 &quot;drop database db1&quot;</span><br><span class="line">drop database db1</span><br><span class="line">/*!*/;</span><br><span class="line"># at 515   发现下一条SQL语句是515</span><br><span class="line">#200227 20:42:37 server id 1  end_log_pos 592 CRC32 0x2677edde 	Anonymous_GTID	last_committed=2	sequence_number=3	rbr_only=no	original_committed_timestamp=1582854157245396	immediate_commit_timestamp=1582854157245396	transaction_length=182</span><br><span class="line"># original_commit_timestamp=1582854157245396 (2020-02-27 20:42:37.245396 EST)</span><br><span class="line"># immediate_commit_timestamp=1582854157245396 (2020-02-27 20:42:37.245396 EST)</span><br><span class="line">/*!80001 SET @@session.original_commit_timestamp=1582854157245396*//*!*/;</span><br><span class="line">/*!80014 SET @@session.original_server_version=80017*//*!*/;</span><br><span class="line">/*!80014 SET @@session.immediate_server_version=80017*//*!*/;</span><br><span class="line">SET @@SESSION.GTID_NEXT= &#x27;ANONYMOUS&#x27;/*!*/;</span><br><span class="line"></span><br><span class="line"># at 592</span><br><span class="line">#200227 20:42:37 server id 1  end_log_pos 697 CRC32 0x3624f753 	Query	thread_id=11	exec_time=0	error_code=0	Xid = 24</span><br><span class="line">SET TIMESTAMP=1582854157/*!*/;</span><br><span class="line">/*!80016 SET @@session.default_table_encryption=0*//*!*/;</span><br><span class="line">create database db2</span><br><span class="line">/*!*/;</span><br><span class="line">....................</span><br><span class="line">#发现下一条SQL语句是515</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#通过上述命令可以查看pos 515之后的语句，-A 30 是指往后30行   -B 30是看往前30行，根据自己的需求设置</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">#3、重新设置同步指令</span><br><span class="line">mysql&gt; stop slave;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; change master to master_host=&#x27;192.168.98.201&#x27;,master_user=&#x27;sko&#x27;,master_password=&#x27;98989&#x27;,master_log_file=&#x27;binlog.000002&#x27;,master_log_pos=515;</span><br><span class="line">Query OK, 0 rows affected, 2 warnings (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL多主模型实战"><a href="#MySQL多主模型实战" class="headerlink" title="MySQL多主模型实战"></a>MySQL多主模型实战</h1><p> 阅读 (423640) </p>
<p> 分享</p>
<p>MySQL AB解决了数据备份的问题，但是当A由于某些原因宕机后，WEB服务器就没有办法在往数据库写或者读写了。线上业务中断了，完了，出事故了。这该怎么办呢？</p>
<p>本节课主要给大家讲解如果处理因为MySQL主服务器宕机造成的业务中断问题，保障MySQL业务高可用。</p>
<h2 id="一、实验拓扑图"><a href="#一、实验拓扑图" class="headerlink" title="一、实验拓扑图"></a>一、实验拓扑图</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/29/1603973198714.png" alt="mysql_aa拓扑图.png"></p>
<h2 id="二、架构原理"><a href="#二、架构原理" class="headerlink" title="二、架构原理"></a>二、架构原理</h2><p>1、MySQL互为主备，保障多台MySQL的数据强一致性。</p>
<p>2、VIP漂移，任何一台宕机都不影响数据读写</p>
<p>3、宕机服务器修复，自动同步故障间的缺失数据</p>
<h2 id="三、实验准备"><a href="#三、实验准备" class="headerlink" title="三、实验准备"></a>三、实验准备</h2><ul>
<li>机器三台并设置好IP地址</li>
<li>关闭防火墙、selinux</li>
<li>时间同步</li>
<li>node1、node2安装mysql</li>
<li>manage01部署lamp</li>
<li>上线业务并进行容灾测试</li>
<li>知识储备点：MySQL AB复制</li>
</ul>
<h2 id="四、node1、node2互为主备"><a href="#四、node1、node2互为主备" class="headerlink" title="四、node1、node2互为主备"></a>四、node1、node2互为主备</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">1、确认binlog开启</span><br><span class="line">2、设置server-id</span><br><span class="line">3、创建同步mysql用户</span><br><span class="line">4、设置同步</span><br><span class="line"></span><br><span class="line">#以node2为例</span><br><span class="line">#创建用户</span><br><span class="line">mysql&gt; create user sko2 identified by &quot;123456&quot;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant replication slave on *.* to sko2;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">#开始同步</span><br><span class="line">#同步前    主服务器生成一个新binlog开始同步，防止之前的binlog中语句无法执行</span><br><span class="line">mysql&gt; stop slave;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; change master to </span><br><span class="line">-&gt; master_host=&#x27;192.168.98.202&#x27;,</span><br><span class="line">-&gt; master_user=&#x27;sko&#x27;,</span><br><span class="line">-&gt; master_password=&#x27;98989&#x27;,</span><br><span class="line">-&gt; master_log_file=&#x27;binlog.000002&#x27;,</span><br><span class="line">-&gt; master_log_pos=xxx;</span><br><span class="line">Query OK, 0 rows affected, 3 warnings (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="五、manage01-lamp"><a href="#五、manage01-lamp" class="headerlink" title="五、manage01-lamp"></a>五、manage01-lamp</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 部署lamp业务环境</span><br><span class="line">[root@manage01 ~]# yum -y install httpd php php-mysql</span><br><span class="line">[root@manage01 ~]# systemctl start httpd</span><br><span class="line">[root@manage01 ~]# systemctl start php-fpm</span><br><span class="line">[root@manage01 ~]# vim /var/www/html/phpinfo.php</span><br><span class="line"></span><br><span class="line">#测试</span><br><span class="line">&lt;?php phpinfo(); ?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="六、配置MySQL高可用"><a href="#六、配置MySQL高可用" class="headerlink" title="六、配置MySQL高可用"></a>六、配置MySQL高可用</h2><p>1、模拟故障，将配有VIP的mysql宕机，手动回收VIP并配给另外一个运行的mysql服务器，查看业务是否正常。</p>
<p>2、恢复宕机mysql，查看宕机过程中的产生的数据是否能够从另外一个运行的mysql中恢复回来。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">参考nginx高可用部署</span><br><span class="line">https://www.zutuanxue.com/home/4/58_388</span><br></pre></td></tr></table></figure>

<h2 id="七、上线业务测试"><a href="#七、上线业务测试" class="headerlink" title="七、上线业务测试"></a>七、上线业务测试</h2><p>a、拷贝站点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@manage01 ~]# cp -r 测试站点html/* /var/www/html/</span><br></pre></td></tr></table></figure>

<p>b、安装站点<br>打开浏览器输入 <a target="_blank" rel="noopener" href="http://ip/install.php">http://IP/install.php</a></p>
<p>c、根据站点提示输入数据并查询，查询数据库数据同步情况</p>
<p>d、停止主mysql继续测试业务，确保正常工作</p>
<p>e、启动宕机mysql，确保停机期间的数据同步</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/11/15/zutuanxue-%E9%83%A8%E7%BD%B2%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/" rel="prev" title="zutuanxue-部署高可用集群">
      <i class="fa fa-chevron-left"></i> zutuanxue-部署高可用集群
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/15/zutuanxue-CI-CD%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/" rel="next" title="zutuanxue-CI/CD代码管理平台">
      zutuanxue-CI/CD代码管理平台 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">数据库介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.1.</span> <span class="nav-text">一、数据库管理系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1、数据存储方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.2、数据库管理系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E5%85%B3%E7%B3%BB"><span class="nav-number">1.1.3.</span> <span class="nav-text">1.3、数据库与数据库管理系统关系</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.2.</span> <span class="nav-text">2、数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1、数据库表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E8%AE%B0%E5%BD%95"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2、数据库表记录</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">2.2.1、数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">2.2.2、数据库表结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-3%E3%80%81%E8%AE%B0%E5%BD%95"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">2.2.3、记录</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySql%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="nav-number">2.</span> <span class="nav-text">MySql安装与使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81mysql%E6%A6%82%E8%BF%B0"><span class="nav-number">2.1.</span> <span class="nav-text">一、mysql概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.1.1.</span> <span class="nav-text">1.1、关系型数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81MySQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.1.2.</span> <span class="nav-text">1.2、MySQL数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81RDBMS%E6%9C%AF%E8%AF%AD"><span class="nav-number">2.1.3.</span> <span class="nav-text">1.3、RDBMS术语</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E3%80%81mysql%E4%B8%8B%E8%BD%BD"><span class="nav-number">2.1.4.</span> <span class="nav-text">1.4、mysql下载</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81mysql%E5%AE%89%E8%A3%85"><span class="nav-number">2.2.</span> <span class="nav-text">2、mysql安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E6%8C%87%E5%AE%9A%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.1、指定安装文件位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E8%A7%A3%E5%8E%8B"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2、解压</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E6%94%B9%E5%90%8D"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.3、改名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84"><span class="nav-number">2.2.4.</span> <span class="nav-text">2.4、创建用户组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5%E3%80%81%E4%BF%AE%E6%94%B9MySQL%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.5.</span> <span class="nav-text">2.5、修改MySQL配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6%E3%80%81%E5%88%9B%E5%BB%BAdata%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">2.2.6.</span> <span class="nav-text">2.6、创建data文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-7%E3%80%81%E6%9B%B4%E6%94%B9mysql%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90"><span class="nav-number">2.2.7.</span> <span class="nav-text">2.7、更改mysql目录权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-8%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.2.8.</span> <span class="nav-text">2.8、初始化数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-9%E3%80%81%E5%90%AF%E5%8A%A8mysql%E6%9C%8D%E5%8A%A1"><span class="nav-number">2.2.9.</span> <span class="nav-text">2.9、启动mysql服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-10%E3%80%81%E4%BF%AE%E6%94%B9root%E5%AF%86%E7%A0%81"><span class="nav-number">2.2.10.</span> <span class="nav-text">2.10、修改root密码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E3%80%81mysql%E6%93%8D%E4%BD%9C"><span class="nav-number">2.3.</span> <span class="nav-text">3、mysql操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">2.3.1.</span> <span class="nav-text">3.1、服务器操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E8%AE%BE%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5"><span class="nav-number">2.3.2.</span> <span class="nav-text">3.2、设置远程连接</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%E3%80%81mysql%E5%8D%B8%E8%BD%BD"><span class="nav-number">2.4.</span> <span class="nav-text">4、mysql卸载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E5%81%9C%E6%AD%A2mysql%E6%9C%8D%E5%8A%A1"><span class="nav-number">2.4.1.</span> <span class="nav-text">4.1、停止mysql服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81%E6%9F%A5%E6%89%BE%E6%89%80%E6%9C%89mysql%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">2.4.2.</span> <span class="nav-text">4.2、查找所有mysql相关文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3%E3%80%81%E5%88%A0%E9%99%A4%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">2.4.3.</span> <span class="nav-text">4.3、删除配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4%E3%80%81%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%E7%BB%84"><span class="nav-number">2.4.4.</span> <span class="nav-text">4.4、删除用户组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySql%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">3.</span> <span class="nav-text">MySql客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E3%80%81Navicat-for-MySQL%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85"><span class="nav-number">3.1.</span> <span class="nav-text">1、Navicat for MySQL下载与安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%B8%8B%E8%BD%BD"><span class="nav-number">3.1.1.</span> <span class="nav-text">1.1、下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E4%B8%8B%E8%BD%BD%E5%AE%8C%E6%88%90"><span class="nav-number">3.1.2.</span> <span class="nav-text">1.2、下载完成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E5%AE%89%E8%A3%85"><span class="nav-number">3.1.3.</span> <span class="nav-text">1.3、安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E3%80%81Navicat-for-MySQL%E8%BF%9E%E6%8E%A5MySQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">3.1.4.</span> <span class="nav-text">1.4、Navicat for MySQL连接MySQL数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-1%E3%80%81%E6%89%93%E5%BC%80Navicat-for-MySQL"><span class="nav-number">3.1.4.1.</span> <span class="nav-text">1.4.1、打开Navicat for MySQL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-2%E3%80%81%E5%88%9B%E5%BB%BA%E6%96%B0%E8%BF%9E%E6%8E%A5"><span class="nav-number">3.1.4.2.</span> <span class="nav-text">1.4.2、创建新连接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81Navicat-for-MySQL%E6%93%8D%E4%BD%9C-%E4%B8%8A"><span class="nav-number">3.2.</span> <span class="nav-text">2、Navicat for MySQL操作-上</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="nav-number">3.2.1.</span> <span class="nav-text">2.1、数据库操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">3.2.1.1.</span> <span class="nav-text">2.2.1、创建数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-2%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">3.2.1.2.</span> <span class="nav-text">2.2.2、删除数据库</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">3.2.2.</span> <span class="nav-text">2.2、数据库表操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1%E3%80%81%E6%96%B0%E5%BB%BA%E8%A1%A8"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">2.2.1、新建表</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E3%80%81Navicat-for-MySQL%E6%93%8D%E4%BD%9C-%E4%B8%8B"><span class="nav-number">3.3.</span> <span class="nav-text">3、Navicat for MySQL操作-下</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">3.3.1.</span> <span class="nav-text">3.1、数据库表操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-1%E3%80%81%E6%93%8D%E4%BD%9C%E8%A1%A8%E4%B8%AD%E7%BB%93%E6%9E%84%E4%B8%8E%E8%AE%B0%E5%BD%95"><span class="nav-number">3.3.1.1.</span> <span class="nav-text">3.1.1、操作表中结构与记录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-2%E3%80%81%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="nav-number">3.3.1.2.</span> <span class="nav-text">3.1.2、删除表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E5%91%BD%E4%BB%A4%E5%88%97%E7%AA%97%E5%8F%A3%E7%9A%84%E6%89%93%E5%BC%80"><span class="nav-number">3.3.2.</span> <span class="nav-text">3.2、命令列窗口的打开</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL%E4%BB%8B%E7%BB%8D"><span class="nav-number">4.</span> <span class="nav-text">SQL介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81SQL%E6%A6%82%E8%BF%B0"><span class="nav-number">4.1.</span> <span class="nav-text">一、SQL概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFSQL"><span class="nav-number">4.1.1.</span> <span class="nav-text">1.1、什么是SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81SQL%E4%BD%9C%E7%94%A8"><span class="nav-number">4.1.2.</span> <span class="nav-text">1.2、SQL作用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81SQL%E5%88%86%E7%B1%BB"><span class="nav-number">4.2.</span> <span class="nav-text">二、SQL分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81MySql%E8%AF%AD%E6%B3%95"><span class="nav-number">4.3.</span> <span class="nav-text">三、MySql语法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DDL%E8%AF%AD%E5%8F%A5"><span class="nav-number">5.</span> <span class="nav-text">DDL语句</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C-%E4%B8%8A"><span class="nav-number">5.1.</span> <span class="nav-text">一、数据库操作-上</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81DDL%E6%A6%82%E8%BF%B0"><span class="nav-number">5.1.1.</span> <span class="nav-text">1.1、DDL概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">5.1.2.</span> <span class="nav-text">1.2、创建数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">5.1.3.</span> <span class="nav-text">1.3、查看数据库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C-%E4%B8%8B"><span class="nav-number">5.2.</span> <span class="nav-text">二、数据库操作-下</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">5.2.1.</span> <span class="nav-text">2.1、修改数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">5.2.2.</span> <span class="nav-text">2.2、删除数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">5.2.3.</span> <span class="nav-text">2.3、使用数据库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%93%8D%E4%BD%9C-%E4%B8%8A"><span class="nav-number">5.3.</span> <span class="nav-text">三、数据库表操作-上</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="nav-number">5.3.1.</span> <span class="nav-text">3.1、创建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88mysql%EF%BC%89"><span class="nav-number">5.3.2.</span> <span class="nav-text">3.2、数据类型（mysql）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E3%80%81%E6%9F%A5%E7%9C%8B%E8%A1%A8"><span class="nav-number">5.3.3.</span> <span class="nav-text">3.3、查看表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%93%8D%E4%BD%9C-%E4%B8%AD"><span class="nav-number">5.4.</span> <span class="nav-text">4、数据库表操作-中</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E5%BF%AB%E9%80%9F%E5%BB%BA%E8%A1%A8"><span class="nav-number">5.4.1.</span> <span class="nav-text">4.1、快速建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="nav-number">5.4.2.</span> <span class="nav-text">4.2、删除表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%93%8D%E4%BD%9C-%E4%B8%8B"><span class="nav-number">5.5.</span> <span class="nav-text">5、数据库表操作-下</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1%E3%80%81%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="nav-number">5.5.1.</span> <span class="nav-text">5.1、修改表</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DML%E8%AF%AD%E5%8F%A5"><span class="nav-number">6.</span> <span class="nav-text">DML语句</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E8%A1%A8%E8%AE%B0%E5%BD%95%E6%93%8D%E4%BD%9C-%E4%B8%8A"><span class="nav-number">6.1.</span> <span class="nav-text">一、表记录操作-上</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81DML%E6%A6%82%E8%BF%B0"><span class="nav-number">6.1.1.</span> <span class="nav-text">1.1、DML概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E6%8F%92%E5%85%A5%E8%AE%B0%E5%BD%95"><span class="nav-number">6.1.2.</span> <span class="nav-text">1.2、插入记录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E8%A1%A8%E8%AE%B0%E5%BD%95%E6%93%8D%E4%BD%9C-%E4%B8%8B"><span class="nav-number">6.2.</span> <span class="nav-text">二、表记录操作-下</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95"><span class="nav-number">6.2.1.</span> <span class="nav-text">2.1、更新记录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E5%88%A0%E9%99%A4%E8%AE%B0%E5%BD%95"><span class="nav-number">6.2.2.</span> <span class="nav-text">2.2、删除记录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DQL%E8%AF%AD%E5%8F%A5"><span class="nav-number">7.</span> <span class="nav-text">DQL语句</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81DQL%E6%A6%82%E8%BF%B0"><span class="nav-number">7.1.</span> <span class="nav-text">一、DQL概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFDQL"><span class="nav-number">7.1.1.</span> <span class="nav-text">1.1、什么是DQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2%E6%A0%BC%E5%BC%8F"><span class="nav-number">7.1.2.</span> <span class="nav-text">1.2、记录查询格式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.2.</span> <span class="nav-text">二、记录查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.2.1.</span> <span class="nav-text">2.1、简单查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E5%88%AB%E5%90%8D%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.2.2.</span> <span class="nav-text">2.2、别名查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E6%B8%85%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.2.3.</span> <span class="nav-text">2.3、清除重复记录查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4%E3%80%81%E8%BF%90%E7%AE%97%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.2.4.</span> <span class="nav-text">2.4、运算查询</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.3.</span> <span class="nav-text">三、条件查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%E5%89%8D%E5%87%86%E5%A4%87"><span class="nav-number">7.3.1.</span> <span class="nav-text">3.1、条件查询前准备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E5%9F%BA%E7%A1%80%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">7.3.2.</span> <span class="nav-text">3.2、基础比较运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E3%80%81%E6%8F%90%E9%AB%98%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">7.3.3.</span> <span class="nav-text">3.3、提高比较运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4%E3%80%81%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">7.3.4.</span> <span class="nav-text">3.4、逻辑运算符</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DQL%E8%AF%AD%E5%8F%A5%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%88%86%E7%BB%84"><span class="nav-number">8.</span> <span class="nav-text">DQL语句排序与分组</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81DQL-%E6%8E%92%E5%BA%8F"><span class="nav-number">8.1.</span> <span class="nav-text">一、DQL-排序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E6%8E%92%E5%BA%8F%E6%A6%82%E8%BF%B0"><span class="nav-number">8.1.1.</span> <span class="nav-text">1.1、排序概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E6%8E%92%E5%BA%8F%E8%AF%AD%E6%B3%95"><span class="nav-number">8.1.2.</span> <span class="nav-text">1.2、排序语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E5%8D%95%E5%88%97%E6%8E%92%E5%BA%8F"><span class="nav-number">8.1.3.</span> <span class="nav-text">1.3、单列排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E3%80%81%E7%BB%84%E5%90%88%E6%8E%92%E5%BA%8F"><span class="nav-number">8.1.4.</span> <span class="nav-text">1.4、组合排序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81DQL-%E5%88%86%E7%BB%84"><span class="nav-number">8.2.</span> <span class="nav-text">二、DQL 分组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E5%88%86%E7%BB%84%E6%A6%82%E8%BF%B0"><span class="nav-number">8.2.1.</span> <span class="nav-text">2.1、分组概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E5%88%86%E7%BB%84%E5%BA%94%E7%94%A8"><span class="nav-number">8.2.2.</span> <span class="nav-text">2.2、分组应用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DQL-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">9.</span> <span class="nav-text">DQL-聚合函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0"><span class="nav-number">9.1.</span> <span class="nav-text">一、聚合函数概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">9.1.1.</span> <span class="nav-text">1.1、什么是聚合函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E7%9A%84%E7%89%B9%E7%82%B9"><span class="nav-number">9.1.2.</span> <span class="nav-text">1.2、聚合函数的特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E5%B8%B8%E7%94%A8%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">9.1.3.</span> <span class="nav-text">1.3、常用聚合函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E8%AF%AD%E6%B3%95"><span class="nav-number">9.1.4.</span> <span class="nav-text">1.4、聚合函数语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8"><span class="nav-number">9.2.</span> <span class="nav-text">二、聚合函数应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8"><span class="nav-number">9.2.1.</span> <span class="nav-text">2.1、聚合函数基础应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%88%86%E7%BB%84%E5%BA%94%E7%94%A8"><span class="nav-number">9.2.2.</span> <span class="nav-text">2.2、聚合函数分组应用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8%E6%89%A9%E5%B1%95"><span class="nav-number">9.3.</span> <span class="nav-text">三、聚合函数应用扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81group-concat"><span class="nav-number">9.3.1.</span> <span class="nav-text">3.1、group_concat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81with-rollup"><span class="nav-number">9.3.2.</span> <span class="nav-text">3.2、with rollup</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DQL-limit%E5%88%86%E9%A1%B5"><span class="nav-number">10.</span> <span class="nav-text">DQL-limit分页</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81limit%E6%A6%82%E8%BF%B0"><span class="nav-number">10.1.</span> <span class="nav-text">一、limit概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81limit%E8%AF%AD%E6%B3%95"><span class="nav-number">10.2.</span> <span class="nav-text">二、limit语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81limit%E5%BA%94%E7%94%A8"><span class="nav-number">10.3.</span> <span class="nav-text">三、limit应用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81limit%E5%88%86%E9%A1%B5"><span class="nav-number">10.4.</span> <span class="nav-text">四、limit分页</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E9%A1%B5"><span class="nav-number">10.4.1.</span> <span class="nav-text">4.1、什么是分页</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81MySql%E4%B8%AD%E7%9A%84%E5%88%86%E9%A1%B5"><span class="nav-number">10.4.2.</span> <span class="nav-text">4.2、MySql中的分页</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DQL-limit%E5%88%86%E9%A1%B5-1"><span class="nav-number">11.</span> <span class="nav-text">DQL-limit分页</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81limit%E6%A6%82%E8%BF%B0-1"><span class="nav-number">11.1.</span> <span class="nav-text">一、limit概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81limit%E8%AF%AD%E6%B3%95-1"><span class="nav-number">11.2.</span> <span class="nav-text">二、limit语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81limit%E5%BA%94%E7%94%A8-1"><span class="nav-number">11.3.</span> <span class="nav-text">三、limit应用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81limit%E5%88%86%E9%A1%B5-1"><span class="nav-number">11.4.</span> <span class="nav-text">四、limit分页</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E9%A1%B5-1"><span class="nav-number">11.4.1.</span> <span class="nav-text">4.1、什么是分页</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81MySql%E4%B8%AD%E7%9A%84%E5%88%86%E9%A1%B5-1"><span class="nav-number">11.4.2.</span> <span class="nav-text">4.2、MySql中的分页</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DQL-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="nav-number">12.</span> <span class="nav-text">DQL-模糊查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="nav-number">12.1.</span> <span class="nav-text">一、模糊查询概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="nav-number">12.1.1.</span> <span class="nav-text">1.1、什么是模糊查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="nav-number">12.1.2.</span> <span class="nav-text">1.2、通配符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E5%9B%9E%E9%A1%BE-%E5%92%8C"><span class="nav-number">12.1.3.</span> <span class="nav-text">1.3、回顾%和_</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-1%E3%80%81-%E5%BA%94%E7%94%A8"><span class="nav-number">12.1.3.1.</span> <span class="nav-text">1.3.1、%应用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-2%E3%80%81-%E5%BA%94%E7%94%A8"><span class="nav-number">12.1.3.2.</span> <span class="nav-text">1.3.2、_应用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E5%BA%94%E7%94%A8"><span class="nav-number">12.2.</span> <span class="nav-text">二、模糊查询应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81-%E5%BA%94%E7%94%A8"><span class="nav-number">12.2.1.</span> <span class="nav-text">2.1、[ ]应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81-%E5%BA%94%E7%94%A8"><span class="nav-number">12.2.2.</span> <span class="nav-text">2.2、[^]应用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.</span> <span class="nav-text">MySQL约束</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E7%BA%A6%E6%9D%9F%E6%A6%82%E8%BF%B0"><span class="nav-number">13.1.</span> <span class="nav-text">一、约束概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.1.1.</span> <span class="nav-text">1.1、什么是约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E7%BA%A6%E6%9D%9F%E4%BD%9C%E7%94%A8"><span class="nav-number">13.1.2.</span> <span class="nav-text">1.2、约束作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E7%BA%A6%E6%9D%9F%E5%88%86%E7%B1%BB"><span class="nav-number">13.1.3.</span> <span class="nav-text">1.3、约束分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.2.</span> <span class="nav-text">二、主键约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F%E6%A0%BC%E5%BC%8F"><span class="nav-number">13.2.1.</span> <span class="nav-text">2.1、主键约束格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F%E4%BD%9C%E7%94%A8"><span class="nav-number">13.2.2.</span> <span class="nav-text">2.2、主键约束作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F%E5%BA%94%E7%94%A8"><span class="nav-number">13.2.3.</span> <span class="nav-text">2.3、主键约束应用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E4%B8%BB%E9%94%AE%E8%87%AA%E5%A2%9E"><span class="nav-number">13.3.</span> <span class="nav-text">三、主键自增</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E4%B8%BB%E9%94%AE%E8%87%AA%E5%A2%9E%E6%A0%BC%E5%BC%8F"><span class="nav-number">13.3.1.</span> <span class="nav-text">3.1、主键自增格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E4%BF%AE%E6%94%B9%E4%B8%BB%E9%94%AE%E8%87%AA%E5%A2%9E%E8%B5%B7%E5%A7%8B%E5%80%BC"><span class="nav-number">13.3.2.</span> <span class="nav-text">3.2、修改主键自增起始值</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-1%E3%80%81%E5%88%9B%E5%BB%BA%E8%A1%A8%E5%90%8E%E4%BF%AE%E6%94%B9"><span class="nav-number">13.3.2.1.</span> <span class="nav-text">3.2.1、创建表后修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-2%E3%80%81%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E4%BF%AE%E6%94%B9"><span class="nav-number">13.3.2.2.</span> <span class="nav-text">3.2.2、创建表时修改</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E3%80%81%E8%AE%B0%E5%BD%95%E5%88%A0%E9%99%A4%E5%90%8E%E5%AF%B9%E8%87%AA%E5%A2%9E%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="nav-number">13.3.3.</span> <span class="nav-text">3.3、记录删除后对自增的影响</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1%E3%80%81delete"><span class="nav-number">13.3.3.1.</span> <span class="nav-text">3.3.1、delete</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-2%E3%80%81truncate"><span class="nav-number">13.3.3.2.</span> <span class="nav-text">3.3.2、truncate</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.4.</span> <span class="nav-text">四、唯一约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F%E6%A0%BC%E5%BC%8F"><span class="nav-number">13.4.1.</span> <span class="nav-text">4.1、唯一约束格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F%E5%BA%94%E7%94%A8"><span class="nav-number">13.4.2.</span> <span class="nav-text">4.2、唯一约束应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-1%E3%80%81%E6%8F%92%E5%85%A5%E7%9B%B8%E5%90%8C%E8%AE%B0%E5%BD%95"><span class="nav-number">13.4.2.1.</span> <span class="nav-text">4.2.1、插入相同记录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-1%E3%80%81%E6%8F%92%E5%85%A5null%E8%AE%B0%E5%BD%95"><span class="nav-number">13.4.2.2.</span> <span class="nav-text">4.2.1、插入null记录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.5.</span> <span class="nav-text">五、非空约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1%E3%80%81%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F%E6%A0%BC%E5%BC%8F"><span class="nav-number">13.5.1.</span> <span class="nav-text">5.1、非空约束格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2%E3%80%81%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F%E5%BA%94%E7%94%A8"><span class="nav-number">13.5.2.</span> <span class="nav-text">5.2、非空约束应用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="nav-number">13.6.</span> <span class="nav-text">六、默认值</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1%E3%80%81%E9%BB%98%E8%AE%A4%E5%80%BC%E6%A0%BC%E5%BC%8F"><span class="nav-number">13.6.1.</span> <span class="nav-text">6.1、默认值格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2%E3%80%81%E9%BB%98%E8%AE%A4%E5%80%BC%E5%BA%94%E7%94%A8"><span class="nav-number">13.6.2.</span> <span class="nav-text">6.2、默认值应用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%E4%BA%A7%E7%94%9F"><span class="nav-number">13.7.</span> <span class="nav-text">七、外键约束产生</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%86%97%E4%BD%99"><span class="nav-number">13.7.1.</span> <span class="nav-text">7.1、数据冗余</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2%E3%80%81%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%86%97%E4%BD%99"><span class="nav-number">13.7.2.</span> <span class="nav-text">7.2、表的数据冗余</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.7.3.</span> <span class="nav-text">7.3、为什么要使用外键约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.7.4.</span> <span class="nav-text">7.4、什么是外键约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">13.7.5.</span> <span class="nav-text"></span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.8.</span> <span class="nav-text">八、外键约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1%E3%80%81%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%E6%A0%BC%E5%BC%8F"><span class="nav-number">13.8.1.</span> <span class="nav-text">8.1、外键约束格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2%E3%80%81%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.8.2.</span> <span class="nav-text">8.2、删除外键约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81%E7%BA%A7%E8%81%94%E6%93%8D%E4%BD%9C"><span class="nav-number">13.9.</span> <span class="nav-text">九、级联操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%BA%A7%E8%81%94"><span class="nav-number">13.9.1.</span> <span class="nav-text">9.1、为什么要级联</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2%E3%80%81%E7%BA%A7%E8%81%94%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">13.9.2.</span> <span class="nav-text">9.2、级联是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2%E3%80%81%E7%BA%A7%E8%81%94%E6%93%8D%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="nav-number">13.9.3.</span> <span class="nav-text">9.2、级联操作方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.10.</span> <span class="nav-text">十、检查约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F"><span class="nav-number">13.10.1.</span> <span class="nav-text">10.1、什么是检查约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-2%E3%80%81%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F%E4%BD%BF%E7%94%A8"><span class="nav-number">13.10.2.</span> <span class="nav-text">10.2、检查约束使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-1%E3%80%81%E8%A1%8C%E7%BA%A7%E6%B7%BB%E5%8A%A0"><span class="nav-number">13.10.2.1.</span> <span class="nav-text">10.2.1、行级添加</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-2%E3%80%81%E8%A1%A8%E7%BA%A7%E6%B7%BB%E5%8A%A0"><span class="nav-number">13.10.2.2.</span> <span class="nav-text">10.2.2、表级添加</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-3%E3%80%81%E8%A1%A8%E5%90%8E%E6%B7%BB%E5%8A%A0"><span class="nav-number">13.10.2.3.</span> <span class="nav-text">10.2.3、表后添加</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-4%E3%80%81%E7%BA%A6%E6%9D%9F%E5%88%A0%E9%99%A4"><span class="nav-number">13.10.2.4.</span> <span class="nav-text">10.2.4、约束删除</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A1%A8%E4%B8%8E%E8%A1%A8%E4%B9%8B%E9%97%B4%E5%85%B3%E7%B3%BB"><span class="nav-number">14.</span> <span class="nav-text">表与表之间关系</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E8%A1%A8%E4%B8%8E%E8%A1%A8%E4%B9%8B%E9%97%B4%E5%85%B3%E7%B3%BB%E6%A6%82%E8%BF%B0"><span class="nav-number">14.1.</span> <span class="nav-text">一、表与表之间关系概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E8%A1%A8%E4%B8%8E%E8%A1%A8%E4%B9%8B%E9%97%B4%E5%85%B3%E7%B3%BB"><span class="nav-number">14.1.1.</span> <span class="nav-text">1.1、什么是表与表之间关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E8%A1%A8%E4%B8%8E%E8%A1%A8%E4%B9%8B%E9%97%B4%E5%85%B3%E7%B3%BB%E5%88%86%E7%B1%BB"><span class="nav-number">14.1.2.</span> <span class="nav-text">1.2、表与表之间关系分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-1%E3%80%81%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB"><span class="nav-number">14.1.2.1.</span> <span class="nav-text">1.2.1、一对多关系</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-2%E3%80%81%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E7%B3%BB"><span class="nav-number">14.1.2.2.</span> <span class="nav-text">1.2.2、一对一关系</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-3%E3%80%81%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB"><span class="nav-number">14.1.2.3.</span> <span class="nav-text">1.2.3、多对多关系</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%BA%94%E7%94%A8"><span class="nav-number">14.2.</span> <span class="nav-text">2、一对多应用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E4%B8%80%E5%AF%B9%E4%B8%80%E5%BA%94%E7%94%A8"><span class="nav-number">14.3.</span> <span class="nav-text">三、一对一应用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%E3%80%81%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%BA%94%E7%94%A8"><span class="nav-number">14.4.</span> <span class="nav-text">4、多对多应用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">15.</span> <span class="nav-text">多表连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="nav-number">15.1.</span> <span class="nav-text">一、多表连接查询概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">15.1.1.</span> <span class="nav-text">1.1、什么是多表查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">15.1.2.</span> <span class="nav-text">1.2、多表查询的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%88%86%E7%B1%BB"><span class="nav-number">15.1.3.</span> <span class="nav-text">1.3、多表查询分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E3%80%81%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%E7%8E%B0%E8%B1%A1"><span class="nav-number">15.1.4.</span> <span class="nav-text">1.4、笛卡尔积现象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87"><span class="nav-number">15.1.4.1.</span> <span class="nav-text">1.4.1、数据准备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-2%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF"><span class="nav-number">15.1.4.2.</span> <span class="nav-text">1.4.2、什么是笛卡尔积</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-3%E3%80%81%E6%B8%85%E9%99%A4%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF"><span class="nav-number">15.1.4.3.</span> <span class="nav-text">1.4.3、清除笛卡尔积</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">15.2.</span> <span class="nav-text">二、内连接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E9%9A%90%E5%BC%8F%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">15.2.1.</span> <span class="nav-text">2.1、隐式内连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E6%98%BE%E5%BC%8F%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">15.2.2.</span> <span class="nav-text">2.2、显式内连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E5%86%85%E8%BF%9E%E6%8E%A5%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="nav-number">15.2.3.</span> <span class="nav-text">2.3、内连接使用步骤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E5%B7%A6-x2F-%E5%8F%B3%E8%BF%9E%E6%8E%A5"><span class="nav-number">15.3.</span> <span class="nav-text">三、左&#x2F;右连接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E5%B7%A6%E8%BF%9E%E6%8E%A5"><span class="nav-number">15.3.1.</span> <span class="nav-text">3.1、左连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E5%8F%B3%E8%BF%9E%E6%8E%A5"><span class="nav-number">15.3.2.</span> <span class="nav-text">3.2、右连接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">16.</span> <span class="nav-text">MySQL子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="nav-number">16.1.</span> <span class="nav-text">一、子查询概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">16.1.1.</span> <span class="nav-text">1.1、什么是子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%89%B9%E7%82%B9"><span class="nav-number">16.1.2.</span> <span class="nav-text">1.2、子查询特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E7%9A%84%E4%B8%89%E7%A7%8D%E6%83%85%E5%86%B5"><span class="nav-number">16.1.3.</span> <span class="nav-text">1.3、子查询结果的三种情况</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%8D%95%E8%A1%8C%E5%8D%95%E5%88%97%E6%9F%A5%E8%AF%A2"><span class="nav-number">16.2.</span> <span class="nav-text">二、单行单列查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E5%8D%95%E8%A1%8C%E5%A4%9A%E5%88%97%E6%9F%A5%E8%AF%A2"><span class="nav-number">16.3.</span> <span class="nav-text">三、单行多列查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E5%A4%9A%E8%A1%8C%E5%A4%9A%E5%88%97"><span class="nav-number">16.4.</span> <span class="nav-text">四、多行多列</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E4%BA%8B%E5%8A%A1"><span class="nav-number">17.</span> <span class="nav-text">MySQL事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E4%BA%8B%E5%8A%A1%E6%A6%82%E8%BF%B0"><span class="nav-number">17.1.</span> <span class="nav-text">一、事务概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="nav-number">17.1.1.</span> <span class="nav-text">1.1、什么是事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">17.1.2.</span> <span class="nav-text">1.2、事务的应用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E4%BA%8B%E5%8A%A1%E6%8F%90%E4%BA%A4%E6%96%B9%E5%BC%8F"><span class="nav-number">17.1.3.</span> <span class="nav-text">1.3、事务提交方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E4%BA%8B%E5%8A%A1%E6%89%8B%E5%8A%A8%E6%8F%90%E4%BA%A4"><span class="nav-number">17.2.</span> <span class="nav-text">二、事务手动提交</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E6%89%8B%E5%8A%A8%E6%8F%90%E4%BA%A4%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="nav-number">17.2.1.</span> <span class="nav-text">2.1、手动提交的过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="nav-number">17.2.2.</span> <span class="nav-text">2.2、语法格式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E4%BA%8B%E5%8A%A1%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4"><span class="nav-number">17.3.</span> <span class="nav-text">三、事务自动提交</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1"><span class="nav-number">17.3.1.</span> <span class="nav-text">3.1、自动提交事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E5%8F%96%E6%B6%88%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4"><span class="nav-number">17.3.2.</span> <span class="nav-text">3.2、取消自动提交</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%E3%80%81%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86"><span class="nav-number">17.4.</span> <span class="nav-text">4、事务原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4%E5%8E%9F%E7%90%86%E5%9B%BE"><span class="nav-number">17.4.1.</span> <span class="nav-text">4.1、自动提交原理图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81%E6%89%8B%E5%8A%A8%E6%8F%90%E4%BA%A4%E5%8E%9F%E7%90%86%E5%9B%BE"><span class="nav-number">17.4.2.</span> <span class="nav-text">4.2、手动提交原理图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3%E3%80%81%E4%BA%8B%E5%8A%A1%E6%8F%90%E4%BA%A4%E6%AD%A5%E9%AA%A4"><span class="nav-number">17.4.3.</span> <span class="nav-text">4.3、事务提交步骤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5%E3%80%81%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A"><span class="nav-number">17.5.</span> <span class="nav-text">5、事务回滚</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">17.6.</span> <span class="nav-text">六、事务隔离级别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1%E3%80%81%E4%BA%8B%E5%8A%A1%E7%89%B9%E6%80%A7"><span class="nav-number">17.6.1.</span> <span class="nav-text">6.1、事务特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2%E3%80%81%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98"><span class="nav-number">17.6.2.</span> <span class="nav-text">6.2、事务的并发问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3%E3%80%81%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">17.6.3.</span> <span class="nav-text">6.3、事务的隔离级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4%E3%80%81%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E5%91%BD%E4%BB%A4"><span class="nav-number">17.6.4.</span> <span class="nav-text">6.4、事务隔离命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7%E3%80%81%E8%84%8F%E8%AF%BB"><span class="nav-number">17.7.</span> <span class="nav-text">7、脏读</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1%E3%80%81%E8%AE%BE%E7%BD%AE%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">17.7.1.</span> <span class="nav-text">7.1、设置隔离级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2%E3%80%81%E8%84%8F%E8%AF%BB"><span class="nav-number">17.7.2.</span> <span class="nav-text">7.2、脏读</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="nav-number">17.8.</span> <span class="nav-text">八、不可重复读</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1%E3%80%81%E8%AE%BE%E7%BD%AE%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">17.8.1.</span> <span class="nav-text">8.1、设置隔离级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2%E3%80%81%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="nav-number">17.8.2.</span> <span class="nav-text">8.2、不可重复读</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81%E5%B9%BB%E8%AF%BB"><span class="nav-number">17.9.</span> <span class="nav-text">九、幻读</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1%E3%80%81%E8%AE%BE%E7%BD%AE%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">17.9.1.</span> <span class="nav-text">9.1、设置隔离级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2%E3%80%81%E5%B9%BB%E8%AF%BB"><span class="nav-number">17.9.2.</span> <span class="nav-text">9.2、幻读</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E8%A7%86%E5%9B%BE"><span class="nav-number">18.</span> <span class="nav-text">MySQL视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E8%A7%86%E5%9B%BE%E6%A6%82%E8%BF%B0"><span class="nav-number">18.1.</span> <span class="nav-text">一、视图概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%86%E5%9B%BE"><span class="nav-number">18.1.1.</span> <span class="nav-text">1.1、什么是视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">18.1.2.</span> <span class="nav-text">1.2、视图的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E8%A7%86%E5%9B%BE%E8%A7%84%E5%88%99%E5%92%8C%E9%99%90%E5%88%B6"><span class="nav-number">18.1.3.</span> <span class="nav-text">1.3、视图规则和限制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E3%80%81%E8%A7%86%E5%9B%BE%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-number">18.1.4.</span> <span class="nav-text">1.4、视图的应用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E8%A7%86%E5%9B%BE%E5%88%9B%E5%BB%BA"><span class="nav-number">18.2.</span> <span class="nav-text">二、视图创建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%A0%BC%E5%BC%8F"><span class="nav-number">18.2.1.</span> <span class="nav-text">2.1、创建格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E8%A7%86%E5%9B%BE%E7%9A%84%E8%BF%90%E7%AE%97%E8%A7%84%E5%88%99"><span class="nav-number">18.2.2.</span> <span class="nav-text">2.2、视图的运算规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9D%83%E9%99%90%E8%8C%83%E5%9B%B4"><span class="nav-number">18.2.3.</span> <span class="nav-text">2.3、视图的权限范围</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4%E3%80%81%E8%A7%86%E5%9B%BE%E8%AE%B0%E5%BD%95%E4%BF%AE%E6%94%B9"><span class="nav-number">18.2.4.</span> <span class="nav-text">2.4、视图记录修改</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E8%A7%86%E5%9B%BE%E4%BF%AE%E6%94%B9"><span class="nav-number">18.3.</span> <span class="nav-text">三、视图修改</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E4%BF%AE%E6%94%B9%E6%A0%BC%E5%BC%8F"><span class="nav-number">18.3.1.</span> <span class="nav-text">3.1、修改格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81select-%E8%AF%AD%E5%8F%A5-%E4%BF%AE%E6%94%B9"><span class="nav-number">18.3.2.</span> <span class="nav-text">3.2、select 语句 修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E3%80%81select-%E8%A7%86%E5%9B%BE-%E4%BF%AE%E6%94%B9"><span class="nav-number">18.3.3.</span> <span class="nav-text">3.3、select 视图 修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4%E3%80%81create-or-replace"><span class="nav-number">18.3.4.</span> <span class="nav-text">3.4、create or replace</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E8%A7%86%E5%9B%BE%E6%9F%A5%E7%9C%8B"><span class="nav-number">18.4.</span> <span class="nav-text">四、视图查看</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E6%98%BE%E7%A4%BA%E8%A7%86%E5%9B%BE%E5%88%9B%E5%BB%BA%E6%83%85%E5%86%B5"><span class="nav-number">18.4.1.</span> <span class="nav-text">4.1、显示视图创建情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81%E6%9F%A5%E7%9C%8B%E8%A7%86%E5%9B%BE"><span class="nav-number">18.4.2.</span> <span class="nav-text">4.2、查看视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-1%E3%80%81%E6%9F%A5%E7%9C%8B%E8%A7%86%E5%9B%BE%E7%BB%93%E6%9E%84"><span class="nav-number">18.4.3.</span> <span class="nav-text">4.2.1、查看视图结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-2%E3%80%81%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A7%86%E5%9B%BE"><span class="nav-number">18.4.3.1.</span> <span class="nav-text">4.2.2、查看数据库中的视图</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E8%A7%86%E5%9B%BE%E5%88%A0%E9%99%A4%E5%8F%8A%E9%87%8D%E5%91%BD%E5%90%8D"><span class="nav-number">18.5.</span> <span class="nav-text">五、视图删除及重命名</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1%E3%80%81%E8%A7%86%E5%9B%BE%E5%88%A0%E9%99%A4"><span class="nav-number">18.5.1.</span> <span class="nav-text">5.1、视图删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2%E3%80%81%E8%A7%86%E5%9B%BE%E9%87%8D%E5%91%BD%E5%90%8D"><span class="nav-number">18.5.2.</span> <span class="nav-text">5.2、视图重命名</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-%E7%B4%A2%E5%BC%95"><span class="nav-number">19.</span> <span class="nav-text">MySQL 索引</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E7%B4%A2%E5%BC%95%E6%A6%82%E8%BF%B0"><span class="nav-number">19.1.</span> <span class="nav-text">一、索引概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E7%B4%A2%E5%BC%95"><span class="nav-number">19.1.1.</span> <span class="nav-text">1.1、什么是索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95"><span class="nav-number">19.1.2.</span> <span class="nav-text">1.2、为什么建立索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E7%B4%A2%E5%BC%95%E5%AD%98%E5%82%A8%E5%88%86%E7%B1%BB"><span class="nav-number">19.1.3.</span> <span class="nav-text">1.3、索引存储分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E3%80%81%E7%B4%A2%E5%BC%95%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">19.1.4.</span> <span class="nav-text">1.4、索引优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5%E3%80%81%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99"><span class="nav-number">19.1.5.</span> <span class="nav-text">1.5、索引的使用原则</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B"><span class="nav-number">19.2.</span> <span class="nav-text">二、索引类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E5%8D%95%E5%88%97%E7%B4%A2%E5%BC%95-%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95"><span class="nav-number">19.2.1.</span> <span class="nav-text">2.1、单列索引-普通索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E5%8D%95%E5%88%97%E7%B4%A2%E5%BC%95-%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95"><span class="nav-number">19.2.2.</span> <span class="nav-text">2.2、单列索引-唯一索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E5%8D%95%E5%88%97%E7%B4%A2%E5%BC%95-%E4%B8%BB%E9%94%AE%E7%B4%A2%E5%BC%95"><span class="nav-number">19.2.3.</span> <span class="nav-text">2.3、单列索引-主键索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4%E3%80%81%E7%BB%84%E5%90%88%E7%B4%A2%E5%BC%95"><span class="nav-number">19.2.4.</span> <span class="nav-text">2.4、组合索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5%E3%80%81%E5%85%A8%E6%96%87%E7%B4%A2%E5%BC%95"><span class="nav-number">19.2.5.</span> <span class="nav-text">2.5、全文索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6%E3%80%81%E7%A9%BA%E9%97%B4%E7%B4%A2%E5%BC%95"><span class="nav-number">19.2.6.</span> <span class="nav-text">2.6、空间索引</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E7%B4%A2%E5%BC%95%E6%93%8D%E4%BD%9C"><span class="nav-number">19.3.</span> <span class="nav-text">三、索引操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">19.3.1.</span> <span class="nav-text">3.1、创建索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="nav-number">19.3.2.</span> <span class="nav-text">3.2、删除索引</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="nav-number">20.</span> <span class="nav-text">MySQL常用函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="nav-number">20.1.</span> <span class="nav-text">一、数学函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0"><span class="nav-number">20.1.1.</span> <span class="nav-text">1.1、函数概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0"><span class="nav-number">20.1.2.</span> <span class="nav-text">1.2、数学函数概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E5%B8%B8%E7%94%A8%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="nav-number">20.1.3.</span> <span class="nav-text">1.3、常用数学函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-1%E3%80%81abs"><span class="nav-number">20.1.3.1.</span> <span class="nav-text">1.3.1、abs()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-2%E3%80%81mod"><span class="nav-number">20.1.3.2.</span> <span class="nav-text">1.3.2、mod()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-3%E3%80%81ceiling"><span class="nav-number">20.1.3.3.</span> <span class="nav-text">1.3.3、ceiling()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-4%E3%80%81round"><span class="nav-number">20.1.3.4.</span> <span class="nav-text">1.3.4、round()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5%E3%80%81pi"><span class="nav-number">20.1.3.5.</span> <span class="nav-text">1.3.5、pi()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-6%E3%80%81sqrt"><span class="nav-number">20.1.3.6.</span> <span class="nav-text">1.2.6、sqrt()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-7%E3%80%81ceil"><span class="nav-number">20.1.3.7.</span> <span class="nav-text">1.3.7、ceil()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-8%E3%80%81floor"><span class="nav-number">20.1.3.8.</span> <span class="nav-text">1.3.8、floor()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-9%E3%80%81round"><span class="nav-number">20.1.3.9.</span> <span class="nav-text">1.3.9、round()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-10%E3%80%81sign"><span class="nav-number">20.1.3.10.</span> <span class="nav-text">1.3.10、sign()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-11%E3%80%81pow-x-y"><span class="nav-number">20.1.3.11.</span> <span class="nav-text">1.3.11、pow(x,y)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-12%E3%80%81rand"><span class="nav-number">20.1.3.12.</span> <span class="nav-text">1.3.12、rand()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-13%E3%80%81truncate"><span class="nav-number">20.1.3.13.</span> <span class="nav-text">1.3.13、truncate()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">20.2.</span> <span class="nav-text">二、字符串函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0"><span class="nav-number">20.2.1.</span> <span class="nav-text">2.1、字符串函数概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E5%B8%B8%E7%94%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">20.2.2.</span> <span class="nav-text">2.2、常用字符串函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1%E3%80%81ascii"><span class="nav-number">20.2.2.1.</span> <span class="nav-text">2.2.1、ascii()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-2%E3%80%81concat"><span class="nav-number">20.2.2.2.</span> <span class="nav-text">2.2.2、concat()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-3%E3%80%81length"><span class="nav-number">20.2.2.3.</span> <span class="nav-text">2.2.3、length()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-4%E3%80%81locate"><span class="nav-number">20.2.2.4.</span> <span class="nav-text">2.2.4、locate()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-5%E3%80%81instr"><span class="nav-number">20.2.2.5.</span> <span class="nav-text">2.2.5、instr()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-6%E3%80%81left"><span class="nav-number">20.2.2.6.</span> <span class="nav-text">2.2.6、left()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-7%E3%80%81right"><span class="nav-number">20.2.2.7.</span> <span class="nav-text">2.2.7、right()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-8%E3%80%81substring"><span class="nav-number">20.2.2.8.</span> <span class="nav-text">2.2.8、substring()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-9%E3%80%81trim"><span class="nav-number">20.2.2.9.</span> <span class="nav-text">2.2.9、trim()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-10%E3%80%81ltrim-x2F-rtrim"><span class="nav-number">20.2.2.10.</span> <span class="nav-text">2.2.10、ltrim()&#x2F;rtrim()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-11%E3%80%81replace"><span class="nav-number">20.2.2.11.</span> <span class="nav-text">2.2.11、replace()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E5%B8%B8%E7%94%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">20.2.3.</span> <span class="nav-text">2.3、常用字符串函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-1%E3%80%81repeat"><span class="nav-number">20.2.3.1.</span> <span class="nav-text">2.3.1、repeat()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-2%E3%80%81reverse"><span class="nav-number">20.2.3.2.</span> <span class="nav-text">2.3.2、reverse()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-3%E3%80%81insert"><span class="nav-number">20.2.3.3.</span> <span class="nav-text">2.3.3、insert()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-4%E3%80%81elt"><span class="nav-number">20.2.3.4.</span> <span class="nav-text">2.3.4、elt()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-5%E3%80%81upper"><span class="nav-number">20.2.3.5.</span> <span class="nav-text">2.3.5、upper()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-6%E3%80%81lower"><span class="nav-number">20.2.3.6.</span> <span class="nav-text">2.3.6、lower()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-7%E3%80%81char-length"><span class="nav-number">20.2.3.7.</span> <span class="nav-text">2.3.7、char_length()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-8%E3%80%81strcmp"><span class="nav-number">20.2.3.8.</span> <span class="nav-text">2.3.8、strcmp()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-9%E3%80%81field"><span class="nav-number">20.2.3.9.</span> <span class="nav-text">2.3.9、field()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-10%E3%80%81position"><span class="nav-number">20.2.3.10.</span> <span class="nav-text">2.3.10、position()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-11%E3%80%81locate"><span class="nav-number">20.2.3.11.</span> <span class="nav-text">2.3.11、locate()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-12%E3%80%81substring-index"><span class="nav-number">20.2.3.12.</span> <span class="nav-text">2.3.12、substring_index()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="nav-number">20.3.</span> <span class="nav-text">三、日期和时间函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0"><span class="nav-number">20.3.1.</span> <span class="nav-text">3.1、日期和时间函数概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E5%B8%B8%E7%94%A8%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="nav-number">20.3.2.</span> <span class="nav-text">3.2、常用日期和时间函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-1%E3%80%81curdate"><span class="nav-number">20.3.2.1.</span> <span class="nav-text">3.2.1、curdate()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-2%E3%80%81curtime"><span class="nav-number">20.3.2.2.</span> <span class="nav-text">3.2.2、curtime()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-3%E3%80%81now"><span class="nav-number">20.3.2.3.</span> <span class="nav-text">3.2.3、now()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-4%E3%80%81month"><span class="nav-number">20.3.2.4.</span> <span class="nav-text">3.2.4、month()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-5%E3%80%81week"><span class="nav-number">20.3.2.5.</span> <span class="nav-text">3.2.5、week()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-6%E3%80%81year"><span class="nav-number">20.3.2.6.</span> <span class="nav-text">3.2.6、year()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-7%E3%80%81hour"><span class="nav-number">20.3.2.7.</span> <span class="nav-text">3.2.7、hour()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-8%E3%80%81minute"><span class="nav-number">20.3.2.8.</span> <span class="nav-text">3.2.8、minute()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-9%E3%80%81second"><span class="nav-number">20.3.2.9.</span> <span class="nav-text">3.2.9、second()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E3%80%81%E5%B8%B8%E7%94%A8%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="nav-number">20.3.3.</span> <span class="nav-text">3.3、常用日期和时间函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1%E3%80%81weekday"><span class="nav-number">20.3.3.1.</span> <span class="nav-text">3.3.1、weekday()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-2%E3%80%81dayofweek"><span class="nav-number">20.3.3.2.</span> <span class="nav-text">3.3.2、dayofweek()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-3%E3%80%81dayofmonth"><span class="nav-number">20.3.3.3.</span> <span class="nav-text">3.3.3、dayofmonth()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-4%E3%80%81dayofyear"><span class="nav-number">20.3.3.4.</span> <span class="nav-text">3.3.4、dayofyear()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-5%E3%80%81quarter"><span class="nav-number">20.3.3.5.</span> <span class="nav-text">3.3.5、quarter()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-6%E3%80%81date-add"><span class="nav-number">20.3.3.6.</span> <span class="nav-text">3.3.6、date_add()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-7%E3%80%81date-sub"><span class="nav-number">20.3.3.7.</span> <span class="nav-text">3.3.7、date_sub()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E5%87%BD%E6%95%B0"><span class="nav-number">20.4.</span> <span class="nav-text">四、系统信息函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0"><span class="nav-number">20.4.1.</span> <span class="nav-text">4.1、系统函数概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81%E5%B8%B8%E7%94%A8%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="nav-number">20.4.2.</span> <span class="nav-text">4.2、常用系统函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-1%E3%80%81version"><span class="nav-number">20.4.2.1.</span> <span class="nav-text">4.2.1、version()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-2%E3%80%81connection-id"><span class="nav-number">20.4.2.2.</span> <span class="nav-text">4.2.2、connection_id()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-3%E3%80%81database"><span class="nav-number">20.4.2.3.</span> <span class="nav-text">4.2.3、database()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-4%E3%80%81%E7%94%A8%E6%88%B7%E5%87%BD%E6%95%B0"><span class="nav-number">20.4.2.4.</span> <span class="nav-text">4.2.4、用户函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-5%E3%80%81%E5%AD%97%E7%AC%A6%E9%9B%86%E5%87%BD%E6%95%B0"><span class="nav-number">20.4.2.5.</span> <span class="nav-text">4.2.5、字符集函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0"><span class="nav-number">20.5.</span> <span class="nav-text">五、其他函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1%E3%80%81md5"><span class="nav-number">20.5.1.</span> <span class="nav-text">5.1、md5()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2%E3%80%81format"><span class="nav-number">20.5.2.</span> <span class="nav-text">5.2、format()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3%E3%80%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="nav-number">20.5.3.</span> <span class="nav-text">5.3、进制转换函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4%E3%80%81%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E5%87%BD%E6%95%B0"><span class="nav-number">20.5.4.</span> <span class="nav-text">5.4、条件判断函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-1%E3%80%81if"><span class="nav-number">20.5.4.1.</span> <span class="nav-text">5.4.1、if()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-2%E3%80%81ifnull"><span class="nav-number">20.5.4.2.</span> <span class="nav-text">5.4.2、ifnull()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-3%E3%80%81case"><span class="nav-number">20.5.4.3.</span> <span class="nav-text">5.4.3、case</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">21.</span> <span class="nav-text">MySQL 存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%A6%82%E8%BF%B0"><span class="nav-number">21.1.</span> <span class="nav-text">一、存储过程概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">21.1.1.</span> <span class="nav-text">1.1、什么是存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%89%B9%E7%82%B9"><span class="nav-number">21.1.2.</span> <span class="nav-text">1.2、存储过程特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">21.1.3.</span> <span class="nav-text">1.3、存储过程优缺点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%88%9B%E5%BB%BA"><span class="nav-number">21.2.</span> <span class="nav-text">二、存储过程创建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%A0%BC%E5%BC%8F-1"><span class="nav-number">21.2.1.</span> <span class="nav-text">2.1、创建格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E5%8F%98%E9%87%8F"><span class="nav-number">21.2.2.</span> <span class="nav-text">2.2、变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-number">21.2.3.</span> <span class="nav-text">2.3、变量作用域</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%8F%82%E6%95%B0"><span class="nav-number">21.3.</span> <span class="nav-text">三、存储过程参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81in"><span class="nav-number">21.3.1.</span> <span class="nav-text">3.1、in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81out"><span class="nav-number">21.3.2.</span> <span class="nav-text">3.2、out</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E3%80%81inout"><span class="nav-number">21.3.3.</span> <span class="nav-text">3.3、inout</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%9D%A1%E4%BB%B6"><span class="nav-number">21.4.</span> <span class="nav-text">四、存储过程条件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81if%E2%80%A6else%E2%80%A6end-if"><span class="nav-number">21.4.1.</span> <span class="nav-text">4.1、if…else…end if</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81if%E2%80%A6elseif%E2%80%A6else%E2%80%A6endif"><span class="nav-number">21.4.2.</span> <span class="nav-text">4.2、if…elseif…else…endif</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3%E3%80%81case"><span class="nav-number">21.4.3.</span> <span class="nav-text">4.3、case</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%BE%AA%E7%8E%AF"><span class="nav-number">21.5.</span> <span class="nav-text">五、存储过程循环</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1%E3%80%81while"><span class="nav-number">21.5.1.</span> <span class="nav-text">5.1、while</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2%E3%80%81repeat"><span class="nav-number">21.5.2.</span> <span class="nav-text">5.2、repeat</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%B8%B8%E6%A0%87"><span class="nav-number">21.6.</span> <span class="nav-text">六、存储过程游标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%93%8D%E4%BD%9C"><span class="nav-number">21.7.</span> <span class="nav-text">七、存储过程操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%9F%A5%E7%9C%8B"><span class="nav-number">21.7.1.</span> <span class="nav-text">7.1、存储过程查看</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%88%A0%E9%99%A4"><span class="nav-number">21.7.2.</span> <span class="nav-text">7.2、存储过程删除</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="nav-number">21.8.</span> <span class="nav-text">八、自定义函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E5%88%9B%E5%BB%BA"><span class="nav-number">21.8.1.</span> <span class="nav-text">8.1、自定义函数创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E6%93%8D%E4%BD%9C"><span class="nav-number">21.8.2.</span> <span class="nav-text">8.2、自定义函数操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-2-1%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E6%9F%A5%E8%AF%A2"><span class="nav-number">21.8.2.1.</span> <span class="nav-text">8.2.1、自定义函数查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-2-2%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E5%88%A0%E9%99%A4"><span class="nav-number">21.8.2.2.</span> <span class="nav-text">8.2.2、自定义函数删除</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">21.9.</span> <span class="nav-text">九、触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8%E5%88%9B%E5%BB%BA"><span class="nav-number">21.9.1.</span> <span class="nav-text">9.1、触发器创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">21.9.2.</span> <span class="nav-text">9.2、触发器操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#9-2-1%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8%E6%9F%A5%E7%9C%8B"><span class="nav-number">21.9.2.1.</span> <span class="nav-text">9.2.1、触发器查看</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-2-2%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8%E5%88%A0%E9%99%A4"><span class="nav-number">21.9.2.2.</span> <span class="nav-text">9.2.2、触发器删除</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E4%BA%8B%E4%BB%B6"><span class="nav-number">21.10.</span> <span class="nav-text">十、事件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1%E3%80%81%E4%BA%8B%E4%BB%B6%E5%88%9B%E5%BB%BA"><span class="nav-number">21.10.1.</span> <span class="nav-text">10.1、事件创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-2%E3%80%81%E4%BA%8B%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-number">21.10.2.</span> <span class="nav-text">10.2、事件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-1%E3%80%81%E6%9F%A5%E7%9C%8B%E4%BA%8B%E4%BB%B6"><span class="nav-number">21.10.2.1.</span> <span class="nav-text">10.2.1、查看事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-2%E3%80%81%E5%90%AF%E7%94%A8%E5%92%8C%E7%A6%81%E7%94%A8%E4%BA%8B%E4%BB%B6"><span class="nav-number">21.10.2.2.</span> <span class="nav-text">10.2.2、启用和禁用事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-3%E3%80%81%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6"><span class="nav-number">21.10.2.3.</span> <span class="nav-text">10.2.3、删除事件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="nav-number">22.</span> <span class="nav-text">数据库设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E8%8C%83%E5%BC%8F%E6%A6%82%E8%BF%B0"><span class="nav-number">22.1.</span> <span class="nav-text">一、范式概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E8%8C%83%E5%BC%8F"><span class="nav-number">22.1.1.</span> <span class="nav-text">1.1、什么是范式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E8%8C%83%E5%BC%8F%E5%88%86%E7%B1%BB"><span class="nav-number">22.1.2.</span> <span class="nav-text">1.2、范式分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F"><span class="nav-number">22.2.</span> <span class="nav-text">二、第一范式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F"><span class="nav-number">22.3.</span> <span class="nav-text">三、第二范式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="nav-number">22.4.</span> <span class="nav-text">四、第三范式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9F"><span class="nav-number">23.</span> <span class="nav-text">MySQL数据备份与还原</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81mysqldump%E5%A4%87%E4%BB%BD"><span class="nav-number">23.1.</span> <span class="nav-text">一、mysqldump备份</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD"><span class="nav-number">23.1.1.</span> <span class="nav-text">1.1、数据库备份</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E5%A4%87%E4%BB%BD-x2F-%E8%BF%98%E5%8E%9F%E6%A0%BC%E5%BC%8F"><span class="nav-number">23.1.2.</span> <span class="nav-text">1.2、备份&#x2F;还原格式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-1%E3%80%81%E5%A4%87%E4%BB%BD"><span class="nav-number">23.1.2.1.</span> <span class="nav-text">1.2.1、备份</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-2%E3%80%81%E8%BF%98%E5%8E%9F"><span class="nav-number">23.1.2.2.</span> <span class="nav-text">1.2.2、还原</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%9A%84%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9F"><span class="nav-number">23.2.</span> <span class="nav-text">二、图形化的备份与还原</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E5%A4%87%E4%BB%BD"><span class="nav-number">23.2.1.</span> <span class="nav-text">2.1、备份</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E8%BF%98%E5%8E%9F"><span class="nav-number">23.2.2.</span> <span class="nav-text">2.2、还原</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-DCL%E8%AF%AD%E5%8F%A5"><span class="nav-number">24.</span> <span class="nav-text">MySQL DCL语句</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81DCL%E6%A6%82%E8%BF%B0"><span class="nav-number">24.1.</span> <span class="nav-text">一、DCL概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFDCL"><span class="nav-number">24.1.1.</span> <span class="nav-text">1.1、什么是DCL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0DCL"><span class="nav-number">24.1.2.</span> <span class="nav-text">1.2、为什么学习DCL</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="nav-number">24.2.</span> <span class="nav-text">二、用户管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7"><span class="nav-number">24.2.1.</span> <span class="nav-text">2.1、查看用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="nav-number">24.2.2.</span> <span class="nav-text">2.2、创建用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="nav-number">24.2.3.</span> <span class="nav-text">2.3、删除用户</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86"><span class="nav-number">24.3.</span> <span class="nav-text">三、密码管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81"><span class="nav-number">24.3.1.</span> <span class="nav-text">3.1、修改用户密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E8%AE%BE%E7%BD%AE%E7%AE%A1%E7%90%86%E5%91%98%EF%BC%88root%EF%BC%89%E5%AF%86%E7%A0%81"><span class="nav-number">24.3.2.</span> <span class="nav-text">3.2、设置管理员（root）密码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="nav-number">24.4.</span> <span class="nav-text">四、权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90"><span class="nav-number">24.4.1.</span> <span class="nav-text">4.1、查看用户权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81%E6%8E%88%E6%9D%83"><span class="nav-number">24.4.2.</span> <span class="nav-text">4.2、授权</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3%E3%80%81%E6%92%A4%E9%94%80%E6%8E%88%E6%9D%83"><span class="nav-number">24.4.3.</span> <span class="nav-text">4.3、撤销授权</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-AB%E5%A4%8D%E5%88%B6"><span class="nav-number">25.</span> <span class="nav-text">MySQL AB复制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mysql-AB%E5%A4%8D%E5%88%B6%E5%AE%9E%E6%88%98"><span class="nav-number">26.</span> <span class="nav-text">mysql AB复制实战</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81mysql-AB%E5%A4%8D%E5%88%B6"><span class="nav-number">26.1.</span> <span class="nav-text">一、mysql AB复制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81AB%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86"><span class="nav-number">26.2.</span> <span class="nav-text">二、AB复制原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81master%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E7%BD%AE"><span class="nav-number">26.3.</span> <span class="nav-text">三、master服务器设置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E5%AE%89%E8%A3%85mysql%E5%B9%B6%E5%90%AF%E5%8A%A8"><span class="nav-number">26.3.1.</span> <span class="nav-text">3.1、安装mysql并启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99-selinux"><span class="nav-number">26.3.2.</span> <span class="nav-text">3.2、关闭防火墙,selinux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E3%80%81%E8%AE%BE%E7%BD%AE%E6%97%B6%E9%97%B4%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">26.3.3.</span> <span class="nav-text">3.3、设置时间服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4%E3%80%81%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E8%AE%BE%E7%BD%AEserver-id-x3D-N"><span class="nav-number">26.3.4.</span> <span class="nav-text">3.4、修改配置文件 设置server-id&#x3D;N</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5%E3%80%81%E5%88%9B%E5%BB%BAslave%E8%BF%9E%E6%8E%A5master%E7%9A%84%E8%B4%A6%E5%8F%B7%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%8F%96SQL%E8%AF%AD%E5%8F%A5"><span class="nav-number">26.3.5.</span> <span class="nav-text">3.5、创建slave连接master的账号，用于取SQL语句</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81slave%E8%AE%BE%E7%BD%AE"><span class="nav-number">26.4.</span> <span class="nav-text">四、slave设置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3%E3%80%81%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E8%AE%BE%E7%BD%AEserver-id-x3D-N-x"><span class="nav-number">26.4.1.</span> <span class="nav-text">4.3、修改配置文件 设置server-id&#x3D;N+x</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4%E3%80%81%E8%AE%BE%E7%BD%AEslave%E5%90%8C%E6%AD%A5"><span class="nav-number">26.4.2.</span> <span class="nav-text">4.4、设置slave同步</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5%E3%80%81%E9%AA%8C%E8%AF%81slave"><span class="nav-number">26.4.3.</span> <span class="nav-text">4.5、验证slave</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6%E3%80%81%E5%B9%B2%E8%B4%A7%E5%88%86%E4%BA%AB%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3AB%E4%B8%8D%E5%90%8C%E6%AD%A5%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">26.4.4.</span> <span class="nav-text">4.6、干货分享，如何解决AB不同步的问题</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E5%A4%9A%E4%B8%BB%E6%A8%A1%E5%9E%8B%E5%AE%9E%E6%88%98"><span class="nav-number">27.</span> <span class="nav-text">MySQL多主模型实战</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%AE%9E%E9%AA%8C%E6%8B%93%E6%89%91%E5%9B%BE"><span class="nav-number">27.1.</span> <span class="nav-text">一、实验拓扑图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E6%9E%B6%E6%9E%84%E5%8E%9F%E7%90%86"><span class="nav-number">27.2.</span> <span class="nav-text">二、架构原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E5%AE%9E%E9%AA%8C%E5%87%86%E5%A4%87"><span class="nav-number">27.3.</span> <span class="nav-text">三、实验准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81node1%E3%80%81node2%E4%BA%92%E4%B8%BA%E4%B8%BB%E5%A4%87"><span class="nav-number">27.4.</span> <span class="nav-text">四、node1、node2互为主备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81manage01-lamp"><span class="nav-number">27.5.</span> <span class="nav-text">五、manage01-lamp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEMySQL%E9%AB%98%E5%8F%AF%E7%94%A8"><span class="nav-number">27.6.</span> <span class="nav-text">六、配置MySQL高可用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81%E4%B8%8A%E7%BA%BF%E4%B8%9A%E5%8A%A1%E6%B5%8B%E8%AF%95"><span class="nav-number">27.7.</span> <span class="nav-text">七、上线业务测试</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2736</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">72</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
