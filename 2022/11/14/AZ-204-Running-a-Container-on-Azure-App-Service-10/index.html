<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Running a Container on Azure App ServiceWelcome to “Running a Container on Azure App Service”. To get the most from this course, you should already have some basic experience using App Service. If y">
<meta property="og:type" content="article">
<meta property="og:title" content="AZ-204-Running-a-Container-on-Azure-App-Service-10">
<meta property="og:url" content="https://example.com/2022/11/14/AZ-204-Running-a-Container-on-Azure-App-Service-10/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:description" content="Running a Container on Azure App ServiceWelcome to “Running a Container on Azure App Service”. To get the most from this course, you should already have some basic experience using App Service. If y">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-11-14T15:07:09.000Z">
<meta property="article:modified_time" content="2022-11-20T23:29:48.000Z">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/2022/11/14/AZ-204-Running-a-Container-on-Azure-App-Service-10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>AZ-204-Running-a-Container-on-Azure-App-Service-10 | Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/14/AZ-204-Running-a-Container-on-Azure-App-Service-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          AZ-204-Running-a-Container-on-Azure-App-Service-10
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-14 11:07:09" itemprop="dateCreated datePublished" datetime="2022-11-14T11:07:09-04:00">2022-11-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-20 19:29:48" itemprop="dateModified" datetime="2022-11-20T19:29:48-04:00">2022-11-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-204/" itemprop="url" rel="index"><span itemprop="name">AZ-204</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/14/AZ-204-Running-a-Container-on-Azure-App-Service-10/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/14/AZ-204-Running-a-Container-on-Azure-App-Service-10/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <span id="more"></span>

<h1 id="Running-a-Container-on-Azure-App-Service"><a href="#Running-a-Container-on-Azure-App-Service" class="headerlink" title="Running a Container on Azure App Service"></a>Running a Container on Azure App Service</h1><p>Welcome to “Running a Container on Azure App Service”. To get the most from this course, you should already have some basic experience using App Service. If you don’t, then you can take our “Introduction to Azure App Service” course.</p>
<p>In this course, I’ll give you a demonstration of how to build and run a Docker container on App Service. If you want to do the demo yourself, as well, then you’ll need to have an Azure account. If you don’t already have one, then you can create a free trial account.</p>
<p>Although App Service supports many different programming languages and frameworks, such as .NET, Java, and Python, sometimes you might need a different development stack that isn’t directly supported by App Service. In these cases, the solution is to create a custom Docker container that has all of the software you need preinstalled.</p>
<p>A Docker container is a self-contained software environment that includes an application and all of its dependencies. Because it includes everything it needs, the container is portable. That is, it can run on any system that supports Docker without having to worry about what’s installed in the underlying operating system.</p>
<p>Container images are normally stored in a central location, which makes it easier to manage them and deploy them. Microsoft offers a service called Azure Container Registry that provides this central location.</p>
<p>To deploy a container to App Service, here are the steps you need to take. First, create an instance of Azure Container Registry. Then build a container image. Next, upload it to your container registry. Then deploy it from the container registry to Azure App Service. And finally, try to connect to the application to make sure it worked.</p>
<p>Okay, let’s go through the steps. First, we’ll create the container registry. In the Azure Portal, type “container” in the search bar, and choose “Container registries”. Then click “Create”. We can choose an existing resource group, but let’s create a new one, which will make it easier to delete everything when we’re done. I’ll call it “demorg”.</p>
<p>The registry name has to be unique across all Azure customers, so I’ll call it “ca” for “Cloud Academy” and then “reg”. You’ll have to choose a different name if you do this yourself. For the SKU, choose “Basic”, which is cheaper. Then click “Review + Create” and “Create”.</p>
<p>When it’s done, click “Go to resource”. Then go to “Access keys” and set “Admin user” to “Enabled”. This is required for deploying to App Service.</p>
<p>Next, we need to build the container image, so you need to have Docker installed and running on your desktop. If you don’t already have it, then you can download it from docs.docker.com&#x2F;get-docker.</p>
<p>Once you have Docker running, you can build the container image in a variety of different ways, but we’re going to do it from Visual Studio Code, which is a free development tool from Microsoft. You can download it from code.visualstudio.com.</p>
<p>You’ll also need to install the Azure Tools extension. To install it, click on Extensions, search for “azure”, and install Azure Tools. When it’s done, the Azure logo and the Docker logo will show up over here.</p>
<p>Click the Azure logo, then click “Sign in to Azure”. It’ll bring up a browser tab where you have to select your Microsoft account. This came up on a different screen for me, which is why you can’t see it. Okay, I selected my account, so I’m logged in.</p>
<p>Now we need to connect to Azure Container Registry. Click the Docker logo. Then click “Connect Registry”, and select “Azure”.</p>
<p>Next, we need to create a Dockerfile, which is a file that tells Docker how to build a specific container. Normally, we’d need to type some instructions that tell Docker what base image to use and how to install our application and all of its dependencies, but this isn’t a Docker course, so we’re going to take a shortcut. We’re just going to copy an example container image that Microsoft has already created.</p>
<p>Click on the “Explorer” icon. Then click “Open Folder”, and create a new folder called “dockerdemo”. Now click “New File”. To save you the trouble of typing in the contents of this file, I’ve put the text in a readme file in a GitHub repository. You can find a <a target="_blank" rel="noopener" href="https://github.com/cloudacademy/azure-container-app">link</a> to the repository at the bottom of the Overview tab below this video. Copy this text, paste it into the editor, and save it. Call it “Dockerfile”.</p>
<p>These instructions tell Docker to get a .NET Core container image from the Microsoft Container Registry, which is Microsoft’s own registry. The last line tells Docker where the app is in the container, so it can start it when it runs the container.</p>
<p>Now we’re going to build the container image. Hit the F1 key. Then type “docker images”, and select “Build image”. This is what we want to name the image plus the tag to apply to it. We need to tell it that we’re going to put this image in our container registry, so we need to prefix this with the URL of the container registry. I called mine “careg”. Then type “.azurecr.io” because that’s where Azure Container Registry hosts it. Then slash and the name of the image. Then leave the tag as “latest” which means that this is the latest version of the container.</p>
<p>Okay, it’s done. Now we’re going to push the image to the container registry. Click the Docker logo. The image name shows up here. If you click on it, the “latest” tag appears, which means this is the version of the image that we just built. Now, right-click on the image and select “Push”. It brings up the image name and tag again up here, so hit “Enter”. It takes quite a while to push the image to the registry, so I’ll fast-forward.</p>
<p>All right, it’s done. To check that it worked, click the Refresh button next to “Registries”, and the image name should show up under your registry. If you click on it, the tagged version of the image is there.</p>
<p>Now that the container image is in our registry, we can finally deploy it to Azure App Service. Right-click the tagged image, and select “Deploy image to Azure App Service”. Choose a globally unique name for the app. I’m going to use “ca” and the “dockerdemo”. You’ll have to choose something else. Then select the resource group you created before. I called mine “demorg”. Then select a region.</p>
<p>Finally, select an App Service Plan. If you haven’t created one already, then you can create one from here. The pricing tier for your service plan has to be at least Basic because you can’t deploy a container to a Free plan.</p>
<p>If you have an App Service Plan and it’s not showing up here, it might be because it’s for the wrong operating system. This Docker image runs on Linux, so you can only select a Linux App Service Plan. It’s possible to deploy a Windows container to App Service, but most people use Linux.</p>
<p>Now, it’s pulling the image from the container registry and deploying it to the App Service Plan. Okay, it’s finished. Now we can make sure it worked by clicking “Open Site”. If you need to do this after the popup disappears, you can click on the Azure logo. Here’s the app we just pushed to App Service in a container. If you right-click, you can select “Browse Website”. It came up on my other monitor, so I’ll bring it over. It opened the URL of the app we just deployed on App Service. This is Microsoft’s sample app, so it worked.</p>
<p>That’s the end of this demo. If you want to avoid incurring any additional charges, then the easiest way to delete everything is to delete the resource group you created. I’ll do that with my demorg resource group.</p>
<p>And that’s it for running a container on Azure App Service. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>
<h2 id="Running-a-Container-on-Azure-App-Service-1"><a href="#Running-a-Container-on-Azure-App-Service-1" class="headerlink" title="Running a Container on Azure App Service"></a><strong>Running a Container on Azure App Service</strong></h2><p><a target="_blank" rel="noopener" href="https://github.com/cloudacademy/azure-container-app">Course GitHub repo</a></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/11/14/AZ-204-Configuring-Networking-in-Azure-App-Service-9/" rel="prev" title="AZ-204-Configuring-Networking-in-Azure-App-Service-9">
      <i class="fa fa-chevron-left"></i> AZ-204-Configuring-Networking-in-Azure-App-Service-9
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/14/AZ-204-Building-Containers-with-Azure-DevOps-11/" rel="next" title="AZ-204-Building-Containers-with-Azure-DevOps-11">
      AZ-204-Building-Containers-with-Azure-DevOps-11 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Running-a-Container-on-Azure-App-Service"><span class="nav-number">1.</span> <span class="nav-text">Running a Container on Azure App Service</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Running-a-Container-on-Azure-App-Service-1"><span class="nav-number">1.1.</span> <span class="nav-text">Running a Container on Azure App Service</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2736</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
