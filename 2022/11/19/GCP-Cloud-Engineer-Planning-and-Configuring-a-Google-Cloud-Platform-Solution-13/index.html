<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="IntroductionGreetings. Welcome to Cloud Academy’s course on configuring a Google Cloud Platform solution. I’m delighted you’ve decided to join me on what is bound to be an educational and exciting adv">
<meta property="og:type" content="article">
<meta property="og:title" content="GCP-Cloud-Engineer-Planning-and-Configuring-a-Google-Cloud-Platform-Solution-13">
<meta property="og:url" content="https://example.com/2022/11/19/GCP-Cloud-Engineer-Planning-and-Configuring-a-Google-Cloud-Platform-Solution-13/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:description" content="IntroductionGreetings. Welcome to Cloud Academy’s course on configuring a Google Cloud Platform solution. I’m delighted you’ve decided to join me on what is bound to be an educational and exciting adv">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-11-19T04:02:53.000Z">
<meta property="article:modified_time" content="2022-11-23T00:50:44.000Z">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/2022/11/19/GCP-Cloud-Engineer-Planning-and-Configuring-a-Google-Cloud-Platform-Solution-13/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>GCP-Cloud-Engineer-Planning-and-Configuring-a-Google-Cloud-Platform-Solution-13 | Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/19/GCP-Cloud-Engineer-Planning-and-Configuring-a-Google-Cloud-Platform-Solution-13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          GCP-Cloud-Engineer-Planning-and-Configuring-a-Google-Cloud-Platform-Solution-13
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-19 00:02:53" itemprop="dateCreated datePublished" datetime="2022-11-19T00:02:53-04:00">2022-11-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 20:50:44" itemprop="dateModified" datetime="2022-11-22T20:50:44-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GCP-Cloud-Engineer/" itemprop="url" rel="index"><span itemprop="name">GCP-Cloud-Engineer</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/19/GCP-Cloud-Engineer-Planning-and-Configuring-a-Google-Cloud-Platform-Solution-13/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/19/GCP-Cloud-Engineer-Planning-and-Configuring-a-Google-Cloud-Platform-Solution-13/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Greetings. Welcome to Cloud Academy’s course on configuring a <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud Platform</a> solution. I’m delighted you’ve decided to join me on what is bound to be an educational and exciting adventure into the world of Google Cloud. First, let me begin by introducing myself. My name is Jonathan, I’m one of the course developers with Cloud Academy. I worked professionally as a technical consultant specializing in DevOps data engineering and security. Now, long ago in another life, I was actually a public school teacher so I love education and teaching and I am thrilled to be teaching again, only now teaching technology.</p>
<p>This course is designed to be very practical. It’s meant for technology professionals, developers data architects, CTOs, that kind of thing, and the goal is really to help them get a solid understanding of how to build infrastructure using Google Cloud services. This course will also help you to prepare for the Google Associate Cloud Engineer Certification exam.</p>
<p>Now, to earn this certificate you need a good general knowledge of GCP Google Cloud Platform: the different solutions, how to configure them. You’ll also need to be able to use both the GCP web console and the command line.</p>
<p>Now, this course will focus mainly on the console since it’s more of an introductory course but we will also do some work with the command line tools in the video demonstrations. I want to stress, though, that this course will not cover everything that you need for the Associate Cloud Engineer exam. There are five core areas of study in that exam and as you can see from the exam guide, this course is meant to focus on area 2: Planning and Configuring a Google Cloud Solution.</p>
<p>So then, you’re probably wondering what are the prerequisites for a course like this. What do you need to already know to be successful in this class? Well, the answer is not that much. You should have some general knowledge of computers and the concept of the cloud, you know, you should know what a data center is, what is a virtual machine, and understand just the basic concept of hosting, you know, hosting infrastructure as a service. You don’t need to be a programmer but it definitely will help if you have some knowledge of software development. You know, this will help you to appreciate what each of the GCP products actually does. I also recommend having some basic networking knowledge, things like HTTP and SSL. Knowing what those are will help you to understand the GCP networking products better. So basically, if you’ve been working around technology for a while, you’re probably fine. If you’re a moderately tech-savvy adult, you should be fine.</p>
<p>So let’s get more specific. What are the actual learning objectives for this course? So in this course, there are three main takeaways related to GCP. One: the student will learn to deploy and configure <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-one-overview/">Google Cloud compute resources</a> and understand the differences between each service. Two: the student will learn to deploy and configure <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-two-overview/">Google Cloud storage resources</a> and understand the differences between each service, and then, three: the student will learn to deploy and configure <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-three-overview/">Google Cloud network resources</a> and understand the differences between each service. And you notice a pattern there obviously. In this course, we’re focusing on three things— compute, storage, network—all in the context of Google Cloud. The lesson content is therefore divided into three sections corresponding to these topics. Now, if you master these three fields deeply, computing, storage, and networking, then you will have all the tools you need to be, you know, comfortable as an infrastructure developer on GCP.</p>
<p>One last thing though before we start, I want to encourage everyone to leave feedback. Email <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> if you have any questions, comments, suggestions, concerns, we always appreciate people taking the time to do that. Now, without further ado, let’s get <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-one-overview/">started</a>.</p>
<h1 id="Section-1-Overview"><a href="#Section-1-Overview" class="headerlink" title="Section 1 Overview"></a>Section 1 Overview</h1><p>In this first section of the course, we’re going to focus on <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">Google Cloud</a> compute resources. Now, by <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction-to-google-cloud-compute-options/">compute</a> we mean virtual machines that can run workloads in the cloud at scale. If you’ve ever worked with Amazon you may know EC2, their VM service, or digital ocean, their concept is droplets. If you’re familiar with either of these then you already know a little bit about cloud compute.</p>
<p>So with <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google</a> Cloud you have three main approaches to compute: App Engine, Compute Engine, and Kubernetes Engine. We will explain how each of these work in the next lesson and then we’ll give some advice to help you know which is best for different scenarios. And then after that, we’ll follow up with two shorter lessons digging into price estimation planning and then the virtual machine types and then the section will end with our demo, a video demo, of how to actually use all these things. So if you’re ready, let’s get this party started.</p>
<h1 id="Introduction-to-Google-Cloud-Compute-Options"><a href="#Introduction-to-Google-Cloud-Compute-Options" class="headerlink" title="Introduction to Google Cloud Compute Options"></a>Introduction to Google Cloud Compute Options</h1><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-one-overview/">Cloud Compute</a> is one of <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google</a>‘s core offerings for businesses looking to run their apps in the cloud. It’s your foundation. The hardware and CPU cycles needed to actually run your software. Now, under the compute umbrella are a few different specific services and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">configuration</a> options and products. For our purposes, though we are going to focus on three main offerings—Compute Engine, App Engine, and Kubernetes Engine— and will briefly mention Cloud Functions and Cloud Run.</p>
<p>I’ll start by giving you a quick high-level distinction between these three main offerings. So Compute Engine is for deploying virtual machines or VMs much like Amazon EC2. App Engine is a serverless compute product for running code without thinking about the ends and then Kubernetes Engine is for, you guessed it, running Kubernetes workloads for customers that need container orchestration.</p>
<p>So let’s dig in a bit more on each service, starting with Compute Engine. As I’ve said, it is analogous to Amazon’s EC2 but let’s get a little more specific for folks who may not know AWS. Compute Engine is for deploying virtual machines. You can create a variety of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/compute-virtual-machine-types/">virtual machine types</a> with different amounts of CPU, storage, memory, network bandwidth, you can create VMs in different physical regions as Google Cloud has data centers all around the world and then regions have names denoting their location like us-west1. Each region can have multiple zones like A and B so a full location name for a compute resource per VM could be something like us-west1-c which denotes it’s both the region and the code. So a region is usually a part of a country like US West or US East.</p>
<p>Now, Compute Engine offers a variety of predefined machine types with different operating systems and configurations to match different workloads. There’s also the possibility of creating custom machine types if needed, if you need a specific hardware CPU memory setup. Billing for these virtual machines is done by usage per second so you only pay for exactly what you use and there are also discounts for sustained usage and sort of a commitment-based, committed pay upfront sort of commitment-based long-running jobs and the lesson after this will cover machine types in more detail and that lesson will also cover pricing in more depth.</p>
<p>Now let’s switch over and talk a little bit about App Engine. App Engine is designed to let you deploy software without managing individual servers. Instead, you pick an environment and a runtime. Runtimes are language-specific minimal container configurations, they’re runtimes for things like Python 2.7, Python 3, Java, PHP, Node, Ruby, Go. The app environment is the underlying hardware and when it comes to picking an environment there are two types of environments you can choose. There’s the standard environment and there’s the flexible environment. So the App Engine standard environment only supports very specific language runtimes, you can’t modify the environment after the fact, you can choose an instance class which will allocate a certain range of CPU and memory and auto scaling ability, however, you can’t SSH into the instances. It’s more fixed. In essence, you can think of the standard environment like a sandbox: it spins up quickly and it can auto scale pretty effectively but the main trade-off is limited ability to alter the environment over time. And then, by contrast, there is the flexible App Engine environment. Now, this does let you modify the runtime via Docker files. So if you know Docker files, you know they’re pretty flexible, you can do a lot there, you can set up SSH access, you can run pretty much any programming language, you can access other Google Cloud resources and Compute Engine instances within the network. So in short, the flexible environment does less for you but it gives you more control.</p>
<p>And then the third main Google Cloud compute service is GKE: Google Kubernetes Engine. If you’re already running or planning to run a Kubernetes application, GKE is by far one of the best ways to do it, as Kubernetes was actually originally designed by Google, so it’s a first-class integration. GKE platform gives you a very powerful API for managing a Kubernetes cluster. You can do this in the console or via CLI tools, you can quickly get information about the cluster, change config, scale pods, alter the access controls, do all kinds of administrative tasks. Kubernetes, in general, is known for being one of the most powerful container orchestration frameworks available but it is also known for being fairly complex, tough to debug. GKE removes much of this pain. With GKE you do almost everything in the console with a mouse, you get fantastic documentation, you get tutorials, you get Quick Start guides, and you get very good instrumentation and logging. GKE runs on top of Compute Engine, it’s using VM instances as GKE nodes. Node is the Kubernetes term for a single compute resource. It’s very easy to get GKE to intermingle with Compute Engine resources, if necessary. If part of your application is in Kubernetes and part of it isn’t, if they’re all within Google Cloud, it’s not a problem to get them to work together. Now, actually teaching Kubernetes itself is out of scope for this course but we will spend a little time covering how to create a cluster in the demo, where we’ll touch on it briefly.</p>
<p>Now finally, I want to mention two other lightweight GCP compute options that are available for specialized use cases and these are GCP Cloud Functions and GCP Cloud Run. Cloud Functions are analogous to the Amazon Lambda service. They let you define single purpose standalone functions that respond to specific events. Now, this is again a serverless compute option and it can work well for circumstances where all you want to do is run some specific function in response to an event that it’s watching, so kind of a targeted use case there.</p>
<p>Now, Cloud Run is also a serverless option like Cloud Functions, but the difference here is that instead of running just code you create containers. With Cloud Run, you invoke stateless containers using HTTP requests or you can have them be generated in response to specifically monitored events. Now, this is a very simple way of creating container-based workloads with all considerations of hardware abstracted away. You don’t think about even an environment like with App Engine. Now, as of the creation of this course, Cloud Run is still in beta so we’re not going to spend a lot of time on it but it is definitely worth checking out.</p>
<p>So Compute Engine, App Engine, Kubernetes Engine, your three main purposes. How do I know which to select when working on a Google Cloud application? It’s probably easiest to start by thinking about GKE. If you’re already using Kubernetes locally or with another cloud provider, then I highly recommend migrating to GKE, creating a cluster, and provisioning needed storage and compute resources take seconds and you should be able to reuse much of your existing configuration. Compute Engine and App Engine are great options for everyone outside of the Kubernetes ecosystem.</p>
<p>When it comes to these two services, the real question is how much control do you need? Maybe you like to have root access to your machines by default or maybe you’re migrating from EC2 or maybe you have an unusual environment not easily supported by App Engine. In the base case, I would recommend starting with Google Compute Engine. App Engine is generally a better choice for an earlier stage project, particularly if you can use the standard environment with its various language runtimes. The App Engine flexible environment is more of a niche solution for scenarios where you know for whatever reason you don’t want to use Compute Engine but you don’t get enough control from the standard environment.</p>
<p>So, that’s it. At a pretty high level you now know enough about GCP compute offerings to be dangerous. You can differentiate GKE, Compute Engine, App Engine, and you should know a little bit about Cloud Run and Cloud Functions. You should be able to pick what is best for a given project. Very cool stuff. So in the next lesson, we’ll take a deeper dive in VM instance types, we’ll learn about cost and hardware optimization as we tour Compute Engine’s menu of options. See you there.</p>
<h1 id="Compute-Virtual-Machine-Types"><a href="#Compute-Virtual-Machine-Types" class="headerlink" title="Compute Virtual Machine Types"></a>Compute Virtual Machine Types</h1><p>Now, in this lesson, we’re going to go over the various types of virtual machines you can launch in <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction-to-google-cloud-compute-options/">Google Cloud Compute Engine</a>. Our emphasis here will be on cost savings and usage, so as we discussed in the previous section, Cloud Compute offers a range of instance types based upon our apps’ resource needs, we can also choose from a variety of Linux operating system flavors as well as Windows.</p>
<p>Now, as far as hardware goes, there are three main families of instance types. There are compute-optimized, memory-optimized, and sole tenant. Compute-optimized instances offer the highest performance per core with a range of options going up to instances with four hundred and sixteen virtual CPUs. Now, memory-optimized instances are for memory-intensive workloads. You can get up to several thousand gigs of memory in a single VM if needed, and then finally, there are sole tenant offerings that isolate your VMs and workloads on their own physical servers. So, see the documentation for a more detailed list of the exact instance type names but these are the three basic categories.</p>
<p>Now, by default, your Cloud Compute instances are billed based on uptime. The cost is calculated per second and the price is largely based on the instance type, however, region also plays a factor. So for example, an instance with a lot of memory will cost more than one with very little. Instances in us-east4 Virginia might cost a little more than instances in us-east1, which is South Carolina. Usually, these region price differences are fairly small but it’s good to be aware of them. </p>
<p>Now, so far we’ve been talking about standard, on-demand instances that are created upon request. There are actually two other types of instances that we need to consider to fully understand Cloud Compute, and these are custom machine types and preemptable VMs. So, let’s start with the former. Custom machine types. Now, even though GCP, <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud Platform</a>, it offers a wide variety of Linux operating systems and Windows VM types, sometimes we want to get really specific about memory and CPU configuration for our workload. So for example, we may find that GCP’s high-memory instance types have more CPU than we need or vice versa. Maybe we need a lot of CPU and little memory. With the custom machine type option you can actually specify the exact amount of memory and the exact amount of virtual CPUs, provided it’s an even number. You need an even number, of course. Now, you can do this with a single command. Here’s an example here at gcloud compute instances create my VM you just do - - custom CPU - - custom memory.</p>
<p>There are many different operating systems that are compatible with the custom machine type API. You can pick Debian, CentOS, OpenSUSE, Ubuntu. Windows is also an option, whether via the console or the command-line. Custom machine types are straightforward to set up and launch for workloads that need them. Now, we should talk a bit about preemptable VMs, these are very interesting, these are actually short-lived VM instances that run for up to 24 hours at a time. Now the upside, because they’re so short-lived, is that they are extremely cheap—to 80 percent less than a regular VM.</p>
<p>Now, the downside here is that they are not suitable for any kind of fault-tolerant workload. With preemptable instances, you don’t know when they might die. They’re guaranteed to shut down within 24 hours, you can create a managed instance group of preemptable VMs if you want to try to keep a certain number up and running, however, the thing is, preemptable VMs come from excess GCP Compute capacity so because of that, there’s no guarantee that a certain number of preemptable VMs will be available, particularly if you need a specific type.</p>
<p>So, you know, for example, you might have a managed instance group of 30 preemptable VMs and maybe they’ll run for a while, but if there’s not sufficient capacity in that GCP region you may be down to only 20 instances for a while, you might just lose ten of them and because of the inability to guarantee availability, preemptable VMs are not appropriate for any use case that requires consistent uptime or stability. They’re great for batch processing, short jobs that can tolerate instances coming and going. And also note that preemptable instances are available for predefined instances and for the custom machine types that we talked about a minute ago.</p>
<p>By combining a custom machine type with a preemptable VM you can really optimize your costs for fault-tolerant jobs. Preemptable VMs are not the only method for controlling costs, there are actually two other really important discount options available on GCP. These are sustained use discounts and committed use discounts. Now, the latter, as the name implies (committed use), is a discount for paying for a certain amount of usage time upfront. This is similar to like Amazon reserved instances. With committed use contracts, you can pay upfront for one year or three years of compute service and get a discount of 50 to 70% of the cost and actually when I say pay upfront, you don’t actually pay the full year or three years cost right away, the billing is actually still done monthly so you don’t have to worry about some huge you know three years of compute paying upfront. You pay monthly and, you know, if you stop using the instance after six months, you’ll still get billed for the full year, but it’s still a really great option if you can actually plan ahead with your infrastructure and you know that something’s gonna run for a year or two years this is the way to save money and so because, you know, you get a 50 to 70% discount.</p>
<p>So on top of that, there’s also something called a sustained use discount. Sustained use discounts, these kick in automatically if you run a VM instance for a certain percentage of time over the course of a month. So, for example, you can get a price cut of around 10% if you run an instance for more than 25 percent of the month and if you run that same instance for 100 percent of the month with no break, you can get up to a 30 percent discount in the cost.</p>
<p>Now, I’m using a little bit of imprecise language, this is kind of rough amounts because the exact discount varies a lot by instance type, but in general, the more you run your instances the bigger the discount. Sustained use discounts are really great because you don’t have to think about them at all. They apply to custom machine types as well and they kick in automatically. Now, the only exception, the only instances that do not get sustained use discounts are App Engine flexible environment instances and also Cloud Dataflow VMs. Very specific, if you use Cloud Dataflow it’s not applicable for sustained use discounts. So with this combination of preemptable VMs with sustained use discounts with committed use discounts, you have three really good ways to save money on GCP.</p>
<p>Consider your workload to identify which is best for you, you only need compute instances for very very small periods of time, if so, definitely go with the preemptable VMs. Very, very cheap. If, by contrast, you know for certain that your instances have to run for a year or longer, then the committed user discounts can cut your bill in half, no additional upfront cost and if you can be certain of either of these scenarios or well actually no, if you can’t be certain of either of these scenarios, well then take solace in the fact that there are automatic sustained use discounts that kick in, you know, without any effort or decision-making on your end. So we will stop there.</p>
<p>You should now have a good grounding of GCP instance types and cost optimization. Congrats. Now, to help you save even more, we’ll go over the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/gcp-price-calculator/">GCP price calculator tool</a> in the next lesson. See you there!</p>
<h1 id="GCP-Price-Calculator"><a href="#GCP-Price-Calculator" class="headerlink" title="GCP Price Calculator"></a>GCP Price Calculator</h1><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud Platform</a> has probably the best price planning tool available compared to any other cloud provider and I’m not being paid to say that. The reason we’re doing a separate lesson on pricing is largely because their price calculator is really good. It’s very flexible and it’s a very good place to start when <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">planning a GCP project</a>.</p>
<p>So the first thing you’ll notice about the calculator web app is that it breaks out everything by product. You can select everything from Compute Engine to App Engine, storage products like Datastore, everything in between, just about every single GCP product is selectable and for each one you can completely describe what sort of component you want to add to your system.</p>
<p>So, for example, we can go to the Compute Engine tab, we can go in there, we can select an instance type, region, instance count, time commitment, several other options, and then after that, once we have a thorough detailed view of our <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction-to-google-cloud-compute-options/">compute architecture</a>, we click Add to estimate and we immediately get a monthly cost.</p>
<p>Now, the cool thing is you can do this for several services or multiple times for a single product. So you can actually name each component which is kind of cool. So you can have a breakdown with something like dev environment storage and production environment storage, where you have multiple instances of storage products or the same storage product. I’m gonna add like test environment GKE, and see each component broken down by price in the tool with a grand total at the bottom.</p>
<p>Now, estimates, once they’re generated, you can save them by clicking save estimate, and this will generate a link that you can share with people you know your team or whoever you need to. There’s also an email estimate button that you will, that, you know, as you guessed it, it’ll email it to an address of your choice. These are two nice little quality of life features that help you share and preserve estimates. It’s particularly nice if you have a really complex architecture that you’re proposing and you need to share with a lot of different people a lot of specifically configured products.</p>
<p>One other handy thing about this GCP pricing tool is that Google Cloud actually exposes an API for querying pricing data and on top of that, there’s actually a simplified web page as well if you just want to see a text list of prices. So for the API this is really good for tooling. For example, if you want to create a script that generates reports or tracks prices, you can use the API along with the Google Cloud CLI tools and there or the libraries and it’ll just you can it’ll do that for you.</p>
<p>The GCP SKU web page, by contrast, is really just a simple search page with a list of prices by service. So this is helpful if you just want to get a general sense or show it to someone, basic prices by service. So in the demo video, we’re gonna go a little bit over the pricing calculator. It’s fairly intuitive but we’ll show you how to run through a couple of simple scenarios, generate a few different estimates for different use cases. And that’s basically it.</p>
<p>Now you have some knowledge about pricing tools, we’re ready to go into our <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/planning-compute-resources-demo/">practical demo</a>. It’ll be a lot of fun, we’ll see you there.</p>
<h1 id="Planning-Compute-Resources-Demo"><a href="#Planning-Compute-Resources-Demo" class="headerlink" title="Planning Compute Resources Demo"></a>Planning Compute Resources Demo</h1><p>Welcome to the first of three practical demonstrations on how to use <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud Platform</a>. In this first demo, we’re going to do a few things to get you familiar with GCP. Generally, we’ll start by quickly going over the web console and the Cloud Shell, we’ll show how to set up your first project. These will these things will help you get a general sense of how to interact with GCP services and then after that, we’ll take a quick look at the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/gcp-price-calculator/">GCP pricing tool</a>, we’ll run a few estimates for a few services, and then lastly, we’ll take a closer look specifically at Compute services. There we’ll take a look at App Engine, Kubernetes Engine, Compute Engine, and even run through the process of launching a VM.</p>
<p>So, to get started, you can go over to <a target="_blank" rel="noopener" href="https://console.cloud.google.com/">console.cloud.google.com</a> or just <a target="_blank" rel="noopener" href="https://cloud.google.com/">cloud.google.com</a>. If you don’t already have a Google Cloud account, you can set one up from there. All you need is a Google account of some kind like a Gmail and it can just click through you can set one up very quickly and you can even get up to three hundred dollars worth of free service.</p>
<p>So here we’re just going to go ahead and click on Console and let it load in a sec and we can see all of our different GCP services here. We can kind of scroll around and see the different options here. Now, one important thing to note is we can’t actually do anything with these services until they have a project to work with, so if we click on this, it’s going to say create a project, it’s going to put you through that first.</p>
<p>GCP expects everything to be contained within a project so we can go ahead and create the project, we’ll give it a name, you know, you know, we’ll just call it TestProject, Create, and this will generate it for us, and projects, these live within an organization. So GCP also expects a name for your organization. We’re just going to leave the default for that and if we give it a moment it will create.</p>
<p>So we can see here the dashboard will come up after the project is created, it should only take a few seconds, and then we can see basically TestProject with an ID. Now, for most of our demos, we’re going to use the GCP web console. As you can see, it’s got a pretty nice UI, it’s very easy to navigate, however, there are situations where we might want to use a command-line. And now there are two ways we can use a terminal with all of our GCP services.</p>
<p>One method is to set up the Google command-line tools on our local machine, like a MacBook or a Linux desktop, but whatever we use for development work and this requires installing the tools and setting up the credentials to authenticate to GCP. We’re not going to go through that here, we’ll include <a target="_blank" rel="noopener" href="https://cloud.google.com/sdk">links</a> with instructions if you want to do things that way.</p>
<p>There is an easier method, though. The easier method for using a shell is to just use GCP’s built-in Cloud Shell tool. It’s right here in the top right of the page. Now, you just click on this once and we can hop right into a shell environment that will have all of our necessary g-cloud tools and credentials pre-configured. So yeah, just give that a second to provision. So yeah, it might take a few minutes the very first time you use the shell, the Cloud Shell, it has to spin up an instance for it to run, but eventually, you’ll get this nice little prompt right here and you can see it’s like any terminal environment. It has our g-cloud tools already installed, so this is just kind of the default output there. You can look around a little bit, queue out of it, but this is, this allows us to do, you know, run scripts to basically do anything we would want to do in a shell environment without having to worry about setting things up on a local machine. So very helpful.</p>
<p>Now, before we start, actually spinning up any resources or creating anything we might want to get a sense of what it will cost us. So let’s take a quick look at the pricing tool. Now, remember, we don’t actually have to be logged in to GCP to use this. We actually just go to this link here: <a target="_blank" rel="noopener" href="https://cloud.google.com/pricing">cloud.google.com&#x2F;pricing</a>. But you know, it’s useful, of course, to have the pricing and the console open at the same time, so we can kind of check things out before we create anything.</p>
<p>So we can just go here to Calculators and let’s run through a very basic scenario. Let’s say, for example, I want to create a single VM. So here we have our tool and you know, we’re going to start with Compute Engine. That’s already selected. And then it’s going to ask us to fill out some basic information, so a number of instances, we’ll say one. What are these instances for? It’s really just labeling, so we’ll say tests. Operating system, you know, we can be more specific, but we’ll stick with one of the free ones here, Free Debian CentOS Core Ubuntu. Machine class, we’re just going to go with regular. Here is where you can also select preemptable if you want to get that as your free estimate. Machine family, so as we mentioned, there are compute-optimized, memory-optimized, and general. We’ll stick with general, we’ll just stick with first-generation, we’ll go with a micro. Really all the defaults here. And once we’re good, we can just click Add to estimate and it pops right out total estimated cost here per month. So pretty straightforward.</p>
<p>Now, let’s say I want to add something to this estimate. Let’s say, okay I want to add a database of some kind. So we go up here, we look for the relevant service, let’s say we want to do cloud SQL. So we go here, you know, we still have this estimate as well, it lets us aggregate everything. But let’s say we want just the defaults here, we want one cloud SQL instance. You know, there’s some configuration we could change here but the only thing it really needs, you know, you can select in a high availability in location. We’re gonna select all the defaults. The only thing we absolutely have to put in here is a minimum storage amount SSD, we’re gonna say 10 gigabytes and keep all the other defaults. Hours running per day, you know, days per week. We’ll add that to the estimate and we can see this is a little more expensive than the VM, but yeah, 13.25 per month. So this is your price estimation tool, it’s, as I said, it’s pretty straightforward, pretty intuitive to use. So that’s the pricing tool.</p>
<p>Now, we’re going to go ahead and try to create a virtual server. So, here in the list of services, we can see the compute section here. We’ve got App Engine, Compute Engine, and Kubernetes Engine, we have Cloud Functions and Cloud Run, more lightweight abstracted services there at the bottom, and what we’re gonna do is create an instance inside of Compute Engine. Now, you can see just to just to give you a sense of what it looks like, Kubernetes engine here, we can click on it and we can create a cluster. So this is, if you’re familiar with the Kubernetes paradigm, this will generate your cluster and will create the nodes on top of which your container orchestration will run your cluster.</p>
<p>If we go back, we can pick App Engine as well, which is our serverless solution and here the tutorial it takes you through creating an application. If you start going through it, it’ll ask for a region and then eventually it’ll ask you to select a language, runtime, and the type of environment. As we mentioned, there’s the standard and there’s the flexible. So that’s App Engine. We’re not going to make anything with those but what we’ll do is we’ll go here into Compute Engine and we’ll go through the simplest case creating a single virtual machine.</p>
<p>So we just go through our QuickStart guide, we can click on Create instance. It’s gonna ask for some basic information about it, we’re gonna again stick with all of our defaults we’ll just call it Instance-1 in us-central, general-purpose, first-generation, one vCPU, 3.7 gigs of memory, very, very lightweight, again, all defaults, and we’ll just click Create. And just like that, we have our first virtual instance up and running and of course, we can, you know, do this with the shell as well and we can be a lot more specific with the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">configuration</a>, but as you can see, just getting a Compute resource up and running is pretty straightforward.</p>
<p>So, I think that’s where we will stop with this demo. In the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-two-overview/">later sections</a>, we’ll go into more depth on storage setup and networking, but with this, you should have a general sense of how to get started with GCP, how to get into the console, set up your project, and interact with the compute services. So I hope this has been beneficial.</p>
<h1 id="Section-2-Overview"><a href="#Section-2-Overview" class="headerlink" title="Section 2 Overview"></a>Section 2 Overview</h1><p>Welcome to section two of our course on <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">configuring a Google Cloud Platform solution</a>. In the previous <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/planning-compute-resources-demo/">section</a>, you learned all about GCP’s various compute offerings. However, it’s likely that you’ll need to do more than just computation in your application. You’ll probably want to store data somewhere for later retrieval that is what this section is all about: storage. <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">GCP</a> offers a number of storage options from managed SQL to column stores to in-memory-only caching systems.</p>
<p>In the next lesson, we’ll do a broad survey of each of these <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction-to-google-cloud-storage-options/">options</a>, then in the lesson after that, we’ll offer some insight into <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/choosing-the-right-storage-option/">how to choose the right storage solution</a> for a given use case. So without further ado, let’s dig in.</p>
<h1 id="Introduction-to-Google-Cloud-Storage-Options"><a href="#Introduction-to-Google-Cloud-Storage-Options" class="headerlink" title="Introduction to Google Cloud Storage Options"></a>Introduction to Google Cloud Storage Options</h1><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud</a> gives you a lot of ways to store your data. There are a variety of managed services that handle infrastructure, scaling, backups, all of that for you, and then there are more configurable approaches for people that want to directly administer everything.</p>
<p>Probably the easiest way to break it down is to make a distinction here between storage and databases. So when we talk about databases, we usually mean data stored with a certain structure. The database has storage, of course, but the key thing is the software for accessing it. Storage is the more generic term. Google Cloud has five distinct offerings for simple storage without any concern for structure or database software.</p>
<p>So as mentioned, the first is VM-attached persistent disk storage. Now, this is analogous to an Amazon EBS volume. This is a block of HDD or SSD storage that’s attached to individual Compute Engine instances. Now, this is a great solution if you’re doing a model at the gap on a single server and you need all of your data in one place and possibly a database engine running on that instance. Two really nice features about GCP’s persistent disk storage is zero downtime scalability and automatic encryption. So you get the peace of mind of knowing that your data is secure at rest, it’s encrypted, and it’s very easy to add more storage to an instance without interrupting anything.</p>
<p>Now, GCP also has an NFS storage product called Cloud Filestore. This is similar to persistent disk, you can mount NFS instances on two VMs for applications that need a file system interface. This is a type of NAS, or network-attached storage. So the critical thing to consider here is latency. Filestore offers two different performance tiers: there’s a standard performance tier and premium. So the main difference here is that the premium tier offers substantially higher read&#x2F;write throughput, so be sure to check the specs here very carefully, we’ll add a little chart you can look at and, you know, there are many applications, of course, that can be bottlenecked by NAS systems.</p>
<p>So the three remaining GCP storage products are all very similar, they are all managed object storage systems similar to Amazon S3. The difference between these three products concerns the frequency of access of the things that you’re storing. So the names of these products in order of greatest flexibility, the highest price, they are Cloud Storage, Cloud Storage Nearline, and Cloud Storage Coldline.</p>
<p>So all of these products, the Cloud Storage, they work using buckets—that’s the standard approach. We create a bucket in the console or using the command line and in these buckets we can store any arbitrary data we want and again like S3, we can set all kinds of security configuration on the buckets. We can integrate them with our applications, we can make them publicly available, we can grant access so that things can read and write from Cloud Storage. The only thing different about the Nearline and the Coldline versions of Cloud Storage are the act access frequency SLA and the cost. So Nearline is for data that is accessed relatively rarely, say, once a month, and because of that, it’s much cheaper than just the regular cloud storage. Now, Coldline is really for archiving. This is, by far, the cheapest Cloud Storage you can get but with its access SLA, it is really only for data that’s accessed maybe once per year, if ever. So Coldline is a really good place to dump log files, compliance records, noisy metrics, you know, debug files, redundant backups, other data that might only be relevant in a really unusual kind of disaster scenario.</p>
<p>So that, those are the basic you know raw storage methods for VM instances and for other CCP service. You know, you could use Filestore or persistent disk if you need to attach storage directly to a server. And now you should know a little more about Cloud Storage as a solution for managed storage buckets. Now, for most applications though we’re going to need some structure to our data. We need more than just a bucket. We want to run SQL-like queries we want an SQL-like interface or some sort of query language, we want a proper database solution. And for that, GCP offers five distinct products again.</p>
<p>So, let’s start with the more popular offering, and that would be Cloud SQL is analogous to Amazon RDS. Again, sorry with all the Amazon comparisons but it’s the easiest way if you’re familiar with it. So what cloud SQL is you create database instances similar to VM instances in your account in specific regions. There are actually a few different flavors of Cloud SQL, three different ones. There’s a MySQL one, a PostgreSQL one, and a vanilla SQL type. So this is just depending on the type of SQL engine you wanna use, based on your preferred SQL implementation. All versions though include the same basic features: automatic encryption of data at rest, seamless scalability for adding read replicas, and multi-region support. You can add more CPU and more memory for tougher workloads, all of that is supported.</p>
<p>Now, Cloud SQL is not the only relational database offering for GCP, there’s also something called Cloud Spanner and Cloud Spanner is actually a very interesting product. It’s a very interesting SQL solution in that it tries to give you all the benefits of a traditional relational database without any of the trade-offs demanded by massive scale. So if you’ve ever studied cap theorem, CAP, you might know the old saying that there’s consistency, there’s availability, and partition tolerance and you can only get two of those things. You have to pick two. So if you want consistency and availability, you have to sacrifice partition tolerance. If you want partition tolerance and availability, you have to sacrifice consistency, so on and so forth. Cloud Spanner is a product that tries to break this rule and give you all three and it does this by throwing Hardware at the problem. So the trade-off is price.</p>
<p>So let me be a little more specific. With cloud spanner basically you get high availability, strong consistency, and the ability to scale horizontally. And this last point is accomplished by adding nodes. So nodes are compute resources that can be <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">configured</a> as part of your Cloud Spanner setup. What they do is they add CPU and RAM resources to your spanner database and they allow you to ensure strong performance even across many geographic regions. So with Cloud Spanner, you can have a massive amount of traffic, literally thousands of writes and reads per second, with strong consistency guarantees. You get, you know, classic relational acid guarantees and guaranteed availability across the globe with guaranteed performance using an SQL-like interface.</p>
<p>So basically, you have your cake and eat it too, you have everything. Now, the trade-off, as we said, is price. Generating the necessary amount of nodes and replicas will not be cheap. Now, check the GCP pricing tool here for more details. Here’s a quick example just for reference. As you can see, the small, for a small workload, a single node in a single region, the spanner deployment is actually an order of magnitude more expensive than Cloud SQL. In general, Cloud SQL is going to be much cheaper and is the more standard approach for a managed SQL solution in GCP. Cloud Spanner is really for more unique use cases. Very unusual use cases. So be sure to look into that documentation there. </p>
<p>Now, GCP offers also two distinct NoSQL databases, one is called BigTable and one is called Firestore. Now, the former, BigTable, is a wide column database and the latter, Firestore, is a document database. So if you have worked with like Cassandra or MongoDB, CouchDB, maybe you are familiar with NoSQL systems, you might know a little bit about, kind of the use cases and the problems they’re are meant to solve. Column databases tend to be great for more write-heavy workloads, you know, such as scan data, time series data. Document databases are often used for JSON or unstructured text. So again, these are for particular use cases. </p>
<p>And then finally, we have the Memorystore and Firebase. The memory store is simply a managed Redis service. This is for storing data in memory on customizable nodes. It’s generally used as a caching layer to speed up read performance, kind of like ElastiCache again in AWS, however, it can also be used as a datastore in its own right, if you want to have all of your data just in memory. Firebase database is a real-time syncing database that stores data as JSON documents. It’s used often in mobile applications that need to keep client data in sync, so Google acquired Firebase, as you may know, several years ago and tightly integrated the Firebase database product with GCP. This is distinct from Firestore, so you know, be sure to look at the documentation there:</p>
<p><a target="_blank" rel="noopener" href="https://cloud.google.com/docs/#section-24">https://cloud.google.com/docs/#section-24</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.google.com/storage/docs/storage-classes">https://cloud.google.com/storage/docs/storage-classes</a></p>
<p>If you’re familiar with Firebase, this is the GCP version of it and it’s definitely a great option if you’re already using Firebase.</p>
<p>So, okay, that’s it. Well that was a lot and thankfully we’re done, we’ve covered all of the main GCP data storage options. You should have a good understanding of each but maybe not enough to make strong recommendations for a specific use case. So, in our next lesson, we’ll cover that exact issue. We will talk very specifically about <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/choosing-the-right-storage-option/">which storage technology you should choose</a>. We’ll talk about them generally, and we’ll relate them to specific GCP use cases. So when you’re ready, we’ll see you there.</p>
<h1 id="Choosing-the-Right-Storage-Option"><a href="#Choosing-the-Right-Storage-Option" class="headerlink" title="Choosing the Right Storage Option"></a>Choosing the Right Storage Option</h1><p>Now, choosing the right <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction-to-google-cloud-storage-options/">data storage</a> technology is absolutely critical for developing a performant scalable cloud application. Many great app ideas and startups have struggled due to bottlenecks and data management issues caused by using the wrong database.</p>
<p>So our focus here is database, not pure storage, per se. We’re not going to worry about GCP persistent disk or Filestore. Google Cloud Storage service can actually be used as an application data layer or database if you want but it’s generally not as good as a proper database that structures data in a predictable way. So we’re going to focus on GCPs dedicated managed database offerings.</p>
<p>So, when choosing a storage technology, there are really four critical issues to keep in mind. One: what is the data model? Two: what are my access patterns? Three: what is the expected amount of data now and into the foreseeable future? And then four: are there any external constraints around cost, compliance, data location, etc.?</p>
<p>So, data model, that’s our first consideration because it’s most likely to cause suffering if we get this wrong. If we get the data model wrong, we’re gonna suffer later on trying to fix it. You know, one example of that if you opt for a technology like Cassandra, column database, and you need to support a variety of complex arbitrary read queries on your data, you’re gonna have a bad time, it just isn’t meant for that. So deciding between relational versus NoSQL, that’s a good place to start. If you’re dealing with, again, time-series data, scan data, JSON documents, binary blobs, there are a number of technologies particularly suited for those use cases. You know, you might want to look at Cassandra, MongoDB and then in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud</a>, there are versions of that. BigTable, for example.</p>
<p>Now, consider also access patterns here and here we have to consider several different factors. Do we expect to mostly write a lot of data without doing many reads or perhaps the inverse of that, perhaps something more balanced? Do we have a strict SLA that requires very fast data retrieval? Do we need to support access from many different regions? Do we need some sort of caching strategy, either through hardware and database options or an additional technology like Redis?</p>
<p>So this question of access patterns is very, very important. And then, the third consideration is data volume and growth. Now here, we need to consider the expected data size both at inception and over time, and this could be a very hard thing to predict, so it’s good practice to overestimate. So, for example, if you’re starting with say 10 gigs of production data and expect it to grow to 100 gigs in a year, that’s your expectation. Then you want to plan for at least one terabyte of data or more, and this will ensure that you’re ready for unexpected usage spikes or application behavior, some, you know, spiking log files, something like that. We need to account for data volume and growth, both for budgeting purposes and for our operational concerns. We need to know how difficult it is also to increase storage capacity. You know, with some solutions it’s easier to increase storage than others.</p>
<p>And then finally, we need to think about, you know, the non-technical factors, regulatory issues, legal requirements around data, and of course, budget. So in some countries, for sensitive industries that deal with personal data, there may be requirements that data be encrypted and stored within a specific geographic region. These issues need to be accounted for upfront because again that can create huge operational headaches and even get a company into legal trouble if they’re ignored.</p>
<p>So now, how do we take these four considerations and then apply them to the GCP storage technologies we’ve introduced?</p>
<p>So let’s start with data model. GCP CloudSQL is a great option if you need a robust, managed, relational database service. You can, of course, just set up your own database instances on a Compute Engine VM, but then you don’t get the same strong uptime guarantees, built-in security, backups, upgradability, it’s a trade-off of more fine-grained control in exchange for more operational overhead. And then of course, Cloud Spanner is another great SQL option if you need global scalability and can tolerate a little bit more latency and cost.</p>
<p>Now, if you’re in the NoSQL world, then you have a couple of things to consider in GCP. You have memory store which is a Redis service for low latency and very fast in-memory storage, depending on your use case. It may be your main storage engine or it could be a caching layer in your architecture. And then you have Cloud Firestore as your document DB option and BigTable, which is your column-based storage offering. So, consider your own app’s data model and determine which of these make sense as a good fit.</p>
<p>And then we have to factor in access patterns. Now, we should be able to narrow down our range of choices by considering data model first and then thinking about whether our workload is going to be read-heavy, write-heavy, balanced, or something else. So we need to consider what sort of queries we need to support, what latency can we tolerate, whether or not we need to support multiple geographic regions, so for example, there’s the case of CloudSQL versus Cloud Spanner. The latter is a clear choice if we need global support access and the former is a clear choice if you want the lowest possible latency particularly at the regional level.</p>
<p>And then, the third consideration, data volume, well, for GCP products we might think about an in-memory solution like Memorystore. This might be super fast but it can be expensive and painful to scale if our data grows by several orders of magnitude. And the best way to make this decision is to use the GCP pricing tool of course and get estimates for different storage technologies at very large amounts of data and this should help future-proof your choice from a cost perspective. You also need to consider the difficulty of increasing storage. Cloud Spanner and BigTable, in particular, are very easy to grow if necessary.</p>
<p>So this last consideration, more nuanced to compliance, regulatory issues, budgeting. These non-technical issues can cause major disruptions if you don’t account for them, so the nice thing about GCP storage solutions, in general, is they’re very flexible. For example, all of these solutions support multi-region in different ways. All of them support access control encryption, detailed logging, and auditing. If you’re in a sensitive industry like healthcare and finance, it’s still a good idea to do a more thorough deep dive on the documentation just for, you know, whichever solution might seem like the best fit.</p>
<p>So that concludes the second and final lesson in our section on GCP storage. You should now have a solid understanding of the major offerings and should be able to determine which is likely the best for your use case. Congrats on making it this far. In the last part of this section, we’ll do a demo, we’ll walk through <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/planning-storage-resources-demo/">planning an implementation of a storage solution</a> in the web console. It’ll be a blast. See you there.</p>
<h1 id="Planning-Storage-Resources-Demo"><a href="#Planning-Storage-Resources-Demo" class="headerlink" title="Planning Storage Resources Demo"></a>Planning Storage Resources Demo</h1><p>Welcome to the second practical demonstration on using <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud Platform</a> services. This video will focus on using <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/choosing-the-right-storage-option/">GCP storage products</a> with the web console and the command line. We’re going to do a couple of things. First, we’ll just do a quick survey of the different products in the console, so you can kind of see what it looks like. Then we’ll actually go ahead and create some storage. First, we’ll create cloud storage buckets using the web console and the command line, and then after that, we’ll go ahead and create a Cloud SQL database instance and configure it with some specific settings.</p>
<p>So first, let’s just look around the console generally. You can see here on the left- hand side, we have the storage section. So we have BigTable, we have Datastore and Firestore, and Filestore, SQL, Spanner, Memorystore. Here in storage, this is for all of the cloud storage products, including Nearline and Coldline and the different, you know, depending on archival and access patterns. And then we have a Filestore, which is kind of the NAS version of that, a network-attached storage version of that. So this is basically where things are, you can click around a little bit and see, you know, for example, BigTable, you know, we don’t have any instances running now but you can run through the Create Instance wizard to actually see what that looks like. We can do that with all of them. I mean, they’re all pretty straightforward here in the console. We’re not going to create everything now but we can kind of see how things look.</p>
<p>So let’s move on. Ok, so now let’s go ahead and actually create a sample bucket in Cloud Storage using the command line. Now, we’re going to use the Cloud Shell. You click on this icon here in the top right to get it to work. I already have it running. Be aware, again, the first time you click on it, it might take some time to come up.</p>
<p>So as you recall, you have your tools already installed in this little environment that uses new gcloud command line. We should get some output there. And what we’re actually going to use is <code>gsutil</code>, the other command line tool. And so, to create a bucket, we’re gonna do <code>gsutil</code> make bucket and then we have to give it a URL for the bucket. We’ll do <code>gs://</code> we’ll just call it <code>cool-cloudacademy-bucket</code>. And if I’m entering that command it’ll go ahead and it’ll create our storage bucket, and we can go into the storage UI here. Oh sorry, that’s SQL, we want to go to Cloud Storage here and we should be able to see our bucket right there, cool-cloudacademy-bucket.</p>
<p>Now, this is one way to create a bucket. You’ll see here that because we didn’t add any arguments, it created a bucket with all the defaults. So by default it’s multiple regions in the United States, you know, public access is per object, there’s no lifecycle enable, there’s a whole lot of default things here, and so what we might want to do is change some of that and to show you some of the different options you have, what I’m gonna do is use the web console and create another bucket.</p>
<p>So you go here, we click Create a bucket, and we’re going to give it a name. We’ll call it cool-cloudacademy-bucket2, and then, there’s a number of options we can add. So there’s some estimates here, we can put for a storage size of data retrieval, if we want to worry about that, click continue. We can decide if we want multi-region or single region. We can decide if we want to do Nearline or Coldline for longer-term archival. Access control model on how, what permissions we want to set. We’re gonna stick with most of the defaults here but really just showing all the options here. We can add labels, tags, essentially. Then, when we’re done we just click Create and once again, we’ll see the bucket come right up.</p>
<p>So go to our storage dashboard and then it is: cool bucket2. And now the last thing we’re gonna do is we’re gonna create an actual database instance in the console using the Cloud SQL dashboard, so we go into Storage here. A lot of different options for storage as mentioned. We just click on SQL and we’re gonna create an instance, there’s an option here as well to migrate data. You see again one of the first choices we make is do we want to use MySQL or PostgreSQL and we’ll go for this will go with MySQL as our flavor. And then, once this comes up, we have some options here. Sample, we’ll just call it sample1. We can set a root password, you know something bad, don’t do that. Some regions, zones, our database version, and then once we’re ready, just click Create, and just like that, we will have our instance. We have a database instance ready to go. So the instance ID will come up and some other details, but it is really, really quite simple. We can do this same thing with the command line. But now you should have a general understanding of how to create storage and databases using Google Cloud using the console or the command line. So thanks for sticking around.</p>
<h1 id="Section-3-Overview"><a href="#Section-3-Overview" class="headerlink" title="Section 3 Overview"></a>Section 3 Overview</h1><p>It’s all well and good to have virtual servers running your applications with top-of-the-line <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/planning-storage-resources-demo/">storage and database solutions</a> backing them. Unfortunately, none of that will matter without the right network setup. Your network is the glue that makes everything work together. We’re talking things like DNS configuration, secure data transfer, load balancing, access control, VPCs, peering, and overall, traffic optimization for a geographically distributed user base.</p>
<p>Now, fortunately, <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">GCP</a> offers a plethora of networking services to ensure your application has optimal performance and security. In this section, we’ll start by reviewing the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction-to-gcp-network-resources/">core networking products</a>, we’ll have separate lessons on <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/load-balancing-with-gcp/">load balancing</a> and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/cloud-dns-in-gcp/">DNS</a>, since those are particularly crucial and we’ll also talk about <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/resource-geolocation/">resource geolocation</a> in its own short lesson, since multi-region support is one of GCPs strongest characteristics. So if you’re ready, let’s begin.</p>
<h1 id="Introduction-to-GCP-Network-Resources"><a href="#Introduction-to-GCP-Network-Resources" class="headerlink" title="Introduction to GCP Network Resources"></a>Introduction to GCP Network Resources</h1><p>In this section, we’re going to briefly introduce each of the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-three-overview/">GCP networking services</a>. Networking is a complex topic, there’s a lot of room for error, if we try to not think about it or make a lot of random assumptions, but fortunately, GCP’s solutions are pretty intuitive. Now, it’s out of scope for us to explain in minute detail computer networking concepts so this section is not meant to go in-depth on the tooling or configuration for any of the products, we’re just going to give a basic overview on the problems that each service is meant to solve. In the following lessons and the demo video, we’ll do a deeper dive on the products most critical to setting up an application and passing the certification exam.</p>
<p>So, we’ll start by talking about GCP Cloud DNS and Cloud Load Balancing. Now, the former is the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">GCP solution</a> for configuring DNS records for domains that you own. It’s not a domain registrar, that’s actually a separate <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google</a> product. You can register domains with Google, but the Cloud DNS, rather, is a means for associating a domain name like, you know, mycoolapp.com with the actual servers or endpoints hosting the content. So it’s analogous to Amazon route 53 and AWS or any other domain name servicing company. <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/load-balancing-with-gcp/">GCP Cloud Load Balancing</a> is the traffic routing layer. Now, there are many types of GCP load balancers to serve different use cases, such as internal traffic, external internet-facing traffic, SSL offloading, HTTP requests, TCP UDP requests, both Cloud DNS and load balancing, we’re going to cover these in more depth in their own lessons but that’s just the basic for those two.</p>
<p>Now, the next thing we want to cover are GCP’s Network Peering services. Now, there are a few different ones here, so let’s go through this carefully. Peering, in case you aren’t familiar, is simply the process of connecting two separate networks so that they can exchange traffic. And there are many business cases where you may need to connect GCP traffic to an internal corporate network or a customer’s private data center or some other distinct endpoint. So the two main solutions for this are GCP Direct Peering and Carrier Peering. Now, the former works by creating a dedicated connection between your private network of choice and Google’s Edge Network, and the latter, Carrier Peering, works through a service provider like Softbank or level 3 or Verizon.</p>
<p>So in the case of Carrier Peering, you have a service provider acting as a kind of black box or middleman, and there are a few specific enterprise-level use cases where this can be really necessary. For example, for security purposes, a company might want to expose only a portion of their network to the public internet for accessing GCP services, however, configuring and maintaining a DMZ, basically, a perimeter network, that might be too much overhead, particularly for smaller companies, so instead the company might just go to their service provider, say, Verizon, and ask them to create a dedicated link for traffic to GCP. This is the problem that carrier peering can solve.</p>
<p>Now, for direct connections to GCP, Direct Peering is a logical solution. This creates a peering connection between your internet internal network and Google. Now, there’s another version of this similar that’s even more direct, this is called Dedicated Interconnect. Dedicated Interconnect Solution. This is similar to direct peering but it goes further by creating literally a dedicated physical connection. You set up a colocation facility and with routing hardware that matches GCPs requirements, you create a dedicated wire connection from your systems to Google’s. Very useful if you need an air gap or you need physical control over the infrastructure for whatever reason. Now, on top of this, there’s actually another fourth option for situations where you need the dedicated physical connection but your company’s data center, for whatever reason, cannot access a GCP colocation facility. And this is a somewhat niche scenario, it’s covered by a product called GCP Partner Interconnect and this is again similar to the Carrier Peering solution in that it works through a third-party service provider. So essentially, you select a service provider from a list of GCP partners, there’s a <a target="_blank" rel="noopener" href="https://cloud.google.com/interconnect/docs/how-to/carrier-peering#service_providers">link</a>, we can show you some of the examples, and you use their direct connection to GCP. So you’re relying on both GCP and another company’s hardware which may potentially create additional concerns around performance and security, however, it may still be your best option if you already have a trusted third party ISP and you still need that dedicated physical connection to GCP. So to review, Direct Peering, Carrier Peering, Direct Interconnect, and Partner Interconnect. Make sure to keep in mind the basic differences, especially if you’re responsible for your business’s network or data management.</p>
<p>Now let’s move on to two important network security solutions and that would be Cloud VPN and Virtual Private Cloud. Now, the former is a virtual private network service designed to protect traffic traveling between GCP and some other endpoint. Like any typical VPN, this is a good way to ensure data coming from the public Internet is secure before it hits your GCP systems. GCP offers both classic and high availability VPN types, the latter being more restrictive in its configuration but promising a better SLA.</p>
<p>Cloud VPN is a simple way of connecting an outside network to GCP endpoints, including a Google Cloud Virtual Private Cloud, or VPC, so let’s review that. What is Google Cloud VPC or GCP VPC? Kind of hard to say; quite a mouthful. Anyway, GCP VPC, what that is is a virtual private cloud service within Google Cloud. The virtual private cloud is simply an isolated subset of a larger network with firewalls to block unauthorized access. AWS has the same basic product: VPC. Generally, a VPC is the key unit of measure for defining your application’s network resources. So, for example, a single instance of your app or your database, it might live inside of a single VPC, which is usually within a single data center or zone.</p>
<p>And what’s unique actually about Google Cloud VPCs is that they can actually span multiple geographic regions, so you can have a single VPC with instances on the United States west coast and instances on the east coast, and they can still talk to each other without accessing the public internet. This isn’t the only cool thing also in with Google Cloud VPCs, you get a built-in integration with Cloud VPN and very easy peering between VPCs and the ability to expand the subnet range of available IP addresses within a VPC with zero downtime. So if you have ever had to deal with any of this stuff, if you’ve ever had to manually, you know, expand subnet ranges in a less full-featured cloud provider, then you’ll appreciate a lot of these quality of life enhancements. And suffice to say, Google Cloud VPC will give you the tools you need to manage your app’s private cloud configuration.</p>
<p>So let’s get into some of the more niche networking services, stuff you probably won’t need to worry about right away. So we’re going to talk about Cloud CDN, Traffic Director, and Cloud Armor. Now, Cloud CDN is a content delivery network which maybe you guessed if you know the acronym CDN. It’s meant to do one thing really well: cache content near your end-users for faster performance. It does this by working with Cloud Load Balancer to cache various types of content: images, video, text, any sort of media at one of its dozens of edge site locations. HTTPS&#x2F; SSL support is built-in, so you don’t need to worry about performance overhead from encrypted traffic. You know, this is a really great solution if low latency access to content is a critical requirement for your app, given the number of edge site locations they have around the globe.</p>
<p>Now, traffic director. This is a network traffic management tool specifically for service mesh architectures. Now, the term service mesh may not be familiar to everyone so, you know, basic summary: a service mesh is an additional software infrastructure layer that controls service to service communication. This is only relevant when you have a microservice cloud architecture with many different small software services communicating with each other. Tools like Lyft’s Envoy Proxy are an example of a service mesh product. GCP traffic director is meant to work on top of that for even easier service traffic management and load balancing. Again, somewhat niche, not something most people are going to worry about at first, however, as a microservice app grows and becomes orders of magnitude more complex, the surface mesh paradigm can become a very useful approach and GCP Traffic Director makes it easy to manage.</p>
<p>And then finally, you have Cloud Armor. This is a DDoS prevention system and this can be really the difference between life and death for a company. Depending on your threat model, if you’re a company that’s worried about DDoS attacks, this is something that you’re going to want to look at. You may or may not, it may or may not be a major concern for your infrastructure but if they are, then Cloud Armor is the way to go. It works directly with TCP load balancing, it offers a way to automatically mitigate suspicious load spikes, you can configure IP range-based blocking, even configure blocks for specific geographic regions if you need to.</p>
<p>So, OK, wow, that was a lot. Congratulations on making it through. You now know all about the basic networking with GCP or at least you know enough to sound credible. In the following three lessons, we’re going to dig in on three of the core elements of networking in a cloud provider that would be load balancing, DNS, and multi-region support. Can’t wait to see you there.</p>
<h1 id="Load-Balancing-with-GCP"><a href="#Load-Balancing-with-GCP" class="headerlink" title="Load Balancing with GCP"></a>Load Balancing with GCP</h1><p>Distributing <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction-to-gcp-network-resources/">network</a> load properly is one of the most important architectural challenges when designing a cloud-based application. Poor choices regarding load balancing can lead to runaway costs, poor app performance, security risks, and a number of other business hazards.</p>
<p>So for this reason, it’s worth focusing on GCP’s load balancing catalog in its own short lesson. There are exactly six specific types of load balancers, each designed for a particular type of traffic workload. Three of the six are designed for global load distribution and three are regional. We will start by considering the three global load balancer types.</p>
<p>The three global types are the HTTP Load Balancer, the SSL Proxy, and the TCP Proxy. The first, is as the name suggests, meant for HTTP or HTTPS traffic. This is perhaps the most common type of load balancer for a typical web application. It’s internet-facing, meaning it takes external traffic on port 80 or port 8080 or 443 for HTTPS, and then it routes that traffic to your back-end services.</p>
<p>The other two global types—the TCP Proxy and the SSL Proxy—are for more targeted use cases. Specifically, the SSL Proxy is meant for SSL offloading. Now, SSL offloading, in case you don’t know, this is the practice of decrypting SSL traffic before sending it to some other endpoint. Now, this is an optimization, it’s a method for reducing the strain on back-end systems by ensuring that they don’t have to spend CPU cycles decrypting secure traffic. Now, the TCP proxy load balancer is for TCP connections that are not SSL and not HTTP. This is another global internet-facing load balancer, it supports ipv6 traffic, but one detail to note is that the TCP proxy load balancer will not preserve client IP addresses, so be aware of that if that’s necessary.</p>
<p>Now, the three regional load balances are ideal for situations where you need explicit control over where TLS connections are terminated, possibly for legal or security reasons. Your options here are the networked TCP&#x2F;UDP load balancer and then the internal HTTP load balancer and the internal TCP&#x2F;UDP load balancer. Now, the netWORK TCP&#x2F;UDP load balancer is the only one of these three that is meant for external traffic. There are two specific scenarios where this is your best choice over the other external load balancers we described earlier. One scenario is you need to load balance UDP traffic. If you, if you’re doing UDP traffic, this is the way to go. And two, the other scenario is that your load balancing TCP traffic and you need to preserve client IP addresses. So if either of those things are important to you, then you’ll want to look at this option.</p>
<p>Now, the internal TCP&#x2F;UDP and the internal HTTP load balancers are comparable to their global counterparts, their global external counterparts. They handle the same basic use cases. One is meant for a TCP&#x2F;UDP traffic, the other is meant for HTTP traffic or HTTP requests. The only difference is that they are situated within a private network, they cannot accept requests direct from the public Internet, they are instead meant for routing traffic between microservices or within a VPC, for example, or from one Compute Engine instance to some other back-end service or endpoint within GCP. You can, of course, combine multiple types of load balancers in your architecture. For example, you could start with a global external load balancer that will first route a client request that could eventually hit an internal load balancer that targets the appropriate service—this is one approach.</p>
<p>Now, to make this a little easier to understand, there’s a handy chart that <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">GCP</a> gives us that gives you everything you need to know to decide which load balancer is best for you. And going from left to right, we can see the basic questions we need to ask ourselves about our traffic. Do we need to accept HTTP connections? Do we need SSL offloading? Do we need to preserve client IDs? You know, by going through this flow chart we could determine which of the six load balancer types best matches our needs.</p>
<p>So that’s all you need to know at a fairly high level in order to pick the right little balancer for your situation. Next lesson, we’re going to talk about <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/resource-geolocation/">resource geolocation</a> and it’s going to be a ton of fun. See you there.</p>
<h1 id="Resource-Geolocation"><a href="#Resource-Geolocation" class="headerlink" title="Resource Geolocation"></a>Resource Geolocation</h1><p>Now that we’ve covered the bulk of GCP’s <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction-to-gcp-network-resources/">network services</a> and reviewed <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/load-balancing-with-gcp/">load balancing</a> options, I think it’s a good opportunity to take a step back and think about our <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud</a> architecture from a global view. How can we optimize our GCP services in terms of their physical location? One of the best practices around mapping out where our GCP resources will live, ensuring optimal availability, performance, and cost. So in this short lesson, we’ll offer some guidance and best practices that should serve both at work and on test day, if you’re aiming for certification.</p>
<p>Now, probably the best place to start is with Google Cloud’s global location page. This will tell you which services are available in what region. So obviously, if you already know you need a specific GCP product, it’s a good idea to ensure that it’s available in the region you want. So, for example, as of the recording of this course, GCP BigQuery and Firestore are not available in us-west Oregon region. So plan accordingly if that’s what you need.</p>
<p>The general rule is that for latency purposes, we want to have our cloud infrastructure situated near our user base. So if the vast majority of your users are in the EU, it makes sense to use one of GCP’s European data centers, perhaps Zurich or Frankfurt. Sure your app will still be usable by people outside of Europe but it might be a little bit slower if they have to cross the ocean in order to hit your data centers.</p>
<p>Now, this gets harder to optimize, of course, if you have a global user base. If traffic is coming and going all around the world, then you need to think about how to distribute infrastructure in a cost-effective way. Now, the earlier lessons on GCP storage products should give you enough guidance to know which services are the best fit for a global or multi-region use case. As far as networking goes, hopefully, the previous lesson on load balancing offered enough insight to know which GCP load balancer offers the best situation, the best offering for a complex worldwide traffic routing. GCP’s Cloud CDN is another important piece of the puzzle, as it can serve as a kind of global cache for frequently requested content.</p>
<p>Now, finally, when you’re considering resource geolocation, we, of course, can’t forget about security. In general, GCP is good for this, but things like, you know, with things like default encryption and a lot of logging for forensic and performance analysis, however, at the network level, we have to think more specifically about connectivity and access control. A good practice is to use a VPC, virtual private clouds. Remember, they can span multiple regions so you can have one VPC hitting the data centers in different parts of the world so that your back-end services can be optimized, and make sure that your requests are properly authenticated coming through a load balancer. If you need some direct access to part of the VPC, consider using GCP’s VPN offering to lock down that connection.</p>
<p>So those are some basic tips about <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">planning</a> for a distributed architecture. We could definitely go deeper than this for more unique scenarios but what we have covered here are the main principles to ensure you know enough to get started. Now, we’re ready to move on to our last lesson in this section before the demo, that’s <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/cloud-dns-in-gcp/">Cloud DNS</a>. When you’re ready, we’ll see you there.</p>
<h1 id="Cloud-DNS-in-GCP"><a href="#Cloud-DNS-in-GCP" class="headerlink" title="Cloud DNS in GCP"></a>Cloud DNS in GCP</h1><p>In this final instructive lesson, we’re going to go in-depth on GCP’s Cloud DNS service. DNS servicing is a critical make-or-break component of any web-facing application, so we want to make sure you understand GCP’s approach.</p>
<p>So if you’ve worked with DNS providers before like Route 53 or maybe GoDaddy or something like that, then you understand the basic purpose. DNS providers let you publish domain names and route traffic to specific servers and infrastructure. So if we have a website running on a random IP address and we want to connect it to our domain coolsite.com, a DNS provider can create the necessary records to do that. Now, this is, of course, distinct from a domain name registrar service. Cloud DNS is not meant for purchasing domain names, but you can do that through Google as we mentioned, domains.google.com lets you buy domains. You can also buy domains from any other service including Route 53 or GoDaddy and then configure them using Google Cloud DNS. The DNS provider is actually about doing something with a domain name not buying it.</p>
<p>So Google Cloud DNS. How do we actually start doing things with it? Well, once we have a domain name registered and we’re ready to work with it, we start by creating what are called managed zones within Cloud DNS. These are analogous to DNS zones and within <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">GCP</a>, there are two types: public zones and private zones. Both are just containers for DNS records. For example, you know, an A-record pointing to an IP address the difference is that public zones are visible to the public internet, while private zones can only be seen by specifically authorized VPCs—virtual private clouds—within a GCP account. So in essence, private zones are not visible to the public Internet.</p>
<p>Now, you will configure public zones for applications that need to be reachable by users from your public, from the public internet. For example, your main website will have a DNS name and you may create a record in a managed zone config that routes traffic to it. Now, this could be an A-record and directly at a VM listening for HTTP requests, or perhaps more likely, a load balancer that’s directing traffic to your site instances. On the backend, you can make use of private zones for traffic within the VPC. So, for example, you can have an internal load balancer, with an internal DNS name that’s usable by your back-end services. So now, instead of having to configure IP addresses or have some service discovery layer, you can just use a predictable DNS name internally that’s configured within the private zone and have your back-end instances talk to each other that way.</p>
<p>Now, that use case may seem a bit complex and I will say that the ins and outs of DNS routing and traffic configuration, you know, there are other courses that go into that, we’re not going to dig into that here, but I definitely recommend reading up on the official GCP DNS cloud DNS documentation if you need a deeper dive on these sort of internal use cases.</p>
<p>The most important takeaway here is that both public and private managed zones are a part of GCP Cloud DNS. This is your basic paradigm and your one-stop-shop for creating DNS configuration and records. We’ll talk a little bit more about Cloud DNS in the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/planning-network-resources-demo/">demo</a> coming up. You’ll get to see kind of how it works in the console and how things are actually configured. When you’re ready, we’ll see you there.</p>
<h1 id="Planning-Network-Resources-Demo"><a href="#Planning-Network-Resources-Demo" class="headerlink" title="Planning Network Resources Demo"></a>Planning Network Resources Demo</h1><p>Welcome to the third and final practical Google Cloud demonstration as part of this <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">course</a>. In this video, we’re going to go over how to use GCP network services in the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud</a> web console. There are three specific services we’re going to showcase here: VPC, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/load-balancing-with-gcp/">load balancers</a>, and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/cloud-dns-in-gcp/">Cloud DNS</a>. We will work with an existing instance and see how we can change VPC configurations such as firewall settings. We’ll then create an external load balancer for a back-end service and we’ll take a closer look at Cloud DNS to see how zones are created and configured.</p>
<p>So let’s start with VPC. As we can see, on the left side we have our network services area and in here we can click on VPC and VPC networks. And then in the VPC network section, we see one called default come up. Now, this default network was created for us automatically. It’s similar to AWS: whenever you create a VM in Google Cloud, it’s by default placed into a VPC for security purposes. Now, we can see that this one is configured for multiple regions, we have subnets for every region, and then from this dashboard, we can do a lot of different things. We can change firewall rules, we can go click on multiple ones that we don’t need and delete them if we want. We can generate new firewall rules here, you just click create and it’ll ask for some basic information: a test rule, test tag. Let’s say we want for all IP ranges. All right and then, oh sorry, there’s an extra period there, and then we can have an additional filtering options for IP ranges. Let’s not worry about that for now, we’ll just do allow all and we’ll go with create. Now, this is a very open firewall rule but just to show how simple it is to create it’ll take a while and it’ll come up. We can do a few other things here, we can also change our external IP addresses and from here we can reserve new static addresses. It’s kind of like Amazon Elastic IPs, so you can reserve new ones here and associate them with instances. So basically, this is your one-stop-shop for all VPC configuration, this section.</p>
<p>Okay, so now let’s walk through the process of creating a load balancer. Now, the key thing to remember with load balancers is that they need to be connected to a back-end service and those services need an instance group. You can also connect to a bucket but we’re gonna do a service since that’s a more common use case. Creating an instance group is similar to how we created an instance in the first demo.</p>
<p>So in compute, go to Compute Engine, we go to instance groups, and there’s already one here created for this demo but to create one you just go create instance group, it’s the same process as before: you select an operating system and an instance type and then you can generate your instance group. So, to create the load balancer, we’re going to go to our Network Services, Load Balancing and we’re gonna click Create load balancer.</p>
<p>We’ll go with an external HTTP load balancer, this will allow traffic to our service. So we want internet-facing, and we can see here, so we have to give it a name, we’ll call it testlb and we’re going to do, so back in configuration it’s going to ask create or select a backend service or bucket. We’re gonna do backend services. There’s one there but we’ll go through the process of creating it, creating a service. We just give it a name, test-service2, we’ll say. Instance groups, we’re gonna select an existing instance group. We’re gonna have it set for port 80 and basically default capacity. You can actually add more CPU utilization capacity here if you want but we’ll stick with the defaults.</p>
<p>And then, we don’t need Cloud CDN but we do need a health check. We’ll do a standard TCP health check, it’ll do a TCP connection to port 80 and make sure the instance is healthy. And then we click Create. and now we’ve got our back-end service configured. That’ll also set up our host path and rules, front-end configuration here, frontend IP, we’ll just call it testfrontend. We want HTTP, and we’ll click done, we’ll click create and just like that, our load balancer will come out. So, this is a, we’ll just connect to a set of back-end instances but you can test this yourself if you have a GCP account. Try this yourself, set up a simple web application, maybe a Python flask app or WordPress, and you can, because there are WordPress images actually, then you can create a load balancer and connect to it and there it is.</p>
<p>So finally, let’s take a brief look at Cloud DNS. So to do that, you just go to our Networking section here and we go to Cloud DNS and we can see just from the start it gives us the ability to create a zone. So click Create zone. We’ve put in some information, we’ve put in a name for the record, we’ll call it the example zone. An example DNS name, we’ll call it, this is what I actually, erm, examplezone.com, We don’t need DNSSEC, we’ll put, we don’t need a description for now. We’re gonna make this a public, this is kind of the key decision here. This is a private zone, this is a public zone. Do external clients need to be able to look this up or is it only our internal GCP services that need it? That’s really the question. For this demo, we’ll go with public and then we click Create and voila! We have now our manager zone and from here, we can add record sets. Click Add record set up here. We can do A-records CNAMES, txt records, whatever we want. This is an A-record type, so something like that, we can connect it to some IP address and yeah, sure, 192.1.1.1, something like that, Create. And we’ve got a record now for our DNS. So it’s really that simple. And that’s basically it.</p>
<p>So that’s our basic GCP network service demo. We’ve covered a few key tools: DNS, load balancing, VPC. This is really just an introduction. Our goal in this course is to get you familiar with the GCP product so that you know which ones solve specific problems. That’s the main thing you’ll need for the certification exam. Please check out some of our other Cloud Academy courses for a deeper dive on specific features to really learn the ins and outs of each service. Thanks for watching and good luck.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>So, congratulations! You made it! Give yourself a pat on the back. It has been a long and tough ride but here we are at the end. We went through a lot of material so before we start popping the champagne and celebrating, let’s take a quick minute to just review what we’ve covered in this <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/introduction/">course</a>.</p>
<p>Now, by completing this course, you should have a working knowledge of how to create an infrastructure plan using <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/google/">Google Cloud Platform</a>. You should know how to design a foundation of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-two-overview/">storage</a>, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-three-overview/">networking</a>, and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/planning-configuring-google-cloud-platform-solution/section-one-overview/">compute</a> services on top of which app developers can deploy their code. Now let’s get a little more specific and take a moment to review those course objectives.</p>
<p>Objective one: the student will learn to deploy and configure Google Cloud compute resources and understand the differences between each service. So we did this in section one, where you learned all about Compute Engine, App Engine, Kubernetes, you should know how to deploy any of these three services via the console or CLI.</p>
<p>Number two: the student will learn to deploy and configure Google Cloud storage resources and understand the differences between each service. This was in section two, we covered it. We talked about the different storage solutions including relational and NoSQL and we discussed their trade-offs.</p>
<p>Learning objective three: the student will learn to deploy and configure Google Cloud network resources and understand the differences between each service. So, in section three, we covered load balance and Cloud DNS, resource geolocation, network configuration, all of the different resources in detail. You should have enough understanding to cover this objective thoroughly.</p>
<p>So, with these three learning outcomes solidified in your mind, you should now be ready to dig in and build your own infrastructure in GCP. You should also have a conceptual foundation necessary to branch out to other infrastructure platforms such as AWS, if you’d like. Go you!</p>
<p>Now that you’re done, I’d like to invite you to send any feedback you have about the course to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. We greatly appreciate your comments, questions, suggestions, whatever you have to say. Congratulations again on fighting through the whole course and good luck in your future endeavors.</p>
<h1 id="6Planning-Compute-Resources-Demo"><a href="#6Planning-Compute-Resources-Demo" class="headerlink" title="6Planning Compute Resources Demo"></a>6<strong>Planning Compute Resources Demo</strong></h1><p><a target="_blank" rel="noopener" href="https://cloud.google.com/sdk">Google Cloud SDK Command Line Tools</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.google.com/pricing">Google Cloud Pricing</a></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/11/19/GCP-Cloud-Engineer-Introduction-to-Google-Cloud-NAT-12/" rel="prev" title="GCP-Cloud-Engineer-Introduction-to-Google-Cloud-NAT-12">
      <i class="fa fa-chevron-left"></i> GCP-Cloud-Engineer-Introduction-to-Google-Cloud-NAT-12
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/19/GCP-Cloud-Engineer-Scaling-an-Application-Through-a-Google-Cloud-Managed-Instance-Group-14/" rel="next" title="GCP-Cloud-Engineer-Scaling-an-Application-Through-a-Google-Cloud-Managed-Instance-Group-14">
      GCP-Cloud-Engineer-Scaling-an-Application-Through-a-Google-Cloud-Managed-Instance-Group-14 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction"><span class="nav-number">1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Section-1-Overview"><span class="nav-number">2.</span> <span class="nav-text">Section 1 Overview</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction-to-Google-Cloud-Compute-Options"><span class="nav-number">3.</span> <span class="nav-text">Introduction to Google Cloud Compute Options</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Compute-Virtual-Machine-Types"><span class="nav-number">4.</span> <span class="nav-text">Compute Virtual Machine Types</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#GCP-Price-Calculator"><span class="nav-number">5.</span> <span class="nav-text">GCP Price Calculator</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Planning-Compute-Resources-Demo"><span class="nav-number">6.</span> <span class="nav-text">Planning Compute Resources Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Section-2-Overview"><span class="nav-number">7.</span> <span class="nav-text">Section 2 Overview</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction-to-Google-Cloud-Storage-Options"><span class="nav-number">8.</span> <span class="nav-text">Introduction to Google Cloud Storage Options</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Choosing-the-Right-Storage-Option"><span class="nav-number">9.</span> <span class="nav-text">Choosing the Right Storage Option</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Planning-Storage-Resources-Demo"><span class="nav-number">10.</span> <span class="nav-text">Planning Storage Resources Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Section-3-Overview"><span class="nav-number">11.</span> <span class="nav-text">Section 3 Overview</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction-to-GCP-Network-Resources"><span class="nav-number">12.</span> <span class="nav-text">Introduction to GCP Network Resources</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Load-Balancing-with-GCP"><span class="nav-number">13.</span> <span class="nav-text">Load Balancing with GCP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Resource-Geolocation"><span class="nav-number">14.</span> <span class="nav-text">Resource Geolocation</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Cloud-DNS-in-GCP"><span class="nav-number">15.</span> <span class="nav-text">Cloud DNS in GCP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Planning-Network-Resources-Demo"><span class="nav-number">16.</span> <span class="nav-text">Planning Network Resources Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Conclusion"><span class="nav-number">17.</span> <span class="nav-text">Conclusion</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6Planning-Compute-Resources-Demo"><span class="nav-number">18.</span> <span class="nav-text">6Planning Compute Resources Demo</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2736</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
