<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hang&#39;s Blog">
<meta property="og:url" content="https://example.com/page/113/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/page/113/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Automating-Azure-Virtual-Desktop-Management-Tasks-24/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Automating-Azure-Virtual-Desktop-Management-Tasks-24/" class="post-title-link" itemprop="url">AZ-140-Automating-Azure-Virtual-Desktop-Management-Tasks-24</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-13 19:11:46" itemprop="dateCreated datePublished" datetime="2022-11-13T19:11:46-04:00">2022-11-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-14 06:32:32" itemprop="dateModified" datetime="2022-11-14T06:32:32-04:00">2022-11-14</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Automating-Azure-Virtual-Desktop-Management-Tasks-24/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Automating-Azure-Virtual-Desktop-Management-Tasks-24/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on Automating Azure Virtual Desktop Management Tasks</p>
<p>My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist and have been working in the Microsoft cloud services for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications.</p>
<p>My contact information is available on the screen. Please feel free to reach out to me with any questions, comments, or concerns and I will be happy to discuss these with you. </p>
<p>For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#115;&#117;&#x70;&#x70;&#111;&#x72;&#x74;&#64;&#99;&#108;&#111;&#117;&#x64;&#x61;&#99;&#97;&#100;&#x65;&#109;&#x79;&#46;&#99;&#x6f;&#109;">&#115;&#117;&#x70;&#x70;&#111;&#x72;&#x74;&#64;&#99;&#108;&#111;&#117;&#x64;&#x61;&#99;&#97;&#100;&#x65;&#109;&#x79;&#46;&#99;&#x6f;&#109;</a> and one of our cloud experts will follow up with you.</p>
<p>This course is intended for anyone planning to take the Azure Virtual Desktop Specialty exam and anyone interested in learning how to deploy an Azure Virtual Desktop environment</p>
<p>By the end of this course, you will have knowledge on:</p>
<ul>
<li>Configuring Automation for Azure Virtual Desktop</li>
<li>Automating Management of host pools, session hosts, and user sessions by using PowerShell and Azure Command-Line interface (CLI)</li>
<li>Implementing Autoscaling in host pools</li>
</ul>
<p>To get the most from this course you should have an Administrator-level understanding of Azure Cloud services</p>
<p>When I created this course, all information was current. Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>If you notice any updates or corrections, please reach out to us. Thank you!</p>
<h1 id="Configuring-Automation-for-Azure-Virtual-Desktop"><a href="#Configuring-Automation-for-Azure-Virtual-Desktop" class="headerlink" title="Configuring Automation for Azure Virtual Desktop"></a>Configuring Automation for Azure Virtual Desktop</h1><p>Welcome to this module on configuring automation for Azure Virtual Desktop. In this module, we will cover the following:</p>
<ul>
<li>We will look at how scaling works</li>
<li>Prerequisites for Automation with Azure Virtual Desktop</li>
<li>Finally, we will look at the high-level steps you need to complete when configuring Azure Automation for AVD</li>
</ul>
<p>Let’s start this module off by discussing how scaling works. There are different ways in which you can utilize scaling within Azure Virtual Desktop. You can start and stop virtual machines during peak and off-peak usage hours. You can Scale out virtual machines based on the number of sessions per CPU core. Finally, you can scale in virtual machines during off-peak hours so only a few VMs are running.</p>
<p>We are now going to move on to looking at the prerequisites you need to complete before you can integrate automation with Azure Virtual Desktop.</p>
<p>You need to have a functioning Azure Virtual Desktop host pool within your environment. Your session hosts need to be registered with the Azure Virtual Desktop Service. You then need to ensure the account you are using to configure automation has at least contributor access to the entire subscription.</p>
<p>Finally, you need to ensure the management machine you are using to complete this deployment has the relevant tools on. Ensure PowerShell 5.1 or later is installed on this management machine, and you will need to install the Azure Az PowerShell module to be able to complete the configuration.</p>
<p>In the final lecture of this module, we will look at the high-level steps you need to complete in order to configure Azure Automation for Azure Virtual Desktop.</p>
<p>The first step is to create an Azure Automation account which can be completed via PowerShell. If you have an existing automation account you can also utilize this, however, you will need to follow a specific process to update this account if required.</p>
<p>The next step is to create an Azure Automation run as account. This provides authentication for managing resources in Azure with Azure cmdlets. Once you have created the relevant automation accounts you then need to create an Azure Logic App. You will need to download and import the Desktop Virtualization PowerShell module to use within your PowerShell session for this step.</p>
<p>Finally, you will need to create the execution schedule for the new scaling tool. The PowerShell script will need to be run for each host pool you want to autoscale, but you only need on Azure Automation account.</p>
<h1 id="Automating-Management-of-Host-Pools-Session-Hosts-and-User-Sessions-by-Using-PowerShell-and-Azure-Command-Line-Interface-CLI"><a href="#Automating-Management-of-Host-Pools-Session-Hosts-and-User-Sessions-by-Using-PowerShell-and-Azure-Command-Line-Interface-CLI" class="headerlink" title="Automating Management of Host Pools, Session Hosts, and User Sessions by Using PowerShell and Azure Command-Line Interface (CLI)"></a>Automating Management of Host Pools, Session Hosts, and User Sessions by Using PowerShell and Azure Command-Line Interface (CLI)</h1><p>Welcome to this module on automating management of host pools, session hosts, and user sessions by using PowerShell, and Azure Command-Line Interface (CLI). In this module, we will cover the following topics:</p>
<ul>
<li>Automating host pools, session hosts, and user sessions with PowerShell</li>
<li>Automating host pools, session hosts, and user sessions with Azure Command-line interface (CLI)</li>
</ul>
<p>Let’s start off by doing a walk-through demo of configuring automation tasks with PowerShell.</p>
<p>Here we have PowerShell open with Administrative privileges. The first step we need to complete is to ensure we have the relevant module installed to allow us to run the AVD Powershell cmdlets. In our case, we need to install the ‘Az.DesktopVirtualization’ module. We can select Yes for the warnings that appear, and then we are ready to connect and authenticate to the Azure portal.</p>
<p>We use the ‘Connect-AzAccount’ cmdlet to initiate the connection, and then enter our global administrative credentials in the pop-up box to authenticate. We are now logged into our tenant and ready to manage the AVD environment.</p>
<p>The first command we will look at is ‘Get-AzWvdHostPool’ which outputs relevant information regarding our AVD host pool. We need to specify the host pool name and the resource group it is stored in. The output then shows you all the relevant information about that specific host pool, including location, an Identity Type if you have set one, and any plan details if you are using one. The Get cmdlet will always retrieve information about the relevant resource you have specified and will not make any changes.</p>
<p>Another Get cmdlet we can use when managing AVD is ‘Get-AzWvdDesktop’ which will show us relevant information about a specific desktop application we have set up. You need to specify the resource group, application group name, and the name of the desktop application you need information about.</p>
<p>Let’s now look at a cmdlet that will make an actual change to our environment. In this cmdlet we are going to remove an application group, so we use the cmdlet called ‘Remove-AzWvdApplicaitonGroup’. As you can see we need to specify the resource group again, and the name of the application group we want to remove. </p>
<p>The final cmdlet I want to show is one to update an existing resource within AVD. We need to use an update cmdlet, in our case we are going to utilize the ‘Update-AzWvdHostPool’ cmdlet to update an existing host pool. As you can see there are a number of settings we can update. In our case, the only one that will be different is that we are changing the MaxSessionLimit from 5 to 6.</p>
<p>We are now going to do a walk-through demo of configuring automation tasks with Azure CLI.</p>
<p>We are launching the Azure CLI from the Azure portal, therefore need to navigate to the portal.azure.com&#x2F;Cloudshell URL. As we are already authenticated from logging into the Azure portal we do not need to authenticate again when launching the Azure CLI.</p>
<p>The first command type we are going to use is one that lists specific resources within our AVD environment. List commands are very similar to ‘Get’ cmdlets in PowerShell. As you can see in this command, we want to list all the information about our application group called ‘Desktop’ within our resource group. There is a whole host of details that are shown as part of the output, including the application group type, location, and the object ID.</p>
<p>So we can get a clear view of the output, I have re-launched the Azure CLI. The next command I want to look at is similar to the list command, in that it does not make any changes and simply outputs information about a specific resource. It is the ‘show’ command. In our example, we want to show information regarding the application group called ‘ITGEEK-DT01’. Again as you can see a number of details are shown in the output, very similar to the list command output.</p>
<p>One clever feature of the Azure CLI is that it will not let you delete resources if other resources already exist within it. In this example we are trying to delete a host pool, however, because an application group exists within that which needs to be deleted first, we get an error giving us that information.</p>
<h1 id="Implementing-Autoscaling-in-Host-Pools"><a href="#Implementing-Autoscaling-in-Host-Pools" class="headerlink" title="Implementing Autoscaling in Host Pools"></a>Implementing Autoscaling in Host Pools</h1><p>Welcome to this module on implementing autoscaling in host pools. In this module we will cover the following topics:</p>
<ul>
<li>Azure Virtual Desktop Scaling plans</li>
<li>Requirements for auto-scaling in AVD</li>
<li>A demo where I will configure an auto-scaling plan for Azure Virtual Desktop</li>
</ul>
<p>Let’s start off by discussing scaling plans. Traditionally, scaling was implemented within Azure using either Powershell scripts or Azure Automation, however, you can utilize a feature called scaling plans.</p>
<p>Scaling plans allows you to define ramp-up hours which is the time you want to increase resources when the usage increases. </p>
<p>Peak hours which is the time of day when usage is at its highest.</p>
<p>Ramp-down hours when usage starts to drop off.</p>
<p>You can then configure associated triggers which will kick off your scaling plan if those triggers are met, for example, a certain percentage of CPU usage. Finally, your scaling plan must include an associated schedule for at least one day of the week.</p>
<p>Let’s now move on to discussing requirements for autoscaling in Azure Virtual Desktop. There are two main items that need to be in place before you can start implementing autoscaling. The first is that you need to create a custom role-based access control, better known as RBAC, role. Once this role has been created, the second item that needs to be in place is that you need to assign this role to the Azure Virtual Desktop application. </p>
<p>Once these two requirements are fulfilled, you can start configuring autoscaling in Azure Virtual Desktop</p>
<p>To finish off this module we are going to complete a demo of implementing a scaling plan in Azure that you can utilize with your AVD environment</p>
<p>Here we are in the Azure Portal. We need to navigate to the scaling plans section of the portal. We do not currently have any existing scaling plans, so let’s select ‘Create’. We now need to ensure we select the relevant subscription, resource group and give the scaling plan a name. You will need to be careful when selecting the location as not all locations support scaling plans. In our example, I am selecting Canada East as I know this region is supported. Finally, I am giving it a friendly name and moving on to the schedule plan.</p>
<p>We need to select ‘Add schedule’. We now have a number of different panes we need to complete. First, let’s enter general information like the schedule name. We then need to select which days we want the schedule to repeat on, in our case, we select each weekday.</p>
<p>For ‘ramp-up’ hours, the repeat on days and time zone are already entered by default, so we need to enter the start time. Please note this utilizes the 24-hour clock system. We then need to specify the load balancing algorithm. I am going to leave this on bread-first. We then need to specify the minimum percentage of session host virtual machines to start for ramp-up and peak hours. I will leave this on the default of 20%. Finally, on this pane, we need to enter the percentage of used host pool capacity that will be considered to evaluate whether to turn on or off virtual machines during ramp-up and peak hours.</p>
<p>If we now move onto the ‘Peak Hours’ pane, again the days and time zone are already selected and we need to specify the start time and load balancing algorithm which I am going to change to bread-first. The threshold capacity is grayed out and set to 60%, therefore we cannot edit this.</p>
<p>Now we move on to the ‘ramp-down’ pane. The first value we need to set is the start time, then the load balancing algorithm, which I am again going to set as breadth-first. We now need to set the minimum percentage of session host virtual machines that you would like to get to for ramp-down and off-peak hours.</p>
<p>Next, we need to select the percentage of used host pool capacity that will be considered to evaluate whether to turn on or off virtual machines during ramp-down and off-peak hours. We can then specify if we want to force users to log off or not, set a delay time before forcing the users to log off and customize a notification message.</p>
<p>The final pane to complete the schedule configuration is the ‘off-peak hours’ pane. Here we need to specify the start time, and load balancing algorithm. Again I am changing this to bread-first. Please note we cannot edit the capacity threshold again.</p>
<p>Now the schedule is configured we need to select the host pool we want this to apply to. In our case, we do not have an active host pool in this tenant. Finally, we can enter any tags we want to set, before reviewing and creating our scaling plan.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We covered a lot of important topics in this module. The first lecture was on configuring automation for Azure Virtual Desktop, where we talked about how scaling works and some of its configurable values. We then looked at the prerequisites for automation, and finally the high-level steps you need to complete when configuring automation with Azure Virtual Desktop.</p>
<p>In the second lecture, we dived into automating management of host pools, session hosts, and user sessions by using both PowerShell and Azure Command Line Interface (CLI). This was a demo-heavy lecture where I did a demo using PowerShell and then a demo using Azure CLI for automation tasks for AVD.</p>
<p>In the final lecture of this module, we looked at implementing autoscaling in a host pool. Here, we looked at AVD scaling plans in more detail, followed by the requirements for autoscaling in AVD, and finished off with a demo of configuring a scaling plan.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Implementing-Business-Continuity-for-Azure-Virtual-Desktop-23/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Implementing-Business-Continuity-for-Azure-Virtual-Desktop-23/" class="post-title-link" itemprop="url">AZ-140-Implementing-Business-Continuity-for-Azure-Virtual-Desktop-23</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-13 19:10:49" itemprop="dateCreated datePublished" datetime="2022-11-13T19:10:49-04:00">2022-11-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-14 06:32:40" itemprop="dateModified" datetime="2022-11-14T06:32:40-04:00">2022-11-14</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Implementing-Business-Continuity-for-Azure-Virtual-Desktop-23/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Implementing-Business-Continuity-for-Azure-Virtual-Desktop-23/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on Planning and Implementing Business Continuity in Azure Virtual Desktop</p>
<p>My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist and have been working in the Microsoft cloud services for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications.</p>
<p>My contact information is available on the screen. Please feel free to reach out to me with any questions, comments, or concerns and I will be happy to discuss these with you. </p>
<p>For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#115;&#x75;&#x70;&#112;&#x6f;&#114;&#x74;&#x40;&#99;&#x6c;&#x6f;&#117;&#x64;&#x61;&#99;&#97;&#x64;&#101;&#x6d;&#x79;&#x2e;&#99;&#x6f;&#x6d;">&#115;&#x75;&#x70;&#112;&#x6f;&#114;&#x74;&#x40;&#99;&#x6c;&#x6f;&#117;&#x64;&#x61;&#99;&#97;&#x64;&#101;&#x6d;&#x79;&#x2e;&#99;&#x6f;&#x6d;</a> and one of our cloud experts will follow up with you.</p>
<p>This course is intended for anyone planning to take the Azure Virtual Desktop Specialty exam and anyone interested in learning how to deploy an Azure Virtual Desktop environment</p>
<p> By the end of this course, you will have knowledge on:</p>
<p>•  Planning and Implementing a disaster recovery plan for Azure Virtual Desktop</p>
<p>•  Designing a backup strategy for Azure Virtual Desktop</p>
<p>•  Configuring backup and restore for FSLogix user profiles, personal virtual desktop infrastructures (VDI), and golden images</p>
<p>To get the most from this course you should have an Administrator-level understanding of Azure Cloud services</p>
<p>When I created this course, all information was current. Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:&#x73;&#117;&#x70;&#112;&#x6f;&#x72;&#116;&#64;&#99;&#108;&#x6f;&#117;&#x64;&#97;&#99;&#x61;&#100;&#x65;&#109;&#x79;&#x2e;&#99;&#x6f;&#109;">&#x73;&#117;&#x70;&#112;&#x6f;&#x72;&#116;&#64;&#99;&#108;&#x6f;&#117;&#x64;&#97;&#99;&#x61;&#100;&#x65;&#109;&#x79;&#x2e;&#99;&#x6f;&#109;</a>.</p>
<p>If you notice any updates or corrections, please reach out to us.</p>
<p>Thank you!</p>
<h1 id="Planning-and-Implementing-a-Disaster-Recovery-Plan-for-Azure-Virtual-Desktop"><a href="#Planning-and-Implementing-a-Disaster-Recovery-Plan-for-Azure-Virtual-Desktop" class="headerlink" title="Planning and Implementing a Disaster Recovery Plan for Azure Virtual Desktop"></a>Planning and Implementing a Disaster Recovery Plan for Azure Virtual Desktop</h1><p>Welcome to this module on planning and implementing a disaster recovery plan for Azure Virtual Desktop. In this module, we will cover the following:</p>
<ul>
<li>Disaster Recovery for Azure Virtual Desktop</li>
<li>Virtual Machine Replication</li>
<li>And finally, FSLogix Replication</li>
</ul>
<p>Let’s start by discussing disaster recovery in Azure Virtual Desktop. Azure Virtual Desktop offers business continuity disaster recovery for the AVD service to preserve customer metadata during outages.</p>
<p>When setting up disaster recovery, you initially need to replicate your virtual machines to a secondary location. We will discuss this in more detail shortly. If you are using profile containers, you should also set up data replication in the same secondary location.</p>
<p>It is vitally important that user identities that are set up in the primary location are also made available in the secondary location. Finally, make sure any line-of-business applications which use the data in your primary location are also failed over to the secondary location.</p>
<p>Let’s now discuss virtual machine replication. As part of your disaster recovery plan for Azure Virtual Desktop, VMs need to be replicated to the secondary zone. It is recommended to use Azure Site Recovery to manage replication VMs to other Azure locations.</p>
<p>Once the VMs are replicated, you should turn them off to ensure you can save on cost. One of the benefits of using Azure Site Recovery to replicate the VMs to another location is that you will not need to register the VMs manually as the Azure Virtual Desktop agent in the secondary VM will automatically use the latest security token to connect to the service instance closest to it.</p>
<p>Something to note is that if there are existing user connections during any type of outage, you will be required to end the user connections in the current region before you can start the failover to the secondary location.</p>
<p>In the final lecture of this module, we will talk about FSLogix replication. When setting up disaster recovery for profiles, which uses FSLogix there are some configuration steps you need to follow. FSLogix supports multiple profile locations, so can enter the secondary location within the same registry entry you configure for the primary.</p>
<p>You will be required to provision an additional Azure file share in the second location to facilitate disaster recovery for the FSLogix user profile service.</p>
<p>In the event that the primary FSLogix profile path is unavailable, the FSLogix agent will automatically failover to the secondary, therefore it is recommended that the FSLogix agent be configured with a path to the secondary location.</p>
<h1 id="Designing-a-Backup-Strategy-for-Azure-Virtual-Desktop"><a href="#Designing-a-Backup-Strategy-for-Azure-Virtual-Desktop" class="headerlink" title="Designing a Backup Strategy for Azure Virtual Desktop"></a>Designing a Backup Strategy for Azure Virtual Desktop</h1><p>Welcome to this module on designing a backup strategy for Azure Virtual Desktop. In this module, we will cover the following topics:</p>
<ul>
<li>We will walk through a demo of how to back up VMs with Azure Backup</li>
<li>Next, we will walk through a demo of how to back up VMs with site recovery</li>
<li>And finally, we will look at how to back up VMs with snapshots</li>
</ul>
<p>Let’s start this module with walking through a demo of backing up a virtual machine by using the Azure Native service called Azure Backup.</p>
<p>Here we are logged into our Azure Portal. We need to navigate to the virtual machine we want to backup first so we click on virtual machines. We have two VMs here, so let’s click on ‘Demo VM’. Here we now see the overview page, but we need to navigate down the multiple options on this VM until we see backup.</p>
<p>Now as we can see we have not set any backups for this VM yet, so we first need to select the recovery services vault. We can either select an existing one or create a new one. For the purpose of this demo let’s create a new one. We then need to give the backup vault a name which we are going to leave as the default value which is automatically set. Ensure you have the correct resource group selected for where you want the recovery vault to reside which in our case we do. </p>
<p>Now we need to set our backup policy so we will click on edit this policy. We are going to leave the policy name, then we can move down to ‘backup schedule’. Here we can select the frequency of the backup, so daily or weekly. We can then set the time we want the backup to start and then make sure we set the relevant time zone. We then select the number of instance recovery snapshots, in our example, we will leave this set as two, however, you can set this to whatever your backup policy requires. Finally, we need to set the number of weekly, monthly and yearly backup retentions we want as part of our schedule. Once we are happy with the settings we can have a final quick review of our settings before creating the backup.</p>
<p>Let’s just take a look at the backup blade on the VM again. Now you can see our options are different. We can see the number of restore points and now at the top we can see an option to run a backup now, restore a VM once we have some backups, do a file recovery and stop the backup.</p>
<p>Now let’s do a walk-through demo of configuring Azure Site recovery for a virtual machine. Here we are again in the Azure portal. We navigate to the virtual machine we want to set up with replication, and whereas before we selected the backup pane, we are now going to select the Disaster recovery pane.</p>
<p>The first item we need to configure is the target zone. There are a whole host of supported geographical regions which support replication. With our primary location being UK South, we are going to leave the default region of the East US. Let’s click on Advanced settings at the top now. Here we have a few different values we need to configure, including the target subscription, VM resource group, virtual network, availability group, and proximity placement if applicable. Due to me having no resources in the East US region, most of these resources are all going to be new. </p>
<p>We then need to look at the capacity reservation group which allows you to reserve compute resources in the target region. Finally, we can specify any storage settings like the disk type, replication settings or extension update settings. We can then review our final configuration and start the replication process</p>
<p>For this final demo in this module, we are going to show how we can snapshot virtual machines and use this as a backup. We are back in the Azure portal for the final time in this module and once again navigating to the virtual machine we want to snapshot. Now we are actually going to snapshot the OS disk, so we select disks and then the OS disk.</p>
<p>Here we see the Create Snapshot option so we select this. Now we need to enter all the relevant values like a name, subscription, and resource group. We also need to decide on the snapshot type, do we want a full read-only copy, or do we want to use an incremental snapshot and save on disk space.</p>
<p>The rest of the settings are locked in and grayed out so we cannot change them. Let’s move on to the encryption options, and here we can either use encryption at-rest with a platform-managed key, which is default. Or we can use encryption at-rest with a customer-managed key, or finally, we can use double encryption with platform-managed and customer-managed keys. We will leave it the default setting and move into networking.</p>
<p>With network connectivity, we can either allow Public endpoints which are all networks, Private endpoints which are through disk access, or deny all network connectivity. We are going to leave it in public and move on to tags. Here, as with most Azure resources, you can set any tags you may be required to set, then finally you can review and create your snapshot backup</p>
<h1 id="Configure-Backup-and-Restore-for-FSLogix-User-Profiles-Personal-Virtual-Desktop-Infrastructure-VDI-and-Golden-Images"><a href="#Configure-Backup-and-Restore-for-FSLogix-User-Profiles-Personal-Virtual-Desktop-Infrastructure-VDI-and-Golden-Images" class="headerlink" title="Configure Backup and Restore for FSLogix User Profiles, Personal Virtual Desktop Infrastructure (VDI), and Golden Images"></a>Configure Backup and Restore for FSLogix User Profiles, Personal Virtual Desktop Infrastructure (VDI), and Golden Images</h1><p>Welcome to this module on configuring backup and restore for FSLogix user profiles, personal virtual desktop infrastructure (VDI), and golden images. In this module we will cover the following topics:</p>
<ul>
<li>How to backup Azure File shares</li>
<li>Golden Image backup options</li>
</ul>
<p>Let’s start off by discussing how we can backup the Azure File share that we utilize for our FSLogix user profiles. The first step is that we need to create a recovery services vault. This is a management entity that stores recovery points that have been created over time.</p>
<p>It provides an interface to perform backup-related operations These include taking on-demand backups, performing restores, and creating backup policies.</p>
<p>We can configure a backup in a few different ways. For multiple file shares we can use the recovery services vault. This is done from the recovery services vault pane within the Azure Backup service. Another option is to configure a backup from the Azure file share pane.</p>
<p>Let’s finish off this module by discussing golden image backup options. When creating the golden image from within the Azure portal, you can snapshot the VM which will store the image and will form your backup for the golden image.</p>
<p>You need to ensure you snapshot the VM image after all the patching is completed, after all the apps are installed, but before you run the sysprep. Then when it comes to updating the golden image with future patching and app updates, you boot to the snapshot, update the image and follow the same process to back this up again.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We have covered several important topics in this course. First, we looked at planning and implementing a disaster recovery plan for Azure Virtual Desktop. In this module we discussed disaster recovery in AVD and how you can utilize a second region to failover to, we then discussed Azure virtual machine replication, and finally looked at how we can facilitate FSLogix replication.</p>
<p>In the second module, we looked at designing a backup strategy for Azure Virtual Desktop, and this was very demo-heavy. We ran through three demos, including backing up a VM using Azure Backup, a demo to configure Azure Site Recovery for a VM, and finally how to snapshot an Azure VM for backups.</p>
<p>In the final module of this course, we took a dive into configuring backup and restore for FSLogix user profiles, personal virtual desktop infrastructure (VDI), and golden images. In this module, we talked about backing up Azure file shares and the backup option for golden images.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Configuring-Apps-on-a-Session-Host-in-Azure-Virtual-Desktop-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Configuring-Apps-on-a-Session-Host-in-Azure-Virtual-Desktop-22/" class="post-title-link" itemprop="url">AZ-140-Configuring-Apps-on-a-Session-Host-in-Azure-Virtual-Desktop-22</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-13 19:09:55" itemprop="dateCreated datePublished" datetime="2022-11-13T19:09:55-04:00">2022-11-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-14 06:32:46" itemprop="dateModified" datetime="2022-11-14T06:32:46-04:00">2022-11-14</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Configuring-Apps-on-a-Session-Host-in-Azure-Virtual-Desktop-22/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Configuring-Apps-on-a-Session-Host-in-Azure-Virtual-Desktop-22/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on installing and configuring applications on a session host. My name is Shabba Azdah and I’ll be your instructor for this course. I am an Azure Virtual Desktop specialist and I’ve been working in the Microsoft Cloud services for several years. Specifically with Azure Virtual Desktop since its inception and multiple Azure-focused certifications. My contact information is available on the screen. Please feel free to reach out to me with any questions, comments or concerns, and I’ll be happy to discuss these with you. For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#x73;&#x75;&#112;&#x70;&#x6f;&#x72;&#x74;&#64;&#x63;&#x6c;&#111;&#117;&#x64;&#x61;&#99;&#x61;&#100;&#x65;&#109;&#x79;&#x2e;&#99;&#x6f;&#x6d;">&#x73;&#x75;&#112;&#x70;&#x6f;&#x72;&#x74;&#64;&#x63;&#x6c;&#111;&#117;&#x64;&#x61;&#99;&#x61;&#100;&#x65;&#109;&#x79;&#x2e;&#99;&#x6f;&#x6d;</a>. One of our Cloud experts will follow up with you.</p>
<p>This course is intended for anyone planning to take the Azure Virtual Desktop specialty exam and anyone interested in learning how to deploy an Azure Virtual Desktop environment. By the end of this course, you will have knowledge on configuring dynamic application delivery by using MSIX app attach, implementing application masking, deploying an application as a remote app, implementing and managing One Drive for business for a multi-session environment, implementing and managing Microsoft teams AV redirect, implementing and managing browsers and internet access for Azure Virtual Desktop, creating and configuring an application group, troubleshooting application issues related to Azure Virtual Desktop.</p>
<p>To get the most from this course, you should have an administrator-level understanding of Azure Cloud services. When I created this course, all information was current. Feedback on course content hosted by Cloud Academy is always appreciated and encouraged as it allows us as trainers to improve, which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact supportcloudacademy.com. If you notice any updates or corrections, please reach out to us. Thank you.</p>
<h1 id="Configuring-Dynamic-Application-Delivery-with-MSIX-App-Attach"><a href="#Configuring-Dynamic-Application-Delivery-with-MSIX-App-Attach" class="headerlink" title="Configuring Dynamic Application Delivery with MSIX App Attach"></a>Configuring Dynamic Application Delivery with MSIX App Attach</h1><p>Welcome to this module on configuring dynamic application delivery by using MSIX App Attach. We’ll cover the following topics. We’ll start off by discussing what is MSIX App Attach. Next, how does MSIX App Attach work.</p>
<p>We’ll finish off with a demo of setting up a file share for MSIX App Attach. Let’s start off by discussing what MSIX App Attach is. MSIX is a Windows app package format that provides modern packaging experience to all Windows applications. It allows you to create a separation between the user’s data, the operating system, and the applications. MSIX removes the need for repackaging when delivering the applications dynamically. It also allows you to reduce the amount of time it takes users to log into the AVD session, but also reduces the amount of infrastructure required, which also lowers cost. Now we know what MSIX App Attach is.</p>
<p>Let’s discuss how it works. It follows the following steps&#x2F;stages. First we have the stage step, which is when the MSIX App Attach notifies the OS file application is available and that the virtual disk that contains the MSIX package is available. Next, we have the registration step. This is when the MSIX App Attach uses a per user process to make the application available to users. Moving on, we have the delayed registration step. This is when the complete registration of the app is delayed until the user decides to run it. Once you have used the app and have finished, we then have the deregistration step, where the application is no longer available to the user after you sign out.</p>
<p>Finally, we have the D stage step. In this, the application is no longer available from the session host after a shutdown or restart of the VM. The steps we have just discussed all happen in the background, and the user does not experience this. As a user, you sign into the AVD remote desktop application as normal and select the hotspot you want to utilize. The user profile is unloaded from an Azure file share and then the MSIX App Attach applications are registered to the session host VM for the user. To complete this module, we’re going to complete a walk-through demo of setting up a file share, specifically an Azure file share for MSIX App Attach.</p>
<p>Here we are logged into our AD DS server and we need to create a new security group for our session host. We need to create a new security group in this domain, which will need to be synchronized to as Azure AD. Once we have created this group, in our case we call it session host, we then need to add the session host object into this group. Once we have finished this task, we need to complete an Azure AD connect sync, so we can have a way or we can force the sync with PowerShell. We are now in the Azure portal and have navigated to the storage account.</p>
<p>If you have not already done so, you will need to create the storage account or even Azure file share. And if you have followed previous Cloud Academy modules on then AZ-140 certification path, you have already completed this when creating the user profile share, including joining the storage account to your AD DS domain. We already have the storage account and I’ve created a new file share called MSIX. However, we need to assign the relevant storage roles to the session host security group, admins, and to the users who will be accessing the applications. We click on ‘Add Role Assignment’ and first assign the storage file data SMB share contributor role to the session host security group.</p>
<p>You’ll need to follow the same process, but assign the users the storage file data SMB share contributor role and the storage file data SMB share elevated contributor role to the administrators. We now need to mount the share to a VM so we can assign the relevant NTFS permissions. If you never get to this Azure storage account and the MSIX share you created, click on ‘Connect’ and then select the Active Directory authentication method.</p>
<p>Finally, copy the script to a notepad as we are going to run this in our VM to mount the share. The final step in this demo is to mount the share to our domain joined VM and add the NTFS permissions. We run the PowerShell script we copied earlier and run this with elevated privileges. Once this has run successfully, we navigate to Windows Explorer and go to the Map Drive. We can then go to the properties of the share and add the relevant NTFS permissions, including granting full control of the share to admins and read, execute, read on this folder content access to the session host group and the users.</p>
<h1 id="Deploying-an-Application-as-a-RemoteApp"><a href="#Deploying-an-Application-as-a-RemoteApp" class="headerlink" title="Deploying an Application as a RemoteApp"></a>Deploying an Application as a RemoteApp</h1><p>Welcome to this module on deploying an application as a Remote App. We will cover the following topics in this module. We’ll explain what remote app is from an Azure virtual desktop perspective. We’ll then explain the requirements we need to be met before you can deploy a remote app. We will complete this module by doing a demo of deploying a remote app in AVD. Let’s start this module by discussing what a remote app actually is. It’s essentially application streaming as a service, which means you are using as your virtual desktop to deliver apps to your customers over a secure network via virtual machines.</p>
<p>Although you are streaming the apps via virtual machine, you do need to grant the user access to the desktop by the specific remote app you are streaming. The custom app is streamed from a session host, meaning you need to ensure that app is installed on the golden image you have utilized for the existing session host. Now we understand what a remote app is, let’s talk about some of the requirements you need to have in place before deploying it. You need to have your custom app in place. This includes MSIX space applications, something we already discussed in this module, or an application that is already installed on your deployed session host. You need to ensure you have an identity, so credentials to your domain. This will be used to grant access to the host pool that is hosting the remote app within your AVD environment.</p>
<p>Finally, we need to ensure you have an Azure subscription. It will not be possible to deploy an AVD resource without this. So, it is the most vital requirement. In the final lecture of this module, we’ll complete a walk-through demo of deploying an application as a remote app. Here we are back in the Azure portal and we are going to navigate to the Azure virtual desktop service and click on application groups. We already have an existing application group for our AVD pooled host pool, but we’ll create a new one for our remote app. We need to enter all the relevant details like subscription, resource group, and the host pool you want to associate with this remote app. We then give it an appropriate name and click on ‘Next’. Here, we want to select the application which is installed on the session host that we want to create as a remote app. In our case, it’s his notepad. We have to save this and add the users who need to have access to this remote app. We then associate it with an existing or new workspace. Configure any advanced settings or tags. In our case, we do not, and then review and create.</p>
<h1 id="Implementing-and-Managing-OneDrive-for-Business-for-a-Multi-Session-Environment"><a href="#Implementing-and-Managing-OneDrive-for-Business-for-a-Multi-Session-Environment" class="headerlink" title="Implementing and Managing OneDrive for Business for a Multi-Session Environment"></a>Implementing and Managing OneDrive for Business for a Multi-Session Environment</h1><p>Welcome to this module on implementing and managing OneDrive for business for a multi-session environment. We’ll cover the following topics in this module. We’ll first do an overview of OneDrive for business with AVD. We’ll end this module with demo of installing and deploying OneDrive sync app per machine. Let’s start off by looking at an overview of OneDrive for business. It is supported in the following environments: Windows 10, both 32 bit and 64 bit architecture, where it supports VHDX files, Windows 7, both 32 and 64 bit architecture, where it supports VHD files. It is also supported on Windows Server OS versions 2008 R2 through to 2019, excluding Windows 7 2012. It supports VHDX files with all the Windows Server OS apart from service files on a R2, where it supports VHD files. It also supports non-persistent environments that have FSLogix apps or FSLogix office content.</p>
<p>Finally, you need to ensure you have a Microsoft 365 subscription that supports operating system we mentioned earlier in this lecture. In the final lecture of this module, we’ll complete a walkthrough demo of installing the OneDrive sync app per machine. Here we are logged into our session host and we are going to use PowerShell to install OneDrive per machine. We have already downloaded the onedrive.exe file, so that’s from PowerShell as admin, and change the directory to the folder where the install file is stored. We then need to run the command with the all users parameter, so OneDrive installs for all users, not just the one we are logged in with. Once the install is completed, we can browse to the start menu and see if OneDrive for business is installed. And browse to program files (x86)\Microsoft OneDrive directory, which confirms this has been installed on the virtual machine, rather than the user’s local profile.</p>
<h1 id="Implementing-and-Managing-Microsoft-Teams-AV-Redirect"><a href="#Implementing-and-Managing-Microsoft-Teams-AV-Redirect" class="headerlink" title="Implementing and Managing Microsoft Teams AV Redirect"></a>Implementing and Managing Microsoft Teams AV Redirect</h1><p>Welcome to this module on implementing and managing Microsoft Teams AV. In this module, we’ll cover the following topics: We’ll discuss the RDP redirection properties that need to be in place for Microsoft Teams, we’ll finish this module by doing a run through demo of installing and configuring the Microsoft Teams desktop app.</p>
<p>Let’s start this module by discussing the RDP redirection properties that need to be in place to enable Microsoft Teams to work within the AVD environment. RDP redirection is not needed if you are utilizing media optimization within your Azure Virtual Desktop environment. If you are using media optimization, then there are three redirection properties you need to set. You first need to enable audio capture from the RDP properties. We need to ensure you set the audio mode to one if it is not already done so.</p>
<p>Finally, you need to redirect the local device’s camera via RDP properties. In the final lecture of this module, we’ll complete a walk through demo of installing the Microsoft Teams desktop app. Here we are logging to our session host and before we install anything, we need to configure a registry entry. Let’s open the registry editor and navigate to HKEY_local_machine software Microsoft Teams. If a team key is not there, you can create this. We then want to create a D word key with the name is AVD environment. I will set value to one. Once we have set this we need to download and install the Teams WebSocket service.</p>
<p>As you can see, we have already downloaded the install file along with the Teams install package for later. We follow the instructions on Teams WebSocket service install until this is completed. The final part of this demo is to install the Microsoft Teams MSI package which we are going to do via PowerShell. There are two types of install method, either per user install or the per machine install. We are going to complete the per machine install commander, which is MSIexec&#x2F;I and then the path to the MSI&#x2F;L*V. And then the file path to the install log file. All user equals one. We have saved our MSL file to the C temp directory, which is the same location we will start our installation log file. Once this is completed, we are ready to use Microsoft Teams.</p>
<h1 id="Implementing-and-Managing-Browsers-and-Internet-Access-for-AVD-Sessions"><a href="#Implementing-and-Managing-Browsers-and-Internet-Access-for-AVD-Sessions" class="headerlink" title="Implementing and Managing Browsers and Internet Access for AVD Sessions"></a>Implementing and Managing Browsers and Internet Access for AVD Sessions</h1><p>Welcome to this module on implementing and managing browsers and internet access for Azure Virtual Desktop sessions. We will cover the following topics in this module. We’ll discuss managing internet access for AVD. We’ll finish this module by talking about managing browsers on a session host.</p>
<p>Let’s start off by talking about managing internet access for Azure Virtual Desktop. There are multiple methods in which you can control and manage into the access from Azure Virtual Desktop. You can implement network security groups, NSG, to create inbound and outbound rules on what parts are able to route out to the internet. You can implement an Azure firewall within your AVD environment to filter traffic inbound and outbound to the internet. This allows you more flexibility and control than an LSG, as well as additional security measures for internet access, like web filtering.</p>
<p>You can also implement a network virtual appliance, NVA, which includes third-party firewalls have the same control and flexibility as an Azure firewall for internet access. Depending on your requirements, you can block or allow access to the internet from your AVD session host. Finally, as we touched on earlier, you can filter access to the internet from AVD by using features like web filtering to block certain categories of websites like gambling.</p>
<p>In the final section of this module, we are going to discuss managing browsers on a session host. There are multiple methods you can utilize to deploy browsers within a session host. You can publish an application using MSIX App Attach or a Remote app. You can facilitate this by using the New-AzWvdApplication commander in PowerShell. If the browser needs to be standard for all users, you can include it as part of your golden image, which ensures it is applied to all session hosts. Finally, Azure Virtual Desktop Windows 10 session hosts support multiple browsers, including Google Chrome, Mozilla Firefox, and Edge Chromium.</p>
<h1 id="Creating-and-Configuring-an-Application-Group"><a href="#Creating-and-Configuring-an-Application-Group" class="headerlink" title="Creating and Configuring an Application Group"></a>Creating and Configuring an Application Group</h1><p>Welcome to this module on creating and configuring an application group. We will look at the following topics in this module. We’ll explain what application group is within an AVD environment. In the final lecture of this module, we’ll complete a walk-through demo of creating, configuring an application group. Let’s start this module by explaining what an application group is. It is a collection of remote applications that you published within the Azure Virtual Desktop environment. You must associate the application group with a pooled host pool only, not a personal host pool. You can publish both Windows desktop and remote app within an application group. Finally, you can create an application group using the Azure portal, PowerShell, and Azure CLI.</p>
<p>In the demo at the end of this module, we’ll show how to create an application group via the Azure portal. In the final lecture of this module, we’ll complete a demo walk-through of configuring an application group for your PowerShell. We saw in the remote app module, how to create an application group via that Azure portal earlier. In this demo we’re going to create an application group as a remote app with PowerShell. Here we are in the Azure portal and we are going to use the Azure Cloud Shell with PowerShell to run our commanders.</p>
<p>First command that we want to run is the new AZ WVD application group. Well, we need to specify the name we want to give the new application group, the name of our resource group, the type of application group we want to create, in our case this is a remote app, and then the host pool Arm path. At the end, we need to specify the region we want the application group to exist in. Next, we need to find the name of the app earliest we want to configure as our remote app. So, to get this information we run the get dash is at WVD start menu item, where we specify our application group name, and resource group name. This will output all the apps on the start menu and the alias name. So, we can specify this in the next command that we need to run.</p>
<p>Finally, we run the new AZ WVD application commander where we can specify that app alias we documented from the commander before as well as our group name; name we want to give the app and the resource group name. Once these three commanders are completed, we have provisioned our application group.</p>
<h1 id="Troubleshooting-Application-Issues-Related-to-AVD"><a href="#Troubleshooting-Application-Issues-Related-to-AVD" class="headerlink" title="Troubleshooting Application Issues Related to AVD"></a>Troubleshooting Application Issues Related to AVD</h1><p>Welcome to this module on troubleshooting application issues related to Azure Virtual Desktop. We will discuss the following topics in this module. We’ll discuss information gathering and about application issues related to AVD. We’ll finish off the module by looking at performance counters. Let’s start this module by discussing information gathering when troubleshooting application issues in AVD.</p>
<p>Generally, poor application performance is very hard to diagnose. You need to start this process by first collecting information on CPU usage, memory usage, and storage disk input&#x2F;output metric. However, the data alone is not enough to find root cause issues with application performance. We need to use performance counters if we want to use the information you have gathered to find the root cause of an application performance issue.</p>
<p>The user input delay counter can help you quickly identify the root cause for bad end-user RDP experiences including poor application performance. This count measures how long any user input stays in the queue before it’s picked up by a process. It works both locally and in remote sessions. You need to enable a register key under HK Local Machine, System, CurrentControlSet, Control, Terminal Server, and create a REG_DWORD key called EnableLagCounter, then set it to the value of one. Finally, you need to use the Performance Monitor Windows application to review the performance counters once you have enabled them and restarted your session host.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We covered a lot of ground in this course, including several important topics around installing and configuring apps on a session host. We started the course by discussing Configuring Dynamic Application delivery by using MSIX App Attach.</p>
<p>In this section, we explained what MSIX app attach is, how it works, and finished off with a demo of setting up a file share for MSIX App Attach. We then moved on to the topic of implementing app masking, where we explained what FSLogix Application Masking is and then completed the section with the demo of implementing FSLogix App masking on a session host. The third section of this course saw us cover Deploying an Application as a RemoteApp, in which we focused initially on explaining what RemoteApp is, what its requirements are, and again finished up with the demo of deploying a RemoteApp via the Azure Portal.</p>
<p>Next, we moved on to discussing, implementing, and managing OneDrive for Business for Multi-Session Environments. In this section, we discussed an overview of OneDrive for Business and finished off with a demo of installing OneDrive sync app per machine version. Following on from here, we tackled the topic Implementing and Managing Microsoft Teams AV. We initially focused on talking about RDP redirection properties within AVD that needs to be in place before implementing Microsoft Teams. We finished the section off by completing a walk-through demo of installing Microsoft Teams desktop app. We continued with the course and moved on to the topic of implementing and managing browsers and Internet access for Azure Virtual desktop.</p>
<p>In this short section, we discussed managing Internet access and managing browsers on a session host. In the penultimate section of this course, we discussed creating and configuring application group. Here, we explained what an application group is, followed by a demo of configuring application group via Azure PowerShell in the Azure Portal. In the final section of this course, we had a closer look at troubleshooting application issues related to Azure Virtual Desktop. Here, we covered information gathering and finally discussed performance counters.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Knowledge-Check-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Knowledge-Check-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-21/" class="post-title-link" itemprop="url">AZ-140-Knowledge-Check-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-21</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-13 19:05:02 / Modified: 20:01:00" itemprop="dateCreated datePublished" datetime="2022-11-13T19:05:02-04:00">2022-11-13</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Knowledge-Check-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-21/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Knowledge-Check-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-21/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-20/" class="post-title-link" itemprop="url">AZ-140-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-20</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-13 19:00:45" itemprop="dateCreated datePublished" datetime="2022-11-13T19:00:45-04:00">2022-11-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-14 06:32:54" itemprop="dateModified" datetime="2022-11-14T06:32:54-04:00">2022-11-14</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-20/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-20/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on Configuring User Experience in Azure Virtual Desktop. My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist and have been working in the Microsoft cloud services for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications. My contact information is available on the screen. </p>
<p>Please feel free to reach out to me with any questions, comments, or concerns and I will be happy to discuss these with you. For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#115;&#117;&#112;&#x70;&#111;&#114;&#116;&#64;&#x63;&#x6c;&#111;&#117;&#x64;&#x61;&#99;&#x61;&#x64;&#101;&#x6d;&#121;&#x2e;&#x63;&#x6f;&#109;">&#115;&#117;&#112;&#x70;&#111;&#114;&#116;&#64;&#x63;&#x6c;&#111;&#117;&#x64;&#x61;&#99;&#x61;&#x64;&#101;&#x6d;&#121;&#x2e;&#x63;&#x6f;&#109;</a> and one of our cloud experts will follow up with you. This course is intended for anyone planning to take the Azure Virtual Desktop Specialty exam and anyone interested in learning how to deploy an Azure Virtual Desktop environment</p>
<p> By the end of this course, you will have knowledge on:</p>
<ul>
<li>Configuring Universal print</li>
<li>Configuring user settings through group policies and Endpoint Manager policies</li>
<li>Configuring persistent and non-persistent desktop environments</li>
<li>Configuring Remote desktop Protocol (RDP) properties on a host pool</li>
<li>Configuring session timeout properties</li>
<li>Troubleshooting user profile issues</li>
<li>Troubleshooting Azure Virtual Desktop clients</li>
</ul>
<p>To get the most from this course you should have an Administrator-level understanding of Azure Cloud services. When I created this course, all information was current. Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:&#115;&#117;&#112;&#x70;&#111;&#114;&#x74;&#64;&#99;&#x6c;&#111;&#x75;&#100;&#97;&#x63;&#x61;&#100;&#101;&#109;&#121;&#x2e;&#x63;&#111;&#109;">&#115;&#117;&#112;&#x70;&#111;&#114;&#x74;&#64;&#99;&#x6c;&#111;&#x75;&#100;&#97;&#x63;&#x61;&#100;&#101;&#109;&#121;&#x2e;&#x63;&#111;&#109;</a>.</p>
<p>If you notice any updates or corrections, please reach out to us. Thank you!</p>
<h1 id="Configuring-Universal-Print"><a href="#Configuring-Universal-Print" class="headerlink" title="Configuring Universal Print"></a>Configuring Universal Print</h1><p>Welcome to this module on configuring Universal Print. In this module we will discuss the following topics:</p>
<ul>
<li>We will first explain exactly what the Universal Print service is</li>
<li>Next, we will look at some of the prerequisites that need to be implemented before you can deploy the Universal Print service.</li>
<li>Finally, we will explain the four steps you need to complete when setting up Universal Print</li>
</ul>
<p>Let’s start off by explaining exactly what the Universal Print service is. It is a modern print solution that you can utilize to manage your print infrastructure. It runs completely in Azure and require zero on-premises infrastructure.</p>
<p>From a license perspective, it is a Microsoft 365 subscription-based service, so there is no need to purchase any extra license. Finally, it is fully integrated with Azure AD and supports single sign-on (SSO).</p>
<p>Now we know what the Universal Print service is, let’s move on to looking at prerequisites. As with most cloud-based services, you need to ensure you complete certain tasks before you can start to deploy or implement it.</p>
<p>For the Universal Print service, you need to ensure that an eligible license has been assigned to the admin user who will be configuring the deployment. You then need to ensure the user has either the Printer Administrator role or the Global Administrator role. Keep in mind that it is best practice to follow least privilege access when assigning admin roles.</p>
<p>Finally, you need to ensure you have a Windows 10 client device running version 1903 and above. Using the latest OS release will provide a much richer user experience. In this final lecture of this module, let’s look at the 4 steps that need to be completed to deploy the Universal Print Service. </p>
<p>Step 1 is to set up the Universal Print connector. This is the component that you can utilize to make a printer work with Universal Print. You use this connector when you do not have a printer that directly connects to the Universal Print Service.</p>
<p>Step 2: You need to register the printers by using the Universal printer connector. This is similar to installing a printer on a print server. Once it is registered it will be accessible to add to devices for users with the relevant permissions.</p>
<p>This leads us well to Step 3, which is to assign permissions and share the printer. You can assign permissions to Azure AD users and security groups. Once the permissions are granted, it then needs to be shared.</p>
<p>Step 4, the final step, is to add the Universal printer to the end-users Windows device. You need to ensure the device is connected to the Internet and that it is either Azure AD joined, Azure AD registered, or Hybrid Azure AD joined before adding the printer. </p>
<h1 id="Configure-User-Settings-through-Group-Policies-and-Endpoint-Policies"><a href="#Configure-User-Settings-through-Group-Policies-and-Endpoint-Policies" class="headerlink" title="Configure User Settings through Group Policies and Endpoint Policies"></a>Configure User Settings through Group Policies and Endpoint Policies</h1><p>Welcome to this module on configuring user settings through group policy and endpoint manager policies. In this module we will cover the following topics:</p>
<ul>
<li>Configuring Azure Virtual Desktop via Group Policy, including a walkthrough demo</li>
<li>Configuring Azure Virtual Desktop via Endpoint Manager, including a walkthrough demo</li>
</ul>
<p>Let’s start this module by looking at configuring AVD via Group Policy. In order to allow Group Policy to be able to access Azure Virtual Desktop, you need to ensure your session hosts are either Active Directory Domain joined, or Hybrid joined.</p>
<p>You can then deploy group policies the same way you would in an on-premises environment, including being able to configure both computer configuration policies and user configuration policies. Let’s do a demo configuration of a group policy for Azure Virtual Desktop.</p>
<p>Here we are logged into one of our Azure virtual machines that we are preparing as a golden image for our AVD deployment. We need to navigate to the local group policy app from the Start menu. As you can see here we have both Computer and User configuration. </p>
<p>We will now browse to the Windows settings under Computer configuration, then Security settings then click on the Network List Manager Policies. We have 4 options here, but we want to choose All networks. This policy Is going to allow us to control permissions for if users can change the network name, location, or icon from within the session. We are going to change each option so the user cannot change any of them and click on OK.</p>
<p>Let’s check out some additional settings we can configure via Group Policy. This time, under computer configuration, let’s select administrative templates and then expand network. Here we have a whole host of settings we can configure, including Background Intelligent Transfer Service (BITS) and DirectAccess Client Experience Settings. </p>
<p>Let’s select the BITS settings and again we have a whole list of settings we can configure. For example, if we double click ‘Do not allow the computer to act as a BITS processing server’ if we enable this then the session hosts will no longer cache downloaded files and offer them to its peers.</p>
<p>Let’s now check out the network settings we can configure, specifically the ‘Prohibit use of Internet Connection Sharing on you DNS Domain network’. By enabling this setting, ICS cannot be enabled or configured by an administrator and the service cannot be run on this session host. We have multiple policies we can configure but this very much depends on your organization’s requirements. Now we have looked at configuring Group policy for Azure Virtual Desktop, let’s look at configuring AVD via Endpoint Manager.</p>
<p>In order to allow Endpoint Manager to be able to access Azure Virtual Desktop, you need to ensure your session hosts are either Azure AD joined, or Hybrid joined. However, there are some limitations, for example, it is not possible to deploy a configuration policy to configure Wi-Fi settings on a Windows 10 device. Additionally, Autopilot reset is not currently supported with Endpoint Manager integration. Another limitation example is that it is not currently possible to remotely wipe an Azure Virtual Desktop session host via Endpoint Manager. </p>
<p>We will finish this module with a demo of configuring Azure Virtual Desktop via Endpoint Manager.</p>
<p>Here we are logged into the Endpoint Manager portal. Let’s navigate to our session host which is Azure AD enrolled which we can see if currently fully compliant and managed by Intune. If we click on it we can see we have multiple options we can manage, but if we go back a step we can see the different types of policies and profiles we can configure, including Compliance policies, configuration profiles, and Windows 10 update rings.</p>
<p>If we go back into the device again, we can see the options that are support and not supported as they are greyed out, and if needed, we can obtain information from the left-hand side menu regarding device compliance and configuration.</p>
<h1 id="Configuring-Persistent-and-Non-Persistent-Desktops"><a href="#Configuring-Persistent-and-Non-Persistent-Desktops" class="headerlink" title="Configuring Persistent and Non-Persistent Desktops"></a>Configuring Persistent and Non-Persistent Desktops</h1><p>Welcome to this module on configuring persistent and non-persistent desktop environments. We will cover the following topics:</p>
<ul>
<li>Configuring persistent desktop environments including a walkthrough demo</li>
<li>Configuring non-persistent desktop environments including a walkthrough demo</li>
</ul>
<p>Let’s first look at configuring persistent environments. The definition of a persistent VDI environment is when the user has the same experience each time they login. This means they can access saved files and any specific customizations to the desktop are still intact every time they login, even after reboots.</p>
<p>There are two types of persistent environments available with Azure Virtual Desktop. The first is pooled host pools where users share the resources on the session hosts. We then have personal host pools which is a 1 to 1 ratio, so when the user logs in they are assigned the same session host with the same settings and files they saved the last time they logged in. FSLogix profile containers are utilized to facilitate user profiles which helps give the users a more persistent experience.</p>
<p>Let’s now do a quick demo of how to provision a persistent desktop in Azure Virtual Desktop via the Azure Portal. Here we are in the Azure Portal in the AVD blade and to create a persistent environment we need to create a new host pool. Let’s click on Create under the host pool blade and enter all the required details such as subscription, resource group, host pool name, and location.</p>
<p>As mentioned earlier in this section we have two types of persistent environments, pooled and personal host pools. If we click on pooled host pools we then need to set the load balancing algorithm. We again have two options, breadth-first or depth-first. Breadth-first is when all user connections are randomly sent to any available session host within the environment. Depth-first is when all new connections are sent to a single session host until it hits a limit that you set, after which any new connections are sent to the next available session host. Before we move on we set a connection limit and then move on to configuring the virtual machine settings for the host pool.</p>
<p>We enter all the required settings again like resource group, name prefix, location, availability zone, and Image. You can then select the VM size you wish to have as part of the your deployment. Once all the settings have been specified and you have entered all the relevant credentials, we can move on to configuring the workspace, then the advanced settings and tags. Finally, you can create your persistent desktop environment. Now we understand configuring persistent environments, let’s move onto looking at configuring non-persistent environments.</p>
<p>Non-persistent environments within Azure Virtual desktop are based on ephemeral disk, which is like a temporary disk. From a user experience perspective in a non-persistent environment, users essentially see a new desktop every time they log back in, they will not see any files that have been saved locally on the disk and any customizations that are made will also not be saved. Non-persistent environments using Ephemeral disks are ideal for stateless applications which are tolerant of individual virtual machine failures. </p>
<p>Let’s now do a quick demo of how to provision a non-persistent desktop in Azure by looking at how to provision an Ephemeral disk on an Azure VM. To configure our non-persistent desktop environment, we need to create the session hosts with Ephemeral disks. In this demo, I will walk through how to configure one with an Azure virtual machine. Here we are in the Azure portal in the virtual machine blade. We want to create an Azure virtual machine. We then need to configure all the standard basic settings, including subscription, resource group, VM name, region, and image.</p>
<p>Now we need to ensure we select VM size that is supported as not all sizes support Ephemeral disks. You need to ensure you select one with a large enough Temp disk cache. Once all the basic settings are configured, we then move onto the Disks tab. If you navigate to the bottom of the page under ‘Advanced’ you have the option for the Ephemeral disk which by default is set to none. We can either select OS cache placement or Temp disk placement depending on what our requirement is. We can then move onto the complete the rest of the VM configuration, including Networking, Management, Advanced, and Tags before finally creating the VM.</p>
<h1 id="Configuring-RDP-Properties-on-a-Host-Pool"><a href="#Configuring-RDP-Properties-on-a-Host-Pool" class="headerlink" title="Configuring RDP Properties on a Host Pool"></a>Configuring RDP Properties on a Host Pool</h1><p>Welcome to this module on configuring Remote Desktop properties (RDP) on a host pool. We will cover the following topics in this module:</p>
<ul>
<li>We will explain what the RDP properties are</li>
<li>Look at some examples of the RDP properties that can be configured</li>
<li>Finally, we will complete a walk-through demo of configuring some RDP properties in the Azure Portal</li>
</ul>
<p>Let’s start off by discussing what RDP properties are. RDP properties are a method for administrators to customize host pool features to meet your organizations’ requirements. The customizations you make can enhance the user experience as it gives them a more local desktop feel to the environment. There are two ways in which you can configure the RDP properties. First, you can make configuration changes via the Azure Portal, something we will explore in the demo at the end of this module. Secondly, you can use PowerShell with the Azure module to make changes to the RDP properties.</p>
<p>Now let’s move on to looking at some examples of RDP properties you can customize before we dive into the demo. Firstly, we have connection information. Here, for example, you can configure whether Remote Desktop will use CredSSP for authentication if it is available as well as specifying a program to automatically start when the remote computer is started.</p>
<p>Next, we have Session behavior. In this section, we can configure reconnection settings, compression settings, and video playback settings as a few examples. We then have a device redirection section. Here, we have a few customizations we can make, including Audio and Video redirection settings, and local devices and resource redirection including printers, drives, and USB devices.</p>
<p>Another important feature is being able to configure display settings for our Azure Virtual Desktop environment. This includes multiple monitors, resolution, and Desktop size as a few examples. The final customization is the Advance section. Here we can set custom RDP properties but in script form. We will take a closer look at this in the demo. In the final lecture of this module, we are going to complete a walk-through demo of configuring some of the RDP properties via the Azure Portal.</p>
<p>Here we are in the Azure Portal, specifically the Azure Virtual Desktop blade. To configure the RDP properties, we need to navigate to the Host pool and then under settings, we will find RDP properties. You can now see all the customizations options we mentioned earlier in this lecture. For the purpose of this demo, we are going to configure only a few of these settings.</p>
<p>Let’s start with Session Behavior. Here we are going to set the Reconnection option to automatically try and reconnect and the video playback setting to Use RDP-efficient multimedia streaming for the video playback when possible. </p>
<p>Moving onto the Device Redirection tab, we have a number of customizations we are going to set. We are going to start with setting the Microphone redirection, Redirect video encoding, and Audio output location. Under Local devices and resources, we will set the camera redirection, clipboard redirection, smart card redirection, and finally disable the USB redirection.</p>
<p>We are going to make a few changes to the display settings to finish off, including enabling multiple displays, setting the screen mode to full screen, and setting the desktop size. The final item I wanted to highlight in this demo is the Advanced tab, where you can set custom RDP properties in script form and separate them by semicolons.</p>
<h1 id="Configuring-Session-Timeout-Properties"><a href="#Configuring-Session-Timeout-Properties" class="headerlink" title="Configuring Session Timeout Properties"></a>Configuring Session Timeout Properties</h1><p>Welcome to this module on configuring session timeout properties. We will cover the following topics in this module:</p>
<ul>
<li>We will explain what session timeout properties are</li>
<li>We will finish off with a demo walkthrough of configuring session timeout properties for Azure Virtual Desktop</li>
</ul>
<p>Let’s start off by looking at exactly what session timeout properties are. The session timeout feature allows you to log off user sessions that have been inactive for a specified amount of time. It is configured via the local group policy on a session host, so it would be recommended to implement this during the golden image creation. This way it is deployed to all session hosts.</p>
<p>The session timeout properties configuration includes setting time limits for, disconnected sessions, active but idle remote desktop services sessions, active remote desktop services sessions, and finally, you can configure the ability to end sessions when time limits are reached. We will set all these properties in the demo which is next.</p>
<p>Now we understand what session timeout properties are, let’s complete a walkthrough demo of configuring them via the local group policy on a session host. Here we are in our virtual machine which we are going to use for our session host golden image. We need to open the local group policy editor. Once it is opened, we navigate to ‘Computer Configuration &gt; Administrative Templates &gt; Windows Components &gt; Remote Desktop Services &gt; Remote Desktop Session Host &gt; Session Time Limits. Here we have all the session time-out policies we discussed earlier in this module.</p>
<p>Let’s first edit ‘Set time limit for disconnected sessions’, enable it, and set this to 30 minutes. Next, let’s edit the ‘Set time limit for active but idle Remote Desktop services sessions’ but set this to a little sooner at 10 minutes. Next, let’s edit ‘Set time limit for active Remote Desktop Services sessions’, enable it, but leave it set to never. We are now going to enable the policy called ‘End session when time limits are reached’, in the event we set time limits within our AVD environment. The final policy we want to configure is the ‘Set time limit for logoff of RemoteApp sessions’ and after enabling this we will set it to 30 minutes. This completes the configuring session timeout demo.</p>
<h1 id="Troubleshooting-User-Profile-Issues"><a href="#Troubleshooting-User-Profile-Issues" class="headerlink" title="Troubleshooting User Profile Issues"></a>Troubleshooting User Profile Issues</h1><p>Welcome to this module on troubleshooting user profile issues. In this module we will cover the following topics:</p>
<ul>
<li>We will look at the tracks you can utilize to escalate issues with Microsoft</li>
<li>We will then discuss the different methods of reporting issues</li>
<li>Finally, we will touch on some common user profile related issues you might come across</li>
</ul>
<p>Let’s start by discussing Escalation tracks. When you are faced with an issue including profile-related ones and you are struggling to find a solution, you can escalate the issue directly to Microsoft. Before doing this however you can take a look at the Azure Status page and the Azure Service health page in the portal to check if there are any known issues or outages that might be the root of your problem. If that is not the case, you can move forward with opening an Azure support request so you can troubleshoot the issue with the Microsoft Engineer.</p>
<p>Let’s now discuss Reporting issues. There are many different places you can find help for all types of Azure Virtual Desktop issues, including profile-related problems. To start with you can create a thread within the AVD Tech community site where you can potentially receive help and advice from other Tech professionals who may have had similar issues and recommend a solution.</p>
<p>As we mentioned earlier, you can report issues directly to Microsoft by creating a support ticket. As well as problems you can also suggest new features you might want to see within the AVD environment and Microsoft can take this into consideration. In the final section of this module, let’s discuss some common user profile-related issues you may come across when managing and implementing Azure Virtual Desktop.</p>
<p>Some common user profile issues include the user profile failing to attach to the session. In this case, you will get an error and are unable to sign in. This can be caused by communication issues between the session hosts and the profile containers, and a reboot of the session can resolve this. Another issue may be that you could be logged in with a local profile, rather than your network profile. This can be caused by permissions or a corrupt profile. Finally, a common issue you might find is that the FSLogix profile container has not been correctly configured in the Image so all the session hosts will have the incorrect user profile path.</p>
<h1 id="Troubleshooting-Azure-Virtual-Desktop-Clients"><a href="#Troubleshooting-Azure-Virtual-Desktop-Clients" class="headerlink" title="Troubleshooting Azure Virtual Desktop Clients"></a>Troubleshooting Azure Virtual Desktop Clients</h1><p>Welcome to this module on Troubleshooting Azure Virtual Desktop clients. We will cover the following topics in this module:</p>
<ul>
<li>We explain what the Remote Desktop Client is</li>
<li>We will finish off the module by discussion some common issues with the Remote Desktop client</li>
</ul>
<p>Let’s start by explaining what the Remote Desktop client is. This is an application that is utilized by your end users to connect into your Azure Virtual Desktop environment. It is supported on multiple platforms and operating systems, including Windows, Android, iOS, MacOS, and a web client version.</p>
<p>Let’s finish off this short module by discussion some of the common issues you may come across with the Remote Desktop client. You may come across an issue where the client app has stopped responding. In this scenario, you can reset the user data by using the command called msrdcm.exe which will remove user data, restore default settings, and unsubscribe from all workspaces. Another common issue you may come across is that the web client will not open. With this type of issue, you need to do a DNS check to ensure your internet connection is working as expected. If this is the case, then restart your web browser or try a different browser.</p>
<p>You might come across a problem where the client has opened and logged in correctly, however you see no resources. For this type of issue, ensure the user is logged in to the app from the correct Azure AD account. If these checks are ok and you need to ensure your app group is associated with a workspace. The final common issue I want to touch on is when your web client stops responding or continually disconnects. In this type of scenario, you should try reconnecting using a different browser or different client.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We have covered several important topics in this course. We started off by discussing the Universal Print service, where we explained what this service was, some of the prerequisites that need to be in place before we can use it, and four high-level steps you need to complete to implement this service. We then moved on to talking about configuring user settings through Group Policy and Endpoint Manager. In this lecture, we looked at configuring the user settings via Group Policy, including a walkthrough demo of how to implement this. We then discussed configuring AVD via Endpoint Manager which also included a demo.</p>
<p>Moving on, we looked at persistent and non-persistent desktop environments where we initially discussed what persistent desktops are including a walkthrough demo of how to configure a pooled host pool. We then did the same with looking at non-persistent desktops, which included a walkthrough demo of implementing an Ephemeral disk to an Azure Virtual machine. We continued on in this module to talk about configuring Remote Desktop Protocol (RDP) properties on a host pool. This lecture included discussing what the RDP properties were, then looking at examples of the RDP properties, finishing off with a walkthrough demo of configuring the RDP properties in the Azure portal.</p>
<p>Next, we took a closer look at Session timeout properties. We touched on two topics in this lecture. First, we discussed what session timeout properties are, and second, we did a walkthrough demo of configuring session timeout properties via the local group policy settings. In the penultimate lecture in this module, we took a closer look at Troubleshooting user profile issues. We initially discussed options around escalating issues to Microsoft, then the different methods in which you can report issues, and finally some common user profile issues you may come across with AVD.</p>
<p>In the final lecture in this module, we talked about Troubleshooting Azure Virtual Desktop clients. We covered two topics in this lecture. First, we explained what the Remote Desktop client is and then discussed some common issues that you may encounter with the Remote Desktop client app.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Managing-Access-to-Azure-Virtual-Desktop-14/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Managing-Access-to-Azure-Virtual-Desktop-14/" class="post-title-link" itemprop="url">AZ-140-Managing-Access-to-Azure-Virtual-Desktop-19</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-13 18:59:14" itemprop="dateCreated datePublished" datetime="2022-11-13T18:59:14-04:00">2022-11-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-14 06:33:08" itemprop="dateModified" datetime="2022-11-14T06:33:08-04:00">2022-11-14</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Managing-Access-to-Azure-Virtual-Desktop-14/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Managing-Access-to-Azure-Virtual-Desktop-14/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on Managing Access to Azure Virtual Desktop. My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist and have been working in the Microsoft cloud analogics for several years, specifically with Azure Virtual Desktop since its inception and have multiple Azure-focused certifications. My contact information is available on screen. Please feel free to reach out to me with any questions, comments, or concerns, and I will be happy to discuss these with you. For any other issues you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>, and one of our cloud experts will follow up with you.</p>
<p>This course is intended for people that are planning on taking the Azure Virtual Desktop Specialty exam and anyone who is interested in learning how to deploy an Azure Virtual Desktop environment. By the end of this course, you will have knowledge on:</p>
<ul>
<li>Planning and implementing Azure roles and role-based access control for Azure Virtual Desktop</li>
<li>Managing roles, groups, and rights assignment on Azure Virtual Desktop session hosts</li>
<li>Configuring user restrictions by using AD group policies and Azure policies</li>
</ul>
<p>To get the most from this course, you should have an Administrator-level understanding of Azure Cloud services.</p>
<p>Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>Please note, at the time of writing this content, all course information was accurate. To accommodate new features and services, Microsoft regularly update exam guidelines and measured skills. This may result in certain elements of discrepancy appearing in the content over time. Please contact us if you find any outdated content at <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. This will allow us to update the course during its next release cycle. Thank you.</p>
<h1 id="Planning-and-Implementing-Azure-Roles-and-Role-Based-Access-Control-RBAC-for-Azure-Virtual-Desktop"><a href="#Planning-and-Implementing-Azure-Roles-and-Role-Based-Access-Control-RBAC-for-Azure-Virtual-Desktop" class="headerlink" title="Planning and Implementing Azure Roles and Role-Based Access Control (RBAC) for Azure Virtual Desktop"></a>Planning and Implementing Azure Roles and Role-Based Access Control (RBAC) for Azure Virtual Desktop</h1><p>Welcome to this module on Planning and Implementing Azure Roles and Role-Based Access Control or RBAC for Azure Virtual Desktop. In this module, we’ll cover the following topics, what is role-based access control or RBAC? We’ll discuss some of the Azure Virtual Desktop specific built-in roles. Finally, we’ll talk about delegated access in Azure Virtual Desktop.</p>
<p>Let’s start by discussing what role-based access control, better known as RBAC, is. It allows you to manage who has access to resources within Azure. It is an authorization mechanism that is built on Azure Resource Manager, better known as ARM, that allows administrators to configure fine-grained access management to resources.</p>
<p>There are three elements to role-based access control. The first is a security principle, which represents some type of object, for example, a user or a group. The second type of element, is role definition, which is a collection or a set of permissions. Essentially a role definition lists the actions. For example, read, write or delete, that can be performed. The final element is a scope. This is a set of resources to which the access is applying to. There are different levels of scope, including management groups, subscriptions and resource groups.</p>
<p>In the next part of this course, we are going to look at some of the built-in roles that are relevant to Azure Virtual Desktop. We start off with desktop virtualization role, which has a reader role and a contributor role. The reader role allows you to view all aspects of the deployment, but not make any changes. The contributor role enables you to manage all parts of the deployment, however, it does not allow you to access to any of the compute resources.</p>
<p>The next relevant role is the desktop virtualization host pool role, which again, has a reader and contributor level access. The reader level allows you to view all aspects of the host pool only and not modify any settings, whereas a contributor role allows you to manage everything within the host pool. However, you do need an additional contributor role for the virtual machine, if you wish to create any VMs. The desktop application group role, is similar to the host pool role, in that it has both reader and contributor levels. With the reader level role, it allows you to view everything within the application group and the contributor level, allow you to manage everything within the application groups. However, if you wish to publish apps, you need to have the user access administrator role.</p>
<p>Next, we have the desktop virtualization workspace role, which again has two levels, reader and contributor. The reader level role allows you to view all aspects of the workspace but not adding anything. The contributor level role allows you to manage everything within the workspace. However, to obtain information on applications within that app group, you need to be assigned the application group reader role. There are two more roles that are relevant to Azure Virtual Desktop. The first is the desktop virtualization user session operator. This role allows you to manage user logins and to do tasks such as sending messages, disconnecting sessions, and remotely logging users off by sessions.</p>
<p>The final role is called desktop virtualization session host operator. This role will enable you to change drain mode and view and remove session hosts from a host pool. This level of access does not have right permissions, however, so you cannot add session host into the host pool. In the final section of this module, we are going to view delegated access with Azure Virtual Desktop.</p>
<p>Like role-based access control, delegated access has the same three elements, which are security principles, role definitions, and scope. Security principles have three values, which are all objects, including users, groups, and service principles. Role definitions have two type of roles. Either built-in roles, which we discussed in the previous section of this module and custom roles. These are roles you can customize with different permissions. Finally, we have the scope elements of delegated access. As mentioned earlier, this is the resources you assign the roles and permissions to, which include host pools, app groups, and workspaces.</p>
<h1 id="Managing-Roles-Groups-and-Rights-Assignment-on-Azure-Virtual-Desktop-Session-Hosts"><a href="#Managing-Roles-Groups-and-Rights-Assignment-on-Azure-Virtual-Desktop-Session-Hosts" class="headerlink" title="Managing Roles, Groups, and Rights Assignment on Azure Virtual Desktop Session Hosts"></a>Managing Roles, Groups, and Rights Assignment on Azure Virtual Desktop Session Hosts</h1><p>Welcome to this module on managing roles, groups, and rights assignment on Azure Virtual Desktop. In this module, we’ll cover the following topics, which will both be demo-focused. We will look at how to add users to the Azure Virtual Desktop-specific roles. Finally, we’ll walk through how to add users and groups to Azure Virtual Desktop host pools, to allow access to session hosts.</p>
<p>In this first section, we are going to show how to add users to the Azure Virtual desktop specific groups we have discussed in the planning and implementing Azure roles and role-based access control, RBAC, for Azure Virtual Desktop module. Here we are in the Azure portal. We first need to navigate to the Azure Virtual Desktop service. We have two options, we can either user search at the top, where we can type Azure Virtual Desktop, like this, and click on the service. Or, like me, if you have it as a shortcut on the dashboard, you can just click this, and it’ll take you to the service as well.</p>
<p>Next, we’ll click on Host pools in the left-hand pane. Now we can see our host pools in the center. In this case, we have a single host pool, click on the host pool, and we now see the overview for this resource. On the left-hand pane, we need to look for access control, IAM, to the access control service for this host pool.</p>
<p>Now we want to try and add a user to one of the desktop virtualization role assignments we discussed in an earlier module, so we will select Add, and then Add role assignment. We are now on the Add role assignment menu, and we can see all the available roles here, including the desktop virtualization roles. Let’s select one at random. Let’s say, the host pool reader role, then click on Next. We now have the option of either adding users, groups, or service principle to this role, or we can add a managed identity. In our case, we want to add a user, so we’ll click on Select members and add our user. We then click on the Review and assign button, and the same again. We can now see the desktop virtualization host pool reader role has appeared with a user we added.</p>
<p>This user now has read-only access to all the host pool resources. In this section, we are going to look at how we add a group to the host pool assignment, which will allow them access to log into the relevant session hosts. We first need to make sure we have created a security group, either on on-premises active directory, that I synchronized with Azure AD, or a cloud-based security group in Azure AD In our example, we have created a cloud security group in Azure AD, called AVD Users. We need to browse to the Azure Virtual Desktop service, as we did previously.</p>
<p>From here, we select the Application group. On the left-hand pane of our application group, we’ll navigate down to Assignments, where we can now click on Add. We now find the security group called AVD Users and select this. You should know that you can assign users to the application group directly, as well. However, it is a best practice recommendation to your security groups, as it is a less administrative overhead.</p>
<h1 id="Configuring-User-Restrictions-by-Using-AD-Group-Policies-and-Azure-Policies"><a href="#Configuring-User-Restrictions-by-Using-AD-Group-Policies-and-Azure-Policies" class="headerlink" title="Configuring User Restrictions by Using AD Group Policies and Azure Policies"></a>Configuring User Restrictions by Using AD Group Policies and Azure Policies</h1><p>Welcome to this module on configuring user restrictions by using AD group policies and Azure policies. In this module, we’ll cover the following topics: We’ll discuss how to manage Azure Virtual Desktop with Group Policy. Finally, we’ll take a look at the features available when managing Azure Virtual Desktop with Endpoint Manager.</p>
<p>Let’s start by looking at managing Azure Virtual Desktop with Group Policy. The policies available depend on what domain the session hosts are joined to. You can join session hosts to either Active Directory or Azure Active Directory Domain services. Both allow you to use the Group policy management tool to manage the various policies. If you use Azure AD Domain Services, you need to ensure your administrator account is a member of the Azure AD DC administrators group.</p>
<p>If the session hosts are joined to an Azure AD Domain Services tenant, you have two main policies called AADDC Computers and AADDC Users which you can edit and use to manage the Azure Virtual Desktop environment. If the session hosts are joined to an Active Directory Domain, either on-premises or a VM in Azure, then you can utilize all the standard GPOs that are available with a Domain Controller to manage the Azure Virtual Desktop environment. Let’s now move on to discussing managing Azure Virtual Desktop with Endpoint Manager.</p>
<p>Session hosts need to not only be domain joined but also enrolled into Intune to enable management, which is better known as Hybrid join. Once your session hosts are hybrid joined, you can start to manage them and take advantage of Endpoint Management features, such as compliance policies, which allow you to set baseline compliance the sessions hosts must meet. Configuration profiles, which allow you to configure settings including control panel access and desktop background on the session hosts. You can also utilize Windows Update for Business to manage update patching on the session hosts.</p>
<p>Finally, you can deploy applications to the session hosts including Office, other Win32 apps, and also, apps via the Windows Store.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>In this short module, we covered two main areas around management of Azure Virtual Desktop environment. First, we discussed managing Azure Virtual Desktop with Group Policy, and depending on how the session hosts are domain joined, you have different options. You can either use the limited policies available where the session hosts are joined to an Azure AD Domain Services tenant, or you can use the traditional more granular policies that are available when the session hosts are joined to an active directory domain.</p>
<p>In the final part of the module, we discussed how to manage Azure Virtual Desktop with Endpoint Manager. We discussed the requirement to hybrid join the session hosts, which then opened up the many features of Endpoint Manager, including compliance policies to set compliance policy baselines on the session host, configuration profiles to control settings on Windows 10, including control panel access and desktop background to name a few. You can then manage session host updates and patching via the Windows Update for Business service and to ensure that OS stays secure. Finally, you can deploy applications, including Office suite Win32 apps and apps from the Windows store.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Managing-FSLogix-on-Azure-Virtual-Desktop-19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Managing-FSLogix-on-Azure-Virtual-Desktop-19/" class="post-title-link" itemprop="url">AZ-140-Managing-FSLogix-on-Azure-Virtual-Desktop-19</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-13 18:59:14" itemprop="dateCreated datePublished" datetime="2022-11-13T18:59:14-04:00">2022-11-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-14 06:32:26" itemprop="dateModified" datetime="2022-11-14T06:32:26-04:00">2022-11-14</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Managing-FSLogix-on-Azure-Virtual-Desktop-19/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Managing-FSLogix-on-Azure-Virtual-Desktop-19/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Implementing-and-Managing-FSLogix-Introduction"><a href="#Implementing-and-Managing-FSLogix-Introduction" class="headerlink" title="Implementing and Managing FSLogix - Introduction"></a>Implementing and Managing FSLogix - Introduction</h1><p>Hello, and welcome to this course on implementing and managing FSLogix. My name is Shabaz Darr and I’ll be your instructor for this course. I’m an Azure Virtual Desktop Specialist, and I’ve been working with Microsoft Cloud Technologies for several years specifically with Azure Virtual Desktop since its inception and I have multiple Azure-focused certifications. My contact information is available on screen. Please feel free to reach out to me with any questions, comments, or concerns, and I’ll be happy to discuss these with you. For any other issues you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> and one of our cloud experts will follow up with you.</p>
<p>This course is intended for people that are planning on taking the Azure Virtual Desktop Specialty exam and anyone who is interested in learning how to deploy an Azure Virtual Desktop environment. By the end of this course, you will have knowledge on, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/planning-for-fslogix/">planning for FSLogix</a>, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/installing-and-configuring-fslogix/">installing and configuring FSLogix</a>, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/configuring-profile-containers/">configuring Profile Containers</a>, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/configuring-cloud-cache/">configuring Cloud Cache</a>, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/migrating-user-profiles-to-fslogix/">migrating user profiles to FSLogix</a>. To get them most from this course you should have an administrator-level understanding of Azure cloud services.</p>
<p>Feedback on course content hosted by Cloud Academy is always appreciated and encouraged as it allows us as trainers to improve, which helps all of our students taking courses in the future. If you have any feedback, positive or negative it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. When I created this course, all information was current. If you notice any updates or corrections please reach out to us. Thank you.</p>
<h1 id="Planning-for-FSLogix"><a href="#Planning-for-FSLogix" class="headerlink" title="Planning for FSLogix"></a>Planning for FSLogix</h1><p>Welcome to this module on planning for FSLogix. In this module, we will cover the following topics. We will start off by talking about what FSLogix is. Next, we will highlight some of FSLogix key capabilities. Finally, we will look at the eligibility requirements for FSLogix.</p>
<p>In this first lecture let’s discuss what FSLogix is. It’s primary function is to enhance user profile experience on VDI environments. FSLogix can be used for profile containerization, Office suite containerization, Application masking and Java version control. It allows user profile data to roam across the VDI session hosts which allows for a much richer experience when working in <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a>. Lets now take a look at some of the key capabilities of FSLogix. It allows you to redirect user profiles to a network location, and in the case of Azure Virtual Desktop, this is normally an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/intro-to-azure-storage/demo-creating-azure-file-share-1/">Azure File Share</a>.</p>
<p>Rather than redirect the entire profile, you can simply redirect only the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-microsoft-defender-office-365-1571/introduction/">Microsoft Office</a> suite data. This is normally used in a scenario when a company has a different roaming profile solution that is not FSLogix. Your applications that are installed on the Azure Virtual Desktop session hosts utilize the profile as if they were located on a local drive and are able to obscure the redirection. Application masking manages access to fonts, printers, applications and other items. You can control which users have access to these and which do not by using App Masking.</p>
<p>Finally, Cloud Cache is used with profile containers to create a resilient and highly available environment. It places a part of the profile virtual hard disk, VHD, on the local hard drive. We are going to finish this module by looking at the requirements to run FSLogix. You need to ensure you have the relevant Microsoft 365 license, which includes either Microsoft 365 E3, E5, F1, F3 or for companies who are eligible for education licensing, A3, A5. You can also utilize Windows 10 Enterprise E3, E5 or A3, A5 for the education sector. Remote Desktop Services, or RDS, Client Access License, CAL, and Subscriber Access License, SAL, is also supported. From an operating system perspective, FSLogix will run on Windows 7 and above for desktop OS and server 2008 R2 and above for server</p>
<h1 id="Installing-and-Configuring-FSLogix"><a href="#Installing-and-Configuring-FSLogix" class="headerlink" title="Installing and Configuring FSLogix"></a>Installing and Configuring FSLogix</h1><p>Welcome to this module on Installing and Configuring FSLogix. In this module, we’ll cover the following topics. We’ll complete a walkthrough demo of installing FSLogix. In this short demo, we’ll cover the steps you need to complete in order to install FSLogix to your Windows 10 OS. One thing to note is that at the time of this course the Windows 10 OS images that are available, via the Azure Marketplace, come with FSLogix pre-installed. So you should only need to complete these steps if you are creating an image from scratch outside of <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a>.</p>
<p>As you can see, we have an internet browser window open at the webpage where it gives us a download link for FSLogix. The direct link to download FSLogix is <a target="_blank" rel="noopener" href="https://aka.ms/fslogix/download">https://aka.ms/fslogix/download</a>. However, if we just click on the download link next to download, it will automatically download the required zip file. Once this is downloaded, browse to your download folder in Explorer and unzip the file. As you will see here, we have both 32 bit and 64 bit architecture installs available. In our example is 64 bit Windows 10, so we never get to those installation files.</p>
<p>Here, we have three possible installation files. The FSLogixAppsJavaRuleEditor install allows you to manage <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-java-programming/introduction/">Java</a> version control, the FSLogixAppsRuleEditor allows you to create an App Masking rule, and the FSLogixAppSetup allows you to configure profile and office containers. In our demo, we are just going to install FSLogixAppSetup. If we right-click run, this is an administrator, we will eventually see the license terms. You can click on Options to customize the install location, but in our demo we are going to leave this default and click on Install. Once this is successively installed, you can click on Close. The process to install the Java control and App Masking tools is very similar, so we will not cover those in this demo.</p>
<h1 id="Configuring-Profile-Containers"><a href="#Configuring-Profile-Containers" class="headerlink" title="Configuring Profile Containers"></a>Configuring Profile Containers</h1><p>Welcome to the module on configuring profile containers. We will cover the following topics in this module. We will complete a walk-through demo of configuring FSLogix for profile containers. Here we are logged into our Windows 10 session host where we will be configuring the environment for the profile containers. We start off by opening the registry, where we are going to create two entries.</p>
<p>Let’s navigate to HKey Local Machine, then software, FSLogix, and profiles. If we right-click in the center window, select new and then DWORD 32-bit value. Enter the word Enabled for the value, and set the value data to 1. Next, right-click in the center window again, select new, and this time we want to choose a multi-string value. We will enter a value of VHDLocations but for the data value we need to enter the path of your <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/intro-to-azure-storage/introduction-azure-files-1/">Azure Files</a> container, which can be obtained from the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal.</p>
<p>There are further customizations we can make if we need to include or exclude specific users. We can open the local users and group list to find these groups. I am navigating to Computer Management, and then Local Users and Groups, then Groups. As you can see at the bottom we’ve 4 groups, FSLogix ODFC Exclude and Include lists, and FSLogix Profile Exclude and Include lists. That completes our walk-through demo of configuring Profile Containers.</p>
<h1 id="Configuring-Cloud-Cache"><a href="#Configuring-Cloud-Cache" class="headerlink" title="Configuring Cloud Cache"></a>Configuring Cloud Cache</h1><p>Welcome to this module on configuring cloud cache. We will cover the following topics in this module: we’ll complete a walk-through demo of configuring Cloud Cache with FSLogix for profile containers. Here we are logged into our Windows 10 session host where we will be configuring the environment for the profile container, but this time we are going to use Cloud Cache for SMB. As we did in the previous demo where we configured a standard profile container, we open up the registry and navigate to the same location. HKey Local Machine, then software, FSLogix and profiles.</p>
<p>If we right-click in the center window, select new and then DWORD 32-bit value. Enter the word Enabled for the value, and set the value data to 1, as we did before. And as we did before, we right-click in the center window again, select new, and this time we want to choose a multi-string value. This time however we call it CCDLocations and need to enter a different string that looks like this: type&#x3D;smb,connectionString&#x3D;&#x2F;&#x2F; and your file path of your file store. This is using the SMB protocol and telling the system that the location for this Cloud cache provider is that specific location and folder. If you want to add multiple provider details, you simple separate them with a semicolon. You can configure Cloud Cache for Office Containers and for <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> Page Blob.</p>
<h1 id="Migrating-User-Profiles-to-FSLogix"><a href="#Migrating-User-Profiles-to-FSLogix" class="headerlink" title="Migrating User Profiles to FSLogix"></a>Migrating User Profiles to FSLogix</h1><p>Welcome to this module, on migrate user profiles to FSLogix. We will cover the following topics in this module. We’ll take a look at the requirements before migrating. Finally, we will discuss an overview of the steps you need to complete to migrate user profiles to FSLogix. Let’s start by discussing FSLogix migration requirements. Before you move any user profile data you need to ensure you have provisioned the correct cloud storage tier that fits your requirements. You have two options, either Azure Files, which fits the majority of used cases. The second option is Azure NetApp Files, which is utilized for enterprise level workloads.</p>
<p>Finally, you need to ensure you have prepared the relevant PowerShell script and downloaded the required <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/powershell-byte-session-1477/introduction/">PowerShell</a> modules before you are ready to migrate. The following PowerShell cmdlets are important. Convert UDP-Roaming Profile, which converts a roaming profile to an FSLogix profile container. Convert-UDPProfile, which converts a user profile disk to an FSLogix profile container. Convert-UPMProfile, which converts UPM profiles to an FSLogix container. Once the PowerShell script is ready, you can proceed with the migration.</p>
<p>Let’s now look at two high-level steps you need to complete when migrating user profiles to FSLogix. Step one, is to convert any .vhdx files into the .vhd format. This is done by using the PowerShell script we mentioned in the previous section in this module. Step two, is to migrate the converted .vhd files into the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/intro-to-azure-storage/course-introduction-1/">Azure Storage</a>, which can be either Azure Files or Azure NetApp files. You can then attach these to the user’s <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a> session.</p>
<h1 id="Implementing-and-Managing-FSLogix-Summary"><a href="#Implementing-and-Managing-FSLogix-Summary" class="headerlink" title="Implementing and Managing FSLogix - Summary"></a>Implementing and Managing FSLogix - Summary</h1><p>We have covered several important topics in this course. This course was very demo heavy as we needed to look closer at the steps you need to complete when deploying and configuring FSLogix. We started off by discussing <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/planning-for-fslogix/">planning for FSLogix</a> which included understanding what FSLogix is, looking at its capabilities, and finally discussing its requirements. In the next lecture we completed a walkthrough demonstration of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/installing-and-configuring-fslogix/">installing FSLogix onto Windows 10 session host</a>. Continuing with the demos in the third lecture completed a walkthrough of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/configuring-profile-containers/">configuring profile containers on a Windows 10 session host</a>. In the penultimate lecture in this module we completed a walkthrough demo of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/configuring-cloud-cache/">configuring Cloud Cache</a>. Finally, we finished off this module by discussing an overview of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/migrating-user-profiles-to-fslogix/">migrating user profiles to FSLogix</a>.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Managing-Security-on-Azure-Virtual-Desktop-17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Managing-Security-on-Azure-Virtual-Desktop-17/" class="post-title-link" itemprop="url">AZ-140-Managing-Security-on-Azure-Virtual-Desktop-17</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-13 18:59:14" itemprop="dateCreated datePublished" datetime="2022-11-13T18:59:14-04:00">2022-11-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-14 06:33:02" itemprop="dateModified" datetime="2022-11-14T06:33:02-04:00">2022-11-14</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Managing-Security-on-Azure-Virtual-Desktop-17/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Managing-Security-on-Azure-Virtual-Desktop-17/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello, and welcome to this course on Managing Security to Azure Virtual Desktop. My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist, and have been working with Microsoft cloud technologies for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications. My contact information is available on screen. Please feel free to reach out to me with any questions, comments, or concerns, and I’ll be happy to discuss these with you.</p>
<p>For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#115;&#117;&#x70;&#x70;&#111;&#x72;&#x74;&#64;&#x63;&#x6c;&#x6f;&#117;&#x64;&#x61;&#99;&#x61;&#x64;&#x65;&#109;&#121;&#46;&#99;&#x6f;&#x6d;">&#115;&#117;&#x70;&#x70;&#111;&#x72;&#x74;&#64;&#x63;&#x6c;&#x6f;&#117;&#x64;&#x61;&#99;&#x61;&#x64;&#x65;&#109;&#121;&#46;&#99;&#x6f;&#x6d;</a> and one of our cloud experts will follow up with you. This course is intended for people that are planning on taking the Azure Virtual Desktop Specialty exam, and anyone who is interested in learning how to deploy an Azure Virtual Desktop environment.</p>
<p>By the end of this course, you will have knowledge on <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/planning-and-implementing-conditional-access-policies-for-connections-to-azure-virtual-desktop/">planning and implementing Conditional Access policies</a> for connections to Azure Virtual Desktop. <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/planning-and-implementing-multi-factor-authentication-in-azure-virtual-desktop/">Planning and implementing multi-factor authentication in Azure Virtual Desktop</a>. <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/managing-security-by-using-microsoft-defender-for-cloud/">Managing security by using Microsoft Defender for Cloud</a>, formerly known as Azure Security Center. <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/configuring-microsoft-defender-antivirus-for-session-hosts/">Configuring Microsoft Defender Antivirus for session hosts</a>. To get the most from this course, you should have an administrator-level understanding of Azure Cloud services.</p>
<p>Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve, which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. When I created this course, all information was current. If you notice any updates or corrections, please reach out to us. Thank you.</p>
<h1 id="Planning-and-Implementing-Conditional-Access-Policies-for-Connections-to-Azure-Virtual-Desktop"><a href="#Planning-and-Implementing-Conditional-Access-Policies-for-Connections-to-Azure-Virtual-Desktop" class="headerlink" title="Planning and Implementing Conditional Access Policies for Connections to Azure Virtual Desktop"></a>Planning and Implementing Conditional Access Policies for Connections to Azure Virtual Desktop</h1><p>Welcome to this module on planning and implementing conditional access policies for connections to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a> based on requirements. In this module, we’ll cover the following topics. What are the requirements to implement conditional access policies with Azure Virtual Desktop? We will then walk-through a demo to create a conditional access policy with session settings.</p>
<p>Let’s start by discussing conditional access policy requirements for Azure Virtual Desktop. We need to ensure that the Microsoft 365 tenant has the relevant licensing which includes the conditional access feature. This is covered by the Azure AD P1 licenses and above. You then need to ensure you have a fully configured Azure Virtual Desktop environment, including a host pool and an application group. We will now complete a walk through demo of creating a conditional access policy with session settings.</p>
<p>As you can see, we are logged into the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a> portal with an account that has Global Admin access. We now navigate to the Security option, and from here Conditional Access. We then select New policy, then create a new policy. Let’s give the policy a name, in our example let’s use AVD MFA. Under the Assignments section you need to select the group you want this policy to apply to. In our example, we are going to use an existing group called AVD-Users.</p>
<p>Moving on we click on Cloud apps or actions, then select apps. On the right-hand side we see a list of applications to choose from. If we start to type in the word Windows, we can now see Azure Virtual Desktop as an option. Click on this and then hit the select button. In our example we are not going to create any conditions, but I quickly want to highlight the types of conditions you are able to set. You can control MFA access to AVD based on the Device platform, for example is it an iOS device? Or you can put a condition based on location, for example you may wish to exempt a local office network from being prompted for MFA.</p>
<p>The other options you see are client apps, device state, or filter for devices. For our demo, we are going to leave all these options not configured and move onto access control. We need to select Grant. Because we want to enforce MFA, we select require <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-microsoft-365-access-and-authentication/manage-user-settings-azure-multi-factor-authentication-cloud/">multi-factor authentication</a>. There are other options as we see here, where a device needs to be marked as compliant, or require that the device be Hybrid joined for example. </p>
<p>Before we are ready to create the policy, we need to configure session control. If we click on this and now we see several options on the right-hand pane. For your example, we want to tick sign-in frequency which allows us to control the amount of time before a user needs to authenticate their MFA. If we look at Units first, we can select hours or days, and then we can enter the numerical value above that. In our example, we are going to configure seven days, but you should configure according to your organization’s policies. Then, we can click on create and ensure the on option is selected. That concludes the demo.</p>
<h1 id="Planning-and-Implementing-Multi-Factor-Authentication-in-Azure-Virtual-Desktop"><a href="#Planning-and-Implementing-Multi-Factor-Authentication-in-Azure-Virtual-Desktop" class="headerlink" title="Planning and Implementing Multi-Factor Authentication in Azure Virtual Desktop"></a>Planning and Implementing Multi-Factor Authentication in Azure Virtual Desktop</h1><p>Welcome to this module on planning and implementing multi-factor authentication in <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a>. In this module, we’ll cover the following topics. We’ll look at what is required to integrate Azure Virtual Desktop with <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-microsoft-365-access-and-authentication/manage-user-settings-azure-multi-factor-authentication-cloud/">Multi-Factor Authentication</a>, better known as MFA. We will complete this lecture by doing a walk-through demo of how to implement MFA settings.</p>
<p>Let’s initially take a look at some of the requirements to implement multi-factor authentication with AVD. Like most Microsoft 365, services you need to ensure you have the relevant license in place. Now although MFA can be configured with the basic <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a> subscription, this is only with security baselines in place. In order to integrate it with Azure Virtual Desktop, you require a minimum of Azure AD P1. You also need to ensure you have an existing Azure Virtual Desktop environment, including a host pool and application group.</p>
<p>Finally, you need to ensure you have a conditional access policy in place to enable MFA for Azure Virtual Desktop. As we saw in the demo for the last lecture, MFA is configured via a Conditional access policy. We have already seen a demo on how to configure a conditional access policy to enable MFA in the last lecture. In this demo, we are going to look at MFA settings in Azure. Here we are in the Azure AD portal, and we initially want to navigate to security and then MFA.</p>
<p>Here we have a number of options we can configure, including Account lockout, Fraud alerts, and look at activity reports. If we take a closer look at account lockout settings, we can customize three different settings. The number of MFA denials that will trigger an account lockout. The number of minutes until an account lockout counter is reset. And finally, the number of minutes until an account is automatically unlocked. With the fraud alert settings, it is turned off by default, therefore you have the ability to enable this. This will automatically turn on the setting to automatically block users who report fraud.</p>
<p>Finally, you can set a specific code which signifies a fraud report. The default setting is zero. The final setting I mentioned was activity reports, which allow you to review which users have been completing MFA authentication, the time, the app that was being used, as well as the authentication method, among other details. These three settings as well as many others can be implemented to give your organization a much better experience and add additional layers of security for your AVD environment.</p>
<h1 id="Managing-Security-by-Using-Microsoft-Defender-for-Cloud"><a href="#Managing-Security-by-Using-Microsoft-Defender-for-Cloud" class="headerlink" title="Managing Security by Using Microsoft Defender for Cloud"></a>Managing Security by Using Microsoft Defender for Cloud</h1><p>Welcome to this module on managing security by using Microsoft Defender for Cloud, formerly known as <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/introduction-azure-security-center/preventing-responding-security-threats-azure-security-center/">Azure Security Center</a>. We will cover the following topics in this module. We will discuss the requirements needed to integrate Microsoft Defender for Cloud with <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a>. We will then look at the features that are available. Finally, we will look at some general security best practices for Azure Virtual Desktop. </p>
<p>Let’s start off by taking a look at some of the requirements that need to be fulfilled in order to integrate Azure Virtual Desktop with Microsoft Defender for Cloud. There are two levels of Microsoft Defender for Cloud, basic and standard. Before you can integrate this service with AVD, you need to ensure you have enabled the standard tier in Microsoft Defender for Cloud. Finally, you need to ensure you have provisioned your Azure Virtual Desktop environment and have active session hosts within this environment.</p>
<p>Let’s now move on to discussing some of the features that are available once you meet these requirements. The first feature I would like to highlight is the security configuration assessment, which will assess your existing security implementation within Azure Virtual Desktop. Next, we have a security score, which again assesses the AVD environment, but this time outputs a score, detailing vulnerabilities and how you can remediate those.</p>
<p>We move on to file integrity monitoring, better known as FIM. This feature examines operating system files, Windows registry, apps, and more for changes in behavior that might indicate an attack. I also want to mention Just-in-time VM access as an important feature. This feature allows you to control access to the sessions hosts and limit not only the level of access, but the amount of time a user can access a VM.</p>
<p>The final feature I will touch on is adaptive application control. This is an intelligent and automated solution for defining allow lists of known, safe applications for your session hosts. In the final part of this lecture, I will discuss general security best practices for Azure Virtual Desktop. An important aspect of AVD is the session host <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">virtual machines</a>, so ensuring you have some type of endpoint protection enabled on these is very important.</p>
<p>With any type of cloud-hosted environment, security posture is key, and AVD is no different, which is why it is another best practice to continuously monitor and improve your secure score. Access and authentication are an important aspect of all cloud-hosted services, and as such, forcing users to utilize multi-factor authentication when accessing Azure Virtual Desktop should be standard. The final best practice recommendation I want to point out is to set up screen locks for idle sessions. This protects access to the environment if users walk away from their screens and leave the session unattended.</p>
<h1 id="Configuring-Microsoft-Defender-Antivirus-for-Session-Hosts"><a href="#Configuring-Microsoft-Defender-Antivirus-for-Session-Hosts" class="headerlink" title="Configuring Microsoft Defender Antivirus for Session Hosts"></a>Configuring Microsoft Defender Antivirus for Session Hosts</h1><p>Welcome to this module on Configuring Microsoft Defender Antivirus for Session Hosts. We will cover the following topics in this module. What is Microsoft Defender Antivirus? What are the requirements to run Microsoft Defender Antivirus in a VDI environment? We’ll take a closer look at the security intelligence updates for Windows 10 OS.</p>
<p>Let’s start off by explaining what Microsoft Defender Antivirus is. This is next-generation protection services that are hosted by <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/setting-up-and-managing-a-microsoft-365-tenant/setup-microsoft-365-tenant-and-subscription/">Microsoft 365</a> and part of its wider security suite. It combines machine learning, big-data analysis and in-depth resistance research to offer a robust protection layer for Windows 11, 10 and Server OS. There are two modes.</p>
<p>First, we have Active mode which is utilized as the primary antivirus application on the device, so it remediates threats. And then, we have passive mode, where Microsoft Defender Antivirus is not utilized as the primary antivirus, so it does not remediate threats. As with most Microsoft Cloud services, there are a number of requirements that need to be met before it can be implemented with <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a>. From a licensing perspective, it is included as part of the Microsoft 365 E5, E3, E5 security, and A5 security subscriptions. It is supported on both server OS from 2008 R2 SP1 or higher and from Windows 7 SP1 and higher, including Windows 10 and 11.</p>
<p>Finally, before you can turn this service on, you need to ensure you are using an <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> account with the relevant role assigned to it, which includes Global Administrator, Security Administrator, and Compliance Administrator to name a few. In this final section of this module, we are going to discuss security intelligence for Windows 10 operating system. Microsoft continually updates security intelligence in antimalware products to cover the latest threats, and constantly tweak detection logic. This security intelligence works directly with cloud-based protection to deliver fast and powerful AI-enhanced, next-generation protection. Network Inspection System updates are designed to protect you from network threats, including exploits as they are transmitted.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We have covered several important topics in this course. We started off by looking at planning and implementing conditional access policies for connection to Azure Virtual Desktop. In this section, we discussed the requirements needed to implement conditional access, and followed this up with a demo of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/planning-and-implementing-conditional-access-policies-for-connections-to-azure-virtual-desktop/">configuring a policy for Azure Virtual Desktop</a>.</p>
<p>Next, we moved on to discussing <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/planning-and-implementing-multi-factor-authentication-in-azure-virtual-desktop/">planning and implementing multi-factor authentication in Azure Virtual Desktop</a> where we highlighted the requirements to enable MFA, and again followed up with another demo, but this time we looked at some of the settings you can implement to harden your MFA settings for Azure Virtual Desktop.</p>
<p>In the third section of this module, we had a look at managing security by using Microsoft Defender for Cloud, formerly known as Azure Security Center. Here we focused on understanding the requirements needed before you can implement this service. We then discussed some of the key features of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/managing-security-by-using-microsoft-defender-for-cloud/">Microsoft Defender for Cloud</a>, and then finished off by highlighting <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/configuring-microsoft-defender-antivirus-for-session-hosts/">some security best practices for Azure Virtual Desktop</a>.</p>
<p>Finally, we talked about configuring Microsoft Defender Antivirus for session hosts. We initially explained what this service is, followed by the requirements you need before you can integrate this with Azure Virtual Desktop, and we finished off by discussing security intelligence updates.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Knowledge-Check-Managing-Security-on-Azure-Virtual-Desktop-18/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Knowledge-Check-Managing-Security-on-Azure-Virtual-Desktop-18/" class="post-title-link" itemprop="url">AZ-140-Knowledge-Check-Managing-Security-on-Azure-Virtual-Desktop-18</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-13 18:45:09 / Modified: 20:00:46" itemprop="dateCreated datePublished" datetime="2022-11-13T18:45:09-04:00">2022-11-13</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Knowledge-Check-Managing-Security-on-Azure-Virtual-Desktop-18/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Knowledge-Check-Managing-Security-on-Azure-Virtual-Desktop-18/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/13/AZ-140-Lab-Managing-Permissions-and-Users-in-Azure-Virtual-Desktop-16/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/13/AZ-140-Lab-Managing-Permissions-and-Users-in-Azure-Virtual-Desktop-16/" class="post-title-link" itemprop="url">AZ-140-Lab-Managing-Permissions-and-Users-in-Azure-Virtual-Desktop-16</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-13 18:41:02 / Modified: 18:41:04" itemprop="dateCreated datePublished" datetime="2022-11-13T18:41:02-04:00">2022-11-13</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/13/AZ-140-Lab-Managing-Permissions-and-Users-in-Azure-Virtual-Desktop-16/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/13/AZ-140-Lab-Managing-Permissions-and-Users-in-Azure-Virtual-Desktop-16/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/112/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/112/">112</a><span class="page-number current">113</span><a class="page-number" href="/page/114/">114</a><span class="space">&hellip;</span><a class="page-number" href="/page/244/">244</a><a class="extend next" rel="next" href="/page/114/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2432</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
