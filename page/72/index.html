<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hang&#39;s Blog">
<meta property="og:url" content="https://example.com/page/72/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/page/72/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Hang's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Azure-Key-Vault-and-Disk-Encryption-14/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Azure-Key-Vault-and-Disk-Encryption-14/" class="post-title-link" itemprop="url">AZ-104-Azure-Key-Vault-and-Disk-Encryption-14</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:22:02" itemprop="dateCreated datePublished" datetime="2022-11-18T20:22:02-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:47:46" itemprop="dateModified" datetime="2022-11-22T11:47:46-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Azure-Key-Vault-and-Disk-Encryption-14/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Azure-Key-Vault-and-Disk-Encryption-14/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Advanced-VM-Management-in-Azure-13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Advanced-VM-Management-in-Azure-13/" class="post-title-link" itemprop="url">AZ-104-Advanced-VM-Management-in-Azure-13</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:22:00" itemprop="dateCreated datePublished" datetime="2022-11-18T20:22:00-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:40:46" itemprop="dateModified" datetime="2022-11-22T11:40:46-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Advanced-VM-Management-in-Azure-13/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Advanced-VM-Management-in-Azure-13/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hi there, welcome to Advanced VM Management in Microsoft Azure. My name is Thomas Mitchell and I’ll be taking you through this course. I’m an Azure instructor at Cloud Academy, and I have over 25 years of IT experience, several of those with cloud technologies. If you have any questions, feel free to connect with me on LinkedIn, or send an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>This course is intended for those who are interested in learning about VM scale sets, VM configuration management, and VM monitoring. To get the most from this course you should have a basic understanding of Microsoft Azure and of the Azure Portal.</p>
<p>We’re going to start things off by looking at virtual machine scale sets. You’ll learn about vertical scaling and horizontal scaling. I’ll even show you, via a hands-on demonstration, how to deploy a VM scale set with autoscaling enabled.</p>
<p>Next, we’ll take a look at configuration management. I’ll introduce you to the many tools that can be used to manage VM configurations. You’ll even learn how to deploy software using VM extensions.</p>
<p>We’ll wrap things up by covering VM monitoring.</p>
<p>By the time you finish this course, you should have an understanding of how to scale VMs, manage VM configurations, and monitor VMs.</p>
<p>We’d love to get your feedback on this course, so please give it a rating when you’re finished. If you’re ready to learn about Azure VM management, let’s get started.</p>
<h1 id="Virtual-Machines-Scale-Sets"><a href="#Virtual-Machines-Scale-Sets" class="headerlink" title="Virtual Machines Scale Sets"></a>Virtual Machines Scale Sets</h1><p>Hello and welcome to “Virtual Machine Scale Sets.” In this lecture, I’m going to introduce you to the concept of virtual machine scale sets and why you should use them. We will also take look at the differences between virtual machines and virtual machine scale sets, and how to monitor scale sets.</p>
<p>An <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/vertical-scaling-vs-horizontal-scaling/">Azure virtual machine scale set</a> is essentially a group of identical, load-balanced VMs. You can configure an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">Azure VM</a> scale set to automatically increase the number of VM instances or decrease the number of VM instances based on demand or on a predefined schedule. Organizations use scale sets to ensure high availability for their applications and so they can centrally manage, configure, and update all VMs within the scale set. VM scale sets are often used to build large-scale compute solutions, to service big data solutions, and to host large container workloads.</p>
<p>Because applications that run on a virtual machine scale set are distributed across several instances within the scale set, such applications benefit from redundancy and increased performance. An application that’s hosted on a virtual machine scale set is usually accessed through a load balancer. The load balancer serves as a single point of access and then distributes application requests to any one of the numerous instances within the scale set itself.</p>
<p>A VM scale set allows you to perform maintenance and even updates on an application instance, without the need for any downtime. This is because requests are automatically distributed to other available instances within the scale set while you are performing your maintenance.</p>
<p>Virtual machine scale sets allow you to easily create and manage multiple VMs that have the same configuration, because, in a scale set, all underlying VM instances are created from the same base OS image and configuration. That being the case, it becomes fairly easy to manage dozens or even hundreds of virtual machines without needing to worry about performing configuration tasks or even about network management.</p>
<p>VM scale sets can be used with Azure load balancers for basic layer four traffic distribution, or if you need more advanced layer seven distribution or SSL termination, you can use a scale set with Azure Application Gateway. Because scale sets sit behind load balancers, they provide high-availability and application resiliency. You can even use availability zones with scale sets to ensure that your VM instances within the scale sets are spread out within a single <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> data center or even across multiple Azure data centers.</p>
<p>The key benefit of a VM scale set is its ability to automatically scale as resource demand dictates. As demand for an application increases, a VM scale set can automatically increase the number of VM instances to support the application load. The VM scale set can also automatically reduce the number of VM instances as demand for the application decreases. This is known as autoscaling. This autoscaling feature helps control costs because it minimizes the number of VM instances that are running.</p>
<p>VM scale sets can support as many as 1000 virtual machine instances if you use Azure-supplied VM images. If you choose to use your own custom VM images, the limit is 600 VM instances. The table on your screen highlights the key differences between virtual machines and scale sets.</p>
<p>As you can see, if you host an application on a manual group of virtual machines instead of a VM scale set, the process for adding additional instances to support the application becomes a manual process. While a VM scale set can automatically create new instances from a central config, using a manual group of VMs requires you to create, configure, and then ensure compliance of all of the additional VM instances that you manually spin up.</p>
<p>Load-balancing a group of VMs is also a manual process, whereas a VM scale set handles the load-balancing for you automatically.</p>
<p>VM scale sets, as you can see here in the third row of the table, automate the distribution of VM instances across availability sets or availability zones. Doing things the hard way with a manual group of VMs requires you to manually perform these tasks.</p>
<p>Lastly, do you really want to manually monitor your VMs if you need to scale? Because that’s what you need to do if you decide to host an application on a manual group of VMs, rather than on a scale set. VM scale sets, as you can see in this last row, allow you to autoscale based on host metrics, in-guest metrics, application insights, or on a schedule.</p>
<p>Deploying a scale set incurs no additional costs outside of the underlying VM instance costs, load balancer costs, and any managed disk storage costs. There are also no costs associated with the cloud management and autoscaling features, outside of the charges for the VMs that are spun up.</p>
<p>To monitor a VM scale set, you should use <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/azure-monitor-for-vms/">Azure Monitor</a> for VMs. Azure Monitor for VMs automates the collection of CPU, memory, disk, and network performance counters from all the VMs within a scale set. You can also monitor an application running on a VM scale set using application insights. Application Insights collects information about applications that you can use to keep tabs on application performance.</p>
<h1 id="Vertical-Scaling-vs-Horizontal-Scaling"><a href="#Vertical-Scaling-vs-Horizontal-Scaling" class="headerlink" title="Vertical Scaling vs. Horizontal Scaling"></a>Vertical Scaling vs. Horizontal Scaling</h1><p>Hello and welcome to Vertical Scaling vs. Horizontal Scaling. In the next lesson, I’m going to perform a demonstration that shows you how to deploy a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/vertical-scaling-vs-horizontal-scaling/">VM scale set</a> that implements <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-implementing-a-vm-scale-set-with-autoscaling/">autoscale</a>. However, before we do that, it makes sense to quickly explain to you the different ways that you can scale.</p>
<p>There are two different ways of scaling. You can scale up and down, or you can scale in and out. Scaling up and down, which is also referred to as vertical scaling, is the process of upgrading an existing <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a> to a more powerful virtual machine, or downgrading to a smaller, less powerful virtual machine. In <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a>, this means resizing the existing VM to a larger size with more RAM and more CPU, or to a smaller size with less RAM and less CPU. Because vertical scaling involves the re-size of virtual machines, this kind of scaling results in VM restarts.</p>
<p>Scaling out is a way to handle an increased load on an application or website. Scaling out is commonly referred to as horizontal scaling. When you scale out, you keep the same VM size, but you add more VM instances to the scale set. Instead of growing the size of the VMs in the scale set, you increase the number of VMs in the scale set. When you scale back in, you reduce the number of VMs in the scale set.</p>
<p>You might want to use vertical scaling to scale down an application’s server over the weekend, when the application is in use. By scaling down over the weekend, you can save on compute costs.</p>
<p>A common use for scaling in and out, or horizontal scaling, is when you have a public-facing website or web application. When supporting this type of application, it usually makes sense to add instances to support increased workloads, while removing instances when that load drops. This allows you to keep up with demand without causing an outage.</p>
<p>Microsoft recommends horizontal scaling whenever possible.</p>
<h1 id="DEMO-Implementing-a-VM-Scale-Set-with-Autoscaling"><a href="#DEMO-Implementing-a-VM-Scale-Set-with-Autoscaling" class="headerlink" title="DEMO: Implementing a VM Scale Set with Autoscaling"></a>DEMO: Implementing a VM Scale Set with Autoscaling</h1><p>Hello, and welcome back. In this lesson here, we’re going to walk through a demonstration where I’ll show you how to deploy a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/virtual-machines-scale-sets/">virtual machine scale set</a> that utilizes autoscaling.</p>
<p>On the screen here, you can see I’m logged in to my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> Portal, and I’m in a resource group called VMStuff that I created ahead of this lab. To create our VM scale set, that will be load balanced by the way, what we’re going to do here is click Add to kick things off here. And from the Marketplace, we are going to search for scale set. And we can see we have Virtual machine scale set here. And we’ll go ahead and create the scale set.</p>
<p>The creation process for a VM scale set, if you look here, looks rather similar to a VM creation process, and that’s largely because what we’re doing is creating a VM configuration that’s going to be used to spin out VMs within that scale set. So it stands to reason that it would look quite similar to a VM deployment.</p>
<p>On this Basics page here, what we need to do is provide some basic information for our scale set. We’re going to deploy into our lab subscription and then into my VMStuff resource group. What I’ll do here is give my scale set a name, and we’ll deploy into East US. We’re not gonna do any Availability zone here. And the image we’re going to use is going to be a Windows Server 2016 data center image. We’ll leave Spot instance at its default of No since we’re not using spot instances, and we’ll leave the default Size here of one processor and 3 1&#x2F;2 gig of RAM. Let me specify my admin information here. And we’ll leave the option for the Hybrid Benefit turned off. And we’ll stick with the default Disk options here. You can see that the default is Premium SSD for the OS, and the Encryption type is Encryption at rest with a platform-managed key.</p>
<p>We’ll go into Networking next here. Now in this Networking page, I need to define the virtual network that’s going to host the VMs in the scale set. I can either select the dropdown here and use an existing virtual network, or if I don’t have any created already, which you can see here I don’t, it’s going to create a virtual network for me. So I’ll allow it to create the virtual network for me and then under Network interface, this Network interface is the NIC that <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a> or virtual machines that get spun up will use to connect to our virtual network. </p>
<p>Now, remember, the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/configuration-management-tools-for-virtual-machines/">virtual machine configuration</a> we’re using here is essentially, I guess I could call it a gold image. This is going to be the configuration that new VMs are spun up with when we autoscale up. Whatever I configure here, this is how those machines will be configured when they’re spun up when they grow through the autoscale process.</p>
<p>Now, what I’m going to do for this demonstration here is edit my new NIC, which it’s calling VMStuff-vnet-nic01. And I’m going to give this a public IP, which is not something that’s necessary because we’re going to load balance our scale set, so that’s how you would normally access the VMs through an application in production through the load balancer. But to demonstrate the process of autoscale, I want to be able to get into my individual VM to put a load on it so I can show you how that autoscale works.</p>
<p>What I’ll do here is I’ll edit my Network interface, and I will allow 3389 in on the public IP. And we’ll OK it. So with this configuration, when our scale set is deployed, it’s going to be deployed using VMs that do have a public IP attached, so I can get to them outside of the scale set.</p>
<p>Now, what we’re going to do for this exercise is use a load balancer, so I’ll turn load balancer on. And then when I do that, I have two options. I can configure an application gateway if I’m going to be using a web, if I’m gonna use this for IIS, for example, I would more than likely use an application gateway to load balance it. If I’m going to be load balancing other traffic, then I’d wanna use an Azure load balancer, which is what we’re going to use here. In my dropdown here, I have the option for gateway or load balancer, so I’ll leave it at Azure load balancer. And I’ll accept the default load balancer name and the default backend pool. If I had an existing load balancer, I could select it from the dropdown, but you can see here we don’t have any existing load balancers configured. So I’ll leave that alone. And the backend pool is what’s going to include the backend VMs that are part of the scale set.</p>
<p>Now, at this point, we can click on Next for Scaling, and this is where we can configure the autoscale options for our VM scale set. If we hover over the instance count here, we can see that this is the number of virtual machines that are initially deployed as part of the scale set. And we’ll leave this at the default of two.</p>
<p>If we hover over here again, we can see that we can set this from anywhere from zero to 1,000. I don’t want to go broke, so we’re certainly not going to set it to 1,000. Two is sufficient for this demonstration. And then in the Scaling policy, we can either configure it for manual scaling or custom. The manual scale option, as you can see here in the pop-up maintains a fixed instance count. Using custom autoscale allows the scale set to scale up and down based on a schedule or on metrics. So we’ll go ahead and select Custom here because manual’s no fun. Now, when we select Custom here, we need to specify the minimum value for our autoscale for the specific scale set and, of course, the maximum value as well. The defaults here are one and 10, and we’ll leave them at their defaults. You can look at this scaling policy, and these values as really the lower and upper ranges of where the scale set will operate. These options here for Scale out and Scale in allow us to tell Azure how to control the autoscale for this VM scale set.</p>
<p>Now, what I’m going to do here, the default CPU threshold here is the CPU usage percentage threshold for triggering the Scale out autoscale rule. If we hover over the icon here for the threshold in Scale in, it’s the same thing but for the Scale in rules. So this percentage here tells Azure when to scale the scale set out, or add the VMs, and this threshold down here tells Azure when to remove VMs from the scale set.</p>
<p>Now, this duration here, you’re telling Azure to look at that duration of time. If, for example, in this screen here where we’re looking at a 75% CPU threshold for 10 minutes, Azure is going to look at the performance of the existing scale set. And if the scale set has a 75% utilization on the CPU for at least 10 minutes, it will add this number of VMs to the scale set. Now, what I’m going to do here for this demonstration is change this to 50% and five minutes. Now, notice, if I change this to three, it won’t let me. It has to be between five and 60 minutes.</p>
<p>Now, what I’m telling Azure here to do is if my scale set hovers at 50% for at least five minutes, add another VM to the scale set. And we’ll keep doing that. After it adds the first VM, it will again keep tracking, and if my CPU threshold is still at least 50% for another five-minute stretch, it will add another VM. And it will keep doing that up until the Maximum of VMs value here, which is 10. Now, for Scale in, I’ll leave this at its default because this will work for our demonstration here. I’m telling Azure that once my CPU utilization for the scale set falls to 25%, again, for five minutes, this duration is the same, what we’ll do is decrease the number of VMs by one.</p>
<p>We’ll leave the Diagnostic logs disabled for now. We’re not worried about diagnostic logs at this point. In this dropdown here, I have a couple different options for my Scale in policy. If I select the dropdown, I can see I have three options. I have the default option, which will balance my scale set across my availability zones and fault domains and then delete the VM with the highest instance ID, or I can tell it to balance across the availability zones and then delete the newest created VM. The last option here is the same thing but to delete the oldest VM. I’ll just leave it at its default setting here, and then we’ll click Management.</p>
<p>The Upgrade policy here, if we hover over the icon next to Upgrade mode, this is the setting that controls how my VM instances in the scale set are brought up to date with the latest scale set model. And what that means is if I make changes to my scale set, VMs that were deployed within that scale set before those changes need to be upgraded to include those new settings so they know how to behave.</p>
<p>In this dropdown, I have three options. I can make it automatic. I can manually perform the upgrades, or I can tell Azure to do upgrades in a rolling matter in batches. If we select Automatic, instances will automatically upgrade in random order. If I do it manually, those instances will remain out of date until I manually upgrade them. For this exercise, I’m going to choose the Manual option. And then the rest of the options here, this Monitoring should look familiar to you if you’ve deployed a VM because it’s doing exactly what you would expect it to with a VM.</p>
<p>We also have the Identity option here for System assigned managed identity, which we’ll leave off. We don’t have any use for that here. And then if we hover over the icon next to automatic OS upgrades, we can see that we can enable automatic OS image upgrades for the VMs in my scale set. And what this does is allow us to automatically upgrade the OS disk for all instances within the scale set. We’ll leave this off for this demonstration, and then the instance termination notification here is just the option to receive notifications through the Azure Metadata Service, letting me know that instances were terminated. I’m not worried about getting notifications here, so we’ll click Next for Health, and then we have the option to configure Health monitoring on our instances.</p>
<p>Now, if I was going to be doing automatic OS updates or automatic VM instance upgrades, which I did not choose early on, I need to turn this on. Since I’m doing everything manually, I’ll leave this off. And then we’ll go ahead and click Next for advanced, and then the allocation policy here, we can see that we can set a cap on our allocation of our instances.</p>
<p>Basically what we can do is tell Azure, do we want to allow scaling beyond 100 instances? We’re never going to get to that point so we’ll leave this at No. And then the Spreading algorithm here determines how the VMs within that scale set are going to be balanced across our fault domains.</p>
<p>Max spreading spreads the VMs across as many fault domains as possible within each zone. With Fixed spreadings as you can see here, the VMs are always spread across exactly five fault domains. We’ll leave this at the default here. We’re not interested in any kind of high availability here because we’re going to have maybe three VMs running at the same time.</p>
<p>We’re using a Windows machine, so we don’t have any need for Cloud init so it’s not supported since it’s a Linux feature. And we don’t need any changes to our Proximity placement group or to the generation of our VM. We’ll go ahead and click Next for Tags. We’re not going to tag anything here, so we’ll just go to Next, and we’ll review our settings.</p>
<p>Let it do a validation. And at this point, we can review our settings here, and we’ll go ahead and click Create. And what this is going to do is spin out the load balancer. It’s going to spin up the virtual network. It’s going to spin up the VMs within the scale set. It’s going to configure the frontend and backend for the load balancer to allow everything to work through that load balancer. We will get a public IP that we could use.</p>
<p>For example, let’s say we were going to put IIS on our VMs. What we would do is create the same IIS application or website on the image that we created the VM from, and that’s where you would get into custom images, which we’re not doing here. But let’s assume we were going to put IIS on that. You would then have that application on all of your VMs, and then users would access that application through the load balancer. I’m not too interested in testing the application for this demonstration. I just wanted to show you how to deploy a basic VM scale set with autoscale.</p>
<p>We’ll let this deployment run. This will take a little bit because, again, it’s creating quite a bit of stuff. If we go back home and we go into VMStuff here, we can see we’re starting to create resources. We got the virtual network, the vmstuffdiag storage account that was created when our boot diagnostics was enabled. We got the public IP. We got our load balancer and the public IP for our load balancer along with the basic network security group. I’m going to pause the video right now. We’ll let this run, and then when it’s up and everything’s been deployed, we’ll bounce back in and I’ll show you how this autoscale works.</p>
<p>Welcome back. So the deployment of our scale set has completed. On the screen here, you can see all of the resources that were deployed as part of that VM scale set. If we click on my scale set here, we can take a look at the Overview page of the scale set, along with all of the different settings. If I click on instances, I can see the instances that are currently running. I have the MyScaleSet_3 instance, which is running and is the latest model, and we have MyScaleSet_0, which is also running, but it’s currently updating.</p>
<p>At some point, this updating VM will actually show a running state, and there we go. So we have our scale set with two instances that are running. If we click on Overview for our scale set, we can see that our CPU is averaging about 40%. So this isn’t going to kick off any new instances because our threshold is 50%.</p>
<p>Now, what I’ve done before coming back to you is I’ve logged in to the instance three, I think it is. Yeah, MyScaleSet_3, I’m actually logged into that via RDP. And that’s over on my other screen. Let me bring it up here. And now what I’m going to do, since these are really low end VMs, it doesn’t take much to tip them over to really drive up CPU utilization. What I’m going to try and do here is maybe do a Windows Defender virus scan or something on this VM on my other laptop screen here. And we’ll see if we can get this to kick off another instance.</p>
<p>Let me go in and just offscreen here I’m searching for Defender here. So I’ll bring up Windows Defender, and I’m going to kick off a full scan. And let me take a look at Task Manager on this VM over here. All right, what I’m going to do is drag my VM over just for a quick second, and you can see I have an 84% CPU utilization now going on this VM.</p>
<p>So what I’m going to do is drag this back over onto my other screen, and we’ll wait for the threshold to pass. Now, remember, if we click on Scaling here, for our scale set, we can see that were looking for an average CPU over 50%, and that average needs to be at least five minutes.</p>
<p>So let’s bounce back over into Instances here, and we’ll do a refresh. And we can see now that we have a new instance spinning up because the utilization of our scale set over the last five minutes is averaging over 50%, and that’s because of the massive CPU growth and utilization that I’ve kicked off by performing a scan, so it’s skewing that average because we only have five minutes of time. But when it’s done it has looked at my instance here, and we can see where we’re over 50%. This drop here is the drop that was incurred when we spun up this new instance. And we can see it’s updating, but it’s still running.</p>
<p>Now, what I’m going to do is switch back over to my VM, and I’ve canceled the scan that was occurring. Now, what that’s going to do is drop the CPU utilization way down because there’s really nothing going on on the VM. We’ll give this a few minutes and what should happen is we should start to see a reduction in the number of instances within our scale set. We’ll go ahead and refresh here.</p>
<p>Now, you’ll notice on that refresh, the status for MyScaleSet_4 has changed from Running, Updating, to Deleting. So what the scale set has detected is that drop in CPU utilization, and what it’s doing is removing the newly added instance that it added to the scale set when I began that scan.</p>
<p>Let’s try and refresh again here. And now MyScaleSet_4 is going away. And it’s also taking down MyScaleSet_3. And what it’s gonna do is take MyScaleSet down to the minimum of one instance because it’s sensing that’s all it needs to support the current load, which is none, on the scale set itself. And we’ll refresh here. And if I drag over my RDP session, we can see that I’ve lost connectivity to MyScaleSet_3. That’s because the VM has gone away. And we’ll refresh one more time here. And now we can see neither 3 or 4 is running.</p>
<p>They’re currently just going through the deletion process. And while this is deleting, I’ll just reiterate here, if we click on Networking here under Settings, if we select Load balancing, we can see the load balancer that we created as part of the deployment. We can see it has a Frontend IP address. We don’t have a Frontend DNS Address for it. What you would typically do in a production environment is assign a public or maybe even a private DNS entry for it, and it would point to this frontend IP address for the load balancer. And then your users would access that application through the DNS name, which points to the load balancer IP, which load balances the underlying VM instances in the scale set.</p>
<p>So I’ll bounce back into Instances here, and we’ll refresh one more time. And we can see now, we only have the one instance left in our scale set. With that, you now know how to deploy a VM scale set that’s load balanced and that leverages autoscale.</p>
<h1 id="Configuration-Management-Tools-for-Virtual-Machines"><a href="#Configuration-Management-Tools-for-Virtual-Machines" class="headerlink" title="Configuration Management Tools for Virtual Machines"></a>Configuration Management Tools for Virtual Machines</h1><p>Hello and welcome to Configuration Management Tools For Virtual Machines. In this lesson, we’re going to take a look at some of the key tools that are often used for VM configuration management. We will take a look at tools like Ansible, Chef, and Puppet. We will also look at Cloud-INIT for Linux virtual machines and at <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> custom script extensions for both Linux and Windows VMs. We’ll round things out with virtual machine extensions and PowerShell Desired State Configuration.</p>
<p>Let’s start with Ansible. Ansible is used for VM creation, application deployment, and for configuration management. It’s an automation engine that uses an agentless model to manage target machines. To configure VMs with Ansible, you define specific configuration tasks in what are known as playbooks. Ansible modules are then used to perform specific configuration tasks.</p>
<p>Chef is another tool that can be used to manage VM configuration. You can use Chef to configure, deploy, and manage your infrastructure. Using Chef to manage the configuration of virtual machines requires you to install the Chef client on them. The Chef client communicates with one or more centralized Chef servers that hold and manage the configurations for your virtual machines.</p>
<p>Like Chef, Puppet is another enterprise-ready, automation platform. It’s used to automate the deployment process as well as application delivery. To use Puppet, you install agents on your target VMs. This allows Puppet Master to define your desired configuration. You can even integrate Puppet with solutions like Jenkins and GitHub. This is typically done to improve the DevOps workflow for the organization.</p>
<p>When it comes to automating the configuration of a Linux VM, you can use Cloud-INIT. Cloud-INIT is a popular way of customizing a Linux VM during its initial boot. Cloud-INIT can install packages and even write files. It can also be used to configure users and security. Since it runs during the initial boot process, Cloud-INIT doesn’t require any agents nor does it require any additional steps.</p>
<p>When you use Cloud-INIT to customize a Linux VM, you don’t use apt-get install, nor do you use YUM to install packages. What you do is define a list of packages that you want to install. Cloud-INIT will then use the package management tool for your specific distro to install your defined packages.</p>
<p>The Azure custom script extension can be used to download and execute scripts on both Linux VMs and Windows VMs. While the custom script extension is often used during the creation of a VM, it can also be used even after the VM has been created.</p>
<p>Scripts that are used with the Azure custom script extension can be downloaded from Azure storage or from other public locations. GitHub repositories are a common source for script downloads.</p>
<p>A common example of the Azure custom script extension in action, that you’ll often find online, is where it is used to automatically install IIS on a Windows VM. We will actually work through a demonstration of this later on.</p>
<p>Azure VM extensions are used to perform post-deployment configuration and automation tasks on <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">Azure VMs</a>. These extensions are essentially small applications that can be used to perform things like VM configuration, to install applications, and even to deploy monitoring and security solutions to virtual machines.</p>
<p>Virtual machine extensions are often used to deploy things like antivirus agents, monitoring agents, and even agents that are used by Chef and Puppet. You can use a virtual machine extension during the initial deployment of a new VM, or you can run extensions against a VM after it’s been deployed.</p>
<p>Later on, we’ll walk through a demonstration where we’ll <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-deploying-software-with-vm-extensions/">deploy software to a VM</a> using virtual machine extensions.</p>
<p>PowerShell Desired State Configuration, or DSC, is a management platform that you can use to specify the configuration of target machines. You can use it to configure Windows machines natively, or you can use it on Linux through the open management infrastructure server offering from the open group.</p>
<p>PowerShell DSC is typically used to ensure a VM remains configured as required. You use a DSC configuration to specify what software should be installed on a VM. You can also use a DSC configuration to define how a VM should be configured.</p>
<p>To use PowerShell DSC, you must deploy a Local Configuration Manager engine on each target VM. This local engine, or LCM, configures the VM based on configurations that are pushed down to it. These configurations are stored on a central pull server, which communicates with the local LCM engine on each target VM so that it can provide the necessary configurations while also reporting on compliance.</p>
<h1 id="DEMO-Deploying-Software-with-VM-Extensions"><a href="#DEMO-Deploying-Software-with-VM-Extensions" class="headerlink" title="DEMO: Deploying Software with VM Extensions"></a>DEMO: Deploying Software with VM Extensions</h1><p>Hello and welcome back. In this demonstration, I am going to show you how to deploy software to a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a> using VM extensions.</p>
<p>On the screen here you can see I’m logged in to my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal. I’m on the Overview page of my virtual machine, called VM01. This virtual machine I have running is a Windows Server 2016 Datacenter OS. Now, offscreen I’m logged into this VM via RDP and I’m just pulling it over here onto my main screen here.</p>
<p>Now, let’s go into services and we’ll take a look at what we have running here. This is just a plain, vanilla install of Windows 2016. Nothing spectacular here, just basic services are running. What I’m going to do is minimize this, and from my Overview page for the VM, I’m going to browse down to Extensions under Settings.</p>
<p>If I select Extensions here and I click add, what happens is I get a blade that shows up here of all the different Windows-based extensions that I can install on my virtual machine. We have things like the Agent for Cloud Workload Protection for Symantec, the Puppet Agent, SentinelOne, NVIDIA GPU drivers, all this fun stuff. We also have the Custom Script Extension, the PowerShell Desired State configuration. All these different things we can install, usually agents, on our virtual machine.</p>
<p>What we’re going to do here in this demonstration, is install the Network Watcher Agent for Windows. Now, this Network Watcher Agent allows you to monitor your VM’s network performance and health. To do that we simply, like I did here, is select it from the list and click Create. And then since there’s nothing here, there’s no licensing or any information that we need to agree to, we simply have the OK button down here. And each of these blades will be different depending on what you’re installing. So we’ll go ahead and okay it.</p>
<p>We can see that the deployment is submitted and what’ll happen is once this deployment gets submitted it’ll show up in the list here of extensions. And if we click the notification bell up here, we can see that the deployment is still in progress. And we can see now that the provisioning has succeeded here. If we bounce over to our virtual machine, let me drag him back up over here, and we’ll refresh this, if we scroll up here we can see we now have the Azure Network Watcher Agent installed and running. And that’s really all there is to it.</p>
<p>Now, you’re not going to install a whole bunch of different software using these preconfigured extensions, but what you can do is leverage the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-deploying-iis-with-custom-script-extension/">Custom Script Extension</a> to call different scripts to pull different software in, and you can use the PowerShell Desired State configuration to maintain a configuration on the VM. These two options here are really where the power of extensions come into play.</p>
<h1 id="DEMO-Deploying-IIS-with-Custom-Script-Extension"><a href="#DEMO-Deploying-IIS-with-Custom-Script-Extension" class="headerlink" title="DEMO: Deploying IIS with Custom Script Extension"></a>DEMO: Deploying IIS with Custom Script Extension</h1><p>Hello, and welcome back. In this brief demonstration, I’m going to show you how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-deploying-software-with-vm-extensions/">deploy software using VM extensions</a>. More specifically, the custom script extension. What we’re going to do here is install IIS on a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a> called VMO1.</p>
<p>So on the screen here, I’m logged into my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal and I’m at the overview page for VMO1, which is a running Windows Server 2016 data center VM. What I’m going to do is grab my RDP session because I am RDPED into the server right now. And we can see if we go into Manage and Remove Roles. That web server or IIS is currently not installed on this VM.</p>
<p>So instead of installing It from within the VM itself. What we’re going to do is use a custom script extension to do it for us. So let me minimize this RDP session here. And what we’re going to do to begin this installation is first create a PowerShell script, which is a PS1 file. And that PS1 file needs to call the install Windows feature, a PowerShell command.</p>
<p>Now if I drag my PowerShell command in here, I have a script called Enable IIS that I created and this is on my local workstation. And in the PS1 script, I’m calling install Windows feature. And I’m specifying the web server feature with a name flag. And I’m also telling it to include the IIS management tools.</p>
<p>So again, this is a file called Enable IIS and it’s a PS1 file or a PowerShell script. So I’ll do drag this over here back onto my other screen. What we’re going to do is reference that file when we deploy this custom script extension. So to deploy that Enable IIS file to my VMO1 virtual machine and to execute it, what I need to do is click on extensions under Settings.</p>
<p>Now from the extensions blade here, what I need to do to deploy my custom script extension is click add here. And then I can select Custom script extension here from the list in the left pane. So we’ll go ahead and select our custom script extension. And what we’ll do is we’ll create our extension.</p>
<p>Now when we do this, we need to specify the script file, which in this case is the Enable IIS, PS1 file that I created ahead of this lab. And then I can specify any optional arguments. Now my script doesn’t need arguments to install IIS, So this field will be left blank. But what we’ll do here is we’ll select our Enable IIS script here, and we can see that as your uploads it automatically to temporary storage. And it does this so the VM can then pull that script down and execute it.</p>
<p>So we’ll go ahead and okay this, and we can see the deployment being submitted and then going into progress. What this custom script extension will do is switch over to transitioning shortly, and eventually it’ll move on to provisioning succeeded.</p>
<p>While this is going on, let me drag my VM back over. And we’ll refresh here, the Server Manager. And once the script runs, we’ll see the IIS service show up here. It’s Matter of fact, let me go into manage here and just see if it’s showing up yet. We can see web server is now listed as installed. If we cancel out of here and do a refresh, we can see IIS is now installed and running. If we minimize our RDP session, and refresh our extension screen here, we can see that provisioning has succeeded on our VM.</p>
<p>So what our custom script extension did was take the PS1 PowerShell script that I created that calls the install Windows feature, and it uploaded it to temporary storage and Azure, the Windows VM then pulled down that script and executed it. And when it executed it called the install Windows feature and installed the IIS service on the VM.</p>
<p>So that’s how you can use the custom script extension to install other applications and Software other than what you get here out of the box from Azure itself. So with that, we’ll call it a wrap and I’ll see you in the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/overview-of-azure-managed-disks/">next lesson</a>.</p>
<h1 id="Azure-Monitor-for-VMs"><a href="#Azure-Monitor-for-VMs" class="headerlink" title="Azure Monitor for VMs"></a>Azure Monitor for VMs</h1><p>Hello and welcome to Azure Monitor for VMs. Over the next few minutes, we’re going to look at what Azure Monitor for VMs is and what it provides.</p>
<p>Azure Monitor for VMs is a cloud offering that you can use to monitor both <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">Azure virtual machines</a> and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/virtual-machines-scale-sets/">virtual machine scale sets</a>. What it does is analyze both the performance and health of Windows and Linux virtual machines. It monitors processes running on the VMs, dependencies on other resources, and it can even monitor external processes. Azure Monitor for VMs can even monitor virtual machines and physical machines that are on-prem or hosted by other cloud providers.</p>
<p>Azure Monitor for VMs provides predefined trending performance charts that show key performance metrics for the OS of the VM being monitored. It also provides a dependency map. This dependency map is pretty slick because it shows interconnected components with the virtual machine being monitored from all of your resource groups and subscriptions.</p>
<p>The dependency map gets its data from the Microsoft dependency agent, which in turn, relies on the log analytics agent for its connection to log analytics. This means that to use the map feature in Azure Monitor for VMs, your system needs to have the log analytics agent installed, and it needs to be configured with the dependency agent. Microsoft recommends that you use the Azure VM dependency agent extension for both Windows and Linux to install the agent on your Azure VMs.</p>
<p>The integration of Azure Monitor for VMs with Azure Monitor logs provides aggregation capabilities, filtering capabilities, and the ability to analyze VM data trends over time. To view the collected data, you can either look at it from the Insights page for a single VM, or you can see an aggregated view of all VMs from within Azure Monitor.</p>
<p>Organizations typically use Azure Monitor to identify performance bottlenecks and network issues that affect applications.</p>
<p>The data that gets collected by your virtual machines is stored in Azure Monitor. A log analytics workspace is required to store the performance and dependency data that’s collected.</p>
<p>You can set up Azure Monitor for VMs in a few different ways. To monitor a single VM or VM scale set, you can do so right from the Insights link right from the page for the individual VM or scale set. If you need to monitor more than one Azure VM or scale set, it’s usually best to use Azure Policy to do so. That being said, you can also use PowerShell, if you need to monitor more than one Azure VM or scale set as well.</p>
<p>The table on your screen shows all of the different operating systems that Azure Monitor for VMs supports.</p>
<p>I should point out before we dive into the upcoming demonstration that you need to have at least the log analytics contributor role to enable and access the Azure Monitor for VM features. If you want to view the performance, health, and map data, you need to have the monitoring reader role for the particular Azure VM that you’re interested in.</p>
<p>In the upcoming demonstration, we’ll enable <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/demo-monitoring-an-azure-vm-with-azure-monitor-for-vms/">Azure Monitor</a> for a single VM through the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal.</p>
<h1 id="DEMO-Monitoring-an-Azure-VM-with-Azure-Monitor-for-VMs"><a href="#DEMO-Monitoring-an-Azure-VM-with-Azure-Monitor-for-VMs" class="headerlink" title="DEMO: Monitoring an Azure VM with Azure Monitor for VMs"></a>DEMO: Monitoring an Azure VM with Azure Monitor for VMs</h1><p>Hello, and welcome back. In this brief demonstration. I’m going to walk you through the process of enabling <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/azure-monitor-for-vms/">Azure monitor</a> for VMs for a single <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/advanced-vm-management-in-azure-1020/introduction/">virtual machine</a>.</p>
<p>On the screen here you can see I’m logged into my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal, and I’m in my resource group that I created, that’s called VMStuff. And in VMStuff, I have a virtual machine called MyVM. What we’re going to do here is enable monitoring for this virtual machine. And it’s actually a pretty, straightforward process.</p>
<p>From my VMStuff resource group, what I’ll do here is select MyVM, and at this point I’m at the overview page for the virtual machine. To enable Azure Monitor for VMs, I simply scroll down on the left here, to the monitoring section, and under monitoring there’s an option here for insights.</p>
<p>So we’re going to go ahead and select insights. If the VM is not yet enabled for Azure monitor, you’ll get this screen here, this get more visibility screen, and you’ll see the blue button here to enable the VM. So what we’ll do here to enable it is click the enable button, and then what happens is it prompts me for a log analytics workspace.</p>
<p>We can see that it’s telling me here that the VM isn’t currently connected to any workspace, and that I need to select an existing one. It defaults here to my lab subscription, where I’m working, and then I have an option in this dropdown, to select an existing log analytics workspace.</p>
<p>Now, if I didn’t have a log analytics workspace available, I’d have to create one for this. Since we already have a default workspace, we’ll use the one that it chose for us. And then from here we can simply click enable. And what this does is deploys insights. And once this is done, our virtual machine here will be enabled for Azure Monitor for VMs.</p>
<p>So let’s let Azure do its thing here. And this takes a few minutes. And then once this is done, I’ll show you what it looks like. We can see that our deployment has succeeded here, and we’ll close this. And it’s telling us that monitoring data is being collected and routed to insights.</p>
<p>So this can take up to 10 minutes. So what I’m going to do is pause this video, and we’ll come back when this data has arrived. So hang tight. Welcome back, so our insights deployment has completed. And now if we look at the insights page under monitoring for our VM, we have two options, we have performance and we have map.</p>
<p>The map option allows us to discover application dependencies, while the performance tab here allows us to look at overall utilization of the VM, and its performance.</p>
<p>From the performance tab here, we can take a look at our logical disk performance, information on CPU utilization, Ram, IOPS, disk throughput, and all kinds of other data about our virtual machine. And if we bounce back out to the map tab here, we can see the different processes that are running on the VM, and we can see where the ports are in use for those different processes.</p>
<p>So this tab here, this map tab provides you with a way to view dependencies for the VM, while the performance tab allows you to view the performance of your virtual machine.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Congratulations, you’ve come to the end of Advanced VM Management in Azure. Let’s review what you’ve learned.</p>
<p>We started things off by looking at virtual machine scale sets. You learned about vertical scaling and horizontal scaling. You also saw a hands-on demo on how to deploy a VM scale set with autoscaling enabled.</p>
<p>We then looked at configuration management. I introduced you to many tools that can be used to manage VM configurations. You learned how to deploy an Azure PowerShell DSC Configuration and how to deploy software using VM extensions.</p>
<p>We wrapped up by covering VM monitoring.</p>
<p>At this point, you should have a basic understanding of how to scale VMs, how to manage VM configurations, and how to monitor VMs.</p>
<p>To learn more about Azure virtual machines, you can, and should, read Microsoft’s published documentation. Be sure to also watch for new courses on Cloud Academy, because we’re always publishing new ones. Be sure to give this course a rating, and if you have any questions or comments, please let us know. Thanks for watching and happy learning!</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Knowledge-Check-Getting-Started-with-Azure-Virtual-Machines-12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Knowledge-Check-Getting-Started-with-Azure-Virtual-Machines-12/" class="post-title-link" itemprop="url">AZ-104-Knowledge-Check-Getting-Started-with-Azure-Virtual-Machines-12</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:21:59" itemprop="dateCreated datePublished" datetime="2022-11-18T20:21:59-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:44:40" itemprop="dateModified" datetime="2022-11-22T11:44:40-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Knowledge-Check-Getting-Started-with-Azure-Virtual-Machines-12/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Knowledge-Check-Getting-Started-with-Azure-Virtual-Machines-12/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><object data="Knowledge-Check-Getting-Started-with-Azure-Virtual-Machines.pdf" type="application/pdf" width="100%" height="600"></object></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Getting-Started-with-Azure-Virtual-Machines-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Getting-Started-with-Azure-Virtual-Machines-11/" class="post-title-link" itemprop="url">AZ-104-Getting-Started-with-Azure-Virtual-Machines-11</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:21:57" itemprop="dateCreated datePublished" datetime="2022-11-18T20:21:57-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:39:46" itemprop="dateModified" datetime="2022-11-22T11:39:46-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Getting-Started-with-Azure-Virtual-Machines-11/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Getting-Started-with-Azure-Virtual-Machines-11/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Course-Introduction"><a href="#Course-Introduction" class="headerlink" title="Course Introduction"></a>Course Introduction</h1><p>Hi there. Welcome to Getting Started with Azure Virtual Machines. My name is Thomas Mitchell and I’ll be taking you through this course.</p>
<p>I’m in Azure instructor at cloud Academy and I have over 25 years of IT experience, several of those with cloud technologies. If you have any questions feel free to connect with me on LinkedIn or send an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>This course is intended for those who are interested in learning about the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/section-one-introduction/">basics of Azure virtual machines</a>. To get the most from this course you should have a basic understanding of <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a> and of the Azure portal.</p>
<p>We’re going to start things off by looking at what virtual machines are and what resources are necessary before deploying a virtual machine. We will also cover <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/azure-vm-pricing/">Azure VM pricing</a> and the different <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/virtual-machine-options/">virtual machine options</a> that are available to you.</p>
<p>We’ll then take a look at <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/availability-sets-and-availability-zones/">availability sets and availability zones</a>. You’ll also get to see a demonstration that shows you how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-create-an-availability-set/">create an availability set</a>, using the Azure portal.</p>
<p>Later on, we will dive into the deployments of both a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-windows-virtual-machine-via-the-azure-portal/">Windows virtual machine</a> and a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-linux-virtual-machine-via-the-azure-portal/">Linux virtual machine</a>. I’ll walk you through a demonstration of how to deploy each, and how to connect to each. We’ll connect to the Windows VM using RDP and we’ll connect to the Linux VM via SSH, using putty.</p>
<p>We’ll wrap things up by covering basic management tasks. You’ll learn how to start VMs, stop VMs, redeploy VMs, and resize VMs.</p>
<p>We’d love to get your feedback on this course, so please give it a rating when you’re finished. So, if you’re ready to learn about Azure virtual machines, let’s get started.</p>
<h1 id="Section-One-Introduction"><a href="#Section-One-Introduction" class="headerlink" title="Section One Introduction"></a>Section One Introduction</h1><p>Hi there. Welcome to getting started with VMs. In this section, we’re going to cover the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">basics of virtual machines</a>. We’ll talk about what virtual machines are and when you should use them. We’ll also take a look at the resources that are necessary to deploy virtual machines. Later on, in the section, you’ll learn about <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> VM pricing and about the different virtual machine options that are available to you.</p>
<p>We have lots to get to, so join me in the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">next lecture</a>.</p>
<h1 id="What-is-a-Virtual-Machine"><a href="#What-is-a-Virtual-Machine" class="headerlink" title="What is a Virtual Machine?"></a>What is a Virtual Machine?</h1><p>Hi there. Before we get into the fun stuff, let’s take a look at what <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">Azure virtual machines</a> are.</p>
<p>An Azure virtual machine is an on-demand, scalable computer resource that is available in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a>. Virtual machines are generally used to host applications when the customer requires more control over the computing environment than what is offered by other <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/related-resouces/">compute resources</a>. When you leverage a virtual machine to host your application, you get the flexibility of virtualization without the need to buy or maintain any underlying physical hardware. That said, you will have to manage the typical tasks that are associated with any other server, including configuration, patch management, and software installation.</p>
<p>Because they are quick and easy to set up, Azure virtual machines are often used to deploy development and test environments. Organizations will also use Azure virtual machines to host their applications in Microsoft Azure, due to their pay-as-you-go nature, which allows you to only pay for VM’s when you need them. Azure virtual machines are also often used to extend on-prem data centers to Microsoft Azure, because VM’s that are attached to a virtual network can communicate with on-prem environments over a site to site VPN.</p>
<p>When designing an application infrastructure that includes Azure VMs, there are important considerations to think about. You should think about virtual machine naming conventions as well as where you are VM’s will be deployed. Generally speaking, virtual machines in Azure should be deployed in locations that are closest to those who will be accessing those VM’s.</p>
<p>Other important considerations include VM sizing requirements and the number of VM’s that will be needed, especially since Microsoft Azure imposes CPU and virtual machine quotas that you may or may not need to have lifted.</p>
<p>You should also think about what operating system you’re VM’s will need to run and what the configuration of your VM’s should look like once they start.</p>
<h1 id="Related-Resources"><a href="#Related-Resources" class="headerlink" title="Related Resources"></a>Related Resources</h1><p>Welcome to ‘Related Resources’. Certain resources are required in order to deploy an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">Azure virtual machine</a>. Generally speaking, if these resources do not exist prior to VM creation, they will be created when the VM is created. For example, before creating a virtual machine, a resource group must exist. This is because a new virtual machine must be contained within a resource group. </p>
<p>A virtual network is also required before deploying a virtual machine, because a virtual machine must be connected to a virtual network. This also means that a virtual NIC is also necessary.</p>
<p>If you are deploying a virtual machine that uses unmanaged disks, a storage account will be required to hold the virtual hard disks for the virtual machine. If the virtual machine you are deploying uses only managed disks, a storage account is not required.</p>
<p>A virtual machine that will be remotely accessed will require a public IP address. If the virtual machine will only be accessed internally, a public IP address is not required.</p>
<p>Although they are not required, data disks can be attached to a virtual machine to expand its storage capabilities. It’s usually a good idea to attach at least one data disc to a VM if you plan to host an application on that VM.</p>
<h1 id="Azure-VM-Pricing"><a href="#Azure-VM-Pricing" class="headerlink" title="Azure VM Pricing"></a>Azure VM Pricing</h1><p>Welcome to Azure VM pricing. There are several ways to purchase <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">Azure virtual machines</a>. You can purchase them on a pay-as-you-go basis, or you can purchase reserved VM instances. You can also use spot pricing to purchase unused compute capacity.</p>
<p>Leveraging pay-as-you-go allows you to pay for your compute capacity by the second. Pay-as-you-go requires no long-term commitments nor any upfront payments. You can increase compute capacity as you need it and decrease it when you don’t. You pay only for what you use. Pay-as-you-go pricing is recommended for customers who prefer the low cost and flexibility of Azure VMs.</p>
<p>When you purchase a reserved VM instance, what you are doing is making an advance purchase of a virtual machine for either one year or for three years. This commitment is made up front and it gets you a savings of up to 72% when compared to pay-as-you-go pricing. You would typically opt for reserved VM instances when you have applications with steady-state usage or if you are looking for budget predictability. Of course, only those customers who can commit to using a VM for at least a year can take advantage of reserved VM instances.</p>
<p>Spot pricing allows an organization to purchase unused <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> compute capacity at a discount of up to 90% when compared to pay-as-you-go prices. However, workloads that are run on spot instances must be able to tolerate interruptions. Spot pricing is good for customers who are running interruptible applications and are looking to drastically lower their compute costs. Workloads that must meet an SLA are not good candidates for Azure VM spot pricing.</p>
<h1 id="Virtual-Machine-Options"><a href="#Virtual-Machine-Options" class="headerlink" title="Virtual Machine Options"></a>Virtual Machine Options</h1><p><a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">Azure virtual machines</a> come in several flavors. General-purpose virtual machines offer a balanced CPU to memory ratio. These machines are perfect for development and testing environments, small databases, and low traffic Web servers. </p>
<p>Compute-optimized virtual machines offer high CPU to memory ratios. These virtual machines are ideal for medium traffic Web servers and network appliances. They are also good for batch processing and can function as application servers.</p>
<p>Memory-optimized virtual machines offer high memory to core ratios. Organizations typically use memory-optimized virtual machines for relational database servers, large caches, and for performing in-memory analytics.</p>
<p>Storage optimized virtual machines offer high disk throughput and IO. They are perfect for big data, SQL, and NoSQL databases.</p>
<p>GPU virtual machines are specialized for heavy graphic rendering and video editing. These VMs come with single GPUs and multiple GPUs.</p>
<p>High performance compute virtual machines are the fastest and most powerful CPU virtual machines available. These virtual machines are designed to handle high performance compute workloads, including things like molecular modeling, genomic research, and financial risk modeling. Some high-performance compute virtual machines come with optional high throughput network interfaces. </p>
<p>The type of virtual machine that you deploy will be largely dependent on the workload you plan to host on the VM.</p>
<h1 id="Section-One-Conclusion"><a href="#Section-One-Conclusion" class="headerlink" title="Section One Conclusion"></a>Section One Conclusion</h1><p>Congratulations, you’ve reached the end of this section. Let’s review what you’ve learned.</p>
<p>We started off by covering the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">basics of virtual machines</a>. We talked about what virtual machines are and when you should use them. We also took a look at the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/related-resouces/">resources</a> that are necessary to deploy virtual machines. Later on, we covered <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/azure-vm-pricing/">Azure VM pricing</a> and the different <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/virtual-machine-options/">Azure VM options</a> that are available.</p>
<p>At this point, you should be familiar with the basics of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">Azure virtual machines</a>.</p>
<h1 id="Section-Two-Introduction"><a href="#Section-Two-Introduction" class="headerlink" title="Section Two Introduction"></a>Section Two Introduction</h1><p>Welcome to high-availability features. Over the next few lectures and demonstrations, you are going to learn about <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/availability-sets-and-availability-zones/">availability sets and availability zones</a>. You’ll learn what each offers, and how they differ. To reinforce what you learn in the upcoming lectures, we’ll walk through a demonstration where I’ll show you how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-create-an-availability-set/">create an availability set</a> that we will add a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">VM</a> to later on.</p>
<p>So, with that, please join me in the next lecture, where we’ll talk about availability sets and availability zones.</p>
<h1 id="Availability-Sets-and-Availability-Zones"><a href="#Availability-Sets-and-Availability-Zones" class="headerlink" title="Availability Sets and Availability Zones"></a>Availability Sets and Availability Zones</h1><p>Hi there, welcome to availability sets and availability zones. Over the next few minutes, we’re going to take a look at what they are, and what they offer.</p>
<p>An availability set provides redundancy and availability for <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">virtual machines</a>. Deploying at least two virtual machines into an availability set ensures that at least one of them remains available whenever planned or unplanned maintenance occurs. When you deploy at least two virtual machines into an availability set, you qualify for a VM SLA of 99.95% uptime.</p>
<p>Even if you deploy a single virtual machine, by itself, into an availability set, you can qualify for a 99.9% VM SLA, provided you use premium SSD or ultra-disk for all operating system discs and all data disks that are attached to the VM.</p>
<p>Every VM that is deployed into an availability set is assigned an update domain and a fault domain by <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>.</p>
<p>An availability set contains five update domains by default, although this can be increased to 20 update domains in resource manager deployments. An update domain is a group of virtual machines and underlying physical hardware that can be rebooted at the same time. When planned maintenance is performed on the Azure platform, only one update domain is rebooted at a time. This ensures that all VMs and associated hardware are not taken down at the same time.</p>
<p>a fault domain is a group of virtual machines that shares a common power source and a common network switch. When virtual machines are added to an availability set, they are distributed across up to three different fault domains in resource manager deployments, or across two fault domains in classic deployments.</p>
<p>Deploying VMs in an availability set will not protect an application from failures associated with the operating system of the VMs or from failures that are application-specific. However, placing virtual machines in an availability set will provide protection against network outages, physical hardware failures, and power interruptions within an Azure data center.</p>
<p>Availability zones are similar in concept to availability sets. However, there is a distinct difference. While availability sets are used to protect applications from hardware failures within an Azure data center, availability zones, protect applications from complete Azure data center failures.</p>
<p>An availability zone is a unique physical location that exists within an Azure region. Every availability zone contains at least one data center within the region. Each of these data centers has its own power, its own networking, and its own cooling. To ensure resiliency, every enabled region in Azure consists of at least three separate zones that are physically separated. It is this physical separation that protects applications from data center failures.</p>
<p>I should note here that when you deploy virtual machines in an availability zone, they will be covered by a 99.99% VM uptime SLA.</p>
<p>Like availability sets, availability zones consist of fault domains and update domains. However, unlike availability sets, an availability zone consists of a single fault domain and a single update domain. Deploying three or more VMs across three availability zones within an Azure region will cause Azure to split those VMs across three different fault domains and three different update domains to ensure that the virtual machines in different zones are never updated at the same time.</p>
<p>Ultimately, availability zones are used to protect applications from entire Azure data center failures, while availability sets are used to protect applications from hardware failures within an azure datacenter.</p>
<h1 id="DEMO-Create-an-Availability-Set"><a href="#DEMO-Create-an-Availability-Set" class="headerlink" title="DEMO: Create an Availability Set"></a>DEMO: Create an Availability Set</h1><p>Hi there and welcome back. In this brief demonstration, I’m going to show you how to create an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/availability-sets-and-availability-zones/">availability set</a>. We’re not going to put anything in the availability set quite yet, because we’ll do that later on when we create our <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">virtual machines</a>.</p>
<p>So on the screen here, I’m logged in to my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal. I’m logged in as my admin account here and what I’ve done is create a resource group called VM Course. So I’m looking at my empty resource group here.</p>
<p>To create my availability set, I’m simply going to go up here, click add and then I’m going to search for availability. And then from the market place here, I can select availability set.</p>
<p>We can see here in the create blade, that Microsoft Azure is telling us that an availability set is a group of virtual machines that are split out across multiple fault domains and update domains. And this is what I was talking about earlier. It also tells us here that the availability set ensures the application that’s hosted on our VMs isn’t affected by single points of failure. And these were the failures I was talking about earlier. Things like network switches and power units.</p>
<p>Now we do have a plans tab here, if we click plans, there’s nothing new here, it’s just repeating the description. There are no special plans for availability sets, it’s just an availability set. So we’ll just go back over to overview. And then what we’ll do is create our availability set.</p>
<p>Now on the create blade we have some information we need to provide. We need to tell Azure what subscription and resource group is going to hold our new availability set. For this demonstration, we’re going to put it in the Lab Subscription and in the VM Course resource group. And then what we need to do is give our availability set a name. So we’re just going to call this, my avail set.</p>
<p>Now if we hover over the icon for region here, basically this is telling us that the region we select is where this availability set is going to be deployed to. So, since we’re going to work in Central U.S, we’ll put this in the Central U.S region. That’s the region I usually work in when I’m doing labs and demonstrations.</p>
<p>If we hover over fault domains here, we can see that a fault domain contains virtual machines that share common power and physical network switches. The default here is two. If we hover over update domains here, we can see that machines that are in an update domain will be restarted together during planned maintenance. It also tells us here, and we covered this earlier, that Azure will never restart more than one update domain at a time.</p>
<p>The default configure is to fault domains and five update domains. Now we can expand the fault domains to three and we can drag our slider for update domains to a maximum of 20. So let’s drop these back down to two and five, their defaults and then we have an option here for managed disks. If we hover over the icon here, we can see that if we want to use virtual machines in this availability set with managed disks, we need to set this option to yes. We can also see here that if we hover away, that yes if the default option.</p>
<p>So we’ll leave this in its current configuration. If we click next here for advanced, we can see that we have the option to configure a proximity placement group. The proximity placement group allows you to group as your resources physically close or within the same region, and that’s what it’s telling us up here. Now if we hover over the icon here for proximity placement group, we get a little more information.</p>
<p>We can see that a proximity placement group is a logical grouping that’s used to ensure the Azure compute resources are physically located close to one and other. Generally speaking, you would use a proximity placement group to ensure resources that require low latency remain close together. An example of this would be, let’s say a great plains deployment where you might have the great plain server that has to talk back to a SQL server.</p>
<p>So in this scenario, if you planned on deploying great plains to one VM and then SQL to another VM, you’d probably put them in a proximity placement group because you want those two servers as close together as possible to minimize that latency. We’re not doing anything with proximity placement groups here so we’ll leave this alone at its default and then of course we could do some tagging, we’re not gonna do any tagging here, so from this point, we can click review and create.</p>
<p>We can see that the validation passes and then we’ll create our availability set. The creation of an availability set takes just a few seconds and we can see it’s already been completed. If we go to our resource here, now we can see here we have nothing in the availability set right now, but we’ll take care of that later on when we add a few virtual machines.</p>
<p>So with that, let’s call it a wrap and I’ll see you over in the next lecture.</p>
<h1 id="Section-Two-Conclusion"><a href="#Section-Two-Conclusion" class="headerlink" title="Section Two Conclusion"></a>Section Two Conclusion</h1><p>Congratulations, you’ve completed high-availability features, let’s review what you’ve learned. In this section you learned about <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/availability-sets-and-availability-zones/">availability sets and availability zones</a>. You learned what each offers and how they differ from one another. To reinforce what you learned. We walked through a demonstration that showed you <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-create-an-availability-set/">how to create an availability set</a>.</p>
<p>At this point, you should have a fair understanding of what availability sets are, what availability zones are, and the differences between them. You should also know how to create an availability set that you can add <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">VM</a>s to.</p>
<h1 id="Section-Three-Introduction"><a href="#Section-Three-Introduction" class="headerlink" title="Section Three Introduction"></a>Section Three Introduction</h1><p>Hi there and welcome to deploying and connecting to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">Azure virtual machines</a>. In this section, you will learn how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/creating-and-connecting-to-azure-vms/">create and connect to Azure VMs</a>. We’ll start off with the basics of creating and connecting to VMs and then will dive into a few demonstrations. You’ll first learn how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-windows-virtual-machine-via-the-azure-portal/">deploy and connect to a Windows virtual machine</a> using the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal, and then you’ll learn how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-linux-virtual-machine-via-the-azure-portal/">deploy and connect to a Linux virtual machine</a>. In the Linux demonstration, I’ll show you how to create SSH keys using PuttyGen, and how to use those keys with putty to connect to the Linux VM over SSH.</p>
<p>We have lots to get to. So, let’s get started.</p>
<h1 id="Creating-and-Connecting-to-Azure-VMs"><a href="#Creating-and-Connecting-to-Azure-VMs" class="headerlink" title="Creating and Connecting to Azure VMs"></a>Creating and Connecting to Azure VMs</h1><p>Hi there and welcome to creating and connecting to Azure VMs. Before we dive into the actual deployment and configuration of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">Azure virtual machines</a>, let’s cover some of the basics regarding Azure VMs.</p>
<p>Azure VMs are scalable computing resources that you can spin up on demand. You typically use Azure virtual machines to host applications when you need significant control over the computing environment. While Azure virtual machines provide the benefits of virtualization, you still need to handle common tasks that are associated with running a server, including server configuration, server patching, and software installation.</p>
<p>Because of how easy it is to deploy and configure Azure virtual machines, organizations often rely on them for their development and test environments. Virtual machines are also useful when you wish to lift and shift your on-prem applications to <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>. What makes them even more attractive for hosting applications in the cloud is the fact that you only pay for what you need. If you need extra virtual machines to support an increased application load, you can simply spin up new VMs. You can then decommission the VMs when they are no longer needed.</p>
<p>By connecting Azure virtual machines to a virtual network that is connected to an on-prem network through a site to site VPN, you can also use them to extend your on-prem data center.</p>
<p>If you determine that a virtual machine is the right solution for application, there are some considerations to think about before rushing off and deploying that VM. For example, you’ll need to decide where the VM should be deployed. This is important because you generally want to deploy your virtual machines in the region that is closest to the users who will be accessing that VM. Deploying a virtual machine in the eastern US region for users that reside in Europe probably makes no sense.</p>
<p>Sizing is also something you need to think about. When you deploy a VM, you’ll be asked to select a VM size. Generally speaking, the application we plan to deploy on the VM will dictate the correct sizing for the VM. Applications that are CPU intensive will typically require a CPU intensive virtual machine, while memory-intensive applications might perform better with a VM that contains more memory.</p>
<p>You will, of course, also need to decide whether you need a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-windows-virtual-machine-via-the-azure-portal/">Windows VM</a> or a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-linux-virtual-machine-via-the-azure-portal/">Linux VM</a>. These are all considerations that you must think about before deploying a virtual machine in Microsoft Azure.</p>
<p>So now that you have a basic understanding of virtual machines and the necessary resources to deploy them, let’s jump into the next lesson, where I’ll show you how to deploy and connect to a Windows virtual machine, using the Azure portal.</p>
<h1 id="DEMO-Deploying-and-Connecting-to-a-Windows-Virtual-Machine-via-the-Azure-Portal"><a href="#DEMO-Deploying-and-Connecting-to-a-Windows-Virtual-Machine-via-the-Azure-Portal" class="headerlink" title="DEMO: Deploying and Connecting to a Windows Virtual Machine via the Azure Portal"></a>DEMO: Deploying and Connecting to a Windows Virtual Machine via the Azure Portal</h1><p>Hi there, welcome back. In this demonstration, I’m going to walk you through the process of deploying a Windows virtual machine using the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal. When we deploy it, we’re going to deploy into the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-create-an-availability-set/">availability set</a> that we set up earlier.</p>
<p>So on the screen here, I’m logged into my Azure Portal, and I’m in my VM course resource group that I created prior to creating my availability set. I’m also logged in as my administrator. To begin the process of our VM deployment.</p>
<p>From my resource group here, I can either go out to the hamburger and create a new resource, or I can click add here along the top menu bar. From the marketplace, I can either search for what I’m looking for, or I can just select my Windows Server 2016 data center from the popular list, which is what I’m going to do here.</p>
<p>To complete the deployment of my virtual machine, I need to provide some information in several of these tabs. Some of these tabs are optional. And we’ll go through each of these and touch on what’s important. When we launch the virtual machine deployment, we’re presented with the basic tab.</p>
<p>On this basics tab, we start things off by telling Azure which subscription and resource group will host our virtual machine. You’ll have to provide this information for just about any resource you deploy in Azure. So we’re going to deploy into the lab subscription and into our VM course resource group.</p>
<p>We then need to give our VM a name, so I’ll just call it VM one. If we hover over the icon here, we can see that a virtual machine has two distinct names. It has the virtual machine name and the guest hostname. That’s the name within the operating system.</p>
<p>Now when you create a VM in the portal, the same name that you specify here, is used for both the virtual machine name and the hostname. It’s also important to note that as you can see here on this pop up, the virtual machine name cannot be changed after the VM is created. You can however, change the hostname within the OS once you’ve logged into it.</p>
<p>So we’ll call this VMO one and we’ll deploy into central US. This availability option here, if we hover over it gives us the ability to deploy our virtual machine into either an availability zone or an availability set. We talked about the differences between these two earlier.</p>
<p>What we’re going to do here for this exercise is deploy into an availability set. When we select it, we’re then prompted with another drop down, where we can choose from any previously deployed availability sets. We can see here I have my avail set, so we’ll select it. And if we didn’t have any availability sets here, we did have an option here to create a new one. We can see in our image here that we’re deploying a Windows Server 2016 data center server, although we could drop down here and select some other image to deploy from. But we’ll leave it here at 2016. And the spot instance, option here allows you to purchase unused Azure compute capacity, and it allows you to do that at a discounted rate.</p>
<p>Now, that being said, you don’t want to deploy <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">Virtual Machines</a> using spot instances unless they can tolerate an outage. If we click on learn more about spot instances here, we can see right out of the gate that Microsoft allows you to use spot instance VMs to take advantage of unused capacity at a cost saving.</p>
<p>The very next sentence here is that at any point in time, when Azure needs that capacity back, Azure is going to evict your spot instance. So what this means is that spot Vms and Microsoft mentions it here. It mentions here that spot VMs are good for workloads that can handle interruptions. And what that means is a VM that batch processes jobs or something that you use in a dev test environment, would be good for spot VMs but anything that can’t tolerate an interruption would be something that you don’t want to use spot VM instances for.</p>
<p>So let’s close this out. We’ll leave this set to No. And then our sizing here, the default size is DS1V2 which is one virtual CPU and three and a half gig of RAM. We can change the size if we want to. And we can see here based on our default filters, the only VMs that are available to us in the small range, Gen two, which are general-purpose machines that support premium discs.</p>
<p>We have a small list of machines here to choose from. If we clear our filters here, we can then see we have the full gamut of VMs that we can take a look at, and possibly deploy if we want to. So let’s go back and restore our default filters because I want you to deploy a machine that has premium disk.</p>
<p>So what we’ll do for this exercise is deploy a DS2V2 virtual machine, which has two processors and seven gig of RAM. It also supports eight data disks. So we’ll go ahead and select this new size. And then we need to provide some administrator information. This administrator account info is the local admin for the virtual machine. As we scroll down here, we can see we then have to configure some inbound port rules and some inbound ports in the default configuration, which is what we’re going to do here, this VM will be accessible over the internet via RDP. And you’re going to get a little yellow box here with a warning that essentially tells you that, hey, this is probably a bad idea unless you’re just doing some basic testing.</p>
<p>This is because what this does is allow RDP to anyone from the internet. This, in turn, leaves your machine open to attacks, and the only thing protecting it is a user and password combination. It’s not something you’d want to do in a production environment. Certainly, if we select the drop down for inbound ports, we can see that we can also allow HTTP, HTTPS, and SSH. We’ll leave this alone at RDP for now. And if we wanted to allow other ports, we could then go in and configure those later on through a network security group. We’ll leave this default setting here and then down the bottom here is Where you can configure your Azure hybrid benefit.</p>
<p>This is essentially the option you have. If you already own Windows licenses with an active SA or Windows Server subscription. You can use this hybrid benefit to save on your licensing costs. We don’t have any licensing here, so we’ll select No.</p>
<p>Now if I wanted to create a default VM, I could stop here and click review and create. Azure would make some assumptions for me and spin up the VM. But what I wanna do here is walk you through some of these tabs. So instead of reviewing and creating, we’ll go ahead and click next for discs.</p>
<p>Now on this disk page, we can specify the disk options for our OS disk, and we can create data disks. If we hover over OS disk type here, we can see that this option allows us to choose between managed disk types to support our workloads. The options we have are standard HDD, standard SSD and premium SSD.</p>
<p>If we’re looking for high IOPS for our VM, for example, maybe it’s running, it’s going to run SQL, then we can select premium SSD. Standard SSD is the recommended OS disc type for most workloads. Standard HDD would be good for test environments or really low end servers.</p>
<p>Obviously, the HDD disks are backed by magnetic disk, while the SSD options are backed by solid state disks. For this demonstration, we’ll go with a standard HDD. Now when I do that, I get a prompt here that tells me that my selected VM size supports premium disks. And remember, we ensured we selected a VM size earlier that did support premium discs. And I did that too.</p>
<p>So we get this prompt. What this is telling me here is that if I select a standard HDD disk, I’m going to lose out on the connectivity SLA. What Microsoft here is telling me is that we should use a premium SSD if we have high IOPS workloads. It also tells me here that virtual machines that use premium SSD disks qualify for the 99.9% connectivity SLA.</p>
<p>I’m not worried about the SLA for this demonstration. So I’ll leave this here at standard HDD. We can also see here, this enable ultra disk compatibility is designed for delivering high throughput. We can see here that we don’t have access to ultra disk compatibility, because it’s not available for this VM size or this location. So we’re fine here.</p>
<p>We’ll leave that default it and then what we’ll do here is create a data desk and generally speaking, you’ll want to create data discs because you want to leave your OS disk, just for that the OS. So to create a data disc, we’ll go ahead and click create and attach a disk. And then in the name box, it gives it a default name, which we can change. I’ll leave this alone. And then in the source type, we can create a disk from either a snapshot of another disk, a blob that’s in a storage account or we can create an empty disk.</p>
<p>If we select the drop down here we can see the options snapshot, storage blob, or none an empty disk. We’ll create our empty disk here. And we can see the default is one terabyte premium SSD. We can also change this size, which I’m going to do and I’ll drop this down to standard HDD as well.</p>
<p>This is a lab environment so I’m not trying to go broke using SSD everywhere. When we do this, we can either select a pre-configured size, or we can customize the size. So I’ll just create a 10 gig data disk. And we can okay. We can see it’s now 10 gig and we’ll okay it.</p>
<p>When we create our data disk, we have the option of setting our host caching, we can set the caching for the disk to none read-only or read-write. Let me close my safe password here. The default here is read-only. So we’ll leave the read-only at its default here.</p>
<p>With our disk configured, let’s go ahead and click next for networking. And on this tab, we need to specify our network interface information. We need to configure our port information and security information and then some additional accelerated networking and load balancing options.</p>
<p>The virtual network if we hover over here, we can see that it operates much like a traditional network in a physical data center. VMs on the same virtual network can access each other by default, there’s nothing blocking communications. When you deploy a virtual network, which is necessary for a VM, you will also have to specify a subnet.</p>
<p>We can see since we have no virtual networks deployed already, it’s creating a new virtual network for us. If I select the drop down here, I can see I do have some other virtual networks and other resource groups that are available. But for this exercise we’ll allow it to create the new virtual network called VM course dash v-net.</p>
<p>When it creates the new virtual network. It’s also going to create a default subnet. If we hover over the icon for the subnet, we can see that a subnet is a range of IP addresses that falls within the virtual network. So whatever range is defined for the subnet needs to fall within the address space that is defined for the virtual network.</p>
<p>We’re allowing Azure to do this for us. So Azure will make sure it falls within the correct range. The public IP address allows us to access the VM from outside the local network, we have two options here, we can create a new public IP, or we can set it to none.</p>
<p>If we set it to none, we can’t remote to it from the internet, we can only access it via the internal address from the virtual network that it’s on or maybe over a VPN that’s connected to it. We don’t have any that infrastructure in place. So we’ll allow it to create the new public IP called VM or one IP. We could also create one manually here on our own. So I’ll close this.</p>
<p>The network security group here is a set of rules that we can use to allow or deny inbound and outbound traffic to and from our virtual machine. Now in this pop up here, what Microsoft is actually doing is recommending that in order to simplify management of our security rules, they’re telling us that what we should do is associate the network security group to individual subnets, rather to specific interfaces on VMs. Because if you define a NIC network security group here for this VM, and then we create a Nic network security group for the next VM that we create, and the one we created for that, and the one after that, you now have a whole bunch of VMs with separate Nic network security groups that need to be managed by creating a single network security group and assigning it to the subnet that hosts those VMs you only have one to manage.</p>
<p>For this exercise, we’ll let it create a basic Nic network security group for us. Then we have the same option here for public inbound ports. If we hover over the icon here, this setting tells us what we can allow into our VM. We can either block everything, or we can allow selected ports. We’re going to allow RDP by default. And again, we get the notice here that this is a bad idea. That’s fine, it’s a test environment. And then if we hover over accelerated networking, we can see that what we can do here is enable low latency and high throughput networking for this network interface. I’m not worried about that right now for this demonstration, so we’ll leave this set to the default on.</p>
<p>And then under load balancing, if we change the option here to yes, we can configure a load balancer for our virtual machine. Now this load balancer doesn’t get us everything we want unless we add a second or third or fourth VM to that load balancer. We’re not going to do any load balancing for this demonstration. So we’ll turn load balancing off.</p>
<p>If we click next for management here, we can see that we have some management information we can provide, we can see that Azure is telling me that I already have Azure Security Center, protecting my subscription. And then I can also down here, configure some monitoring and some identity-related settings.</p>
<p>Further down, we can configure the auto-shutdown and backup. So let’s bounce back up here. And the boot diagnostics, if we hover over it allows you to capture serial output and screenshots of the VM. For example, when it’s booting up, this helps troubleshoot any issues that the VM has at boot up time.</p>
<p>The OS guest diagnostics allow you to capture metrics for every minute of the virtual machine is running. Now, because we have boot diagnostics on, we’re also prompted for a diagnostics storage account. This is because we need a storage account to host the data that diagnostics is going to dump out.</p>
<p>You’ll notice if I turn this off, we now have new monitoring, so we have no requirement for a storage account. If we turn boot diagnostics back on, it’s asking me for a diagnostic storage account. If I select the drop down, you can see I have a couple different ones that are available, but we have none in this resource group.</p>
<p>So what I’ll do is all allow this to create a new diagnostics storage account. The default option for OS guest diagnostics is off so we’ll turn this on. Now under the identity section here, we can configure a system-assigned managed identity and Azure Active Directory options, if we hover over the icon here, we can see that a system-assigned managed identity allows Azure resources to authenticate to cloud services like Key Vault, without needing to store credentials in any kind of code.</p>
<p>Essentially, if you use a system-assigned managed identity, permissions can be granted via the role-based access control right to the resource. We’re not going to use system-assigned managed identity here, nor are we going to use the option to log in with Azure Active Directory credentials.</p>
<p>If we hover over the icon here, we can see that this option allows us to use our corporate AD credentials to log into the VM enforce MFA and to enable access via our back roles. We can see that this image doesn’t support login with Azure Active Directory anyway, so it’s off. And then these last two options are pretty self-explanatory, we can configure auto shutdown, which allows us to configure the virtual machine to automatically shut down at a particular time of day.</p>
<p>If we click on here, we can specify the time that we want our VM to shut down, along with the timezone. We also have to tell Azure if we want a notification prior to shut down and where that notification should go. We’re not going to auto shut down this VM, so we’ll turn that back off and then of course, we have the backup option here, which allows us to configure our virtual machine to be backed up using Azure backup.</p>
<p>If we click on, we could then create the recovery services vault that Azure backup needs, and then we could create a backup policy. We’re not too worried about backup right now so we’ll leave this off and then we’ll go to advanced.</p>
<p>In this advanced section here, we can configure extensions, we can configure cloud in it, we can look at Azure dedicated hosts and we can configure proximity placement groups, and then select the VM generation we want to use. Extensions are used to provide post-deployment configuration and automation.</p>
<p>If we hover over the icon here, we can see that we can add new features, or even anti virus protection to the VM through an extension. For example, if we select an extension to install, we have a bunch of different windows features here or Windows applications or agents that we can install. If we wanted to install Microsoft anti-malware, we would select anti-malware and create it.</p>
<p>Now anti-malware is built into defender now so there’s no need for anti-malware, so we’ll close this out. But this is where you would select what you want to be installed on your VM at the time of deployment. We’re not going to use any extensions here, and then clouding it is a way to customize Linux VMs when they boot for the first time, this is a Windows VM so it’s telling us that the selected image doesn’t support cloud in it, makes sense.</p>
<p>Dedicated hosts allow you to provision a physical server within Azure Data Center. And that physical server is dedicated to your specific Azure subscription. When you configure a dedicated host, what you’re doing is ensuring that only VMs from your subscription run on that host, rather than have them shared out across other customers within the Azure landscape.</p>
<p>Now we’ve got a little icon here that tells us that we can’t even use dedicated hosts because we’re using an availability set. So keep that in mind, if you deploy in an availability set you can’t use dedicated hosts. And then the proximity placement group is something we talked about earlier, it allows you to group those Azure resources physically closer together within the same region.</p>
<p>Under proximity placement group, we have a notice here that the selected availability set is not in a proximity placement group. It’s telling us here that if we want to use a proximity placement group, we either can’t use an availability set or we need to create a new availability set and this is because the existing one isn’t already in the proximity placement group. We’re not using a proximity placement group so I’m not worried about it. And then lastly we have the VM generation.</p>
<p>The generation two VMs as you can see here, support features like UEFI-based boot architecture, higher memory and larger OS disk size limits. If we hover over VM generation here, we can see here that our choice to create a generation one or generation two VM is going to depend on the OS and the boot method we want to use.</p>
<p>The key takeaway here is that generation two VMs support most 64-bit versions of Windows, and more current versions of Linux and FreeBSD. We’ll leave this set to gen one and then we’ll go into tags. And this is where you can tag your machines. Let’s say you have a department that needs five VMs, what you can do here is create a tag called department, which I’ve already created in a previous demonstration for another lab and then what we could do is specify that this VM is for the finance department.</p>
<p>Tagging is a good way to bill back within an organization. So for example, if the finance department asks for 15 virtual machines for some cockamamie application, then you can tag all 15 of those VMs with the Finance Department tag so when it comes time to pay the Azure bill, you can go back to the finance department and say hey, back up for these 15 VMs you asked for.</p>
<p>So it allows you to group your VMs for billing and for management, and for better reporting. So we’ll leave this tagged at the finance department and then we can review and create our virtual machine. At this point, we get the validation and Azure is telling us we’re good to go but it is giving us a warning here, that again, we have RDP open to the internet.</p>
<p>It’s obviously a recurring theme, because they don’t want you opening your machines to the internet over RDP, unless you’re just doing testing. So we can review our settings here and then if we’re happy with our settings, we can click Create.</p>
<p>The deployment of a virtual machine usually takes a good 15 or 20 minutes but what I’ll do here is I’ll call it a wrap because in the next lesson, we’re going to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-linux-virtual-machine-via-the-azure-portal/">deploy a Linux machine</a>. So before we kick off the Linux deployments, I’ll show you the running VM that we’ve created in this demonstration.</p>
<p>So let’s call it a wrap and I’ll see you over there.</p>
<h1 id="DEMO-Deploying-and-Connecting-to-a-Linux-Virtual-machine-via-the-Azure-Portal"><a href="#DEMO-Deploying-and-Connecting-to-a-Linux-Virtual-machine-via-the-Azure-Portal" class="headerlink" title="DEMO: Deploying and Connecting to a Linux Virtual machine via the Azure Portal"></a>DEMO: Deploying and Connecting to a Linux Virtual machine via the Azure Portal</h1><p>Hello and welcome back. In the previous lesson, we walked through the process of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-windows-virtual-machine-via-the-azure-portal/">creating a Windows virtual machine</a>. What we’re going to do here is deploy a Linux VM. Now, what we’re not going to do in this demonstration is walk through all of the individual settings, like we did in the Windows VM demonstration, because, frankly, I’ve already shown them to you. But what I will do is point out the differences along the way.</p>
<p>One thing we are going to focus on is the authentication method for this VM, because instead of using RDP, we’re going to use SSH. And as part of that authentication process, we’re going to set this VM up so that it can use SSH keys for authentication versus a username and password. Part of that process will require us to use PuTTYgen to create the SSH keys, and then we’ll have to use PuTTY to connect to the VM using those SSH keys.</p>
<p>So, let’s jump in here. On the screen, I’m logged into my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> Portal, and I’m in my VM course resource group, like I was in the previous demonstration. You can see here we have our VMO 1, that eventually spun up. And if I select it here, you can see that it stopped.</p>
<p>I don’t leave my VMs running because it gets expensive, especially when I’m not doing anything with them. So, we’ll go back out to our VM course resource group here. And what we’ll do is we’ll deploy our Linux VM, just like we did for our Windows VM. After clicking Add there, we can either search the marketplace or we can select the Ubuntu server 1804 LTS. We’ll go ahead and deploy Ubuntu server.</p>
<p>You can see immediately that the screens are almost identical to that of the Windows VM. So, we’re going to bypass a lot of these options, kind of skip over them. You’ve already learned this stuff in the last demonstration, so I don’t want to bore you by going through them all over again. So, let’s kick things off.</p>
<p>We’re going to deploy into the lab subscription and the VM course resource group. We’ll call this new VM VM02. And we will deploy into central US, along with all of my other resources. And for this demonstration, I’m going to leave the availability options set to no infrastructure redundancy required.</p>
<p>If I select the drop down, I do have the option of availability zone or set. But since I already showed you how to add this to an availability set, we’ll leave this set to no infrastructure. We can see our image is Ubuntu server, and we will not be using a spot instance.</p>
<p>For this demonstration, we’ll leave the default size alone, which is one CPU and three and a half gig of RAM, but down here in administrator account, this is where we’re going to make some changes. You can see we have two different authentication types. We can use an SSH public key or a password.</p>
<p>If I select password here, I’m prompted, just like I was for a Windows VM, to enter a username and password for the administrator account. What we’re going to do though is make things fun by using an SSH public key. By selecting SSH public key, we’re going to use a key to authenticate.</p>
<p>Now, even though we specify SSH public key, we still need to provide a username. And in this SSH public key box, we need to paste in a public key. If we hover over the icon here next to public key, we can see that we need to provide an RSA public key in either a single line format or in multi line PEM format. We can generate SSH keys by using the SSH key Gen on Linux and OSX, or via PuTTYgen on Windows.</p>
<p>Since I’m running Windows, we’re going to use PuTTYgen. So, let me drag my PuTTYgen key generator over here. And don’t worry, at the end of this demonstration, I’ll provide a link that you can use to download PuTTYgen. It’s a free tool. So, what I’m going to do here is I’m going to use my PuTTY key generator to create a public key and private key that we’ll use to authenticate to our VM later on.</p>
<p>Now, if we hover over the icon here next to public key, we can see that we need to provide an RSA key. So, to generate our RSA key here, we’re going to ensure that the type of key to generate is set to RSA, and then we’ll click Generate. What we need to do then is move our mouse around here in this box. And what that does is generates a key based on those random movements. So I have my public key here that’s been generated based on my mouse movements. This public key here is what we’re going to paste into this SSH public key box. But before I do that, I want to protect my keys with a passphrase, and then I want to save both the public and private keys so I don’t lose them.</p>
<p>So, we’ll go ahead and create a passphrase to protect my key. And we’ll confirm it. And then, what I’ll do here is I’ll save my public key. Now, what I also want to do is save the private key. So, now that I have my keys saved, what we’ll do here is we’ll select my public key and we will paste it into our public key box.</p>
<p>So, now that we have our username and public key created, what we’ll do here is leave the inbound port rules at their defaults. You can see here, we have the notice about open access just like we did with RDP, but in this case, we’re allowing SSH. Let’s go ahead and click forward to disks. And we can see the disks page is the same as it was for our Windows VM.</p>
<p>So, we’re not going to do anything here. For this demonstration, I am not going to create a data disc. We’ll leave our OS disk type at premium SSD for this demonstration, and then we’ll go ahead and click into networking. The networking page is also the same as it was for the Windows VM. We need to define our network information, our NIC and inbound information. And then, our load balancing options.</p>
<p>You can see here that the virtual network has already defaulted to the virtual network that was created when we created the Windows VM. It also defaulted to the default subnet for that virtual network. So, we’ll leave those alone. And as it did with the Windows VM, it’s going to create a new public IP for me so I can connect to it over the internet. We’ll leave the security information alone at its defaults. And this particular VM doesn’t support accelerated networking.</p>
<p>So, the accelerated networking option is set to off. Like we did with the Windows VM, we’ll leave load balancing turned off. And we’ll go to management. And we can see the management page is the same as it was for Windows. There is nothing new here. We can see for our diagnostic storage account that it’s defaulting to our VM course diag storage account that we created when we created the Windows VM as well.</p>
<p>This is because this VM course diag storage account is in the same resource group as the VM we’re creating. We’ll go ahead and leave system-assigned managed identity turned off, as well as login with Azure Active Directory credentials.</p>
<p>So, let’s go ahead and click Advanced. And we can see the advanced page is basically the same as well as it was for Windows. But I do wanna point out here, if I select an extension here under extensions, the list of extensions I get are all for Linux machines. I’m not going to get Windows extensions here. Everything I see here is going to be for Linux.</p>
<p>When I deployed the Windows VM, I got windows resources. So we’re not going to install any here. But what I do want to point out is that cloud-init, while it wasn’t germane to a Windows VM, it is germane to a Linux VM. If we click on Learn More here and open it up in a tab, we can see all the information about cloud-init. We’re not going to get into cloud-init here because it’s frankly a little more advanced than what the intent of this course is, but essentially what this cloud-init is used for is to configure a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">virtual machine</a>, or even virtual machine scale sets, as you see here, at the time of provisioning. We can see that cloud-init configurations are run on first boot once all of the VM resources have been provisioned.</p>
<p>We’re not going to use cloud-init to do any configuration, but I wanted to show you that this exists, and you should probably check it out, just to read up on it so you understand it. But as far as basic deployment of a VM, this isn’t critical to know. So, I’m going to close this out and go back in. We are not going to use host groups, nor are we going to use proximity placement groups. We talked about these earlier, so I’m not going to go over them again. And we’ll deploy a Gen 1 VM here.</p>
<p>I should point out the note at the bottom here, which is actually kind of interesting. The Gen 2 VMs do not support some Azure platform features, including Azure disk encryption, which is kind of surprising.</p>
<p>We’re deploying our VM in a Gen 1 fashion. So, we’ll go ahead and click Next through tags. And we’ll do the same thing we did for Windows. We’ll tag it with a department tag. And we’ll call it finance. If we click review and create here, we get the validation passed banner here. And again, we get another warning that we have SSH open to the internet, giving us the whole speech that we shouldn’t do that, that’s fine.</p>
<p>Once this validation completes, we can scroll down to the bottom and click Create. And what this will do is deploy our new VM. We can see that our deployment has completed. And we’ll go ahead and click Go To Resource here. From our overview page here we can see that our VM is running.</p>
<p>So, at this point let’s connect to our virtual machine over SSH using PuTTY. Let me drag my PuTTY Client over. And again, I’ll provide you with a link at the end that you can use to download PuTTY and PuTTYgen.</p>
<p>Now, from my PuTTY screen here, what I need to do is plug in the IP address of the VM I’m trying to connect to. We’re going to connect over Port 22 and use SSH. Now, before we connect to our VM we need to expand SSH down here at the bottom, and then go into the Off page. Since we’re using SSH keys to authenticate, I need to browse for the private key that matches the public key that we created for the VM. And this is the private key that I saved off earlier. So, we’ll browse, and we’ll go into keys here, and there is my private key that I saved earlier. At this point, I can click Open.</p>
<p>Now, let me drag over the security alert I got here. What PuTTY is doing is it’s telling me that the host key on the server hasn’t been cached in my local registry. This is essentially a security key saying hey, do you know what you’re connecting to and are you sure that’s what you want to do? And basically it tells me here if I trusted click Yes, if not click No. Well, I trust it because it’s the VM that I deployed. So, we’ll click Yes. And then, what I’ll do is I’ll drag over the PuTTY screen.</p>
<p>Now, I’m being prompted to login as, so I need to provide my username. When I press enter here, it’s going to authenticate with the public key, and then it’s going to prompt me for that passphrase that I configured.</p>
<p>Remember, I had to create that passphrase in PuTTYgen when I created the key. That’s what it’s asking for here. And at this point, we can see that I’m logged into VMO 2 as VM Admin. So, with that, I’ve created a VM that runs Linux. I’ve configured it to use SSH keys for authentication. I’ve created the SSH key pair. And then, I’ve used PuTTY to log in via SSH using that key pair.</p>
<p>So at this point, you should now know how to provision a basic Linux VM, how to configure authentication through SSH, and how to use PuTTY to connect over SSH.</p>
<h1 id="Section-Three-Conclusion"><a href="#Section-Three-Conclusion" class="headerlink" title="Section Three Conclusion"></a>Section Three Conclusion</h1><p>Congratulations, you’ve come to the end of deploying and connecting as your VMs. Let’s review what you’ve learned. In this section, you learned how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/creating-and-connecting-to-azure-vms/">create and connect to Azure virtual machines</a>. You learned how to deploy and connect to a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-windows-virtual-machine-via-the-azure-portal/">Windows virtual machine</a> using the Azure portal as well as how to deploy and connect to a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-linux-virtual-machine-via-the-azure-portal/">Linux VM</a>. You also learned how to create SSH keys using PuttyGen and how to use those keys to connect to the Linux VM over SSH using putty.</p>
<p>At this point, you should have a good understanding of how to deploy both Windows VMs and Linux VMs using the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal.</p>
<h1 id="Section-Four-Introduction"><a href="#Section-Four-Introduction" class="headerlink" title="Section Four Introduction"></a>Section Four Introduction</h1><p>Welcome to basic management tasks. This section of the course will be the last. Instead of lectures, we’re going to focus our efforts on some demonstrations. The demonstrations that I perform in this section will teach you how to perform some basic <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">virtual machine</a> management tasks. You learn how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-starting-and-restarting-a-vm/">start</a> and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-stopping-a-vm/">stop VMs</a>, using the Azure portal. And you’ll learn how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-redeploying-a-vm/">redeploy VMs</a> using the Azure portal. We’ll wrap things up by <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-resizing-a-vm/">resizing a virtual machine</a>, using the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal.</p>
<p>So now that you know what we’re going to cover, let’s dive in.</p>
<h1 id="DEMO-Starting-and-Restarting-a-VM"><a href="#DEMO-Starting-and-Restarting-a-VM" class="headerlink" title="DEMO: Starting and Restarting a VM"></a>DEMO: Starting and Restarting a VM</h1><p>Hello, and welcome back. In this brief demonstration, I’m going to show you how to simply start and stop a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">virtual machine</a>. And I’m going to explain a little bit about what happens during these processes.</p>
<p>On the screen here, you can see I’m logged into my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal, and I’m on the Overview page for VMO2. The virtual machine is currently in the stopped state, and it’s deallocated. Now, what this means is that this VM will not incur any compute charges. And it won’t incur compute charges because it’s in the deallocated state.</p>
<p>Now had this VM been in the stopped state, then this VM, although not running, would continue to incur compute charges. So that’s an important difference to recognize when you have a virtual machine in the stopped state. If you want to be sure that your VM isn’t incurring charges, you need to make sure that it’s in the deallocated state here.</p>
<p>Oftentimes, if you shut down the virtual machine from the OS from within the OS using the shutdown command, you’ll find that your VM sits in that stopped state, but continues to be allocated and running up charges. So anytime you stop a machine, you want to do it through the Azure portal or maybe through PowerShell.</p>
<p>So I have this machine in the stopped state. What I’m going to do here is simply start him up by clicking Start in the top menu here. We can see that the state of our VM is now shown as running. So at this point, it’s obviously incurring compute charges. In situations where I simply need to reboot my VM, instead of going through a complete stop, deallocate, start process, I can use the restart process here.</p>
<p>So let’s go ahead and restart the VM. It asks me if I’m sure. And we’ll go ahead and click Yes. Now when we restart a VM, it never gets deallocated. Now that’s important because if you have dynamically allocated public IPs, or private IPs for the VM, when a VM is deallocated, those IP addresses can change.</p>
<p>Since a restart doesn’t deallocate the VM, those IP addresses won’t change. And we can see here that the restart has already completed and our VM is running. In the next brief lesson, I’ll show you the process of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-stopping-a-vm/">stopping a VM</a> and explain what happens when that VM is stopped.</p>
<h1 id="DEMO-Stopping-a-VM"><a href="#DEMO-Stopping-a-VM" class="headerlink" title="DEMO: Stopping a VM"></a>DEMO: Stopping a VM</h1><p>Hello and welcome back. In the previous lesson, we walked through the process of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-starting-and-restarting-a-vm/">starting a VM</a> and restarting a VM. And I explained a little bit of the things that happen during those processes. In this demonstration here, I just want to show you what happens during a VM stop.</p>
<p>So on the screen, I’m looking at the overview page for VM02. We can see that the VM is in the running state. To stop the VM through the portal, I simply click stop at the top here and then I can see I get this warning about my public IP address. What’s happening here is Azure’s telling me that once this machine is stopped, it’s going to go into the deallocated state and when that happens, the dynamic public IP address can go away. And if I cancel out of here, I can show you why this happens.</p>
<p>Back on the overview page, if I click the IP address that’s associated with my VM, the public IP address, we can see that the assignment is dynamic. So a dynamic public IP can go away and reset to another value when a machine is stopped and deallocated. Once that machine comes back up, that IP address can change.</p>
<p>Now if I set this IP to static, what’ll happen is the VM may be rebooted. Now let’s discard this and we’ll go back out to our VM02 virtual machine. Now if we go back into the process of stopping it, again, it asks us if we want to reserve it. We’ll tell it yes and then we’ll stop it.</p>
<p>If we go ahead and click our IP here, we can see that Azure has now set it to static for us. So now, that IP address will persist throughout stops and restarts even though the VM deallocates.</p>
<p>If we bounce back to our VM02, we’ll refresh here, we can see that it’s deallocating and now that it’s in a stopped state, we can see the IP address hasn’t changed. If I start him back up, we can see the IP remains the same. So with that, you now know how to stop a VM from the Azure portal and you know a little bit about what happens with the public IP address.</p>
<p>Now one thing I do want to mention is that when a VM stops, there’s a process that happens under the covers that you don’t see. What happens when you click stop here, you’re sending that stop signal to Microsoft Azure. At that point, what <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a> does is it sends a signal to the guest OS on that virtual machine and it gives that guest OS a chance to shut down. It’s usually around 30 seconds or so.</p>
<p>So what it’ll do is it’ll allow that VM to shut down the OS. Once that OS is shut down, then Azure will come back and actually stop the VM and deallocate it. So that’s why when you stop a VM and start it back up, you won’t typically see any kind of errors revolving around dirty shutdowns because that’s what’s happening.</p>
<p>You’re telling Azure to shut it down, Azure’s going to the OS saying hey we’re gonna power you off, go ahead and do your shutdown routine. The OS does the shutdown, Azure then continues through and then does the shutdown, does the stop, and then does the deallocation. So that’s kind of the process that occurs when you stop a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">virtual machine</a>.</p>
<h1 id="DEMO-Redeploying-a-VM"><a href="#DEMO-Redeploying-a-VM" class="headerlink" title="DEMO: Redeploying a VM"></a>DEMO: Redeploying a VM</h1><p>Hello, and welcome back. In this demonstration, I am going to show you how to redeploy a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">virtual machine</a>. Now what happens when you redeploy a virtual machine is essentially the VM is moved to a new Azure node on the underlying hardware. You would typically redeploy a virtual machine if you’re having trouble SSH into it, or RDP into it. Or if an application is having issues with connectivity.</p>
<p>Before that move happens, the VM is powered off and then powered back on that new node. I should point out that all the configuration for that VM remains the same. The only thing that changes is the underlying physical node that the VM relies on.</p>
<p>On the screen here, I’m logged in to my Azure portal and I’m at the overview page for VMO two, and this is my Linux machine. To redeploy this VM, all I need to do is scroll down to near the bottom. Under support and troubleshooting, and you’ll have this option to redeploy.</p>
<p>If we click on redeploy here, what I’m getting here is a note from Azure telling me that if I redeploy my virtual machine, it’s going to migrate it to a new host. It also warns me that the VM is going to be <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-starting-and-restarting-a-vm/">restarted</a>. And if there’s any data on the temporary drive, we’re going to lose that. It also warns me that during a redeployment, the VM is unavailable, which makes sense, you’re moving it to another host.</p>
<p>To begin the redeployment, we simply click the blue redeploy button down here at the bottom, and it begins the redeployment process. This process doesn’t take long, but it does cause an outage. So you need to keep that in mind in a production environment.</p>
<p>If we click on our bell up here, we can see that the redeployment is occurring. If we scroll over and go back into our overview, you can actually see that the redeployment is already finished. If we click on our overview here, we can see our VM is already running. There’s nothing in the overview page that will tell you anything is different. It’s just the underlying hardware that’s changed.</p>
<p>So there’s nothing you can see here. But what <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> has done is taken that machine, moved it to new hardware and then brought it back up on that new hardware. And that’s pretty much it. And like I said, the only time you’re going to really encounter redeployment in a production environment, will be situations where you can’t remote to that VM or if the application loses connectivity.</p>
<h1 id="DEMO-Resizing-a-VM"><a href="#DEMO-Resizing-a-VM" class="headerlink" title="DEMO: Resizing a VM"></a>DEMO: Resizing a VM</h1><p>Hello and welcome to resizing a VM. In this demonstration, I’m going to show you how to perform a basic resize of a Windows virtual machine. On the screen here you can see I’m logged into my <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal and I have the Overview page on screen here for my VM01 virtual machine, which is a Windows Server 2016 machine.</p>
<p>Now when you create a VM, the size that you choose isn’t permanent. You can actually scale the VM up or down by changing the size of that VM, if necessary. Now there are a few caveats when resizing VMs.</p>
<p>For starters, if the new VM size that I want to change my virtual machine to whether it’s either scaling it up or scaling it down if that size isn’t available on the underlying hardware cluster in Azure, what I would have to do is deallocate my VM first.</p>
<p>Now as long as my chosen size, the new size that I want to go to, is available on that cluster, then I don’t have to deallocate anything. The other caveat is that if my current virtual machine uses premium storage, I need to make sure that my new size that I want to resize that VM to, is an S version of the size. I need to do this so that the new VM size supports the premium storage that I’m using.</p>
<p>So for example here, the size of my VM as it’s currently composed, is Standard DS2 v2. You notice the S here in the size. If I were to try and resize this VM to Standard D2 v2 or D1 v2 or some other standard size without the S, I couldn’t do it because the new size doesn’t support any premium storage that I might be using. So keep that in mind, if you’re going to resize a virtual machine, you need to make sure that if you’re using premium storage, that the new size that you choose, can also support that premium storage.</p>
<p>Now one other caveat I want to mention about resizing a VM, is how it relates to an availability set.</p>
<p>Now if we click on Availability set here for VM01, we can see I have it in MYAVAILSET, so this virtual machine is in an availability set. If the new size that I want to resize my VM to, is not on the hardware cluster, again it’s not available, what I would have to do is take all VMs that are in that availability set, now in this case I only have the one, but if I had say two or three or four machines in an availability set, if I wanted to resize this one VM and the new size wasn’t included or wasn’t offered or available on the current cluster that’s hosting the VM, what I would need to do is not only deallocate this VM to resize it, but I’d also have to deallocate all of my other VMs and possibly resize those as well.</p>
<p>So there’re the three caveats for resizing a VM. And just to recap, if I resize a VM to a size that’s not available on the underlying cluster, I need to deallocate the VM first before resizing it. When I do resize the VM, if the current VM supports or is using, I should say, premium storage, the new size that I select also needs to support premium storage that only makes sense. </p>
<p>And then lastly, if I’m resizing a VM in an availability set that contains other VMs, if the new size is not available on the underlying cluster, not only do I need to deallocate the VM that I’m resizing, but I also need to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-stopping-a-vm/">stop</a> and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-resizing-a-vm/">resize</a> the other VMs in the availability set in the same fashion.</p>
<p>So let’s go ahead and perform a basic resize here for VM01. To do this it’s pretty straightforward. From the Overview page, what I can do here under Settings is select Size. If I choose Size here, we can see all of the similar VM sizes that are available to me based on my default filters here.</p>
<p>So what’s happening here, we’re looking at all of the smaller VMs that are general purpose and that support Premium disk. So from here we can see our current size is DS2 v2. What we’ll do here is resize this virtual machine to a DS3 v2, so we’ll select DS3 v2 and click Resize.</p>
<p>If we open the Overview page here, we can see that the VM is already starting back up as a DS3 v2. We can see that the resize action is still occurring, but we’re already in the process here. Go ahead and refresh here. And we can see now our VM is now running, but it’s now a Standard DS3 v2 virtual machine with 4 CPUs and 14 gig of RAM. And that’s all there really is to it.</p>
<p>In this case, my new size was available on the underlying cluster so I wasn’t prompted to deallocate the VM in any way. And remember that’s important because of the public IP address. If you have a dynamic address, you could lose that if you’re deallocating a machine. But in any event, that’s the process for resizing a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">virtual machine</a> using the Azure portal.</p>
<h1 id="Section-Four-Conclusion"><a href="#Section-Four-Conclusion" class="headerlink" title="Section Four Conclusion"></a>Section Four Conclusion</h1><p>Congratulations, you’ve come to the end of basic management tasks. Let’s review what you’ve learned.</p>
<p>In this section you watched a handful of demonstrations that taught you how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-starting-and-restarting-a-vm/">start</a> and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-stopping-a-vm/">stop VMs</a>, how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-redeploying-a-vm/">redeploy a VM</a>, and how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-resizing-a-vm/">resize a VM</a>.</p>
<p>At this point you should be able to comfortably handle <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">basic VM management</a> tasks through the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal.</p>
<h1 id="Course-Conclusion"><a href="#Course-Conclusion" class="headerlink" title="Course Conclusion"></a>Course Conclusion</h1><p>Congratulations. You’ve come to the end of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/course-introduction/">Getting Started with Azure virtual Machines</a>. Let’s review what you’ve learned.</p>
<p>We started things off by covering what <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">virtual machines are</a> and what <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/related-resouces/">resources</a> are necessary before deploying a virtual machine. We also covered <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/azure-vm-pricing/">Azure VM pricing</a> and the different <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/virtual-machine-options/">virtual machine options</a> that are available to you.</p>
<p>We then took a look at the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/section-two-introduction/">different high-availability features</a> that are available. You learned about <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/availability-sets-and-availability-zones/">availability sets and availability zones</a>. You also got to see a demonstration of how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-create-an-availability-set/">create an availability set</a>, using the <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> portal.</p>
<p>Later on, we dove into the deployments of both <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-windows-virtual-machine-via-the-azure-portal/">Windows virtual machines</a> and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-deploying-and-connecting-to-a-linux-virtual-machine-via-the-azure-portal/">Linux virtual machines</a>. You saw a demonstration of how to deploy each, and how to connect to each. You learned how to connect to a Windows VM using RDP and how to connect to a Linux VM via SSH, using putty.</p>
<p>We wrapped things up by covering <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/section-four-introduction/">basic management tasks</a>. You learned how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-starting-and-restarting-a-vm/">start VMs</a>, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-stopping-a-vm/">stop VMs</a>, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-redeploying-a-vm/">redeploy VMs</a>, and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/demo-resizing-a-vm/">resize VMs</a>.</p>
<p>At this point, you should have a basic understanding of Azure virtual machines, how to deploy them, how to configure them, and how to connect to them. You should also know how to perform basic VM management tasks.</p>
<p>To learn more about Azure virtual machines, you can, and should, read Microsoft’s published documentation. Be sure to also watch for new <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/courses/">courses</a> on Cloud Academy, because we’re always publishing new ones. Be sure to give this course a rating, and if you have any questions or comments, please let us know. Thanks for watching and happy learning!</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Synchronize-Files-Across-Servers-with-Azure-File-Sync-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Synchronize-Files-Across-Servers-with-Azure-File-Sync-10/" class="post-title-link" itemprop="url">AZ-104-Synchronize-Files-Across-Servers-with-Azure-File-Sync-10</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:21:55" itemprop="dateCreated datePublished" datetime="2022-11-18T20:21:55-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:46:02" itemprop="dateModified" datetime="2022-11-22T11:46:02-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Synchronize-Files-Across-Servers-with-Azure-File-Sync-10/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Synchronize-Files-Across-Servers-with-Azure-File-Sync-10/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Configuring-Azure-Blob-Storage-Lifecycle-Management-9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Configuring-Azure-Blob-Storage-Lifecycle-Management-9/" class="post-title-link" itemprop="url">AZ-104-Configuring-Azure-Blob-Storage-Lifecycle-Management-9</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:21:54" itemprop="dateCreated datePublished" datetime="2022-11-18T20:21:54-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:43:54" itemprop="dateModified" datetime="2022-11-22T11:43:54-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Configuring-Azure-Blob-Storage-Lifecycle-Management-9/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Configuring-Azure-Blob-Storage-Lifecycle-Management-9/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Configuring-Azure-Blob-Storage-Lifecycle-Management"><a href="#Configuring-Azure-Blob-Storage-Lifecycle-Management" class="headerlink" title="Configuring Azure Blob Storage Lifecycle Management"></a>Configuring Azure Blob Storage Lifecycle Management</h1><p>Welcome to “Configuring Azure Blob Storage Lifecycle Management”. I’m Guy Hummel. To get the most from this course, you should already have some knowledge of Azure Blob Storage. In this short course, I’ll explain how you can save money by setting up lifecycle management policies to automatically move your blobs to less expensive access tiers when certain conditions are met.</p>
<p>First, let’s review Azure Blob Storage access tiers. The Hot tier is designed for blobs that will be accessed frequently. This is the default tier. It has the most expensive storage costs but the lowest access costs.</p>
<p>The Cool tier has lower storage costs but higher access costs. That’s why you should only put infrequently accessed blobs in the Cool tier. If you were to put frequently accessed blobs in this tier, then the access costs would very quickly outweigh the lower storage costs. Also, you have to leave data in the Cool tier for at least 30 days. If you delete it or move it to a different tier in less than 30 days, you’ll have to pay an early removal penalty.</p>
<p>The Archive tier has the lowest storage costs and the highest access costs. It’s intended for data that you rarely need to access, such as long-term backups. To avoid an early deletion penalty, you need to leave data in the Archive tier for at least 180 days. It’s significantly different from the hot and cool tiers because you can’t access your data right away when you need it. That’s because it uses offline storage. So you have to wait for your data to be rehydrated before you can access it. This process can take up to 15 hours.</p>
<p>Since there’s a big difference in cost between the different tiers, it’s a good idea to set up an automated system to move your data between tiers when the time is right. For example, you might have monthly reports that get accessed frequently in the first month after they’re created, are accessed much less frequently for the next 11 months, and are rarely accessed after that but need to be retained for a total of 10 years for compliance reasons.</p>
<p>In this case, you might want to create a policy that:</p>
<ul>
<li>Moves these reports from the Hot tier to the Cool tier after 30 days,</li>
<li>Moves them from the Cool tier to the Archive tier when they’re 12 months old,</li>
<li>And deletes them from the Archive tier after they’re 10 years old.</li>
</ul>
<p>Notice that I said 12 months instead of 11 months for the second one because the blobs would have already been in the Hot tier for 1 month before being moved to the Cool tier, so they would be 12 months old. I’ll show you two different ways to set up these rules: using the Azure portal and using the command line.</p>
<p>First, let’s use the portal. I’ve already created a storage account and a blob container. In the menu on the left, select “Lifecycle management”. This is where we create the rules we want. Notice that it says lifecycle management is only available for general-purpose v2 accounts and blob storage accounts. Since most storage accounts are general-purpose v2 accounts these days, you probably won’t need to worry about having the right account type.</p>
<p>Now click “Add a rule”. Let’s call it “LifecycleForReports”. We’ll leave the rule scope as “Apply rule to all blobs in your storage account”. We’ll leave the blob type as just “Block blobs”. Append blobs are used for files that frequently have new data appended to them, which likely wouldn’t be the case for our monthly reports.</p>
<p>You might not be familiar with the blob subtype. If you turn on blob versioning, then a copy of the blob will be saved every time the blob is modified. That way, you could retrieve a previous version of the blob if you needed to. Snapshots are similar except that you create them manually. If you don’t use either versioning or snapshots, then you can just leave “Base blobs” checked.</p>
<p>Okay, now we can click “Next” and define the rule. A rule needs to contain one or more conditions. The first condition we want to have is to move blobs to Cool storage after 30 days, so let’s change this to “If base blobs were created more than 30 days ago, then move to cool storage. Then we click “Add conditions” again to add the next one, which is to move blobs from Cool storage to Archive storage when they’re 12 months old. So, we’ll put 365 days since they were created.</p>
<p>Finally, we’ll click “Add conditions” again, and this time, we’ll say that after 3,650 days (which is 10 years if you don’t count leap years), then delete the blob.</p>
<p>Now we click “Add” and we’re done. However, this lifecycle policy won’t go into effect immediately. Azure only runs policies once a day, so it can take up to 24 hours before any actions triggered by a new policy will take place.</p>
<p>This example was pretty simple, but there are some other features we can use to customize it. First, we could create a rule that only applies to certain blobs. To do this, we’d need to create a filter. Technically, when we set the blob type to only block blobs, that was a filter, but we can also create a filter that looks at the name of a blob.</p>
<p>For example, suppose we want a lifecycle rule to only apply to blobs that start with the word “report”, then we’d select “Limit blobs with filters”. Now there’s a tab called “Filter set”. There are two types of filters we can apply: blob prefix and blob index match. The second one is more complicated and requires tagging your blobs before it’ll work. Blob prefix is the one we need for our example. We just need to type “report” in this field. And we have to click the Update button. Now the rule will apply to any blobs that start with those letters.</p>
<p>Here’s another change we can make. Suppose you don’t want a blob to be moved to the Cool tier until a certain number of days after the last time it was accessed rather than since it was created. You might have noticed that this wasn’t an option in the list of possible conditions, so how would we do it? First, we have to check the “Enable access tracking” box. Then, when we go back to the first condition, the list includes “Last accessed”, so we can select it. And click “Update”.</p>
<p>This visual interface makes it very easy to create lifecycle rules, but if you had to apply lifecycle policies to lots of different storage accounts, it would probably be faster to create a standard configuration and apply it using the command line. Then you wouldn’t have to keep pointing and clicking in the interface over and over again.</p>
<p>To do this, you need to create a JSON file that contains your rules. But this can be a bit of a daunting task, so there’s a shortcut you can use. Once you’ve created one or more rules in this interface, you can go to the Code View tab, and there’s the JSON code you need.</p>
<p>The rule definition is divided into two sections: the rule actions and the rule filters. For each of the conditions we created, it shows the action to take and the condition required to take that action. Here’s the one for moving blobs to the Cool tier. Here’s the one for moving to the Archive tier, and here’s the one for deleting blobs. In the filters section, it shows the blob type filter and the prefix match filter that we set.</p>
<p>If we wanted to change anything, we could actually edit it right here and click the Save button, which would apply the updated policy to this storage account. But in most cases, we’d probably want to download the code, modify it, and use the command line to apply it to other storage accounts.</p>
<p>So, we’ll click “Download”. Then, to avoid having to install the Azure command-line utility on your desktop, we can upload the JSON file to the Cloud Shell and run the command there. So, I’ll open the Cloud Shell. Then I’ll select “Upload”. Here’s the file we downloaded. It’s called “policy.json”.</p>
<p>I’m not going to modify anything, but I’ll show you what command you’d use to apply this lifecycle policy to a storage account. I put the command in the transcript below in case you want to try this yourself.</p>
<p>It starts with “az storage account management-policy create”. Then you specify the account name. My storage account is called “camonthlyreports”. Then you type “–policy” and the name of the JSON file. And finally, you tell it the resource group where your storage account resides. I called mine “camonthlyreportsrg”. Now hit Enter. It might not be obvious from this output, but it successfully applied the policy to that storage account. </p>
<p>And that’s it for Blob Storage lifecycle management. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer-8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer-8/" class="post-title-link" itemprop="url">AZ-104-Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer-8</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:21:52" itemprop="dateCreated datePublished" datetime="2022-11-18T20:21:52-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:43:36" itemprop="dateModified" datetime="2022-11-22T11:43:36-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer-8/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer-8/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer"><a href="#Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer" class="headerlink" title="Managing Azure Storage With AzCopy and Azure Storage Explorer"></a>Managing Azure Storage With AzCopy and Azure Storage Explorer</h1><p>Welcome to Managing Azure Storage with AzCopy and Azure Storage Explorer. I’m Guy Hummel. To get the most from this course, you should already have some knowledge of Azure Storage. I’ll show you two different ways of working with Azure Storage. If you prefer a graphical user interface, then you can use Azure Storage Explorer, which is an application that runs on Windows, MacOS, and Linux. If you’re comfortable with the command line, then you can use AzCopy. Let’s start with Azure Storage Explorer. First you need to download it from Microsoft. The URL for this page is in the transcript below. Select your operating system and click the ‘Download’ button. On a Mac, you just need to open the zip file and then run the Storage Explorer application. On Windows and Linux, you need to run an installation program. The first thing you’ll need to do is sign into your Azure Storage account. Unless you’re using a special Azure environment, leave this set to Azure and click ‘Next’.</p>
<p>It opens a browser tab and asks you to authenticate. I’m already logged in, so once I select my account, I’m authenticated and I can close this tab and go back to Storage Explorer. Over here, you can choose your subscription and your storage account. I have an account called camonthlyreports and a blob container in it called monthly-reports. When I click on the container, it shows me the blobs in it. I don’t have any blobs in this container which is why nothing shows up here. I’ll upload some files into it so we have something to work with. You can either upload a whole folder or individual files. If I were to choose folder, then it would create a virtual folder inside the container, which isn’t what I want in this case. So, I’m going to upload the files that are in the folder. I can select all of the files by holding down the ‘Shift’ key when I click the bottom one. That way they’ll all get uploaded at the same time.</p>
<p>Now all of the files are in the container. If you right click on one of the files, you can see that there are lots of options for what we can do with it. For example, we could copy it, or delete it, or change its access tier, such as if we wanted to move it to the cool tier. I’ll show you how to copy a blob to another container. First, let’s create a second container so we have a place to copy the blob to. If we right-click on blob containers, there’s an option to create a blob container. Let’s call it Copies. Now, if we go back to the first container, we can right-click on a file and select ‘Copy’. It’s not obvious that we did anything, but if we go to the second container, we can click the ‘Paste’ button and it’ll copy that blob into this container. You might have noticed something interesting down here. It says ‘Copy AzCopy Command to Clipboard’. It turns out that Azure Storage Explorer uses the AzCopy command when it needs to copy blobs. And if you want to see the actual command, you can click here.</p>
<p>Now it’s on the clipboard, so we have to paste it somewhere to see it. I’ll paste it to a text editor. It kind of looks like gibberish, doesn’t it? Well it’s not as bad as it looks. The basic command is just ‘azcopy copy’ then the URL of the source and the URL of the destination. So, why do you have to put ‘copy’ after ‘azcopy’? That’s because the AzCopy command can also do other things besides just copying files, so the name of the utility is a bit misleading. For example, if you wanted to delete a blob, you’d start the command with azcopy remove. Okay, so why are the URLs so long? That’s because the URL contains a shared access signature, or SAS. It’s the part after the question mark. A SAS gives access to resources in a storage account for a limited amount of time. You can generate a SAS yourself if you want to give someone access to a particular resource for, let’s say, the next week. But Storage Explorer generated a SAS for the source and a SAS for the destination for you.</p>
<p>You don’t have to use them though, because there’s another way to provide authentication. Azure Active Directory. If you have an Azure account that’s authorized to access the source and destination, then you don’t need to use shared access signatures. There’s something very important you need to know to get this to work though. Even if you’re the owner of the source and destination storage accounts, you could still get a permission error. You’re probably thinking, what? How is that possible? Well, it turns out that your Azure Active Directory account needs to have the Storage Blob Data Contributor role for the source and destination storage accounts if you want to copy blobs using AzCopy. In this example, I’m using the same storage account for both the source and the destination, so I only need to give myself the Storage Blob Data Contributor role for that storage account.</p>
<p>To see whether you have that role assigned to you or not, go into the storage account, select ‘Access Control’, and then click ‘View my access’. You can see that I have that role assigned to me, but if you don’t then click on the role assignments tab and assign it to yourself. Or if you don’t have permission to do that, then ask an administrator to do it for you. If that would be a problem, then you could use shared access signatures instead. Okay, now I’ll show you how to run the AzCopy command. I could install AzCopy on my desktop, but since it’s already installed in Cloud Shell, let’s use that instead. But we still need to do one more thing first. Type ‘azcopy login’ to authenticate. Then go to this URL and copy and paste this code. Then choose your Azure account and click ‘Continue’. All right, now we can finally try to copy a blob. First type azcopy copy, then put in the URL of the source blob.</p>
<p>This is the name of the storage account, this is the name of the container, and this is the name of the blob. Note that if we were including a shared access signature at the end of the URL, we’d need to put quotes around the whole thing, but since we’re not using a SAS, we don’t need to. Now put in the URL of the destination. If we wanted to give the blob copy a different name than the original one, we type a different name here. We could even leave the blob name out and just give the URL of the container where we want to copy the blob, but it doesn’t hurt to give the name. In the AzCopy command we got from Azure Storage Explorer, there were some options at the end. The first one was overwrite&#x3D;prompt. This means that if the command will overwrite a blob in the destination, then it should ask whether you actually want to overwrite it before doing so.</p>
<p>Since we’re copying the same blob that we already copied using Storage Explorer, this option will matter for our example. If we don’t include this option, then it’ll overwrite the blob by default. Let’s include this option so we can see what the prompt looks like. The next one is s2s-preserve-access-tier&#x3D;false. This tells it not to ensure that the access tier of the destination blob is the same as the one for the source blob. By default, this option is true. For our example, there’s no good reason to set this to false, so we can leave this option out entirely. The next one is include-directory-stub&#x3D;false. This is kind of an obscure option and it’s false by default anyway, so we can leave it out. The next one is recursive, which means that if you’re copying a folder from your local file system, it will recursively copy its subfolders as well. That’s not what we’re doing, so we can leave this out too. The last one is log-level&#x3D;INFO.</p>
<p>This refers to how much information is sent to the AzCopy log file and INFO is the default, so we don’t need to include this one either. Okay, let’s run it. There’s the prompt we were expecting that’s asking if we want to overwrite the blob. To say yes, type y. And it’s done. If you want to see all of the options that are available, you can type azcopy copy -h. But it’s easier to read if you go to this web page. Now after seeing that AzCopy is more difficult to use than Azure Storage Explorer, you might be wondering why you’d even use AzCopy. After all, Storage Explorer actually runs AzCopy under the hood, so you don’t have to use it yourself. Well, if you need to automate your copying activities, then you can write scripts that contain AzCopy commands. It’s also possible to do it by calling the Azure Storage Client Libraries in your code. They’re available for a variety of languages such as .NET, Java, and Python.</p>
<p>But if you want to put something together quickly, it’s much easier to use AzCopy. However, Azure Storage Explorer is better than AzCopy for general storage management because it supports more operations and storage types than AzCopy does. You can use it to manage not only blobs but also queues, tables, file shares also known as Azure Files, and Data Lake Storage Gen2. The Azure Storage Client Library support all of the storage types too, of course, but you have to write code to use them, so they’re not meant for doing storage management manually. AzCopy supports blobs, file shares, and Data Lake Storage Gen2, but it doesn’t support queues or tables, so it’s not as robust as Storage Explorer. And that’s it for AzCopy and Azure Storage Explorer. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks.</p>
<h1 id="1Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer"><a href="#1Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer" class="headerlink" title="1Managing Azure Storage With AzCopy and Azure Storage Explorer"></a>1<strong>Managing Azure Storage With AzCopy and Azure Storage Explorer</strong></h1><p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/products/storage/storage-explorer">Azure Storage Explorer</a></p>
<p>[Azcopy Copy](</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Managing-Azure-Storage-Accounts-7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Managing-Azure-Storage-Accounts-7/" class="post-title-link" itemprop="url">AZ-104-Managing-Azure-Storage-Accounts-7</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:21:51" itemprop="dateCreated datePublished" datetime="2022-11-18T20:21:51-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:47:56" itemprop="dateModified" datetime="2022-11-22T11:47:56-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Managing-Azure-Storage-Accounts-7/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Managing-Azure-Storage-Accounts-7/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Knowledge-Check-Introduction-to-Azure-Storage-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Knowledge-Check-Introduction-to-Azure-Storage-6/" class="post-title-link" itemprop="url">AZ-104-Knowledge-Check-Introduction-to-Azure-Storage-6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:21:49" itemprop="dateCreated datePublished" datetime="2022-11-18T20:21:49-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:45:22" itemprop="dateModified" datetime="2022-11-22T11:45:22-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Knowledge-Check-Introduction-to-Azure-Storage-6/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Knowledge-Check-Introduction-to-Azure-Storage-6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><object data="Knowledge-Check-Introduction-to-Azure-Storage.pdf" type="application/pdf" width="100%" height="600"></object></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/18/AZ-104-Introduction-to-Azure-Storage-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/18/AZ-104-Introduction-to-Azure-Storage-5/" class="post-title-link" itemprop="url">AZ-104-Introduction-to-Azure-Storage-5</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-18 20:21:48" itemprop="dateCreated datePublished" datetime="2022-11-18T20:21:48-04:00">2022-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-22 11:41:04" itemprop="dateModified" datetime="2022-11-22T11:41:04-04:00">2022-11-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AZ-104/" itemprop="url" rel="index"><span itemprop="name">AZ-104</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/18/AZ-104-Introduction-to-Azure-Storage-5/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/18/AZ-104-Introduction-to-Azure-Storage-5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Course-Introduction"><a href="#Course-Introduction" class="headerlink" title="Course Introduction"></a>Course Introduction</h1><p>Hi there. Welcome to Introduction to Azure Storage. My name is Thomas Mitchell and I’ll be taking you through this course.</p>
<p>I’m an Azure instructor at Cloud Academy and I have over 25 years of IT experience, several of those with cloud technologies. If you have any questions about this course, feel free to connect with me on LinkedIn, or send an email to <a href="mailto:&#115;&#x75;&#x70;&#112;&#111;&#x72;&#x74;&#x40;&#99;&#108;&#111;&#x75;&#x64;&#97;&#99;&#x61;&#100;&#x65;&#109;&#121;&#46;&#99;&#111;&#109;">&#115;&#x75;&#x70;&#112;&#111;&#x72;&#x74;&#x40;&#99;&#108;&#111;&#x75;&#x64;&#97;&#99;&#x61;&#100;&#x65;&#109;&#121;&#46;&#99;&#111;&#109;</a>.</p>
<p>This course is intended for those who wish to learn about the basics of Microsoft Azure storage.</p>
<p>We’re going to start things off with an introduction to azure storage. You’ll learn about the core storage services in Azure and about the different storage account types that are available. You also get to see a demonstration that shows you how to create a storage account in Microsoft Azure.</p>
<p>We’ll then take a look at the different storage services in a little more detail. We will start with blob storage, where you will learn what it is and what it offers. Next, will dive into Azure Files.</p>
<p>After covering Azure Files, we’ll dive into Azure queues. You’ll learn what Azure queues are and how to create a queue.</p>
<p>After learning about Azure queues, you’ll learn about Azure tables, where you will learn why and when to use Azure table storage.</p>
<p>We’ll wrap things up by taking an introductory look at Azure disks. </p>
<p>By the time you finish this course, you should have a solid understanding of the storage basics of Microsoft Azure.</p>
<p>We’d love to get your feedback on this course, so please give it a rating when you’re finished. If you’re ready to learn about Azure storage, let’s get started.</p>
<h1 id="Core-Storage-Services-in-Azure"><a href="#Core-Storage-Services-in-Azure" class="headerlink" title="Core Storage Services in Azure"></a>Core Storage Services in Azure</h1><p>Hello and welcome to core storage services in Azure. In this lesson, we will take a look at some of the core storage offerings, including blob storage, Azure Files, queue storage, table storage, and disk storage. However, before we get into the separate storage services, let’s take a look at some of the benefits of Azure storage.</p>
<p>Because the Azure storage platform is designed for virtually all modern-day data storage requirements, it was built to offer several key benefits. First and foremost, all Azure storage services are durable and highly available. Built-in redundancy keeps data safe in the event of underlying hardware failures within the Azure infrastructure. In addition to this redundancy, you can also cross multiple data centers and even multiple geographical regions. This provides protection against natural disasters or local failures at the data center level.</p>
<p>Because all data that gets written to Azure storage accounts is encrypted automatically, it is inherently secure as well. Azure also offers the ability to maintain fine-grained control over data access. </p>
<p>Azure storage offerings are also scalable and widely accessible. As I mentioned earlier, the Azure storage platform is designed to support all modern-day data storage requirements. That being the case, it’s designed to be massively scalable. You can access Azure data from anywhere in the world over HTTP or HTTPS. There are also numerous client libraries available for Azure storage in numerous languages. This means you can access Azure storage using things like .NET, Java, Python, PHP, and many others.</p>
<p>You can also access Azure storage through PowerShell scripting, through the Azure CLI, through the Azure portal, and through Azure Storage Explorer.</p>
<p>So now that you understand some of the key benefits of the core Azure storage services, let’s take an introductory look at each of them.</p>
<p>Let’s start with Azure blobs.</p>
<p>Azure blob storage provides object storage for the cloud. This offering has been optimized to support massive amounts of unstructured data. Unstructured data is data that does not fit a specific data model. For example, text and binary data would be the type of unstructured data that falls under blob storage.</p>
<p>Azure Files is essentially a fully managed file share system available in the cloud. You can access Azure Files through the typical SMB protocol. You can mount Azure file shares from Windows, Linux, and MacOS machines that reside both on-prem and in the cloud. You can even cash Azure file shares on Windows servers, using the Azure file sync service. This helps make data more accessible for remote offices.</p>
<p>Azure queue storage is a special type of storage service. It’s not meant for storing files. Instead, it’s designed for storing large numbers of messages. These messages are used in communications between the different components of a distributed application. Such messages can be accessed from anywhere in the world through authenticated calls via HTTP or HTTPS. Each queue message can be up to 64 KB in size. A typical queue can contain millions of messages.</p>
<p>Azure table storage is a storage offering intended for the storage of structured NoSQL data. It offers a key&#x2F;attribute store and a schema-less design. The schema-less design of Azure table storage allows you to more easily adapt the data to the needs of your business or application.</p>
<p>Lastly, let’s take a look at Azure managed disks. Azure managed disks are essentially block-level storage volumes. These storage volumes, which are managed by Azure, are used, to provide storage capabilities for virtual machines. A managed disk is much like a physical desk that you would see in an on-prem server. However, it’s virtualized. There are several types of disks available in Azure. They include ultra disks, premium SSD disks, standard SSD disks and standard HDD disks. We will touch on these in more detail later on.</p>
<p>So, to wrap things up for this lesson, let’s review. There are essentially five different core storage services available in Microsoft Azure. They include Azure blobs, Azure Files, Azure queues, Azure tables, and Azure disks. Each of these storage services are accessed through an Azure storage account. Over the next several lessons, we will dive into storage accounts and into the details of each core storage service in Microsoft Azure.</p>
<h1 id="Storage-Account-Types-in-Azure"><a href="#Storage-Account-Types-in-Azure" class="headerlink" title="Storage Account Types in Azure"></a>Storage Account Types in Azure</h1><p>Hello and welcome to storage account types in Microsoft Azure. In this lesson, we are going to take a look at the different types of storage accounts that are available when it comes time to provision storage in your Azure subscription.</p>
<p>Before we get into the different types of storage accounts. Let’s talk a little bit about what a storage account is and what it’s used for. A storage account in Azure can be viewed as the container, so to speak, that houses all of your Azure storage data objects. A storage account can host blobs, Azure Files, queues, tables, and disks.</p>
<p>When you provision a storage account. You are asked to provide a unique name for that storage account. This is necessary because data within a storage account is accessible from anywhere in the world. That being the case, the storage account namespace must be unique across the Azure landscape.</p>
<p>There are several different types of storage accounts available. Each type offers different features, and each has a different pricing model.</p>
<p>The first type of storage account is the general-purpose V2 account. A general-purpose V2 storage account is a basic storage account that can be used, to host blobs, files, queues, and tables. Microsoft recommends using the general-purpose V2 storage account for most scenarios that require Azure storage.</p>
<p>The general-purpose V1 storage account is similar to the V2 account. This legacy type account can also host blobs, files, queues, and tables. While a general-purpose V1 account offers similar functionality to the V2 accounts, Microsoft recommends using the general-purpose V2 account instead. This tells me that the general-purpose V1 storage account will probably go away at some point in the future.</p>
<p>The next type of storage account we are going to take a look at here is the block blob storage account. Block blob storage accounts offer premium performance for block blobs and append blobs. You would typically use a block blob storage account for situations where high transaction rates are in play. Block blob storage accounts are also a good choice for scenarios that require low storage latency.</p>
<p>File storage accounts are exactly what the name says they are. They are files only storage accounts. Because they feature high-performance characteristics, Microsoft recommends using these kinds of accounts for enterprise applications or for high-performing applications.</p>
<p>The last storage account type touch on here is the blob storage account. The blob storage account is a legacy account that is used for blob only storage. Microsoft actually recommends that, instead of using blob storage accounts, you use general-purpose V2 accounts. Like the general-purpose V1 accounts, I suspect the blob storage accounts, because of their legacy status, will likely go away sometime in the future.</p>
<p>The table that you see on your screen right now shows each of the different types of storage accounts, along with their key features. As you can see on your screen. Every storage account type is encrypted using storage service encryption, or SSE, for data that is at rest.</p>
<p>I should point out that archive storage and blob level tiering only support block blobs.</p>
<p>Another key point I should mention here is that zone redundant storage and Geo zone redundant storage are only available for standard general-purpose V2 accounts, block blob accounts, and file storage accounts in certain regions.</p>
<p>The premium performance that you see listed for general-purpose V2 and general-purpose V1 accounts is only available for disk storage and page blobs. Premium performance for block blobs and append blobs is only available for block blob accounts. Also, just as importantly, premium performance for files is only available on file storage accounts.</p>
<p>For more information on the different storage accounts available in Microsoft Azure, visit the URL that you see on your screen:</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview">https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview</a></p>
<h1 id="DEMO-Creating-a-Storage-Account"><a href="#DEMO-Creating-a-Storage-Account" class="headerlink" title="DEMO: Creating a Storage Account"></a>DEMO: Creating a Storage Account</h1><p>Hi everyone and welcome back. In this brief demonstration, I’m going to show you how to create a storage account using the Azure portal. Now, every storage account needs to belong to a resource group. Now a resource group, as you may know is a logical container that groups all of your Azure resources.</p>
<p>Now when we create our storage account here, we’re going to have two options, we can create a storage account and then as part of that process, we can create the new resource group or we can select an existing resource group. What we’re going to do here is add this new storage account to an existing resource group.</p>
<p>So on the screen here, I’m logged into my Azure portal and I’m at the home page. To create our general purpose V2 storage account, what we’ll do here is go up to the hamburger here and select all services. And then from here, we can search for storage accounts. And we’ll select it from the results page here. And we can see in my existing subscription here, I already have a storage account called VMLab diag 601.</p>
<p>What we’re going to do here is create a new one by clicking Add. And then from here, we need to provide some basic information, we need to specify the subscription that’s going to host the storage accounts. We need to select the resource group we want to deploy the storage account into or we can create a new one here. And then of course, we need to give our storage account a name, tell Azure which locations going into and then the performance of the storage account.</p>
<p>We can see that standard storage accounts are backed by magnetic drives and they are the cheapest cost per gigabyte. We can see in this popup, that standard storage accounts are good for applications that need bulk storage or where you’re accessing the data within that storage account infrequently. The premium storage accounts are backed by solid state drives. You use these when you need a consistent low latency performance.</p>
<p>Now you will notice here that a premium performance storage account can only be used with Azure virtual machine disks and they are best for IO intensive applications like databases. Another important item to note here is that virtual machines that use premium storage for all of their discs, do qualify for a 99.9% SLA even if they’re not running within an availability set so that’s pretty important to remember.</p>
<p>For this exercise, we’ll just use a standard storage account here and then the account kind here is where we can select what type of storage account to deploy. Here, we have three options storage V2, storage which is basically the legacy general purpose V1 and Blob storage.</p>
<p>Now in the replication dropdown, we can specify the redundancy that we need for our storage whether it be locally-redundant, zone-redundant, geo-redundant, read-access geo-redundant, geo zone-redundant or read access geo zone-redundant. Instead of going through each of these individually, you can visit the URL that you see on your screen for more information about each of these types of redundancy options. And lastly, we have the access tier here.</p>
<p>Now the hot access tier is really used for data that’s accessed frequently. The cool access tier is typically used for infrequently access data. We can also see that there is a another option and it’s the archive access tier but that can only be set at the Blob level and not on the actual storage account level.</p>
<p>So let’s go ahead and see here. We’ll deploy our storage accounts and we only have one subscription here, our labs subscription. So we’ll leave that set and then we have a couple of different resource groups here. So I’ll just deploy this into my VMLab resource group. And then we need to give our storage account a name and this name must be unique across all storage accounts in Azure, it needs to be unique across the landscape. The name can be as short as three characters but as long as 24 and it can only contain lowercase letters and numbers. So let’s call this test9878storage.</p>
<p>We get the green checkbox which means we’re good and we’ll deploy into the Central US region, that’s all we really need for this demonstration. And we’re going to deploy a general purpose V2 and we’ll accept the default read-access geo-redundant storage. We’ll do the same thing for the access tier.</p>
<p>Now, when we click Next for Networking, we can specify our network connectivity requirements, including the connectivity method and any kind of network routing or routing preferences. Now we can see here we have three options, we have a public endpoint for all networks, public end point for selected and private end points.</p>
<p>Essentially, storage accounts have a public endpoint that’s accessible through the internet. That’s what this public endpoint would be. Now, if we select public endpoint, what we do is we’re enabling that public endpoint to all networks, that’s why we have all networks here. If we select the second option here, we can see we then allow a public endpoint but then we can select which networks can access this storage account. </p>
<p>So that allows us to segment our traffic and block certain traffic. And then we have private endpoint. Now you would create a private end point to allow only private connections to this storage accounts. Now, what this would do is assign a private IP address from the virtual network that we select and it would take it and assign it to these storage accounts. And then as a result, all traffic between that virtual network and the storage account would be secured over a private link.</p>
<p>For this exercise here, we’re just going to go public and the only option we have here for routing is Microsoft network routing defaults and that’s because the combination of the storage account kind performance and replication along with location does not support internet routing which we probably wouldn’t do anyway.</p>
<p>We’ll go into data protection and then we can see, we have the Blob soft delete option, we have the file share soft delete option here and then we have versioning but versioning is not offered for this storage account due to the type of storage account combined with the subscription replication and location options.</p>
<p>So we’ll leave these at their defaults. We’ll click Next through to advanced. Now here’s where we could configure some advanced features. We could configure the secure transfer which essentially enhances the security of the storage account by only allowing the requests to that storage account by secure connections.</p>
<p>When you enable the Blob public access, the storage accounts Blobs can be read publicly without needing to share an account key or even a shared access signature. So your Blobs are wide open. We have the TLS versioning. Now this large file shares option here, turning this on provides file share support for a maximum of a hundred terabytes.</p>
<p>Now you’ll notice here that large file share storage accounts don’t have the ability to convert to geo-redundant storage offerings. And down here, we have some Data Lake Storage Gen2 options. We’ll leave these other defaults, we’ll click next for tags, we’re not going to do any tagging here. This just allows us to categorize our resources and then we’ll go ahead and click Next to Review and Create. And at this point we can see our validation has passed, we can review our configuration and then we can go ahead and click Create. And what this will do is deploy our general V2 storage account. And we can go ahead and click, Go to Resource and we are now in our test9878 storage account.</p>
<p>So that is how you walk through the process of creating a storage account in the Microsoft Azure portal.</p>
<h1 id="An-Introduction-to-Blob-Storage"><a href="#An-Introduction-to-Blob-Storage" class="headerlink" title="An Introduction to Blob Storage"></a>An Introduction to Blob Storage</h1><p>Hello and welcome to blob storage. In this lesson, we are going to take a closer look at blob storage and when you should use it.</p>
<p>Azure Blob storage, as I mentioned earlier in this course, is an object storage solution in Azure. It’s optimized to allow the storage of massive amounts of unstructured data, including text and binary data.</p>
<p>You would typically use blob storage to host images and documents that you wish to serve up to a web browser. Think images on a website. Blob storage is also used when you wish to stream video or audio or to store log files. Organizations will also often use blob storage to store backup data, archive data, and data that needs to be analyzed by some on-prem process or Azure-hosted process.</p>
<p>To access objects in blob storage, you can use HTTP or HTTPS. You can also access blob storage objects through the Azure storage rest API, through Azure PowerShell, through the Azure CLI, or through an Azure storage client library such as Java, PHP, .NET, or several others.</p>
<p>There are three types of resources that you should be familiar with when discussing blob storage. They include the storage account that hosts the blob storage, containers within the storage account, and the blobs within those containers.</p>
<p>The image on your screen depicts the relationship between these resources.</p>
<p>The storage account creates the unique namespace in Azure that you use to access your data. When you access your data, you’ll use a combination of the storage account name and the Azure Storage blob endpoint that you are trying to access. Together, these two pieces form the base address for the objects that reside in the storage account.</p>
<p>For example, the URL that you see on your screen would be used to access blob storage in a storage account called MyStorage:</p>
<p><a target="_blank" rel="noopener" href="http://mystorage.blob.core.windows.net/">http://mystorage.blob.core.windows.net</a></p>
<p>Containers within a storage account are used to organize the blobs within the account. You can view containers like directories in a file system. You can create an unlimited number of containers within a storage account, and each container can store an unlimited number of blobs.</p>
<p>There are actually three types of blobs that Azure storage supports. They include block blobs, append blobs, and page blobs. Block blobs can contain up to about 190.7TiB of text and binary data. They are called block blobs because they consist of blocks of data that can be managed individually.</p>
<p>Append blobs are similar to block blobs insofar as they, too, consist of blocks of data. However, unlike block blobs, append blobs are optimized for append operations. This makes append blobs a good choice for logging data from virtual machines.</p>
<p>Page blobs are used to store random access files up to 8 TiB in size. You would typically use page blobs to store VHD files, which would serve as disks for Azure virtual machines. </p>
<p>To learn more about blob storage, visit the URL that you see on your screen:</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction">https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction</a> </p>
<h1 id="DEMO-Uploading-a-Block-Blob-to-Azure"><a href="#DEMO-Uploading-a-Block-Blob-to-Azure" class="headerlink" title="DEMO: Uploading a Block Blob to Azure"></a>DEMO: Uploading a Block Blob to Azure</h1><p>Hello and welcome back. In this demonstration, we are going to create a container in our storage account. And then what we’re going to do is upload a block blob to that storage account. Now, before we upload our block blob to our storage account, we need to create a container.</p>
<p>The container is what will host our blob. So on the screen here, we have my test9878storage account. To create my container here, I simply select the containers chiclet here. And I can see I have no containers configured yet. So what we’ll do here, we’ll create a container.</p>
<p>Now the container name must be lowercase. So we’re gonna call it mycontainer. And we’ll create it. So now we have our container created. We can see that the default access level for that container is private. There’s no anonymous access to it. With our container created, we can upload our block blob to our storage.</p>
<p>To upload our block blob, we simply select our container and then we click upload here. And then in the right pane here, we can select the file we want to upload. And we’re just going to upload this, mytextdocument.text. And then we have an overwrite if it already exists. And then some advanced features here. None of these are required. We just get to specify what kind of authentication type, block size, the access tier and any folders we want to upload to.</p>
<p>For this demonstration, we’re just going right into the container. And then we’ll go ahead and click upload. And we can now see my text document listed in our container. We’ll close this out. And with that, we now have our container created and we were able to upload a block blob or file to our container.</p>
<p>Now, if we wanted to download our block blob, we simply right click it, and then we could select download here. So with that, you now know how to create a container in your blob storage and you know how to upload and download block blobs to, and from it.</p>
<h1 id="An-Introduction-to-Azure-Files"><a href="#An-Introduction-to-Azure-Files" class="headerlink" title="An Introduction to Azure Files"></a>An Introduction to Azure Files</h1><p>Hello and welcome to an intro to Azure Files. In this lesson, we are going to take a look at what Azure Files is and talk a little bit about what it offers.</p>
<p>Azure Files is an offering that makes file shares available in the cloud. It’s a fully managed solution that supports access to these cloud-based file shares via the industry-standard server message block protocol, or SMB.</p>
<p>You can mount Azure file shares from cloud deployments and on-prem deployments of not only Windows machines, but also Linux, and Mac OS machines. You can also use the Azure file sync service with Azure Files to cache your Azure file shares on Windows servers that are located close to your users. By leveraging Azure file shares with Azure file sync, you can speed data access for your end users. </p>
<p>Organizations will often use Azure Files to replace on-prem file servers or to supplement them. While earlier iterations of Azure Files were not a good replacement for on-prem file servers, this is no longer the case. Because popular operating systems like Windows, Linux, and Mac OS can mount Azure file shares, Azure Files can now completely replace traditional on-prem file servers and even NAS devices. As a matter of fact, the release of Azure Files AD Authentication means Azure file share permissions can even be controlled through on-prem active directories.</p>
<p>Azure Files is also helpful when lifting and shifting applications to the cloud. This is especially true for applications that require file shares to store application data and user data.</p>
<p>Because Azure Files are fully managed, you can create as many file shares as you need without worrying about hardware management and OS installation. This means you also have no need for OS patching or security upgrades.</p>
<p>You can also use familiar PowerShell commands and Azure CLI commands to create, mount, and manage Azure file shares. They can also be created and managed through the Azure portal and through Azure Storage Explorer.</p>
<p>Because Azure Files are built to be resilient, you no longer need to worry about file server upgrades or local power outages and network issues that typically affect access to on-prem file shares.</p>
<p>Join me in the next lesson, where I will show you how to create an Azure file share using the Azure portal.</p>
<h1 id="DEMO-Creating-an-Azure-File-Share"><a href="#DEMO-Creating-an-Azure-File-Share" class="headerlink" title="DEMO: Creating an Azure File Share"></a>DEMO: Creating an Azure File Share</h1><p>Hello and welcome back. Now, once we have a storage account created, we can go ahead and create file shares if we’re going to use the Azure file service. What I’m going to do here is show you how to create a file share within an Azure Storage account.</p>
<p>Now on the screen, you can see I’m in the storage account and I’m on the overview page. Now, from this overview page, to create a file share, I simply navigate to the file shares tab. The file shares tab allows us to see any file shares we’ve already created. And as you can see on the screen, we have none.</p>
<p>To create a new file share, we simply click the file share link here, and then we can give our file share a name and a quota. So what we’ll do here, we’ll call this file share MyShare. Now we can see the little exclamation point here and this is telling me that the file share name can only be lowercase letters, numbers, and hyphens. So we’ll go ahead and rename this myshare in lowercase letters.</p>
<p>Now, if I hover over the quota icon here, we can see that we can set a quota essentially up to five terabytes that limits the total size of this file share. We are not going to set a quota here, so we’ll go ahead and click create. And now we can see that our share is created and that we have the default quota. Since we didn’t specify one, it’s just giving us the entire size that’s available to us for the share.</p>
<p>If we select the share here, we can click the connect link here and this will give us information on how to connect to this share from Windows, Linux, or MacOS. We can also upload files directly to it, and we can add a directory, so let’s call this marketing, and now we have a directory within our myshare file share called marketing. So you can build a hierarchy of your file shares within your Azure portal.</p>
<p>So with that, you know how to create a file share in Microsoft Azure using the Azure portal.</p>
<h1 id="An-Introduction-to-Azure-Queues"><a href="#An-Introduction-to-Azure-Queues" class="headerlink" title="An Introduction to Azure Queues"></a>An Introduction to Azure Queues</h1><p>Hello and welcome to Azure queues. In this brief lecture. We are going to take an introductory look at Azure queues and what they are used for. </p>
<p>The Azure queues storage service is designed to store large numbers of messages. Now these messages aren’t the type that you would normally think of. We’re not talking about emails or anything like that. Instead, these messages are used to facilitate communication between the components of distributed applications. When using Azure queue storage, you can access these messages from anywhere in the world through authenticated calls via HTTP or HTTPS.</p>
<p>The Azure queue service is comprised of several components. These include the URL format, a storage account, a queue, and messages.</p>
<p>To access a queue, you must do so through a specific URL format. The URL for a specific queue will include the storage account name and the queue name. For example, the URL that you see on your screen would be used to access a queue called images to process in a storage account called mystorageaccount.</p>
<p>Speaking of storage accounts, all access to virtually all Azure storage services is provided through a storage account. You can view the storage account as the overarching container that hosts your Azure storage.</p>
<p>The queue itself is actually a set of messages. When you name a queue, you must use all lowercase letters.</p>
<p>And last but not least we have messages. Messages in any format can be up to 64 kB. As I mentioned previously, these messages are used to facilitate communication between the different components of a distributed application.</p>
<p>Join me in the next lesson where I will show you how to create a queue in Microsoft Azure.</p>
<h1 id="DEMO-Creating-a-Queue"><a href="#DEMO-Creating-a-Queue" class="headerlink" title="DEMO: Creating a Queue"></a>DEMO: Creating a Queue</h1><p>Welcome back. In this quick demonstration, I want to show you how to create a queue in Microsoft Azure using the Azure portal. Now, since this isn’t a course on using queues, we’re not going to get into all the details of how to use it, but I wanted to at least show you how to create a queue.</p>
<p>On the screen here, you can see I’m logged into my Azure portal. I’m at the home page and I’m logged in as an admin. To create a queue service, what I need to do is browse to my storage accounts. And then from the overview page of my storage accounts, I simply click on the queues box here.</p>
<p>Now from the queues page, I can see what existing queues I have set up. I can also see what authentication method I’m using. Now to create my queue, it’s a pretty straightforward process. I simply click the plus queue button up here and then give my queue a name.</p>
<p>Now my name for the queue needs to be all lowercase. It must start with a letter or a number, and it can only include letters, numbers, or hyphens. So I’m just going to call this myqueue. And then we’ll click okay here. And then we can see here myqueue is created and it gives me the URL to access that queue. And that’s really all there is to creating a queue.</p>
<p>Now, before we go, I’ll just show you quickly how to add a message to that queue through the portal. And to do that, I simply click on my queue here and then add a message. Now what I’ll do here, I’ll just add some kind of message text here. And we can set the expiration. I’ll just leave the defaults there.</p>
<p>Now because Microsoft recommends encoding binary data, this checkbox here for encode the message body in Base64 is checked by default. So we’ll leave it there and we’ll go ahead and click okay. And now we can see the message in our queue. If we select the message, we can look at some of the message properties. We can see the body of the message, when that message was inserted into the queue and when it expires. </p>
<p>Now, if we wanted to dequeue this message or remove it from the queue, we simply click the dequeue message. Now since this is the first and only message in my queue, it’s asking me if I’m sure I want to remove the first message in the queue. We’ll go ahead and click yes. And now we can see, we have no more messages in our queue.</p>
<p>So that’s the long and short of it on how to create a queue, how to add a message to a queue, and how to dequeue that message.</p>
<h1 id="An-Introduction-to-Azure-Table-Storage"><a href="#An-Introduction-to-Azure-Table-Storage" class="headerlink" title="An Introduction to Azure Table Storage"></a>An Introduction to Azure Table Storage</h1><p>Hello and welcome to Azure table storage. In this lesson, we will take a look at what table storage is and what it’s used for. </p>
<p>Azure table storage is a storage service offered by Microsoft that allows you to store structured no SQL data in the cloud. It provides a key&#x2F;attribute store with a schema-less design. When I say schema-less here, what I mean is that the data does not conform to a rigid schema. In other words, it doesn’t conform to specific data types that a typical relational database would conform to. </p>
<p>Organizations will often use table storage to store flexible databases that include things like user data for Web applications or maybe even address books or device information. Table storage allows you to store all kinds of entities in a table. Storage accounts can contain as many tables as you need up to the capacity limits of the storage account itself. </p>
<p>Azure table storage, which is actually a NoSQL datastore, often comes into play when an organization needs to store large amounts of structured data. It’s perfect for scenarios that require the storage of structured non-relational data. For example, table storage would be a good choice if you need to store terabytes of structured data required for web scale applications. If you have datasets that don’t require complex joins, foreign keys, or stored procedures, table storage would be a good choice, assuming those data sets can be denormalized for fast access.</p>
<p>Leveraging Azure table storage allows you to store and query massive sets of structured nonrelational data.</p>
<p>Table storage consists of several different components. The URL format for accessing Azure table storage can be seen on your screen.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://&lt;storage account&gt;.table.core.windows.net/&lt;table&gt;</span><br></pre></td></tr></table></figure>

<p>Notice the URL includes the storage account name and the table name. It’s the inclusion of these values that makes the URL address unique.</p>
<p>The storage account is another component that helps comprise the Azure table storage offering. The function of the Azure storage account is simple. Access to all Azure storage, including table storage, is provided through a storage account.</p>
<p>The third piece of Azure table storage is the table itself. All a table is is a collection of entities. What makes an Azure table storage table different from a typical relational database table is the fact that it doesn’t enforce a schema on the entities within it. This means that a single table can, and often does, contain all kinds of entities with many different sets of properties.</p>
<p>Speaking of entities, the entity is the fourth component that makes up the Azure table storage offering. The best way to describe an entity is that it is similar to a typical database row. It’s essentially a set of properties. Each entity in Azure storage can be up to 1 MB in size.</p>
<p>The properties, which make up the fifth component, are name-value pairs. You can include up to 252 properties for each entity. There are also three system properties associated with each entity as well. These include a partition key, a row key, and a timestamp.</p>
<p>The image on your screen depicts the relationship among each of these components. As you can see the storage account holds the tables. Each table consists of the entities. Each entity consists of many different properties. The URL that we mentioned earlier is how you access all of this stuff.</p>
<p>In the next lesson, I will show you how to create an Azure storage table using the Azure portal.</p>
<h1 id="DEMO-Creating-an-Azure-Storage-Table"><a href="#DEMO-Creating-an-Azure-Storage-Table" class="headerlink" title="DEMO: Creating an Azure Storage Table"></a>DEMO: Creating an Azure Storage Table</h1><p>Welcome back. In this brief demonstration, we are going to walk through the process of creating an Azure Storage table in the Azure portal. As you can see here, I’m logged into my portal as my admin, and I’m on the homepage. We have my storage account here, test9878storage. This obviously is a prerequisite to create a table.</p>
<p>So what we’ll do to begin the process of creating our storage table is select our storage account. And then from the overview page, we can select tables. Now from this table storage page, we can see I have no tables defined yet.</p>
<p>Now, one thing I didn’t mention in the lecture is that there is a premium table experience and it’s not necessarily table storage per se so I didn’t cover it in the course, but this premium table experience is offered through Cosmos DB. And if I open this up here, it takes me out to Azure Cosmos DB and what Azure Cosmos DB is is a globally distributed database service.</p>
<p>Now, what Cosmos DB offers is a premium Azure table API. And so that’s why we didn’t get into it because it’s not really table storage as part of the Azure Storage service offering. But just keep that in mind that there is a premium experience for Azure table API if it comes up in an exam somewhere.</p>
<p>So let’s go back to our test9878storage here. So to create our table, we simply click plus table and we’ll give our table a name. I’ll just call it MyTable and we’ll OK it. And from there, we can see our new table has been created along with a URL to access that table.</p>
<p>If we click the ellipsis here for the context menu, we can configure access policies or delete the table altogether. Now, since this is an introduction to Azure Storage, we’re not going to get into table design and actually doing things with the table storage. I just wanted to introduce you, hence the name of the course, to this storage option so you have an idea of what it is, where you access it and how you create a table.</p>
<p>So with that, we’ll call it a wrap and I’ll see you in the next lesson.</p>
<h1 id="Introduction-to-Azure-Managed-Disks"><a href="#Introduction-to-Azure-Managed-Disks" class="headerlink" title="Introduction to Azure Managed Disks"></a>Introduction to Azure Managed Disks</h1><p>Hello and welcome to Azure managed disks. In this lesson, we’re going to take a look at the benefits of managed disks and at the types of encryption you can use with managed disks. Let’s start by identifying what a managed disk is in Azure. An Azure managed disk is similar to a physical disk that you would find in a physical on-prem server, but it’s virtualized. It’s a block level storage volume that’s used with Azure VMs and is managed by <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>.</p>
<p>Creating a managed disk in Microsoft Azure is as simple as specifying the size of the disk, and the type of the disk you want to use. When you provision a managed disk, you have a choice of several different types. You can deploy ultra disks, premium SSD disks, standard SSD disks, and standard HDD disks. We will actually look at these types in a little more detail in the next lesson. But for now, we’re just going to look at the benefits of using managed disks.</p>
<p>For starters, managed disks are designed for 99.999% availability. That’s five nines of availability. To achieve this level of availability, there are three replicas of the data stored on each managed disk. This type of durability protects you from not only one, but two failures of disk replicas.</p>
<p>Managed disks make it easy to deploy and scale VMs. Microsoft Azure allows up to 50,000 VM disks of a specific type per region in each subscription. This allows you to create thousands of virtual machines in one subscription. Because Azure supports so many disks, you can create VM scale sets that include up to 1000 VMs per set, provided you use a marketplace image. </p>
<p>I should point out that managed disks are integrated with both availability sets and availability zones. The integration with availability sets ensures that VM disks within an availability set are isolated from one another. This protects your applications from a single point of failure within an Azure datacenter. Availability zone integration protects applications from entire Azure datacenter failures.</p>
<p>Since Azure backup supports the backup and restore of managed disks, you can use Azure backup to create backup jobs to protect your data. This makes VM restores a snap. I should mention, however, at the time of this course publication, Azure backup supports disk sizes up to 32 terabytes.</p>
<p>Through Azure role-based access control, or RBAC, you can specify granular access control for managed disks. You can assign specific permissions for managed disks to your users.</p>
<p>Lastly, Azure managed disks make it easier to upload your on-prem VMs to Azure because you can use direct upload to transfer your VHD files to Azure managed disks. There are far fewer steps to uploading your VHDs than there used to be.</p>
<p>There are two types of encryption that you can use with managed disks. They include server-side encryption, or SSE, and Azure disk encryption, or ADE.</p>
<p>Server-side encryption is performed by the Azure storage service, and is enabled by default for all managed disks. This type of encryption provides encryption at rest for your data. Server-side encryption is also enabled by default for snapshots and images in regions where managed disks are available.</p>
<p>Azure disk encryption is enabled on the OS and data disks of a VM. Using Azure disk encryption, you can encrypt the OS and data disks for a virtual machine, including managed disks. On Windows VMs, the disks are encrypted using bit locker technology. While on Linux VMs, the disks are encrypted using DM-crypt technology.</p>
<p>There are three disk roles in Azure. These roles include data disks, OS disks, and temporary disks.</p>
<p>Data disks are managed disks that you attach to a virtual machine. They’re used to store applications and other sorts of data that you need. When you attach a data disk to a VM, it’s registered as a SCSI drive. You can assign a drive letter to a data disk just like any other physical disk in a physical server. Data disks have a max capacity of 32 terabytes, and the number of data disks that you can attach to a virtual machine will be determined by the size of the virtual machine itself.</p>
<p>OS disks are pretty self-explanatory. When you deploy a virtual machine, it’s deployed with a single OS disk attached. The OS disk, as you may have guessed, hosts the VM’s operating system and boot volume. The max capacity of an OS disk is four terabytes.</p>
<p>Temporary disks are probably the most misunderstood of the three disk types. Every VM contains a temporary disk. I should mention, however, that the temporary disk is not a managed disk. The temporary disk is not intended for storage of important data. Instead, temporary disks are used to host things like page files and swap files. Data that is stored on a temporary disk is often lost during maintenance events and when a VM is redeployed. The temporary disk is assigned the drive letter of D on Windows machines by default. On Azure Linux VMs, the temporary disk is &#x2F;dev&#x2F;sdb.</p>
<h1 id="Course-Summary"><a href="#Course-Summary" class="headerlink" title="Course Summary"></a>Course Summary</h1><p>Congratulations. You’ve come to the end of Introduction to Azure Storage. Let’s review what you’ve learned.</p>
<p>We kicked things off with an introduction to azure storage. You learned about the core storage services in Azure and about the different storage account types that are available. You also got to see a demonstration that showed you how to create a storage account in Microsoft Azure.</p>
<p>We then took a look at the different storage services in a little more detail. We started with blob storage, where you learned what it is and what it offers. Next, we dove into Azure Files.</p>
<p>After covering Azure Files, we got into Azure queues, where you learned what Azure queues are and how to create a queue.</p>
<p>After learning about Azure queues, you learned about Azure tables. You learned why they are used and when to use Azure them.</p>
<p>We wrapped up with Azure disks. </p>
<p>At this point, you should have a solid understanding of the storage offerings in Microsoft Azure.</p>
<p>To learn more about Microsoft Azure storage options, you can, and should, read Microsoft’s published documentation. You should also keep an eye out for new courses on Cloud Academy, because we’re always publishing new ones. Be sure to give this course a rating, and if you have any questions or comments, please let us know. Thanks for watching and happy learning.</p>
<h1 id="3Storage-Account-Types-in-Azure"><a href="#3Storage-Account-Types-in-Azure" class="headerlink" title="3Storage Account Types in Azure"></a>3<strong>Storage Account Types in Azure</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview">Azure Storage Accounts Overview</a></p>
<h1 id="5An-Introduction-to-Blob-Storage"><a href="#5An-Introduction-to-Blob-Storage" class="headerlink" title="5An Introduction to Blob Storage"></a>5<strong>An Introduction to Blob Storage</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction">Azure Blob Storage Overview</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/71/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/71/">71</a><span class="page-number current">72</span><a class="page-number" href="/page/73/">73</a><span class="space">&hellip;</span><a class="page-number" href="/page/274/">274</a><a class="extend next" rel="next" href="/page/73/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2736</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">72</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
