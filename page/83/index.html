<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hang&#39;s Blog">
<meta property="og:url" content="https://example.com/page/83/index.html">
<meta property="og:site_name" content="Hang&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Hang Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/page/83/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Hang's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hang's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-Cert-Prep-Microsoft-Azure-Security-Technologies-AZ-500-24/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-Cert-Prep-Microsoft-Azure-Security-Technologies-AZ-500-24/" class="post-title-link" itemprop="url">AZ-500-Cert-Prep:-Microsoft-Azure-Security-Technologies-AZ-500-24</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-15 10:11:58" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:58-04:00">2022-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-19 13:10:56" itemprop="dateModified" datetime="2022-11-19T13:10:56-04:00">2022-11-19</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-Cert-Prep-Microsoft-Azure-Security-Technologies-AZ-500-24/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-Cert-Prep-Microsoft-Azure-Security-Technologies-AZ-500-24/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><object data="Cert-Prep-Microsoft-Azure-Security-Technologies-AZ-500.pdf" type="application/pdf" width="100%" height="600"></object></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-AZ-500-Exam-Preparation-Summary-23/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-AZ-500-Exam-Preparation-Summary-23/" class="post-title-link" itemprop="url">AZ-500-AZ-500-Exam-Preparation:-Summary-23</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-15 10:11:57" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:57-04:00">2022-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-19 15:01:06" itemprop="dateModified" datetime="2022-11-19T15:01:06-04:00">2022-11-19</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-AZ-500-Exam-Preparation-Summary-23/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-AZ-500-Exam-Preparation-Summary-23/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Congratulations! You’ve made it all the way through this learning path! If you’re preparing to sit the <a target="_blank" rel="noopener" href="https://cloudacademy.com/learning-paths/az-500-exam-preparation-microsoft-azure-security-technologies-650/">AZ-500 exam</a>, keep in mind that, although this learning path covered most of the key learning objectives for the exam, there are a few details that weren’t covered. I’ll list them for you and show you where you can learn more about them. </p>
<p>Applications that integrate with the Microsoft identity platform follow an authorization model that provides users and admins with control over how data can be accessed. For more information on configuring App registration permission scopes and managing App registration permission consent, visit the URL that you see on your screen. </p>
<p>[<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent]">https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent]</a></p>
<p>Security Playbook is an offering that helps automate and orchestrate an organization’s response to certain security alerts that are detected by Security Center. You can learn more about configuring a playbook for a security event by visiting the URL that you see on your screen. </p>
<p>[<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/security-center/security-center-playbooks]">https://docs.microsoft.com/en-us/azure/security-center/security-center-playbooks]</a></p>
<p>After deploying a key vault to store keys and secrets you can update your keys and secrets without affecting application behavior. For more information about configuring key rotation, visit this URL. </p>
<p>[<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/key-vault/key-vault-key-rotation-log-monitoring]">https://docs.microsoft.com/en-us/azure/key-vault/key-vault-key-rotation-log-monitoring]</a></p>
<p>If you’d like to learn more about transferring <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a> subscriptions between Microsoft Azure AD tenants, visit this URL. </p>
<p>[<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/billing/billing-subscription-transfer]">https://docs.microsoft.com/en-us/azure/billing/billing-subscription-transfer]</a></p>
<p>Lastly, you may want to checkout this URL to learn more about managing API access to Microsoft Azure subscriptions and resources. </p>
<p>[<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-api-authentication]">https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-api-authentication]</a></p>
<p>If you have any questions or comments, please let us know. Thanks for watching, and <a target="_blank" rel="noopener" href="https://cloudacademy.com/learning-paths/microsoft-certified-azure-security-engineer-associate-cloud-certification-in-a-box-1-843/">good luck on the exam</a>!</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-Lab-Azure-Key-Vault-and-Disk-Encryption-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-Lab-Azure-Key-Vault-and-Disk-Encryption-22/" class="post-title-link" itemprop="url">AZ-500-Lab-Azure-Key-Vault-and-Disk-Encryption-22</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-15 10:11:54 / Modified: 10:11:56" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:54-04:00">2022-11-15</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-Lab-Azure-Key-Vault-and-Disk-Encryption-22/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-Lab-Azure-Key-Vault-and-Disk-Encryption-22/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-Lab-Enabling-Microsoft-Defender-for-Azure-SQL-Database-21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-Lab-Enabling-Microsoft-Defender-for-Azure-SQL-Database-21/" class="post-title-link" itemprop="url">AZ-500-Lab-Enabling-Microsoft-Defender-for-Azure-SQL-Database-21</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-15 10:11:53 / Modified: 10:11:54" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:53-04:00">2022-11-15</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-Lab-Enabling-Microsoft-Defender-for-Azure-SQL-Database-21/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-Lab-Enabling-Microsoft-Defender-for-Azure-SQL-Database-21/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-Microsoft-Azure-Security-Solutions-20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-Microsoft-Azure-Security-Solutions-20/" class="post-title-link" itemprop="url">AZ-500-Microsoft-Azure-Security-Solutions-20</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-15 10:11:51" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:51-04:00">2022-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-19 14:59:52" itemprop="dateModified" datetime="2022-11-19T14:59:52-04:00">2022-11-19</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-Microsoft-Azure-Security-Solutions-20/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-Microsoft-Azure-Security-Solutions-20/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Welcome to “Microsoft Azure Security Solutions”. My name is Thomas Mitchell and I’ll be taking you through this course. </p>
<p>I’m a Content Author at Cloud Academy and I have over 25 years of IT experience, several of those with cloud technologies. If you have any questions, feel free to connect with me on LinkedIn, or send an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>This course is intended for IT Professionals who need to develop an understanding of the security solutions that are available in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>. To get the most from this course, you should have a basic understanding of Microsoft Azure and its offerings.</p>
<p>We’re going to kick things off by taking a look at the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/what-is-shared-responsibility/">shared responsibility model</a>. You’ll learn what the shared responsibility model is and how responsibilities are split between Microsoft and the customer.</p>
<p>After covering the shared responsibility model, we’ll move on to azure security services and technologies. We’ll cover general azure security features, including azure security center, azure key vault, and azure monitor logs.</p>
<p>We’ll then move on to storage security, where you’ll learn about Azure storage service encryption, shared access signatures, storage account keys, and Azure Storage Analytics.</p>
<p>Next, we’ll look at database security, where you’ll learn about Azure SQL firewall rules, Azure SQL Always Encrypted, Transparent Data Encryption, and Azure SQL Database Auditing.</p>
<p>Later on, in the course, we’ll dive into identity and access management. You’ll learn about role-based access control, Azure Active Directory, Azure AD B2B, Azure AD B2C, Azure AD Domain Services, and Azure Multi-Factor Authentication.</p>
<p>We’ll wrap things up with network security options and features, including Network Security Groups, Azure Firewall, Azure DDoS Protection, and more.</p>
<p>By the time you finish this course, you should have a basic understanding of all of the key security options and features available in Microsoft Azure.</p>
<p>We’d love to get your feedback on this course, so please give it a rating when you’re finished. So, if you’re ready to learn about Microsoft Azure Security Solutions, let’s get started.</p>
<h1 id="What-is-Shared-Responsibility"><a href="#What-is-Shared-Responsibility" class="headerlink" title="What is Shared Responsibility?"></a>What is Shared Responsibility?</h1><p>Hi there. In this lecture, we’re going to talk about the shared responsibility model. This is important to understand because, if you are an organization considering a move to the cloud, you need to understand which <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/introduction/">security tasks</a> the cloud provider is responsible for handling and which tasks are handled by you. These responsibilities will vary depending on the workload. For example, the responsibilities for SaaS workloads will differ from IaaS workloads, which will differ from PaaS workloads, which will differ from on-prem responsibilities.</p>
<p>When you host your workloads in an on-prem datacenter, you own everything. However, as you move to the cloud, some of your security responsibilities are handed over to <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft</a>.</p>
<p>The graphic on your screen details the general areas of responsibility for you and for Microsoft, based on where the workloads are hosted.</p>
<p>As you can see, whether your workloads run on-prem or in the cloud, you always own your data and identities, so you are responsible for the security of them. You are also responsible for your on-prem resources, along with any cloud components you control. Whether your workloads are hosted in the cloud or on-prem, you always retain the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/responsibilities-by-platform/">responsibility</a> for your data, your endpoints, your accounts, and access management.</p>
<h1 id="Responsibilities-by-Platform"><a href="#Responsibilities-by-Platform" class="headerlink" title="Responsibilities by Platform"></a>Responsibilities by Platform</h1><p>Let’s break things down by platform. </p>
<p>For on-premises <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/introduction/">solutions</a>, the customer will always be responsible for all aspects of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/general-azure-security/">security</a> and operations. </p>
<p>For IaaS solutions, the cloud provider will be responsible for the tangible aspects – things like servers and network hardware. The hypervisor is also managed by the cloud provider – as are the physical datacenters that host the hardware. The customer will typically be responsible for securing and managing operating systems on servers, network configurations, applications that are deployed, identity management, and, of course, data. </p>
<p>Solutions built on the PaaS platform push more <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/what-is-shared-responsibility/">responsibility</a> onto the cloud provider. In addition to the same things that the cloud provider is responsible for in an IaaS deployment, the provider is additionally responsible for managing and securing the network controls. The customer, however, is still at least partially responsible for securing and managing its applications, user identities, and data. </p>
<p>SaaS solutions push even more responsibility onto the provider. This is because the cloud provider provides the application to the customer as a service. This removes the customer’s responsibility for ANY underlying components. That said, the customer is still responsible for ensuring that its data is properly classified. The provider and customer will share the responsibility for managing users and end-point devices.</p>
<p>It’s critical to understand that, while cloud providers can offer significant security and compliance advantages over an on-prem solution, these advantages do not, in any way, absolve the customer from protecting its users, applications, and service offerings. </p>
<h1 id="General-Azure-Security"><a href="#General-Azure-Security" class="headerlink" title="General Azure Security"></a>General Azure Security</h1><p>Hi there. Welcome to General Azure Security. In this lesson, we’re going to look at the many <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/introduction/">security-related services</a> and technologies that are available in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>. We’ll take a look at Azure Security Center, Azure Key Vault, and Azure Monitor logs.</p>
<p>Azure Security Center is a unified infrastructure security management system. It’s used to improve the security of not only Azure resources, but also of your data centers. Security Center provides advanced threat protection for workloads in the cloud and for on-prem workloads by providing you with tools that you can use to harden your network and to secure your services.</p>
<p>Organizations will typically use Azure Security Center to address common security challenges, including things like workloads that are constantly changing and sophisticated security threats. </p>
<p>Quickly changing workloads, for example, present unique security challenges because it can be difficult to ensure that, despite the constant changes, these workloads remain compliant with your security standards and that they follow security best practices.</p>
<p>Regardless of where your workloads are hosted – whether in the cloud or on-prem, security threats are becoming more and more sophisticated. That being the case, you need to ensure that you are effectively securing your public cloud workloads. This is because anything in the public cloud is directly or indirectly Internet-facing. Because of this, these workloads can leave you open to attacks if you don’t follow security best practices.</p>
<p>Azure Security Center helps address these challenges by assessing your environment for you. These assessments help you better understand the status and security of your resources. Security Center will then make recommendations that you can follow to better secure those resources.</p>
<p>Azure Key Vault is a cloud solution that allows organizations to centrally store and manage secrets, keys, and certificates. </p>
<p>By leveraging Azure Key Vault, an organization can not only securely store things like tokens, passwords, and certificates, but it can also tightly control access to them.</p>
<p>Azure Key Vault can also be used as a Key Management solution because of how easy it makes it to create and control encryption keys that are used to encrypt your data.</p>
<p>You can also use Azure Key Vault to provision, manage, and deploy public and private TLS and SSL certificates that you plan to use with Azure and with internal connected resources.</p>
<p>I should also mention that you can use Key Vault to store secrets that are backed by Hardware Security Modules, or HSMs. They can be protected either by software or by FIPS 140-2 Level 2 validated HSMs.</p>
<p>Accessing an Azure Key Vault requires proper authentication and authorization. The authentication, which establishes the identity of the user or app, is performed by Azure Active Directory. Authorization, which determines the operations that the user or app is allowed to perform, is typically handled via role-based access control or via a Key Vault access policy.</p>
<p>It’s also important to note that Azure Key Vault is designed in such a way that Microsoft cannot, and does not, see or extract your data.</p>
<p>Azure Monitor collects data that you can use to monitor your environment. This data fits into one of two fundamental types. They include Metrics and Logs. Since this course focuses on security, we’ll key in on the log data that Azure Monitor collects, rather than the metrics data. </p>
<p>The Logs in Azure Monitor can be used to perform complex analysis across data that’s collected from many different sources. However, it important to understand the difference between Azure Monitor Logs and different sources of log data in Azure. </p>
<p>Let’s take subscription-level events in Azure, for example. These types of events are written to an activity log, which can be viewed from the Azure Monitor menu. While most Azure resources will record detailed operational information resource logs that can be forwarded to different locations, Azure Monitor Logs is actually a log data platform. This log data platform collects resource and activity logs, along with other monitoring data that can be analyzed to provide information on all resources across your entire environment.</p>
<p>Events are one of the more common types of log entry collected by Azure Monitor. Such events are typically created by applications or services that you are running – and they usually provide information that indicates when a specific resource was created or modified, or when an error was detected in an application.</p>
<p>The table on your screen shows the different ways that you can use Azure Monitor Logs.</p>
<p>You can use Log Analytics to write log queries, and the Data Explorer analysis engine to interactively analyze the data. The Application Insights analytics console in the Azure portal can also be used to write log queries. Using Application Insights, you can interactively analyze the log data.</p>
<p>You can visualize your Azure Monitor Logs by rendering the data as tables or charts and pinning them to your Azure dashboard. You can also create workbooks that combine several sets of data into a single report. There are many other ways to visualize your data as well.</p>
<p>You can even configure log alert rules that can either send out notifications or perform automated actions whenever a query produces results that match a defined result.</p>
<p>You can access log query results using multiple tools, including the Azure CLI and PowerShell. You can even access them from a custom application using REST API.</p>
<p>Azure Monitor Logs can also be used to build workflows. To do this, you could retrieve the log data and copy it to an external location, using Logic Apps.</p>
<p>Azure Sentinel is a cloud-based security information event management solution that provides intelligent security analytics and threat intelligence across the enterprise. It’s an all-in-one solution for alert detection, threat visibility, proactive hunting, and threat response.</p>
<p>Azure Sentinel provides you with a 30,000-foot view of the enterprise while helping you identify and mitigate even the most sophisticated attacks. It’s intelligence helps you deal with the never-ending stream of alerts.</p>
<p>Using Azure Sentinel, you can collect data on all users, devices, applications, and infrastructure – whether they reside on-prem or in other clouds. The service can even detect threats that were previously considered undetectable while minimizing false positives through the use of Microsoft’s analytics and threat intelligence. </p>
<p>By leveraging artificial intelligence, Azure Sentinel allows you to investigate threats and to actively hunt for suspicious activities at scale. Its built-in orchestration and automation of common tasks allows you to respond quickly to incidents.</p>
<p>Azure Sentinel incorporates existing Azure technologies, like Logic Apps, Log Analytics, and AI. This brings robust investigation and detection capabilities to organizations that deploy Azure Sentinel.</p>
<p>To onboard Azure Sentinel, you need to first connect it to your existing data sources. Sentinel comes with numerous connectors right out of the box, including connectors for Microsoft solutions like Microsoft Threat Protection, Microsoft 365, Azure AD, and more.</p>
<p>After connecting to your data sources, you can begin monitoring your data via Azure Sentinel’s integration with Azure Monitor Workbooks. </p>
<p>Azure Sentinel offers automation and orchestration solutions that can handle new technologies and even the newest threats that emerge.</p>
<p>Azure Sentinel’s investigation tools help you determine the scope of potential security threats while helping you find the root causes of them.</p>
<p>The hunting search-and-query tools that Azure Sentinel provides allow you to proactively hunt for security threats across your data sources before an alert is ever triggered.</p>
<p>The Sentinel community even offers community-provided workbooks, playbooks, and hunting queries that you can use in your own environment. </p>
<p>To read more about Azure Sentinel, visit the URL that you see on your screen:</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/sentinel/overview">https://docs.microsoft.com/azure/sentinel/overview</a></p>
<h1 id="Storage-Security"><a href="#Storage-Security" class="headerlink" title="Storage Security"></a>Storage Security</h1><p>Hi there! Welcome to Storage Security! In this lecture, we’re going to take a look at a few of the different storage <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/introduction/">security</a> options that are available in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>. We’ll look at Azure Storage Service Encryption, Shared Access Signatures, Storage Account Keys, and Storage Analytics.</p>
<p>Data that is persisted to the cloud is automatically encrypted by Azure, through Azure Storage encryption. This process protects the data you store and helps you meet organizational security and compliance commitments.</p>
<p>Data stored in Azure Storage is encrypted and decrypted transparently using 256-bit AES encryption. </p>
<p>When a new storage account is provisioned, Azure Storage encryption is automatically enabled for it – and this encryption cannot be disabled. Since data in Azure is secured by default, organizations don’t need to bother with code modifications or application changes in order to leverage Azure Storage encryption.</p>
<p>I should also point out that all storage accounts, whether they are standard or premium tiers, are encrypted. It’s also important to note that all Azure Storage redundancy options support encryption. Azure Storage resources, including blobs, disks, files, queues, and tables are also encrypted – along with all object metadata.</p>
<p>These encryption services have no effect Azure Storage performance, nor is there any additional cost for Azure Storage encryption.</p>
<p>For more information on Azure Storage Encryption, visit the URL that you see on your screen.</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/storage/common/storage-service-encryption">https://docs.microsoft.com/azure/storage/common/storage-service-encryption</a></p>
<p>Shared Access Signatures are another storage security feature in Azure. Shared access signatures, or SAS, provide secure delegated access to resources in a storage account - and they do so without compromising data security. Shared access signatures provide granular control over how your data can be accessed, and they allow you to control which resources can be accessed by an entity, what permissions that entity has on those resources, and how long the shared access signature is valid.</p>
<p>There are three types of shared access signatures that are supported by Azure Storage. They include user delegation SAS, service SAS, and account SAS.</p>
<p>A user delegation SAS, which applies to Blob storage only, is secured with Azure AD credentials and by the permissions specified for the SAS. </p>
<p>A service SAS is secured with the storage account key and is used to delegate access to a resource in either Blob storage, Queue storage, Table storage, or Azure Files. It delegates access to a resource in just one of the services.</p>
<p>An account SAS is also secured with the storage account key. However, unlike a service SAS, it delegates access to resources in one or more of the storage services. The same operations that are available via a service SAS or a user delegation SAS are also available via an account SAS. </p>
<p>Microsoft recommends as a best practice that you use Azure AD credentials, rather than the account key, whenever possible. They make this recommendation because the account key can be more easily compromised.</p>
<p>So, how exactly does a shared access signature work? Well, it’s actually rather simple.</p>
<p>A shared access signature, or SAS, is a signed URI that includes a special token and a set of query parameters, which includes a signature. This signed URI points to a storage resource, and the token dictates how the resource can be accessed by the client. The signature is built from the SAS parameters and then signed with the key that was originally used to create the SAS. </p>
<p>When a SAS URI is presented to Azure Storage as part of a request, Azure checks the SAS parameters and signature to determine their validity for authorizing the request. Assuming the signature is valid, the request is then authorized. If the signature is NOT valid, the request is declined with a 403 “forbidden” error code.</p>
<p>The sample service SAS URI that you see on your screen shows the resource URI and the SAS token.</p>
<p>Storage Account Keys are generated by Azure when you create a storage account. Azure generates two of them – and each is 512-bits. You use these keys to authorize access to data that resides in your storage account. This is done via Shared Key authorization.</p>
<p>Once your storage account keys are created, you should use Azure Key Vault to manage them. You should rotate and regenerate your keys on a regular basis. Azure Key Vault simplifies this process and even allows you to perform the rotation without interrupting the applications that use them. You can also manually rotate your keys if needed.</p>
<p>You need to understand that storage account access keys are essentially root passwords for your storage account. That being the case, you need to ensure they are protected at all times. You should not distribute them to users, save them anywhere in plain text, nor hard code them in apps. If you think your keys may have been compromised, rotate them immediately.</p>
<p>Azure Storage Analytics is a service that performs logging for storage accounts. It provides metrics data for storage accounts as well. This data is typically used to trace storage requests and to analyze usage trends. It can also be used to diagnose issues with storage accounts.</p>
<p>Before using Azure Storage Analytics, it needs to first be enabled for each service that you wish to monitor. This can be done manually right from the Azure portal OR programmatically through the REST API or the client library.</p>
<p>There is a 20TB limit on the amount of data Storage Analytics can store. This limit is separate and independent from the total limit for your storage account. </p>
<p>Visit the URL that you see on your screen for more information on Azure Storage Analytics.</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/storage/common/storage-analytics">https://docs.microsoft.com/en-us/azure/storage/common/storage-analytics</a></p>
<h1 id="Database-Security"><a href="#Database-Security" class="headerlink" title="Database Security"></a>Database Security</h1><p>Hi there. Welcome to Database Security. In this lecture, we’re going to review the different database security options and services that are available. We’ll look at <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a> SQL Firewall Rules, Azure SQL Always Encrypted, Azure SQL Transparent Data Encryption, and Azure SQL Database Auditing.</p>
<p>Let’s talk a little bit about Azure SQL firewall rules. When you create a new Azure SQL server, the SQL Database firewall will automatically block all access to the public endpoint for the server. Connection attempts that originate from the internet will have to pass through the firewall before hitting the SQL server or database. The diagram on your screen shows the flow of traffic through the firewall.</p>
<p>As you can see in the diagram, you can define server-level IP firewall rules and database-level IP firewall rules.</p>
<p>Server-level IP firewall rules allow clients to access the entire Azure SQL server, which includes all databases hosted on it. The master database holds these rules. I should mention that you can configure a maximum of 128 server-level IP firewall rules for an Azure SQL Server.</p>
<p>Database-level IP firewall rules are used to allow access to specific databases on a SQL Database server. You create database-level IP firewall rules each database (including the master database), rather than for the entire server. These rules are stored in the database that they are created for.</p>
<p>As is the case for server-level IP firewall rules, you can define a maximum of 128 database-level IP firewall rules for a database. </p>
<p>For more information about configuring SQL firewall rules, visit the URL that you see on your screen:</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure">https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure</a></p>
<p>The Always Encrypted feature is designed to protect sensitive data like credit card numbers or social security numbers, that are stored in an Azure SQL Database or even in a traditional SQL Server database.</p>
<p>With Always Encrypted, clients can encrypt sensitive data inside the client applications without revealing the encryption keys to the SQL Server, ensuring separation between the owners of the data and those who manage it. This is important because those who manage this sensitive data shouldn’t be able to see the data. </p>
<p>Always Encrypted ensures unauthorized users, including database admins, can’t access sensitive data. This means customers can confidently store sensitive data, even when it’s outside of their direct control. </p>
<p>To ensure encryption is transparent to applications, an Always Encrypted-enabled driver has to be installed on the client computer. This driver automatically encrypts and decrypts sensitive data in the client application before sending the data off to the SQL Server. In a similar fashion, the driver also transparently decrypts the data contained in query results.</p>
<p>I should mention that Always Encrypted is available in all editions of Azure SQL Database, starting with SQL Server 2016. It’s also available in all service tiers of SQL Database. </p>
<p>To learn more about Always Encrypted, visit the URL that you see on your screen:</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/sql/relational-databases/security/encryption/always-encrypted-database-engine">https://docs.microsoft.com/sql/relational-databases/security/encryption/always-encrypted-database-engine</a></p>
<p>Transparent data encryption, or TDE, is used to protect Azure SQL Databases, Azure SQL Managed Instances, and even Azure Synapse from malicious offline activities. It provides this protection by encrypting the data at rest. TDE performs real-time encryption and decryption of the database, associated backups, and the transaction log files at rest – and it does so without the need for any changes to the application. </p>
<p>I should point out though, that while TDE, by default, is enabled for all newly deployed Azure SQL databases, it cannot be used to encrypt the logical master database. This is because the master database contains objects that TDE needs to perform its encryption operations on the user databases.</p>
<p>It’s also important to note that you’ll need to manually enable TDE for older databases of Azure SQL Database, Azure SQL Managed Instance, and Azure Synapse. </p>
<p>To learn how Transparent Data Encryption works under the hood, visit the URL that you see on your screen:</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/sql-database/transparent-data-encryption-azure-sql">https://docs.microsoft.com/azure/sql-database/transparent-data-encryption-azure-sql</a></p>
<p>Auditing is a core part of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/introduction/">security</a> in any environment. Auditing for Azure SQL Database, along with Azure Synapse Analytics, will track database events and writes them to an audit log that you can host in an Azure storage account, a Log Analytics workspace, or in Event Hubs. </p>
<p>Auditing your SQL databases helps organizations to not only maintain regulatory compliance, but to also understand what’s going on within the database. It also helps track down information on anomalies that may or may not be related to suspected security violations or business concerns. By analyzing audit reports on a regular basis, it becomes easier to identify unusual activity and suspicious events.</p>
<p>It’s important to understand that, while audit policies can be defined for a specific database, they can also be defined in a default server policy that applies to all new and existing databases on the server.</p>
<p>If you enable server blob auditing, the auditing will always apply to the databases on the server, meaning the database will always be audited, regardless of the database auditing settings. In situations where you enable both blob auditing on the database AND on the server, both audits will exist separately. You will essentially be auditing the databases twice at the same time - once by the server policy and once by the database policy.</p>
<p>That said, Microsoft recommends that you avoid simultaneously enabling both server blob auditing and database blob auditing unless you plan to use a different storage account for each, or if you plan to define a different retention period for a specific database. The only other time you might want to enable both is if you need to audit certain event types for a specific database that differ from the other databases hosted on the server. </p>
<p>Your best bet, in most cases, is to enable server-level blob auditing only. Leave database-level auditing disabled for all databases, unless there is a specific need for it.</p>
<h1 id="Dynamic-Data-Masking"><a href="#Dynamic-Data-Masking" class="headerlink" title="Dynamic Data Masking"></a>Dynamic Data Masking</h1><p>Hello and welcome to Dynamic Data Masking. Azure SQL Database, Azure SQL Managed Instance, and Azure Synapse Analytics all support a technology called dynamic data masking. What dynamic data masking does is limit the exposure of sensitive data by masking it for users who shouldn’t see it. Dynamic data masking is used to prevent unauthorized access to sensitive data. It allows customers to decide how much sensitive data should be revealed, without any significant impact on the application layer. Dynamic data masking is a policy-based security feature that’s used to hide certain sensitive data that’s returned as a result of a query of certain database fields. Data masking hides the sensitive data without changing it in the database. An example use case for dynamic data masking would be a scenario where a front-line worker at a call center might have to identify the caller by confirming the last four digits of the caller’s social security number. In such a scenario, the call center employee doesn’t need to see the entire social security number. That being the case, a masking rule can be defined to mask all the social security numbers in the result set of any query made against the database. This allows the customer service rep to perform his or her tasks without having access to more data than is necessary. To setup a dynamic data masking policy, you use the Dynamic Data Masking blade that’s found under Security in the SQL Database configuration pane. I should mention, however, that this feature can’t be set for a SQL Managed Instance using the Portal. You have to use PowerShell or REST API. When you configure a data masking policy, you need to configure several settings. You need to specify SQL users that should be excluded from masking, you need to define the masking rules themselves, and you need to define the masking functions. When you specify SQL users excluded from masking, what you’re really doing is defining a set of SQL users or Azure AD identities that are allowed to view the full, unmasked data in SQL query results. I should also point out that users with administrator privileges are always excluded from masking, so they can always see the original data without any masking. The Masking rules that you configure are a set of rules that defines which fields should be masked, along with which masking function should be used. The fields to be masked can be defined using a database schema name, a table name, and a column name. The Masking functions I mentioned are a set of different methods that controls which data is exposed, and under what conditions. The table on your screen shows the different masking functions that are available. To read more about dynamic data masking, visit the URL that you see on your screen.</p>
<h1 id="Identity-and-Access-Management"><a href="#Identity-and-Access-Management" class="headerlink" title="Identity and Access Management"></a>Identity and Access Management</h1><p>Hi there. Welcome to Identity and Access Management. In this lecture, you are going to learn about several features and services that you can use to manage identity and access in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Azure</a>. We’re going to cover role-based access control (or RBAC), Azure Active Directory, Azure Active Directory B2C, Azure Active Directory Domain Services, and Azure Multi-Factor Authentication. We’ll start with Role-Based Access Control.</p>
<p>Because access management is so important for organizations using the cloud, there needs to be a robust way to manage access. Role-based access control, also known as RBAC, is the tool of choice. Using RBAC, you can effectively manage which users have access to what Azure resources, what those users can do with those resources, and what areas in Azure they have access to.</p>
<p>RBAC is an authorization system built on Azure Resource Manager. It offers fine-grained access management of you Azure resources.</p>
<p>For example, you can allow one user or group to manage your VMs in your Azure subscription, while allowing another user or group to manage your virtual <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/networking-security/">networks</a>. Perhaps you need to assign a group of DBAs to manage your SQL <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/database-security/">databases</a> without giving them access to your VMs. You can do this with RBAC.</p>
<p>You can even allow a user or group of users to manage all resources in a specific resource group, while allowing another user or group to manage the resources in a separate resource group.</p>
<p>Segregating duties within your organization, using RBAC, allows you to grant your users only the amount of access they need to perform their jobs. By granting users least privilege to get their work done, you minimize the chances of a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/introduction/">security</a> incident or a mistake that could take down production.</p>
<p>The diagram on your screen depicts a Microsoft-recommend usage pattern for using RBAC.</p>
<p>Now, let’s shift to Azure AD. Azure AD is Microsoft’s cloud-based identity and access management service. You use this to allow users to sign in and access resources in. You can use Azure AD to control access to both internal and external resources.</p>
<p>For example, you can use it to control access to things like Microsoft Office 365, the Azure portal, and even to all kinds of external SaaS applications. You can also control access to internal resources, like applications that reside on your corporate network or to home-grown cloud apps.</p>
<p>Azure AD is intended for IT Admins, App Developers, and for subscribers to services such as Microsoft 365, Office 365, Azure, and others.</p>
<p>IT Admins will typically use Azure AD to control access to applications and to app resources. They will also often use Azure AD to enforce multi-factor authentication and to automate user provisioning.</p>
<p>App developers will often use Azure AD to add single sign-on to their apps. This makes logons easier for the app users since it then allows them to authenticate with their existing credentials. </p>
<p>Subscribers to services like Microsoft 365, Office 365, and Azure are already using Azure AD – sometimes without even knowing it – because these tenants are automatically Azure AD tenants. Azure AD is how provisioning and access to these services is handled.</p>
<p>Azure Active Directory business-to-business collaboration is also known as Azure AD B2B. This offering allows organizations to securely share their apps and services with guest users from other external organizations, while allowing them to retain control over their data. </p>
<p>This is a great solution for organizations that need to work with external partners. </p>
<p>Azure AD B2B provides an easy-to-use invitation and redemption process that allows external users to use their own credentials to access partner resources. </p>
<p>Azure Active Directory business to customer, or B2C, provides business-to-customer identity as a service. Leveraging Azure AD B2C allows an organization’s customers to access the organization’s applications via single sign-on that uses their existing social, enterprise, or local account identities.</p>
<p>Azure AD B2C uses standards-based authentication protocols. Supported protocols include OpenID Connect, OAuth 2.0, and SAML – and it integrates with most modern app and commercial software.</p>
<p>The image on your screen represents the possibilities offered by Azure AD B2C.</p>
<p>Using Azure AD B2C, you can build a single sign-on solution for your organization’s web apps, mobile apps, and even APIs. </p>
<p>Azure Active Directory Domain Services, or Azure AD DS, is a cloud offering that provides managed domain services to organizations who leverage it. It offers features like domain join, LDAP, and even Kerberos and NTLM authentication that’s fully compatible with traditional on-prem Active Directory. Azure AD Domain Services also offers group policy support.</p>
<p>The key benefit of Azure AD Domain Services is the fact that you can use them to get many of the benefits of Active Directory, without having to deploy, manage, or patch domain controllers. Because Azure AD DS integrates with your existing Azure AD tenant, you can allow your users to sign in with their existing credentials. Access to resources can be controlled through existing groups and user accounts as well.</p>
<p>Azure AD DS replicates identity information from Azure AD and can also synchronize user account info from an existing on-prem Active Directory. However, if you wish to run a cloud-only environment, you don’t even need a traditional on-prem AD.</p>
<p>If you need to run a hybrid environment with an on-prem AD and Azure AD Domain Services, you can synchronize your on-prem user accounts, group memberships, and credentials to Azure AD via Azure AD Connect. These synchronized objects are then available within the Azure AD DS managed domain.</p>
<p>Azure Multi-Factor Authentication offers organizations two-step verification. The strength of multi-factor authentication is its layered approach. And this only makes sense when you think about it. It’s far more difficult to compromise multiple authentication factors than it is to compromise a username&#x2F;password combination. </p>
<p>MFA works by requiring two or more authentication methods, including something your users know (which is usually a password), something they possess – maybe a smartphone for example, and something they are. This could include a fingerprint or some other sort of biometrics.</p>
<p>Think about, even if a bad guy gets access to a user’s password, that password really is useless without also having access to the additional authentication method that’s been configured. </p>
<p>Organizations typically use MFA to protect data and applications without making things difficult for end users.</p>
<p>Azure Multi-Factor Authentication comes as part of Azure Active Directory Premium or Microsoft 365 Business. These offerings include full-featured use of Azure MFA, including Conditional Access policies that can be configured to require multi-factor authentication.</p>
<p>Azure AD Free and standalone Office 365 licenses will also allow you to require multi-factor authentication for users and administrators.</p>
<p>A subset of Azure MFA capabilities is also available to protect global administrator accounts in all Azure and O365 subscriptions.</p>
<h1 id="Networking-Security"><a href="#Networking-Security" class="headerlink" title="Networking Security"></a>Networking Security</h1><p>Hi there. Welcome to “Networking Security”. In this lecture, you are going to learn about several key offerings designed to help you secure your networks in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>. We’re going to cover Network Security Groups, Azure VPN Gateway, Azure ExpressRoute, and Azure Firewall. We’ll also look at Web Application Firewall, Azure DDoS Protection, and Virtual Network Service Endpoints.</p>
<p>Network Security Groups are used to filter network traffic to and from Azure resources that are connected to an Azure virtual network. When you create a network security group, several default security rules are created. These rules, in turn, allow or deny inbound network traffic to, or outbound network traffic from, many kinds of Azure resources. In addition to the default rules that are created, you can create as many custom rules as you need to control traffic and secure your resources. While you can’t delete the default rules, you can create rules that override them.</p>
<p>To learn about which Azure resources can have network security groups associated to them, visit the URL that you see on your screen.</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/virtual-network/virtual-network-for-azure-services">https://docs.microsoft.com/azure/virtual-network/virtual-network-for-azure-services</a></p>
<p>An VPN gateway is a virtual network gateway that Azure uses to send and receive encrypted traffic between an Azure virtual network and an on-prem network. This traffic is sent over the public Internet. VPN gateways can also be used to send encrypted traffic between Azure virtual networks over the Microsoft network. </p>
<p>I should mention that, although a virtual network can have only one VPN gateway, you can create multiple connections to a single VPN gateway. When you do this, all of the VPN tunnels that are created will share the available gateway bandwidth.</p>
<p>When a virtual network gateway is deployed, Azure provisions two or more specialized VMs under the covers. These specialized VMs, which are not accessible, are deployed to a special subnet that you create. This special subnet is called the gateway subnet. The specialized VMs that get deployed contain routing tables and they run specific gateway services. </p>
<p>You can deploy VPN gateways in Azure Availability Zones so they can benefit from the resiliency, scalability, and higher availability that Availability Zones provide. </p>
<p>Once you’ve deployed a VPN gateway, you can create an IPsec&#x2F;IKE VPN connection between the VPN gateway and another endpoint, which could be another VPN gateway (to form a VNet-to-VNet connection), or an on-prem VPN device (to create a Site-to-Site connection). You could also create a Point-to-Site VPN connection that allows you or your users to connect to the virtual network from a remote location.</p>
<p>To learn more about VPN gateways in Azure, visit the URL you see on your screen.</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways">https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways</a></p>
<p>Another, more secure and robust, way to connect you on-prem network to Azure is to use ExpressRoute. Using ExpressRoute lets you connect your on-prem network to the Microsoft cloud via a private connection rather than the public internet. This private connection is facilitated by a connectivity provider. You can use ExpressRoute to establish connectivity to Microsoft cloud services, like Microsoft Azure and Office 365.</p>
<p>The diagram on your screen shows what a typical ExpressRoute configuration looks like.</p>
<p>ExpressRoute offers several benefits, including layer 3 connectivity between your on-prem network and the Microsoft Cloud. This connectivity can be from an any-to-any network, a point-to-point Ethernet connection, or through a virtual cross-connection via an Ethernet exchange.</p>
<p>ExpressRoute also provides connectivity to Microsoft’s cloud services across all regions in the geopolitical region. Leveraging the ExpressRoute premium add-on, you can get global connectivity to Microsoft services across all regions.</p>
<p>Other benefits of ExpressRoute include dynamic BGP routing between your network and Microsoft and built-in redundancy.</p>
<p>Visit the URL on your screen to read more about ExpressRoute.</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/expressroute/expressroute-faqs">https://docs.microsoft.com/azure/expressroute/expressroute-faqs</a></p>
<p>Web Application Firewall (or WAF) is included with the Application Gateway service and with the Front Door service. Because web applications are targeted more and more frequently with malicious attacks, WAF is used to provide centralized protection of those web applications. </p>
<p>While such attacks CAN be prevented within the application code, this strategy can be difficult to implement and maintain. That being the case, leveraging a centralized web application firewall can help simplify security management, because such a solution can more quickly react to security threats by centrally patching whatever known vulnerability exists, instead of securing each individual web application.</p>
<p>To learn more about Web Application Firewall, visit the URL that you see on your screen.</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/web-application-firewall/overview">https://docs.microsoft.com/azure/web-application-firewall/overview</a></p>
<p>Azure Firewall is another cloud-based network <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/introduction/">security service</a> available in Azure. This managed service is used to protect Azure Virtual Network resources. This fully stateful firewall as a service comes with built-in high availability and also offers unrestricted cloud scalability.</p>
<p>Azure Firewall allows you to centrally create, enforce, and log application policies as well as network connectivity policies across multiple subscriptions and virtual networks. Because it uses a static public IP address to represent all of your underlying virtual network resources, Azure Firewall allows outside firewalls to easily identify traffic that comes from your virtual network. </p>
<p>The tight integration of Azure Firewall with Azure Monitor allows for robust logging and analytics as well.</p>
<p>A distributed denial of service attack, or DDoS attack, can wreak havoc on an internet-facing application. It’s a real concern for organizations who are considering moving their workloads to the cloud because DDoS attacks can be leveled at any internet-facing endpoint.</p>
<p>To help mitigate these threats, you can leverage Azure DDoS Protection. By combining this service with solid application design, you can protect yourself from dangerous DDoS attacks</p>
<p>Azure DDoS protection comes in two tiers: Basic and Standard.</p>
<p>The Basic Azure DDoS tier is automatically enabled as part of the Azure platform. It provides always-on traffic monitoring as well as real-time mitigation of many common network-level attacks. </p>
<p>The Standard tier comes with more bells and whistles. It offers additional mitigation capabilities over and above what the Basic tier provides. </p>
<p>Enabling DDoS Protection Standard is easy and doing so requires no changes to your applications. The protection policies offered in the standard tier are tuned through dedicated traffic monitoring and even leverage machine learning algorithms. </p>
<p>To use Azure DDoS Protection, you apply protection policies to the public IP addresses that are associated with resources deployed in virtual networks. These resources include things like Azure Load Balancer, Azure Application Gateway, and even Azure Service Fabric instances.</p>
<p>Azure DDoS Protection Standard can mitigate volumetric attacks, protocol attacks, and application-layer attacks.</p>
<p>To learn more about Azure DDoS Protection and detailed information on the attacks that it can mitigate, visit the URL that you see on your screen:</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/virtual-network/ddos-protection-overview">https://docs.microsoft.com/azure/virtual-network/ddos-protection-overview</a></p>
<p>The last topic I want to cover here is Virtual Network Service Endpoints. Service endpoints are used to extend the private address space of an Azure virtual network. They are also used to extend the identity of a virtual network to Azure services over a direct connection. </p>
<p>By leveraging service endpoints, you can lock down your Azure service resources to only your virtual networks. Traffic originating from your virtual network and headed toward your Azure service never leaves the Microsoft Azure backbone network.</p>
<p>Service endpoints provide improved security for Azure resources as well as optimal routing of Azure service traffic from your virtual network because they allow you to route service traffic directly from your virtual network to your service on the Microsoft Azure backbone network. Because the traffic remains on the Azure backbone network, you can audit and monitor your outbound Internet traffic from your virtual networks, through forced-tunneling - without impacting service traffic. </p>
<p>To learn more about Virtual Network Service Endpoints, visit the URL that you see on your screen:</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/virtual-network/virtual-network-service-endpoints-overview">https://docs.microsoft.com/azure/virtual-network/virtual-network-service-endpoints-overview</a></p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Congratulations! You’ve come to the end of “<a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/introduction/">Microsoft Azure Security Solutions</a>“. Let’s review what you’ve learned.</p>
<p>We kicked things off by taking a look at the shared responsibility model. You learned what the shared responsibility model is and how responsibilities are split between Microsoft and the customer.</p>
<p>After covering the shared responsibility model, we moved on to azure security services and technologies. We looked at several general azure security features, including azure security center, azure key vault, and azure monitor logs.</p>
<p>We then moved on to storage security, where you learned about Azure storage service encryption, shared access signatures, storage account keys, and Azure Storage Analytics.</p>
<p>Next, we looked at database security. You learned about Azure SQL firewall rules, Azure SQL Always Encrypted, Transparent Data Encryption, and Azure SQL Database Auditing.</p>
<p>Later on, in the course, we dove into identity and access management. You learned about role-based access control, Azure Active Directory, Azure AD B2B, Azure AD B2C, Azure AD Domain Services, and Azure Multi-Factor Authentication.</p>
<p>We wrapped up with <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/microsoft-azure-security-solutions-975/networking-security/">network security</a> options and features. </p>
<p>At this point, you should have a basic understanding of all of the key security options and features available in <a target="_blank" rel="noopener" href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>.</p>
<p>To learn more about Microsoft Azure security solutions, you can, and should, read Microsoft’s published documentation. Be sure to also watch for new courses on Cloud Academy, because we’re always publishing new ones. Be sure to give this course a rating, and if you have any questions or comments, please let us know. Thanks for watching and happy learning!</p>
<h1 id="4General-Azure-Security"><a href="#4General-Azure-Security" class="headerlink" title="4General Azure Security"></a>4<strong>General Azure Security</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/sentinel/overview">Azure Sentinel Security</a></p>
<h1 id="5Storage-Security"><a href="#5Storage-Security" class="headerlink" title="5Storage Security"></a>5<strong>Storage Security</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/storage/common/storage-service-encryption">Azure Storage Encryption</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/storage/common/storage-analytics">Azure Storage Analytics</a></p>
<h1 id="6Database-Security"><a href="#6Database-Security" class="headerlink" title="6Database Security"></a>6<strong>Database Security</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure">SQL Firewall Rules</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/sql/relational-databases/security/encryption/always-encrypted-database-engine">Always Encrypted overview</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/azure-sql/database/transparent-data-encryption-tde-overview?tabs=azure-portal">Transparent Data Encryption overview</a></p>
<h1 id="7Dynamic-Data-Masking"><a href="#7Dynamic-Data-Masking" class="headerlink" title="7Dynamic Data Masking"></a>7<strong>Dynamic Data Masking</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/azure-sql/database/dynamic-data-masking-overview">Dynamic Data Masking overview</a></p>
<h1 id="9Networking-Security"><a href="#9Networking-Security" class="headerlink" title="9Networking Security"></a>9<strong>Networking Security</strong></h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/virtual-network/virtual-network-for-azure-services">Virtual Network for Azure Services</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways">VPN Gateways in Azure</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/expressroute/expressroute-faqs">ExpressRoute overview</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/web-application-firewall/overview">Web Application Firewall overview</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/virtual-network/ddos-protection-overview">Azure DDoS Protection</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/azure/virtual-network/virtual-network-service-endpoints-overview">Virtual Network Service Endpoints</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-Lab-Securing-Azure-Storage-Account-using-Private-Endpoints-19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-Lab-Securing-Azure-Storage-Account-using-Private-Endpoints-19/" class="post-title-link" itemprop="url">AZ-500-Lab-Securing-Azure-Storage-Account-using-Private-Endpoints-19</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-15 10:11:49 / Modified: 10:11:50" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:49-04:00">2022-11-15</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-Lab-Securing-Azure-Storage-Account-using-Private-Endpoints-19/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-Lab-Securing-Azure-Storage-Account-using-Private-Endpoints-19/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-Designing-an-Azure-Network-Implementation-18/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-Designing-an-Azure-Network-Implementation-18/" class="post-title-link" itemprop="url">AZ-500-Designing-an-Azure-Network-Implementation-18</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-15 10:11:47" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:47-04:00">2022-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-19 14:54:16" itemprop="dateModified" datetime="2022-11-19T14:54:16-04:00">2022-11-19</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-Designing-an-Azure-Network-Implementation-18/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-Designing-an-Azure-Network-Implementation-18/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Welcome to “Designing an Azure Network Implementation”. My name’s Guy Hummel and I’ll be helping you with the network aspects of architecting an Azure solution. I’m the Azure Content Lead at Cloud Academy and I have over 10 years of experience with cloud technologies. If you have any questions, feel free to connect with me on LinkedIn and send me a message, or send an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>This course is intended for people who want to become Azure cloud architects.</p>
<p>To get the most from this course, you should have a general knowledge of networking.</p>
<p>We’ll start with an overview of virtual networks, which are the fundamental building blocks of Azure networking. Then I’ll go over the different options for load balancing traffic to applications. Next, you’ll see how to connect Azure virtual networks to external networks, such as in your own datacenter. After that, I’ll explain how to secure your Azure networks. Finally, I’ll show you how to design connectivity for hybrid applications that access on-premises data.</p>
<p>By the end of this course, you should be able to design Azure virtual networks; design external connectivity for Azure virtual networks; design network security strategies for Azure; and design connectivity for hybrid Azure applications.</p>
<p>We’d love to get your feedback on this course, so please give it a rating when you’re finished.</p>
<p>Now, if you’re ready to learn how to get the most out of Azure’s network services, then let’s get started.</p>
<h1 id="Azure-Virtual-Networks"><a href="#Azure-Virtual-Networks" class="headerlink" title="Azure Virtual Networks"></a>Azure Virtual Networks</h1><p>As soon as you deploy more than one virtual machine in Azure, you’ll probably have to get them to communicate with each other. You can do that easily by putting them in the same Azure virtual network (or vnet). You can put lots of other Azure services in vnets, too, such as Service Fabric, Kubernetes Service, and HDInsight. You can also create multiple vnets and they will all be isolated from each other.</p>
<p>When you create a virtual network, you specify what IP address space to use. You also need to create at least one subnet that uses a portion of the vnet’s IP address space. Then an Azure DHCP server will assign addresses from that subnet’s IP address range to the network interfaces on the VMs.</p>
<p>If you need name resolution so the VMs in a virtual network can communicate with each other more easily, then the easiest solution is to use Azure-provided name resolution, which doesn’t require any configuration. If you need additional capabilities, such as name resolution for your on-premises servers, then you can provision your own DNS server in the vnet. You can still let Azure take care of the name resolution for your VMs by having your DNS server forward those types of queries to Azure.</p>
<p>If you want to use custom domain names or if you need name resolution between virtual networks, then one option is to use the Private Zones feature of Azure DNS. It’s specifically designed for these scenarios.</p>
<p>By default, all resources in a virtual network can send outbound requests to the internet. If you need any of your resources to accept <em>inbound</em> connections from the internet, then you can assign public IP addresses to them. Bear in mind that there’s an hourly charge for reserving public IP addresses, whether you’re using them or not.</p>
<p>Not every type of Azure service can reside in a virtual network, particularly storage and databases. You can get a secure connection between those services and your vnets, though, by using a virtual network service endpoint. This lets you extend the address space in your vnet to the other service and it ensures that the traffic between them stays on the Azure backbone network. Service endpoints are configured on specific subnets. The services supported by service endpoints are Azure Storage, SQL Database, Cosmos DB, and SQL Data Warehouse.</p>
<p>And that’s it for virtual network design.</p>
<h1 id="Load-Balancing"><a href="#Load-Balancing" class="headerlink" title="Load Balancing"></a>Load Balancing</h1><p>Scaling an application horizontally by adding more VMs is a great solution, but how do you distribute requests to all of those VMs? You have two options: Azure Load Balancer and Azure Application Gateway.</p>
<p>Azure Load Balancer is the right choice for the most common scenarios. It acts as a frontend that distributes incoming traffic to a pool of backend VMs. It supports TCP and UDP applications. By default, it distributes requests equally to the VMs. If the application layer served by these VMs is stateless, then this distribution method will work well. If it’s stateful, though, then you’ll need to use source IP affinity mode. In this mode, all requests from the same IP address will always go to the same VM. You should avoid designing this sort of solution, though, because if a VM goes down, then all of its clients will be down.</p>
<p>If you have a stateless application layer and a VM goes down, then a health probe will detect that the instance is no longer available and it will remove it from the pool. Since no client sessions are tied to that specific instance, all of their requests will go to healthy instances.</p>
<p>A health probe is typically an HTTP request to an instance. By default, the load balancer sends a probe every 15 seconds, but you can change the timing if you want. If your VMs are hosting something other than a web application, then you can configure the health probe to try to establish a TCP session on a specific port.</p>
<p>If you’re using the load balancer for an internet-facing application, then you need to assign a public IP address to it. In this scenario, it’s called a public load balancer. All of the VMs behind it still use private IP addresses, though, and all incoming traffic from the internet must go through the load balancer.</p>
<p>When a VM initiates an <em>outbound</em> connection, then the load balancer performs network address translation (or NAT). In other words, it translates the VM’s private IP address to the public IP address on the load balancer plus a port that it maps to that VM. Because it has this capability, the load balancer can be useful even in situations where you don’t need load balancing. If you need a NAT gateway on Azure, then you can just deploy a public load balancer that only manages outbound connections.</p>
<p>If you have an internal application that shouldn’t be exposed to the internet, then don’t assign a public IP address to the load balancer. Instead, it will use a private IP address. In this configuration, it’s known as an internal load balancer.</p>
<p>You can also use both types of load balancers for the same application. For example, you could use a public load balancer for the web tier and a private load balancer for the business logic tier.</p>
<p>The other way to provide load balancing is to use Azure Application Gateway. Unlike Azure Load Balancer, which operates at layer 4 of the network stack, Application Gateway operates at layer 7. This gives you more flexibility in how you can route requests. Instead of just routing based on IP addresses and ports, it can route based on the URL. For example, if the URL of the request begins with the path to your videos folder, then you could tell the application gateway to route the request to your pool of video servers.</p>
<p>You can do lots of other handy things with it too. A few examples are redirecting all HTTP requests to HTTPS, serving traffic to multiple websites, and supporting websockets.</p>
<p>One especially useful feature is SSL or TLS termination. Because encrypting and decrypting traffic is computationally expensive, you can offload that task to the application gateway so the web servers don’t have to do it. However, if your security requirements won’t allow any unencrypted traffic, then you shouldn’t do this, because the traffic between the gateway and the backend web servers would be unencrypted.</p>
<p>Speaking of security, one of the biggest reasons for using an application gateway is the built-in web application firewall. It protects your applications from common exploits, such as SQL injection and cross-site scripting attacks.</p>
<p>Both of Azure’s load balancing options work within a single region. If you want to provide load balancing for VMs or web apps that are distributed across multiple regions, then you’ll need to use Azure Traffic Manager. This service redirects traffic at the DNS level. It <em>doesn’t</em> act as a gateway—it simply tells the client which address it should connect to.</p>
<p>For example, suppose you have an application that’s deployed in 3 regions: East US, West Europe, and Southeast Asia. To minimize the network latency for every user, you could configure Traffic Manager to check where each request is coming from and direct it to the closest region. This is called performance routing. If one of the regions goes down, then Traffic Manager can redirect requests to the next nearest region. This is called priority routing.</p>
<p>There are also two other routing methods available. With weighted routing, it will distribute requests either evenly among the endpoints or according to weights, such as 50% to endpoint 1, 30% to endpoint 2, and 20% to endpoint 3. Geographic routing is similar to performance routing because it looks at the client’s location. The difference is that you can specify exactly which region you want a client to connect to based on their location. For example, if your European customers require that their data stays in Europe, then you could always route them to a European region.</p>
<p>In most cases, you’ll want to use Traffic Manager in conjunction with one of the other two load balancing solutions. You could even use all three of them together. For example, within each region, you could have an application gateway for SSL offloading and an Azure load balancer to distribute requests to the VMs.</p>
<p>Traffic Manager will also work with non-Azure endpoints, such as applications that are on-premises or in another public cloud.</p>
<p>And that’s it for load balancing.</p>
<h1 id="External-Connectivity"><a href="#External-Connectivity" class="headerlink" title="External Connectivity"></a>External Connectivity</h1><p>When most organizations migrate to the cloud, they continue to have a significant amount of infrastructure on-premises and they need to connect those local resources with what they’ve deployed in the cloud. Microsoft provides several ways to do this.</p>
<p>The first decision to make is whether you’ll connect them over the internet. You might not want to do this if you’re concerned about the reliability, performance, or security of this method. If any or all of those concerns are deal-breakers for your organization, then you should choose ExpressRoute.</p>
<p>There are four ways to connect to Azure using ExpressRoute. If your infrastructure is colocated in a datacenter that has a cloud exchange, then you can get an Azure cross-connection through the colocation provider. If you’re not in that sort of facility, but you use a WAN provider, then they can make the Azure cloud look like one of your branch offices. The third option is to use a point-to-point ethernet provider.</p>
<p>All three of these methods use a service provider to connect your infrastructure to Azure. Alternatively, if your infrastructure is located in what Microsoft calls an ExpressRoute location, then you can use ExpressRoute Direct. With this method, you connect to Azure directly without going through a service provider. One advantage of ExpressRoute Direct is that it can support connections up to 100 gigabits per second, which is 10 times as much as you can get through a service provider.</p>
<p>Regardless of which of these methods you use, you’ll have a redundant layer 3 connection that doesn’t go over the internet. Routing is handled using BGP.</p>
<p>If you’re okay with using encrypted connections over the internet instead of taking on the expense of a direct connection, then you can put an Azure VPN Gateway in a virtual network. Once you’ve set that up, there are two ways to to create an encrypted connection to it.</p>
<p>For a site-to-site connection, you install a VPN device with a public IP address at your on-premises location. Then you deploy a VPN gateway in your Azure virtual network. It must be in a gateway subnet that doesn’t have any VMs in it. You also have to make sure that the IP address space of the virtual network doesn’t overlap with the address space of your on-premises network. When both sides are ready, you can set up an IPsec tunnel between the two networks.</p>
<p>If you want to connect multiple sites to the same virtual network, you can set up a VPN device at each location and connect them all to the same VPN gateway. You can only have one VPN gateway per virtual network. This is known as a multi-site configuration. All connections to the same VPN gateway share its available bandwidth.</p>
<p>The second way to connect is called point-to-site. With this method, you connect individual computers to the VPN gateway in your virtual network. You don’t have to use a VPN device, so this is suitable for remote workers and telecommuters. It uses the Secure Socket Tunneling Protocol (or SSTP) on Windows devices and IKEv2 VPN on Macs.</p>
<p>Point-to-site connections use certificate-based authentication. To set this up, first you need either a root certificate from a certificate authority or a self-signed root certificate that you create yourself. Next, you generate client certificates from the root certificate. Then you need to install a client certificate on each client device that will be using a point-to-site connection.</p>
<p>You can connect to the same VPN gateway with both site-to-site and point-to-site methods as long as you can use the same configuration for both. The main issue is what type of routing you configure the VPN gateway to use. Site-to-site connections can use either route-based or policy-based routing. For most scenarios, route-based is the best option, because it’s dynamic, requires less maintenance, and can tolerate failures in the network path. Policy-based routing is static, so you have to maintain all of the routes manually. You’d only want to choose this option is you require strict control of your routing.</p>
<p>Multi-site and point-to-site configurations have to use route-based routing, so they can’t share a VPN gateway with a site-to-site configuration that uses policy-based routing, because a VPN gateway can only be configured to support one type of routing.</p>
<p>Even when you’re using ExpressRoute to connect to your Azure virtual networks, there’s still a reason to use a VPN gateway. You can set up a site-to-site connection as a failover in case your ExpressRoute connection goes down. Traffic would only go through the VPN tunnel if the ExpressRoute connection is not available.</p>
<p>You can also use VPN gateways to connect two virtual networks, but it’s much easier to use virtual network peering, which is a newer feature. To do it, go into one of the virtual networks in the portal, select Peerings from the menu, and click Add. Give it a name. I’ll use the name of the first virtual network dash and the name of the second virtual network. To complete the connection, you also need to create a peering in the other direction in the second virtual network. Then choose the subscription where the second virtual network resides, and finally, choose the second VNet.</p>
<p>Okay, it’s done. The peering from vnet1 to vnet2 is showing a status of “Connected”. Let’s check the second peering as well. It’s connected, too. Once the status of both peerings is “Connected”, instances in the two VNets will be able to communicate with each other as if they were in the same VNet.</p>
<p>You can even do this with virtual networks that are in different regions, which is known as global vnet peering. Traffic between them still goes through the Microsoft backbone network rather than the internet, so the connection is private and has high bandwidth and low latency.</p>
<p>When you create a virtual network, Azure automatically creates a route table for each of the subnets. It then adds system default routes to each table. For example, it creates routes so all of the instances within the virtual network can connect to each other. It also creates a catch-all route that sends traffic to the internet if no other route is applicable. If you don’t want traffic to go to the internet, then you need to override it with a custom route, also known as a user-defined route.</p>
<p>Another example of when you’d use a custom route is if you set up a virtual appliance, such as a firewall, and you need to route traffic through it. In this case, in addition to adding a custom route to the table, you’d also need to enable IP forwarding on the network interface that’s attached to the virtual appliance. Otherwise, Azure would prevent it from forwarding traffic.</p>
<p>So far, I’ve been talking about connectivity for VM instances, but it’s also possible to get the same networking benefits with containers. When you create an Azure Kubernetes Service cluster, you can select the advanced networking option and specify a virtual network and subnet to put the cluster in. Then the nodes in the cluster will use the Azure Container Networking Interface plugin to connect to the virtual network. With this setup, Kubernetes pods can communicate with the rest of your network, including your on-premises network through ExpressRoute or a VPN gateway.</p>
<p>And that’s it for external connectivity.</p>
<h1 id="Security-Strategies"><a href="#Security-Strategies" class="headerlink" title="Security Strategies"></a>Security Strategies</h1><p>When you put an application on the web, you can be sure that hackers and bots will probe it for weaknesses soon afterward. If they find weaknesses, then they’ll likely compromise it in either an obvious way, or even worse, in a way that you don’t notice. So before you deploy any web applications, you need to architect a security solution.</p>
<p>The first step is for your application developers to design secure code. That’s a good start, but it’s difficult to ensure that every application can withstand attacks. So you’ll need to put some type of centralized protection in front of all of your applications.</p>
<p>Azure provides a lot of great network security features to help with this, such as DDoS protection, virtual network isolation, and network security groups (which we’ll talk about more in a minute), but you should also add a layer that’s designed to combat a broad array of threats to web apps.</p>
<p>One good option is the Web Application Firewall that comes with the Azure Application Gateway. It’s based on the well-known Open Web Application Security Project (or OWASP) core rule sets. It protects against attacks like:</p>
<ul>
<li>SQL injection</li>
<li>Cross-site scripting</li>
<li>HTTP request smuggling</li>
<li>Remote file inclusion, and</li>
<li>HTTP protocol violations and anomalies</li>
</ul>
<p>It also detects common misconfigurations in web servers like Apache or IIS.</p>
<p>You can run it in either detection or prevention mode. In detection mode, it simply logs all security alerts. In prevention mode, it actually blocks the attacks that it detects. To monitor the firewall’s activities in either mode, you can look in Azure Monitor, Azure Security Center, and Log Analytics, because they’re all integrated with it.</p>
<p>Although Microsoft’s Web Application Firewall is very capable, you may still want to use a different solution, either because your organization has standardized on a third-party security product or because you need a firewall with additional features. Fortunately, a number of vendors, such as Barracuda and Palo Alto Networks, provide pre-built virtual machines that you can get from the Azure Marketplace. These are known as network virtual appliances.</p>
<p>Ideally, these appliances should be put in a demilitarized zone (or DMZ). This is a perimeter network that keeps unwanted traffic, including attacks, from getting through to your backend network. In this example, the perimeter network and the backend network are two subnets within the same virtual network.</p>
<p>To control the flow of traffic between these two subnets, you can use an NSG (which stands for network security group). An NSG contains security rules that allow or deny traffic to resources in a subnet of a virtual network. They’re similar to firewall rules. You can also apply NSGs to the network interfaces of specific VMs (if they were deployed using Resource Manager) or to all of the traffic to and from specific VMs (if they were deployed using the classic model), but it’s usually better to apply them to an entire subnet.</p>
<p>Here’s an example NSG. It has inbound and outbound rules. The most important are the inbound rules. The first inbound rule allows DNS traffic over port 53 from anything inside the virtual network to the DNS server, which has this address.</p>
<p>Notice that I didn’t have to specify an address range for the source. That’s because Microsoft lets you use service tags instead. This greatly simplifies your rules and makes them easier to read and understand. For example, the VirtualNetwork tag includes the virtual network address space, all connected on-premises address spaces, and all peered virtual networks or virtual networks connected through a VPN gateway. If you had to specify all of those address ranges yourself, the rule would be pretty complicated and it would be easy to make a mistake when creating the rule. Another advantage is that the addresses in a service tag are automatically updated when something changes, so you don’t need to update your rules. In case you’re wondering, you can’t create your own service tags. You can only use the predefined ones.</p>
<p>The second rule allows RDP traffic over port 3389 from the internet to this virtual network so you can remotely administer the VMs. Notice that “Internet” is also a service tag again. The third rule allows traffic to the firewall, which has this address. The next one allows traffic between the web server and the app servers. The destination is a list of both addresses.</p>
<p>After all of these allow rules, we add deny rules. The first one denies all traffic from the internet to this virtual network. Since it has a lower priority than this allow rule, it will only be applied for traffic that doesn’t match the allow rule. Finally, we deny all traffic between the frontend and backend subnets that wasn’t explicitly allowed above. These three rules at the bottom are added by default. You can’t change or delete them, but you can override them with the rules above, which is what we’ve done. To activate this NSG, you’d need to associate it with both the frontend and backend subnets.</p>
<p>By default, the outbound rules allow all outgoing internet traffic. This could be dangerous as your VMs might accidentally leak sensitive information to the internet. You can add a security layer by using forced tunneling.</p>
<p>With this configuration, all internet-bound traffic has to go through your on-premises network before going out to the internet. This gives you the opportunity to run this traffic through an inspection and auditing system that’s installed on-premises.</p>
<p>The way to do this is pretty straightforward. You create a user-defined default route that points to the VPN gateway in your virtual network. Then, on the VPN gateway, you set the default site to the on-premises location where you want to redirect the traffic. If you’re using ExpressRoute rather than a site-to-site VPN, then instead you advertise a default route via the BGP peering sessions.</p>
<p>Since forced tunneling can significantly slow down internet-bound traffic, you usually shouldn’t use it on frontend web servers. It’s more suitable for backend servers.</p>
<p>And that’s it for security strategies.</p>
<h1 id="Connectivity-for-Hybrid-Applications"><a href="#Connectivity-for-Hybrid-Applications" class="headerlink" title="Connectivity for Hybrid Applications"></a>Connectivity for Hybrid Applications</h1><p>In an earlier lesson, you learned how to make external connections from Azure, especially using ExpressRoute or a VPN. Those solutions are great, but if you only need external connectivity for a single application, then they’re probably overkill, because you need to modify your network to use them. Fortunately, there are much simpler, more focused solutions that you can use instead.</p>
<p>Azure provides many services to help you build hybrid applications that combine Azure and on-premises resources. Which one you use depends on what you’re trying to do. Azure WCF Relay lets you expose Windows Communication Foundation services in on-premises applications to Azure. Azure Relay Hybrid Connections is a newer service that does the same thing for WebSockets and HTTP rather than WCF. You can also use Hybrid Connections from within Azure App Service. The Azure Data Management Gateway, now known as the Self-hosted Integration Runtime, lets you copy data between Azure and on-premises data stores. Finally, the Azure On-Premises Data Gateway connects on-premises data sources with Azure Analysis Services.</p>
<p>I have to admit that I get the Data Management Gateway and the On-Premises Data Gateway confused sometimes, because their names sound very similar, even though they’re totally different. Maybe that’s why Microsoft renamed Data Management Gateway to Self-hosted Integration Runtime. Of course, the new name doesn’t really help you remember what it does either. Oh well, after you’ve worked with them for a while, you’ll remember which one is which.</p>
<p>Azure Relay service allows you to expose on-premises applications to Azure without having to open a port on your firewall. The way this works is the server and the client communicate through an Azure Service Bus namespace. The on-premises application communicates with Service Bus over HTTP or HTTPS. Since these ports are already open on most firewalls, no changes are needed. Of course, both the server and the client need to include code that connects to Azure Relay.</p>
<p>Originally, Azure Relay was called Service Bus Relay and it only worked with Windows Communication Foundation services. Microsoft renamed it WCF Relay, because they created an alternative feature that doesn’t use WCF. It’s called Hybrid Connections and it works with WebSockets and HTTP. WCF Relay and Hybrid Connections exist as side-by-side alternatives in the Azure Relay service.</p>
<p>Microsoft considers WCF Relay to be a legacy service, though. If you have existing WCF-based applications, then WCF Relay is the way to go, but if you’re developing new applications, you should write them with WebSockets or HTTP instead and use Hybrid Connections. The biggest advantage of using WebSockets or HTTP is that they’re open standards, so you can use them in any language on any platform that supports them.</p>
<p>Azure App Service has a Hybrid Connections feature as well, but it works slightly differently. Suppose you have an Azure app that needs to access an on-premises database. You’d have to install a Hybrid Connection Manager (or HCM) in the network where the database resides. It runs on Windows Server 2012 and higher. Both sides would still connect to Service Bus, but the on-premises side would connect through the HCM to get to Service Bus. This would set up a TCP tunnel between the app and the database. The connection would be over HTTPS. Authentication and authorization would be done using a shared access signature.</p>
<p>By the way, if you already have a VPN connection between an Azure virtual network and an on-premises location, then App Service can use it through its VNet Integration feature. OK, on to the Self-hosted Integration Runtime (formerly known as the Data Management Gateway). This is an on-premises client that works with Azure Data Factory, so let’s go over how Data Factory works before diving into the Integration Runtime client.</p>
<p>Data Factory is used to move and transform data. For example, suppose that every night you want to copy records from SQL Database to Data Lake Store, then run a Spark job on an HDInsight cluster to process that data, and finally, store the processed data in SQL Data Warehouse. You could automate this process by creating a Data Factory pipeline that consists of three activities, one for each step.</p>
<p>Before creating the pipeline and activities, you’d need to define the data sources and sinks. First, you’d create a linked service for each data source. A linked service contains the connection information Data Factory will use to access the data. For example, the linked service for the input data would give the connection string for the SQL Database instance. Then you’d create a dataset that tells Data Factory which data to access. In this case, it would be the name of the table. You’d also need to create linked services and datasets for Data Lake Store and SQL Data Warehouse.</p>
<p>Now you could create a pipeline with 3 activities in it, one to copy the data from SQL Database to Data Lake Store, one to spin up an HDInsight cluster and run a Spark job, and one to copy the output data to SQL Data Warehouse. Once the pipeline is ready, you could run it manually, but it would be much easier to schedule it to run every night automatically, which you could do by setting a schedule trigger.</p>
<p>OK, so that’s how Data Factory normally works, but how do you get it to work with external data? That’s where the Self-hosted Integration Runtime comes in. You install it in your on-premises environment, register it with Azure, and connect it to your SQL Server instance. Then, when you create the linked service for the data source, you give it the connection details for the SQL Server instance, but you tell it to connect using the integration runtime.</p>
<p>Data Factory supports two other integration runtimes as well. The Azure Integration Runtime is the default, so you don’t normally need to explicitly create it. The Azure-SSIS Integration Runtime lets you run SQL Server Integration Services packages on Azure. An SSIS package is actually kind of like a Data Factory pipeline. It contains a series of tasks to transform data. If you already have SSIS packages that you’ve been running locally, then this is a great way to lift and shift them to Azure.</p>
<p>When you create an SSIS Integration Runtime, you are provisioning a cluster that can run SSIS packages. Once it’s provisioned, you can even use SQL Server Data Tools or SQL Server Management Studio to deploy packages to it. However, the SSIS integration runtime incurs charges while it’s running, so to save money, you can use Data Factory to start it, execute an SSIS package, and stop it. This is similar to how Data Factory spins up an HDInsight cluster to process data. If your SSIS packages need to access on-premises data, then you have to connect the integration runtime to a virtual network that’s connected to your on-premises environment.</p>
<p>Alright, now we’ll move on to the Azure On-Premises Data Gateway. This is something you install onsite that will let Azure Analysis Services retrieve on-premises data. First, you install it as a Windows service. Then you register it with the Gateway Cloud Service. Next, you create a gateway resource in Azure. Finally, you connect your Azure Analysis Services servers to your gateway resource.</p>
<p>Once you have it set up, your data models can access your on-premises data sources through the gateway resource, which goes through Azure Service Bus to reach the On-Premises Data Gateway, which connects to your data sources.</p>
<p>As you’ve seen, there are usually better ways to connect specific on-premises resources to Azure than using a VPN or ExpressRoute. Another example of this is with domain services. Most Azure customers already have a locally-installed Active Directory Domain, so if you have a direct connection to Azure, then it might seem like a good idea to just connect your Azure VMs to your on-premises domain servers. Although that would work, it could potentially be unreliable or slow, especially over a VPN.</p>
<p>A better solution is to use Azure Active Directory Domain Services. I won’t go into the details of synchronizing it with your on-premises domain, because that’s covered in our Active Directory course. I do want to point out a couple of things to watch out for when you’re joining an Azure VM to a domain, though. First, the VM needs to be in a virtual network that’s connected to the one where your managed domain resides. Otherwise, it won’t be able to join. Second, the user whose credentials you specify for joining the VM to the domain has to be a member of the Azure AD domain controller administrators group or it won’t work.</p>
<p>And that’s it for hybrid application connectivity.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>I hope you enjoyed learning about Azure’s network services. Let’s do a quick review of what you learned.</p>
<p>An Azure virtual network has an IP address space and at least one subnet. IP addresses are assigned by an Azure DHCP server. VMs in a virtual network can communicate with each other using Azure-provided name resolution. You can provision your own DNS server in the vnet to resolve other addresses. Use Azure DNS Private Zones if you need custom domain names or name resolution between virtual networks. To accept inbound connections from the internet, assign public IP addresses to resources in a vnet. A virtual network service endpoint lets you extend the address space in your vnet to services that can’t reside in a vnet, such as Azure Storage and Azure SQL Database.</p>
<p>Azure Load Balancer acts as a frontend that distributes incoming traffic to a pool of backend VMs. It supports TCP and UDP applications. By default, the load balancer sends a probe to each backend VM every 15 seconds. If a health probe fails, then the VM is removed from the pool. A public load balancer has a public IP address for internet-facing applications. When a VM initiates an outbound connection, the load balancer performs network address translation. An internal load balancer doesn’t have a public IP address.</p>
<p>The other way to provide load balancing is to use Azure Application Gateway, which operates at layer 7 of the network stack. It can route based on the URL, redirect all HTTP requests to HTTPS, serve traffic to multiple websites, support WebSockets, and handle SSL offloading.</p>
<p>To provide load balancing across multiple regions, use Azure Traffic Manager, which redirects traffic at the DNS level. Performance routing directs a request to the closest region. Priority routing redirects requests to the next best region if there’s an outage. Weighted routing distributes requests either evenly among the endpoints or according to weights. Geographic routing directs a request to a specific region based on the client’s location.</p>
<p>ExpressRoute provides a redundant layer 3 connection between your on-premises location and Azure. You can connect using a colocation provider, a WAN provider, or a point-to-point ethernet provider. Routing is handled using BGP.</p>
<p>To connect over the internet instead, deploy an Azure VPN Gateway in a virtual network. In a site-to-site configuration, you create an IPsec tunnel to the gateway through an on-premises VPN device. In a multi-site configuration, there’s a VPN device at each remote location, but still only one VPN Gateway in the Azure virtual network. Point-to-site connections use certificate-based authentication instead of a VPN device. This configuration is intended for individual computers or devices.</p>
<p>Multi-site and point-to-site configurations have to use route-based routing, which is dynamic. Site-to-site connections can use either route-based or policy-based routing, which is static. Policy-based routing requires more maintenance, so it should only be used when necessary. Also, a VPN gateway can only be configured to support one type of routing, so a site-to-site configuration that uses policy-based routing can’t share a VPN gateway with multi-site or point-to-site configurations. If you have an ExpressRoute connection, you can set up a site-to-site connection as a failover in case your primary connection goes down.</p>
<p>Virtual network peering allows instances in two virtual networks to communicate with each over the Microsoft backbone network, even if they’re in different regions.</p>
<p>Each subnet in a virtual network has a route table with system default routes in it. You can override these routes with custom routes, also known as user-defined routes.</p>
<p>If you put an Azure Kubernetes Service cluster in a subnet of a virtual network, then the nodes in the cluster can use the Azure Container Networking Interface plugin to communicate with the rest of the network.</p>
<p>The Web Application Firewall that comes with the Azure Application Gateway protects against attacks, such as SQL injection and cross-site scripting. You can run it in either detection or prevention mode. Alternatively, you could use a network virtual appliance from a third-party vendor. These appliances should be put in a demilitarized zone that keeps unwanted traffic from getting through to your backend network.</p>
<p>A network security group contains rules that allow or deny traffic to resources in a subnet of a virtual network. You can also apply NSGs to the network interfaces of specific VMs if they were deployed using Resource Manager.</p>
<p>Service tags simplify your rules. For example, the VirtualNetwork tag includes the virtual network address space, all connected on-premises address spaces, and all peered virtual networks or virtual networks connected through a VPN gateway.</p>
<p>By default, the outbound rules allow all outgoing internet traffic. To force all internet-bound traffic to go through an inspection and auditing system first, use forced tunneling to your on-premises network.</p>
<p>Azure WCF Relay lets you expose Windows Communication Foundation (or WCF) services in on-premises applications to Azure without having to open a port on your firewall. Azure Relay Hybrid Connections is a newer service that does the same thing for WebSockets and HTTP rather than WCF. You can also use Hybrid Connections from within Azure App Service, but you have to install a Hybrid Connection Manager in the network where the database resides. The Azure Data Management Gateway, now known as the Self-hosted Integration Runtime, lets Azure Data Factory copy data between Azure and on-premises data stores. The Azure On-Premises Data Gateway connects on-premises data sources with Azure Analysis Services.</p>
<p>To copy on-premises data using Data Factory, first install the Self-hosted Integration Runtime on-premises, register it with Azure, and connect it to your local data source. Next, create a linked service that accesses the data source via the integration runtime. Also create a linked service for the Azure data sink. Then create datasets for the data source and data sink. Finally, create a pipeline and a copy activity.</p>
<p>An Azure-SSIS Integration Runtime is an Azure cluster that lets you run SQL Server Integration Services packages.</p>
<p>To join a VM to a domain, make sure it’s in a virtual network that’s connected to the one where your Azure Active Directory managed domain resides.</p>
<p>Now you know how to design Azure virtual networks; design external connectivity for Azure virtual networks; design network security strategies for Azure; and design connectivity for hybrid Azure applications.</p>
<p>To learn more about Azure’s network services, you can read Microsoft’s documentation. Also watch for new Microsoft Azure courses on Cloud Academy, because we’re always publishing new courses. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks and keep on learning!</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-Configuring-Azure-Application-and-Data-Security-17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-Configuring-Azure-Application-and-Data-Security-17/" class="post-title-link" itemprop="url">AZ-500-Configuring-Azure-Application-and-Data-Security-17</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-15 10:11:46" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:46-04:00">2022-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-19 14:50:12" itemprop="dateModified" datetime="2022-11-19T14:50:12-04:00">2022-11-19</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-Configuring-Azure-Application-and-Data-Security-17/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-Configuring-Azure-Application-and-Data-Security-17/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hi, and welcome to this Configuring Azure Application and Data Security Course. My name is Hallam Webber and I will be your instructor for this course. This is an intermediate-level course suited to DBAs, system analysts, programmers, or anyone wanting to learn how to make use of the security features available with Microsoft Azure cloud services. It will help to have an understanding of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/azure-virtual-networking/course-intro-18/">cloud services in general</a> and, more specifically, <a target="_blank" rel="noopener" href="https://cloudacademy.com/learning-paths/architecting-microsoft-azure-solutions-70-535-exam-preparation-220/">Microsoft’s Azure offering</a>, as well as basic database and <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/azure-virtual-networking/course-intro-18/">networking</a> concepts.</p>
<p>In this scenario, we will look at securing and protecting your applications and data when moving from an on-premise to an Azure environment. Security and protection are broad topics and have different meanings in the context of different types of data and services. The Azure offerings allow you to implement different and more tightly defined security than on-premise, and at the same time free you from many of the basic infrastructure concerns. We will look at configuring security policies to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/data-classification-part-1/">classify</a>, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/how-to-protect-your-data/">protect</a>, and manage data, how to configure data infrastructure security, how to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/how-to-design-a-secure-azure-application/">securely deploy your applications</a>, and what <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/security-in-azure-app-service/">Azure security features</a> are available to your applications. We welcome all comments and feedback, so please feel free to reach out to us at <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> with any questions or comments. Now let’s begin.</p>
<h1 id="Data-Classification-Part-1"><a href="#Data-Classification-Part-1" class="headerlink" title="Data Classification Part 1"></a>Data Classification Part 1</h1><p>Microsoft uses the following data classifications when <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">implementing data protection</a> policies. </p>
<p>Personal data is any data that relates to an identifiable natural person, such as a name or contact information. This can include user IDs that a Microsoft service assigns to a user, although this is considered pseudonymous, as it cannot alone necessarily identify an individual. </p>
<p>Administrator data is the personal data and contact information about individuals that sign up for Microsoft services. The administrator data also includes aggregated users’ information and other data associated with the administrator account. </p>
<p>Object metadata is the setting data associated with all Microsoft services that you sign up to. This includes Azure storage account details, virtual machines, SQL databases and their tables, columns, headings, and forms. This does not include the personal administrator data. Customers should not include personal data, or other sensitive information in object metadata, because object metadata may be shared across global Microsoft systems to facilitate operations and troubleshooting. </p>
<p>Payment data is the information customers provide when making online purchases with Microsoft. It may include a credit card number and security code, name and billing address, and other financial data. Microsoft uses payment data to complete transactions, as well as to detect and prevent fraud.</p>
<p>Support and consulting data is all data provided to Microsoft by, or on behalf of, a customer, typically in a support scenario, or when engaging Microsoft professional services. This data may be in any form, including text, sound, video, or images, and even software. The data may be acquired via phone, chat, email, or webforms.</p>
<h1 id="How-to-Protect-Your-Data"><a href="#How-to-Protect-Your-Data" class="headerlink" title="How to Protect Your Data"></a>How to Protect Your Data</h1><p>You can <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">classify and protect your data </a>with a combination of Azure Information Protection and Azure Rights Management. </p>
<p>Azure Information Protection can automatically classify your data by using clear text labels that are inserted into the metadata of a document, based on rules set up by the administrator. </p>
<p>Azure Rights Management uses encryption, identity, and authorization policies to help secure your files and email, and it works across multiple devices - phones, tablets, and PCs. </p>
<p>Information can be protected both within your organization and outside your organization because that protection remains with the data, even when it leaves your organization’s boundaries. </p>
<p>When you activate Azure Information Protection, there are five default labels. They’re Personal, Public, General, Confidential, and Highly Confidential. Implementing Azure Information Protection involves activating the service in the Azure portal, adding default labels to the default Global policy, and installing the Information Protection client software on users’ computers.</p>
<h1 id="AIP-Custom-Rule"><a href="#AIP-Custom-Rule" class="headerlink" title="AIP Custom Rule"></a>AIP Custom Rule</h1><p>You have the ability to set up your own custom labels. You can do this by going into Azure Information Protection and clicking on the labels tag, and clicking Add new label. Give the label a name and a description. You can then select a color for the label, and also whether you want to enable automatic protection. When you set up the protection, you can either set permissions, which allows you to configure the file expiration date, and whether or not to allow offline access. Or you can allow the user to set the permissions on the document at the time of creation. You then set the conditions that will activate the protection rule associated with the label.</p>
<p>There are a large number of predefined conditions, but you can also create your own custom condition. The custom condition will be activated when the text pattern you’ve specified appears in a document. After you have created your label and any associated protection conditions and rules, you must associate it with a policy. Do this by selecting a policy from information protection policies. Go into the policy and add the newly created label. To enable <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">data classification and protection</a> on client machines, you must install the AzInfoProtection software. With this installed, applications like Office 365 will get the information protection toolbar. When a phrase is typed that matches one of the conditions in your rules, the user will be prompted to apply the associated label. Information protection can also be applied through the context menu of Windows Explorer by selecting a file, right-clicking and selecting Classify and protect.</p>
<h1 id="Data-Classification-Part-2"><a href="#Data-Classification-Part-2" class="headerlink" title="Data Classification Part 2"></a>Data Classification Part 2</h1><p>Azure supports <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">data classification </a>for databases when you enable Advanced Threat Protection. This will incur a small charge. Data classification can also be applied to database fields within the advanced data security function of Azure. Click on the Data Discovery and Classification and then on the Classification tab. You may find there are already recommendations for your database fields. You can select a table, then a column, and then you can assign an information type to the column plus a Sensitivity, which will be one of your existing labels. You can then add the classification. It looks like the default classification labels are applied on the fields by data type. That is, the financial classification is applied to fields that are of the money data type.</p>
<h1 id="Data-Retention"><a href="#Data-Retention" class="headerlink" title="Data Retention"></a>Data Retention</h1><p>When we talk of data retention, we are actually speaking of several different things. There is how long your data is available after you have ended your subscription. There is data retention in the context of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/blob-storage-retention/">blob storage</a>. We can set data retention policies for databases. <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/long-term-retention-database-backups/">Long term data retention</a> determines how long your database backups are held for. Finally, there is the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/storage-analytics-data-retention-policy/">retention of analytics and metrics data</a>.</p>
<p>With the exception of free trials, if your cloud subscription is terminated or expires, Microsoft will store your data in a limited function account for 90 days. This will give you time to extract your data or renew your subscription. After the 90-day retention period, your data will be deleted, including all cached or backup copies.</p>
<h1 id="Blob-Storage-Retention"><a href="#Blob-Storage-Retention" class="headerlink" title="Blob Storage Retention"></a>Blob Storage Retention</h1><p>For blob storage, we have immutable storage for Azure Blobs, which enables users to store business-critical data objects in a write once read many times state, abbreviated to WORM. This state makes the data non-erasable and non-modifiable for a user-specific interval. If the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/data-retention/">retention</a> period is unknown, you can place a legal hold policy on the data. When a legal hold policy is set, blobs can be created and read but not modified or deleted. Each legal hold is associated with a user-defined tag, such as a case ID or event name. WORM policies are independent of the Azure blob storage tier and applied to all tiers. Users can transition to the most cost-optimized tier for their workloads, while maintaining data immutability.</p>
<h1 id="Long-Term-Retention-Database-Backups"><a href="#Long-Term-Retention-Database-Backups" class="headerlink" title="Long-Term Retention - Database Backups"></a>Long-Term Retention - Database Backups</h1><p>You can set the long-term <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/data-retention/">retention</a> policy for your database backups by going to your server and, under Manage Backups, you can then configure the retention policy for each of your databases to specify how long you would like to keep the backups for.</p>
<h1 id="Azure-Data-Explorer-Data-Retention"><a href="#Azure-Data-Explorer-Data-Retention" class="headerlink" title="Azure Data Explorer Data Retention"></a>Azure Data Explorer Data Retention</h1><p>Azure Data Explorer, as a big data service, can potentially produce a lot of data that will become irrelevant after a short period of time. By setting up <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/data-retention/">data retention</a> policies, you can reduce the likelihood of cost overruns and storing irrelevant data. There are two main properties to the Data Explorer retention policy. The soft delete period is a time span for which it is guaranteed data will be kept available to query and measure since the time it was ingested. This defaults to 100 years. When altering the soft delete period of a table or database, the new value applies to both existing and new data. A soft delete period of zero can be set as part of table-level retention. This is especially useful if data is going to be transformed, and is only present in a staging table temporarily. The soft delete period guarantees how long the data will be available for, but not necessarily when it will be deleted. As the data is not necessarily deleted immediately at the end of the soft delete period, it can linger for some time. Recoverability is the other property of the retention policy object. This defaults to enabled, and the data will be recoverable for up to 14 days after deletion.</p>
<h1 id="Storage-Analytics-Data-Retention-Policy"><a href="#Storage-Analytics-Data-Retention-Policy" class="headerlink" title="Storage Analytics Data Retention Policy"></a>Storage Analytics Data Retention Policy</h1><p>Analytics and metrics data will be written until the shared 20TB limit is reached. When that happens, no new data will be written. You can free up space with a manual request to delete stored Analytics data, but this is billable. Alternately, you can set up a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/data-retention/">data retention</a> policy for logging and metrics data. To set up a policy that deletes both logging and metrics data after seven days, make a request to the Set Blob Service Properties, Set Table Service Properties, or Set Queue Service Properties operation with the RetentionPolicy nodes configured like this. It is possible to configure <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/blob-storage-retention/">blob storage</a> metrics and logging through the Azure portal by going into your storage account and then into Diagnostic settings (classic).</p>
<h1 id="Configuring-Data-Sovereignty"><a href="#Configuring-Data-Sovereignty" class="headerlink" title="Configuring Data Sovereignty"></a>Configuring Data Sovereignty</h1><p>Technical and regulatory factors are the two main considerations when deciding where to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">deploy your data and resources</a> geographically. Most of your services can be deployed to a user-specified region, although there are some services, like <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/enabling-database-authentication-with-azure-active-directory/">Azure Active Directory</a>, that could be deployed in a non-region-specific datacenter. Azure provides policies, such as Allowed Locations, to restrict where an organization can deploy its resources. An allowed region locations policy is defined using JSON and can be deployed using the Azure Portal, or Azure PowerShell, Azure Command Line Interface, or REST API.</p>
<h1 id="Enabling-Database-Authentication-with-Azure-Active-Directory"><a href="#Enabling-Database-Authentication-with-Azure-Active-Directory" class="headerlink" title="Enabling Database Authentication with Azure Active Directory"></a>Enabling Database Authentication with Azure Active Directory</h1><p>Azure Active Directory authentication gives you a similar experience to on-premise Windows authentication. This means being able to centrally manage database logins and not have to set up SQL logins for individual databases. As well as enforcing a strong password policy through Active Directories, Azure AD supports token-based authentication for applications connecting to SQL Databases.</p>
<h1 id="Setting-Admin-Demo"><a href="#Setting-Admin-Demo" class="headerlink" title="Setting Admin Demo"></a>Setting Admin Demo</h1><p>To enable <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/enabling-database-authentication-with-azure-active-directory/">Active Directory authentication</a> with Azure SQL, the first thing you must do is set the administrator for your database server. In the Azure portal, select your server and then, under Settings, select Active Directory Admin. Click the Set admin button at the top and then select your Active Directory user that you want to set as the admin and then save.</p>
<h1 id="Azure-SQL-Auditing"><a href="#Azure-SQL-Auditing" class="headerlink" title="Azure SQL Auditing"></a>Azure SQL Auditing</h1><p>SQL auditing allows you to record various types of database events; specifically, data access, data changes, schema changes, security exceptions, and changes to account, roles and permissions. The audit log data is written to append <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/blob-storage-retention/">blobs</a> associated with your subscription. Auditing can either be set up at the server level or per individual database. If you set up your auditing at the server level, there is no need to set it up at the database level, as this is a duplication. Having said that, there could be situations where you want to record different types of events for one database specifically that aren’t being recorded for all the others on the server. Or maybe you want to use a different storage account or <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/data-retention/">retention</a> period for a particular database.</p>
<h1 id="Azure-SQL-Auditing-Demo"><a href="#Azure-SQL-Auditing-Demo" class="headerlink" title="Azure SQL Auditing Demo"></a>Azure SQL Auditing Demo</h1><p>To <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">turn on</a> <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/azure-sql-auditing/">Azure SQL auditing</a>, go to Auditing under Security in your server or database blade, switch auditing on and then select the destination to store your audit data. In this case, I’m going to select <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/blob-storage-retention/">blob storage</a>. Select a storage account, and then specify the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/data-retention/">retention</a> period as the number of days. The default retention days is zero, which means unlimited retention. You can click View audit logs to see the audit logs.</p>
<h1 id="Azure-SQL-Advanced-Threat-Detection"><a href="#Azure-SQL-Advanced-Threat-Detection" class="headerlink" title="Azure SQL Advanced Threat Detection"></a>Azure SQL Advanced Threat Detection</h1><p>Advanced Threat Protection is a catch-all term for a service that alerts you when particular types of events are detected in your database. These events range from possible SQL injection, to access from an unusual location or login, to when an unusually high number of failed login attempts are recorded.</p>
<p>The SQL injection alert is raised when an application executes faulty SQL against the database. I guess the assumption is that programmatically generated SQL should be correct unless it has been nefariously tampered with. While none of these features are magical, it is a very easy and convenient way to monitor anomalous behavior.</p>
<p>To set up advanced threat detection, go into your database and turn on Advanced Data Security, then towards the bottom of the page, under Advanced Threat Protection Settings, you can go and select which of the advanced threat protection options you want to enable, then click Save.</p>
<h1 id="Configuring-Access-Control-for-Storage-Accounts"><a href="#Configuring-Access-Control-for-Storage-Accounts" class="headerlink" title="Configuring Access Control for Storage Accounts"></a>Configuring Access Control for Storage Accounts</h1><p>Azure <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">controls</a> access to resources, such as storage and queues, using role-based access control or RBAC. An <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/enabling-database-authentication-with-azure-active-directory/">Azure AD</a> security principle, which can be a user, a group, an application service principle, or a managed identity for Azure resources, can be granted access to resources at the level of subscription, resource group, storage account or an individual container or queue. Before assigning to a user or group, you need to determine the scope of access required. It is best to allow only the absolutely necessary scope of access to resources. </p>
<p>Starting with the narrowest, the levels of scope are:</p>
<p><strong>An individual container</strong>: at this scope, a role assignment applies to all of the blobs in the container as well as container properties and metadata. </p>
<p><strong>An individual queue</strong>: at this scope, a role assignment applies to messages in the queue as well as queue properties and metadata. </p>
<p><strong>The storage account</strong>: at this scope, a role assignment applies to all containers and their blobs or to all queues and their messages. </p>
<p><strong>The resource group</strong>: at this scope, a role assignment applies to all of the containers or queues, and all of the storage accounts in the resource group.</p>
<p><strong>The subscription</strong>: at this scope, a role assignment applies to all of the containers or queues, and all of the storage accounts and all the resource groups in the subscription.</p>
<p>To assign role-based access control to a storage account, select the storage account, then select Access control and click the Add button under Add a role assignment. Within Add role assignment, select a role from the drop-down list, then select the user or group you want to assign the role to, then click Save. If you go into Role Assignments, you can view what roles are being assigned to users.</p>
<h1 id="Configuring-Key-Management-for-Storage-Accounts"><a href="#Configuring-Key-Management-for-Storage-Accounts" class="headerlink" title="Configuring Key Management for Storage Accounts"></a>Configuring Key Management for Storage Accounts</h1><p>When you <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">create</a> a storage account, a key is automatically generated by Azure. The account name and key act as a username and password for accessing the storage account. These keys (there are two of them), are available to view through the Access keys under your storage account settings.</p>
<p>You can easily regenerate the keys by clicking on the blue circular arrows next to key1 and key2. You can also use your own keys to manage storage encryption. This is called customer-managed keys, where you generate or import your own keys and then use the Azure Key Vault to store and manage them.</p>
<p>To use customer-managed keys for storage and encryption, go to your storage account and select Encryption under settings. Click the “Use your own key” checkbox. Click Select from Key Vault radio button, and then click Select under Key Vault to select the key vault you want to use.</p>
<p>If a key doesn’t yet exist, you can create one here by clicking Generate&#x2F;Import. Give your key a name and set any parameters you need to, like type, size, activation, and expiration dates. Click the Create button. Now select your key from the vault and click Save.</p>
<h1 id="Granting-Limited-Access-to-Azure-Storage-Resources-with-Shared-Access-Signatures-SAS"><a href="#Granting-Limited-Access-to-Azure-Storage-Resources-with-Shared-Access-Signatures-SAS" class="headerlink" title="Granting Limited Access to Azure Storage Resources with Shared Access Signatures (SAS)"></a>Granting Limited Access to Azure Storage Resources with Shared Access Signatures (SAS)</h1><p>A Shared access signature, or SAS, is a URI that provides <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/configuring-access-control-for-storage-accounts/">access</a> to an Azure storage resource for users that you don’t want to give the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/configuring-key-management-for-storage-accounts/">storage account key</a> to. The URI has parameters that specify the type of access and when the resource can be accessed as well as an authentication key specific to that resource. Shared access signatures come in 3 flavors.</p>
<p>·    A user delegation SAS is based on <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/enabling-database-authentication-with-azure-active-directory/">Azure Active Directory credentials</a>. Those credentials along with permissions specified for the SAS define the access to the blob storage. It’s called a user delegation SAS because it is signed with a user delegation key.</p>
<p>·    A service SAS provides access to a storage service, and just that service. So, you can provide access to either <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/blob-storage-retention/">blob storage</a>, queue storage, table storage, or file storage. If you need to specify what type of access should be allowed on the service this can be done by referencing a stored access policy.</p>
<p>·    An account SAS allows you to provide access to multiple services within a storage account. While service SAS requires a stored access policy to define the type of access permitted, an account SAS allows you to specify the type of operations that can be performed on those services within the URI. That is, you can specify whether read, list, add, create, write, update, or delete operations are allowed. These operations will vary slightly from resource to resource. For example, you can only assign process permission to a queue service.</p>
<p>Both service and account shared access signatures are secured with the storage account key. You can define a shared access signature as a standalone self-contained entity called an Ad hoc SAS, or you can associate a service SAS with a stored access policy. Essentially this makes your service SAS configurable and dynamic. </p>
<p>Creating and referencing a store access policy through the Azure portal UI is reasonably straight-forward. It involves setting access on the resource, in this case read and list permissions on a blob container. You then navigate to the container within Storage Explorer and right click on it selecting the Get Shared Access Signature menu option. Finally select your access policy from the drop-down list and save.</p>
<p>You can now change how your resource is accessed without having to generate and distribute a new Shared Access Signature, just by editing your access policy</p>
<p>Here we can see the structure of a shared access signature. It is a URL with the signature’s properties defined as parameters, starting with the blob address, type of access allowed, times of access, the supported access request types, storage version, and finally, the authentication signature.</p>
<h1 id="Configuring-Security-for-HDInsight"><a href="#Configuring-Security-for-HDInsight" class="headerlink" title="Configuring Security for HDInsight"></a>Configuring Security for HDInsight</h1><p>Here we look at <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">configuring security</a> for HDInsight with Enterprise Security Package. This means enabling users to authenticate with their domain credentials. </p>
<p>Setting this up involves a few steps. Firstly, we need to enable Azure Active Directory Domain Services. Then we must create and authorize a managed identity. Once these preliminary steps have been completed, we can create an HDInsight cluster with Enterprise Security Package. Just note that ESP is only available with Hadoop, Spark, and Interactive Query cluster types.</p>
<p>To enable Azure Active Directory Domain Services, create a new Azure AD Domain Services resource. Assign your resource group and your location. Next, if you do not have a virtual network, you will need to create one. You need to create a dedicated subnet before you deploy Azure Active Directory Domain Services. You will need to assign at least one user to a special administrative group called AAD DC Administrators, which is used for managing the Azure Active Directory Domain Services domain. Members of this group are granted administrative permissions on virtual machines that are joined to the managed domain. Next, we turn on synchronization and click OK in the summary.</p>
<p>Next, we need to create an authorized assigned managed identity by creating a new User assigned managed identity resource. A user assigned managed identity simplifies securing domain services operations. After creating the managed identity, we need to assign the HDInsight Domain Services contributor role to it. We do this by going into our Active Directory Domain Services resource. Select Access Control, and then select User managed identity from the find drop-down, and select your managed identity. Click Add role assignment and select the HDInsight Domain Services Contributor role. Next, we want to add users to the Managed Identity Operator role of our user assigned managed identity.</p>
<p>Now we create the HDInsight cluster. Give it a name and select the region. I’m going to use the Hadoop cluster type, as this supports Enterprise Security Package. You’ll need to supply a cluster login username and password. I’ll just stick with the default storage settings. If you chose a cluster type that did not support ESP, the Enterprise Security Package checkbox would be missing from the Security + Networking page.</p>
<h1 id="Configuring-Cosmos-DB-Security"><a href="#Configuring-Cosmos-DB-Security" class="headerlink" title="Configuring Cosmos DB Security"></a>Configuring Cosmos DB Security</h1><p>Let’s look at the security measures available in Cosmos DB. There are two methods for controlling access to your Cosmos database. Firstly, you can use IP address filtering. By default, this is disabled, so any IP address could potentially access your database. You can configure network and IP access through Firewall and virtual networks under settings. This allows you to specify either particular virtual networks access, or specified IP addresses.</p>
<p>Once connected, a request needs to be authenticated and authorized. This is done using keys: a primary and secondary key that are generated as part of the <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">account creation</a>. These are the read-write keys. There are also two read-only keys. Having two sets of keys allows you to regenerate one key in each pair, that is, rotating the keys while maintaining uninterrupted access to the database for users and applications.</p>
<p>It’s definitely not ideal to use the master keys for all access to your Cosmos database. You can use resource tokens to grant access to specified resources within the database. A token is created when a user is given permission to access a resource. Once a user has been authenticated, say, via Azure Active Directory, a resource token is requested for that user from the Cosmos DB account and relayed back to the client. The client app can then use that token to access the specified Cosmos resources until the token expires. Tokens, by default, are only valid for an hour, but this can be extended to up to five hours. Once expired, a new token will be created for the client if access is still permitted.</p>
<p>Apart from keys and resource tokens, you can assign roles and permissions to users through the Cosmos DB account Access control function.</p>
<p>As with other Azure services, Cosmos DB records audit logs which can be viewed through Activity log. In addition to activity logs, you can enable diagnostic logging by going into Diagnostic settings under the monitoring menu. Diagnostic logs can be saved to a storage account, streamed to an event hub, or sent to Log analytics. From a security point of view, Query Runtime Statistics, which records details of queries, could hold valuable information when tracking down suspicious activity. You can also record Mongo requests and Data plane requests, which include the resource unit charge.</p>
<h1 id="Configuring-Security-for-Microsoft-Azure-Data-Lake"><a href="#Configuring-Security-for-Microsoft-Azure-Data-Lake" class="headerlink" title="Configuring Security for Microsoft Azure Data Lake"></a>Configuring Security for Microsoft Azure Data Lake</h1><p>Securing your organization’s data lake is no trivial matter, but you have several lines of defense. There is authentication via Azure Active Directory OAuth bearer tokens. You can manage access with role-based access control, as we have seen earlier with storage accounts, and access control lists. Access control lists, or ACLs, as the name suggests, lists what read, write or execute access is permitted on a file or directory for a user. Data Lake Storage ACLs follow the open POSIX standard. POSIX stands for Portable Operating System Interface. This is an important consideration as Hadoop uses the same POSIX ACL structure.</p>
<p>Your stored data is encrypted, whether that is with a system-created key, or one that you have created or imported yourself, as we saw earlier in customer-managed keys. When the data is being transferred to lake storage it is also encrypted.</p>
<p>In addition to these measures, you can secure your data lake by integrating it with a virtual network. A virtual network provides another layer of access filtering, in as much as users have to be authenticated to access the network.</p>
<h1 id="Securing-Azure-Data-Lake-Storage-with-Virtual-Network-Integration"><a href="#Securing-Azure-Data-Lake-Storage-with-Virtual-Network-Integration" class="headerlink" title="Securing Azure Data Lake Storage with Virtual Network Integration"></a>Securing Azure Data Lake Storage with Virtual Network Integration</h1><p>To use virtual network integration with data lake storage gen1, you must create a virtual network in the same region as your data lake storage account. You need to configure a service endpoint with the Microsoft Azure Active Directory as the service. After creating your virtual network in the same region as your data lake, you need to go to your data lake and click on Firewall and virtual networks. Choose the Selected network radio button and then Add existing virtual network. In the Add networks blade, select your virtual network and the subnet and click Add. Below the firewall section under exceptions, you can enable connectivity from Azure services outside of your selected network.</p>
<h1 id="How-to-Design-a-Secure-Azure-Application"><a href="#How-to-Design-a-Secure-Azure-Application" class="headerlink" title="How to Design a Secure Azure Application"></a>How to Design a Secure Azure Application</h1><p>Now let’s look at how to design a <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">secure Azure application</a>, although many of the points raised here apply to application design in general.</p>
<p>Pair - or peer - programming, where you write your code in teams of two, has been shown to improve code quality and learning within a development team. While this is not always practical, and not to everyone’s liking, a less human-resource-hungry alternative is having regular code reviews, ideally before checking into source control, say at the end of an agile sprint. The more eyeballs on the code, the more likely performance and security issues will be detected.</p>
<p>As well as human code reviews, there are a myriad of tools that can analyze your code, highlighting potential security vulnerabilities. </p>
<p>Validate all inputs to your application, as this is the first line of defense against injection-type attacks. This is a good rule of thumb for all software development, not just from a security perspective, but also to keep your data clean and meaningful. It is much easier to validate data at the point of entry than clean or parse it down the track. Try and make the user choose input from sets of options, than using free text fields. Always validate email and web addresses as being in the correct format, and not containing non-printing characters.</p>
<p>Verify your application’s outputs, also known as escaping or output encoding. This means making sure that data is treated as data, and not misinterpreted, excuse the pun, as input relative to script, a script interpreter’s parser. This is essentially guarding against another form of injection attack. An example of this might be someone uploading a file - like CSV orders - to your website, that has an executable script embedded in it. If the file is to be displayed, that is, processed and the output sent back to the browser, this is where the embedded script will be executed if the file’s content hasn’t been escaped. This type of attack is also known as cross-site scripting.</p>
<p>Use parameterized queries or stored procedures in place of dynamic SQL constructed within your application. While building dynamic SQL statements in your application might appear to be a shortcut compared to a complex if-then-else type scenario, and was in vogue many years ago, it can have potentially disastrous consequences. Without very good validation, someone can enter SQL script as input that will be incorporated into your dynamic SQL, that will be executed with completely unintended consequences. It’s just not worth the risk.</p>
<p>Remove standard server headers. By default, all web servers emit in their headers sent to browsers what type of web server it is. For example, server is Microsoft IIS version 8, powered by ASP.NET. This information could be useful to someone wanting to attack your website. Removing that information is easy and won’t impact functionality. In your Web.config file, under <code>&lt;system.webServer&gt;</code> and <code>&lt;security&gt;</code>, set <code>&lt;requestFiltering removeServerHeader=&quot;true&quot; /&gt;</code>. Also, under the custom headers node in <code>&lt;httpProtocol&gt;</code>, create a remove node with <code>name=&quot;X-Powered-By&quot;</code>. Under <code>&lt;system.web&gt;</code>, create a node for <code>httpRuntime</code> with the value <code>enableVersionHeader=&quot;false&quot;</code>, to remove the ASP.NET version.</p>
<p>Don’t develop or test against production data, even if it is in a development or test environment. There is little point going through all the effort of securing your production data, only to have it exposed in insecure and untested scenarios.</p>
<p>Implement a strong password policy that forces users to create complex passwords. While this has been a source of much angst amongst users, research has shown that long passwords are just as good as complex ones. Making users have phrases with upper and lower case, as opposed to just words, would make life easier and more secure.</p>
<p>Check file uploads for viruses and malicious content. This is another form of input validation. It’s hard enough to stop employees clicking on phishing emails, without opening the door to hackers by letting them into your inner sanctum with a simple file upload.</p>
<p>Don’t cache sensitive data in the browser, like personal or payment data, that could be maliciously accessed by accessing the browsers cache or hitting the back button. And be careful how you use URL query parameters, if you have to use them at all. That is, don’t display unencrypted data like record IDs, and don’t put connection strings, keys, or other critical configuration data into apps or config files. Use app settings to store this type of information. App settings are encrypted, and the app servers will make the information available to your app only when required.</p>
<p>Once the application has been developed, you need to verify that it is secure. To do this, find and fix vulnerabilities in your application dependencies by scanning your application and its dependent libraries to identify any known vulnerable components. Vulnerability scanning, powered by Tinfoil Security, is available for Azure at service web apps.</p>
<p>Test your application in an operating state. That will help you to find security vulnerabilities such as memory corruption, insecure server configuration, cross-site scripting, user privilege issues, SQL injection, and other critical security concerns.</p>
<p>Fuzz testing is testing your applications robustness. How does the application perform when deliberately crashed? Does it expose security flaws?</p>
<p>Conduct attack surface review after any changes, to make sure no new attack vectors have been introduced. Attack Surface Analyzer from Microsoft can scan your application for vulnerabilities.</p>
<p>Perform security penetration testing on deployment, and monitor for open ports, endpoints, and attacks.</p>
<p>Secure DevOps Kit for Azure contains SVTs for multiple services of the Azure platform. You run these SVTs periodically to ensure that your Azure subscription, and the different resources that comprise your application, are in a secure state. You can also automate these tests by using the continuous integration&#x2F;continuous deployment (CI&#x2F;CD) extensions feature of AzSK, which makes SVTs available as a Visual Studio extension.</p>
<p>Applications are rarely static, and will be amended and modified throughout their lifecycle. You must have security verification procedures in place to monitor apps on an ongoing basis.</p>
<h1 id="Implementing-Security-Validations-for-Application-Development"><a href="#Implementing-Security-Validations-for-Application-Development" class="headerlink" title="Implementing Security Validations for Application Development"></a>Implementing Security Validations for Application Development</h1><p>Once your application has been <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">deployed</a>, you’ll want to be alerted to any issues as soon as possible, preferably before users do. Azure has several automated tests, three to be exact, that will allow you to monitor your website’s availability and basic performance. You could say these tests are to production environments what test-driven development is to a development environment. At the most basic level, there is the URL ping test, which as the name implies, tests basic responsiveness of your website at regular intervals, logging results. The ping test can be configured through the Azure portal.</p>
<p>The next level of complexity are tests where you can play back a recorded series of web requests against your website. These multi-step tests are created in Visual Studio Enterprise. </p>
<p>Alternately, perhaps if you don’t have a Visual Studio Enterprise license, you could create your own application to perform availability testing. Within the Microsoft.ApplicationInsights namespace, you can use the TelemeteryClient TrackAvailibity method. These tests are created in the context of an application insights resource. An Application Insights resource has the capacity to host up to 100 availability tests.</p>
<h1 id="Monitoring-Website-Availability"><a href="#Monitoring-Website-Availability" class="headerlink" title="Monitoring Website Availability"></a>Monitoring Website Availability</h1><p>To create an availability ping test, create a new Application Insights resource. Select Availability and then click Add test. Give your test a name, select URL ping test from the Test type, and then enter your app’s URL. Select the frequency with which you want this test to be performed, and hit the Create button. Once the test is active and running, you can monitor the results. I’m just going to stop the app to induce a failure. When you see a failure, you can drill down into the failed test to see what the issue is.</p>
<h1 id="Security-in-Azure-App-Service"><a href="#Security-in-Azure-App-Service" class="headerlink" title="Security in Azure App Service"></a>Security in Azure App Service</h1><p>Azure App Services provide a number of ways to <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">secure your applications</a>. Your app is automatically secured with HTTPS and a certificate related to the Azure website’s .net domain. As we have previously talked about, you can also secure your app with a custom certificate related to a custom domain name. You can enforce HTTPS and TLS 1.2 at the click of a button or two. You can restrict app usage to specific IP addresses.</p>
<p>Azure App Service supports authentication and authorization using tokens, more specifically, JSON web tokens and identity providers. This architecture has been around for some time now and basically involves a trusted identity provider issuing a token, usually with a limited lifetime, to a user, with which they’re authorized access to web services or app. The cornerstone of this design pattern is the identity provider. They are called trusted because we trust that they have correctly identified the user as who they say they are. There are five default identity providers: Azure Active Directory, Microsoft Account, Facebook, Google, and Twitter.</p>
<p>In addition to users authenticating, you might want to authenticate one service to be able to use another service. As we saw with HDInsight Security, we can use a managed identity to make this task easier. In the HDInsight section, we created a user-managed identity which exists independently of other services. You can use one of these, or you can create a system-assigned identity within your app service. One key difference is that a system-assigned identity only exists in the context of your app service and will be deleted if your app service is deleted.</p>
<p>One thing to bear in mind when using resources within the Azure network is that it is a shared space, so you should still encrypt your communications. This is analogous to driving on a racetrack as opposed to the public road. There will be other cars on the track, not as many as on the public road, and you hope they will all be well behaved, but accidents can still happen. Another option is integrating with an Azure virtual network, as we saw with data lakes. However, this virtual network still uses the Azure shared network infrastructure. To achieve full isolation for your app, you can deploy your app to an App Service Environment (ASE). An App Service Environment is designed for high performance, and is a fully isolated environment that is dedicated to running the app. As an ASE is deployed to a virtual network, you have all the options of IP address filtering and connecting it to your on-premise network.</p>
<h1 id="Uploading-and-Binding-SSL-Certificates-to-Azure-App-Service"><a href="#Uploading-and-Binding-SSL-Certificates-to-Azure-App-Service" class="headerlink" title="Uploading and Binding SSL Certificates to Azure App Service"></a>Uploading and Binding SSL Certificates to Azure App Service</h1><p>Let’s now look at uploading and binding an SSL certificate to an Azure app service. To upload and bind an SSL certificate to a custom domain, you need to make sure your web app is running on a pricing tier that will support SSL certificates. F1 and D1 tiers do not support this feature. You can change your app’s tier by selecting Scale up app service plan under settings. To secure a custom domain, click Custom domains on the left navigation pane of your app, then click Add binding for the domain you want to secure. If you don’t see Add binding for a domain, then it’s already secure and you should have a secure SSL state.</p>
<p>Next, we want to upload our certificate. In the PFX certificate file, click Upload and browse to your certificate file, and then enter the certificate password. Once your certificate has been uploaded (wait until it has), you can go and open the SSL bindings dialog, select the certificate you uploaded and the SSL type, and then click Add binding. SNI-based SSL and IP-based SSL are supported.</p>
<p>If you use IP-based SSL, you’ll need to remap your A record to the new custom domain IP address, as, by default, apps share a public IP address. Next, we need to redirect all HTTP requests to HTTPS. This can be done by setting HTTPS to “on” within SSL settings. This dialog also allows you to change the TSL version from the default 1.2. Here we have two scripts for uploading a certificate. One is an Azure command line interface script and the other an Azure PowerShell script.</p>
<h1 id="Creating-an-Application-Security-Baseline"><a href="#Creating-an-Application-Security-Baseline" class="headerlink" title="Creating an Application Security Baseline"></a>Creating an Application Security Baseline</h1><p>Now we will turn to governance and creating an <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">application security</a> baseline. Apart from the topics covered so far, this is more application-specific. A public-facing e-commerce app has different considerations than an internal application within a financial institution or bank. One is restricted to a specific user and their own information whereas the other will allow multiple users different levels of access to other people’s sensitive information.</p>
<p>To evaluate an application’s security baseline, we need to do an initial task assessment to identify your core business risks related to cloud security, translate those business risks into specific technical risk profiles. Before deployment, perform a review to identify any new risks and make sure all access and data security policy requirements are met. As part of the deployment process, validate security policy compliance. Regularly perform audits on cloud deployments to ensure their continued alignment with security policy.</p>
<p>For auditing and subsequent adherence to security policy to work, you must be monitoring application performance and collecting security data and metrics. Ensure that automated monitoring is enabled, and data and logs are being collected and securely stored. When something goes wrong, there must be a clear path and procedure to report incidents and take action. You should have lines in the sand that trigger a security response. For example, if increased brute force or denial of service attacks are detected, say at 25%, then a plan must be in place to prevent further escalation. If unclassified data is detected, then external access should be denied until the data owner can apply the appropriate <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/data-classification-part-1/">classification</a>. If a security health issue is detected, disable access to any virtual machines that have known access or malware vulnerability identified until appropriate patches of security software can be installed. Update policy guidance to account for any newly detected threats. If a network vulnerability is detected, access to any resource not explicitly allowed by the network access policy should be triggered to alert IT security and staff and the relevant workload owner. Track issues and update guidance if policy revision is necessary to mitigate future incidents.</p>
<h1 id="Metrics-and-Risk-Tolerance"><a href="#Metrics-and-Risk-Tolerance" class="headerlink" title="Metrics and Risk Tolerance"></a>Metrics and Risk Tolerance</h1><p>As with all fact-based analysis, we need to be able to measure and compare, to take the appropriate action that circumstances dictate. To that end, we must decide on the metrics that we will measure for our security baseline. Obviously, what to measure depends on what resources you have deployed. Here are examples of possible metrics you might want to consider.</p>
<p>How much sensitive data is in your custody? Do you know? This can be broken down into at least two metrics. Firstly, knowing the landscape of your data in relation to your organization’s data and privacy policies, you can measure how much data is being correctly classified. Secondly, how is that data protected? How many of your data stores, be they storage accounts or databases, are secure and are encrypted?</p>
<p>How many public-facing apps or web services do you have? How many of these are linked to sensitive data stores?</p>
<p>Record the number of attacks and attempted attacks. Also, try and quantify the intensity of the attack, like, how long did it last? What was the nature of that type of attack?</p>
<p>If you have virtual machines, how many of them have up to date virus protection and correctly configured firewalls? How frequently do you check for new OS and software security patches and install them?</p>
<p>Do you have outstanding security health recommendations? Azure makes quite a good attempt at notifying users of potential security issues, whether that is with dashboards or emailed threat assessments. You should act on these recommendations.</p>
<p>Having decided what to measure, you must then decide when to take action based on that metric, whether that is an absolute number or percentage increase. Here are examples of events that should trigger the adoption of appropriate security baseline policies.</p>
<p>If you are hosting sensitive data in the cloud, then you need a policy that formalizes how that data should be <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">classified and protected</a> against malicious and unforeseen events.</p>
<p>Persistent serious attacks against network infrastructure. A certain percentage of virtual machines don’t have all required OS patches and security software installed, or the time they’re unprotected exceeds X number of days.</p>
<p>If your company is in a highly security-oriented sector such as banking, medicine or government, you will need a security baseline before deploying to production. A security baseline statement is comprised of three parts. There is a summary of the technical risk it relates to, an explanation of what the policy requires, and an outline of the technical solution or recommendations to address those requirements. </p>
<p>Security baseline policy statements should be concise and to the point. Each statement definition should include the following pieces of information:</p>
<ul>
<li><strong>Technical risk:</strong> a summary of the risk this policy will address.</li>
<li><strong>Policy statement:</strong> a clear summary explanation of the policy requirements.</li>
<li><strong>Technical options:</strong> actionable recommendations, specifications, or other guidance that IT teams and developers can use when implementing the policy.</li>
</ul>
<p>Here are what a couple of security baseline statements might look like. A data encryption statement would be:</p>
<ul>
<li><strong>Technical risk:</strong> there is a risk of protected data being exposed during storage.</li>
<li><strong>Policy statement:</strong> all protected data must be encrypted when at rest.</li>
<li><strong>Potential design option:</strong> use Azure data-at-rest encryption. Additional controls such as in-account data encryption and control over how storage account settings can be changed should also be considered.</li>
</ul>
<p>A network isolation policy statement could be:</p>
<ul>
<li><strong>Technical risk:</strong> connectivity between networks and subnets within networks introduces potential vulnerabilities that can result in data leaks, disruption of mission-critical services.</li>
<li><strong>Policy statement:</strong> network subnets containing protected data must be isolated from any other subnets. Network traffic between protected data subnets is to be audited regularly.</li>
<li><strong>Potential design option:</strong> in Azure, network and subnet isolation is managed through Azure Virtual Networks.</li>
</ul>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>In <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/introduction/">this course</a>, we’ve covered a lot of ground very quickly. I see the content as falling into broad categories of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/how-to-protect-your-data/">protection</a>, <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/data-retention/">retention</a>, security, monitoring, and governance. Let’s review these and see how Azure’s security features can be applied.</p>
<p>While we covered governance at the end, it’s actually not a bad place to start. You can use a structured framework of risk assessment, policy action, and technical solution options to establish a current data security benchmark. Having done this, you can objectively assess your current status, fix the holes, and use those benchmarks to validate future scenarios and actions.</p>
<p>Data protection is counterproductive if the data is so secure it’s unusable. Data labeling and protection that is available in Office 365 and Azure SQL with Azure Rights Management allows you to configure protection in terms of availability and distribution. Too much of the time, we focus on external threats when it is not unheard of for disgruntled or sales staff to use client information to enrich themselves. These tools go some way to mitigating that threat.</p>
<p>Speaking of threats, the Azure SQL Threat Detection is a quick and easy-to-implement out-of-the-box feature. </p>
<p>Not only can users steal data, they can also destroy it, intentionally or accidentally. Retention policies by way of Soft Delete Period and Recoverability can prevent irretrievable problems. We saw how database backup retention can be automated and configured.</p>
<p>Azure provides a multitude of ways to configure <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/enabling-database-authentication-with-azure-active-directory/">authentication</a> and authorization. These range from Active Directory authentication to Azure SQL, and Role-Based Access Control to storage accounts, through to limited access via Shared Access Signatures to resources. Many Azure resources make use of keys to grant access, and Azure makes it easy to generate and manage keys or import your own keys.</p>
<p>In terms of infrastructure, you can set up virtual networks within Azure to add another level of defense to your systems.</p>
<p>All of these features are built in, but what security support do you get when deploying your own custom apps? Azure can only do so much, so we looked at best practice app design principles. This involves minimizing the risk of your app becoming the attack vector. Securely store secrets and connection strings in environment variables that Azure will manage. Use tools to assess your app’s security profile, and we touched on tests within Azure to evaluate website availability. </p>
<p>As well as all of these preventative measures, Azure also records a myriad of <a target="_blank" rel="noopener" href="https://cloudacademy.com/course/configuring-azure-application-and-data-security/metrics-and-risk-tolerance/">metrics</a> that will notify you of breaches - potential or actual. Analyzing metric data will highlight potential risks and allow you to address them before they become a problem. There is no doubt that Azure provides a vast array of tools and features to assist you in securing your data and infrastructure. While very few will find all of what we have touched on applicable, I’m sure most of you will see the benefits of some of these features in your organization. Most security or data breaches are due to human error; it is up to you to implement the appropriate safeguards. Let’s face it, no one wants to be that person on the evening news.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-Lab-Deploying-and-Configuring-Azure-Firewall-16/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-Lab-Deploying-and-Configuring-Azure-Firewall-16/" class="post-title-link" itemprop="url">AZ-500-Lab-Deploying-and-Configuring-Azure-Firewall-16</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-15 10:11:44 / Modified: 10:11:46" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:44-04:00">2022-11-15</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-Lab-Deploying-and-Configuring-Azure-Firewall-16/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-Lab-Deploying-and-Configuring-Azure-Firewall-16/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://example.com/2022/11/15/AZ-500-Lab-Managing-Azure-Storage-Accounts-15/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/123456.gif">
      <meta itemprop="name" content="Hang Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hang's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/15/AZ-500-Lab-Managing-Azure-Storage-Accounts-15/" class="post-title-link" itemprop="url">AZ-500-Lab-Managing-Azure-Storage-Accounts-15</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-15 10:11:42 / Modified: 10:11:44" itemprop="dateCreated datePublished" datetime="2022-11-15T10:11:42-04:00">2022-11-15</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2022/11/15/AZ-500-Lab-Managing-Azure-Storage-Accounts-15/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/15/AZ-500-Lab-Managing-Azure-Storage-Accounts-15/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/82/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/82/">82</a><span class="page-number current">83</span><a class="page-number" href="/page/84/">84</a><span class="space">&hellip;</span><a class="page-number" href="/page/266/">266</a><a class="extend next" rel="next" href="/page/84/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hang Zhang"
      src="/images/123456.gif">
  <p class="site-author-name" itemprop="name">Hang Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2653</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zh375636" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zh375636" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hang.zhang.network@gmail.com" title="E-Mail → mailto:hang.zhang.network@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>



// 在最后添加
<script src="/js/code-unfold.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '40GUvOAaitQh1SZe7ua9cvss-MdYXbMMI',
      appKey     : 'iUO2yON0j55WMdu59zx12dCG',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
