<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>isc2-cc-flashcard-chapter1-5</title>
    <url>/2022/10/26/1-isc2-cc-flashcard-chapter1/</url>
    <content><![CDATA[<span id="more"></span>

<object data="isc2-cc-flashcard.pdf" type="application/pdf" width="100%" height="600">




</object>]]></content>
  </entry>
  <entry>
    <title>1.terraform_IaC-Concepts</title>
    <url>/2022/10/26/1.terraform-IaC-Concepts/</url>
    <content><![CDATA[<h2 id="What-is-Infrastructure-as-Code"><a href="#What-is-Infrastructure-as-Code" class="headerlink" title="What is Infrastructure as Code?"></a>What is Infrastructure as Code?</h2><span id="more"></span>

<p><strong>The Problem with Manual Configuration</strong></p>
<p>Manually Configuring your cloud infrastructure allows you to easily start using new service offerings to quickly prototype architectures however it comes with mant downsides:</p>
<ul>
<li>Its easy to misconfigure a service through human error</li>
<li>Its hard to manage the expected state of configuration for compliance</li>
<li>Its hard to transfer configuration knowledge to other team members</li>
</ul>
<p><strong>Infrastructure as Code (IaC)</strong></p>
<p>You write a configuration script to <strong>automate</strong> creating, updating, or destroying cloud infrastructure.</p>
<ul>
<li>IaC is a blueprint of your infrastructure</li>
<li>IaC allows you to easily <strong>share, version, or inventory</strong> your cloud infrastructure.</li>
</ul>
<p><img src="2022-10-26_17-14-26.png" alt="What is Infrastructure as Code_quiz" title="1111111"></p>
<p><img src="2022-10-26_17-14-55.png" alt="What is Infrastructure as Code_card"></p>
<h2 id="Popular-Infrastructure-as-Code-tools-IaC"><a href="#Popular-Infrastructure-as-Code-tools-IaC" class="headerlink" title="Popular Infrastructure as Code tools (IaC)"></a>Popular Infrastructure as Code tools (IaC)</h2><p><font color="Red">&gt;<strong>Declarative</strong></font></p>
<ul>
<li>You say what you want, and the rest is filled in. <strong>Explicit</strong></li>
<li>More verbose, but zero chance of misconfiguration</li>
<li>Uses scripting languages eg. JSON, YAML, XML</li>
</ul>
<p><strong>ARM Templates</strong></p>
<ul>
<li>Supports Azure Only</li>
</ul>
<p><strong>Azure Blueprints</strong></p>
<ul>
<li>Supports only Azure</li>
</ul>
<p><strong>CloudFormation</strong></p>
<ul>
<li>Only for AWS</li>
</ul>
<p><strong>Cloud Deployment Manager</strong></p>
<ul>
<li>Supports on Google Cloud</li>
</ul>
<p><strong>Terraform</strong></p>
<ul>
<li>Supports many cloud service providers (CSPs) and cloud services</li>
</ul>
<p><font color="Red"><strong>Imperative</strong></font></p>
<ul>
<li>What you see is what you get. <strong>Implicit</strong></li>
<li>Less verbose, you cloud end up with misconfiguration</li>
<li>Does more than Declarative</li>
<li>Uses programming languages eg. Python, Ruby, JavaScript</li>
</ul>
<p><strong>AWS Cloud Development Kit (CDK)</strong></p>
<ul>
<li>Supports only AWS</li>
<li>Many built-in templates for opinionated best practices</li>
</ul>
<p><strong>Pulumi</strong></p>
<ul>
<li>Supports AWS, Azure, GCP, K8</li>
</ul>
<p><img src="2022-10-26_17-22-21.png" alt="2022-10-26_17-22-21"></p>
<p><img src="2022-10-26_17-23-22.png" alt="2022-10-26_17-23-22"></p>
<h2 id="Declarative"><a href="#Declarative" class="headerlink" title="Declarative"></a>Declarative</h2><p><strong>Terraform</strong> is declarative but the Terraform Language features <strong>imperative-like functionality.</strong></p>
<p><strong>Declarative</strong></p>
<p>YAML, JSON, XML</p>
<ul>
<li>Limited or no support for imperative-like features.</li>
<li>In some cases, you can add behaviour by extending the base language. E.g. CloudFormation Macros.</li>
</ul>
<p><strong>Declarative|Imperative</strong></p>
<p>HCL-ish (Terraform Language)</p>
<p>Supports:</p>
<ul>
<li>Loops (For Each)</li>
<li>Dynamic Blocks</li>
<li>Locals</li>
<li>Complex Data Structure<ul>
<li>Maps, Collections</li>
</ul>
</li>
</ul>
<p><strong>Imperative</strong></p>
<p>Ruby, Python, JavaScript…</p>
<ul>
<li>Imperative features are the utility of the entire feature set of the programming language.</li>
</ul>
<p><img src="2022-10-26_17-36-20.png" alt="2022-10-26_17-36-20"></p>
<p><img src="2022-10-26_17-36-48.png" alt="2022-10-26_17-36-48"></p>
<h2 id="Infrastructure-Lifecycle"><a href="#Infrastructure-Lifecycle" class="headerlink" title="Infrastructure Lifecycle"></a>Infrastructure Lifecycle</h2><p><strong>What is Infrastructure Lifecycle?</strong></p>
<p>the idea <strong>of having clearly defined and distinct work phases</strong> which are used by DevOps Engineers to <strong>plan, design, build, test, and deliver, maintain and retire</strong> cloud infrastructure.</p>
<p><strong>What is Day 0, Day 1, and Day 2?</strong></p>
<p>Day 0-2 is a simplified way to describe phases of an infrastructure lifecycle</p>
<ul>
<li>Day 0 - Plan and Design</li>
<li>Day 1 - Develop and Iterate</li>
<li>Day 2 - Go live and maintain</li>
</ul>
<p>Days do not literally mean <strong>a 24 hour day</strong> and is just a broadway of defining where infrastructure project would be</p>
<p><img src="2022-10-26_17-38-10.png" alt="2022-10-26_17-38-10"></p>
<h2 id="Infrastructure-Lifecycle-Advantages"><a href="#Infrastructure-Lifecycle-Advantages" class="headerlink" title="Infrastructure Lifecycle Advantages"></a><img src="2022-10-26_17-38-39.png" alt="2022-10-26_17-38-39">Infrastructure Lifecycle Advantages</h2><p>How does IaC enhance the Infrastructure Lifecycle?</p>
<p><strong>Reliability</strong></p>
<p>IaC makes changes <strong>idempotent</strong>, consistent, repeatable, and predictable.</p>
<p><strong>Idempotent</strong></p>
<p>No matter how many times you run IaC, you will always end up with the same state that is expected</p>
<p><strong>Manageability</strong></p>
<ul>
<li>enable mutation via code</li>
<li>revised, with minimal changes</li>
</ul>
<p><strong>Sensibility</strong></p>
<p>avoid financial and reputational losses to even loss of life when considering government and military dependencies on infrastructure</p>
<p><img src="2022-10-26_17-46-03.png" alt="2022-10-26_17-46-03"></p>
<p><img src="2022-10-26_17-46-19.png" alt="2022-10-26_17-46-19"></p>
<h2 id="Non-Idempotent-vs-Idempotent"><a href="#Non-Idempotent-vs-Idempotent" class="headerlink" title="Non-Idempotent vs Idempotent"></a>Non-Idempotent vs Idempotent</h2><p><strong>Non-Idempotent</strong></p>
<p>When I deploy my IaC config file it will <strong>provision</strong> and <strong>launch</strong> 2 virtual machines</p>
<p>When I update my IaC and deploy again, I will end up with 2 new VMs with a total of 4 VMs</p>
<p><strong>IaC</strong>: 2 VMs</p>
<p>We expect a state of <strong>2</strong></p>
<p>We end up with <strong>4</strong></p>
<hr>
<p><strong>Idempotent</strong></p>
<p>When I deploy my IaC config file it will <strong>provision</strong> and <strong>launch</strong> 2 virtual machines</p>
<p>When I update my IaC and deploy again, it will update the VMs if changed by <strong>modifying or deleting and creating new VMs</strong></p>
<p><strong>IaC</strong>: 2 VMs</p>
<p>We expect a state of <strong>2</strong></p>
<p>We end up with <strong>2</strong></p>
<p><img src="2022-10-26_17-52-07.png" alt="2022-10-26_17-52-07"></p>
<h2 id="Provisioning-vs-Deployment-vs-Orchestration"><a href="#Provisioning-vs-Deployment-vs-Orchestration" class="headerlink" title="Provisioning vs Deployment vs Orchestration"></a>Provisioning vs Deployment vs Orchestration</h2><p><strong>Provisioning</strong></p>
<p>To prepare a server with systems, data, and software, and make it ready for network operation.</p>
<p>Using Configuration Management tools like Puppet, Ansible, Chef, Bash scripts, PowerShell, or Cloud-Init you can provision a server.</p>
<p><strong>When you launch a cloud service and configure it you are “provisioning”</strong></p>
<p><strong>Deployment</strong></p>
<p>Deployment is the act of delivering a version of your application to run a provisioned server.</p>
<p>Deployment could be performed via AWS CodePipline, Harness, Jenkins, Github Actions, CircleCI</p>
<p><strong>Orchestration</strong></p>
<p>Orchestration is the act of coordinating multiple systems or services.</p>
<p>Orchestration is a common term when working with microservices, Containers, and Kubernetes.</p>
<p>Orchestration could be Kubernetes, Salt, Fabric</p>
<p><img src="2022-10-26_18-07-30.png" alt="2022-10-26_18-07-30"></p>
<p><img src="2022-10-26_18-07-53.png" alt="2022-10-26_18-07-53"></p>
<p><img src="2022-10-26_18-08-11.png" alt="2022-10-26_18-08-11"></p>
<h2 id="Configuration-Drift"><a href="#Configuration-Drift" class="headerlink" title="Configuration Drift"></a>Configuration Drift</h2><p><strong>Configuration Drift</strong> is when provisioned infrastructure has <strong>an unexpected configuration change</strong> due to:</p>
<ul>
<li>team members manually adjusting configuration options</li>
<li>malicious actors</li>
<li>side effects from APIs, SDK, or CLIs.</li>
</ul>
<p>eg. a junior developer turns on Delete on Termination for the production database.</p>
<p>Configuration Drift going unnoticed could be a loss or breach of cloud services and residing data or result in interruption of services or unexpected downtime.</p>
<p><strong>How to detect configuration drift?</strong></p>
<ul>
<li>A compliance tool that can detect misconfiguration eg. AWS Config, Azure Policies, *GCP Security Health Analytics</li>
<li>Built-in support for drift detection eg. AWS CloudFormation Drift Detection</li>
<li>Storing the expected state eg. Terraform state files</li>
</ul>
<p><strong>How to correct configuration drift?</strong></p>
<ul>
<li>A compliance tool that can remediate (correct) misconfiguration e.g. AWS Config</li>
<li>Terraform refresh and plan commands</li>
<li>Manually correcting the configuration (not recommended)</li>
<li>Tearing down and setting up the infrastructure again</li>
</ul>
<p>Note: Terraform refresh command is not recommended</p>
<p>Please use the alias command: terraform apply -refresh-only -auto-approve or terraform apply -refresh-only</p>
<p><a href="https://www.terraform.io/cli/commands/refresh#usage">https://www.terraform.io/cli/commands/refresh#usage</a></p>
<p><strong>How to prevent configuration drift?</strong></p>
<ul>
<li>Immutable infrastructure, always create and destroy, never reuse, Blue, Green deployment strategy.<ul>
<li>Servers are never modified after they are deployed</li>
<li>Baking AMI images or containers via AWS Image Builder or HashiCorp Packer, or a build server eg. GCP Cloud Run</li>
</ul>
</li>
<li>Using GitOps to version control our IaC, and peer review every single via Pull Requests change to infrastructure</li>
</ul>
<p><img src="2022-10-26_22-12-45.png" alt="2022-10-26_22-12-45"></p>
<p><img src="2022-10-26_22-13-16.png" alt="2022-10-26_22-13-16"></p>
<p><img src="2022-10-26_22-14-10.png" alt="2022-10-26_22-14-10"></p>
<p><img src="2022-10-26_22-14-54.png" alt="2022-10-26_22-14-54"></p>
<h2 id="Mutable-vs-Immutable-Infrastructure"><a href="#Mutable-vs-Immutable-Infrastructure" class="headerlink" title="Mutable vs Immutable Infrastructure"></a>Mutable vs Immutable Infrastructure</h2><p><strong>Mutable Infrastructure</strong></p>
<p>Develop → Deploy → Configure</p>
<p>A Virtual Machine (VM) is deployed and then a Configuration Management tool like Ansible, Puppet, Chef, Salt, or Cloud-Init is used to configure the state of the server</p>
<p><strong>cloud-init</strong></p>
<p><strong>Immutable Infrastructure</strong></p>
<p>Develop → Configure → Deploy</p>
<p>When a VM is launched and provisioned, it is turned into a virtual image and stored in an image repository. That image is used to deploy VM instances.</p>
<p><strong>Packer</strong></p>
<p><img src="2022-10-26_22-17-47.png" alt="2022-10-26_22-17-47"></p>
<p><img src="2022-10-26_22-18-14.png" alt="2022-10-26_22-18-14"></p>
<h2 id="What-is-GitOps"><a href="#What-is-GitOps" class="headerlink" title="What is GitOps?"></a>What is GitOps?</h2><p><strong>GitOps</strong> is when you take Infrastructure as Code (IaC) and you use a git repository to <strong>introduce a formal process to review and accept changes to infrastructure code</strong>, once that code is accepted, it automatically triggers a deploy</p>
<p><img src="2022-10-26_22-21-29.png" alt="2022-10-26_22-21-29"></p>
<h2 id="Immutable-Infrastructure-Guarantee"><a href="#Immutable-Infrastructure-Guarantee" class="headerlink" title="Immutable Infrastructure Guarantee"></a>Immutable Infrastructure Guarantee</h2><p>Terraform encourages you towards an Immutable Infrastructure architect so you get the following guarantees.</p>
<p><strong>Cloud Resource Failure</strong> – What if an EC2 instance fails a status check?</p>
<p><strong>Application Failure</strong> – What if your post-installation script fails due to a change in a package?</p>
<p><strong>Time to Deploy</strong> - What if I need to deploy in a hurry?</p>
<p><strong>Worst Case Scenario</strong></p>
<ul>
<li>Accidental Deletion</li>
<li>Compromised by a malicious actor</li>
<li>Need to Change Regions (region outage)</li>
</ul>
<p><strong>No Guarantee of 1-to-1</strong></p>
<p>Every time Cloud-Init runs post-deploy there is no guarantee it’s one-to-one with your other VMs.</p>
<p><strong>Golden Images</strong></p>
<ul>
<li>Guarantee of 1-to-1 with your fleet</li>
<li>Increased assurance of consistency, security</li>
<li>Speeds up your deployments</li>
</ul>
<p><img src="2022-10-26_22-27-56.png" alt="Immutable Infrastructure Guarantee_quiz"></p>
<p><img src="2022-10-26_22-28-16.png" alt="Immutable Infrastructure Guarantee_card"></p>
]]></content>
      <categories>
        <category>terraform</category>
      </categories>
      <tags>
        <tag>terraform</tag>
      </tags>
  </entry>
  <entry>
    <title>2940-switch-command-reference</title>
    <url>/2022/11/17/2940-switch-command-reference/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>3560-switch-command-reference</title>
    <url>/2022/11/17/3560-switch-command-reference/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>16-and-36-Port-Ethernet-Switch-Module</title>
    <url>/2022/11/17/16-and-36-Port-Ethernet-Switch-Module/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>802-11无线网络权威指南第二版中文版</title>
    <url>/2022/11/17/802-11%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E7%AC%AC%E4%BA%8C%E7%89%88%E4%B8%AD%E6%96%87%E7%89%88/</url>
    <content><![CDATA[<p><object data="802-11无线网络权威指南第二版中文版.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-AWS-Authentication-Mechanisms-10</title>
    <url>/2022/11/14/AWS-Security-Specialty-AWS-Authentication-Mechanisms-10/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-AWS-CloudTrail:-An-Introduction-14</title>
    <url>/2022/11/14/AWS-Security-Specialty-AWS-CloudTrail-An-Introduction-14/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-AWS-Config-An-Introduction-16</title>
    <url>/2022/11/14/AWS-Security-Specialty-AWS-Config-An-Introduction-16/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-AWS-Encryption-for-Data-Analytics-36</title>
    <url>/2022/11/14/AWS-Security-Specialty-AWS-Encryption-for-Data-Analytics-36/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-AWS-Incident-Response:-Isolating-your-EC2-instances-12</title>
    <url>/2022/11/14/AWS-Security-Specialty-AWS-Incident-Response-Isolating-your-EC2-instances-12/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-AWS-Virtual-Private-Cloud:-Subnets-and-Routing-38</title>
    <url>/2022/11/14/AWS-Security-Specialty-AWS-Virtual-Private-Cloud-Subnets-and-Routing-38/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-AWS-Security-Best-Practices:-Abstract-and-Container-Services-40</title>
    <url>/2022/11/14/AWS-Security-Specialty-AWS-Security-Best-Practices-Abstract-and-Container-Services-40/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Advanced-Techniques-for-AWS-Monitoring,-Metrics-and-Logging-29</title>
    <url>/2022/11/14/AWS-Security-Specialty-Advanced-Techniques-for-AWS-Monitoring-Metrics-and-Logging-29/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Amazon-Inspector-18</title>
    <url>/2022/11/14/AWS-Security-Specialty-Amazon-Inspector-18/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-An-Overview-of-Amazon-CloudWatch-24</title>
    <url>/2022/11/14/AWS-Security-Specialty-An-Overview-of-Amazon-CloudWatch-24/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Authorization-Controls-in-AWS-9</title>
    <url>/2022/11/14/AWS-Security-Specialty-Authorization-Controls-in-AWS-9/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Building-CloudWatch-Dashboards-25</title>
    <url>/2022/11/14/AWS-Security-Specialty-Building-CloudWatch-Dashboards-25/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Cert-Prep:-AWS-Security-Specialty-Certification-45</title>
    <url>/2022/11/14/AWS-Security-Specialty-Cert-Prep-AWS-Security-Specialty-Certification-45/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Enforcing-Compliance-Security-Controls-with-Amazon-Macie-23</title>
    <url>/2022/11/14/AWS-Security-Specialty-Enforcing-Compliance-Security-Controls-with-Amazon-Macie-23/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-How-AWS-IAM-is-Used-to-Securely-Manage-Access-1</title>
    <url>/2022/11/14/AWS-Security-Specialty-How-AWS-IAM-is-Used-to-Securely-Manage-Access-1/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-How-to-Implement-Enable-Logging-Across-AWS-Services-Part-1-of-2-26</title>
    <url>/2022/11/14/AWS-Security-Specialty-How-to-Implement-Enable-Logging-Across-AWS-Services-Part-1-of-2-26/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-How-to-Implement-Enable-Logging-Across-AWS-Services-Part-2-of-2-27</title>
    <url>/2022/11/14/AWS-Security-Specialty-How-to-Implement-Enable-Logging-Across-AWS-Services-Part-2-of-2-27/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-How-to-Share-CMKs-Across-Multiple-Accounts-Using-AWS-KMS-31</title>
    <url>/2022/11/14/AWS-Security-Specialty-How-to-Share-CMKs-Across-Multiple-Accounts-Using-AWS-KMS-31/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-How-to-Use-KMS-Key-Encryption-to-Protect-Your-Data-30</title>
    <url>/2022/11/14/AWS-Security-Specialty-How-to-Use-KMS-Key-Encryption-to-Protect-Your-Data-30/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Intrusion-Detection-and-Prevention-on-Amazon-Web-Services-43</title>
    <url>/2022/11/14/AWS-Security-Specialty-Intrusion-Detection-and-Prevention-on-Amazon-Web-Services-43/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Advanced-Roles-and-Groups-Management-Using-IAM-6</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Advanced-Roles-and-Groups-Management-Using-IAM-6/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Code-Red:-Repair-an-AWS-Environment-with-a-Linux-Bastion-Host-44</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Code-Red-Repair-an-AWS-Environment-with-a-Linux-Bastion-Host-44/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Knowledge-Check:-Overview-of-AWS-Identity-and-Access-Management-IAM-7</title>
    <url>/2022/11/14/AWS-Security-Specialty-Knowledge-Check-Overview-of-AWS-Identity-and-Access-Management-IAM-7/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Detecting-EC2-Threats-with-Amazon-GuardDuty-22</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Detecting-EC2-Threats-with-Amazon-GuardDuty-22/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Amazon-EC2-Instance-Isolation-Challenge-13</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Amazon-EC2-Instance-Isolation-Challenge-13/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Compliance-Check-Using-AWS-Config-Rules-Managed-Custom-17</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Compliance-Check-Using-AWS-Config-Rules-Managed-Custom-17/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Introduction-to-IAM-5</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Introduction-to-IAM-5/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Monitor-Amazon-CloudWatch-Security-Logs-for-failed-SSH-attempts-28</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Monitor-Amazon-CloudWatch-Security-Logs-for-failed-SSH-attempts-28/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Follow-Best-Practices-with-AWS-Trusted-Advisor-20</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Follow-Best-Practices-with-AWS-Trusted-Advisor-20/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Monitoring-AWS-CloudTrail-Events-with-Amazon-CloudWatch-15</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Monitoring-AWS-CloudTrail-Events-with-Amazon-CloudWatch-15/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Query-Encrypted-Amazon-S3-Data-with-Amazon-Athena-42</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Query-Encrypted-Amazon-S3-Data-with-Amazon-Athena-42/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Securing-your-VPC-using-Public-and-Private-Subnets-39</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Securing-your-VPC-using-Public-and-Private-Subnets-39/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Using-Amazon-Key-Management-Service-to-Encrypt-S3-and-EBS-Data-33</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Using-Amazon-Key-Management-Service-to-Encrypt-S3-and-EBS-Data-33/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Lab-Using-S3-Bucket-Policies-and-Conditions-to-Restrict-Specific-Permissions-41</title>
    <url>/2022/11/14/AWS-Security-Specialty-Lab-Using-S3-Bucket-Policies-and-Conditions-to-Restrict-Specific-Permissions-41/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Managing-Access-using-IAM-User-Groups-Roles-3</title>
    <url>/2022/11/14/AWS-Security-Specialty-Managing-Access-using-IAM-User-Groups-Roles-3/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Manage-Your-Own-Encryption-Keys-Using-AWS-CloudHSM-35</title>
    <url>/2022/11/14/AWS-Security-Specialty-Manage-Your-Own-Encryption-Keys-Using-AWS-CloudHSM-35/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Protecting-Web-Apps-with-AWS-WAF-Shield-Firewall-Manager-37</title>
    <url>/2022/11/14/AWS-Security-Specialty-Protecting-Web-Apps-with-AWS-WAF-Shield-Firewall-Manager-37/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Managing-User-Identities-with-Long-Term-Credentials-in-AWS-IAM-2</title>
    <url>/2022/11/14/AWS-Security-Specialty-Managing-User-Identities-with-Long-Term-Credentials-in-AWS-IAM-2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Sharing-Secrets-Between-Multiple-Accounts-Using-AWS-Secrets-Manager-34</title>
    <url>/2022/11/14/AWS-Security-Specialty-Sharing-Secrets-Between-Multiple-Accounts-Using-AWS-Secrets-Manager-34/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Understanding-Amazon-GuardDuty-21</title>
    <url>/2022/11/14/AWS-Security-Specialty-Understanding-Amazon-GuardDuty-21/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-The-Difference-Between-Authentication,-Authorization,-and-Access-Control-in-AWS-8</title>
    <url>/2022/11/14/AWS-Security-Specialty-The-Difference-Between-Authentication-Authorization-and-Access-Control-in-AWS-8/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Using-AWS-Identity-Federation-to-Simplify-Access-at-Scale-11</title>
    <url>/2022/11/14/AWS-Security-Specialty-Using-AWS-Identity-Federation-to-Simplify-Access-at-Scale-11/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Understanding-S3-Encryption-Mechanisms-to-Secure-your-Data-32</title>
    <url>/2022/11/14/AWS-Security-Specialty-Understanding-S3-Encryption-Mechanisms-to-Secure-your-Data-32/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Using-AWS-Trusted-Advisor-to-Follow-and-Implement-Best-Practices-19</title>
    <url>/2022/11/14/AWS-Security-Specialty-Using-AWS-Trusted-Advisor-to-Follow-and-Implement-Best-Practices-19/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-140-Automating-Azure-Virtual-Desktop-Management-Tasks-24</title>
    <url>/2022/11/13/AZ-140-Automating-Azure-Virtual-Desktop-Management-Tasks-24/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on Automating Azure Virtual Desktop Management Tasks</p>
<p>My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist and have been working in the Microsoft cloud services for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications.</p>
<p>My contact information is available on the screen. Please feel free to reach out to me with any questions, comments, or concerns and I will be happy to discuss these with you. </p>
<p>For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#x73;&#117;&#112;&#x70;&#111;&#x72;&#x74;&#x40;&#x63;&#x6c;&#x6f;&#117;&#x64;&#97;&#x63;&#97;&#100;&#101;&#109;&#x79;&#x2e;&#x63;&#111;&#109;">&#x73;&#117;&#112;&#x70;&#111;&#x72;&#x74;&#x40;&#x63;&#x6c;&#x6f;&#117;&#x64;&#97;&#x63;&#97;&#100;&#101;&#109;&#x79;&#x2e;&#x63;&#111;&#109;</a> and one of our cloud experts will follow up with you.</p>
<p>This course is intended for anyone planning to take the Azure Virtual Desktop Specialty exam and anyone interested in learning how to deploy an Azure Virtual Desktop environment</p>
<p>By the end of this course, you will have knowledge on:</p>
<ul>
<li>Configuring Automation for Azure Virtual Desktop</li>
<li>Automating Management of host pools, session hosts, and user sessions by using PowerShell and Azure Command-Line interface (CLI)</li>
<li>Implementing Autoscaling in host pools</li>
</ul>
<p>To get the most from this course you should have an Administrator-level understanding of Azure Cloud services</p>
<p>When I created this course, all information was current. Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>If you notice any updates or corrections, please reach out to us. Thank you!</p>
<h1 id="Configuring-Automation-for-Azure-Virtual-Desktop"><a href="#Configuring-Automation-for-Azure-Virtual-Desktop" class="headerlink" title="Configuring Automation for Azure Virtual Desktop"></a>Configuring Automation for Azure Virtual Desktop</h1><p>Welcome to this module on configuring automation for Azure Virtual Desktop. In this module, we will cover the following:</p>
<ul>
<li>We will look at how scaling works</li>
<li>Prerequisites for Automation with Azure Virtual Desktop</li>
<li>Finally, we will look at the high-level steps you need to complete when configuring Azure Automation for AVD</li>
</ul>
<p>Let’s start this module off by discussing how scaling works. There are different ways in which you can utilize scaling within Azure Virtual Desktop. You can start and stop virtual machines during peak and off-peak usage hours. You can Scale out virtual machines based on the number of sessions per CPU core. Finally, you can scale in virtual machines during off-peak hours so only a few VMs are running.</p>
<p>We are now going to move on to looking at the prerequisites you need to complete before you can integrate automation with Azure Virtual Desktop.</p>
<p>You need to have a functioning Azure Virtual Desktop host pool within your environment. Your session hosts need to be registered with the Azure Virtual Desktop Service. You then need to ensure the account you are using to configure automation has at least contributor access to the entire subscription.</p>
<p>Finally, you need to ensure the management machine you are using to complete this deployment has the relevant tools on. Ensure PowerShell 5.1 or later is installed on this management machine, and you will need to install the Azure Az PowerShell module to be able to complete the configuration.</p>
<p>In the final lecture of this module, we will look at the high-level steps you need to complete in order to configure Azure Automation for Azure Virtual Desktop.</p>
<p>The first step is to create an Azure Automation account which can be completed via PowerShell. If you have an existing automation account you can also utilize this, however, you will need to follow a specific process to update this account if required.</p>
<p>The next step is to create an Azure Automation run as account. This provides authentication for managing resources in Azure with Azure cmdlets. Once you have created the relevant automation accounts you then need to create an Azure Logic App. You will need to download and import the Desktop Virtualization PowerShell module to use within your PowerShell session for this step.</p>
<p>Finally, you will need to create the execution schedule for the new scaling tool. The PowerShell script will need to be run for each host pool you want to autoscale, but you only need on Azure Automation account.</p>
<h1 id="Automating-Management-of-Host-Pools-Session-Hosts-and-User-Sessions-by-Using-PowerShell-and-Azure-Command-Line-Interface-CLI"><a href="#Automating-Management-of-Host-Pools-Session-Hosts-and-User-Sessions-by-Using-PowerShell-and-Azure-Command-Line-Interface-CLI" class="headerlink" title="Automating Management of Host Pools, Session Hosts, and User Sessions by Using PowerShell and Azure Command-Line Interface (CLI)"></a>Automating Management of Host Pools, Session Hosts, and User Sessions by Using PowerShell and Azure Command-Line Interface (CLI)</h1><p>Welcome to this module on automating management of host pools, session hosts, and user sessions by using PowerShell, and Azure Command-Line Interface (CLI). In this module, we will cover the following topics:</p>
<ul>
<li>Automating host pools, session hosts, and user sessions with PowerShell</li>
<li>Automating host pools, session hosts, and user sessions with Azure Command-line interface (CLI)</li>
</ul>
<p>Let’s start off by doing a walk-through demo of configuring automation tasks with PowerShell.</p>
<p>Here we have PowerShell open with Administrative privileges. The first step we need to complete is to ensure we have the relevant module installed to allow us to run the AVD Powershell cmdlets. In our case, we need to install the ‘Az.DesktopVirtualization’ module. We can select Yes for the warnings that appear, and then we are ready to connect and authenticate to the Azure portal.</p>
<p>We use the ‘Connect-AzAccount’ cmdlet to initiate the connection, and then enter our global administrative credentials in the pop-up box to authenticate. We are now logged into our tenant and ready to manage the AVD environment.</p>
<p>The first command we will look at is ‘Get-AzWvdHostPool’ which outputs relevant information regarding our AVD host pool. We need to specify the host pool name and the resource group it is stored in. The output then shows you all the relevant information about that specific host pool, including location, an Identity Type if you have set one, and any plan details if you are using one. The Get cmdlet will always retrieve information about the relevant resource you have specified and will not make any changes.</p>
<p>Another Get cmdlet we can use when managing AVD is ‘Get-AzWvdDesktop’ which will show us relevant information about a specific desktop application we have set up. You need to specify the resource group, application group name, and the name of the desktop application you need information about.</p>
<p>Let’s now look at a cmdlet that will make an actual change to our environment. In this cmdlet we are going to remove an application group, so we use the cmdlet called ‘Remove-AzWvdApplicaitonGroup’. As you can see we need to specify the resource group again, and the name of the application group we want to remove. </p>
<p>The final cmdlet I want to show is one to update an existing resource within AVD. We need to use an update cmdlet, in our case we are going to utilize the ‘Update-AzWvdHostPool’ cmdlet to update an existing host pool. As you can see there are a number of settings we can update. In our case, the only one that will be different is that we are changing the MaxSessionLimit from 5 to 6.</p>
<p>We are now going to do a walk-through demo of configuring automation tasks with Azure CLI.</p>
<p>We are launching the Azure CLI from the Azure portal, therefore need to navigate to the portal.azure.com&#x2F;Cloudshell URL. As we are already authenticated from logging into the Azure portal we do not need to authenticate again when launching the Azure CLI.</p>
<p>The first command type we are going to use is one that lists specific resources within our AVD environment. List commands are very similar to ‘Get’ cmdlets in PowerShell. As you can see in this command, we want to list all the information about our application group called ‘Desktop’ within our resource group. There is a whole host of details that are shown as part of the output, including the application group type, location, and the object ID.</p>
<p>So we can get a clear view of the output, I have re-launched the Azure CLI. The next command I want to look at is similar to the list command, in that it does not make any changes and simply outputs information about a specific resource. It is the ‘show’ command. In our example, we want to show information regarding the application group called ‘ITGEEK-DT01’. Again as you can see a number of details are shown in the output, very similar to the list command output.</p>
<p>One clever feature of the Azure CLI is that it will not let you delete resources if other resources already exist within it. In this example we are trying to delete a host pool, however, because an application group exists within that which needs to be deleted first, we get an error giving us that information.</p>
<h1 id="Implementing-Autoscaling-in-Host-Pools"><a href="#Implementing-Autoscaling-in-Host-Pools" class="headerlink" title="Implementing Autoscaling in Host Pools"></a>Implementing Autoscaling in Host Pools</h1><p>Welcome to this module on implementing autoscaling in host pools. In this module we will cover the following topics:</p>
<ul>
<li>Azure Virtual Desktop Scaling plans</li>
<li>Requirements for auto-scaling in AVD</li>
<li>A demo where I will configure an auto-scaling plan for Azure Virtual Desktop</li>
</ul>
<p>Let’s start off by discussing scaling plans. Traditionally, scaling was implemented within Azure using either Powershell scripts or Azure Automation, however, you can utilize a feature called scaling plans.</p>
<p>Scaling plans allows you to define ramp-up hours which is the time you want to increase resources when the usage increases. </p>
<p>Peak hours which is the time of day when usage is at its highest.</p>
<p>Ramp-down hours when usage starts to drop off.</p>
<p>You can then configure associated triggers which will kick off your scaling plan if those triggers are met, for example, a certain percentage of CPU usage. Finally, your scaling plan must include an associated schedule for at least one day of the week.</p>
<p>Let’s now move on to discussing requirements for autoscaling in Azure Virtual Desktop. There are two main items that need to be in place before you can start implementing autoscaling. The first is that you need to create a custom role-based access control, better known as RBAC, role. Once this role has been created, the second item that needs to be in place is that you need to assign this role to the Azure Virtual Desktop application. </p>
<p>Once these two requirements are fulfilled, you can start configuring autoscaling in Azure Virtual Desktop</p>
<p>To finish off this module we are going to complete a demo of implementing a scaling plan in Azure that you can utilize with your AVD environment</p>
<p>Here we are in the Azure Portal. We need to navigate to the scaling plans section of the portal. We do not currently have any existing scaling plans, so let’s select ‘Create’. We now need to ensure we select the relevant subscription, resource group and give the scaling plan a name. You will need to be careful when selecting the location as not all locations support scaling plans. In our example, I am selecting Canada East as I know this region is supported. Finally, I am giving it a friendly name and moving on to the schedule plan.</p>
<p>We need to select ‘Add schedule’. We now have a number of different panes we need to complete. First, let’s enter general information like the schedule name. We then need to select which days we want the schedule to repeat on, in our case, we select each weekday.</p>
<p>For ‘ramp-up’ hours, the repeat on days and time zone are already entered by default, so we need to enter the start time. Please note this utilizes the 24-hour clock system. We then need to specify the load balancing algorithm. I am going to leave this on bread-first. We then need to specify the minimum percentage of session host virtual machines to start for ramp-up and peak hours. I will leave this on the default of 20%. Finally, on this pane, we need to enter the percentage of used host pool capacity that will be considered to evaluate whether to turn on or off virtual machines during ramp-up and peak hours.</p>
<p>If we now move onto the ‘Peak Hours’ pane, again the days and time zone are already selected and we need to specify the start time and load balancing algorithm which I am going to change to bread-first. The threshold capacity is grayed out and set to 60%, therefore we cannot edit this.</p>
<p>Now we move on to the ‘ramp-down’ pane. The first value we need to set is the start time, then the load balancing algorithm, which I am again going to set as breadth-first. We now need to set the minimum percentage of session host virtual machines that you would like to get to for ramp-down and off-peak hours.</p>
<p>Next, we need to select the percentage of used host pool capacity that will be considered to evaluate whether to turn on or off virtual machines during ramp-down and off-peak hours. We can then specify if we want to force users to log off or not, set a delay time before forcing the users to log off and customize a notification message.</p>
<p>The final pane to complete the schedule configuration is the ‘off-peak hours’ pane. Here we need to specify the start time, and load balancing algorithm. Again I am changing this to bread-first. Please note we cannot edit the capacity threshold again.</p>
<p>Now the schedule is configured we need to select the host pool we want this to apply to. In our case, we do not have an active host pool in this tenant. Finally, we can enter any tags we want to set, before reviewing and creating our scaling plan.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We covered a lot of important topics in this module. The first lecture was on configuring automation for Azure Virtual Desktop, where we talked about how scaling works and some of its configurable values. We then looked at the prerequisites for automation, and finally the high-level steps you need to complete when configuring automation with Azure Virtual Desktop.</p>
<p>In the second lecture, we dived into automating management of host pools, session hosts, and user sessions by using both PowerShell and Azure Command Line Interface (CLI). This was a demo-heavy lecture where I did a demo using PowerShell and then a demo using Azure CLI for automation tasks for AVD.</p>
<p>In the final lecture of this module, we looked at implementing autoscaling in a host pool. Here, we looked at AVD scaling plans in more detail, followed by the requirements for autoscaling in AVD, and finished off with a demo of configuring a scaling plan.</p>
]]></content>
  </entry>
  <entry>
    <title>AWS-Security-Specialty-Using-IAM-Policies-to-Define-and-Manage-Permissions-4</title>
    <url>/2022/11/14/AWS-Security-Specialty-Using-IAM-Policies-to-Define-and-Manage-Permissions-4/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-140-Cert-Prep-Configuring-and-Operating-Microsoft-Azure-Virtual-Desktop-AZ-140-26</title>
    <url>/2022/11/13/AZ-140-Cert-Prep-Configuring-and-Operating-Microsoft-Azure-Virtual-Desktop-AZ-140-26/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Configuring-Apps-on-a-Session-Host-in-Azure-Virtual-Desktop-22</title>
    <url>/2022/11/13/AZ-140-Configuring-Apps-on-a-Session-Host-in-Azure-Virtual-Desktop-22/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on installing and configuring applications on a session host. My name is Shabba Azdah and I’ll be your instructor for this course. I am an Azure Virtual Desktop specialist and I’ve been working in the Microsoft Cloud services for several years. Specifically with Azure Virtual Desktop since its inception and multiple Azure-focused certifications. My contact information is available on the screen. Please feel free to reach out to me with any questions, comments or concerns, and I’ll be happy to discuss these with you. For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#115;&#117;&#112;&#x70;&#111;&#114;&#116;&#x40;&#x63;&#x6c;&#111;&#x75;&#x64;&#97;&#x63;&#x61;&#100;&#101;&#x6d;&#x79;&#x2e;&#x63;&#111;&#x6d;">&#115;&#117;&#112;&#x70;&#111;&#114;&#116;&#x40;&#x63;&#x6c;&#111;&#x75;&#x64;&#97;&#x63;&#x61;&#100;&#101;&#x6d;&#x79;&#x2e;&#x63;&#111;&#x6d;</a>. One of our Cloud experts will follow up with you.</p>
<p>This course is intended for anyone planning to take the Azure Virtual Desktop specialty exam and anyone interested in learning how to deploy an Azure Virtual Desktop environment. By the end of this course, you will have knowledge on configuring dynamic application delivery by using MSIX app attach, implementing application masking, deploying an application as a remote app, implementing and managing One Drive for business for a multi-session environment, implementing and managing Microsoft teams AV redirect, implementing and managing browsers and internet access for Azure Virtual Desktop, creating and configuring an application group, troubleshooting application issues related to Azure Virtual Desktop.</p>
<p>To get the most from this course, you should have an administrator-level understanding of Azure Cloud services. When I created this course, all information was current. Feedback on course content hosted by Cloud Academy is always appreciated and encouraged as it allows us as trainers to improve, which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact supportcloudacademy.com. If you notice any updates or corrections, please reach out to us. Thank you.</p>
<h1 id="Configuring-Dynamic-Application-Delivery-with-MSIX-App-Attach"><a href="#Configuring-Dynamic-Application-Delivery-with-MSIX-App-Attach" class="headerlink" title="Configuring Dynamic Application Delivery with MSIX App Attach"></a>Configuring Dynamic Application Delivery with MSIX App Attach</h1><p>Welcome to this module on configuring dynamic application delivery by using MSIX App Attach. We’ll cover the following topics. We’ll start off by discussing what is MSIX App Attach. Next, how does MSIX App Attach work.</p>
<p>We’ll finish off with a demo of setting up a file share for MSIX App Attach. Let’s start off by discussing what MSIX App Attach is. MSIX is a Windows app package format that provides modern packaging experience to all Windows applications. It allows you to create a separation between the user’s data, the operating system, and the applications. MSIX removes the need for repackaging when delivering the applications dynamically. It also allows you to reduce the amount of time it takes users to log into the AVD session, but also reduces the amount of infrastructure required, which also lowers cost. Now we know what MSIX App Attach is.</p>
<p>Let’s discuss how it works. It follows the following steps&#x2F;stages. First we have the stage step, which is when the MSIX App Attach notifies the OS file application is available and that the virtual disk that contains the MSIX package is available. Next, we have the registration step. This is when the MSIX App Attach uses a per user process to make the application available to users. Moving on, we have the delayed registration step. This is when the complete registration of the app is delayed until the user decides to run it. Once you have used the app and have finished, we then have the deregistration step, where the application is no longer available to the user after you sign out.</p>
<p>Finally, we have the D stage step. In this, the application is no longer available from the session host after a shutdown or restart of the VM. The steps we have just discussed all happen in the background, and the user does not experience this. As a user, you sign into the AVD remote desktop application as normal and select the hotspot you want to utilize. The user profile is unloaded from an Azure file share and then the MSIX App Attach applications are registered to the session host VM for the user. To complete this module, we’re going to complete a walk-through demo of setting up a file share, specifically an Azure file share for MSIX App Attach.</p>
<p>Here we are logged into our AD DS server and we need to create a new security group for our session host. We need to create a new security group in this domain, which will need to be synchronized to as Azure AD. Once we have created this group, in our case we call it session host, we then need to add the session host object into this group. Once we have finished this task, we need to complete an Azure AD connect sync, so we can have a way or we can force the sync with PowerShell. We are now in the Azure portal and have navigated to the storage account.</p>
<p>If you have not already done so, you will need to create the storage account or even Azure file share. And if you have followed previous Cloud Academy modules on then AZ-140 certification path, you have already completed this when creating the user profile share, including joining the storage account to your AD DS domain. We already have the storage account and I’ve created a new file share called MSIX. However, we need to assign the relevant storage roles to the session host security group, admins, and to the users who will be accessing the applications. We click on ‘Add Role Assignment’ and first assign the storage file data SMB share contributor role to the session host security group.</p>
<p>You’ll need to follow the same process, but assign the users the storage file data SMB share contributor role and the storage file data SMB share elevated contributor role to the administrators. We now need to mount the share to a VM so we can assign the relevant NTFS permissions. If you never get to this Azure storage account and the MSIX share you created, click on ‘Connect’ and then select the Active Directory authentication method.</p>
<p>Finally, copy the script to a notepad as we are going to run this in our VM to mount the share. The final step in this demo is to mount the share to our domain joined VM and add the NTFS permissions. We run the PowerShell script we copied earlier and run this with elevated privileges. Once this has run successfully, we navigate to Windows Explorer and go to the Map Drive. We can then go to the properties of the share and add the relevant NTFS permissions, including granting full control of the share to admins and read, execute, read on this folder content access to the session host group and the users.</p>
<h1 id="Deploying-an-Application-as-a-RemoteApp"><a href="#Deploying-an-Application-as-a-RemoteApp" class="headerlink" title="Deploying an Application as a RemoteApp"></a>Deploying an Application as a RemoteApp</h1><p>Welcome to this module on deploying an application as a Remote App. We will cover the following topics in this module. We’ll explain what remote app is from an Azure virtual desktop perspective. We’ll then explain the requirements we need to be met before you can deploy a remote app. We will complete this module by doing a demo of deploying a remote app in AVD. Let’s start this module by discussing what a remote app actually is. It’s essentially application streaming as a service, which means you are using as your virtual desktop to deliver apps to your customers over a secure network via virtual machines.</p>
<p>Although you are streaming the apps via virtual machine, you do need to grant the user access to the desktop by the specific remote app you are streaming. The custom app is streamed from a session host, meaning you need to ensure that app is installed on the golden image you have utilized for the existing session host. Now we understand what a remote app is, let’s talk about some of the requirements you need to have in place before deploying it. You need to have your custom app in place. This includes MSIX space applications, something we already discussed in this module, or an application that is already installed on your deployed session host. You need to ensure you have an identity, so credentials to your domain. This will be used to grant access to the host pool that is hosting the remote app within your AVD environment.</p>
<p>Finally, we need to ensure you have an Azure subscription. It will not be possible to deploy an AVD resource without this. So, it is the most vital requirement. In the final lecture of this module, we’ll complete a walk-through demo of deploying an application as a remote app. Here we are back in the Azure portal and we are going to navigate to the Azure virtual desktop service and click on application groups. We already have an existing application group for our AVD pooled host pool, but we’ll create a new one for our remote app. We need to enter all the relevant details like subscription, resource group, and the host pool you want to associate with this remote app. We then give it an appropriate name and click on ‘Next’. Here, we want to select the application which is installed on the session host that we want to create as a remote app. In our case, it’s his notepad. We have to save this and add the users who need to have access to this remote app. We then associate it with an existing or new workspace. Configure any advanced settings or tags. In our case, we do not, and then review and create.</p>
<h1 id="Implementing-and-Managing-OneDrive-for-Business-for-a-Multi-Session-Environment"><a href="#Implementing-and-Managing-OneDrive-for-Business-for-a-Multi-Session-Environment" class="headerlink" title="Implementing and Managing OneDrive for Business for a Multi-Session Environment"></a>Implementing and Managing OneDrive for Business for a Multi-Session Environment</h1><p>Welcome to this module on implementing and managing OneDrive for business for a multi-session environment. We’ll cover the following topics in this module. We’ll first do an overview of OneDrive for business with AVD. We’ll end this module with demo of installing and deploying OneDrive sync app per machine. Let’s start off by looking at an overview of OneDrive for business. It is supported in the following environments: Windows 10, both 32 bit and 64 bit architecture, where it supports VHDX files, Windows 7, both 32 and 64 bit architecture, where it supports VHD files. It is also supported on Windows Server OS versions 2008 R2 through to 2019, excluding Windows 7 2012. It supports VHDX files with all the Windows Server OS apart from service files on a R2, where it supports VHD files. It also supports non-persistent environments that have FSLogix apps or FSLogix office content.</p>
<p>Finally, you need to ensure you have a Microsoft 365 subscription that supports operating system we mentioned earlier in this lecture. In the final lecture of this module, we’ll complete a walkthrough demo of installing the OneDrive sync app per machine. Here we are logged into our session host and we are going to use PowerShell to install OneDrive per machine. We have already downloaded the onedrive.exe file, so that’s from PowerShell as admin, and change the directory to the folder where the install file is stored. We then need to run the command with the all users parameter, so OneDrive installs for all users, not just the one we are logged in with. Once the install is completed, we can browse to the start menu and see if OneDrive for business is installed. And browse to program files (x86)\Microsoft OneDrive directory, which confirms this has been installed on the virtual machine, rather than the user’s local profile.</p>
<h1 id="Implementing-and-Managing-Microsoft-Teams-AV-Redirect"><a href="#Implementing-and-Managing-Microsoft-Teams-AV-Redirect" class="headerlink" title="Implementing and Managing Microsoft Teams AV Redirect"></a>Implementing and Managing Microsoft Teams AV Redirect</h1><p>Welcome to this module on implementing and managing Microsoft Teams AV. In this module, we’ll cover the following topics: We’ll discuss the RDP redirection properties that need to be in place for Microsoft Teams, we’ll finish this module by doing a run through demo of installing and configuring the Microsoft Teams desktop app.</p>
<p>Let’s start this module by discussing the RDP redirection properties that need to be in place to enable Microsoft Teams to work within the AVD environment. RDP redirection is not needed if you are utilizing media optimization within your Azure Virtual Desktop environment. If you are using media optimization, then there are three redirection properties you need to set. You first need to enable audio capture from the RDP properties. We need to ensure you set the audio mode to one if it is not already done so.</p>
<p>Finally, you need to redirect the local device’s camera via RDP properties. In the final lecture of this module, we’ll complete a walk through demo of installing the Microsoft Teams desktop app. Here we are logging to our session host and before we install anything, we need to configure a registry entry. Let’s open the registry editor and navigate to HKEY_local_machine software Microsoft Teams. If a team key is not there, you can create this. We then want to create a D word key with the name is AVD environment. I will set value to one. Once we have set this we need to download and install the Teams WebSocket service.</p>
<p>As you can see, we have already downloaded the install file along with the Teams install package for later. We follow the instructions on Teams WebSocket service install until this is completed. The final part of this demo is to install the Microsoft Teams MSI package which we are going to do via PowerShell. There are two types of install method, either per user install or the per machine install. We are going to complete the per machine install commander, which is MSIexec&#x2F;I and then the path to the MSI&#x2F;L*V. And then the file path to the install log file. All user equals one. We have saved our MSL file to the C temp directory, which is the same location we will start our installation log file. Once this is completed, we are ready to use Microsoft Teams.</p>
<h1 id="Implementing-and-Managing-Browsers-and-Internet-Access-for-AVD-Sessions"><a href="#Implementing-and-Managing-Browsers-and-Internet-Access-for-AVD-Sessions" class="headerlink" title="Implementing and Managing Browsers and Internet Access for AVD Sessions"></a>Implementing and Managing Browsers and Internet Access for AVD Sessions</h1><p>Welcome to this module on implementing and managing browsers and internet access for Azure Virtual Desktop sessions. We will cover the following topics in this module. We’ll discuss managing internet access for AVD. We’ll finish this module by talking about managing browsers on a session host.</p>
<p>Let’s start off by talking about managing internet access for Azure Virtual Desktop. There are multiple methods in which you can control and manage into the access from Azure Virtual Desktop. You can implement network security groups, NSG, to create inbound and outbound rules on what parts are able to route out to the internet. You can implement an Azure firewall within your AVD environment to filter traffic inbound and outbound to the internet. This allows you more flexibility and control than an LSG, as well as additional security measures for internet access, like web filtering.</p>
<p>You can also implement a network virtual appliance, NVA, which includes third-party firewalls have the same control and flexibility as an Azure firewall for internet access. Depending on your requirements, you can block or allow access to the internet from your AVD session host. Finally, as we touched on earlier, you can filter access to the internet from AVD by using features like web filtering to block certain categories of websites like gambling.</p>
<p>In the final section of this module, we are going to discuss managing browsers on a session host. There are multiple methods you can utilize to deploy browsers within a session host. You can publish an application using MSIX App Attach or a Remote app. You can facilitate this by using the New-AzWvdApplication commander in PowerShell. If the browser needs to be standard for all users, you can include it as part of your golden image, which ensures it is applied to all session hosts. Finally, Azure Virtual Desktop Windows 10 session hosts support multiple browsers, including Google Chrome, Mozilla Firefox, and Edge Chromium.</p>
<h1 id="Creating-and-Configuring-an-Application-Group"><a href="#Creating-and-Configuring-an-Application-Group" class="headerlink" title="Creating and Configuring an Application Group"></a>Creating and Configuring an Application Group</h1><p>Welcome to this module on creating and configuring an application group. We will look at the following topics in this module. We’ll explain what application group is within an AVD environment. In the final lecture of this module, we’ll complete a walk-through demo of creating, configuring an application group. Let’s start this module by explaining what an application group is. It is a collection of remote applications that you published within the Azure Virtual Desktop environment. You must associate the application group with a pooled host pool only, not a personal host pool. You can publish both Windows desktop and remote app within an application group. Finally, you can create an application group using the Azure portal, PowerShell, and Azure CLI.</p>
<p>In the demo at the end of this module, we’ll show how to create an application group via the Azure portal. In the final lecture of this module, we’ll complete a demo walk-through of configuring an application group for your PowerShell. We saw in the remote app module, how to create an application group via that Azure portal earlier. In this demo we’re going to create an application group as a remote app with PowerShell. Here we are in the Azure portal and we are going to use the Azure Cloud Shell with PowerShell to run our commanders.</p>
<p>First command that we want to run is the new AZ WVD application group. Well, we need to specify the name we want to give the new application group, the name of our resource group, the type of application group we want to create, in our case this is a remote app, and then the host pool Arm path. At the end, we need to specify the region we want the application group to exist in. Next, we need to find the name of the app earliest we want to configure as our remote app. So, to get this information we run the get dash is at WVD start menu item, where we specify our application group name, and resource group name. This will output all the apps on the start menu and the alias name. So, we can specify this in the next command that we need to run.</p>
<p>Finally, we run the new AZ WVD application commander where we can specify that app alias we documented from the commander before as well as our group name; name we want to give the app and the resource group name. Once these three commanders are completed, we have provisioned our application group.</p>
<h1 id="Troubleshooting-Application-Issues-Related-to-AVD"><a href="#Troubleshooting-Application-Issues-Related-to-AVD" class="headerlink" title="Troubleshooting Application Issues Related to AVD"></a>Troubleshooting Application Issues Related to AVD</h1><p>Welcome to this module on troubleshooting application issues related to Azure Virtual Desktop. We will discuss the following topics in this module. We’ll discuss information gathering and about application issues related to AVD. We’ll finish off the module by looking at performance counters. Let’s start this module by discussing information gathering when troubleshooting application issues in AVD.</p>
<p>Generally, poor application performance is very hard to diagnose. You need to start this process by first collecting information on CPU usage, memory usage, and storage disk input&#x2F;output metric. However, the data alone is not enough to find root cause issues with application performance. We need to use performance counters if we want to use the information you have gathered to find the root cause of an application performance issue.</p>
<p>The user input delay counter can help you quickly identify the root cause for bad end-user RDP experiences including poor application performance. This count measures how long any user input stays in the queue before it’s picked up by a process. It works both locally and in remote sessions. You need to enable a register key under HK Local Machine, System, CurrentControlSet, Control, Terminal Server, and create a REG_DWORD key called EnableLagCounter, then set it to the value of one. Finally, you need to use the Performance Monitor Windows application to review the performance counters once you have enabled them and restarted your session host.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We covered a lot of ground in this course, including several important topics around installing and configuring apps on a session host. We started the course by discussing Configuring Dynamic Application delivery by using MSIX App Attach.</p>
<p>In this section, we explained what MSIX app attach is, how it works, and finished off with a demo of setting up a file share for MSIX App Attach. We then moved on to the topic of implementing app masking, where we explained what FSLogix Application Masking is and then completed the section with the demo of implementing FSLogix App masking on a session host. The third section of this course saw us cover Deploying an Application as a RemoteApp, in which we focused initially on explaining what RemoteApp is, what its requirements are, and again finished up with the demo of deploying a RemoteApp via the Azure Portal.</p>
<p>Next, we moved on to discussing, implementing, and managing OneDrive for Business for Multi-Session Environments. In this section, we discussed an overview of OneDrive for Business and finished off with a demo of installing OneDrive sync app per machine version. Following on from here, we tackled the topic Implementing and Managing Microsoft Teams AV. We initially focused on talking about RDP redirection properties within AVD that needs to be in place before implementing Microsoft Teams. We finished the section off by completing a walk-through demo of installing Microsoft Teams desktop app. We continued with the course and moved on to the topic of implementing and managing browsers and Internet access for Azure Virtual desktop.</p>
<p>In this short section, we discussed managing Internet access and managing browsers on a session host. In the penultimate section of this course, we discussed creating and configuring application group. Here, we explained what an application group is, followed by a demo of configuring application group via Azure PowerShell in the Azure Portal. In the final section of this course, we had a closer look at troubleshooting application issues related to Azure Virtual Desktop. Here, we covered information gathering and finally discussed performance counters.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-20</title>
    <url>/2022/11/13/AZ-140-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-20/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on Configuring User Experience in Azure Virtual Desktop. My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist and have been working in the Microsoft cloud services for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications. My contact information is available on the screen. </p>
<p>Please feel free to reach out to me with any questions, comments, or concerns and I will be happy to discuss these with you. For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#x73;&#117;&#112;&#x70;&#111;&#x72;&#x74;&#x40;&#99;&#108;&#111;&#x75;&#x64;&#97;&#99;&#97;&#100;&#x65;&#x6d;&#121;&#46;&#x63;&#x6f;&#109;">&#x73;&#117;&#112;&#x70;&#111;&#x72;&#x74;&#x40;&#99;&#108;&#111;&#x75;&#x64;&#97;&#99;&#97;&#100;&#x65;&#x6d;&#121;&#46;&#x63;&#x6f;&#109;</a> and one of our cloud experts will follow up with you. This course is intended for anyone planning to take the Azure Virtual Desktop Specialty exam and anyone interested in learning how to deploy an Azure Virtual Desktop environment</p>
<p> By the end of this course, you will have knowledge on:</p>
<ul>
<li>Configuring Universal print</li>
<li>Configuring user settings through group policies and Endpoint Manager policies</li>
<li>Configuring persistent and non-persistent desktop environments</li>
<li>Configuring Remote desktop Protocol (RDP) properties on a host pool</li>
<li>Configuring session timeout properties</li>
<li>Troubleshooting user profile issues</li>
<li>Troubleshooting Azure Virtual Desktop clients</li>
</ul>
<p>To get the most from this course you should have an Administrator-level understanding of Azure Cloud services. When I created this course, all information was current. Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:&#x73;&#x75;&#112;&#112;&#111;&#114;&#x74;&#x40;&#99;&#108;&#111;&#117;&#100;&#x61;&#99;&#x61;&#x64;&#101;&#x6d;&#121;&#46;&#x63;&#111;&#109;">&#x73;&#x75;&#112;&#112;&#111;&#114;&#x74;&#x40;&#99;&#108;&#111;&#117;&#100;&#x61;&#99;&#x61;&#x64;&#101;&#x6d;&#121;&#46;&#x63;&#111;&#109;</a>.</p>
<p>If you notice any updates or corrections, please reach out to us. Thank you!</p>
<h1 id="Configuring-Universal-Print"><a href="#Configuring-Universal-Print" class="headerlink" title="Configuring Universal Print"></a>Configuring Universal Print</h1><p>Welcome to this module on configuring Universal Print. In this module we will discuss the following topics:</p>
<ul>
<li>We will first explain exactly what the Universal Print service is</li>
<li>Next, we will look at some of the prerequisites that need to be implemented before you can deploy the Universal Print service.</li>
<li>Finally, we will explain the four steps you need to complete when setting up Universal Print</li>
</ul>
<p>Let’s start off by explaining exactly what the Universal Print service is. It is a modern print solution that you can utilize to manage your print infrastructure. It runs completely in Azure and require zero on-premises infrastructure.</p>
<p>From a license perspective, it is a Microsoft 365 subscription-based service, so there is no need to purchase any extra license. Finally, it is fully integrated with Azure AD and supports single sign-on (SSO).</p>
<p>Now we know what the Universal Print service is, let’s move on to looking at prerequisites. As with most cloud-based services, you need to ensure you complete certain tasks before you can start to deploy or implement it.</p>
<p>For the Universal Print service, you need to ensure that an eligible license has been assigned to the admin user who will be configuring the deployment. You then need to ensure the user has either the Printer Administrator role or the Global Administrator role. Keep in mind that it is best practice to follow least privilege access when assigning admin roles.</p>
<p>Finally, you need to ensure you have a Windows 10 client device running version 1903 and above. Using the latest OS release will provide a much richer user experience. In this final lecture of this module, let’s look at the 4 steps that need to be completed to deploy the Universal Print Service. </p>
<p>Step 1 is to set up the Universal Print connector. This is the component that you can utilize to make a printer work with Universal Print. You use this connector when you do not have a printer that directly connects to the Universal Print Service.</p>
<p>Step 2: You need to register the printers by using the Universal printer connector. This is similar to installing a printer on a print server. Once it is registered it will be accessible to add to devices for users with the relevant permissions.</p>
<p>This leads us well to Step 3, which is to assign permissions and share the printer. You can assign permissions to Azure AD users and security groups. Once the permissions are granted, it then needs to be shared.</p>
<p>Step 4, the final step, is to add the Universal printer to the end-users Windows device. You need to ensure the device is connected to the Internet and that it is either Azure AD joined, Azure AD registered, or Hybrid Azure AD joined before adding the printer. </p>
<h1 id="Configure-User-Settings-through-Group-Policies-and-Endpoint-Policies"><a href="#Configure-User-Settings-through-Group-Policies-and-Endpoint-Policies" class="headerlink" title="Configure User Settings through Group Policies and Endpoint Policies"></a>Configure User Settings through Group Policies and Endpoint Policies</h1><p>Welcome to this module on configuring user settings through group policy and endpoint manager policies. In this module we will cover the following topics:</p>
<ul>
<li>Configuring Azure Virtual Desktop via Group Policy, including a walkthrough demo</li>
<li>Configuring Azure Virtual Desktop via Endpoint Manager, including a walkthrough demo</li>
</ul>
<p>Let’s start this module by looking at configuring AVD via Group Policy. In order to allow Group Policy to be able to access Azure Virtual Desktop, you need to ensure your session hosts are either Active Directory Domain joined, or Hybrid joined.</p>
<p>You can then deploy group policies the same way you would in an on-premises environment, including being able to configure both computer configuration policies and user configuration policies. Let’s do a demo configuration of a group policy for Azure Virtual Desktop.</p>
<p>Here we are logged into one of our Azure virtual machines that we are preparing as a golden image for our AVD deployment. We need to navigate to the local group policy app from the Start menu. As you can see here we have both Computer and User configuration. </p>
<p>We will now browse to the Windows settings under Computer configuration, then Security settings then click on the Network List Manager Policies. We have 4 options here, but we want to choose All networks. This policy Is going to allow us to control permissions for if users can change the network name, location, or icon from within the session. We are going to change each option so the user cannot change any of them and click on OK.</p>
<p>Let’s check out some additional settings we can configure via Group Policy. This time, under computer configuration, let’s select administrative templates and then expand network. Here we have a whole host of settings we can configure, including Background Intelligent Transfer Service (BITS) and DirectAccess Client Experience Settings. </p>
<p>Let’s select the BITS settings and again we have a whole list of settings we can configure. For example, if we double click ‘Do not allow the computer to act as a BITS processing server’ if we enable this then the session hosts will no longer cache downloaded files and offer them to its peers.</p>
<p>Let’s now check out the network settings we can configure, specifically the ‘Prohibit use of Internet Connection Sharing on you DNS Domain network’. By enabling this setting, ICS cannot be enabled or configured by an administrator and the service cannot be run on this session host. We have multiple policies we can configure but this very much depends on your organization’s requirements. Now we have looked at configuring Group policy for Azure Virtual Desktop, let’s look at configuring AVD via Endpoint Manager.</p>
<p>In order to allow Endpoint Manager to be able to access Azure Virtual Desktop, you need to ensure your session hosts are either Azure AD joined, or Hybrid joined. However, there are some limitations, for example, it is not possible to deploy a configuration policy to configure Wi-Fi settings on a Windows 10 device. Additionally, Autopilot reset is not currently supported with Endpoint Manager integration. Another limitation example is that it is not currently possible to remotely wipe an Azure Virtual Desktop session host via Endpoint Manager. </p>
<p>We will finish this module with a demo of configuring Azure Virtual Desktop via Endpoint Manager.</p>
<p>Here we are logged into the Endpoint Manager portal. Let’s navigate to our session host which is Azure AD enrolled which we can see if currently fully compliant and managed by Intune. If we click on it we can see we have multiple options we can manage, but if we go back a step we can see the different types of policies and profiles we can configure, including Compliance policies, configuration profiles, and Windows 10 update rings.</p>
<p>If we go back into the device again, we can see the options that are support and not supported as they are greyed out, and if needed, we can obtain information from the left-hand side menu regarding device compliance and configuration.</p>
<h1 id="Configuring-Persistent-and-Non-Persistent-Desktops"><a href="#Configuring-Persistent-and-Non-Persistent-Desktops" class="headerlink" title="Configuring Persistent and Non-Persistent Desktops"></a>Configuring Persistent and Non-Persistent Desktops</h1><p>Welcome to this module on configuring persistent and non-persistent desktop environments. We will cover the following topics:</p>
<ul>
<li>Configuring persistent desktop environments including a walkthrough demo</li>
<li>Configuring non-persistent desktop environments including a walkthrough demo</li>
</ul>
<p>Let’s first look at configuring persistent environments. The definition of a persistent VDI environment is when the user has the same experience each time they login. This means they can access saved files and any specific customizations to the desktop are still intact every time they login, even after reboots.</p>
<p>There are two types of persistent environments available with Azure Virtual Desktop. The first is pooled host pools where users share the resources on the session hosts. We then have personal host pools which is a 1 to 1 ratio, so when the user logs in they are assigned the same session host with the same settings and files they saved the last time they logged in. FSLogix profile containers are utilized to facilitate user profiles which helps give the users a more persistent experience.</p>
<p>Let’s now do a quick demo of how to provision a persistent desktop in Azure Virtual Desktop via the Azure Portal. Here we are in the Azure Portal in the AVD blade and to create a persistent environment we need to create a new host pool. Let’s click on Create under the host pool blade and enter all the required details such as subscription, resource group, host pool name, and location.</p>
<p>As mentioned earlier in this section we have two types of persistent environments, pooled and personal host pools. If we click on pooled host pools we then need to set the load balancing algorithm. We again have two options, breadth-first or depth-first. Breadth-first is when all user connections are randomly sent to any available session host within the environment. Depth-first is when all new connections are sent to a single session host until it hits a limit that you set, after which any new connections are sent to the next available session host. Before we move on we set a connection limit and then move on to configuring the virtual machine settings for the host pool.</p>
<p>We enter all the required settings again like resource group, name prefix, location, availability zone, and Image. You can then select the VM size you wish to have as part of the your deployment. Once all the settings have been specified and you have entered all the relevant credentials, we can move on to configuring the workspace, then the advanced settings and tags. Finally, you can create your persistent desktop environment. Now we understand configuring persistent environments, let’s move onto looking at configuring non-persistent environments.</p>
<p>Non-persistent environments within Azure Virtual desktop are based on ephemeral disk, which is like a temporary disk. From a user experience perspective in a non-persistent environment, users essentially see a new desktop every time they log back in, they will not see any files that have been saved locally on the disk and any customizations that are made will also not be saved. Non-persistent environments using Ephemeral disks are ideal for stateless applications which are tolerant of individual virtual machine failures. </p>
<p>Let’s now do a quick demo of how to provision a non-persistent desktop in Azure by looking at how to provision an Ephemeral disk on an Azure VM. To configure our non-persistent desktop environment, we need to create the session hosts with Ephemeral disks. In this demo, I will walk through how to configure one with an Azure virtual machine. Here we are in the Azure portal in the virtual machine blade. We want to create an Azure virtual machine. We then need to configure all the standard basic settings, including subscription, resource group, VM name, region, and image.</p>
<p>Now we need to ensure we select VM size that is supported as not all sizes support Ephemeral disks. You need to ensure you select one with a large enough Temp disk cache. Once all the basic settings are configured, we then move onto the Disks tab. If you navigate to the bottom of the page under ‘Advanced’ you have the option for the Ephemeral disk which by default is set to none. We can either select OS cache placement or Temp disk placement depending on what our requirement is. We can then move onto the complete the rest of the VM configuration, including Networking, Management, Advanced, and Tags before finally creating the VM.</p>
<h1 id="Configuring-RDP-Properties-on-a-Host-Pool"><a href="#Configuring-RDP-Properties-on-a-Host-Pool" class="headerlink" title="Configuring RDP Properties on a Host Pool"></a>Configuring RDP Properties on a Host Pool</h1><p>Welcome to this module on configuring Remote Desktop properties (RDP) on a host pool. We will cover the following topics in this module:</p>
<ul>
<li>We will explain what the RDP properties are</li>
<li>Look at some examples of the RDP properties that can be configured</li>
<li>Finally, we will complete a walk-through demo of configuring some RDP properties in the Azure Portal</li>
</ul>
<p>Let’s start off by discussing what RDP properties are. RDP properties are a method for administrators to customize host pool features to meet your organizations’ requirements. The customizations you make can enhance the user experience as it gives them a more local desktop feel to the environment. There are two ways in which you can configure the RDP properties. First, you can make configuration changes via the Azure Portal, something we will explore in the demo at the end of this module. Secondly, you can use PowerShell with the Azure module to make changes to the RDP properties.</p>
<p>Now let’s move on to looking at some examples of RDP properties you can customize before we dive into the demo. Firstly, we have connection information. Here, for example, you can configure whether Remote Desktop will use CredSSP for authentication if it is available as well as specifying a program to automatically start when the remote computer is started.</p>
<p>Next, we have Session behavior. In this section, we can configure reconnection settings, compression settings, and video playback settings as a few examples. We then have a device redirection section. Here, we have a few customizations we can make, including Audio and Video redirection settings, and local devices and resource redirection including printers, drives, and USB devices.</p>
<p>Another important feature is being able to configure display settings for our Azure Virtual Desktop environment. This includes multiple monitors, resolution, and Desktop size as a few examples. The final customization is the Advance section. Here we can set custom RDP properties but in script form. We will take a closer look at this in the demo. In the final lecture of this module, we are going to complete a walk-through demo of configuring some of the RDP properties via the Azure Portal.</p>
<p>Here we are in the Azure Portal, specifically the Azure Virtual Desktop blade. To configure the RDP properties, we need to navigate to the Host pool and then under settings, we will find RDP properties. You can now see all the customizations options we mentioned earlier in this lecture. For the purpose of this demo, we are going to configure only a few of these settings.</p>
<p>Let’s start with Session Behavior. Here we are going to set the Reconnection option to automatically try and reconnect and the video playback setting to Use RDP-efficient multimedia streaming for the video playback when possible. </p>
<p>Moving onto the Device Redirection tab, we have a number of customizations we are going to set. We are going to start with setting the Microphone redirection, Redirect video encoding, and Audio output location. Under Local devices and resources, we will set the camera redirection, clipboard redirection, smart card redirection, and finally disable the USB redirection.</p>
<p>We are going to make a few changes to the display settings to finish off, including enabling multiple displays, setting the screen mode to full screen, and setting the desktop size. The final item I wanted to highlight in this demo is the Advanced tab, where you can set custom RDP properties in script form and separate them by semicolons.</p>
<h1 id="Configuring-Session-Timeout-Properties"><a href="#Configuring-Session-Timeout-Properties" class="headerlink" title="Configuring Session Timeout Properties"></a>Configuring Session Timeout Properties</h1><p>Welcome to this module on configuring session timeout properties. We will cover the following topics in this module:</p>
<ul>
<li>We will explain what session timeout properties are</li>
<li>We will finish off with a demo walkthrough of configuring session timeout properties for Azure Virtual Desktop</li>
</ul>
<p>Let’s start off by looking at exactly what session timeout properties are. The session timeout feature allows you to log off user sessions that have been inactive for a specified amount of time. It is configured via the local group policy on a session host, so it would be recommended to implement this during the golden image creation. This way it is deployed to all session hosts.</p>
<p>The session timeout properties configuration includes setting time limits for, disconnected sessions, active but idle remote desktop services sessions, active remote desktop services sessions, and finally, you can configure the ability to end sessions when time limits are reached. We will set all these properties in the demo which is next.</p>
<p>Now we understand what session timeout properties are, let’s complete a walkthrough demo of configuring them via the local group policy on a session host. Here we are in our virtual machine which we are going to use for our session host golden image. We need to open the local group policy editor. Once it is opened, we navigate to ‘Computer Configuration &gt; Administrative Templates &gt; Windows Components &gt; Remote Desktop Services &gt; Remote Desktop Session Host &gt; Session Time Limits. Here we have all the session time-out policies we discussed earlier in this module.</p>
<p>Let’s first edit ‘Set time limit for disconnected sessions’, enable it, and set this to 30 minutes. Next, let’s edit the ‘Set time limit for active but idle Remote Desktop services sessions’ but set this to a little sooner at 10 minutes. Next, let’s edit ‘Set time limit for active Remote Desktop Services sessions’, enable it, but leave it set to never. We are now going to enable the policy called ‘End session when time limits are reached’, in the event we set time limits within our AVD environment. The final policy we want to configure is the ‘Set time limit for logoff of RemoteApp sessions’ and after enabling this we will set it to 30 minutes. This completes the configuring session timeout demo.</p>
<h1 id="Troubleshooting-User-Profile-Issues"><a href="#Troubleshooting-User-Profile-Issues" class="headerlink" title="Troubleshooting User Profile Issues"></a>Troubleshooting User Profile Issues</h1><p>Welcome to this module on troubleshooting user profile issues. In this module we will cover the following topics:</p>
<ul>
<li>We will look at the tracks you can utilize to escalate issues with Microsoft</li>
<li>We will then discuss the different methods of reporting issues</li>
<li>Finally, we will touch on some common user profile related issues you might come across</li>
</ul>
<p>Let’s start by discussing Escalation tracks. When you are faced with an issue including profile-related ones and you are struggling to find a solution, you can escalate the issue directly to Microsoft. Before doing this however you can take a look at the Azure Status page and the Azure Service health page in the portal to check if there are any known issues or outages that might be the root of your problem. If that is not the case, you can move forward with opening an Azure support request so you can troubleshoot the issue with the Microsoft Engineer.</p>
<p>Let’s now discuss Reporting issues. There are many different places you can find help for all types of Azure Virtual Desktop issues, including profile-related problems. To start with you can create a thread within the AVD Tech community site where you can potentially receive help and advice from other Tech professionals who may have had similar issues and recommend a solution.</p>
<p>As we mentioned earlier, you can report issues directly to Microsoft by creating a support ticket. As well as problems you can also suggest new features you might want to see within the AVD environment and Microsoft can take this into consideration. In the final section of this module, let’s discuss some common user profile-related issues you may come across when managing and implementing Azure Virtual Desktop.</p>
<p>Some common user profile issues include the user profile failing to attach to the session. In this case, you will get an error and are unable to sign in. This can be caused by communication issues between the session hosts and the profile containers, and a reboot of the session can resolve this. Another issue may be that you could be logged in with a local profile, rather than your network profile. This can be caused by permissions or a corrupt profile. Finally, a common issue you might find is that the FSLogix profile container has not been correctly configured in the Image so all the session hosts will have the incorrect user profile path.</p>
<h1 id="Troubleshooting-Azure-Virtual-Desktop-Clients"><a href="#Troubleshooting-Azure-Virtual-Desktop-Clients" class="headerlink" title="Troubleshooting Azure Virtual Desktop Clients"></a>Troubleshooting Azure Virtual Desktop Clients</h1><p>Welcome to this module on Troubleshooting Azure Virtual Desktop clients. We will cover the following topics in this module:</p>
<ul>
<li>We explain what the Remote Desktop Client is</li>
<li>We will finish off the module by discussion some common issues with the Remote Desktop client</li>
</ul>
<p>Let’s start by explaining what the Remote Desktop client is. This is an application that is utilized by your end users to connect into your Azure Virtual Desktop environment. It is supported on multiple platforms and operating systems, including Windows, Android, iOS, MacOS, and a web client version.</p>
<p>Let’s finish off this short module by discussion some of the common issues you may come across with the Remote Desktop client. You may come across an issue where the client app has stopped responding. In this scenario, you can reset the user data by using the command called msrdcm.exe which will remove user data, restore default settings, and unsubscribe from all workspaces. Another common issue you may come across is that the web client will not open. With this type of issue, you need to do a DNS check to ensure your internet connection is working as expected. If this is the case, then restart your web browser or try a different browser.</p>
<p>You might come across a problem where the client has opened and logged in correctly, however you see no resources. For this type of issue, ensure the user is logged in to the app from the correct Azure AD account. If these checks are ok and you need to ensure your app group is associated with a workspace. The final common issue I want to touch on is when your web client stops responding or continually disconnects. In this type of scenario, you should try reconnecting using a different browser or different client.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We have covered several important topics in this course. We started off by discussing the Universal Print service, where we explained what this service was, some of the prerequisites that need to be in place before we can use it, and four high-level steps you need to complete to implement this service. We then moved on to talking about configuring user settings through Group Policy and Endpoint Manager. In this lecture, we looked at configuring the user settings via Group Policy, including a walkthrough demo of how to implement this. We then discussed configuring AVD via Endpoint Manager which also included a demo.</p>
<p>Moving on, we looked at persistent and non-persistent desktop environments where we initially discussed what persistent desktops are including a walkthrough demo of how to configure a pooled host pool. We then did the same with looking at non-persistent desktops, which included a walkthrough demo of implementing an Ephemeral disk to an Azure Virtual machine. We continued on in this module to talk about configuring Remote Desktop Protocol (RDP) properties on a host pool. This lecture included discussing what the RDP properties were, then looking at examples of the RDP properties, finishing off with a walkthrough demo of configuring the RDP properties in the Azure portal.</p>
<p>Next, we took a closer look at Session timeout properties. We touched on two topics in this lecture. First, we discussed what session timeout properties are, and second, we did a walkthrough demo of configuring session timeout properties via the local group policy settings. In the penultimate lecture in this module, we took a closer look at Troubleshooting user profile issues. We initially discussed options around escalating issues to Microsoft, then the different methods in which you can report issues, and finally some common user profile issues you may come across with AVD.</p>
<p>In the final lecture in this module, we talked about Troubleshooting Azure Virtual Desktop clients. We covered two topics in this lecture. First, we explained what the Remote Desktop client is and then discussed some common issues that you may encounter with the Remote Desktop client app.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ140-Designing-for-Azure-Virtual-Desktop-User-Identities-and-Profiles</title>
    <url>/2022/11/13/AZ-140-Designing-for-Azure-Virtual-Desktop-User-Identities-and-Profiles-4/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on Designing User Identity and Profiles. My name is Shabaz Darr, and I’ll be your instructor for this course. I am an Azure Virtual Desktop specialist and I’ve been working with Microsoft cloud technologies for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications. My contact information is available on screen. Please feel free to reach out to me with any questions, comments, or concerns and I will be happy to discuss these with you. For any other issues you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> and one of our cloud experts will follow up with you.</p>
<p>This course is intended for people that are planning on taking the Azure Virtual Desktop Specialty exam and anyone who is interested in learning how to deploy an Azure Virtual Desktop environment. By the end of this course, you will have knowledge on, selecting an appropriate licensing model for Azure virtual desktop based on requirements, recommending an appropriate storage solution, including understanding the differences between Azure NetApp Files and Azure Files, planning for Azure Virtual Desktop Client Deployment, planning for user profiles, recommending a solution for network connectivity, planning for Azure AD Connect for user identities.</p>
<p>To get the most from this course you should have an Administrator level understanding of Azure Cloud services.</p>
<p>Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it helps us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>Please note, that at the time of writing this content, all course information was accurate. To accommodate new features and services, Microsoft regularly updates exam guidelines and measured skills. This may result in certain elements of discrepancy appearing in the content over time. Please contact us if you find any outdated content at <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. This will allow us to update the course during the next release cycle. Thank you.</p>
<h1 id="Selecting-an-Appropriate-Licensing-Model"><a href="#Selecting-an-Appropriate-Licensing-Model" class="headerlink" title="Selecting an Appropriate Licensing Model"></a>Selecting an Appropriate Licensing Model</h1><p>Welcome to this module on selecting an appropriate licensing model for Azure Virtual Desktop based on requirements. In this module, we will cover the following topics: An Azure Virtual Desktop licensing overview. We will then look at bring your own license, or BYOL which includes: virtual desktop licensing for BYOL, remote app licensing for BYOL. Let’s take a look at an overview of Azure Virtual Desktop licensing.</p>
<p>There are two aspects of AVD licensing. The first is license entitlement. If you have an eligible Windows, Microsoft 365, or Microsoft Remote Desktop Client Access License, better known as an RDS CAL, there is no additional cost. The second part of Azure Virtual Desktop licensing is per user pricing. A recent addition to this has been introduced which supports Azure Virtual Desktop for external users only, meaning it supports users outside of your organization. We’ll explore this in more detail in the next part of this module.</p>
<p>There are different licensing models, the first one being virtual desktops. Virtual Desktop licensing for BYOL allows users outside of your organization to use their own license and access either Windows 10 or Windows 7 or Windows Server desktop session hosts. Additionally, they can utilize per user access licenses which will grant them access to Windows 10 and Windows 7 desktop for a fixed monthly price.</p>
<p>The second BYOL licensing model is for application streaming. This model follows the almost identical features and licenses as the virtual desktop model, however there is an exception. Rather than give access to a full virtual desktop, it will give the external users access to stream compatible applications.</p>
<h1 id="Recommending-an-Appropriate-Storage-Solution"><a href="#Recommending-an-Appropriate-Storage-Solution" class="headerlink" title="Recommending an Appropriate Storage Solution"></a>Recommending an Appropriate Storage Solution</h1><p>Welcome to this module on recommending an appropriate storage solution including Azure NetApp Files vs Azure Files. It is important to understand the different storage solutions that are available and their features before you can recommend one. In this module, we will cover the following topics: What is Azure Files including its main features? What is Azure NetApp Files including its main features? Azure Files vs Azure NetApp Files where we will compare the features from both.</p>
<p>Let’s start with looking at Azure Files. Azure Files is Microsoft Cloud’s native file share as a service. You can compare it to an on-premises file server but hosted at an Azure data center. It supports both server message block, or SMB and network file system, or NFS protocols so you can utilize this service for different workloads and scenarios. From an Azure Virtual Desktop perspective, Azure Files is utilized to facilitate user profiles, and integrates with FSLogix to give a smooth roaming profile experience to the end user.</p>
<p>Let’s now take a look at Azure NetApp Files and some of its features. Like Azure Files, this is also a cloud-hosted file share as a service, however, it is NetApp technology rather than Azure native. It is an enterprise-grade file share as a service and supports multiple protocols, much like its on-premises NetApp equivalent. There are also more tier options available with NetApp files as well as the existing premium and standard that are available with Azure Files. Azure NetApp Files also integrates with FSLogix to give a seamless roaming profile experience but with much better performance, which we will discuss shortly.</p>
<p>Now we understand what both storage types are and some of their key features, let’s see how they compare. Whereas Azure Files is more optimized for random access workloads, NetApp Files is more suited to high performance and low latency workloads. From a protocol aspect, we know Azure Files supports SMB and NFS but it also supports REST protocols, whereas NetApp Files also has SMB, NFS and dual-protocol access. Availability of both services is similar, where Azure NetApp Files has its premium tier available in 30 plus regions and its standard tier available in all regions.</p>
<p>Azure NetApp Files has all its tiers available in 28 plus regions. When we look at network access differences, both are accessible from VPN Gateway and Express Route. However, only Azure Files can be potentially accessed from the Internet. With regards to identity-based authentication and authorization, both support Active Directory Domain Services and Azure AD DS. However, for Azure Files, identity-based authorization is only supported when utilizing the SMB protocol.</p>
<p>When we look at encryption, Azure Files allows for customer-managed or Microsoft-managed keys, whereas Azure NetApp files only allows for Microsoft-managed keys for all protocols. Finally, from a performance perspective, NetApp files supports Ultra and Premium disks and have much more higher IOPS and throughput, therefore offer a much better performance experience compared to Azure Files.</p>
<h1 id="Planning-for-Azure-Virtual-Desktop-Client-Deployment"><a href="#Planning-for-Azure-Virtual-Desktop-Client-Deployment" class="headerlink" title="Planning for Azure Virtual Desktop Client Deployment"></a>Planning for Azure Virtual Desktop Client Deployment</h1><p>Welcome to this module on planning for Azure Virtual Desktop Client Deployment. We’ll cover the following topics in this module. We’ll look at an overview of the connection methods for Azure Virtual Desktop. Finally, we’ll look at the web browsers that support the web client. We’re going to start by looking at an overview of the different connection methods and clients for Azure Virtual Desktop.</p>
<p>The first is a Windows client, which can be downloaded from the internet and comes in both 32-bit and 64-bit form. This allows for user to either login with their Microsoft 365 email address, or use the remote access resource feed to subscribe to the workspace. We then have a web client which can be accessed from several supported web browsers. However, we will go into more detail on this shortly. Azure Virtual Desktop can also be accessed from Android devices by downloading a client from the Google Play store. This works in the same way the Windows client does in that you can subscribe to the remote access resource feed. There is an Azure Virtual Desktop client for the Apple macOS which is downloaded via web browser. Once installed, you add the workspace and enter your credentials to authenticate to the workspace. Finally, there is a client available to the Apple iOS device, which can be downloaded from the Apple store. This is similar to the Android client in that you subscribe to the remote access resource feed to access the workspace.</p>
<p>Now we understand the different types of clients and operating systems that support access into the Azure Virtual Desktop environment, let’s discuss which web browser clients are supported. You can access Azure Virtual Desktop via the web client using our Microsoft Edge internet browser. This is available on Windows operating system devices. Apple Safari supports access to Azure Virtual Desktop via the web client and this browser is available on macOS.</p>
<p>We then have a Mozilla Firefox web browser. However, please note that version 55 or later supports the Azure Virtual Desktop web client. This is also available on multiple operating systems, including Windows, macOS, and Linux. Finally, we have Google Chrome web browser, which supports web client access to Azure Virtual Desktop. Much like Mozilla Firefox, this is available on multiple operating systems, including Windows, macOS, Linux and Chrome OS.</p>
<h1 id="Planning-for-User-Profiles"><a href="#Planning-for-User-Profiles" class="headerlink" title="Planning for User Profiles"></a>Planning for User Profiles</h1><p>Welcome to this module on planning for user profiles in Azure Virtual Desktop. We will cover the following topics in this module. Storage options for user profiles in Azure Virtual Desktop. We will then discuss FSLogix Profile Containers. Finally, we will have a look at what FSLogix Office Containers are. Let’s start off by looking at storage options for user profiles.</p>
<p>Azure Virtual Desktop integrates with both Azure Files and Azure NetApp Files to facilitate user profiles. We discussed both of these services in a previous module in this course. As we discussed in the Recommending an appropriate storage solution module, Azure Files offers a general purpose use case, whereas Azure NetApp Files is more suited to higher performance user cases. You also need to be aware of the location you are storing your user profiles, as both Azure Files and NetApp files have different availability options. We are now going to discuss FSLogix profile containers. This is a remote profile solution which is installed on the Azure Virtual Desktop sessions hosts.</p>
<p>The FSLogix profile containers offer profile redirection and are similar to traditional on-premises roaming profiles. FSLogix profile containers fully integrate with Azure Files and Azure NetApp Files. You can also domain join the storage accounts associated with FSLogix which will enable you to control access using Active Directory Domain Services. In the final part of this module, we are going to discuss FSLogix Office Containers. This is also a form of profile redirection, however it is specific to Microsoft Office related data only. Office Containers allow the user to have an enhanced experience when using Office apps, but best practice recommendation is to implement it with another profile solution.</p>
<h1 id="Recommending-a-Solution-for-Network-Connectivity"><a href="#Recommending-a-Solution-for-Network-Connectivity" class="headerlink" title="Recommending a Solution for Network Connectivity"></a>Recommending a Solution for Network Connectivity</h1><p>Welcome to this module on recommending a solution for network connectivity. We’ll cover the following topics in this module. We’ll first look at virtual network recommendations for Azure Virtual Desktop. We’ll then move on to talking about the differences between VPN Gateway and Express Route, including use cases. Finally, we’ll look at some of the networking best practices for Azure virtual desktop.</p>
<p>First, let’s take a look at virtual network recommendations. In an Azure virtual desktop environment, it’s important to pick a sensible naming convention, largely to identify who the network belongs to. Naming convention is even more important if the environment is being deployed for a global organization, as it may have different regions. It’s always recommended to provision virtual networks to the closest region where the user will be situated. Make sure to revision multiple subnets. For example, if you have different host pools for different departments, you can separate these into different subnets and have more control over access. Finally, utilizing Azure services, like Network Security Groups to increase the network security posture of the Azure Virtual Desktop environment, is always recommended.</p>
<p>Let’s now discuss the difference between VPN Gateways and Express Routes. First, VPN Gateways. This is a shared VPN connection into Azure. This can be point-to-site, which is an individual VPN user connecting into Azure, or a site-to-site VPN connection, which is an on-premise office network or some location with a VPN device like a router connecting into Azure. Let’s now compare a VPN Gateway to an Express Route. This is a private connection between your organization’s on-premises location and the Azure data center.</p>
<p>There are two types of Express Route connection. The first is where you establish a connection to Azure at an Express Route location, known as an exchange provider facility. The second is where you directly connect to Azure from an existing Wide Area Network or WAN, which is provided by your network service provider. In the final part of this module, we are going to discuss some general networking best practices for Azure Virtual Desktop.</p>
<p>It is the best practice recommendation to have strong network controls in place. By this, we mean centralizing management and governance of the core network functions like the virtual network and any virtual network appliances. Next, it is recommended to logically segment virtual subnets, especially if you have used a large network address space for your VNet.</p>
<p>We touched on security earlier in this module, and as part of that is adopting a zero-trust approach to network access. Use Azure AD features like conditional access and just-in-time access to mitigate any security risks. The final best practice recommendation is to utilize virtual network appliances where possible. This includes virtual firewalls, which add an extra layer of security to your Azure Virtual Desktop environment.</p>
<h1 id="Planning-for-Azure-AD-Connect-for-User-Identities"><a href="#Planning-for-Azure-AD-Connect-for-User-Identities" class="headerlink" title="Planning for Azure AD Connect for User Identities"></a>Planning for Azure AD Connect for User Identities</h1><p>Welcome to this module on planning for Azure AD Connect for User Identities. We will cover the following topics in this module: I will explain what Azure AD Connect is. We will then discuss some the synchronization features available with Azure AD Connect. Finally, we will have a look at some of the use cases that fit each of these features.</p>
<p>Let’s start by looking at what Azure AD Connect is. Azure AD Connect is an application that is installed on a server within your on-premises environment, and it allows you to create a hybrid identity and access management solution between Active Directory Domain Services and Azure AD. It has a built-in health monitoring feature called Azure AD Connect Health which provides robust monitoring of your on-premises identity environment.</p>
<p>Although Azure AD Connect is a free tool and included as part of your Azure subscription, to get the best out of this tool, including the health capability, you need at least an Azure AD P1 license. Let’s look a bit deeper now at some of the main Azure AD Connect features, specifically the synchronization options. The first synchronization feature is called password hash synchronization. This feature enables a user to have the same password for Microsoft 365 and on-premises, and it synchronizes a hash, of the hash, of the user’s password from on-premises AD to Azure AD.</p>
<p>The second synchronization option is called pass-through authentication, or PTA. This has the same features as password hash, but in addition it allows organizations to enforce their on-premises AD security and password policies without the need for extra infrastructure. The final synchronization option is Active Directory Federation Services, or ADFS. With ADFS you get all the same features as pass-through, but much more integration with 3rd party MFA providers and ADFS claims. Also requires much more additional on-premises infrastructure than password hash and pass-through authentication.</p>
<p>In the final part of this module, we are going to look at the different use cases that would fit each of the synchronization options we have discussed. If you have a lot of existing on-premises infrastructure, including applications and services that need to be accessed with your Microsoft 365 accounts, then ADFS would be a sensible choice for your organization. If you want your users to have the same login credentials, both on-premises and in the cloud, then pass-through authentication, or PTA, is the most sensible choice for your organization. Finally, if you are just looking to improve user productivity, then password hash synchronization is the most relevant choice for your organization.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We have covered several important topics in this course. First, we covered selecting an appropriate licensing model for Azure Virtual Desktop where we looked at an overview of AVD licensing, then introduced the concept of ‘Bring Your Own License’, or BYOL. This had two variants, the first being Virtual Desktop BYOL and the second being Application Streaming BYOL.</p>
<p>Next, we discussed recommending an appropriate storage solution, where we covered an overview of Azure Files and its features. We then discussed Azure NetApp Files and its features, and finally did a comparison of both where we compared the features and looked at the use cases that could fit both services. The third module in this course looked at planning for Azure Virtual Desktop Client Deployment. Here we discussed an overview of the required clients to be able to connect from various operating systems. Finally, we looked at the supported browsers for the web client.</p>
<p>We then moved on to looking at planning for user profiles. In this module, we looked at storage options for user profiles in Azure Virtual Desktop, FSLogix for Profile Containers, and FSLogix for Office Containers. In the next module for this course we looked at recommending a solution for network connectivity. We started off by looking at some recommendations for virtual networks, then discussed Azure VPN Gateway and ExpressRoute where we compared their features.</p>
<p>Finally, we talked about some best practice recommendations for network connectivity. In the final module of this course we talked about planning for Azure AD Connect for user identities. Here we started off by discussing what Azure AD Connect is, then looked at some of the different synchronization features, including password hash, pass-through authentication and AD FS. Finally we looked at the use cases that fit each of these synchronization options.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ140-Designing-an-Azure-Virtual-Desktop-Architecture-1</title>
    <url>/2022/11/13/AZ-140-Designing-an-Azure-Virtual-Desktop-Architecture-1/</url>
    <content><![CDATA[<h1 id="Designing-an-Azure-Virtual-Desktop-Architecture-Introduction"><a href="#Designing-an-Azure-Virtual-Desktop-Architecture-Introduction" class="headerlink" title="Designing an Azure Virtual Desktop Architecture - Introduction"></a>Designing an Azure Virtual Desktop Architecture - Introduction</h1><p>Hello, and welcome to this course on Designing an Azure Virtual Desktop Architecture. My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist and have been working with Microsoft Cloud and Azure for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications. My contact information is available on the screen. Please feel free to reach out to me with any questions, comments, or concerns, and I will be happy to discuss these with you. For any other issues you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>, and one of our cloud experts will follow up with you.</p>
<p>This course is intended for people that are planning on taking the Azure Virtual Desktop Specialty exam, and anyone who is interested in learning how to deploy an Azure Virtual Desktop environment. By the end of this course, you will have knowledge on: Assessing existing physical and virtual environments, assessing network requirements for AVD, recommending an OS for an AVD implementation, planning and configuring name resolution, planning host pool architecture, recommending resource groups, subscriptions, and management groups, configuring location for AVD metadata, and calculating and recommending a configuration for performance requirements.</p>
<p>To get the most from this course, you should have an administrator-level understanding of Azure cloud services.</p>
<p>Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>Please note, that at the time of writing this content, all course information was accurate. To accommodate new features and services, Microsoft regularly updates exam guidelines and measured skills. This may result in certain elements of discrepancy appearing in the content over time. Please contact us if you find any outdated content at <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. This will allow us to update the course during the next release cycle. Thank you.</p>
<h1 id="Azure-Virtual-Desktop-Overview"><a href="#Azure-Virtual-Desktop-Overview" class="headerlink" title="Azure Virtual Desktop Overview"></a>Azure Virtual Desktop Overview</h1><p>Welcome to this module on Azure Virtual Desktop overview. In this module, we will cover the following topics. What is the Azure Virtual Desktop? Where we’ll discuss some of the high-level features of this service. How does it work? Well, we’ll look at how organizations can utilize this service and Azure Virtual Desktop use cases. This is where we’ll talk about some of the different workloads and use cases that can take advantage of this cloud service.</p>
<p>We are first going to look at what Azure Virtual Desktop is. It is Microsoft’s cloud hosted virtual desktop infrastructure, better known as BDI solution, which allows you to move your end-user compute workloads into the cloud. It is only VDI solution that supports a Windows 10 Enterprise multi-session operating system, which means this particular OS can only be provisioned within Azure. Azure Virtual Desktop is secure by design as the backbone of this infrastructure is hosted within the Microsoft cloud ecosystem. However, we’ll talk about that in more detail later in this module.</p>
<p>It simplifies everyday management tasks by allowing you to utilize Azure’s automation services and tasks like Azure automate and auto-scale. These two integrations are outside of the scope of this course. However, they are discussed in later courses for this certification. Azure Virtual Desktop allows organizations to lower compute costs by allowing them to utilize auto shut down features and auto scaling to scale virtual machines in and out, depending on peak usage times or core business hours.</p>
<p>We are now going to discuss how it works. Azure Virtual Desktop allows users to remotely connect from anywhere and from multiple device types to a host cloud environment. This environment consists of host pools with virtual machine session hosts and application groups that consist of full Windows 10 desktop or remote published applications. You can integrate Azure Virtual Desktop with other services, as well as your on premises infrastructure if you have resources hosted within your physical offices, that need to be accessed.</p>
<p>I mentioned earlier in this module that Azure Virtual Desktop is secure by design. And this is because the backbone infrastructure is hosted by Microsoft. The Microsoft-managed components include web access. This component enables the end user to gain access to Azure Virtual Desktop and the virtual applications via HTML5-compatible internet browser. Connection broker, user connections to the remote desktop and remote applications are managed by this component of Azure Virtual Desktop.</p>
<p>Gateway access, this component allows remote users to connect to Azure Virtual Desktop resources from any device that is connected to the internet. Extensibility components, Azure Virtual Desktop can be managed by utilizing Windows PowerShell or the rest APIs that are provided. It also allows for support of third-party tools. Diagnostics, this event-based aggregator marks each action which is made by either a user or an administrator on the Azure Virtual Desktop deployment as a failure or a success. There are also specific components that are managed by the consumer, i.e. the organization. </p>
<p>The consumer-managed components include Azure Active Directory, Azure Virtual Desktop uses Azure Active Directory better known as Azure AD to manage identity and access better known as IAM. Azure Virtual Network, Azure Virtual Desktop compute resources use the Azure Virtual Network, better known as a vNet to communicate privately with over compute resources and between virtual machines. We will discuss network topology in more detail later in this course.</p>
<p>Session hosts, session hosts are virtual machines, better known as VMs that roam within your host pool. We will look at host pools and session hosts in more detail later in this course. Azure Virtual Desktop Workspace, this component manages session hosts and publishes the host pool resources. There are two types of Azure Virtual Desktop deployments which have very similar requirements. However, they both offer different benefits. We first have hybrid deployments, which is integration services that requires some type of additional infrastructure, whether hosted on premises or in the cloud. </p>
<p>In a hybrid Azure Virtual Desktop environment an Azure AD tenant is a requirement, which is the base of the identity and access management solutions. You also need to have a domain controller, which can be a physical or virtual service hosted on premises or a virtual machine hosted with Azure. An Azure subscription is required, which enables you to provision all the Azure Virtual Desktop services within your own tenant.</p>
<p>The second type of the deployment is a cloud-only deployment. The main difference with this type of deployment is instead of a domain controller, you utilize an Azure Active Directory Domain Services tenant, which is Microsoft domain controller as a service. You still need an Azure AD tenant and a subscription. Azure Virtual Desktop is accessed via an application called the Remote Desktop Client, which is supported on the following operating systems, Windows client, which can be downloaded via a web browser, Apple iOS client, which can be downloaded via the Apple store, Android client, which can be downloaded via the Play Store and macOS client, which can be downloaded via web browser.</p>
<p>In the final part of this module, we’re going to take a look at the different use cases of what Azure Virtual Desktop can be used for. The first use case is probably the one that has been utilized for the most and that is to facilitate remote working. You can have users working from locations outside your corporate offices network and access all the company resources they need via Azure Virtual Desktop. We then have organizations who are using Azure Virtual Desktop to replace their physical end user devices and move those workloads into Azure Virtual Desktop by utilizing the Windows 10 multi-session OS and published applications.</p>
<p>Another common use case has been development teams implementing development environments to test systems and applications outside their production environments in a sandbox Azure Virtual Desktop tenant. Organizations have also started to use Azure Virtual Desktop in their disaster recovery and business continuity plans. So in the event of a disaster, they can implement remote working quickly and effectively if required.</p>
<h1 id="Assessing-Existing-Physical-and-Virtual-Environments"><a href="#Assessing-Existing-Physical-and-Virtual-Environments" class="headerlink" title="Assessing Existing Physical and Virtual Environments"></a>Assessing Existing Physical and Virtual Environments</h1><p>Welcome to this module on assessing existing physical and virtual environments. In this module, we’ll cover the following topics. Proof of concept and how these can help you assess various elements of your existing infrastructure and how they will perform in the cloud. Assess Azure Virtual Desktop deployments where we’ll go into detail on those various elements you should assess and why. The different type of user personas and why they are important to understand. And understanding your application groups and how they function in a cloud environment.</p>
<p>A proof of concept is when you deploy services outside your production environment to allow you to understand what application, network and performance requirements will be before it moves into production. There are traditionally three stages in a proof of concept. The first stage is assess. The data you obtain from assessing the different applications and workloads will allow you to understand the number of simultaneous user sessions and the number of virtual machines you would need to facilitate those sessions.</p>
<p>Stage two is to migrate. You use the data obtained from the assess stage to provision new host pools and integrate the additional services, including FSLogix profile containers and RemoteApp application groups. The third stage is release. It is at this stage that you start to run performance testing to better understand network and application latency and start to allow users onto the environment to gain better feedback.</p>
<p>In this next part of the module, we’ll take a more in depth look at the assessment element of Azure Virtual Desktop. There are multiple components that are evaluated during the assessment stage, including: User personas, which we’ll talk about in further detail shortly. Virtual Machines to understand size requirements as well as user session capacity. Applications to understand which ones need to be part of the Windows image, and which ones can be deployed outside of the Windows image. </p>
<p>Data, which we’ll discuss in more detail shortly. User profiles, which are grouping users into different categories based on their workloads. One of the most important components to assess is data. When we talk about data, we do not just mean files and folders, but more information on various elements. The first of those elements is obtaining data on desktops. What applications do users have installed on their desktop and what are their requirements? We then have data on users. Which department are they in? Where do they access shares from? What applications do they individually use? </p>
<p>Finally, we have data on workloads where we can have light, medium, heavy or power user workloads. We need to understand these users that are classed under each of these type of categories. We mentioned user personas earlier. Specifying personas will happen by categorizing user based on the following criteria: Personal pools. We need to understand if users require their own personal virtual machine, or if they’re able to use pooled compute resources. There could be various reasons for requiring a personal VM, for example, compliance reasons. Density. Do certain users need greater performance density? An example of this would be having less users per CPU. We need to understand density information to ensure we size host pools correctly. Performance. Do certain users need to have higher performing virtual machines? For example, because they use an app that requires higher memory usage? Graphical processing. Better known as GPU, do specific users need to have graphics-intensive virtual machines due to their job role? Business function. Are you able to group a set of users under a single business area to allow easier cost management? Azure region. If you have a global user base, do they need to operate within that specific geographic location? Or for latency reasons is it better provisioning specific resources in closer locations for certain users? User count. We need to understand how many users will fit under each persona. Maximum session count. We’ll need to understand how many users will be connecting concurrently and from which region The final part of the assessment, but just as important as the other parts is the application groups. We need to understand which applications need to be part of a golden image that will be deployed to the session hosts. Which users will need to use Office applications? Or will they only need access to specific Office apps? Will applications be compatible with the virtual desktop environment? Which business critical apps will need to be part of the image or which ones can be published outside the image?</p>
<h1 id="Assessing-Network-Capacity-and-Speed-Requirements-for-Azure-Virtual-Desktop"><a href="#Assessing-Network-Capacity-and-Speed-Requirements-for-Azure-Virtual-Desktop" class="headerlink" title="Assessing Network Capacity and Speed Requirements for Azure Virtual Desktop"></a>Assessing Network Capacity and Speed Requirements for Azure Virtual Desktop</h1><p>Welcome to this module on Assessing Network Capacity and Speed Requirement for Azure Virtual Desktop. In this module we will cover the following topics:</p>
<ul>
<li>We will be taking a closer look at an Azure Virtual Desktop network architecture and the various ports and traffic flows</li>
<li>Next, we will look at the different types of network connectivity for Azure Virtual Desktop</li>
<li>Finally, we will look to understand some of the causes of connection latency in Azure Virtual Desktop</li>
</ul>
<p>Let’s start by looking at the network architecture for Azure Virtual Desktop</p>
<p>First, we can see all the connection sources which include the client device from which they are making the connection to Azure Virtual Desktop, the session host virtual machine, the internet, Active Directory Domain Services and Azure AD.</p>
<p>If we look closer at the Client connection, this flows via the Internet before it hits the Azure Virtual Desktop infrastructure. As we can see it makes three types of connection but all using the https port, which is 443. The purple line shows it making the Azure AD authentication, the red line signifies the feed subscription connection, and the dashed line signifies the Reverse Connection Transport connection. We will discuss this connection type in more detail shortly</p>
<p>We now see the additional authentication type connections that are made, initially from the session host to the Active Directory Domain Services on port 443 using Reverse Connect Transport, and then the Azure AD Connect traffic also using port 443.</p>
<p>The session hosts are also making connections to both the RD Gateway and RD Broker services. As we can see with this thick blue line, the connection to the RD Gateway is done on port 443 using Reverse Connect Transport. The connection to the RD Broker uses the RD Agent communication connection type, also on port 443</p>
<p>We now move on to looking at the different connection types. There are four main connectivity types that are utilized in Azure Virtual Desktop:</p>
<ul>
<li>First, we have Session Connectivity. As we saw in the architecture diagram earlier, session connectivity uses the remote desktop protocol, better known as RDP port to deliver remote display and input capabilities.</li>
<li>We then have Reverse Connect Transport, which is utilized to create the connection to the remote session on Azure Virtual Desktop</li>
<li>With the Session Host Communication Channel, when the Azure Virtual Desktop session initially starts there is a service called Remote Desktop Agent Loader service which creates a constant channel with Azure Virtual Desktop</li>
<li>Finally, the Connection Security. All connections that are made from clients and sessions hosts to the Azure Virtual Desktop infrastructure use TLS 1.2</li>
</ul>
<p>Let’s now move on to understanding connection latency in Azure Virtual Desktop. </p>
<p>There are a number of different things that can cause network latency when using Azure Virtual Desktop. As a service, Azure Virtual Desktop is globally available so as long as you have an internet connection and a supported device to use, you can connect to it.</p>
<p>It is not available in every region, so it is location dependent, however the list of supported regions is always growing. </p>
<p>Network latency can be difficult to predict or control, however Microsoft have and Azure Virtual Desktop Experience Estimator tool that assists organizations on deciding the best region which will allow them to improve latency of their session hosts. It is recommended that organizations should use this tool every 3 months to help manage network latency issues.</p>
<h1 id="Recommending-an-OS-for-Azure-Virtual-Desktop"><a href="#Recommending-an-OS-for-Azure-Virtual-Desktop" class="headerlink" title="Recommending an OS for Azure Virtual Desktop"></a>Recommending an OS for Azure Virtual Desktop</h1><p>Welcome to this module on Recommending an OS for Azure Virtual Desktop. In this module, we’ll cover the following topics: We’ll look at the virtual machine OS images that are supported in Azure Virtual Desktop that you need to consider when making recommendations. Lastly, we will discuss the various deployment options which support the different operating systems and why this is important to think about when making recommendations. Let’s start by looking at supported virtual machine OS images.</p>
<p>Azure Virtual Desktop only supports Windows operating systems for its session host virtual machines. The following Windows OS are supported: Windows 10 Enterprise multi-session. This OS is only support in Azure and enables multiple concurrent user sessions. Windows 10 Enterprise, which has the same features as Windows 10 Enterprise multi-session but without allowing concurrent user sessions. Windows 7 Enterprise. This OS is still available for businesses and in Azure Virtual Desktop for more legacy workloads.</p>
<p>Windows Server 2022 has recently become available for Azure Virtual desktop. Windows Server 2019, 2016, and 2012 R2 are additionally supported with Azure Virtual Desktop session host VMs. Now you understand the supported operating system for Azure Virtual Desktop, you also need to look at the different deployment options for these operating systems support. The first deployment option we have is from the Azure Image Gallery. All operating systems we have discussed support this method of deployment. We then have Manual virtual machine deployment which is again supported by all the operating system types we have discussed so far.</p>
<p>Azure Resource Manager, better know as ARM template deployment is only supported with Windows 10 Enterprise multi-session, version 1909 and later, Windows 10 Enterprise version 1909 and later and Windows Server 2016. ARM templates allow us to automate virtual machine deployment. The final deployment method available for Azure Virtual Desktop is provisioning host pools on the Azure Marketplace. This has the same OS support as ARM templates, Windows 10 Enterprise multi-session, version 1909 and later, Windows 10 Enterprise, version 1909 and later, and Windows Server 2016.</p>
<h1 id="Planning-and-Configuring-Name-Resolution-for-Active-Directory-and-Azure-AD-Domain-Services"><a href="#Planning-and-Configuring-Name-Resolution-for-Active-Directory-and-Azure-AD-Domain-Services" class="headerlink" title="Planning and Configuring Name Resolution for Active Directory and Azure AD Domain Services"></a>Planning and Configuring Name Resolution for Active Directory and Azure AD Domain Services</h1><p>Welcome to this module on Planning and Configuring Name Resolution for Active Directory and Azure AD Domain Services. In this module, we’ll cover the following topics. We’ll discuss Identity and Access Management options, which include: Azure Active Directory, Active Directory topology with Azure Virtual Desktop. Finally, we’ll discuss Azure AD Domain Services, better known Azure AD DS, with Azure Virtual Desktop. Let’s jump straight into Identity and Access Management options.</p>
<p>First, we have Azure Active Directory, which is Microsoft Cloud’s default identity service and it’s with this service that we can integrate features, such as conditional access and multi-factor authentication. We then have Active Directory Domain Services. This is your traditional on-premises identity and access management services where you install the Active Directory role onto a physical or virtual server. The third identity option for Azure Virtual Desktop is Azure Active Directory Domain Services. This is Microsoft’s domain controller as a service. Rather than provisioning a Windows Server to deploy the Active Directory role, you deploy this service and Microsoft manage the domain controller element. At the time of this course, all three options integrate with Azure Virtual Desktop. We will now look at each option in further detail.</p>
<p>First, let’s discuss Azure AD. Azure AD join has only recently been added as an integration feature. This enables administrators to manage the users and devices in a single pane of glass, regardless of the country the user or device reside in. Azure Active Directory can synchronize with Active Directory domain services via the Azure AD Connect sync tool, which in turn allows Azure Virtual Desktop to potentially integrate with applications that are hosted on-premises.</p>
<p>One of the most important features of Azure Active Directory integration enables for Azure Virtual Desktop are the security enhancements, including conditional access policies and multi-factor authentication. Active Directory Domain Services is traditionally a service you deploy on-premises on a virtual machine or a physical server, and allows you to domain join Windows clients. Domain joining your Azure Virtual Desktop session hosts will allow you to integrate the group policy to enhance the management experience. If you want the best of both on-premises and cloud integration, you can apply Hybrid AD join to your session host virtual machines to make use of Azure Active Directory’s enhanced security features but also Endpoint Manager integration.</p>
<p>The final deployment method we’ll discuss is Azure Active Directory Domain services. As I mentioned before, this is a domain controller as a service, so you do not have the headache of managing the Windows operating system, but get almost identical features as Active Directory Domain Services You can domain join your Azure Virtual Desktop session hosts. You even have the LDAP and NTLM support. However, what you do not get is the ability to do a hybrid AD join.</p>
<h1 id="Planning-Host-Pool-Architecture"><a href="#Planning-Host-Pool-Architecture" class="headerlink" title="Planning Host Pool Architecture"></a>Planning Host Pool Architecture</h1><p>Welcome to this module on Planning Host Pool Architecture. In this module, we’ll cover the following topics. I will explain what a pooled host pool is and its benefits. I’ll explain how breadth-first load balancing works. I’ll explain how depth-first load balancing works. We’ll finish this module off by talking about personal host pools and their benefits. A pooled host pool is also known as a non-persistent desktop and shares the session host resources or multiple users at any given time. Non-persistent state means about the settings are not saved unless you use FSLogix for user profile containerization. </p>
<p>There are two types of load balancing algorithms, which we’ll discuss in more detail now. The first load balancing algorithm we have is breadth-first load balancing, which enables you to evenly spread login sessions over all the session host virtual machines in your host pool. As you can see in this graphic, the session logins are spread even across a session host, and the next user it is connected to the session host on the right, indicated by the red circle.</p>
<p>Next, we have depth-first load balancing, which enables you to put all login sessions onto a single host. And only when usage of that session host hits a specific threshold, does it send login connections to another session host, as shown in the graphic. If we look at personal host pools, these are also known as persistent desktops, where settings are saved. You can either directly assign users to session hosts or allow Azure Virtual Desktop to automatically assign users. Whereas pooled host pools are shared resources, personal host pools are one-to-one ratio, so one user to one session host virtual machine.</p>
<h1 id="Recommending-Resource-Groups-Subscriptions-and-Management-Groups"><a href="#Recommending-Resource-Groups-Subscriptions-and-Management-Groups" class="headerlink" title="Recommending Resource Groups, Subscriptions, and Management Groups"></a>Recommending Resource Groups, Subscriptions, and Management Groups</h1><p>Welcome to this module on recommending resource groups, subscriptions and management groups. In this module, we’ll cover the following topics. We’ll discuss what a resource group is. We’ll talk about what a subscription is. I’ll explain what a management group is. Finally, we’ll take a closer look at an example of a typical hierarchical view of all three. A resource group is a logical container that allows you to manage your Azure resources that have been provisioned.</p>
<p>You can create multiple resource groups within your tenant and the number you have is very much dependent on your organization’s use case The resource group is the first logical management layer at which your Azure resources are stored. For example, if you have a number of departments, you might separate those departments’ provisioned resources into their own resource group. A resource group also stores metadata on the services you have placed in it. This is why it is essential that you choose the location of where you want your resource group to be situated carefully, as it needs to be in a country and region your organization’s policies allow.</p>
<p>The next level up in the Azure management hierarchy is a subscription. This is another logical container that stores metadata, and you can have multiple subscriptions within a tenant. You can also have multiple resource groups within a single subscription within multiple regions. You must have at least one subscription within your Azure tenant before you can start provisioning any cloud services, regardless of whether it is infrastructure as a servive, IaaS, software as a service, SaaS, or platform as a services, PaaS. The top level of management within Azure is a management group and much like the levels below it, this too is a logical container.</p>
<p>Management groups enable administrators to manage policies, access and compliance for multiple subscriptions and allow you to propagate settings down the management structure. As mentioned in the last point, you can manage multiple subscriptions within a management group regardless of the locations. In the final part of this module, we’re going to take a look at a typical management hierarchy, which includes management groups and subscriptions.</p>
<p>At the top layer, you have your root management group where you can apply policies and access rights you want to propagate down to the other resources. If we look at the next level down in the hierarchy, we have another layer of management groups that have been separated into departments, but also an enterprise subscription. At this level, an administrator could implement policies and access that are specific to each department.</p>
<p>Another level down, we have branched off into our separate, department-specific management groups where we have a mixture of subscriptions for testing and trials and a management group for production. It is this management group that is linked to the next level down where we have two region-specific management groups, which leads down to the lowest level in this hierarchy that consists of multiple enterprise subscriptions. This type of management hierarchy is typical of what you may find in an enterprise level organization, so it is recommended you take time to think about how this fits your Azure Virtual Desktop environment.</p>
<h1 id="Configuring-a-Location-for-Azure-Virtual-Desktop-Metadata"><a href="#Configuring-a-Location-for-Azure-Virtual-Desktop-Metadata" class="headerlink" title="Configuring a Location for Azure Virtual Desktop Metadata"></a>Configuring a Location for Azure Virtual Desktop Metadata</h1><p>Welcome to this module on configuring a location for Azure Virtual Desktop Metadata. In this module, we’ll cover the following topics. We’ll discuss the different types of information stored by Azure Virtual Desktop. Including customer data and the type of information that is stored as well as its locations. Diagnostic data and the type of information that is stored as well as this locations. Service generated data and the type of information that is stored as well as its locations. Let’s start by looking at customer data that is stored as part of the Azure Virtual Desktop environment.</p>
<p>Azure Virtual Desktop does not store actual user application related data. It does, however, store both, application names and use the principal names. The customer information that is stored is located in the location that is associated with the region the consumer has created that specific resource or object. If we now look at diagnostic metadata that is stored within Azure Virtual Desktop environment, is actually service generated data, which we’ll discuss in further detail shortly.</p>
<p>The diagnostic data that is stored is utilized for troubleshooting, support purposes and to check the health of the Azure Virtual Desktop environment. Diagnostic data is actually sent to two different locations. The first location is the one that is closest to the user in which the infrastructure is present. The second location is where the region where the host pool is located. Service generated data allows Microsoft to keep Azure Virtual Desktop reliable and scalable.</p>
<p>Specifically, traffic patterns, and region specific usage allow Microsoft to keep checks on health and performance of the backend control plan. Once the data is collated, it is sent to all the locations where the service infrastructure is held and then it is sent on to the US region. This includes scrub data, not any customer data. Service generated data is currently supported at limited locations, including the United States, Europe, the UK and Canada. Where is all generally available.</p>
<h1 id="Calculating-and-Recommending-a-Configuration-for-Performance-Requirements"><a href="#Calculating-and-Recommending-a-Configuration-for-Performance-Requirements" class="headerlink" title="Calculating and Recommending a Configuration for Performance Requirements"></a>Calculating and Recommending a Configuration for Performance Requirements</h1><p>Welcome to this module on calculating and recommending a configuration for performance requirements. In this module, we’ll cover the following topics: we will look at understanding the different workloads in Azure Virtual Desktop; we will then take a closer look at virtual machine size guidelines, including: multi-session recommendations for virtual machine sizing, single-session recommendations for virtual machine sizing, general recommendations for virtual machine sizing. Let’s start by looking at the different workloads available with Azure Virtual Desktop.</p>
<p>First, we have light workloads. When we say light workloads, we are talking about users who do basic data entry and use applications such as database apps and command-line apps. Next, we have medium workloads. With this type of workload, we are thinking more in the line of marketing people who use data entry applications, like Microsoft Word. We then move into heavy workloads. And these type of workloads are ideal for content creators who utilize broader Microsoft apps, such as PowerPoint and Outlook. The final workload we need to consider is power workloads. This type of workload suits 3D model makers who use applications such as Adobe products or CAD applications.</p>
<p>Now we understand the different types of Azure Virtual Desktop workloads, let’s take a look at some of the sizing recommendations. We start with some multi-session recommendations you need to be aware of for the exam. Microsoft recommends between 4 and 24 vCPUs for the standard or large environments. All virtual machines should have a minimum of at least two cores when dealing with standard or large environments.</p>
<p>Finally, it is recommended not to exceed 32 cores for any single virtual machine in an Azure Virtual Desktop environment. If we look at single-session recommendations, Microsoft recommends a minimum of 4 vCPUs per session host. For more accurate sizing however, they recommend you reach out to the app-specific vendor and liaise with them to understand more detailed recommendations.</p>
<p>In the final part of this module, we are going to discuss some general recommendations for virtual machine sizing with Azure Virtual Desktop. Microsoft recommends using Premium SSDs for any managed disks for better performance. If you are using the more power workload type, which is suited to graphics-intensive applications, then virtual machines with GPUs are the best fit. The last recommendation is to use the B-series burstable virtual machines for users who do not always utilize the maximum amount of CPU they are provisioned.</p>
<h1 id="Azure-Virtual-Desktop-Summary"><a href="#Azure-Virtual-Desktop-Summary" class="headerlink" title="Azure Virtual Desktop Summary"></a>Azure Virtual Desktop Summary</h1><p>We have covered several important topics in this course. First, we covered an overview of Azure Virtual Desktop, where we talked about what it is, how it works, and some use cases. We then moved on to looking at assessing existing physical and virtual environments. In this part of the course we discussed proof of concept, assessing deployments, user personas, and application groups.</p>
<p>Next came assessing network capacity and speed requirements for Azure Virtual Desktop, where we looked at network architecture, the different connectivity types, and looked at what can cause network latency. Recommending an operating system for Azure Virtual Desktop came next. And in this module, we talked about supported virtual machine images, the different supported and deployment types.</p>
<p>We moved on to look at planning and configuring name resolution for active directory and Azure AD Domain Services, where we talked about Azure AD, Active Directory and Azure AD Demand Services. Next came planning host pool architectures. And in this module, we took a closer look into what pooled and personal host pools are. Coming towards the end of the course, we discussed recommending resource groups, subscription and management groups.</p>
<p>In this module, we covered what a resource group, subscription and management group are, and then looked at hierarchical view of how they are utilized in an enterprise environment. Next, we discussed configuring a location for Azure Virtual Desktop metadata and the different types of data that were stored, including customer data, diagnostic data, and service generated data. </p>
<p>In the final module of this course, we looked at calculating and recommending a configuration for performance requirements. In this module, we look to understanding the different workload types and sizing guidelines for virtual machines.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Implementing-Business-Continuity-for-Azure-Virtual-Desktop-23</title>
    <url>/2022/11/13/AZ-140-Implementing-Business-Continuity-for-Azure-Virtual-Desktop-23/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on Planning and Implementing Business Continuity in Azure Virtual Desktop</p>
<p>My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist and have been working in the Microsoft cloud services for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications.</p>
<p>My contact information is available on the screen. Please feel free to reach out to me with any questions, comments, or concerns and I will be happy to discuss these with you. </p>
<p>For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#x73;&#x75;&#x70;&#x70;&#111;&#x72;&#x74;&#x40;&#x63;&#108;&#x6f;&#117;&#x64;&#x61;&#x63;&#x61;&#x64;&#101;&#x6d;&#121;&#x2e;&#99;&#111;&#x6d;">&#x73;&#x75;&#x70;&#x70;&#111;&#x72;&#x74;&#x40;&#x63;&#108;&#x6f;&#117;&#x64;&#x61;&#x63;&#x61;&#x64;&#101;&#x6d;&#121;&#x2e;&#99;&#111;&#x6d;</a> and one of our cloud experts will follow up with you.</p>
<p>This course is intended for anyone planning to take the Azure Virtual Desktop Specialty exam and anyone interested in learning how to deploy an Azure Virtual Desktop environment</p>
<p> By the end of this course, you will have knowledge on:</p>
<p>•  Planning and Implementing a disaster recovery plan for Azure Virtual Desktop</p>
<p>•  Designing a backup strategy for Azure Virtual Desktop</p>
<p>•  Configuring backup and restore for FSLogix user profiles, personal virtual desktop infrastructures (VDI), and golden images</p>
<p>To get the most from this course you should have an Administrator-level understanding of Azure Cloud services</p>
<p>When I created this course, all information was current. Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:&#115;&#117;&#112;&#x70;&#x6f;&#x72;&#x74;&#64;&#x63;&#x6c;&#x6f;&#117;&#100;&#97;&#99;&#x61;&#x64;&#101;&#109;&#x79;&#x2e;&#99;&#x6f;&#x6d;">&#115;&#117;&#112;&#x70;&#x6f;&#x72;&#x74;&#64;&#x63;&#x6c;&#x6f;&#117;&#100;&#97;&#99;&#x61;&#x64;&#101;&#109;&#x79;&#x2e;&#99;&#x6f;&#x6d;</a>.</p>
<p>If you notice any updates or corrections, please reach out to us.</p>
<p>Thank you!</p>
<h1 id="Planning-and-Implementing-a-Disaster-Recovery-Plan-for-Azure-Virtual-Desktop"><a href="#Planning-and-Implementing-a-Disaster-Recovery-Plan-for-Azure-Virtual-Desktop" class="headerlink" title="Planning and Implementing a Disaster Recovery Plan for Azure Virtual Desktop"></a>Planning and Implementing a Disaster Recovery Plan for Azure Virtual Desktop</h1><p>Welcome to this module on planning and implementing a disaster recovery plan for Azure Virtual Desktop. In this module, we will cover the following:</p>
<ul>
<li>Disaster Recovery for Azure Virtual Desktop</li>
<li>Virtual Machine Replication</li>
<li>And finally, FSLogix Replication</li>
</ul>
<p>Let’s start by discussing disaster recovery in Azure Virtual Desktop. Azure Virtual Desktop offers business continuity disaster recovery for the AVD service to preserve customer metadata during outages.</p>
<p>When setting up disaster recovery, you initially need to replicate your virtual machines to a secondary location. We will discuss this in more detail shortly. If you are using profile containers, you should also set up data replication in the same secondary location.</p>
<p>It is vitally important that user identities that are set up in the primary location are also made available in the secondary location. Finally, make sure any line-of-business applications which use the data in your primary location are also failed over to the secondary location.</p>
<p>Let’s now discuss virtual machine replication. As part of your disaster recovery plan for Azure Virtual Desktop, VMs need to be replicated to the secondary zone. It is recommended to use Azure Site Recovery to manage replication VMs to other Azure locations.</p>
<p>Once the VMs are replicated, you should turn them off to ensure you can save on cost. One of the benefits of using Azure Site Recovery to replicate the VMs to another location is that you will not need to register the VMs manually as the Azure Virtual Desktop agent in the secondary VM will automatically use the latest security token to connect to the service instance closest to it.</p>
<p>Something to note is that if there are existing user connections during any type of outage, you will be required to end the user connections in the current region before you can start the failover to the secondary location.</p>
<p>In the final lecture of this module, we will talk about FSLogix replication. When setting up disaster recovery for profiles, which uses FSLogix there are some configuration steps you need to follow. FSLogix supports multiple profile locations, so can enter the secondary location within the same registry entry you configure for the primary.</p>
<p>You will be required to provision an additional Azure file share in the second location to facilitate disaster recovery for the FSLogix user profile service.</p>
<p>In the event that the primary FSLogix profile path is unavailable, the FSLogix agent will automatically failover to the secondary, therefore it is recommended that the FSLogix agent be configured with a path to the secondary location.</p>
<h1 id="Designing-a-Backup-Strategy-for-Azure-Virtual-Desktop"><a href="#Designing-a-Backup-Strategy-for-Azure-Virtual-Desktop" class="headerlink" title="Designing a Backup Strategy for Azure Virtual Desktop"></a>Designing a Backup Strategy for Azure Virtual Desktop</h1><p>Welcome to this module on designing a backup strategy for Azure Virtual Desktop. In this module, we will cover the following topics:</p>
<ul>
<li>We will walk through a demo of how to back up VMs with Azure Backup</li>
<li>Next, we will walk through a demo of how to back up VMs with site recovery</li>
<li>And finally, we will look at how to back up VMs with snapshots</li>
</ul>
<p>Let’s start this module with walking through a demo of backing up a virtual machine by using the Azure Native service called Azure Backup.</p>
<p>Here we are logged into our Azure Portal. We need to navigate to the virtual machine we want to backup first so we click on virtual machines. We have two VMs here, so let’s click on ‘Demo VM’. Here we now see the overview page, but we need to navigate down the multiple options on this VM until we see backup.</p>
<p>Now as we can see we have not set any backups for this VM yet, so we first need to select the recovery services vault. We can either select an existing one or create a new one. For the purpose of this demo let’s create a new one. We then need to give the backup vault a name which we are going to leave as the default value which is automatically set. Ensure you have the correct resource group selected for where you want the recovery vault to reside which in our case we do. </p>
<p>Now we need to set our backup policy so we will click on edit this policy. We are going to leave the policy name, then we can move down to ‘backup schedule’. Here we can select the frequency of the backup, so daily or weekly. We can then set the time we want the backup to start and then make sure we set the relevant time zone. We then select the number of instance recovery snapshots, in our example, we will leave this set as two, however, you can set this to whatever your backup policy requires. Finally, we need to set the number of weekly, monthly and yearly backup retentions we want as part of our schedule. Once we are happy with the settings we can have a final quick review of our settings before creating the backup.</p>
<p>Let’s just take a look at the backup blade on the VM again. Now you can see our options are different. We can see the number of restore points and now at the top we can see an option to run a backup now, restore a VM once we have some backups, do a file recovery and stop the backup.</p>
<p>Now let’s do a walk-through demo of configuring Azure Site recovery for a virtual machine. Here we are again in the Azure portal. We navigate to the virtual machine we want to set up with replication, and whereas before we selected the backup pane, we are now going to select the Disaster recovery pane.</p>
<p>The first item we need to configure is the target zone. There are a whole host of supported geographical regions which support replication. With our primary location being UK South, we are going to leave the default region of the East US. Let’s click on Advanced settings at the top now. Here we have a few different values we need to configure, including the target subscription, VM resource group, virtual network, availability group, and proximity placement if applicable. Due to me having no resources in the East US region, most of these resources are all going to be new. </p>
<p>We then need to look at the capacity reservation group which allows you to reserve compute resources in the target region. Finally, we can specify any storage settings like the disk type, replication settings or extension update settings. We can then review our final configuration and start the replication process</p>
<p>For this final demo in this module, we are going to show how we can snapshot virtual machines and use this as a backup. We are back in the Azure portal for the final time in this module and once again navigating to the virtual machine we want to snapshot. Now we are actually going to snapshot the OS disk, so we select disks and then the OS disk.</p>
<p>Here we see the Create Snapshot option so we select this. Now we need to enter all the relevant values like a name, subscription, and resource group. We also need to decide on the snapshot type, do we want a full read-only copy, or do we want to use an incremental snapshot and save on disk space.</p>
<p>The rest of the settings are locked in and grayed out so we cannot change them. Let’s move on to the encryption options, and here we can either use encryption at-rest with a platform-managed key, which is default. Or we can use encryption at-rest with a customer-managed key, or finally, we can use double encryption with platform-managed and customer-managed keys. We will leave it the default setting and move into networking.</p>
<p>With network connectivity, we can either allow Public endpoints which are all networks, Private endpoints which are through disk access, or deny all network connectivity. We are going to leave it in public and move on to tags. Here, as with most Azure resources, you can set any tags you may be required to set, then finally you can review and create your snapshot backup</p>
<h1 id="Configure-Backup-and-Restore-for-FSLogix-User-Profiles-Personal-Virtual-Desktop-Infrastructure-VDI-and-Golden-Images"><a href="#Configure-Backup-and-Restore-for-FSLogix-User-Profiles-Personal-Virtual-Desktop-Infrastructure-VDI-and-Golden-Images" class="headerlink" title="Configure Backup and Restore for FSLogix User Profiles, Personal Virtual Desktop Infrastructure (VDI), and Golden Images"></a>Configure Backup and Restore for FSLogix User Profiles, Personal Virtual Desktop Infrastructure (VDI), and Golden Images</h1><p>Welcome to this module on configuring backup and restore for FSLogix user profiles, personal virtual desktop infrastructure (VDI), and golden images. In this module we will cover the following topics:</p>
<ul>
<li>How to backup Azure File shares</li>
<li>Golden Image backup options</li>
</ul>
<p>Let’s start off by discussing how we can backup the Azure File share that we utilize for our FSLogix user profiles. The first step is that we need to create a recovery services vault. This is a management entity that stores recovery points that have been created over time.</p>
<p>It provides an interface to perform backup-related operations These include taking on-demand backups, performing restores, and creating backup policies.</p>
<p>We can configure a backup in a few different ways. For multiple file shares we can use the recovery services vault. This is done from the recovery services vault pane within the Azure Backup service. Another option is to configure a backup from the Azure file share pane.</p>
<p>Let’s finish off this module by discussing golden image backup options. When creating the golden image from within the Azure portal, you can snapshot the VM which will store the image and will form your backup for the golden image.</p>
<p>You need to ensure you snapshot the VM image after all the patching is completed, after all the apps are installed, but before you run the sysprep. Then when it comes to updating the golden image with future patching and app updates, you boot to the snapshot, update the image and follow the same process to back this up again.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We have covered several important topics in this course. First, we looked at planning and implementing a disaster recovery plan for Azure Virtual Desktop. In this module we discussed disaster recovery in AVD and how you can utilize a second region to failover to, we then discussed Azure virtual machine replication, and finally looked at how we can facilitate FSLogix replication.</p>
<p>In the second module, we looked at designing a backup strategy for Azure Virtual Desktop, and this was very demo-heavy. We ran through three demos, including backing up a VM using Azure Backup, a demo to configure Azure Site Recovery for a VM, and finally how to snapshot an Azure VM for backups.</p>
<p>In the final module of this course, we took a dive into configuring backup and restore for FSLogix user profiles, personal virtual desktop infrastructure (VDI), and golden images. In this module, we talked about backing up Azure file shares and the backup option for golden images.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Configuring-Azure-Virtual-Desktop-Host-Pools-and-Session-Hosts-10</title>
    <url>/2022/11/13/AZ-140-Configuring-Azure-Virtual-Desktop-Host-Pools-and-Session-Hosts-10/</url>
    <content><![CDATA[<h1 id="AVD-Host-Pools-and-Session-Hosts"><a href="#AVD-Host-Pools-and-Session-Hosts" class="headerlink" title="AVD Host Pools and Session Hosts"></a>AVD Host Pools and Session Hosts</h1><p>Thanks for joining this course on Azure Virtual Desktops, Host Pools, and Session Hosts. You’re going to learn just about everything there is about Host Pools and Session Hosts so that you can pass the Azure Virtual Desktop exam and up your AVD skills. My name is Dean Cefola and I’ve been in the IT industry for over 20 years. Today, I’m an Azure Principal Engineer at Microsoft and I’ve been working with Azure Virtual Desktop since before the beginning. I hope you’ll find this course entertaining and educational, so please rate this course when you’re done and let me know how I did.</p>
<p>Who should attend this course? Anybody that’s planning on taking the Azure Virtual Desktop Specialty exam and anyone who’s interested in learning more on how to properly deploy an AVD environment. Speaking of this course, we’ll cover everything you need to deploy and configure your Host Pools and Session Hosts. We’ll set up auto-scaling for Azure Virtual Desktop. We’ll talk through the AVD limits as well as the high availability options. We’ll go through the AVD Session Hosts join options, as well as take a quick dive into AVD automation, so that you can have a well-rounded view of AVD and how you can build and improve your environment. </p>
<p>To get the most out of this course, you should have an administrator-level understanding of Azure Virtual Machines, Azure’s high availability solutions, Windows Management join options, and then ARM templates, Azure CLI, and PowerShell for automation. Feedback is how we can all continue to improve, so if you have any feedback, positive or negative, you can let me know by rating this course at the end, as well as contacting us directly at <a href="mailto:&#115;&#x75;&#112;&#112;&#x6f;&#x72;&#x74;&#64;&#99;&#x6c;&#x6f;&#x75;&#x64;&#x61;&#99;&#x61;&#x64;&#101;&#109;&#x79;&#x2e;&#99;&#x6f;&#x6d;">&#115;&#x75;&#112;&#112;&#x6f;&#x72;&#x74;&#64;&#99;&#x6c;&#x6f;&#x75;&#x64;&#x61;&#99;&#x61;&#x64;&#101;&#109;&#x79;&#x2e;&#99;&#x6f;&#x6d;</a>. One last thing before we get started, everything I’ll be showing in this course is up to date at the time of filming, however, the cloud does change over time. So, if you find the material here becomes out of date, please let us know at <a href="mailto:&#x73;&#117;&#112;&#x70;&#x6f;&#x72;&#x74;&#x40;&#x63;&#108;&#x6f;&#x75;&#x64;&#97;&#x63;&#x61;&#100;&#x65;&#x6d;&#x79;&#x2e;&#x63;&#111;&#109;">&#x73;&#117;&#112;&#x70;&#x6f;&#x72;&#x74;&#x40;&#x63;&#108;&#x6f;&#x75;&#x64;&#97;&#x63;&#x61;&#100;&#x65;&#x6d;&#x79;&#x2e;&#x63;&#111;&#109;</a>, so we can keep things updated. With all that out of the way, let’s get started.</p>
<h1 id="What-is-a-Host-Pool"><a href="#What-is-a-Host-Pool" class="headerlink" title="What is a Host Pool?"></a>What is a Host Pool?</h1><p>Let’s first answer the question, what exactly is a Host Pool? Host Pools are a collection of one or more identical virtual machines in the AVD Environment, and it’s a Host Pool that’s the heart of AVD. Session hosts are a member of it, App groups are connected to it, and workspaces are associated with it. The reason why a Host Pool is a collection of identical virtual machine session Host is because a Host Pool should be created for a specific use case or user persona to consumer’s resources. For example, you would have a Host Pool for the Accounting Department and a separate pool for those field sales folks. </p>
<p>This is because the applications that each group needs will be unique and so to will be their behavior and performance requirements, which means that their configurations and properties will also be different. Each Host Pool will also be unique because of the number of users in that use case and they’ll require different amounts of user density and different numbers of session hosts, which also means different configurations and properties. An example of this is in the join options. If you have domain join session host and Azure AD-joined session host, they will need to be in separate pools because the RDP property configurations are very different.</p>
<h1 id="How-Many-Host-Pools-Do-You-Need"><a href="#How-Many-Host-Pools-Do-You-Need" class="headerlink" title="How Many Host Pools Do You Need?"></a>How Many Host Pools Do You Need?</h1><p>With those thoughts in mind, how many host pools do you really need?</p>
<p>As I said before, you can have a unique host pool for every use case. But at the upper limit of a AVD, you can have 400 host pools per Azure Active Directory Tenant. Now, there are also two different kinds of host pools; personal and pooled.</p>
<p>Personal host pools have a single user assigned to each session host. So, if you have 500 users, you’ll need 500 session hosts. Pooled host pools can have multiple users logging on to the same session host virtual machine at the same time. So, those same 500 users could all be logged in at the same time across 20 virtual machines.</p>
<h1 id="Build-Host-Pool-Demo"><a href="#Build-Host-Pool-Demo" class="headerlink" title="Build Host Pool Demo"></a>Build Host Pool Demo</h1><p>Let’s build our first host pool. In the Azure portal, click the plus at the top to create a new resource. Type host pool in the search box, then you’ll want to click on the second option for host pool. Now click the ‘Create’ button, select the desired subscription, and then click here to create a new resource group. You’ll need to give the resource group a name and the name should follow your company’s standard naming convention. </p>
<p>For me, that uses the name of the project-resource type. So, in my environment, I’ll use FirstPool-RG. Now the host pool name should also match your naming convention. So, for me this will be FirstPool-HP. Now we need a location, and this is where the metadata of the host pool will be stored. The metadata is extra information about your Azure virtual desktop resources that are needed to maintain your connections, users, and application associations, and that’s all stored in a Cosmos database per geography. As of this recording, there are five metadata locations. Canada, Europe, Japan, United Kingdom, and the United States. Since my users are located near the East US, that’s where I’ll be deploying. </p>
<p>Next, we have the validation environment setting. This feature controls two things: Access to some of the preview features, and how AVD session host agent updates are rolled out. It is recommended to have a validation host pool for each production pool if they’re built from unique images, or one validation pool if they’re all built from the same image. This will allow you to test the AVD agent update’s potential impact on your pools in advance of production. It is very rare to see an issue, but if you do, open a support ticket as quickly as possible so the issue can be resolved before updates are rolled out to production pools.</p>
<p>Functionally, this will not impact your pool, so I’ll leave it on ‘No’ in this case. And let’s look at the last choice we need to make on this page concerning our host pool type. We have two options, personal and pooled. If you select personal, you’ll now have to decide how your users will be assigned to their session host virtual machines, automatically or directly. The only reason I find that customers want to go against the general best practice that all VMs in the host pool are the same, is because if they’re built from different sizes or have special applications or configurations. If so, you’ll want to choose the direct method. And don’t get me wrong, it is a viable option, just not an optimal one. The other option is to choose pooled. </p>
<p>Here, you have to choose the load balancer algorithm of either breadth-first or depth-first. Breadth-first is where we will have users logging in across all of the session hosts in the pool evenly. This is most advantageous during those morning logon storms, so each user can log in as fast as possible. Depth-first is where you’ll want to have the maximum number of users log on to the first VM before anyone is allowed to log on to a second. This is usually best after the logon storm during the normal business operations, so that you can have the fewest number of session hosts running as possible, which helps to keep costs down. But since you have to pick one method, which one is right? I’m going to say both and neither, which might be confusing right now but it will become a lot clearer as we configure our host pools in our next section. </p>
<p>For now, I’ll pick breadth-first and now we need to set the max session limit, and this controls how many users can log on to the VM at the same time. I’m going to set this to 20, and now click ‘Next’. This is where we could provision our session host VMs, but we’ll skip over this for now. Click ‘Next’, here’s where you could provision a workspace, but that’s another course, so we’ll skip that as well. Here on the advanced tab, you can set up your monitoring, and I do definitely recommended this. You check the box here at the top and then you select the preferred logging method, which is going to depend on your monitoring solution. To leverage the native AVD insights monitoring tool, you’ll need to select a log analytics workspace. I’m actually going to remove these options for now so I can show you how to do this on an existing host pool in just a moment. </p>
<p>So, I’ll uncheck the box here and click ‘Next’. Here we can add another form of metadata with Azure tags. These are key and value pairs that tell you not only a lot about your resources, but they can be leveraged for automation and management as well. The standard tags that I use are for application, cost center, environment, owner, and support contact. Add the tags that are part of your governance plan and then click the ‘Review and Create’ button. Here we have a summary of everything that you selected to build, but before you click ‘Deploy’, click over here on download a template for automation. This is a JSON arm template that will be used to provision your host pool. And you can click the ‘Download’ button at the top to save this for our future use or customization. We’ll talk more about armed templates during our automation section later in this course. For now, click the ‘X’ in the top corner and then click the ‘Create’ button at the bottom.</p>
<h1 id="Configure-Host-Pool-Demo"><a href="#Configure-Host-Pool-Demo" class="headerlink" title="Configure Host Pool Demo"></a>Configure Host Pool Demo</h1><p>Now that you’ve built your first Host Pool, let’s have a look around. Starting at the top, we have a registration key, and this will be necessary when building our session host, so we’ll come back to that one later. Then we have some information about our Host Pool and our tags. In the bottom section, we can see the total number of session hosts which right now is zero. Separate from that is the number of session hosts that are unavailable for user connections, then the disconnected, active, and total number of user sessions. Finally, at the bottom is the number of application groups and applications this pool supports. Over on the left of the screen, we have the blade section. </p>
<p>Starting at the bottom, click on ‘Diagnostic settings’. This is the same settings that we walked through during the build process and it’s required to set up AVD insights monitoring. Click the ‘Add diagnostic settings’ in the middle. Settings need a name but it does not have to be unique. So, we’ll just call it Host Pool Monitoring. On the left, we have all of the different log categories that can be monitored, but the default recommendation is to select all logs. Then on the right, we have the destination for those logs. Now to use the native insights monitoring tool, you’ll need to store this in log analytics. So, I’ll just check that box and select a workspace in my environment. </p>
<p>Then click ‘Save’ at the top. Now, of course, if you’re using a different monitoring solution, then you’ll need to pick the proper log destination. Moving up the blade, we have the management section. We’re going to skip MSIX packages since that would be more related to a course on AVD applications. We’ll come back to session host in a few minutes. So, click on ‘Application groups’. The one thing I’ll mention here is that during the portal build process, you’ll get your first desktop application group automatically. But if you provision your session host through an arm template or some other scripted automation, you would not get an application group by default. </p>
<p>And since application groups are their own resources which would be covered in another course on apps, we’ll move on to the scheduled agent updates. This feature lets you control when the AVD session host agent updates are rolled out and they can be deployed during your maintenance windows. This is separate from the validation environment setting and can be used in conjunction with it. To enable, check the box at the top and then you’ll need to specify a schedule. If your session hosts are spread across multiple regions, then I suggest you check this box to use the local session host time zone. That way, each region will be able to follow its own maintenance window instead of having one global maintenance window. This will help any maintenance going on in region A not disturb the users in region B. Then we need to select our maintenance window by picking the day of the week and the time you want the window to begin. </p>
<p>You can also check the box here for an additional maintenance window if you like, and then click ‘Apply’ at the bottom. Next in the blade is the property section. Here’s where you’ll find the resource ID for the Host Pool, and if you scroll down, we have the start VM on connect and validation environment settings. Start VM on connect only applies to Personal-HostPools, so we won’t worry about that for this Pooled-HostPool. You can also give your Host Pool a friendly name and a description, and at the bottom, you can change the load balancing algorithm or the max session limit. Once you’ve made any changes here, you’ll need to click ‘Save’ at the top. Next is the RDP properties. This controls some of the look, feel, and security of your Host Pool that more traditionally would have been done through group policy. Now, not all of these settings are applicable in every environment. </p>
<p>For example, unless you’re using smart card authentication, you wouldn’t need to use the KDC proxy name. On the sessions tab, you can control the reconnection behavior and compression for video playback and try to optimize the user experience. On the device redirection tab, you’ll find several of these security settings controlling microphone and camera redirection, presenting local drives into the AVD session, as well as clipboard and local printer redirection behavior, and a whole lot more. The display settings is where you can figure how the sessions will be displayed to the users, from picking single or multiple monitors to specific resolution settings and scaling factors. On the advanced tab, this is the culmination of all of the other settings. The ones you’re seeing here are all of the default settings and any changes you make on the previous tabs will update here automatically and then you just click ‘Save’. You can find a full list of these settings here in the AVD documentation and there is a whole lot to read through.</p>
<h1 id="Autoscale-Host-Pool-Demo"><a href="#Autoscale-Host-Pool-Demo" class="headerlink" title="Autoscale Host Pool Demo"></a>Autoscale Host Pool Demo</h1><p>The next item in the blade is the scaling plans. This relates to the autoscale feature which will allow your pooled host pools to dynamically power on or off your session host which helps to control costs all based on user demand. This feature is currently in preview, however, we don’t need the validation environment setting to use it. But we will have to create a custom role to grant the AVD service permissions to control our virtual machines. To begin, we’re going to have to go to your Azure subscription. Then on the left near the top, go to access control, click the ‘Add’ button here at the top, and then click ‘Add custom role’. Click over to the JSON tab, and then click the ‘Edit’ button here at the top. </p>
<p>You’re going to want to erase all of the code in the box and then open this link. Scroll down until you find this block of JSON code and click the ‘Copy’ button, then go back to the Azure portal. Paste in the code in the box and click the ‘Save’ button at the top. Now go back to the Assignable scopes tab, and you’ll see here a placeholder that you need to delete. Now click the ‘Assignable Scopes’ button. If it’s not already on the left, select the subscriptions, and then on the right, select the particular subscription where your host pool is located. Then click the ‘Select’ button at the bottom. Click the ‘Review and Create’ button and you can review all of the permissions that will be granted to the virtual desktop service, and then click the ‘Create’ button at the bottom and you should see this message that you’ve successfully created a custom role, and that role is called Azure Virtual Desktop Autoscale. </p>
<p>Now it may take a few minutes to display this role everywhere, so be patient. Click the ‘Okay’ button, back in the host pool, click the ‘Access Control’ in the top of the blade on the left, then click the ‘Add’ button at the top, and click ‘Add role assignment’. In the filter, type the word autoscale, and then select Azure Virtual Desktop Autoscale, which is a custom role, then click ‘Next’. Click in the middle here to select members. Over on the right, search for Windows Virtual Desktop and click on the first item that only says Windows Virtual Desktop. Then click the ‘Select’ button at the bottom. Now click ‘Review and Assign’. When I look at the role assignment section, I can see the Azure Virtual Desktop Autoscale role has been assigned to the Windows Virtual Desktop service scoped at the host pools resource. Back on the left, click on your ‘Scaling plans’. Now in order to add a scaling plan to this host pool, first we need to create one. </p>
<p>In the search bar here at the top, type scaling plan, then click on the first item. Click the ‘Create’ button at the top, select this subscription and the same resource group where your host pool is located, and give your scaling plan a name that matches your naming convention. For me, this will be FirstPool-ScalingPlan. The location must be the same region where the host pool is deployed, and you can optionally give your scaling plan a friendly name and a description. At the bottom, select your time zone and then click ‘Next’. I’d like to add a new schedule and many of the settings here are filled out to help guide you along the way. This first schedule’s name is weekdays_schedule, and it has Monday through Friday selected. Be aware though at this time each day can only be associated with a single schedule. </p>
<p>Click ‘Next’. In the ramp up section, we dictate how the host pool will function during those morning log on storms, and you can specify the start time such as 8:00 AM. The load balancing algorithm here is set for breadth first, which will allow the greatest number of users to log on to the most number of session hosts at the same time, which should leave nobody waiting. The minimum percentage of hosts is set for 20%, which means that 20% of the total hosts in the pool will be powered on at 8:00 AM. And our capacity threshold has to do with the number of the users logged on relative to the max session limit. Now we set our max session limit for 20, and the capacity threshold of 60% means when 12 users have logged onto a VM, autoscale will power on the next VM. Click ‘Next’. </p>
<p>In the peak hours tab, we’re now past the morning log on storm, and so we’ve set our time here for 9:00 AM. And we’ve switched the load balancing algorithm to depth first, and this means we now want to stack as many users as possible onto each VM before more users log on to the next available VM. This will help you get the most usage out of each session host VM in the pool, and as your users log off sessions, eventually the VMs will have no users on them and be able to be powered off to reduce cost. In the ramp down section, we’re beginning this at 6:00 PM. So, this is the end of our day. We’ve still got depth first load balancing set and we want to get as many VMs turned off as soon as possible. </p>
<p>The minimum percentage of hosts that will remain online is 10% and the capacity threshold is 90%, and we have the option to force users to log off. I generally don’t recommend this because you don’t want to interrupt a user during a session if you don’t have to. You can additionally delay the time before those users are forced off and you can display for them a console notification telling them to save their work and log off before the time limit, so that they don’t lose anything that they’re doing. Click ‘Next’. Finally, the off-peak hour section begins at 8 PM. We’re still using depth first and we have a capacity threshold of 90%, so we won’t spin up a new VM unless 18 out of 20 users are logged onto a machine, and 20 was, again, our max session limit that we chose. </p>
<p>Click ‘Add’ at the bottom and click ‘Next’ for your host pool assignment. Since the scaling plan and the host pool must be in the same region, when you click the drop-down, you’ll only see the pools that are in the same region as your scaling plan. Check the box for your host pool and then click ‘Next’. Add your standard tags just like we did before. This way, all of your resources will all be related to each other. Click ‘Next’ and you can review all of your settings, and if everything looks correct, then click ‘Create’. Back in your host pool, we now see that the scaling plan has been associated with your pool, which means that the autoscale feature is now enabled.</p>
<h1 id="What-are-Session-Hosts"><a href="#What-are-Session-Hosts" class="headerlink" title="What are Session Hosts?"></a>What are Session Hosts?</h1><p>Now, I know we’ve talked about it several times, but what exactly is a Session Host?</p>
<p>An Azure Virtual Desktop Session Host is a standard Azure virtual machine of any type and any size that has been deployed in the cloud. Then, the AVD Bootloader agent and the AVD agent get installed, registering the VM to the Host Pool as a new Session Host. This means that the Session Host is a role that’s added to a VM and not the VM itself. And since the Session Host role can be added to any virtual machine type, you can use the VM skew that best suits your needs and user personas. Maybe you need something like a massive CPU, you can pick an L series VM. Or maybe you need graphics power, and you can pick an N series skew. You can even take advantage of other VM’s advanced features, like ephemeral disk, or trusted launch, and also Gen2 virtual machines.</p>
<h1 id="Session-Hosts-Limits"><a href="#Session-Hosts-Limits" class="headerlink" title="Session Hosts Limits"></a>Session Hosts Limits</h1><p>Let’s talk about limits for Session Hosts.</p>
<p>Well, there kind of are none, at least not when the number of users are concerned. There’s also no AVD user license restriction, and there’s also no Windows license restriction from packing as many users you want to on a single AVD Session Host. The limitations come in more of the resources that are available on the VM and what those users are doing. So, as always, it depends, and what it depends most on are the apps and their requirements, the overall VM performance, and the numbers of total VMS that you want to manage in your environment. </p>
<p>Now, as far as the upper limit of Session Host per Host Pool, today, it’s 10,000 Session Host per Host Pool. However, it is recommended to have no more than 5,000 Session Host per subscription, per region. So, if you have three Azure subscriptions and you’re deployed across three different regions, then you can have 5,000 Session Host per region for a total of 15,000 Session Hosts. Now, if your users and workloads are centered just around these three regions and you need to scale out more, then you can expand across those other subscriptions. So, two subscriptions would give you 30,000, and if you scale out further across all three subscriptions, you can have 45,000 session hosts.</p>
<h1 id="Session-Hosts-High-Availability"><a href="#Session-Hosts-High-Availability" class="headerlink" title="Session Hosts High Availability"></a>Session Hosts High Availability</h1><p>There is no best practice or recommendation for how to deploy with or without high availability, but there are a lot of things to consider. When we talk about high availability in Azure VMs, we’re talking about availability zones or availability sets. Availability zones are groups of Azure data centers within a particular region where availability sets are scoped at the rack of servers within a data center. And availability sets break down into two parts, fault domains, and update domains. The fault domain is the rack of equipment. Then the update domains are groups of VMs spread across multiple racks for a single workload. Now, when it comes to your personal host pools, you have one user for each session host virtual machine. </p>
<p>So, from the user’s perspective, there really is no high availability regardless of if you choose availability zones or sets because if their VM is down, they’re unable to work. However, it is still a best practice to use an availability zone or set so that the personal host pool solution as a whole can remain more highly available in case there are any hardware issues in the Azure data centers. In a pooled host pool, however, we have the opposite case. If any singular VM is unavailable, your users could simply log onto a different VM in the pool. So, definitely using an availability set or a zone will give you more high availability for this solution as a whole as well as the individual user. </p>
<p>Not all Azure services work directly with availability zones and any traffic that goes between zones is considered interzonal traffic, which does have an egress charge. One last thing to consider, however, are deployments. Availability sets also have a maximum of 200 VMs per set and that is a limitation at a AVD scale solution. So, if your AVD deployment is larger than 200 session hosts in a single region, you’ll need to consider how much you really need an availability set, since this will potentially limit the number of VMs that you can deploy at once. Without an availability set, you can deploy up to 400 VMs at a time. Now you might be willing to sacrifice on the deployment side to get some extra high availability, but you also need to consider your monthly service updates. If your update plan is to provision new VMs and throw away the old ones, you’ll be doing large numbers of deployments every month. And at scale, having the availability set is going to double your deployment time every month.</p>
<h1 id="Session-Hosts-Join-Options"><a href="#Session-Hosts-Join-Options" class="headerlink" title="Session Hosts Join Options"></a>Session Hosts Join Options</h1><p>The last thing we need to cover before we start building our Session Host are the Join Options. Now, there’s basically three choices: Active Directory Join, which is the traditional approach to manning VMs in a Windows environment, Azure Active Directory Join, which would be a modern cloud management model, and in the middle, we have Hybrid Azure AD Join. This is where you would do a traditional Active Directory join and then you have group policies in place that will do a Azure Active Directory join on those same systems. </p>
<p>Along with these join options, there’s also different ways to manage. Traditionally, you would use group policy within Active Directory to control your environment. In the hybrid join environment, you can leverage group policy as well as modern management through Intune, also known as Microsoft Endpoint Manager. And on the Azure AD solution, we can only use Endpoint Manager. Now, since all three scenarios are viable and supported, the question you need to ask is, how do you want to manage?</p>
<h1 id="Build-Session-Hosts-Demo"><a href="#Build-Session-Hosts-Demo" class="headerlink" title="Build Session Hosts Demo"></a>Build Session Hosts Demo</h1><p>Let’s build some Session Hosts on the pool we created earlier. Session hosts are added to a pool by installing agents onto virtual machines using a registration key. So, the first step is to make sure that our host pool has a valid registration key. Click ‘Registration Key’ at the top. And as you can see, this pool no longer has a registration key, and it’s not something to really be concerned about. The key is only used when adding a new session host to an existing host pool, and the session host will not expire when the key does. Click here to generate a new key. Now, you’ll need to pick a date and time when the key will expire. If I was performing a monthly update and I needed to provision 300 VMS and I was going to do that over three days, I would make the key expire in three days. </p>
<p>Now, once you’ve picked your date and time, click ‘Okay’. And once the key has been generated and listed here, we don’t need to do anything with it from the portal, but if you’re using another deployment experience, you might need to copy it and paste, and I’ll show you that later in the automation section. For now, close this panel on the right and click over here on your session hosts. Click ‘Add’ at the top. Notice on this first page that everything is grayed out. That’s because this is information about the pool and we can’t change that information when provisioning a host. So, click ‘Next’. First, you’ll need to select a resource group, and I’ll take the defaults here, which is the resource group where our host pool is located. </p>
<p>The name prefix is going to be the first part of the VM name followed by a dash and a number. I’ll pick the prefix FirstPool, so the first VM that will be built is FirstPool-0. Another thing to keep in mind here is the Windows NetBios limitation of 15 character names. And because the portal will add a dash and a number at the end, you can only use 11 characters in your prefix. For the location, I’ll use the East US, which is where my host pool is located. Then we have our availability options, and this refers to the availability zone or the availability set, or no availability option at all. And if you’re going to do a very large deployment and get past the 200 VM per deployment limit, that’s when you’d use the no infrastructure redundancy option. </p>
<p>For this example, I’ll just leave it on availability zone and select Zone 1 and scroll down. The security type is the option between standard and trusted launch. Trusted launch will require Gen 2 virtual machines and will use TPM authentication to secure your boot process. For this example though, we’ll just use standard. The image type will come from our gallery, and if you click the dropdown for the image, you’ll see we have a lot to choose from. For this example, I’ll use Windows 11 multi-session + M365 Apps. The VM size of 2 core and 8 gig of RAM is fine for this example, just be sure that when you pick your VM size, you’ve selected one that best fits your needs. I’ll choose the provision three virtual machines session hosts. Again, pick the VM that matches your user density options, so you can meet your total user requirements in your scenario for that VM size.</p>
<p>For the disk type, it is recommended that all production workloads use premium SSDs. With that said, I found that the performance requirements for standard are generally fine for personal host pools. However, pooled host pools must have premium SSDs since we’ll have multiple users accessing and writing data to that disc at the same time, and you’ll need all the performance you can get. For the boot diagnostics, we’ll leave this on enabled with manage storage and scroll down. I’ll select a virtual network and subnet that I’ve already allocated for this solution, and from my network security groups, I’ll set that to none since I’ve already got an NSG attached to the subnet directly. </p>
<p>For the domain join options, we have two choices: Azure Active Directory or Active Directory. If you want to go with the hybrid option, choose Active Directory here and then your group policies will do the rest. I’ll just use Azure Active Directory join in this example, and I’ll choose to enroll my VMS with Intune. Just be aware that Intune does have its own licensing requirements, but we won’t be covering that in this course. Next, we’ll need to add our virtual machine local administrator account and password. And once you’re done with all of that, click ‘Next’. On the Advanced screen, check the box to enable diagnostics and then select your log analytics workspace, and this should be the same workspace where you’re sending your host pool data. </p>
<p>Then, click ‘Next’. Add all of your standard tags like we’ve done before, then click ‘Next’. Verify that everything looks good on this review screen and then click ‘Create’. Once the build is done, you can come back to your host pool screen and you can see we now have three total virtual machine session hosts and zero are unavailable. And if you click on that, you can see the names of our three VMs. Over in Azure Active Directory in the devices section, you can see all three of my devices have been Azure AD joined and registered with the MDM solution of Microsoft Intune.</p>
<h1 id="Automation-Azure-CLI-x2F-PowerShell"><a href="#Automation-Azure-CLI-x2F-PowerShell" class="headerlink" title="Automation Azure CLI&#x2F;PowerShell"></a>Automation Azure CLI&#x2F;PowerShell</h1><p>Because the possibilities are nearly limitless with scripting and automation, we’ll just go through a few examples. Just know that for the exam, you’ll need to be very familiar with all of the commandlets in both Azure CLI and PowerShell. I’ve opened another web page here, shell.azure.com, which is the Azure Cloud Shell, but lets me view it as a full screen. If I click here, we can open the editor and you see that I’ve created a file called Cloud Academy and I’ve put in the commands that we’re going to use, and this will just make it easy to talk through everything before we execute. The first command is going to be using the Azure CLI and it’s going to create a new host pool. Now if you think back to when we did the portal build, we’ve got to answer all of those same questions using the code. </p>
<p>Just a quick word on the Azure CLI. It’s structured by using the command AZ and then using a resource provider, in this case, desktopvirtualization, and then you have your resource, which is a HostPool and the command is to Create. Our location will be in the East US and I’ve added a description and friendly name of Personal. The HostPool type will also be Personal. The Personal-desktop-assignment-type is automatic. The preferred-app-group-type is desktop, because personal HostPools only support desktop app groups. The registration info has to do with the expiration of your registration token, and that’s going to use this date and time, and then have a operation of update. Start-vm-connect will be set to true and we do have a vm-template section here, but it just says json because we’re not actually building VMs at this time, but if you wanted to you could add that information here. </p>
<p>And we’ve got our standard tags like we’ve used in the rest of this course. The name for this Pool will be Personal-HP and the resource group will also go into the FirstPool-RG. So, we’ll just copy all of that code and then paste it into the Cloud Shell and click ‘Enter’. That Pool will be built in just a moment. When we go back to the resource group, we can now see that we have a personal HostPool. Now let’s look back at our first Host Pool at the RDP properties advanced section, and this is the default configuration of every HostPool and you can see that there’s a lot here. Back in the Cloud Shell, the next command we want to run will change those RDP properties and it will only allow microphone, and camera redirection and set the multimonitor to support to no. We’ll copy that and execute, and then back in our RDP properties, we can see that our settings have changed accordingly. </p>
<p>The next demo, we’ll create an empty remote application group. This requires a name and a resource group and an app group type, which in this case is RemoteApp. Then we need the resource ID of our HostPool that the app group will belong to. I found this in the Azure portal by going to the Host Pool properties blade. Just copy the resource ID here and then paste that in your code, and we’ll put all of that in the Cloud Shell and click ‘Enter’. Back in the Azure portal, we’ll look at our resource group and see we have a new remote application group. And if you look at the FirstPool-HostPool in the application group blade, you can see that new remoteApp group there as well. </p>
<p>Now let’s click on that app group. Notice that there are no applications listed yet. So, let’s go back to the Cloud Shell. Our next command is going to use PowerShell and it’s going to create a new application inside that group. PowerShell and Azure CLI commands are constructed differently. PowerShell is based on a Verb-Noun and the Azure CLI is AZ and then a resource provider. So, the verb, in this case, is New and the noun is AzWVDApplication. We’ll need to reference our resource group and the app group name of Monet. The name of the app we’ll create is called Paint. Then we need to give it a file path to the mspaint.exe. The IconIndex of zero tells the system to use the first icon embedded in that executable. Then we’ll need a path to the icon file which is the same as our executable. The command line setting of allow lets you pass commands when the application runs and the show in portal will allow the app to be visible. </p>
<p>Copy and paste the code into the Cloud Shell and click ‘Enter’ and you get a simplified return here. Back in the Azure portal, we have a new app in our app group, and if you click on that, you’ll see the app name of Paint. And if you click on Paint, you’ll see the details of that app that we supplied from the code. There’s one more thing I want to do here and that’s change the display name from Paint to Monet. So, back in the Cloud Shell, we’ll do this through PowerShell as well, and the verb this time will be Update and the noun is AzWVDApplication. We’ll reference our resource group and the group name of Monet, the name of Paint, and give it a friendly name of Monet. We’ll copy and paste that code and then back in the portal, we see the display name changed to Monet.</p>
<h1 id="Automation-ARM-Templates-Demo"><a href="#Automation-ARM-Templates-Demo" class="headerlink" title="Automation ARM Templates Demo"></a>Automation ARM Templates Demo</h1><p>Let’s shift our automation discussion now to ARM template deployments. This is my public GitHub repository, and this code has been used by hundreds of my customers to deploy their AVD solutions or as a starting point to customize their own deployments. If you scroll down to the bottom, you’ll see that there are three different ‘Deploy to Azure’ buttons. Each one of these will pull from a different template in the repo to deploy Windows 11 solutions, Windows 10, or specialized deployment for stateless AVD solution using ephemeral disk. Let’s click the ‘Windows 11 Deployment’ button. This opens the Azure portal’s custom deployment screen and you could just fill out the form and start your build. </p>
<p>But first, click here to edit the template. Now, remember I said earlier that a session host is a standard Azure virtual machine that has agents added to it. So, this template is a standard VM build that will leverage VM extensions to add the agent. And let’s walk through it quickly. Along the left, we have the different sections of the template and those are also represented on the right. The parameters are the inputs that you saw on that form on the last screen. The variable section can take those parameters and also provide other values before passing them off to the resources section. And it’s the resource section that contains the things that you’re going to build. </p>
<p>Let me point out just two parameters for you: the OperatingSystem and VMSize. Now, the OS parameter has a default value of Windows 11 and only one allowed value, because this is the Windows 11 template. The VMSize, however, has multiple allowed values. But notice, they’re not normal VM sizes. We have just small, medium, and large. This is because I like to keep my template inputs very clean and simple. This way, anyone can deploy them without asking too many questions. If we look down at the variables section and we look at VM sizes, we can see those same items of small, medium, and large. And those correspond to specific VM skews. Down in the resource section, if we take a look at our VM properties in the hardware profile area, this is where the VM sizes are needed. And the way this reads is grab the variable called VM_SIZE using the input of the parameter for VMSize and put the value here. </p>
<p>So, if you selected small as your parameter, the value would be Standard_B2ms. Let’s move on to the last section where the magic really happens. This is a VM’s custom script extension. It allows you to run PowerShell on Windows VMs remotely. The PowerShell code we’re executing is pulled from a variable here called firstFileName, and it’s also using some arguments. Those arguments are listed here on line 107, and they come from two input parameters: ProfilePath, which relates to the share you’re using for FSLogix, and the RegistrationToken, which is going to be used to add our VMs to the host pool. The script we’re executing is found here on line 102. This code is linked also in my public GitHub and if we open it, we have a parameters block here at the top for ProfilePath and RegistrationToken, and this code is going to do many different things. It will create a temp Directory to store the agents we’re going to download, and then it’s going to extract those agents from their zip. </p>
<p>It’s going to discover which Operating System you have, so it installs things properly. Then it will install the agents with the registration key, then perform the FSLogix agent installation, and it’s going to configure the standard FSLogix best practices. Once all of that is complete, it’s going to reboot the VM. And now that you know how all this process works, let’s build some hosts. Back in the form, I’ve filled out everything already, starting with the subscription and resource group at the top and the East US region, just like we’ve done throughout this course. The prefix this time will be Personal. This will be leveraging Active Directory join and the admin username is also going to be leveraged for the domain join process. </p>
<p>So, I’ve added the appropriate credentials. Scroll down. You need to enter your Active Directory Domain’s FQDN, then specify how many session hosts you want to build. I did also set a template hard limit for 100 VMs, but you could adjust that to suit your needs. The only Operating System that’s available in this template is Windows 11. The size will be small, which you know from looking at the code is a B2ms skew. Then you specify your virtual network’s resource group, the name of the VNET, and the subnet you want to build on. And now we have those custom script extension input parameters. For the ProfilePath, I’ll use the SMB share for my FSLogix profiles and the RegistrationToken that I grabbed from the host pool earlier. Click the ‘Review and Create,’ and you can read through all of the details, and then click the ‘Create’ button. Once complete, you can have a look at your host pool and we see that we have a single personal VM registered.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>That’ll do it for this course, we’ve covered Azure Virtual Desktops, host pools, and session hosts. We built and managed them using the portal and multiple automation methods, and we also touched on our monitoring of our new resources. And of course, we’ve just scratched the surface on what’s possible, so test things for yourself and practice your automation because there will be a test. Please respond to the survey at the end of this course and let me know how I did, and your feedback is more than welcome, so I can improve. And please don’t forget to direct message me on social media and let me know that you are now AVD certified. Thanks for joining me for this course, and happy learning.</p>
<p><strong>Configure Host Pool Demo</strong></p>
<p><a href="https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/rdp-files?context=/azure/virtual-desktop/context/context">Supported Remote Desktop RDP File Settings</a></p>
<p><strong>Autoscale Host Pool Demo</strong></p>
<p><a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/autoscale-scaling-plan">Create an Autoscale Scaling Plan for AVD</a></p>
<p><strong>Automation ARM Templates Demo</strong></p>
<p><a href="https://github.com/DeanCefola/Azure-WVD/tree/master/WVDTemplates/WVD-NewHost">Github Repository</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Knowledge-Check-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-21</title>
    <url>/2022/11/13/AZ-140-Knowledge-Check-Configuring-User-Experience-Settings-in-Azure-Virtual-Desktop-21/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ140-Knowledge-Check:Designing-an-Azure-Virtual-Desktop-Architecture-2</title>
    <url>/2022/11/13/AZ-140-Knowledge-Check-Designing-an-Azure-Virtual-Desktop-Architecture-2/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Implementing-Networking-for-Azure-Virtual-Desktop-6</title>
    <url>/2022/11/13/AZ-140-Implementing-Networking-for-Azure-Virtual-Desktop-6/</url>
    <content><![CDATA[<h1 id="Azure-Virtual-Desktop-Networking-Planning-amp-Implementation-Introduction"><a href="#Azure-Virtual-Desktop-Networking-Planning-amp-Implementation-Introduction" class="headerlink" title="Azure Virtual Desktop Networking Planning &amp; Implementation - Introduction"></a>Azure Virtual Desktop Networking Planning &amp; Implementation - Introduction</h1><p>Thanks for joining this course on Azure Virtual Desktops Network Architecture. As you’re prepping for the Azure Virtual Desktop Certification or just brushing up on your skills, you will learn how to craft the best network solution for your environment. My name is Dean Cefola, and I’ve been in the IT industry for over 20 years. Today, I’m an Azure Principal Engineer at Microsoft and I’ve been working with Azure Virtual Desktop since before the beginning. I hope that you’ll find this course entertaining and educational so please rate this course when you’re done and let me know how I did.</p>
<p>Who should attend this course? Well, anyone who’s planning on taking the Azure Virtual Desktop Specialty exam and anyone who’s interested in learning more on how to properly deploy an AVD environment. Speaking of this course, we’ll cover the AVD Networking Requirements, implementing your Azure virtual network solutions. We’ll talk about your Hybrid connectivity options to the internet and your on-premises networks. We will implement and manage network security, which will also cover the Azure Bastion service so you can manage your AVD session hosts, and we’ll talk about monitoring and troubleshooting your network connectivity.</p>
<p>To get the most out of this course, you should have an administrator-level understanding of Azure Cloud Services of Networking, Network Security, and Network Monitoring. Feedback is how we can all continue to improve. So if you have any feedback, positive or negative, you can let me know by rating this course at the end, as well as contacting us directly at <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>One last thing before we get started. Everything I’ll be showing in this course is up to date at the time of filming. However, the cloud does change over time. So if you find this material becomes out of date, please let us know at <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> so we can keep things updated. With all that out of the way, let’s get started.</p>
<h1 id="Network-Connectivity"><a href="#Network-Connectivity" class="headerlink" title="Network Connectivity"></a>Network Connectivity</h1><p>There’s a lot that goes into a network for any application, but with a virtual desktop there’s a lot of details to think through, so let’s take this one step at a time. The key to setting up the best network solution for a service like Azure Virtual Desktop is to remember that the laws of physics don’t change. You should always keep all of your resources as close to each other as possible. This keeps latency as low as possible. Also, the shortest distance between any two points is a straight line. So the fewest number of hops in your connections will be the most performant ones.</p>
<p>In Azure Virtual Desktop, connectivity is established using something called reverse connect. This allows your AVD clients to connect over the public internet to the AVD service securely using TCP port 443, without the need of public IP addresses. This starts with your client authenticating to Azure Active Directory, which means you get to use all of the benefits of Azure AD Authentication, like named locations, conditional access, and multifactor authentication.</p>
<p>Once your sign-in is complete, you’ll receive an Azure AD authentication token. Now that you’re authenticated, the token will pass to the AVD service web access role, which will then present to you with a list of remote applications and desktops that you’ve been allowed to use. When you click on one of those icons to open that app or desktop, your token will be presented to the AVD gateway, which will make a certificate for you. And this’ll be installed onto your client. The gateway service will also contact your AVD host pool and find a session host that is currently available. The gateway will then start a new outbound session from the session host back through the gateway to your client. With the connectivity finally established, you will log onto your Windows session, launching your remote application or desktop and you can get to work. So that’s how Azure Virtual Desktop works. What about the clients?</p>
<h1 id="AVD-Client-Connectivity"><a href="#AVD-Client-Connectivity" class="headerlink" title="AVD Client Connectivity"></a>AVD Client Connectivity</h1><p>Clients connect to AVD in two basic ways. First, is from the public internet. The second is from a Hybrid network. Now, if you’re okay with your users connecting over the public internet, and all of your supported services are in Azure, then you may not need Hybrid connectivity at all. The Hybrid Option is where you can connect to your existing corporate resources on-prem or over a private connection to Azure. To implement this, you need an Azure Virtual Network Gateway.</p>
<p>This gateway can only be deployed into your virtual networks Gateway Subnet, which I’ll show you how to set up in a moment. Now, the Hybrid Option breaks down further into these following options. First is an Azure ExpressRoute. This is a private direct connection between your company, the provider of your choice, and Microsoft. This is the highest bandwidth and best performance solution you can have, but it is also the highest cost.</p>
<p>Next is a Site-to-Site VPN. If you have your domain controllers or other resources on-site that your AVD users will still need access to, then you will need a Site-to-Site VPN. As the name implies, this VPN connects multiple corporate locations together so they can share resources. This VPN comes in many levels of performance, so check the Azure documentation so you can have all the information to make the right decisions.</p>
<p>Finally, there is a client VPN, also known as a Point-to-Site VPN. If you want to require your AVD clients to connect to a VPN before they can get to AVD, then you will want to have a Point-to-Site VPN. If this is the case for you, you will also need to leverage Azure Active Directory Conditional Access rules to deny connectivity from IP address ranges that are not in your corporate networks connecting to Azure Virtual Desktop.</p>
<p>There is one more way to get connected to Azure Virtual Desktop, and that’s using something called RDP Shortpath. If you remember back to the Reverse Connect model, once you connected to the AVD Gateway service, the Gateway would have a session host make an outbound connection to you over the public internet. RDP Shortpath changes how that connection is made.</p>
<p>As you can see in the picture on the right, there is a new connection line at the top. The client is allowed to connect directly to the session host over the Hybrid network connection. There’s also a change in protocol. Reverse Connect uses TCP port 443, but RDP Shortpath uses the UDP protocol on port 3390. The reason for this? UDP as a protocol is much more efficient than TCP. There are less handshakes, less retries, and it is specifically more efficient for this kind of traffic that we use in Azure Virtual Desktop.</p>
<h1 id="Network-Guidelines"><a href="#Network-Guidelines" class="headerlink" title="Network Guidelines"></a>Network Guidelines</h1><p>Since latency is the enemy of good performance, we want to keep our latency as low as possible. The way that you can check your latency from your clients to AVD is with the Azure virtual desktop experience estimator. This web page will show you the roundtrip time in milliseconds from where your client is located to all the different Azure regions. The recommended guidance is to keep your latency under 120 milliseconds.</p>
<p>The second thing that will impact your performance is what your users are doing. Here’s an Azure doc that give bandwidth estimates for different AVD workloads of light, medium, heavy, and power user. Now, what exactly do those workload types mean? Well, you see here, there’s a link here that will take you to a different section of the docs which explains what those are.</p>
<p>A medium workload will use database entry applications, Word, static web pages, whereas a power user would be doing all of that plus things like Adobe Photoshop, Illustrator or CAD design. Notice as well that each workload type has a recommended bandwidth and that’s really the key, even more so than the individual applications.</p>
<p>Finally, there’s a great doc for RDP bandwidth requirements showing the estimated bandwidth used by remote graphics. In this table at the bottom you see a idle full desktop uses about 0.3 kilobits per second. Down at the bottom of the list, we can see playing back a full screen video at 3.1 megabits per second using an H.264 encoder. And if you really need to establish some tight levels of controls, here at the bottom of the page there’s a way to use quality of service, or QoS, to shape your traffic and set up throttle rate limits using PowerShell.</p>
<h1 id="AVD-Network-Implementation"><a href="#AVD-Network-Implementation" class="headerlink" title="AVD Network Implementation"></a>AVD Network Implementation</h1><p>Now that you’ve got the basic concepts, let’s build our network in Azure. Then we’ll set up our supporting services like our gateway and DNS. And then we’ll set up security to allow connectivity to Azure Virtual Desktop. In the Azure portal, click the plus to create a resource and in the search box type network. Select the first option of virtual network and click create.</p>
<p>Every resource in Azure needs to be in a subscription and a resource group. So, select your subscription and let’s click to create a new resource group. Now, there are several strategies for how to name and locate your resources in Azure, but to keep things simple today, we’re going to build one resource group for our networks and we’ll call it RG-AVD-Network. This way, when you’re looking at your resources, you’ll know that this is a resource group for Azure Virtual Desktop that contains network resources.</p>
<p>Now we need a name for our virtual network. So, sticking with our naming convention, we’ll call this VNET-AVD. Azure resources need to reside in an Azure region and since we need to keep all of our resources as close together as possible, I suggest that you build this network in a region located closest to you, and I’ll pick the East US. Click next. This is where you set up your address space. This is the number of total IP addresses in your network. By default, you’ve been given a &#x2F;16 network, which means that you have over 65,000 IP addresses.</p>
<p>Now, one of the beauties of how Azure does this, is called software defined networking. You and I can both create a 10.0&#x2F;16 network. Even though we have the exact same address spaces we don’t overlap and the networks can’t communicate together because we’re two different users in two different environments of Azure. Things are different when connecting this virtual network to another virtual network in your subscription or to your on-premise networks.</p>
<p>Once this virtual network is connected to any other network, they must all have unique addresses. So, if we have a 10.0&#x2F;16 network in Azure, you cannot have a 10.0&#x2F;16 network on-premise that connects to Azure. All of these 65,000 IP addresses become usable in the bottom section where you create subnets. A subnet is where we divide those 65,000 addresses into different blocks and we will need a few of those.</p>
<p>Now, there are three special subnets in Azure that need specific names. The GatewaySubnet, this will contain the Azure Virtual Network gateway resources, which are required for setting up a VPN or express route connection. AzureFirewallSubnet, this is required for you to set up an Azure firewall for security. AzureBastionSubnet, this service will allow you to connect to your Azure virtual machine resources and manage them.</p>
<p>The first subnet has been created for you with a 10.0&#x2F;24 which makes up 256 addresses. Select it by clicking the word default. Rename this subnet to GatewaySubnet and you can leave the other settings alone and click save at the bottom. Click to add a new subnet and we’ll call this one AzureFirewallSubnet. For the subnet address range, we’ll use the next available range, which is 10.0.1.0&#x2F;24. Click add at the bottom.</p>
<p>Just two more. This one will be called Identity, and it’s going to be for your active directory domain controllers that you’ll build later. This address range will be 10.0.3.0&#x2F;24. Of course, if you’re planning on using only Azure AD Join you won’t be needing domain controllers so you might skip the Identity subnet in the future. However, you will need this next subnet for your Azure Virtual Desktop session hosts. So let’s call it AVD. If you said the address range should be 10.0.4.0&#x2F;24 you get the gold star.</p>
<p>Now, why didn’t we use the 2.0 address range? Click next and I’ll explain. In the security tab, we have three options. BastionHost, DDoS protection, and the Azure firewall. Bastion turns the Azure portal into a jump host where you can literally open a RDP or shell session to your virtual machines inside your browser and this is a requirement for the AVD exam. DDos Basic is included in Azure by default. The standard version of the service enables DDoS specifically on your virtual network.</p>
<p>In the case of virtual desktop, I generally would not use this. The reason why is, we’re going to secure our networks in such a way, that the only way in, is through either Bastion or Azure Virtual Desktop. Then we have the Azure firewall. This is a great service to secure your virtual network and is something worth knowing. However, since it’s not specifically required for the Azure Virtual Desktop certification, and it’s a resource that runs all the time, so it will burn through any of your Azure credits, we’re going to skip it for now and use network security groups instead, which are free resources. Click to enable BastionHost. We need to provide a name and a subnet range as well as a public IP address for Bastion to use. We’ll call it Bastion-AVD and the subnet range we’ll use, you guessed it, 10.0.2.0&#x2F;24. If we had set up the subnet in our last step with the 2.0 range, in here we would have gotten an error saying that the subnet range was already in use.</p>
<p>Click to create a new public IP address. Let’s call it Bastion-AVD-PIP. As you see, the naming of all of our resources like this, helps you to keep track of what services are as well as what they’re related to. Click next. Here’s where you can add your tags. Tags are metadata that you can attach to your resources. And the purpose of tags is not only to keep track of things like owners and cost centers, but you can also use them for automation. For example, find all of my virtual machines that have a tag of AVD and another tag of January, so I can decommission them when I deploy my updated session hosts from my updated image.</p>
<p>Now, a tag has a name and a value. These can literally be anything. So, you should work within your organization to come up with the set of tags and values that have meaning for you so you can get the most out of them. The tags I generally use are, application, cost center, environment, maintenance window, owner, and support contact. Click the review and create button to provision your resources.</p>
<h1 id="Configuring-Your-Virtual-Network-Demo"><a href="#Configuring-Your-Virtual-Network-Demo" class="headerlink" title="Configuring Your Virtual Network Demo"></a>Configuring Your Virtual Network Demo</h1><p>Now that we’ve created our virtual network, we need to do some configuration. Select VNET-AVD, on the left blade, select DNS Servers. The default option is to use Azure provided DNS. This is referring to the default DNS IP for Azure of 168.63.129.16. For many workloads this would be just fine, and if you’re planning on only using Azure AD Join VMs, you can stick with the default. However, since AVD relies on Active Directory DNS today, you will need to change this to custom and enter the IP addresses of your Active Directory DNS servers. I will have two of these located in Azure in the identity sub-net that we created earlier. So their IP addresses would be 10.0.3.4 and 10.0.3.5 respectively. I will also add the Azure default as my last DNS address. This way if my DNS servers can’t resolve something, it’ll be forwarded to Azure DNS. If your DNS servers are on premise, you can add those here as well. But before there’ll be able to work, you’ll need hybrid connectivity.</p>
<h1 id="AVD-Network-Security"><a href="#AVD-Network-Security" class="headerlink" title="AVD Network Security"></a>AVD Network Security</h1><p>Security can take the form of permissions as well as controlling ingress and egress of your traffic. In Azure, this requires either network security groups or some kind of firewall. If you want to use the Azure firewall, then it must be deployed into your virtual network’s subnet. If you are using a third-party firewall, there is no such requirement; I would still deploy it there to keep things isolated and identifiable unless the vendor specifically says to do otherwise.</p>
<p>In this deployment, we’ll only deal with network security groups or NSGs. The NSG works on a five-tuple rule set; this means that it will be looking at the source IP, destination IP, source port, destination port and protocol. For example, your AVD users will log onto their session host and need to load their FSLogix profile. The session host, which has a source IP address of 10.0.4.10 will need to connect to your Azure file’s storage that has a destination IP of 10.0.5.50. This connection will have a source and destination port of 445, which is the SMB port and the protocol is TCP.</p>
<p>Now you’ll have to make a rule in the NSG to allow this traffic to flow. In the same resource group you just deployed your virtual network, click to add a new resource at the top, in the search box type, “network security group”. The subscription and resource group should already be selected for you; if not, select the same ones that you used to deploy your virtual network.</p>
<p>Our NSG needs a name and a region, so I will use “NSG-AVD” and select the East US. Click next, add your tags, and I’ll just use the same tags we used for our virtual network earlier so we can identify all of our resources together, and then click the review and create button to complete the build.</p>
<p>Now that the NSG is built, we need to make some rules. It’s the rules that will control the flow of traffic into or out of your subnets. So the rules should be subnet specific, which means that the rules for your AVD subnet will look different than your identity subnet; for example, you’ll have active directory rules that need to be allowed between them.</p>
<p>Your identity inbound rules should have whatever the outbound rules from your AVD subnet are so that the rules can match. On the left, start with outbound rules. There are five rules that we need to allow Azure virtual desktop to work, and you can find those in the AVD documentation. We need to allow port 443 outbound to the Azure virtual desktop service, as well as to the Azure cloud service. Then we will need port 1688, to Azure KMS, which is required for the multi-session activation. Then we will need two specific source IPs on port 80 for health monitoring.</p>
<p>Back in our NSG outbound rules, click add at the top, set your source as virtual network; the source port range should be asterisk, destination should be a service tag, destination service tag should be windows virtual desktop, and note that this may be changed to Azure virtual desktop in the future. The service can stay as custom, destination port range should be 443 and the protocol should be TCP, your action should be to allow and now we have the priority. You can start as low as 100 and as high as 4,096; the lower the number, the higher the priority.</p>
<p>Since there might be other rules in the future that may need a higher priority than this rule, I always like to start at 1,000. Then I will create the rules in the increments of 10, just in case I need to squeeze rules in between later on. Give your rule a name and click add, repeat this for the Azure cloud service exactly like we just did, and then these last three rules will be slightly different.</p>
<p>First, let’s deal with the Azure KMS rule; if you do a quick internet search for Azure KMS, you will find this doc showing the different instances of the Azure KMS or different Azure clouds. The one that we want for this course is the Azure global address. Copy the IP address and let’s start a new NSG rule. The destination will be IP address, paste in the KMS IP that you got, the port will be 1688 and the protocol is TCP. The rule should be allowed, give your rule a name and click add. Repeat this for the last two rules using port 80, and it should all look like this. Those are the only rules needed for Azure virtual desktop to work, you will need other rules in the future for active directory communication, as well as rules to Azure storage and whatever other services you need in your environment.</p>
<p>Let’s take a look now at the inbound security rules, click to add a new rule at the top. On the right, your source will be an IP address; use your bastion subnet of 10.0.2.0&#x2F;24. Source port range will be asterisk, destination is virtual network. For the service you’ll want to use RDP, this will automatically select port 3390 and the TCP protocol for you. The action should be allowed, and since this is the first rule on the inbound side, we’ll use 1,000. We’ll name this “the bastion rule” and click add. Once you have finished adding all of your rules, click the subnets on the left, click associate at the top, select the VNET-AVD network. In the subnets box, select AVD, and that’s it. Your rules are now associated with the AVD subnet, and these will apply to all of the VMs you put in that subnet.</p>
<h1 id="Monitoring-amp-Troubleshooting-Demo"><a href="#Monitoring-amp-Troubleshooting-Demo" class="headerlink" title="Monitoring &amp; Troubleshooting Demo"></a>Monitoring &amp; Troubleshooting Demo</h1><p>The final section in this course on AVD networking, we’ll talk about monitoring and troubleshooting connectivity. When it comes to network monitoring, there are two services that you need to set up. In the search bar at the top of the screen, type monitor. Select the first match, and this is the Azure Monitor Service. Scroll down on the blade on the left, and you’ll want to click on Diagnostic settings. Use the filters at the top to select the appropriate subscription and resource group where all of our networking assets are located and then it should look something like this. It currently says disabled for all of these diagnostic settings, and that means that nothing is actively being monitored.</p>
<p>Before we can fix this, we need a place to store all of these diagnostic logs. On the top left click the + button, and on the left near the bottom select Monitoring and Diagnostics. Select the 2nd item from the top, Log Analytics Workspace. Select the same subscription and resource group that we’ve used throughout this course, and I will name the workspace Logs-Networking-AVD, and located in the East US region. Click Next, and add all of your tags, and then click Review and Create.</p>
<p>Once that’s complete, go back to the Azure Monitor, select Diagnostic settings on the bottom left again, and click on your first item. Then in the middle of the screen, click to add Diagnostic settings. The experience is the same here, no matter what the resource type is. Give the diagnostic a name. So in this case, it would be Log-AVD-Bastion. For the categories, these will be resource-specific. But I always recommend selecting all of the categories and metrics.</p>
<p>Now we need a destination for our logs. I’ll select the first box for a Log Analytics Workspace, then select the workspace we just created. Click Save at the top, and logging on Bastion is now enabled. Repeat these steps on all of the other resources and it should look like this.</p>
<p>The second component of network monitoring uses the Azure Network Watcher. In the search box at the top of the screen, type network watcher. Azure Network Watcher is not a virtual desktop-specific tool, but focuses on the infrastructure side of your resources, like your network cards of your AVD session hosts as well as the virtual networks, gateways, and firewalls. Most tools inside Network Watcher require you to have VMs that are online for it to examine. And since we haven’t deployed any VMs in this course, we will be somewhat limited in what I can show you, but there’s still enough here to talk through everything you need.</p>
<p>So the first thing on the left is your topology and this will show the layout of your network resources. Just filter down to the correct subscription and resource group, where your network assets are located, and you should see something like this, showing your virtual networks, subnets, NSGs, and route tables. This’ll definitely help you know that you’ve got all the right connectivity in place.</p>
<p>The next tool we’ll look at is IP Flow Verify. This is an on-demand tool that will verify if traffic would be allowed to flow inbound or outbound from a VM in Azure. Again, we haven’t specifically set up any VMs in this course, so I’ll show an example from another project I’ve been working on. You select your subscription resource group and the name of a VM, and then select the network interface of that VM.</p>
<p>Next, we select the protocol and direction that you want to test. This will populate the local IP address for you, and now select the local port you want to test, and I’ll choose 3389, then a remote IP. This IP can be in Azure or a public IP anywhere in the world. Select a port for this as well, and you would click the Check button at the bottom. In a few seconds, Azure will check which security rule will allow or deny this traffic. The other tools on the left have a different spin on connectivity troubleshooting like NSG diagnostics, Next Hop, which is helpful, if you have a hub and spoke topology or a firewall will let you know that everything is going the way that it should. The VPN troubleshooter, which will verify your gateway and connections are functioning properly to your on-prem and along with that, the NSG flow logs, which will give you even greater details than the diagnostic laws we set up earlier.</p>
<h1 id="Azure-Virtual-Desktop-Networking-Planning-amp-Implementation-Conclusion"><a href="#Azure-Virtual-Desktop-Networking-Planning-amp-Implementation-Conclusion" class="headerlink" title="Azure Virtual Desktop Networking Planning &amp; Implementation - Conclusion"></a>Azure Virtual Desktop Networking Planning &amp; Implementation - Conclusion</h1><p>We’ve covered all of the AVD network requirements, built a virtual network in Azure with the proper subnets to support AVD. We’ve talked about our network security with our NSG rules, and then we covered your connectivity options, like Reverse Connect and RDPShortpath, along with your Hybrid options. Finally, we went through the monitoring and troubleshooting of your network solution. Please respond to the survey at the end and let me know how I did in this course, and your feedback is definitely welcomed, so I can improve. And please direct message me on social media, and let me know that you are now AVD certified. Thanks for joining me for this course and happy learning.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Implementing-Storage-for-Azure-Virtual-Desktop-8</title>
    <url>/2022/11/13/AZ-140-Implementing-Storage-for-Azure-Virtual-Desktop-8/</url>
    <content><![CDATA[<h1 id="Azure-Virtual-Desktop-Storage-Solutions-Introduction"><a href="#Azure-Virtual-Desktop-Storage-Solutions-Introduction" class="headerlink" title="Azure Virtual Desktop Storage Solutions - Introduction"></a>Azure Virtual Desktop Storage Solutions - Introduction</h1><p>Thanks for joining this course on Azure Virtual Desktops Storage Solutions. No matter if you’re prepping for the AVD certification or just want to brush up on your skills, you’ll learn how to select the optimal storage solutions for your AVD environments, control your costs, and protect your AVD environments with Backups, HA, and DR. My name is Dean Cefola and I’ve been in the IT industry for over 20 years. Today I’m an Azure Principal Engineer at Microsoft and I’ve been working with Azure Virtual Desktop since before the beginning. I hope that you’ll find this course entertaining and educational, so please rate this course when you’re done and let me know how I did.</p>
<p>Who should attend this course? Well, it’s anybody who’s interested in learning how Azure Virtual Desktop works and those studying for the AVD Specialty exam. Through this course, I’ll help you to understand Azure Virtual Desktop Storage requirements and then we’ll talk through those storage solutions so you can select the right one for your environment. We’ll talk through Azure Virtual Machine disk performance and capacity, we’ll touch on high availability and disaster recovery, and then we’ll configure a storage solution for FSLogix. And we’ll finish up by creating, configuring, protecting, and authorizing your FSLogix file shares.</p>
<p>Now, you’ll get the most out of this course if you already have an administrator-level understanding of Azure Cloud Storage Services, an understanding of storage capacity and performance, Azure Protection Services for Backup, High Availability, Disaster Recovery, PowerShell and automation skills, and, of course, Azure Virtual Desktop and FSLogix.</p>
<p>Feedback is how we can all improve and if you have any feedback regarding this course, please contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. One last thing before we get started, everything I’m taking you through and showing you at the time of filming, this course is up to date, but the cloud changes over time. So if you find anything becomes out of date, please let us know at <a href="mailto:&#x73;&#117;&#x70;&#112;&#x6f;&#x72;&#116;&#64;&#x63;&#x6c;&#x6f;&#x75;&#100;&#x61;&#99;&#x61;&#x64;&#x65;&#109;&#x79;&#46;&#x63;&#x6f;&#x6d;">&#x73;&#117;&#x70;&#112;&#x6f;&#x72;&#116;&#64;&#x63;&#x6c;&#x6f;&#x75;&#100;&#x61;&#99;&#x61;&#x64;&#x65;&#109;&#x79;&#46;&#x63;&#x6f;&#x6d;</a> so we can fix it. All right, let’s dive into AVD Storage Solutions.</p>
<h1 id="AVD-Storage-Requirements"><a href="#AVD-Storage-Requirements" class="headerlink" title="AVD Storage Requirements"></a>AVD Storage Requirements</h1><p>The storage side of Azure Virtual Desktop comes in two main forms, Virtual Machine Disk resources, and FSLogix profile storage. FSLogix is a profile management solution that enhances and enables user profiles in Windows remote computing environments. For this discussion, FSLogix has two solutions that we need to discuss, user profiles and Office profiles. These profiles are stored on an SMB file share and mounted on demand to the AVD session hosts when a user logs in.</p>
<p>Inside Windows, a virtual hard drive file containing the user profile gets mounted without getting a drive letter, and the user’s folder appears in the C:\ user’s location, like all the other profiles, so it appears to windows as if the profile is local. The main benefit of this is that the user profile doesn’t have to do any gymnastics like you would have to with roaming profiles or streaming profiles, so performance is not impacted at all. The profile will also be able to travel from machine to machine with the user, which means that the session host does not retain any of the user’s data and no longer needs to be backed up and protected. However, the file share that contains the data must be backed up and thought about in your disaster recovery solutions, which will be discussed in another course.</p>
<p>User profiles contain all of your data. It’s the things that are on your desktop or your wallpaper, documents, pictures, music, et cetera. It also contains those things that are in your user’s app data folder and some other systems stuff. Think of it as all the data that you would cry over if you lost it. This means that the user profile should be backed up and protected during disaster recovery.</p>
<p>Now, to understand the Office profile, we need to step back out of the cloud and back to the on-premises days. Back in the day we all had other solutions like Exchange and SharePoint and things like that on-prem, latency, generally, wasn’t a big issue ‘cause you were on the same network as those servers. As mobile computing became a thing caching was introduced to offset the latency users in the field would experience. Then Microsoft started building out their Office 365 online services like Exchange Online and SharePoint Online. And this took those bulky multi-server infrastructure solutions that you had to manage yourself and centralized those into cloud services that you can just consume. But since latency is the enemy of good performance in those latency-sensitive environments, this caused the on-premise VDI users some performance issues.</p>
<p>Then along came FSLogix. They set up an Office profile to function as a cache for those Office Online services to give VDI users better performance. Since the Office profile only contains cached data, it doesn’t need to be backed up or protected in a DR. If all of it was lost the profile would just re-cache it from the Office 365 services. Now I know that sounds great but in Azure Virtual Desktop it’s recommended to only use the User profile. This is because AVD is sitting in the cloud right next to the Office 365 services, so latency is not an issue and caching is not needed. Another reason is that the Office profile cache data is contained in the user profile already. You can of course still use the Office profile if your situation specifically calls for it, however, just going with the user profile will minimize your complexity and simplify your storage solution, which is always a good thing.</p>
<h1 id="Azure-Disk-Requirements"><a href="#Azure-Disk-Requirements" class="headerlink" title="Azure Disk Requirements"></a>Azure Disk Requirements</h1><p>When it comes to disks, things may seem straightforward, but there are a few things that can trip you up. First, we need to understand how Azure Virtual Desktop works. The last part of the AVD sign-in process is a Windows login. This is the same function that happens when you log onto your desktop or laptop. Your user is authenticated, and your Windows profile is loaded, and you’re dropped onto your desktop. You also need to understand that we have two different kinds of host pools in AVD, Personal and Pooled.</p>
<p>In a Personal Host Pool, you will have a mapping of one user to one Session Host VM. In a Pooled Host Pool, you will have many users logging onto each Session Host VM. In Personal Host Pools, it’s generally not recommended to use FSLogix. However, FSLogix is almost always needed in a Pooled Host Pool. We’ll cover more about this in a minute. Let’s think about these two host pool scenarios with Virtual Machine Disks.</p>
<p>In both cases, the systems performance will be limited by the characteristics of your disks. The main disk characteristics are: capacity, throughput, and input&#x2F;output operations per second, or IOPS, for short. There are several disk types in Azure to choose from, ranging from Hard Disk Drives to Standard SSDs, Premium SSDs, and Ultra SSDs, with Hard Disk Drives being the lowest cost per gigabyte storage, but also having the lowest performance. In a Personal Host Pool, you have one user logging onto one VM Session Host. That doesn’t automatically mean that you should give them a Hard Drive.</p>
<p>All performance in AVD comes down to what the users are doing and the requirements for them to do it. If you don’t know the storage throughput and IOPS requirements for your users to run their applications, I generally start with a Standard SSD for Personal Host Pools and a Premium SSD for Pooled Host Pools. Do some real world testing with different users running their applications and see how they feel about it. If everything looks good, you’ve hit the sweet spot. If it isn’t just right, we have some options.</p>
<p>In Azure, the SSD IOPS are based on the size of the disk. The larger the disk, the more IOPS. If your disk performance is slow, the first thing you should think to try is to make your disk larger. This is generally preferred instead of adding more disks to the system because multiple disks will generally have higher cost than a single larger disk. This would also mean that you have more things to manage and protect.</p>
<p>As for Pooled Host Pools, your User Profiles will be using FSLogix, but Disks are important to think through. FSLogix user and office profiles can be configured in one or two ways, and that is to use VHD Locations, which write data directly to your File Share or Cloud Cache. This is where data writes will take place locally on the C:\ drive.</p>
<p>We will go into depth more in a follow-up course so we won’t deal with it further here. But since pooled host pools have multiple users logging onto them at the same time, we must have enough disk performance and capacity for all of them simultaneously, as well as in that Cloud Cache configuration, there will be more intense writes happening on the C:\ drive so you may need a larger disk. This is why I also always recommend starting with a Premium SSD for your Pooled OS Disks.</p>
<h1 id="FSLogix-Storage-Solutions"><a href="#FSLogix-Storage-Solutions" class="headerlink" title="FSLogix Storage Solutions"></a>FSLogix Storage Solutions</h1><p>There are three supported storage solutions for FSLogix in Azure Virtual Desktop, Azure Files, Azure NetApp Files, and a Windows Storage Spaces Direct File Server Cluster. There are many reasons for choosing one particular solution over another, but I could best sum it up this way. Storage Spaces Direct is a self-managed storage solution built on top of a Windows File Server Cluster. It needs a minimum of two Azure virtual machines to function. Each Server in the cluster will also need to have multiple high-performance disks and to make the cluster work, you will need Azure blob storage as a cloud witness.</p>
<p>Now managing your own server for this kind of thing means that you will have more control over the VM size, disk configuration, security, and cost, however, it’s not as scalable as the other solutions and troubleshooting is all on you. So, if you’ve never managed a storage spaces direct cluster before, I would not suggest that you start now. Especially because you can get more scale with less management out of the other cloud platform services.</p>
<p>Azure NetApp Files is a true first-party service in Azure. Its NetApp storage technology that is operated and supported by internal Microsoft personnel who are NetApp experts. Azure NetApp files is the highest performing storage solution in the cloud today. You can have 12.5 petabytes of storage per subscription with speeds up to 400,000 IOPS. ANF is also a special service in Azure that you must sign up to enable so we will not be using it as part of this course.</p>
<p>Azure files are built on top of Azure storage accounts and there are two performance tiers, standard and premium, both of which can support up to 100 terabytes per share. Standard File shares by default can have 1,000 IOPS per share but there’s a switch that you can enable called large file shares which will enable up to 10,000 IOPS. And notice I said, up to 10,000 IOPS.</p>
<p>Standard does not have guaranteed performance and performance is more volatile because standard storage is built on hard disk drives. Premium File Shares have a maximum of 100,000 IOPS. Premium does have guaranteed performance because it is built on SSDs. Premium also has a benefit that’s called SMB multi-channel. This is where you can increase the number of network connections between the File Share and your Session Hosts, and you can get more threads, which means more processing and more performance. Since Azure premium files is the recommended solution for production workloads that’s what we’ll be using today.</p>
<h1 id="FSLogix-Best-Practices"><a href="#FSLogix-Best-Practices" class="headerlink" title="FSLogix Best Practices"></a>FSLogix Best Practices</h1><p>Before we start building our storage solution, there are a few best practices to keep in mind. The first is that an Azure virtual desktop host pool is a collection of identical session hosts that are meant to contain a single workload. So, the best way to map your FSLogix file shares are in a one-to-one relationship, meaning each host pool should have their own FSLogix file share. This would isolate each workload from the others in your environment, so you won’t have to deal with the “noisy neighbor” syndrome. But another protection to think about is antivirus scanning.</p>
<p>Now, this might seem counter-intuitive, but the best practice here is to exclude all FSLogix file shares and virtual hard drives from your session host antivirus. The reason for this is that when a new disk or file share is mounted onto a system, Windows would attempt to scan those resources by default. If this happens then the session host processor will be bogged down hindering user performance and experience.</p>
<p>Now, the file share that contains user profiles should be scanned for viruses, but this should be done on a regular basis from another system like a management server, so you don’t impact the AVD environment. The way to implement this is to set antivirus exclusions on your session host. The details are in the Azure Docs, as shown here. </p>
<p>Now, how exactly you would implement this in your environment is going to depend on which antivirus solution you are using. If you’re using Microsoft Defender, this can be configured in your Group Policy settings. There’s another best practice to keep in mind when talking about your FSLogix file shares around capacity and performance. User profiles grow over time. One of the tricky things is that even if you delete files inside your profile, the profile disk itself never shrinks on its own.</p>
<p>In Azure Premium Files, the cost and performance of your file share is based on the size of the file share. The specific size of your file share should be determined based on how many users you have and the approximate size of all those users’ profiles. As I said before, Azure virtual desktop host pools are a collection of identical session hosts whose purpose is to be consumed by the users of a specific workload, for example, users in the accounting department or developers. Each one of those workloads is unique and therefore they should be on separate host pools and each of their host pools should be aligned with their own FSLogix file share for the same reason.</p>
<p>Here’s a quick example. There are 200 users in the accounting department. Each user needs a 10-gigabyte user profile. Just multiply 10 gigabytes by 200 users in that group and you should use a two-terabyte File Share. But wait, there’s more: each user profile will grow over time, which means we need to add some extra size for overhead while keeping in mind-controlling cost. I generally add an additional 20% to account for growth, so in this case I’d create a 2.5-terabyte file share and then would set up alerting through Azure monitor to keep an eye on capacity.</p>
<p>The last thing to think about in this section is performance. When a user profile is mounted to the system, this will consume approximately 50 IOPS of storage performance per user on your file share. After the user logon is complete, which takes about a minute or so depending on what startup sequences you have, you’ll have reached what we call steady state. In steady state, the user profile will consume roughly 10 IOPS of storage performance.</p>
<p>So, if we break out our slide rule once again, 200 users at 50 IOPS would equal 10,000 IOPS of storage performance if they all logged in at the same time. This is what we would call a logon storm, and it usually happens first thing in the morning. After the logon process is complete, your storage performance load will come down to roughly 2,000 IOPS</p>
<p>Even though this was an easy scenario, at larger scales you may need to increase the file share size well beyond your capacity needs to get the performance you require. But be aware, the larger the file share you create, the more expensive it will be. This is another reason why each host pool can have its own file share; it helps to control cost. </p>
<p>There’s another way to reduce cost of your FSLogix file share that I’ll just touch on, because it’s more well-suited to an in-depth course on FSLogix User Profiles. You can use this PowerShell script from the official FSLogix GitHub repo to delete the whitespace within your user profiles, which will shrink the virtual hard drives sizes and decrease the amount of total space you need on your file shares, which is where you can save cost.</p>
<p>So, let’s recap. We know in this example that we need at least a 2.5-terabyte capacity file share, and we also need a file share that can get up to 10,000 IOPS of burst performance and 2,000 IOPS of steady state performance. When we create our 2.5-terabyte Azure premium file share, this will give us the burst IO of 10,000 IOPS and the normal maximum IO of 5,500 IOPS. So, in this case, we know that a 2.5-terabyte share is the correct size. Then over time, when our profiles grow, we can use the FSLogix PowerShell script to shrink them, which will reduce the overall size requirements for our file share and could reduce our cost.</p>
<h1 id="FSLogix-Storage-Permissions"><a href="#FSLogix-Storage-Permissions" class="headerlink" title="FSLogix Storage Permissions"></a>FSLogix Storage Permissions</h1><p>Since the FSLogix user profiles are stored centrally on a SMB file share, we need to have the correct user permissions on that share so that users can access their own folders but not anyone else’s. Implementing this is slightly different based on which storage solution you’re working with. But the same thing may not be said of the windows NTFS file permissions. All users would need to be granted modify permissions at the share level. The creator owner permission would need to be set to modify for subfolders and files only. And optionally, the administrator would have full control over this folder, subfolders and files. This configuration allows users to create their own folders or their profiles on a file share and gives them the modify access over their own folders while not being able to access anyone else’s.</p>
<h1 id="Implementing-Storage-Demo"><a href="#Implementing-Storage-Demo" class="headerlink" title="Implementing Storage Demo"></a>Implementing Storage Demo</h1><p>Let’s provision a premium Azure storage account and create your FsLogix file share. In the Azure portal, I’ve already created a resource group called RG-AVD-Storage, to hold our storage account. Click the Create button at the top, and in the search box type, “storage account,” then click on the first item to create it. Like all resources in Azure, each storage account needs to reside in a subscription and a resource group, and those have already been selected here for us. I’ll call my storage account AVDstorage01, but be aware that this name won’t work for you, because all storage accounts must have globally unique names. As for the region, to keep latency as low as possible, the storage account should be located in the same region as your session host virtual machines.</p>
<p>Now, we haven’t created any VMs as part of this course, so I’ll locate the storage account in the East US, because that’s the one that nearest where I am. In the Performance section, we want to select Premium, and for our premium account type, select File Shares. The next section is on redundancy. Here we have two options today, LRS, which is locally redundant storage, and ZRS, which is zone redundant storage. To know which one is right for you, you need to understand how storage is protected in Azure. Every byte of data in the cloud is written three times on the backend of Azure, no matter if it’s a disk or a storage account, every scrap of data is written to three separate drives. This allows Microsoft to protect your data in the case of any one of those discs failing.</p>
<p>This is LRS. In the ZRS, we do the same concept as LRS, but those disks are in multiple Azure availability zones within the region. This is not really a disaster recovery solution per se, but a high availability solution. So the question for you to answer, is how much high availability do you need. In LRS, if something happened to the zone where your storage accounts have landed, the data may be unrecoverable, and you’d have to go to your disaster recovery solution. ZRS gives you a little more protection by spreading the load across the different availability zones within the region that you selected. In the case of premium files for FsLogix file share, I’m going to choose LRS, because we have some different options to protect the share, that we’ll get into in another course. Click, Next.</p>
<p>On the advanced screen, we can accept all of the default options and click Next. On the Networking screen, we have some choices. All Azure storage accounts, just like any other Azure PaaS solution, have multiple end points for you to communicate with. There are public end points, which are accessible from the internet, assuming you had a security token. Public end points for selected networks, is where we isolate access to the storage account to a virtual network in Azure. And finally, private end points. This is where a unique IP address within your virtual network is created, and assigned to the file share, so we can create network security rules to allow or deny traffic to it.</p>
<p>For today, we’ll use the selected network, public endpoint and isolate our storage account to our virtual network in Azure. But if your requirements call for least privilege access, then I would recommend the private end point option, which will use the Azure private link service. Now that we’ve selected that option, we have to pick the virtual network and sub-net that we want to grant access to. Let’s click Next, and look at our data protection.</p>
<p>Notice here that soft delete for seven days is recommended by default for your file shares. Soft delete allows any files that are deleted, to be retained in the storage account for direct recovery, without having to go to your backups. That’s definitely a convenient option, so we’ll leave that enabled, and click Next. Here’s where you can add your tags. Tags in Azure are metadata that you can assign to your resources that help you not only with organization, but you can also automate against them.</p>
<p>Your tagging strategy should be well thought out in advance, in a way that is most meaningful to your organization, so you don’t end up with random tags that nobody knows what to do with. These are the standard tags that I like to use: application, cost center, environment, owner, and support contact. These tags let me know, what application the storage account is related to, who’s going to be billed for it, whether this is for production or a lab environment, who is the owner of this resource, and how I can get in touch with them in case of a support issue. Click the Review and Create button to build your storage account.</p>
<h1 id="Configuring-FSLogix-File-Share-Demo"><a href="#Configuring-FSLogix-File-Share-Demo" class="headerlink" title="Configuring FSLogix File Share Demo"></a>Configuring FSLogix File Share Demo</h1><p>Now that our storage account is created, we need to do some configuring. First, we need to create a file share. In the data storage section of the blade on the left, select file shares. At the top click to create a file share. We need to name our file share and I’ll call mine F S Logics. Now we have to set our capacity. Notice that there is a table showing the maximum IO and burst IO and throughput rate. And as I change the provision capacity from one terabyte to 2.5 terabytes, our IO numbers change with it. This share can be as small as 100 gigabytes and as large as 100 terabytes and the performance characteristics change accordingly. So even if you only need 500 gigabytes of capacity, you may have to provision a one terabyte final share to get the performance you need.</p>
<p>The other thing to think about is that premium file shares bill based on the size of the share you provision, no matter how much data you store in it. So here’s a quick tip to save some money. Change your provision to capacity to 100 gigabytes so you can build the solution at the lowest cost. And then when you’re ready to start bringing users into the environment, you can change the size to what you need to meet demand.</p>
<p>One last thing before we create the file share, notice at the bottom that there is a note that says to use the SMB protocol with the file share, check if you can communicate over port 445. This is because most ISPs and some companies block port 445 because it has been a vector of attack across networks. However, in this case, our storage account and our network are both inside Azure and we made this storage account accessible from only our virtual network. So this will not be an issue as long as your firewall or network security group isn’t blocking port 445. Click the create button and don’t forget to increase the size of your file share when you’re ready to start onboarding your users.</p>
<p>The last step in this section is enabling our premium file share to have more network connections, increased throughput, increased IOPS, and network fault tolerance. Notice at the top of the screen, SMB multi-channel is currently disabled. Let’s enable it so we can get those benefits. Click on the word disabled. And the only thing to do is toggle SMB multi-channel to on and click the save button at the bottom.</p>
<h1 id="Protecting-FSLogix-File-Share-Demo"><a href="#Protecting-FSLogix-File-Share-Demo" class="headerlink" title="Protecting FSLogix File Share Demo"></a>Protecting FSLogix File Share Demo</h1><p>Now that we have a file share, we need to protect it. Click on the share. In the blade on the left, click backup. This is going to create a new Azure backup vault to protect your file share. The vault name resource group and policy have been selected for you showing that the file share will take a full backup at 7:30 p.m. and retain that data for 30 days. Those settings are just fine with me, but if you need the backup to be more frequent or retain the data for longer, you can edit the policy accordingly. When you’re ready, select the enable backup button at the bottom and that’s all that’s necessary. The file share will now be backed up according to your schedule. No muss, no fuss.</p>
<h1 id="Authenticating-FSLogix-File-Share"><a href="#Authenticating-FSLogix-File-Share" class="headerlink" title="Authenticating FSLogix File Share"></a>Authenticating FSLogix File Share</h1><p>Now that we’ve created our file share and are protecting it from those unintentional deletes, as well as standard backup protection, and we’ve enabled our best performance, it’s time to set up authentication. At the top, notice Active Directory is not configured. Let’s click on that. There are two options here. On the left is a traditional Active Directory. AD would be either on-prem or in a VM in the cloud. And on the right is Azure Active Directory Domain Services. This is a Microsoft-managed Active Directory, and that may sound appealing, however, there are a lot of caveats with that approach. So if you’re not currently using it, I would stick with Active Directory. Click the Setup.</p>
<p>As you can see, this is a four-step process to get the file share to use Active Directory authentication. Let’s click on the first step, and this will open the Azure docs. On the right, click the link for option one in the download AZFilesHybrid module section. The second bullet is a link to download the PowerShell module. Click on the .zip file and save it to a local location on a domain-joined machine and extract the files.</p>
<p>Open PowerShell as an administrator. In your terminal, navigate to the same file location you extracted the files to. In my script on the right, I’ve set some variables at the top for our resource group name, storage account name, and domain name, and that one’s just using a PowerShell environment variable. These will help you to execute the same script below each time this runs. Just change the variables for your next storage account, and you’re good to go.</p>
<p>In the next section, we’ll run one of the files we just extracted. This will copy the PowerShell module you downloaded to the appropriate place on your system, and the next command will import it. Now we can run the command to join our storage account to Active Directory. As you can see, this is going to use the variables that we listed above. In the command, there are also parameters for your domain account type, which I’ll use a ComputerAccount for this, and optionally, you can specify which organizational unit you want your computer account to reside in. If you don’t specify an OU, the default behavior is just a pick the same OU where your computer object exists that you’re running the script on. I’ve already got an organizational unit set up for this, so I’ll use that one.</p>
<p>In the terminal, we see everything ran successfully, and in Active Directory, we have a new computer object that’s named for our storage account. Before we can access this file share, we need to add permissions to either a file share or the storage account. If you select the storage account, this will apply the same permissions to all of the file shares, and that’s just what I’ll do today. Back in our storage account in the Azure Portal, on the left, we can go to Access Control, at the top, click to add a role assignment. In the search box, type SMB. The role we need is called Storage File Data SMB Share Elevated Contributor. Select that and click Next. Click Select Members and search for your virtual desktop administrator user or group. Click Select at the bottom, and Review &amp; Assign.</p>
<p>Now we want to add another permission, and this one will be for our FSLogix users. Click Add at the top. In the search box, type SMB. This time the role we need is called Storage File Data SMB Share Contributor. Click Next. Click Select Members and search for your virtual desktop users group. Select that. At the bottom, click Review &amp; Assign. Now before we can mount the file share, we should verify that we can connect to it in case port 445 is blocked. Back in PowerShell, I have added a new command to our script, and this will test connectivity to the share. We have two parameters here. ComputerName is the fully qualified name of the storage account, which in this case is avdstorage01.file.core.windows.net. And we have the common TCP port, which is SMB, also known as port 445.</p>
<p>In our terminal, we see the public IP address of the storage account and the last line shows our test was successful. Now we can map our file share in the Windows File Explorer. Click the button at the top to map the drive. Select the drive letter you want, and I’ll take the X drive. For the path, use the fully qualified name to the storage account, slash the share name. Click Okay. And you should now see your mapped drive. We now need to set the NTFS permissions. To do this, you will need to use the same user who you granted the elevated permissions right to. Right-click on the white space and select Properties. Notice that the size of the share properly shows 100 gigabytes. This is just another reminder to properly set the size of the share before you start bringing users into your environment. Click the Security tab at the top.</p>
<p>At the bottom, click the Advanced button. Notice that our WVD admin already has the permissions of full control, which is the elevated contributor role. Let’s add our FSLogix users, and click Add. At the top, click to select a member, and notice that in the box of our location is our Active Directory domain. Type the name of your group, which for me, is WVD users, and click Check Name. It looks good, so click Okay. Their permissions here should have Modify, and it should be for this folder only. Click Okay.</p>
<p>Now above that, we have our creator owner permission. Click that, and select the Edit button. Change this permission from Full Control to Modify, and click Okay. Now we’ve configured our FSLogix file share to be Active Directory authenticated, giving our AVD admin full control over the file share as well as our AVD users being able to create their own subfolders and files, which is required for their user profile creations when they first log in.</p>
<h1 id="Azure-Virtual-Desktop-Storage-Solutions-Conclusion"><a href="#Azure-Virtual-Desktop-Storage-Solutions-Conclusion" class="headerlink" title="Azure Virtual Desktop Storage Solutions - Conclusion"></a>Azure Virtual Desktop Storage Solutions - Conclusion</h1><p>In this course, we’ve covered Azure Virtual Desktop session host disk options as well as the requirements for FSLogix capacity and performance. And we’ve set up your FSLogix file shares with Active Directory authentication and the proper permissions. We’ve also protected that file share from local deletes with our soft delete function, and then further protected it with Azure Backup taking daily snapshots.</p>
<p>Thanks for joining me to learn about Azure Virtual Desktop storage solutions. Don’t forget to provide feedback in the survey in this course, so I can keep improving. And please direct message me on social media and let me know that you are now ABD certified. Happy learning.</p>
]]></content>
  </entry>
  <entry>
    <title>Knowledge-Check-Designing-for-Azure-Virtual-Desktop-User-Identities-and-Profiles-5</title>
    <url>/2022/11/13/AZ-140-Knowledge-Check-Designing-for-Azure-Virtual-Desktop-User-Identities-and-Profiles-5/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Knowledge-Check-Managing-Access-to-Azure-Virtual-Desktop-15</title>
    <url>/2022/11/13/AZ-140-Knowledge-Check-Managing-Access-to-Azure-Virtual-Desktop-15/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Knowledge-Check-Implementing-Networking-for-Azure-Virtual-Desktop-7</title>
    <url>/2022/11/13/AZ-140-Knowledge-Check-Implementing-Networking-for-Azure-Virtual-Desktop-7/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Knowledge-Check-Implementing-Storage-for-Azure-Virtual-Desktop-9</title>
    <url>/2022/11/13/AZ-140-Knowledge-Check-Implementing-Storage-for-Azure-Virtual-Desktop-9/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Knowledge-Check-Managing-Azure-Virtual-Desktop-Session-Host-Images-13</title>
    <url>/2022/11/13/AZ-140-Knowledge-Check-Managing-Azure-Virtual-Desktop-Session-Host-Images-13/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Lab-Managing-Permissions-and-Users-in-Azure-Virtual-Desktop-16</title>
    <url>/2022/11/13/AZ-140-Lab-Managing-Permissions-and-Users-in-Azure-Virtual-Desktop-16/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ140-Lab-Introduction-to-Azure-Virtual-Desktop-AVD</title>
    <url>/2022/11/13/AZ-140-Lab-Introduction-to-Azure-Virtual-Desktop-AVD-3/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-140-Knowledge-Check-Managing-Security-on-Azure-Virtual-Desktop-18</title>
    <url>/2022/11/13/AZ-140-Knowledge-Check-Managing-Security-on-Azure-Virtual-Desktop-18/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Lab-Working-with-Azure-Virtual-Desktop-Host-Pools-11</title>
    <url>/2022/11/13/AZ-140-Lab-Working-with-Azure-Virtual-Desktop-Host-Pools-11/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-140-Managing-Access-to-Azure-Virtual-Desktop-19</title>
    <url>/2022/11/13/AZ-140-Managing-Access-to-Azure-Virtual-Desktop-14/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello and welcome to this course on Managing Access to Azure Virtual Desktop. My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist and have been working in the Microsoft cloud analogics for several years, specifically with Azure Virtual Desktop since its inception and have multiple Azure-focused certifications. My contact information is available on screen. Please feel free to reach out to me with any questions, comments, or concerns, and I will be happy to discuss these with you. For any other issues you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>, and one of our cloud experts will follow up with you.</p>
<p>This course is intended for people that are planning on taking the Azure Virtual Desktop Specialty exam and anyone who is interested in learning how to deploy an Azure Virtual Desktop environment. By the end of this course, you will have knowledge on:</p>
<ul>
<li>Planning and implementing Azure roles and role-based access control for Azure Virtual Desktop</li>
<li>Managing roles, groups, and rights assignment on Azure Virtual Desktop session hosts</li>
<li>Configuring user restrictions by using AD group policies and Azure policies</li>
</ul>
<p>To get the most from this course, you should have an Administrator-level understanding of Azure Cloud services.</p>
<p>Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>Please note, at the time of writing this content, all course information was accurate. To accommodate new features and services, Microsoft regularly update exam guidelines and measured skills. This may result in certain elements of discrepancy appearing in the content over time. Please contact us if you find any outdated content at <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. This will allow us to update the course during its next release cycle. Thank you.</p>
<h1 id="Planning-and-Implementing-Azure-Roles-and-Role-Based-Access-Control-RBAC-for-Azure-Virtual-Desktop"><a href="#Planning-and-Implementing-Azure-Roles-and-Role-Based-Access-Control-RBAC-for-Azure-Virtual-Desktop" class="headerlink" title="Planning and Implementing Azure Roles and Role-Based Access Control (RBAC) for Azure Virtual Desktop"></a>Planning and Implementing Azure Roles and Role-Based Access Control (RBAC) for Azure Virtual Desktop</h1><p>Welcome to this module on Planning and Implementing Azure Roles and Role-Based Access Control or RBAC for Azure Virtual Desktop. In this module, we’ll cover the following topics, what is role-based access control or RBAC? We’ll discuss some of the Azure Virtual Desktop specific built-in roles. Finally, we’ll talk about delegated access in Azure Virtual Desktop.</p>
<p>Let’s start by discussing what role-based access control, better known as RBAC, is. It allows you to manage who has access to resources within Azure. It is an authorization mechanism that is built on Azure Resource Manager, better known as ARM, that allows administrators to configure fine-grained access management to resources.</p>
<p>There are three elements to role-based access control. The first is a security principle, which represents some type of object, for example, a user or a group. The second type of element, is role definition, which is a collection or a set of permissions. Essentially a role definition lists the actions. For example, read, write or delete, that can be performed. The final element is a scope. This is a set of resources to which the access is applying to. There are different levels of scope, including management groups, subscriptions and resource groups.</p>
<p>In the next part of this course, we are going to look at some of the built-in roles that are relevant to Azure Virtual Desktop. We start off with desktop virtualization role, which has a reader role and a contributor role. The reader role allows you to view all aspects of the deployment, but not make any changes. The contributor role enables you to manage all parts of the deployment, however, it does not allow you to access to any of the compute resources.</p>
<p>The next relevant role is the desktop virtualization host pool role, which again, has a reader and contributor level access. The reader level allows you to view all aspects of the host pool only and not modify any settings, whereas a contributor role allows you to manage everything within the host pool. However, you do need an additional contributor role for the virtual machine, if you wish to create any VMs. The desktop application group role, is similar to the host pool role, in that it has both reader and contributor levels. With the reader level role, it allows you to view everything within the application group and the contributor level, allow you to manage everything within the application groups. However, if you wish to publish apps, you need to have the user access administrator role.</p>
<p>Next, we have the desktop virtualization workspace role, which again has two levels, reader and contributor. The reader level role allows you to view all aspects of the workspace but not adding anything. The contributor level role allows you to manage everything within the workspace. However, to obtain information on applications within that app group, you need to be assigned the application group reader role. There are two more roles that are relevant to Azure Virtual Desktop. The first is the desktop virtualization user session operator. This role allows you to manage user logins and to do tasks such as sending messages, disconnecting sessions, and remotely logging users off by sessions.</p>
<p>The final role is called desktop virtualization session host operator. This role will enable you to change drain mode and view and remove session hosts from a host pool. This level of access does not have right permissions, however, so you cannot add session host into the host pool. In the final section of this module, we are going to view delegated access with Azure Virtual Desktop.</p>
<p>Like role-based access control, delegated access has the same three elements, which are security principles, role definitions, and scope. Security principles have three values, which are all objects, including users, groups, and service principles. Role definitions have two type of roles. Either built-in roles, which we discussed in the previous section of this module and custom roles. These are roles you can customize with different permissions. Finally, we have the scope elements of delegated access. As mentioned earlier, this is the resources you assign the roles and permissions to, which include host pools, app groups, and workspaces.</p>
<h1 id="Managing-Roles-Groups-and-Rights-Assignment-on-Azure-Virtual-Desktop-Session-Hosts"><a href="#Managing-Roles-Groups-and-Rights-Assignment-on-Azure-Virtual-Desktop-Session-Hosts" class="headerlink" title="Managing Roles, Groups, and Rights Assignment on Azure Virtual Desktop Session Hosts"></a>Managing Roles, Groups, and Rights Assignment on Azure Virtual Desktop Session Hosts</h1><p>Welcome to this module on managing roles, groups, and rights assignment on Azure Virtual Desktop. In this module, we’ll cover the following topics, which will both be demo-focused. We will look at how to add users to the Azure Virtual Desktop-specific roles. Finally, we’ll walk through how to add users and groups to Azure Virtual Desktop host pools, to allow access to session hosts.</p>
<p>In this first section, we are going to show how to add users to the Azure Virtual desktop specific groups we have discussed in the planning and implementing Azure roles and role-based access control, RBAC, for Azure Virtual Desktop module. Here we are in the Azure portal. We first need to navigate to the Azure Virtual Desktop service. We have two options, we can either user search at the top, where we can type Azure Virtual Desktop, like this, and click on the service. Or, like me, if you have it as a shortcut on the dashboard, you can just click this, and it’ll take you to the service as well.</p>
<p>Next, we’ll click on Host pools in the left-hand pane. Now we can see our host pools in the center. In this case, we have a single host pool, click on the host pool, and we now see the overview for this resource. On the left-hand pane, we need to look for access control, IAM, to the access control service for this host pool.</p>
<p>Now we want to try and add a user to one of the desktop virtualization role assignments we discussed in an earlier module, so we will select Add, and then Add role assignment. We are now on the Add role assignment menu, and we can see all the available roles here, including the desktop virtualization roles. Let’s select one at random. Let’s say, the host pool reader role, then click on Next. We now have the option of either adding users, groups, or service principle to this role, or we can add a managed identity. In our case, we want to add a user, so we’ll click on Select members and add our user. We then click on the Review and assign button, and the same again. We can now see the desktop virtualization host pool reader role has appeared with a user we added.</p>
<p>This user now has read-only access to all the host pool resources. In this section, we are going to look at how we add a group to the host pool assignment, which will allow them access to log into the relevant session hosts. We first need to make sure we have created a security group, either on on-premises active directory, that I synchronized with Azure AD, or a cloud-based security group in Azure AD In our example, we have created a cloud security group in Azure AD, called AVD Users. We need to browse to the Azure Virtual Desktop service, as we did previously.</p>
<p>From here, we select the Application group. On the left-hand pane of our application group, we’ll navigate down to Assignments, where we can now click on Add. We now find the security group called AVD Users and select this. You should know that you can assign users to the application group directly, as well. However, it is a best practice recommendation to your security groups, as it is a less administrative overhead.</p>
<h1 id="Configuring-User-Restrictions-by-Using-AD-Group-Policies-and-Azure-Policies"><a href="#Configuring-User-Restrictions-by-Using-AD-Group-Policies-and-Azure-Policies" class="headerlink" title="Configuring User Restrictions by Using AD Group Policies and Azure Policies"></a>Configuring User Restrictions by Using AD Group Policies and Azure Policies</h1><p>Welcome to this module on configuring user restrictions by using AD group policies and Azure policies. In this module, we’ll cover the following topics: We’ll discuss how to manage Azure Virtual Desktop with Group Policy. Finally, we’ll take a look at the features available when managing Azure Virtual Desktop with Endpoint Manager.</p>
<p>Let’s start by looking at managing Azure Virtual Desktop with Group Policy. The policies available depend on what domain the session hosts are joined to. You can join session hosts to either Active Directory or Azure Active Directory Domain services. Both allow you to use the Group policy management tool to manage the various policies. If you use Azure AD Domain Services, you need to ensure your administrator account is a member of the Azure AD DC administrators group.</p>
<p>If the session hosts are joined to an Azure AD Domain Services tenant, you have two main policies called AADDC Computers and AADDC Users which you can edit and use to manage the Azure Virtual Desktop environment. If the session hosts are joined to an Active Directory Domain, either on-premises or a VM in Azure, then you can utilize all the standard GPOs that are available with a Domain Controller to manage the Azure Virtual Desktop environment. Let’s now move on to discussing managing Azure Virtual Desktop with Endpoint Manager.</p>
<p>Session hosts need to not only be domain joined but also enrolled into Intune to enable management, which is better known as Hybrid join. Once your session hosts are hybrid joined, you can start to manage them and take advantage of Endpoint Management features, such as compliance policies, which allow you to set baseline compliance the sessions hosts must meet. Configuration profiles, which allow you to configure settings including control panel access and desktop background on the session hosts. You can also utilize Windows Update for Business to manage update patching on the session hosts.</p>
<p>Finally, you can deploy applications to the session hosts including Office, other Win32 apps, and also, apps via the Windows Store.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>In this short module, we covered two main areas around management of Azure Virtual Desktop environment. First, we discussed managing Azure Virtual Desktop with Group Policy, and depending on how the session hosts are domain joined, you have different options. You can either use the limited policies available where the session hosts are joined to an Azure AD Domain Services tenant, or you can use the traditional more granular policies that are available when the session hosts are joined to an active directory domain.</p>
<p>In the final part of the module, we discussed how to manage Azure Virtual Desktop with Endpoint Manager. We discussed the requirement to hybrid join the session hosts, which then opened up the many features of Endpoint Manager, including compliance policies to set compliance policy baselines on the session host, configuration profiles to control settings on Windows 10, including control panel access and desktop background to name a few. You can then manage session host updates and patching via the Windows Update for Business service and to ensure that OS stays secure. Finally, you can deploy applications, including Office suite Win32 apps and apps from the Windows store.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Managing-Security-on-Azure-Virtual-Desktop-17</title>
    <url>/2022/11/13/AZ-140-Managing-Security-on-Azure-Virtual-Desktop-17/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Hello, and welcome to this course on Managing Security to Azure Virtual Desktop. My name is Shabaz Darr and I’ll be your instructor for this course. I am an Azure Virtual Desktop Specialist, and have been working with Microsoft cloud technologies for several years, specifically with Azure Virtual Desktop since its inception, and have multiple Azure-focused certifications. My contact information is available on screen. Please feel free to reach out to me with any questions, comments, or concerns, and I’ll be happy to discuss these with you.</p>
<p>For any other issues, you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:&#115;&#117;&#112;&#x70;&#x6f;&#114;&#x74;&#64;&#99;&#x6c;&#x6f;&#x75;&#100;&#x61;&#x63;&#97;&#x64;&#x65;&#109;&#121;&#x2e;&#x63;&#x6f;&#109;">&#115;&#117;&#112;&#x70;&#x6f;&#114;&#x74;&#64;&#99;&#x6c;&#x6f;&#x75;&#100;&#x61;&#x63;&#97;&#x64;&#x65;&#109;&#121;&#x2e;&#x63;&#x6f;&#109;</a> and one of our cloud experts will follow up with you. This course is intended for people that are planning on taking the Azure Virtual Desktop Specialty exam, and anyone who is interested in learning how to deploy an Azure Virtual Desktop environment.</p>
<p>By the end of this course, you will have knowledge on <a href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/planning-and-implementing-conditional-access-policies-for-connections-to-azure-virtual-desktop/">planning and implementing Conditional Access policies</a> for connections to Azure Virtual Desktop. <a href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/planning-and-implementing-multi-factor-authentication-in-azure-virtual-desktop/">Planning and implementing multi-factor authentication in Azure Virtual Desktop</a>. <a href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/managing-security-by-using-microsoft-defender-for-cloud/">Managing security by using Microsoft Defender for Cloud</a>, formerly known as Azure Security Center. <a href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/configuring-microsoft-defender-antivirus-for-session-hosts/">Configuring Microsoft Defender Antivirus for session hosts</a>. To get the most from this course, you should have an administrator-level understanding of Azure Cloud services.</p>
<p>Feedback on course content hosted by Cloud Academy is always appreciated and encouraged, as it allows us as trainers to improve, which helps all of our students taking courses in the future. If you have any feedback, positive or negative, it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. When I created this course, all information was current. If you notice any updates or corrections, please reach out to us. Thank you.</p>
<h1 id="Planning-and-Implementing-Conditional-Access-Policies-for-Connections-to-Azure-Virtual-Desktop"><a href="#Planning-and-Implementing-Conditional-Access-Policies-for-Connections-to-Azure-Virtual-Desktop" class="headerlink" title="Planning and Implementing Conditional Access Policies for Connections to Azure Virtual Desktop"></a>Planning and Implementing Conditional Access Policies for Connections to Azure Virtual Desktop</h1><p>Welcome to this module on planning and implementing conditional access policies for connections to <a href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a> based on requirements. In this module, we’ll cover the following topics. What are the requirements to implement conditional access policies with Azure Virtual Desktop? We will then walk-through a demo to create a conditional access policy with session settings.</p>
<p>Let’s start by discussing conditional access policy requirements for Azure Virtual Desktop. We need to ensure that the Microsoft 365 tenant has the relevant licensing which includes the conditional access feature. This is covered by the Azure AD P1 licenses and above. You then need to ensure you have a fully configured Azure Virtual Desktop environment, including a host pool and an application group. We will now complete a walk through demo of creating a conditional access policy with session settings.</p>
<p>As you can see, we are logged into the <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a> portal with an account that has Global Admin access. We now navigate to the Security option, and from here Conditional Access. We then select New policy, then create a new policy. Let’s give the policy a name, in our example let’s use AVD MFA. Under the Assignments section you need to select the group you want this policy to apply to. In our example, we are going to use an existing group called AVD-Users.</p>
<p>Moving on we click on Cloud apps or actions, then select apps. On the right-hand side we see a list of applications to choose from. If we start to type in the word Windows, we can now see Azure Virtual Desktop as an option. Click on this and then hit the select button. In our example we are not going to create any conditions, but I quickly want to highlight the types of conditions you are able to set. You can control MFA access to AVD based on the Device platform, for example is it an iOS device? Or you can put a condition based on location, for example you may wish to exempt a local office network from being prompted for MFA.</p>
<p>The other options you see are client apps, device state, or filter for devices. For our demo, we are going to leave all these options not configured and move onto access control. We need to select Grant. Because we want to enforce MFA, we select require <a href="https://cloudacademy.com/course/managing-microsoft-365-access-and-authentication/manage-user-settings-azure-multi-factor-authentication-cloud/">multi-factor authentication</a>. There are other options as we see here, where a device needs to be marked as compliant, or require that the device be Hybrid joined for example. </p>
<p>Before we are ready to create the policy, we need to configure session control. If we click on this and now we see several options on the right-hand pane. For your example, we want to tick sign-in frequency which allows us to control the amount of time before a user needs to authenticate their MFA. If we look at Units first, we can select hours or days, and then we can enter the numerical value above that. In our example, we are going to configure seven days, but you should configure according to your organization’s policies. Then, we can click on create and ensure the on option is selected. That concludes the demo.</p>
<h1 id="Planning-and-Implementing-Multi-Factor-Authentication-in-Azure-Virtual-Desktop"><a href="#Planning-and-Implementing-Multi-Factor-Authentication-in-Azure-Virtual-Desktop" class="headerlink" title="Planning and Implementing Multi-Factor Authentication in Azure Virtual Desktop"></a>Planning and Implementing Multi-Factor Authentication in Azure Virtual Desktop</h1><p>Welcome to this module on planning and implementing multi-factor authentication in <a href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a>. In this module, we’ll cover the following topics. We’ll look at what is required to integrate Azure Virtual Desktop with <a href="https://cloudacademy.com/course/managing-microsoft-365-access-and-authentication/manage-user-settings-azure-multi-factor-authentication-cloud/">Multi-Factor Authentication</a>, better known as MFA. We will complete this lecture by doing a walk-through demo of how to implement MFA settings.</p>
<p>Let’s initially take a look at some of the requirements to implement multi-factor authentication with AVD. Like most Microsoft 365, services you need to ensure you have the relevant license in place. Now although MFA can be configured with the basic <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a> subscription, this is only with security baselines in place. In order to integrate it with Azure Virtual Desktop, you require a minimum of Azure AD P1. You also need to ensure you have an existing Azure Virtual Desktop environment, including a host pool and application group.</p>
<p>Finally, you need to ensure you have a conditional access policy in place to enable MFA for Azure Virtual Desktop. As we saw in the demo for the last lecture, MFA is configured via a Conditional access policy. We have already seen a demo on how to configure a conditional access policy to enable MFA in the last lecture. In this demo, we are going to look at MFA settings in Azure. Here we are in the Azure AD portal, and we initially want to navigate to security and then MFA.</p>
<p>Here we have a number of options we can configure, including Account lockout, Fraud alerts, and look at activity reports. If we take a closer look at account lockout settings, we can customize three different settings. The number of MFA denials that will trigger an account lockout. The number of minutes until an account lockout counter is reset. And finally, the number of minutes until an account is automatically unlocked. With the fraud alert settings, it is turned off by default, therefore you have the ability to enable this. This will automatically turn on the setting to automatically block users who report fraud.</p>
<p>Finally, you can set a specific code which signifies a fraud report. The default setting is zero. The final setting I mentioned was activity reports, which allow you to review which users have been completing MFA authentication, the time, the app that was being used, as well as the authentication method, among other details. These three settings as well as many others can be implemented to give your organization a much better experience and add additional layers of security for your AVD environment.</p>
<h1 id="Managing-Security-by-Using-Microsoft-Defender-for-Cloud"><a href="#Managing-Security-by-Using-Microsoft-Defender-for-Cloud" class="headerlink" title="Managing Security by Using Microsoft Defender for Cloud"></a>Managing Security by Using Microsoft Defender for Cloud</h1><p>Welcome to this module on managing security by using Microsoft Defender for Cloud, formerly known as <a href="https://cloudacademy.com/course/introduction-azure-security-center/preventing-responding-security-threats-azure-security-center/">Azure Security Center</a>. We will cover the following topics in this module. We will discuss the requirements needed to integrate Microsoft Defender for Cloud with <a href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a>. We will then look at the features that are available. Finally, we will look at some general security best practices for Azure Virtual Desktop. </p>
<p>Let’s start off by taking a look at some of the requirements that need to be fulfilled in order to integrate Azure Virtual Desktop with Microsoft Defender for Cloud. There are two levels of Microsoft Defender for Cloud, basic and standard. Before you can integrate this service with AVD, you need to ensure you have enabled the standard tier in Microsoft Defender for Cloud. Finally, you need to ensure you have provisioned your Azure Virtual Desktop environment and have active session hosts within this environment.</p>
<p>Let’s now move on to discussing some of the features that are available once you meet these requirements. The first feature I would like to highlight is the security configuration assessment, which will assess your existing security implementation within Azure Virtual Desktop. Next, we have a security score, which again assesses the AVD environment, but this time outputs a score, detailing vulnerabilities and how you can remediate those.</p>
<p>We move on to file integrity monitoring, better known as FIM. This feature examines operating system files, Windows registry, apps, and more for changes in behavior that might indicate an attack. I also want to mention Just-in-time VM access as an important feature. This feature allows you to control access to the sessions hosts and limit not only the level of access, but the amount of time a user can access a VM.</p>
<p>The final feature I will touch on is adaptive application control. This is an intelligent and automated solution for defining allow lists of known, safe applications for your session hosts. In the final part of this lecture, I will discuss general security best practices for Azure Virtual Desktop. An important aspect of AVD is the session host <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">virtual machines</a>, so ensuring you have some type of endpoint protection enabled on these is very important.</p>
<p>With any type of cloud-hosted environment, security posture is key, and AVD is no different, which is why it is another best practice to continuously monitor and improve your secure score. Access and authentication are an important aspect of all cloud-hosted services, and as such, forcing users to utilize multi-factor authentication when accessing Azure Virtual Desktop should be standard. The final best practice recommendation I want to point out is to set up screen locks for idle sessions. This protects access to the environment if users walk away from their screens and leave the session unattended.</p>
<h1 id="Configuring-Microsoft-Defender-Antivirus-for-Session-Hosts"><a href="#Configuring-Microsoft-Defender-Antivirus-for-Session-Hosts" class="headerlink" title="Configuring Microsoft Defender Antivirus for Session Hosts"></a>Configuring Microsoft Defender Antivirus for Session Hosts</h1><p>Welcome to this module on Configuring Microsoft Defender Antivirus for Session Hosts. We will cover the following topics in this module. What is Microsoft Defender Antivirus? What are the requirements to run Microsoft Defender Antivirus in a VDI environment? We’ll take a closer look at the security intelligence updates for Windows 10 OS.</p>
<p>Let’s start off by explaining what Microsoft Defender Antivirus is. This is next-generation protection services that are hosted by <a href="https://cloudacademy.com/course/setting-up-and-managing-a-microsoft-365-tenant/setup-microsoft-365-tenant-and-subscription/">Microsoft 365</a> and part of its wider security suite. It combines machine learning, big-data analysis and in-depth resistance research to offer a robust protection layer for Windows 11, 10 and Server OS. There are two modes.</p>
<p>First, we have Active mode which is utilized as the primary antivirus application on the device, so it remediates threats. And then, we have passive mode, where Microsoft Defender Antivirus is not utilized as the primary antivirus, so it does not remediate threats. As with most Microsoft Cloud services, there are a number of requirements that need to be met before it can be implemented with <a href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a>. From a licensing perspective, it is included as part of the Microsoft 365 E5, E3, E5 security, and A5 security subscriptions. It is supported on both server OS from 2008 R2 SP1 or higher and from Windows 7 SP1 and higher, including Windows 10 and 11.</p>
<p>Finally, before you can turn this service on, you need to ensure you are using an <a href="https://cloudacademy.com/library/azure/">Azure</a> account with the relevant role assigned to it, which includes Global Administrator, Security Administrator, and Compliance Administrator to name a few. In this final section of this module, we are going to discuss security intelligence for Windows 10 operating system. Microsoft continually updates security intelligence in antimalware products to cover the latest threats, and constantly tweak detection logic. This security intelligence works directly with cloud-based protection to deliver fast and powerful AI-enhanced, next-generation protection. Network Inspection System updates are designed to protect you from network threats, including exploits as they are transmitted.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We have covered several important topics in this course. We started off by looking at planning and implementing conditional access policies for connection to Azure Virtual Desktop. In this section, we discussed the requirements needed to implement conditional access, and followed this up with a demo of <a href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/planning-and-implementing-conditional-access-policies-for-connections-to-azure-virtual-desktop/">configuring a policy for Azure Virtual Desktop</a>.</p>
<p>Next, we moved on to discussing <a href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/planning-and-implementing-multi-factor-authentication-in-azure-virtual-desktop/">planning and implementing multi-factor authentication in Azure Virtual Desktop</a> where we highlighted the requirements to enable MFA, and again followed up with another demo, but this time we looked at some of the settings you can implement to harden your MFA settings for Azure Virtual Desktop.</p>
<p>In the third section of this module, we had a look at managing security by using Microsoft Defender for Cloud, formerly known as Azure Security Center. Here we focused on understanding the requirements needed before you can implement this service. We then discussed some of the key features of <a href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/managing-security-by-using-microsoft-defender-for-cloud/">Microsoft Defender for Cloud</a>, and then finished off by highlighting <a href="https://cloudacademy.com/course/managing-security-azure-virtual-desktop-2356/configuring-microsoft-defender-antivirus-for-session-hosts/">some security best practices for Azure Virtual Desktop</a>.</p>
<p>Finally, we talked about configuring Microsoft Defender Antivirus for session hosts. We initially explained what this service is, followed by the requirements you need before you can integrate this with Azure Virtual Desktop, and we finished off by discussing security intelligence updates.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Managing-FSLogix-on-Azure-Virtual-Desktop-19</title>
    <url>/2022/11/13/AZ-140-Managing-FSLogix-on-Azure-Virtual-Desktop-19/</url>
    <content><![CDATA[<h1 id="Implementing-and-Managing-FSLogix-Introduction"><a href="#Implementing-and-Managing-FSLogix-Introduction" class="headerlink" title="Implementing and Managing FSLogix - Introduction"></a>Implementing and Managing FSLogix - Introduction</h1><p>Hello, and welcome to this course on implementing and managing FSLogix. My name is Shabaz Darr and I’ll be your instructor for this course. I’m an Azure Virtual Desktop Specialist, and I’ve been working with Microsoft Cloud Technologies for several years specifically with Azure Virtual Desktop since its inception and I have multiple Azure-focused certifications. My contact information is available on screen. Please feel free to reach out to me with any questions, comments, or concerns, and I’ll be happy to discuss these with you. For any other issues you can always get in touch with us here at Cloud Academy by sending an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> and one of our cloud experts will follow up with you.</p>
<p>This course is intended for people that are planning on taking the Azure Virtual Desktop Specialty exam and anyone who is interested in learning how to deploy an Azure Virtual Desktop environment. By the end of this course, you will have knowledge on, <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/planning-for-fslogix/">planning for FSLogix</a>, <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/installing-and-configuring-fslogix/">installing and configuring FSLogix</a>, <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/configuring-profile-containers/">configuring Profile Containers</a>, <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/configuring-cloud-cache/">configuring Cloud Cache</a>, <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/migrating-user-profiles-to-fslogix/">migrating user profiles to FSLogix</a>. To get them most from this course you should have an administrator-level understanding of Azure cloud services.</p>
<p>Feedback on course content hosted by Cloud Academy is always appreciated and encouraged as it allows us as trainers to improve, which helps all of our students taking courses in the future. If you have any feedback, positive or negative it would be greatly appreciated if you could contact <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. When I created this course, all information was current. If you notice any updates or corrections please reach out to us. Thank you.</p>
<h1 id="Planning-for-FSLogix"><a href="#Planning-for-FSLogix" class="headerlink" title="Planning for FSLogix"></a>Planning for FSLogix</h1><p>Welcome to this module on planning for FSLogix. In this module, we will cover the following topics. We will start off by talking about what FSLogix is. Next, we will highlight some of FSLogix key capabilities. Finally, we will look at the eligibility requirements for FSLogix.</p>
<p>In this first lecture let’s discuss what FSLogix is. It’s primary function is to enhance user profile experience on VDI environments. FSLogix can be used for profile containerization, Office suite containerization, Application masking and Java version control. It allows user profile data to roam across the VDI session hosts which allows for a much richer experience when working in <a href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a>. Lets now take a look at some of the key capabilities of FSLogix. It allows you to redirect user profiles to a network location, and in the case of Azure Virtual Desktop, this is normally an <a href="https://cloudacademy.com/course/intro-to-azure-storage/demo-creating-azure-file-share-1/">Azure File Share</a>.</p>
<p>Rather than redirect the entire profile, you can simply redirect only the <a href="https://cloudacademy.com/course/configuring-microsoft-defender-office-365-1571/introduction/">Microsoft Office</a> suite data. This is normally used in a scenario when a company has a different roaming profile solution that is not FSLogix. Your applications that are installed on the Azure Virtual Desktop session hosts utilize the profile as if they were located on a local drive and are able to obscure the redirection. Application masking manages access to fonts, printers, applications and other items. You can control which users have access to these and which do not by using App Masking.</p>
<p>Finally, Cloud Cache is used with profile containers to create a resilient and highly available environment. It places a part of the profile virtual hard disk, VHD, on the local hard drive. We are going to finish this module by looking at the requirements to run FSLogix. You need to ensure you have the relevant Microsoft 365 license, which includes either Microsoft 365 E3, E5, F1, F3 or for companies who are eligible for education licensing, A3, A5. You can also utilize Windows 10 Enterprise E3, E5 or A3, A5 for the education sector. Remote Desktop Services, or RDS, Client Access License, CAL, and Subscriber Access License, SAL, is also supported. From an operating system perspective, FSLogix will run on Windows 7 and above for desktop OS and server 2008 R2 and above for server</p>
<h1 id="Installing-and-Configuring-FSLogix"><a href="#Installing-and-Configuring-FSLogix" class="headerlink" title="Installing and Configuring FSLogix"></a>Installing and Configuring FSLogix</h1><p>Welcome to this module on Installing and Configuring FSLogix. In this module, we’ll cover the following topics. We’ll complete a walkthrough demo of installing FSLogix. In this short demo, we’ll cover the steps you need to complete in order to install FSLogix to your Windows 10 OS. One thing to note is that at the time of this course the Windows 10 OS images that are available, via the Azure Marketplace, come with FSLogix pre-installed. So you should only need to complete these steps if you are creating an image from scratch outside of <a href="https://cloudacademy.com/library/azure/">Azure</a>.</p>
<p>As you can see, we have an internet browser window open at the webpage where it gives us a download link for FSLogix. The direct link to download FSLogix is <a href="https://aka.ms/fslogix/download">https://aka.ms/fslogix/download</a>. However, if we just click on the download link next to download, it will automatically download the required zip file. Once this is downloaded, browse to your download folder in Explorer and unzip the file. As you will see here, we have both 32 bit and 64 bit architecture installs available. In our example is 64 bit Windows 10, so we never get to those installation files.</p>
<p>Here, we have three possible installation files. The FSLogixAppsJavaRuleEditor install allows you to manage <a href="https://cloudacademy.com/course/advanced-java-programming/introduction/">Java</a> version control, the FSLogixAppsRuleEditor allows you to create an App Masking rule, and the FSLogixAppSetup allows you to configure profile and office containers. In our demo, we are just going to install FSLogixAppSetup. If we right-click run, this is an administrator, we will eventually see the license terms. You can click on Options to customize the install location, but in our demo we are going to leave this default and click on Install. Once this is successively installed, you can click on Close. The process to install the Java control and App Masking tools is very similar, so we will not cover those in this demo.</p>
<h1 id="Configuring-Profile-Containers"><a href="#Configuring-Profile-Containers" class="headerlink" title="Configuring Profile Containers"></a>Configuring Profile Containers</h1><p>Welcome to the module on configuring profile containers. We will cover the following topics in this module. We will complete a walk-through demo of configuring FSLogix for profile containers. Here we are logged into our Windows 10 session host where we will be configuring the environment for the profile containers. We start off by opening the registry, where we are going to create two entries.</p>
<p>Let’s navigate to HKey Local Machine, then software, FSLogix, and profiles. If we right-click in the center window, select new and then DWORD 32-bit value. Enter the word Enabled for the value, and set the value data to 1. Next, right-click in the center window again, select new, and this time we want to choose a multi-string value. We will enter a value of VHDLocations but for the data value we need to enter the path of your <a href="https://cloudacademy.com/course/intro-to-azure-storage/introduction-azure-files-1/">Azure Files</a> container, which can be obtained from the <a href="https://cloudacademy.com/library/azure/">Azure</a> portal.</p>
<p>There are further customizations we can make if we need to include or exclude specific users. We can open the local users and group list to find these groups. I am navigating to Computer Management, and then Local Users and Groups, then Groups. As you can see at the bottom we’ve 4 groups, FSLogix ODFC Exclude and Include lists, and FSLogix Profile Exclude and Include lists. That completes our walk-through demo of configuring Profile Containers.</p>
<h1 id="Configuring-Cloud-Cache"><a href="#Configuring-Cloud-Cache" class="headerlink" title="Configuring Cloud Cache"></a>Configuring Cloud Cache</h1><p>Welcome to this module on configuring cloud cache. We will cover the following topics in this module: we’ll complete a walk-through demo of configuring Cloud Cache with FSLogix for profile containers. Here we are logged into our Windows 10 session host where we will be configuring the environment for the profile container, but this time we are going to use Cloud Cache for SMB. As we did in the previous demo where we configured a standard profile container, we open up the registry and navigate to the same location. HKey Local Machine, then software, FSLogix and profiles.</p>
<p>If we right-click in the center window, select new and then DWORD 32-bit value. Enter the word Enabled for the value, and set the value data to 1, as we did before. And as we did before, we right-click in the center window again, select new, and this time we want to choose a multi-string value. This time however we call it CCDLocations and need to enter a different string that looks like this: type&#x3D;smb,connectionString&#x3D;&#x2F;&#x2F; and your file path of your file store. This is using the SMB protocol and telling the system that the location for this Cloud cache provider is that specific location and folder. If you want to add multiple provider details, you simple separate them with a semicolon. You can configure Cloud Cache for Office Containers and for <a href="https://cloudacademy.com/library/azure/">Azure</a> Page Blob.</p>
<h1 id="Migrating-User-Profiles-to-FSLogix"><a href="#Migrating-User-Profiles-to-FSLogix" class="headerlink" title="Migrating User Profiles to FSLogix"></a>Migrating User Profiles to FSLogix</h1><p>Welcome to this module, on migrate user profiles to FSLogix. We will cover the following topics in this module. We’ll take a look at the requirements before migrating. Finally, we will discuss an overview of the steps you need to complete to migrate user profiles to FSLogix. Let’s start by discussing FSLogix migration requirements. Before you move any user profile data you need to ensure you have provisioned the correct cloud storage tier that fits your requirements. You have two options, either Azure Files, which fits the majority of used cases. The second option is Azure NetApp Files, which is utilized for enterprise level workloads.</p>
<p>Finally, you need to ensure you have prepared the relevant PowerShell script and downloaded the required <a href="https://cloudacademy.com/course/powershell-byte-session-1477/introduction/">PowerShell</a> modules before you are ready to migrate. The following PowerShell cmdlets are important. Convert UDP-Roaming Profile, which converts a roaming profile to an FSLogix profile container. Convert-UDPProfile, which converts a user profile disk to an FSLogix profile container. Convert-UPMProfile, which converts UPM profiles to an FSLogix container. Once the PowerShell script is ready, you can proceed with the migration.</p>
<p>Let’s now look at two high-level steps you need to complete when migrating user profiles to FSLogix. Step one, is to convert any .vhdx files into the .vhd format. This is done by using the PowerShell script we mentioned in the previous section in this module. Step two, is to migrate the converted .vhd files into the <a href="https://cloudacademy.com/course/intro-to-azure-storage/course-introduction-1/">Azure Storage</a>, which can be either Azure Files or Azure NetApp files. You can then attach these to the user’s <a href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a> session.</p>
<h1 id="Implementing-and-Managing-FSLogix-Summary"><a href="#Implementing-and-Managing-FSLogix-Summary" class="headerlink" title="Implementing and Managing FSLogix - Summary"></a>Implementing and Managing FSLogix - Summary</h1><p>We have covered several important topics in this course. This course was very demo heavy as we needed to look closer at the steps you need to complete when deploying and configuring FSLogix. We started off by discussing <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/planning-for-fslogix/">planning for FSLogix</a> which included understanding what FSLogix is, looking at its capabilities, and finally discussing its requirements. In the next lecture we completed a walkthrough demonstration of <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/installing-and-configuring-fslogix/">installing FSLogix onto Windows 10 session host</a>. Continuing with the demos in the third lecture completed a walkthrough of <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/configuring-profile-containers/">configuring profile containers on a Windows 10 session host</a>. In the penultimate lecture in this module we completed a walkthrough demo of <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/configuring-cloud-cache/">configuring Cloud Cache</a>. Finally, we finished off this module by discussing an overview of <a href="https://cloudacademy.com/course/managing-fslogix-azure-virtual-desktop-2385/migrating-user-profiles-to-fslogix/">migrating user profiles to FSLogix</a>.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Managing-Azure-Virtual-Desktop-Session-Host-Images-12</title>
    <url>/2022/11/13/AZ-140-Managing-Azure-Virtual-Desktop-Session-Host-Images-12/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Thanks for joining this course on <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/imaging-in-azure/">Imaging for Azure Virtual Desktop</a>. As you’re prepping for the Azure Virtual Desktop certification, or just brushing up on your skills, you’ll learn how to create and work with Imaging in Azure using a variety of solutions. My name is Dean Cefola and I’ve been in the IT industry for over 20 years. Today, I’m an Azure Principal Engineer at Microsoft and I’ve been working with Azure Virtual Desktop since before the beginning. I hope you find this course entertaining and educational, so please rate this course when you’re done and let me know how I did.</p>
<p>Who should attend this course? Anybody who’s planning on taking the Azure Virtual Desktop specialty exam or anyone who’s interested in learning more how to properly deploy an AVD environment. Speaking of this course, we’ll cover the AVD Imaging requirements which will involve <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/creating-a-gold-image/">creating a custom image</a>, <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/deploying-a-session-host/">deploying a session host</a> with our custom image, modifying a session host image, <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/installing-a-language-pack/">installing language packs</a> into that image, plan for image update and management, creating an Azure Compute Gallery to manage our images and automating the whole process with the <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/azure-image-builder/">Azure Image Builder</a>.</p>
<p>To get the most out of this course, you should have an administrator-level understanding of imaging a Windows OS, Azure Virtual Machines, <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/snapshots/">VM snapshots</a>, Azure Compute Gallery, and the Azure Image Builder. </p>
<p>Feedback is how we can all continue to improve, so if you have any feedback, positive or negative, you can let me know by rating this course at the end as well as contacting <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. One last thing before we get started, everything I’ll be showing you in this course is up to date at the time of filming. However, the cloud does change over time, so if you find any material that is out of date, please let us know at <a href="mailto:&#115;&#x75;&#112;&#112;&#x6f;&#x72;&#116;&#64;&#x63;&#x6c;&#111;&#x75;&#x64;&#x61;&#x63;&#97;&#x64;&#101;&#x6d;&#x79;&#x2e;&#99;&#x6f;&#109;">&#115;&#x75;&#112;&#112;&#x6f;&#x72;&#116;&#64;&#x63;&#x6c;&#111;&#x75;&#x64;&#x61;&#x63;&#97;&#x64;&#101;&#x6d;&#x79;&#x2e;&#99;&#x6f;&#109;</a> so we can get that updated. Let’s start imaging.</p>
<h1 id="Imaging-in-Azure"><a href="#Imaging-in-Azure" class="headerlink" title="Imaging in Azure"></a>Imaging in Azure</h1><p>Before we can start imaging, let’s begin with a definition. What exactly is an image? Well, to put it simply, an image is an operating system, that’s combined with patches and updates, and any customizations you wish to add. The files that are on your USB or DVD, that you installed windows from, those would be considered an image, and so would all of these in the <a href="https://cloudacademy.com/library/azure/">Azure</a> marketplace. These are Microsoft gallery images. We’re not gonna spend a whole lot of time on these in this course because we wanna focus on creating your own custom or gold image. And this is going to be done by deploying a <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">VM</a> in the cloud from a gallery image, specifically windows 10 multi-session, then installing your apps and customizations, then we’ll do a process called capturing. Now we have an image that we can deploy more VMs from.</p>
<h1 id="Sysprep"><a href="#Sysprep" class="headerlink" title="Sysprep"></a>Sysprep</h1><p>The problem with making an image from an existing system, comes down to unique identifiers. When a system wants to communicate with another system, there has to be a way to uniquely identify each VM so the main system knows who it’s talking to. These globally unique identifiers, or GUIDs, are all over the Windows Operating System and knowing where they are and exactly how to remove them safely, so that you can create new machines from this machine as an image, is extremely complicated. Thankfully, Microsoft has given us a tool to make this very simple. And that tool is called Sysprep.</p>
<p>Sysprep is located on every version of Windows, in the C Windows system 32 Sysprep folder. There are some ways to edit what Sysprep does and customize it. But the only thing you need to do is set the dropdown for the out-of-box experience, check the box to generalize and then set your shutdown option. Once the process is complete, the <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">VM</a> will still be powered on in <a href="https://cloudacademy.com/library/azure/">Azure</a> but Windows will be shut down, and we’re ready to make an image from that VM’s drive with all unique identifying marks removed.</p>
<p>There is a limitation to how many times you can Sysprep a Windows OS. From Windows XP through Windows 7 on the client side, and Server 2003 through 2008 R2. After three times, you’d have to start over with a clean install of Windows. However, from Windows 8.1 and Server 2012 up to today, including Windows 11 and Server 2022 this limit has been raised to 1001, practically removing the limitation.</p>
<h1 id="Snapshots"><a href="#Snapshots" class="headerlink" title="Snapshots"></a>Snapshots</h1><p>Another thing that makes the image management process complex is that things can go wrong. And depending how bad it is, you could lose all of your work and have to recreate your image from scratch. That’s where snapshots come in. Snapshots are save states that will let you roll back to an earlier version of the <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">VM</a>. When creating a gold image, a snapshot should be used at each step of the process, so you could go back to that step in case something goes wrong. This can also save you if the capture process fails, and that process itself will make the VM unusable.</p>
<p>Let’s walk through creating a snapshot. In the <a href="https://cloudacademy.com/library/azure/">Azure</a> Portal, go to your virtual machine, on the left, select the Disks, then select your operating system <a href="https://cloudacademy.com/course/disks-snapshots-images-azure-1478/disk-types/">disk</a>, and at the top, click to create a snapshot. The subscription and resource group will already be selected for you, and you need to give your snapshot a name. When thinking about the name, I like to put the name of the virtual machine and some kind of reference to what I did and a number for the snapshot. Since you’re going to have multiple snapshots in the VM creation process, the numbers and the names will let you know which ones you need to roll back to in case you have issues. </p>
<p>Next, you have your snapshot type. For image creation snapshots, I always recommend a full instead of incremental. Incrementals work by snapshotting the differences between the virtual machine and the current state, and if I end up with a real big problem like OS corruption along the process, the incremental won’t be able to do a complete restore. A full snapshot will go back completely, and it’s safer for this kind of process. The rest of the items on this page are pulled from the source virtual machine data and cannot be edited.</p>
<p>So the last item here is the storage type for your snapshot. Those are zone-redundant, standard hard disk drive and premium SSD. Zone redundancy is needed if you’re deploying VMs across multiple availability zones. This is a good way to create high availability for your workload. However, be aware that availability zones are still being rolled out and integrated across all of the Azure features, so not everything supports availability zones at this time. But if you’ve tested everything in availability zones, they are a great solution.</p>
<p>As for the other two options, I would use standard hard disk drives over premium SSDs. The reason is because SSDs are more expensive than hard disks, and there is no performance to be gained by using an SSD in this case. And once we have a good image, we’re going to delete all of our snapshots anyway. Click Next, and then we have our encryption type. Now all storage in Azure is encrypted at rest by default using platform managed keys. There are several other choices including customer-managed keys or double encryption by combining a platform and a customer-managed key together.</p>
<p>Unless you have a specific requirement for customer-managed keys or double encryption, I recommend using the default platform managed key for simplicity’s sake. Click Next, and here we have an option for adding network layer security to your images by using something called a private endpoint. Since Azure is a public cloud, you can reach all kinds of services in Azure if you have the right access and security. This particular feature will set up an IP address on your private Azure network for you to directly access your image or deny any kind of network access at all, which would also block the ability to export the snapshot from the cloud.</p>
<p>This is another one of those features that can enhance the security, but also the complexity of your solution. So if you don’t have a specific requirement for private endpoints, then the public endpoint is just fine. Again, because these snapshots will be deleted once the image creation is successful. Click Next, and here’s where we can add tags to your snapshots. Tags are additional metadata that are key and value pairs, and you can assign them to almost every resource in Azure. These can be used to give you additional context as well as searchability and automation in the cloud beyond how you name the resource.</p>
<p>Now I’m not gonna cover tagging strategies in this particular course, but here’s an example of tags that I like to use. The application that this resource is associated with. The cost code, so I know who’s being charged for this resource. The environment, which in this case is my lab. The owner of the resource, so I know who to contact if there’s a problem. And then the support contact information. Once you’re done, go ahead and create your snapshot.</p>
<h1 id="Restoring-a-VM-from-a-Snapshot"><a href="#Restoring-a-VM-from-a-Snapshot" class="headerlink" title="Restoring a VM from a Snapshot"></a>Restoring a VM from a Snapshot</h1><p>Now that you have a snapshot created, let’s go through how you would restore your VM from the snapshot, in case you had a problem. Now, a <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">virtual machine</a> and disc are two separate resources that are attached together to make Windows work. When you created a snapshot, that is an additional resource that contains a copy of the VM disc. So our process here will be to create a disc from that <a href="https://cloudacademy.com/course/disks-snapshots-images-azure-1478/snapshots-and-images/">snapshot</a>, detach the current disc from the virtual machine and then attach our restored disc in its place. This is a great process because it allows you to jump easily between versions of that Windows VM, for troubleshooting, testing of several variations. And it only takes as long as a reboot to get back up and running.</p>
<p>To do this from inside your snapshot, at the top click to create a disc, the subscription and resource group will be selected for you and you need to give your new VM disc a name, as well as select any availability zone, if applicable. At the bottom, you can set the size for your new disc. Just note that you can’t make it smaller than the original disc was, but it can be larger, depending on the size, this could also increase performance. For those encryption and networking tabs, you’ll wanna set these as you did originally when you took the snapshot. But again, if you don’t require extra encryption or network layer security on your VM disc, I would just take the defaults.</p>
<p>Then click over to the advanced tab. The options on this screen are generally not applicable for an operating system disc, but I want you to know what they are. A shared disc is usually used in a clustering solution, where you’ll have multiple virtual machines that need to be able to write to the same disc at the same time. On-demand bursting is available on discs that are 512 gigabytes or larger. And that’s where you can gain extra disc performance or greater throughput in short bursts, beyond what is normally allocated to a disc of that size.</p>
<p>Since operating system discs cannot be shared, and OS discs rarely get as large as 512 gigabytes, we won’t be using these options in this course. So just click next, add your tags. And these are the metadata, and that should be associated with your standard policy for tagging VM discs. And when you’re ready, create your disc. Now that we have a restored disc from our snapshot go back to your virtual machine and on the left, select disc. Near the top, click on that button to swap an OS disc click the dropdown, and choose your disc.</p>
<p>In the top portion, it shows the available discs in the same resource group as your VM and at the bottom, you’ll see every available disc in your subscription in the same region as your VM. Click on the restored disc. Now you’d want to confirm this process by typing the name of the VM in the box and then click okay at the bottom. The swap will only take a moment and it’ll be brought back to the disc screen and you should see the restored disc under the VM disc name.</p>
<h1 id="The-Gold-Image"><a href="#The-Gold-Image" class="headerlink" title="The Gold Image"></a>The Gold Image</h1><p>The term gold image refers to your own certified custom image that you use to build out an application or environment. For this course, our gold image will start with Windows 10, version 20H2, multi-session. And this image will come from the Microsoft gallery. The Windows multi-session image is a special version of the client operating system that can support multiple users remoting into it at the same time. This is a special version of Windows and is only supported in the <a href="https://cloudacademy.com/course/overview-of-azure-services/course-introduction/">Azure Cloud</a>.</p>
<p>So to create your golden image you first need to deploy an Azure BM from the Windows Enterprise multi-session source image. Since our <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">VM</a> will be deployed from the Azure marketplace, we don’t need to take a snapshot right away but we will be taking a snapshot after each step in the process. Once your VM is deployed, you can RDP or log on through Bash in, to access the desktop and we can start installing our customizations. For our customizations, we’ll be doing a few applications that have unique installations for a multi-session environment, including Office, Teams, OneDrive, and a few language packs.</p>
<h1 id="Installing-Office"><a href="#Installing-Office" class="headerlink" title="Installing Office"></a>Installing Office</h1><p>I’ve already downloaded and staged all the executables and files we’ll need to get our applications going. So let’s start with Office. You’ll need to download the Office Deployment Tool and then run setup, agree to the license and extract the files. There are example configurations here for the different kinds of installs, but for course I’m going to delete those and use the example XML from the docs. I’ve opened a command prompt as administrator and will execute the command setup.exe &#x2F;configure configuration.XML, You can see the setup X executable running in the background through the task manager. This will take several minutes.</p>
<p>Once the setup has gone away, you can see the Office click to run in the task manager. And if you click the start button you’ll see the different <a href="https://cloudacademy.com/course/planning-office-365-workloads-and-applications/intro-planning-office-365-workloads-and-applications/">Office apps</a> installed. Once Office is installed. There is an additional script from the docs that we’ll need to optimize our settings for our VDI environment. I’ve saved that here to the Office setup.cmd file, which I will right click and run as administrator. And that’ll just take a moment. Once complete, we can go back to the <a href="https://cloudacademy.com/library/azure/">Azure</a> portal so we can take our snapshot.</p>
<h1 id="Creating-a-VM-Snapshot"><a href="#Creating-a-VM-Snapshot" class="headerlink" title="Creating a VM Snapshot"></a>Creating a VM Snapshot</h1><p>Now, this is the only time I’ll walk you through the snapshot process but just make sure that you take a snapshot after each customization step. Find your <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">virtual machine</a> and on the left, go to disks, select the operating system <a href="https://cloudacademy.com/course/disks-snapshots-images-azure-1478/introduction-to-azure-managed-disks/">disk</a> and then at the top, click to create a snapshot. Give your snapshot a name and I’ll call this VMImage-Office-00. That what I know the source VM name, as well as the last thing I did and which revision of the snapshot this is. We’ll wanna take this as a full snapshot and at the bottom, change zone-redundant to standard hard disk drive and then click next.</p>
<p>On the encryption and networking screens, we’ll just take the defaults, so click Next, and here we can add all of our standard tags. Then click the review and create button. And finally, create your snapshot. With our snapshot complete, we can move on to the next task knowing that we have a saved checkpoint we can go back to later if we run into problems.</p>
<h1 id="Installing-Teams"><a href="#Installing-Teams" class="headerlink" title="Installing Teams"></a>Installing Teams</h1><p>The Teams installation is not only going to install our application but also set up the AV redirection features, which are necessary to make Teams audio and video performance function just as it would on a local machine. This is done by first adding the registry key and then installing the WebRTC executable, followed by installing Teams for all users. Back on our <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">VM</a>, let’s open the registry editor and navigate to HKEY_LOCAL_MACHINE, Software, Microsoft. Then right click on Microsoft, go to new and select a new key. The name for this key will be Teams. Right click on the new Teams key, go to new and select DWORD. And the name, this should be ISWVDEnvironment as one word. Then click on that DWORD and give it a value of one.</p>
<p>Now you can close the registry editor. We now can run the WebRTC Installer. And just note that if you have a problem with this installer, back in the docs, there is a link to download the Visual C Redistributable package. Then try to install WebRTC again. And this will just take a moment. With that complete, open a Command Prompt as administrator, and you’ll want to use the per machine installation command, found in the docs. This is calling the msiexec command to install Teams using the parameter for all users and we’ll store the results in a Teams-Install.log file.</p>
<p>Once complete, in the setup.log file, you’ll see at the bottom the Teams Machine-Wide Installer was completed successfully. And under the Start menu, we can see <a href="https://cloudacademy.com/course/planning-office-365-workloads-and-applications/teams/">Microsoft Teams</a> is present. Now, on your own, go back to the Azure portal and take another snapshot before we move on to the next app.</p>
<h1 id="Installing-OneDrive"><a href="#Installing-OneDrive" class="headerlink" title="Installing OneDrive"></a>Installing OneDrive</h1><p>Each one of the steps is covered here in the <a href="https://cloudacademy.com/library/azure/">Azure</a> docs, beginning with downloading the OneDrive executable, which I’ve already done. I’ll open a Command Prompt as administrator, navigate over to my folder. We’ll add a registry entry so OneDrive can be installed for all users. Next, we can run the OneDrive installer itself with the command OneDriveSetup.exe &#x2F;allusers. Once that’s complete, we can run the next three commands from the docs. They are optional but recommended. The first one will allow OneDrive to start up at sign in for all users.</p>
<p>The second will set up a silent configuration for the user account. And the last command will set up known folder redirection, as well as associate OneDrive with the <a href="https://cloudacademy.com/course/setting-up-and-managing-a-microsoft-365-tenant/setup-microsoft-365-tenant-and-subscription/">M365</a> tenant. And before you run this command, you’ll need to add your tenant ID. This can be found in the Azure portal by going to <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a>. Here in the top middle, you’ll see your tenant ID. Just copy that and paste it into the command and then run it. Once that’s complete, you’re ready for another snapshot.</p>
<h1 id="Installing-a-Language-Pack"><a href="#Installing-a-Language-Pack" class="headerlink" title="Installing a Language Pack"></a>Installing a Language Pack</h1><p>With our third snapshot complete, we’re ready to install our language packs. And of course, which languages you install will depend on your varying needs and which features you need to support. To begin, we need to download the language and feature on-demand ISOs for your specific version of Windows, and you can find the links for this in the <a href="https://cloudacademy.com/library/azure/">Azure</a> docs. Once you’ve started the download of your files, on the right side of the docs, click the link for create a custom Windows 10 Enterprise multi-session image automatically. This will give you a script that’s set up to install Spanish, French and Chinese. And you can use this as a template for any other language you want to install. I’ve saved this as a <a href="https://cloudacademy.com/course/powershell-byte-session-1477/introduction/">PowerShell</a> file on my VM and now I’ll mount the FOD and client packs to my system.</p>
<p>One thing to note in the script that we got out of the docs is line nine, the LIPContent. This is looking for the FOD ISO and for me that’s mounted to the F drive. So I’ve changed my letter here. Make sure that you change yours accordingly. Now go ahead and execute the script.</p>
<p>Now, you might run into one or two errors during the script installation and this will be fine because the script and the FOD ISO don’t always have all the same file names. But while we’re waiting for the process, there is another method that I wanted to show you for setting up language packs. And that’s by opening the Windows Settings menu and then going to time and language. And on the left, click language. In the center here, you can click to add a language. And you’ll have a list of all the different languages and the options. And there’s a legend at the bottom showing you which features are supported in each language. I’ll pick Danish here and you can see all the features that it supports and I’ll click next.</p>
<p>Now, I’m not going to set this as my current displayed language but I’ll click install at the bottom. It will take several minutes to download and set up all these files but once it’s done, you’ll be able to switch also into the Danish language. Once you’re done with this whole step, don’t forget to take a snapshot.</p>
<h1 id="Image-Capture"><a href="#Image-Capture" class="headerlink" title="Image Capture"></a>Image Capture</h1><p>With our image customization completed successfully, and after testing, we’ll find that our VM is still good, and we’re ready to start the capture process. So how do we do this in Azure? Well, once all your applications and customizations are set up on your VM and you have snapshots for safety’s sake at every step, you can run Sysprep, which will shut down the VM. And then we’ll go to the <a href="https://cloudacademy.com/library/azure/">Azure</a> Portal. Inside the <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">virtual machine</a>, at the top, you’ll see a capture button. This will save the generalized VM’s OS disc as an image resource, which can be either standalone, as a managed image, or an image in the Azure Compute Gallery.</p>
<p>A managed image is a standalone resource that you can deploy VMs from, but it is missing some key features that I’ll show you in a minute. The only real options you have to set are if you want zone resiliency or not, which can be valuable if you work in availability zones. However, the preferred path is to use the Azure Compute Gallery. This gives you additional abilities to replicate the image in a single region or across multiple regions, subscriptions, and even across <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a> Tenants.</p>
<p>Next, you have the option to automatically delete the source VM after this is created. This is normally what I’d recommend, because once Sysprep’d, there’s no way to get back inside the Windows operating system. If I needed to go back to the VM, for some reason, I would go and recover from my snapshot. In the Gallery Details section, you can select your Azure Compute Gallery, or create a new one. And since you’ve Sysprep’d your VM already, you’ll see the note that your virtual machine has been generalized.</p>
<p>The final section are the image details that will be stored in the Gallery, including the image definition, which is a container for your versions to go into. And if you don’t have one, click to create a new one, and give it a name. Then we have our version number. This pattern is for major versions, minor versions, and patch versions. So you need something like 15.35.6. Then we have the checkbox to Exclude from Latest.</p>
<p>Now, why would you wanna do that? If you’re creating a new image version, but are not ready to release it for general deployment, excluding will give you a chance to test privately without interfering with any new deployments that are going on. Once your testing is complete, and you are ready to promote the image, you can go into the Gallery and remove the check so the next deployments will use your latest version. The End of Life Date is metadata for your reference. It does not directly impact when the image is or is not usable. It’s just an optional internal reference for your benefit.</p>
<p>Finally, we have the Replication Section. Now your images are extremely important for your ability to scale. A custom image in Azure is limited to deploying 20 virtual machines simultaneously. The way you can scale beyond that is by using the Gallery to create multiple replicas of your image in a single region which can enable you to deploy up to 1000 VMs at once.</p>
<p>Now, before you start thinking about deploying 1000 VMs at the same time there are many other factors that impact your scale of your VM’s deployments like availability zones, availability sets, as well as subscription, quotas and Azure API limits. So just be sure you know all those details and you can plan your deployments accordingly. Our default replica count here is one. This number can be increased to 50, allowing for 1000 VMs to be deployed. Then we have the target regions for the image to be replicated in as well as the storage account type.</p>
<p>For the type, I always recommend using standard hard disc drives with LRS, which stands for a Locally Redundant Storage. This is the lowest cost option to store your images and does not impact the deployment time. As for the target region, this allows you to scale out your image across the world using the default replica count. However, because image capture and replication processes are handled as one work item, I recommend only creating one image replica in a single region. This will allow the image process to finish as fast as possible, which means you can start testing as soon as possible to know if your image is good or if you need to revert back to a snapshot and start troubleshooting.</p>
<p>Once the image process is complete. I’ll show you where you can go in the Azure Compute Gallery to increase your replica accounts. Click next and add your tags like we did for our other resources. And when you’re ready, create your image.</p>
<h1 id="Creating-a-Gold-Image"><a href="#Creating-a-Gold-Image" class="headerlink" title="Creating a Gold Image"></a>Creating a Gold Image</h1><p>Now that you know the details of the process, let’s get our <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">VM</a> captured. Log on to the VM and clean up any installers or temp files unless you’ll specifically need them inside your image. Once you’re ready, head over to C, Windows, System32, Sysprep. Right click on Sysprep.exe and run as administrator. The system cleanup action should be set for the out-of-box experience. Check the generalize box and set your shutdown option for shutdown. Then click OK. Once this is done, Windows will be shut down and we’re ready to capture the VM as an image.</p>
<p>In the Azure portal, open the <a href="https://cloudacademy.com/course/managing-azure-subscriptions-resource-groups/overview-resource-groups/">resource group</a> where the VM is located and notice that we have snapshots for each step of our process so in case the capture process fails, we can roll back to each point, which will make troubleshooting easier. Select your VM and then at the top, select the capture button. Make sure you have the Azure Compute Gallery option selected and check the box to automatically delete this virtual machine. Now choose your target VM image definition. Give your image a version number and select your end of life date. Click next and then add your standard tags. Then click next and create your image.</p>
<p>Once the capture process is complete, you can go back to your resource group and see that you have an <a href="https://cloudacademy.com/library/azure/">Azure</a> Compute Gallery, along with an image definition and image version. When you click on the image version, on the left, you’ll find the configuration tab and in there, you’ll find the exclude from latest checkbox, which at this point, should be unchecked. Back on the left, go to update replicas and this is where you can add multiple replicas in a single region or replicate across multiple regions.</p>
<p>Back on the overview tab, you can click deploy virtual machine at the top, give your VM a name and note that the image is already selected as your version from the compute gallery. Then I’ll just take the rest of the defaults and build a test VM quickly. Once this is done, you can RDP into the machine and test and verify that all your applications and customizations work. Once you verified that everything is good to go, you can delete your snapshots and we can move on to deploying our image to our host pools.</p>
<h1 id="Deploying-a-Session-Host"><a href="#Deploying-a-Session-Host" class="headerlink" title="Deploying a Session Host"></a>Deploying a Session Host</h1><p>Now that we have a gold image, which we’ve successfully tested, we need to deploy a session host using our golden image. Over in the Azure portal, you can search for <a href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure Virtual Desktop</a> in the top bar, and then open the Virtual Desktop Admin Center. On the left, go to your host pools, select a host pool and at the top, click registration key. Now, you may already have a registration key. If you do, then you can proceed in the next step. If not, click at the top to generate a new key. You’ll have to put in a date and time when your key will expire and click OK.</p>
<p>Now that you have a key, you can close that window on the right and on the left side, go to session hosts, and at the top, click the add button. On this first screen is the host pool settings, so just click Next. And here’s where you can build your <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">virtual machine</a>. We need a naming prefix. Now, this needs to be less than 11 characters because we need a net BIOS name to be a maximum of 15 characters. And the way this works is by setting your prefix and then at the end of that prefix, Virtual Desktop will add on a -0, -1, -2 for all of the VMs that you plan on building. I’ll use the prefix CA-VM.</p>
<p>Then we have our availability options. You can choose between availability zones or sets, or choose no redundancy. But the kind of redundancy that you build will depend on your high availability strategy and what kind of host pool you’re deploying. Since this is just a test of our image in Virtual Desktop, I’ll choose no infrastructure redundancy required. Scroll down and underneath the image dropdown box, click the link to see all images. This will show you the Azure Marketplace with every possible image.</p>
<p>On the left at the top, click my items, and that’ll show you your managed images, of which I don’t have any, and then you can click on shared images. And this will show you all of the available images in your Azure Compute Gallery that are within your region. Select your image and you can see that this is using our image definition with the latest flag. As for the number of VMs, we’ll just be deploying one, and then scroll down and select the appropriate network to deploy your virtual machine.</p>
<p>Now we have to make a choice of which kind of join we’re going to do. Do you want Active Directory join or Azure Active Directory join? I’m not going to go into a lot of detail here but I’ll just show you the options. If you use <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Active Directory</a>, you’ll have to provide credentials within your domain in a UPN format that has permissions to join machines to your domain, as well as the password. Then you can specify the domain name and an organizational unit path if you choose to. The other option is Azure Active Directory join, which is much simpler. Your VM will be a registered device within your Azure AD tenant and you have the option to also enable your device for Intune management. Which scenario is right for you will depend on a great many other decisions, as well as features that you want to access.</p>
<p>Next, you’ll enter the local administrator credentials that you want to create on your new virtual machine. Then you can click next. You can optionally enable diagnostic settings, which is normally recommended, however, since this is just a test of our image, I won’t be enabling diagnostics here. Click next and add your standard tags, and then deploy your VM. After the virtual machine is deployed, it will be made part of the Virtual Desktop service as a session host, and if all goes well, all the health status will be set for success and inside the virtual machine, you can check to verify that all your applications are installed and running.</p>
<h1 id="Azure-Image-Builder"><a href="#Azure-Image-Builder" class="headerlink" title="Azure Image Builder"></a>Azure Image Builder</h1><p>The best way to work in the cloud is through automation. Our images are no exception. We can automate the imaging process in <a href="https://cloudacademy.com/library/azure/">Azure</a> with the Azure Image Builder. To use the Azure Image Builder, we need a few things. An Azure subscription, a resource group, an Azure user assigned managed ID so that the the Image Builder can access your subscription, which will also require a custom role, so Image Builder will only do what we allow it to do. Then we’ll need an image template, and this will describe the source image, updates, reboots, applications, and other customizations you need all through code.</p>
<p>Step one is we’ll need to create that image configuration. This will start off with picking your source image and Azure Image Builder supports both Windows and Linux. Although for <a href="https://cloudacademy.com/course/designing-azure-virtual-desktop-architecture-2046/azure-virtual-desktop-overview/">Azure virtual desktop</a> today, we’ll just be working with Windows. Then we look at your customizations. These can be for Windows through powershell scripts and command files, and these scripts need to be accessible to the Image Builder service, so I usually store my scripts on my public GitHub repo. However, there is a way to do this by accessing your resources through a private virtual network, but we’ll just save that for another course.</p>
<p>There’s also native support for running windows updates and restarting your <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">virtual machine</a>. And that means we can also use image builder to automate your monthly update servicing. Your configuration here is fully defined as an image template, and then it’s going to be submitted to the Image Builder service. The Image Builder service itself will spin up some temporary resources in your Azure subscription and build your VM from your image template all through a pipeline in the background. What you’ll see in the Azure portal is a staging resource group and staging resources. And that leads us to the last part, which is the distribution of your brand new Gold Image.</p>
<p>Once the staging VM is finished, CIS prep will run and the VM will be shut down. And the image capture process will occur just like you’ve seen earlier. Then your new Gold Image will be imported into the Azure compute gallery. And a new image version will be established. If you’ve selected multiple regions then your image version will be replicated out to those regions and the process will be complete. So let’s see it in action. Over on the right is the Azure Image Builder GitHub repository for Azure virtual desktop. And you can see that there are several files here. This will say it up and configure FSLogix as well as the Windows optimization code for pooled systems and install teams in an automated way just like we showed you earlier. Then we have an armed template and this is the image template file.</p>
<p>So if we walk through this real quick we have a resource here and this is the image template itself that we’ll be creating. And it has a input required here for a managed ID. There is a property for the build timeout and that means that after 120 minutes by default, the image process will stop. So if everything you are doing will take longer than 120 minutes, you can just increase this number. When Image Builder does its magic, it’s going to build a virtual machine in the cloud in a staging resource group. And that machine will be a D2 V2 in size, and it will use 127 gigabytes for the operating system disc. And this is because the image that it’s going to use as its source is the Windows 10 multi-session image for version 20h1 for enterprise. If you would like to use a different version, you just need to change these values. And if want to use your own existing custom image like we already created, you would replace these four lines of code with an ID for your image.</p>
<p>Then we have the customization section, and here, as I said we’re going to install FSLogix, then run the optimization code. We’ll do a Windows restart, and then install teams followed by another restart. And these script URLs are how we’re going to call applications for Image Builder, and they are in a public GitHub repository that I showed you a moment ago. Then at the bottom, we have our distribution section going to our image gallery. This will create an image definition for you and then replicate the image into the region of your choice. Again, I only recommend going to one region for the initial process. That way, if something goes wrong, the process will finish as fast as possible.</p>
<p>Now over on the left, I have the Azure Cloud Shell open and that’s just to give me a powershell environment that we can execute all of this code. And that begins with this prerequisites section. And this will register the image builder service for your subscription, and then checks on that service to verify that everything is loaded and running. Now I of course have already this, so I’m not going to repeat the process, but you would just copy this code, paste it into your cloud shell, and then wait for it to respond as registered.</p>
<p>In the next section, we’re going to set up some environment variables for Image Builder to function, and I’ll just paste those here into the cloud shell. And now we have a WVD image demo resource group set up in the west US2. And if you wanted something different, then you can just modify the name of the resource group in your own code or the location, or even the name of the image builder template. And the next step we’ll create our managed ID, and we’ll paste that code, and then we’ll hit the yes to all.</p>
<p>Now we’ll assign those new permissions to our managed ID so that the Image Builder can distribute our image to our shared image gallery. Next we’ll create a shared image gallery and so far and we have a new resource group as well as managed ID, our image gallery, and our new image definition. Back in the code, I’ve scrolled down to the download template and configure section. And this is going to download the image template that we looked at earlier into your cloud shell. Make a few edits based on your subscription, resource group, name, region, image definition name, and your managed ID, and insert all of those into your template. And if we just look at the files that are here in my cloud shell, and if we cat the armTemplateWvd.json file, and under our image template resource we have our managed user ID, and we scroll down to see our source image of Windows Multi-session 20h2, and we have our customizations to install FSLogix, the Windows optimizations, reboot, install teams, reboot, and then run Windows update.</p>
<p>And finally, we’ll distribute this image to our shared image gallery to the proper image definition into our selected region. So if we scroll down over here in the code to submit our template, paste into power shell, and that has created a new image template resource, and we can see that over in the Azure portal. We’ve got all the details here for what we just created, including a JSON view, where you can and look at the code and see that it matches everything that we just asked for.</p>
<p>Now, at this point the image template resource has been created, but we haven’t begun the image process. This has just set up everything we need for Image Builder to run. So you can start the process by either clicking start build here in the portal, or over here in powershell. You can copy this text to start your build. And with that, the process is now running. The image template has been submitted to the Image Builder service, and it will begin the process. And you can check on the process with this block of code and you see that the process is currently running with the status of building.</p>
<p>Back in the Azure portal, you can see the same thing with the build run state. And this process will take approximately 20 to 40 minutes depending on what you have inside your image. And it will go for a maximum of 120 minutes because that is what was defined inside our template. And you’ll find a new resource group in your subscription starting with IT underscore, and then the name of the staging resource group, and the name of your template. And as you can see, this has created our staging resources to perform the image creation, and then it will do the capture, which it will deposit our image inside our shared image gallery, just like we saw earlier.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Well, that’ll do it for this course. We’ve covered all there is to know on <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/imaging-in-azure/">imaging in Azure</a>. So you can create your own <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/creating-a-gold-image/">custom images</a> for your virtual desktop <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/deploying-a-session-host/">session hosts</a> and how to manage and replicate those images with the Azure Compute Gallery and how to automate everything, using the <a href="https://cloudacademy.com/course/managing-azure-virtual-desktop-session-host-images-2404/azure-image-builder/">Azure Image Builder</a>. Let me know how I did in this course, your feedback is always welcome so I can improve, and please direct message me on social media and let me know that you are now AVD certified. Thanks for joining me for this course and happy learning.</p>
<p><strong>Sysprep</strong></p>
<p><a href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/sysprep--generalize--a-windows-installation?view=windows-11#limits-on-how-many-times-you-can-run-sysprep">Limits on how many times you can run Sysprep</a></p>
<p><strong>Installing Office</strong></p>
<p><a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/install-office-on-wvd-master-image#install-office-in-shared-computer-activation-mode">Install Office for AVD</a></p>
<p><strong>Installing Teams</strong></p>
<p><a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/teams-on-avd">Teams with A&#x2F;V Redirection</a></p>
<p><strong>Installing OneDrive</strong></p>
<p><a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/install-office-on-wvd-master-image#install-onedrive-in-per-machine-mode">OneDrive for AVD</a></p>
<p><strong>Installing a Language Pack</strong></p>
<p><a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/language-packs">Add Language Packs</a></p>
<p><strong>Creating a Gold Image</strong></p>
<p><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/shared-image-galleries">Azure Compute Gallery</a></p>
<p><strong>Azure Image Builder</strong></p>
<p><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/image-builder-overview">Azure Image Builder</a></p>
<p><a href="https://github.com/danielsollondon/azvmimagebuilder/tree/master/solutions/14_Building_Images_WVD">Image Builder for AVD GitHub repo</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Autoscaling-on-Azure-App-Service-5</title>
    <url>/2022/11/14/AZ-204-Autoscaling-on-Azure-App-Service-5/</url>
    <content><![CDATA[<h1 id="Autoscaling-on-Azure-App-Service"><a href="#Autoscaling-on-Azure-App-Service" class="headerlink" title="Autoscaling on Azure App Service"></a>Autoscaling on Azure App Service</h1><p>Welcome to “Autoscaling on Azure App Service”. To get the most from this course, you should already have some basic experience using App Service. If you don’t, then you can take our “<a href="https://cloudacademy.com/course/introduction-azure-app-service-2185/introduction/">Introduction to Azure App Service</a>” course.</p>
<p>All right, let’s get started. If you need to add more resources to an app running on App Service, one way is to scale up its resources by switching its App Service Plan to a higher pricing tier. This is very easy to do, and it only takes a few seconds, but it’s not a very dynamic solution. For example, what if your app gets used a lot more on weekdays than on weekends? You wouldn’t want to scale up and scale down your app’s service plan every week.</p>
<p>A more elegant solution is to have Azure add more virtual machines when your app is busier and remove VMs when it’s less busy. This is known as scaling out and scaling in rather than scaling up and scaling down. It’s only available on Basic plans and higher. It’s not available on Free or Shared plans.</p>
<p>Keep in mind, though, that even the Basic tier probably won’t give you what you need. That’s because it only allows you to scale in and out manually. If you want Azure to scale without manual intervention, then you need autoscaling, which is only available on Standard plans and higher.</p>
<p>The service that actually handles autoscaling is Azure Monitor. So, you can get to the autoscale settings either by selecting “Scale out” from the menu in your Service Plan or by going to Azure Monitor and selecting “Autoscale” and then selecting your Service Plan.</p>
<p>The way it works is that you can create one or more scale conditions that specify exactly what will trigger Azure to add or remove virtual machines. In each scale condition, you need to add one or more rules. For example, you could say that if the average CPU percentage of the VMs in your Service Plan is over 75% for at least 10 minutes, then it should increase the number of VM instances by one.</p>
<p>There are a huge number of variations in the rules that you can create. First, there are different metrics to choose from. Aside from CPU percentage, there’s also memory percentage, data in, data out, disk queue length, and a wide variety of network metrics, such as “Socket count for inbound requests”.</p>
<p>You can also tell it to look for the minimum or maximum value of a metric rather than the average. For example, you could tell it to scale out if the CPU percentage reaches 75% at any time during a 10-minute period.</p>
<p>It doesn’t have to be a 10-minute period either. You can set it to aggregate the metric over any number of minutes you want. And, of course, it doesn’t need to be 75%. You can set that to whatever percentage you want, too.</p>
<p>Then there’s the scaling action that you want it to take. You can tell it to scale out by exactly a certain number of VM instances, such as 1 in our example, or scale out to a total number of instances, such as 3, or you can tell it to scale out by a percentage. For example, you can tell it to scale out the number of instances by 50% if the condition is met.</p>
<p>You can also set something called a “cool down” period. This is the number of minutes to wait after a scaling operation before it can scale again. By default, it’s set to 5 minutes. This gives the metrics a chance to stabilize again after the scaling operation.</p>
<p>For example, suppose you have a rule saying that if the average CPU percentage is over 70% for 5 minutes, then add an instance. Then suppose you have 2 instances, and the average CPU percentage reaches 90%, which causes it to add another instance. If you didn’t have a cool-down period, the CPU percentage might still be above 70% for a little while until the new instance has spun up and taken some load off of the other instances, which could trigger the unnecessary addition of yet another instance.</p>
<p>So far, I’ve only mentioned scaling out, but you can create rules for scaling in as well. They work the same way except that everything is reversed. For example, you could tell it to scale in by one instance if the average CPU percentage is below 25% during a 10-minute period.</p>
<p>Now, things really get interesting when you have multiple rules. For example, suppose that you have these rules:</p>
<ul>
<li>Scale out by one instance if CPU utilization is above 65 percent</li>
<li>Scale out by one instance if disk queue length reaches more than 1700</li>
<li>Scale in by one instance if CPU utilization drops below 35 percent</li>
</ul>
<p>Now suppose that your instances are at 30 percent CPU utilization, and the disk queue length is 1900 messages. Will it scale in or scale out or stay the same? The answer isn’t obvious because there are conflicting rules. The CPU utilization is below 35 percent, so maybe it will scale in by one instance. But the disk queue length is more than 1700, so maybe it will scale out by one instance. Do the two rules cancel each other out, or does one of them have priority? Well, Azure autoscaling has a very sensible policy in these situations. Scale-out rules always win over scale-in rules. That’s because if any aspect of the system needs more resources, then it should scale out. Scaling in would just make performance worse.</p>
<p>Okay, that was a lot of information, but believe it or not, there are a couple of other important autoscaling options that I haven’t mentioned yet: scaling to a specific instance count and scheduling.</p>
<p>Previously, I showed scaling based on a metric, such as CPU percentage, but it’s also possible to create a scale condition that doesn’t involve metrics. To do this, you select “Scale to a specific instance count” instead of “Scale based on a metric” when you create a scale condition. This is much simpler than the metric-based process. You just tell it the number of instances you want it to scale to.</p>
<p>Of course, this doesn’t really sound like autoscaling, does it? Without a metric, how will it know when to scale to a specific instance? That’s where scheduling comes in. You simply set a start time and an end time for when this condition should be in effect. If you want it to happen on a recurring basis, you can select “Repeat specific days” and tell it which days you want it to happen every week. For example, you could scale out to a specific instance count on weekdays.</p>
<p>It’s also possible to use a schedule for a metric-based condition. For example, you could configure it to scale based on CPU percentage only on weekends but scale out to a specific instance count during weekdays. In this example, you’d have both metric-based and specific instance-based conditions in the same Service Plan, but since you scheduled them for different days, there wouldn’t be a conflict.</p>
<p>And that’s it for autoscaling on Azure App Service. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>
<h2 id="1Autoscaling-on-Azure-App-Service"><a href="#1Autoscaling-on-Azure-App-Service" class="headerlink" title="1Autoscaling on Azure App Service"></a>1<strong>Autoscaling on Azure App Service</strong></h2><p><a href="https://cloudacademy.com/course/introduction-azure-app-service-2185/introduction/">Course: Introduction to Azure App Service</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Cert-Prep-Developing-Solutions-for-Microsoft-Azure-37</title>
    <url>/2022/11/14/AZ-204-Cert-Prep-Developing-Solutions-for-Microsoft-Azure-37/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Building-Containers-with-Azure-DevOps-11</title>
    <url>/2022/11/14/AZ-204-Building-Containers-with-Azure-DevOps-11/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Welcome to “Building Containers with Azure DevOps”. My name is Thomas Mitchell and I’ll be taking you through this course. </p>
<p>I’m an Azure Instructor at Cloud Academy and I have over 25 years of IT experience, several of those with cloud technologies. If you have any questions, feel free to connect with me on LinkedIn, or send an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>This course is intended for DevOps professionals who wish to learn how to design and implement, through the use of containers, strategies for developing application code and infrastructure that allow for continuous integration, testing, delivery, monitoring, and feedback.</p>
<p>To get the most from this course, you should have a basic understanding of the <a href="https://cloudacademy.com/library/azure/">Azure</a> platform and of container concepts.</p>
<p>We’ll kick off by talking about ways to create deployable images. You’ll learn about <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/the-power-of-docker-containers/">docker containers</a> and their role in development. You’ll also learn about microservices and where they fit in.</p>
<p>After discussing microservices, we’ll dive into the different Azure container-related services. We’ll talk about Azure Container Instances, the Azure Kubernetes Service, the Azure Container Registry, and Azure Service Fabric. We’ll also tough on Azure App Service.</p>
<p>Once we finish up with the different container-related services, we’ll look at a typical Dockerfile.</p>
<p>Later on, in this course, we’ll look at Docker multi-stage builds. You’ll learn what multi-stage builds are, and things to consider when working with multi-stage builds.</p>
<p>We’ll round things out with a hands-on demonstration that shows you how to create an Azure Container Registry,</p>
<p>By the time you complete this course, you’ll have a better understanding of containers and how they are used in Azure DevOps.</p>
<p>We’d love to get your feedback on this course, so please give it a rating when you’re finished. If you’re ready to learn how to build containers with Azure DevOps, let’s get started.</p>
<h1 id="The-Power-of-Docker-Containers"><a href="#The-Power-of-Docker-Containers" class="headerlink" title="The Power of Docker Containers"></a>The Power of Docker Containers</h1><p>Hello and welcome to “The Power of Docker Containers”. Let’s talk a little bit about what Docker containers bring to the table as far as the development process goes.</p>
<p>As a software containerization platform, Docker offers developers a common toolset and packaging model. It also provides a deployment mechanism for containerized apps. This results in simplified management, regardless of the host, as well as a seamless <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/introduction/">DevOps</a> experience.</p>
<p>Docker images can be created and deployed identically across virtually any environment in seconds. The Docker ecosystem is huge. This ecosystem includes hundreds of thousands of apps that are packaged in Docker containers. DockerHub, which is the Docker-maintained public containerized application registry, publishes almost 200,000 applications in the public community repository. </p>
<p>The notion that you can deploy a SQL Server Linux instance in seconds, using a Docker image, is a testament to the power of containers. It is this power that <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/microservices-and-containers/">containerization</a> brings to the DevOps sphere.</p>
<h1 id="Microservices-and-Containers"><a href="#Microservices-and-Containers" class="headerlink" title="Microservices and Containers"></a>Microservices and Containers</h1><p>Hi there. Welcome to Microservices and Containers. Although containers have been most commonly used to simplify <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/introduction/">DevOps</a> through simplified developer-to-test-to-production flows, there are other uses for them. Microservices, for example, is a quickly-growing use-case for containers. </p>
<p>The term “Microservices” refers to an application development strategy where each part of an application is actually deployed as a completely self-contained component (or microservice). The microservices that comprise an application can then be individually scaled and updated. </p>
<p>The easiest way to explain the concept of microservices is to use an example scenario.</p>
<p>Let’s imagine for a second that your organization is the author of a large, monolithic tax application. As part of the development of the next revision of the software, your organization wants to migrate it to a collection of microservices. </p>
<p>Now, the current app might include a piece of code that does some specific tax calculation in certain circumstances – and this code may exist in several spots within the app. Whenever new tax laws are approved or changed, changes are needed in the calculation of taxes. This means that the same changes need to be made anywhere this tax calculation is performed within the app.</p>
<p>By moving to a collection of microservices, you could allow the application to create a notification that a tax calculation needs to be made in response to some scenario. Microservices involved in that calculation can be subscribed to those notifications – and then those individual microservices can do what they need to do to perform the tax calculations. You’d likely have one specific microservice that does the actual calculation.</p>
<p>Whenever a new tax law is enacted that affects tax calculations, you would only need to update the microservice(s) responsible for the calculations. You wouldn’t need to make changes throughout the app code base.</p>
<p>While you might operate a development or testing environment on a single server or by using a single instance of each microservice, production is typically a different story. In such an environment, you are likely going to want to be able to scale things out. You’ll probably want to scale out to multiple instances across a cluster of servers, rather than running things on one server. You’ll want the ability to scale in as well. You may also want different teams within your development department to be able to independently work on, and update, different microservices that each team is responsible for.</p>
<p>This is where microservices can really shine. By leveraging the benefits of <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/the-power-of-docker-containers/">Docker containers</a> when working with more complex microservice-based applications, organizations can become more agile, because those microservices can be quickly scaled out and in to meet the loads on the application. While doing so, however, the isolation of resources and namespaces offered by containers ensures that one microservice instance does not interfere with any other instances. This makes it easier to design a solid microservice architecture, which, in turn, allows organizations to deal with the management, deployment, orchestration, and patching needs of <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/container-related-services-in-azure/">container-based services</a> – while limiting the risks to availability.</p>
<h1 id="Container-Related-Services-in-Azure"><a href="#Container-Related-Services-in-Azure" class="headerlink" title="Container-Related Services in Azure"></a>Container-Related Services in Azure</h1><p>Hi there. Welcome to “Container-Related Services in Azure”. In this lecture, we’ll take a quick 30,000 foot view of each of the container-related services that are available in <a href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>. We’ll look at Azure Container Instances, the Azure Kubernetes Service, the Azure Container Registry, Azure Service Fabric, and Azure App Service.</p>
<p>Let’s start with Azure Container Instances.</p>
<p>When you run workloads in Azure Container Instances, you can focus on app development and deployment instead of the deployment and management of the underlying infrastructure that’s necessary to run those apps.</p>
<p>While Azure Container Instances are easy to deploy, the main advantage of using them is the security that the hypervisor isolation that they provide for each container group. With this type of isolation available, you can be sure that your organization’s containers aren’t sharing their OS kernel with other containers.</p>
<p>You can read more about Azure Container Instances by visiting the URL that you see on your screen:</p>
<p><a href="https://azure.microsoft.com/en-us/services/container-instances/">https://azure.microsoft.com/en-us/services/container-instances/</a></p>
<p>The Azure Kubernetes Service started out as Azure Container Services, or ACS. It originally supported Docker Swarm and Mesos&#x2F;Mesosphere DC&#x2F;OS for orchestration management. However, when Kubernetes support was added, it became so popular that Microsoft eventually renamed the Azure Container Service to the Azure Kubernetes Service, or AKS.</p>
<p>At this point, Kubernetes is really the standard for container orchestration. Using the Azure Kubernetes Service, you can not only deploy and manage Kubernetes, but you can also scale and run your applications in a secure environment.</p>
<p>To learn more about the Azure Kubernetes Service, visit the URL that you see on your screen:</p>
<p><a href="https://azure.microsoft.com/en-us/services/kubernetes-service/">https://azure.microsoft.com/en-us/services/kubernetes-service/</a></p>
<p>The Azure Container Registry is another container-centric service offering available in Azure. It allows you to store and manage your container images in a central registry, which is integrated with several other Azure services, including the App Service, Batch, and Service Fabric, among others. </p>
<p>Azure Container Registry supports many types of container deployments, including DC&#x2F;OS, Docker Swarm, and Kubernetes. Because of the broad support that Azure Container Registry offers, you can manage the configuration of your applications without being locked into the configuration of the target hosting environment. </p>
<p>To read more about the Azure Container Registry, visit the URL that you see on your screen:</p>
<p><a href="https://azure.microsoft.com/en-us/services/container-registry/">https://azure.microsoft.com/en-us/services/container-registry/</a></p>
<p>Azure Service Fabric is a distributed systems platform that allows you to build and operate always-on, scalable, distributed apps. The service makes it easier to package, deploy, and manage scalable and reliable <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/microservices-and-containers/">microservices and containers</a>. It can also host and orchestrate containers.</p>
<p>By leveraging Azure Service Fabric, you can avoid infrastructure problems and focus solely on the deployment of mission-critical workloads that are not only reliable, but also scalable. </p>
<p>For more details on the Azure Service Fabric, visit the URL that you see on your screen:</p>
<p><a href="https://azure.microsoft.com/en-us/services/service-fabric/">https://azure.microsoft.com/en-us/services/service-fabric/</a></p>
<p>Azure Web Apps is an Azure offering that provides you with a managed service for both Windows-based and Linux-based web applications. This service allows you to deploy and run containerized apps for both platforms and it also offers auto-scaling and load balancing options. You can even integrate with <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/introduction/">Azure DevOps</a>.</p>
<p>To read more about the Azure App Service, visit the URL that you see on your screen:</p>
<p><a href="https://azure.microsoft.com/en-us/services/app-service/">https://azure.microsoft.com/en-us/services/app-service/</a></p>
<h1 id="Anatomy-of-a-Dockerfile"><a href="#Anatomy-of-a-Dockerfile" class="headerlink" title="Anatomy of a Dockerfile"></a>Anatomy of a Dockerfile</h1><p>Hi there. Welcome to “Anatomy of a Dockerfile”. In this lecture, we’re going to look at a basic Dockerfile, line by line.</p>
<p>Dockerfiles are used by docker build to assemble images. They are essentially text files that contain the commands that are necessary to build an image. On your screen is an example of a very basic Dockerfile. </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM ubuntu </span><br><span class="line">LABEL maintainer=&quot;tmitchell@cloudacademy.com&quot; </span><br><span class="line">ADD appsetup / </span><br><span class="line">RUN /bin/bash -c &#x27;source $HOME/.bashrc; echo $HOME&#x27; </span><br><span class="line">CMD [&quot;echo&quot;, &quot;Hi everybody!&quot;] </span><br></pre></td></tr></table></figure>

<p>Generally speaking, every image is based off another existing image. In this sample Dockerfile here, line one refers to the parent image that this new image will be based on. The Ubuntu image referred to in line one would be retrieved from either a local cache or from DockerHub.</p>
<p>I should point out here that an image that doesn’t have a parent is called a base image. If that were the case here, what we could do with this Dockerfile is completely omit the FROM line altogether. We could also replace it with FROM scratch, instead. However, since we’re using the ubuntu base image, we are referencing it in the file.</p>
<p>The second line in this sample Dockerfile uses the LABEL command to set the email address of the person who maintains the file.</p>
<p>The third line in our example uses the ADD command to add a file, called “appsetup” into the root folder of the image being created.</p>
<p>The fourth line is a RUN command that runs when the image is being created by docker build. This part of the Dockerfile is typically used to configure things within the image. </p>
<p>The last line in our sample file calls a command that we want to execute once the new container is created from the image.</p>
<p>Of course, every Dockerfile will be different – and they can be as simple or as complex as they need to be. Simpler, however, is always better than complex, when possible.</p>
<p>For more information, visit the Dockerfile reference URL that you see on your screen:</p>
<p><a href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></p>
<h1 id="Multi-Stage-Builds"><a href="#Multi-Stage-Builds" class="headerlink" title="Multi-Stage Builds"></a>Multi-Stage Builds</h1><p>Hi there. Welcome to “Multi-Stage Builds”. In this lecture, we’re going to take a look at what multi-stage builds are and what they bring to the table.</p>
<p>So, Multi-stage builds are a new feature that makes life easier when working with <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/anatomy-of-a-dockerfile/">Dockerfiles</a>. They are extremely helpful when trying to optimize Dockerfiles while ensuring that they are still easy to read.</p>
<p>Prior to the introduction of multi-stage builds, what you would typically have is one Dockerfile to use for development. This Dockerfile would contain everything that you need to build the application that you wished to deploy. You’d also have a second, slimmed-down Dockerfile that you would use for production. This second file would contain just the application and only the resources needed to run it. This “builder pattern” of maintaining two Dockerfiles, obviously, isn’t ideal.</p>
<p>The code that you see on your screen is a good example of what the typical “builder pattern” consists of. Notice we have 3 different files. We have DockerFile.build, the Dockerfile, and build.sh.</p>
<p>Dockerfile.build:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM golang:1.7.3</span><br><span class="line">WORKDIR /go/src/github.com/alexellis/href-counter/</span><br><span class="line">RUN go get -d -v golang.org/x/net/html </span><br><span class="line">COPY app.go .</span><br><span class="line">RUN go get -d -v golang.org/x/net/html \</span><br><span class="line"> &amp;&amp; CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .</span><br><span class="line">Dockerfile:</span><br><span class="line">FROM alpine:latest </span><br><span class="line">RUN apk --no-cache add ca-certificates</span><br><span class="line">WORKDIR /root/</span><br><span class="line">COPY app .</span><br><span class="line">CMD [&quot;./app&quot;] </span><br><span class="line">build.sh:</span><br><span class="line">#!/bin/sh</span><br><span class="line">echo Building alexellis2/href-counter:build</span><br><span class="line">docker build --build-arg https_proxy=$https_proxy --build-arg http_proxy=$http_proxy \ </span><br><span class="line">  -t alexellis2/href-counter:build . -f Dockerfile.build</span><br><span class="line"> </span><br><span class="line">docker create --name extract alexellis2/href-counter:build </span><br><span class="line">docker cp extract:/go/src/github.com/alexellis/href-counter/app ./app </span><br><span class="line">docker rm -f extract</span><br><span class="line">echo Building alexellis2/href-counter:latest</span><br><span class="line">docker build --no-cache -t alexellis2/href-counter:latest .</span><br><span class="line">rm ./app</span><br></pre></td></tr></table></figure>

<p>If you look at this example, you’ll see that it artificially compresses two different RUN commands together. This is done to avoid creating an additional layer in the image. As is the case with any sort of coding, the more code you have, the more error-prone it becomes – and the more difficult it becomes to maintain.</p>
<p>When the build.sh script is run, it first has to build the first image. Then, it needs to create a container from it, so that it can copy the artifact out, before building the second image. In this scenario, you are left with 2 images – both of which take up room on your system. You are also left with the app artifact on your local disk as well.</p>
<p>Enter Multi-stage builds, which greatly simplify things.</p>
<p>Prior to multi-stage builds, keeping image sizes down was a challenge. This is because every instruction included within a Dockerfile adds a layer to the image. Not only that, but you also need to remember to clean up unneeded artifacts before moving on to the next layer. </p>
<p>Until multi-stage builds became available, authoring an efficient Dockerfile meant using shell tricks and other logic to keep the layers as small as possible. You also had to use the same tricks to ensure that each layer has only the artifacts that it needs from the previous layer and nothing else.</p>
<p>On the screen is an example of a multi-stage file.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM golang:1.7.3</span><br><span class="line">WORKDIR /go/src/github.com/alexellis/href-counter/</span><br><span class="line">RUN go get -d -v golang.org/x/net/html </span><br><span class="line">COPY app.go .</span><br><span class="line">RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .</span><br><span class="line">FROM alpine:latest </span><br><span class="line">RUN apk --no-cache add ca-certificates</span><br><span class="line">WORKDIR /root/</span><br><span class="line">COPY --from=0 /go/src/github.com/alexellis/href-counter/app .</span><br><span class="line">CMD [&quot;./app&quot;] </span><br></pre></td></tr></table></figure>

<p>When you leverage multi-stage builds, you can use multiple FROM statements within the Dockerfile. Each of the FROM statements begins a new stage. The stages, themselves, are numbered in order, starting with stage 0. What you would typically do, though, to make the Dockerfile easier to maintain, is use the AS clause to name, or alias, each stage.</p>
<p>Notice the aliasing that’s been added to the file on your screen:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM golang:1.7.3 AS builder</span><br><span class="line">WORKDIR /go/src/github.com/alexellis/href-counter/</span><br><span class="line">RUN go get -d -v golang.org/x/net/html </span><br><span class="line">COPY app.go  .</span><br><span class="line">RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM alpine:latest </span><br><span class="line">RUN apk --no-cache add ca-certificates</span><br><span class="line">WORKDIR /root/</span><br><span class="line">COPY --from=builder /go/src/github.com/alexellis/href-counter/app .</span><br><span class="line">CMD [&quot;./app&quot;] </span><br></pre></td></tr></table></figure>

<p>This example on your screen names the stage and uses the name in the COPY instruction. By referencing the name in the copy instruction, even if the instructions in this Dockerfile are re-ordered later on for some reason, the COPY won’t break.</p>
<p>I should also mention that when you build an image, you don’t have to build the entire Dockerfile, including every stage. Instead, you can specify a single target build stage. The command that you see on your screen, when using our example Dockerfile, stops at the stage named builder:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker build --target builder -t alexellis2/href-counter:latest</span><br></pre></td></tr></table></figure>

<p>The –target option, in this command, tells docker build to create an image up to the target of builder, which is a named stage in our example file. </p>
<p>In the next lesson, we’ll take a look at some best practices that you can follow when working with <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/best-practices-for-multi-stage-builds/">multi-stage builds</a>.</p>
<h1 id="Best-Practices-for-Multi-Stage-Builds"><a href="#Best-Practices-for-Multi-Stage-Builds" class="headerlink" title="Best Practices for Multi-Stage Builds"></a>Best Practices for Multi-Stage Builds</h1><p>Hi there. Welcome to Best Practices for <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/multi-stage-builds/">Multi-Stage Builds</a>. In this lecture, we’re going to review some of the best practices that you should be following when working with multi-stage builds. We’re going to talk about adopting container modularity, avoiding unnecessary packages, choosing an appropriate base, and avoiding the inclusion of application data.</p>
<p>When working with builds, you really want to avoid overly complex container images that couple together several applications. Instead, what you should be doing is using multiple containers, with each one intended for a single purpose. For example, you might want to put a website in one container but relegate the database for the website to another container.</p>
<p>While there are always going to be exceptions to this rule, splitting up the components of an application into separate containers makes it more likely that you will be able to minimize work effort by being able to reuse containers. Adopting container modularity will also often make it easier to scale an application. Using our website example from earlier, container modularity would allow you to add replicas of the website container while leaving the database container alone. </p>
<p>An easy way to minimize image sizes is to avoid including unnecessary packages in your images. For example, instead of including packages that you think you MIGHT need, leave them out until you are sure you need them. Once you are sure you need them, you can include them.</p>
<p>Choosing an appropriate base image, or parent image, allows you to optimize the contents of your Dockerfile. By starting with an image that only contains the packages that you need, you can keep your Dockerfiles in check. </p>
<p>Although it’s possible to store your application data right inside the <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/demo-create-an-azure-container-registry/">container</a>, doing so increases the size of your image. This runs counter to the idea of optimizing things. Instead of storing app data in your containers, you should consider using docker volume support. By doing so, you can maintain isolation of the application itself, and its data. </p>
<p>For more Dockerfile best practices, visit the URL that you see on your screen:</p>
<p><a href="https://www.docker.com/blog/intro-guide-to-dockerfile-best-practices/">https://www.docker.com/blog/intro-guide-to-dockerfile-best-practices/</a></p>
<h1 id="Demo-Create-an-Azure-Container-Registry"><a href="#Demo-Create-an-Azure-Container-Registry" class="headerlink" title="Demo: Create an Azure Container Registry"></a>Demo: Create an Azure Container Registry</h1><p>Hi there and welcome back. In this demonstration, we’re going to do a couple of different things. First, we’re going to deploy a Container Registry in Microsoft Azure using the Azure portal. Once we’ve got that deployed, we’re going to log in to that registry, using the Azure CLI from our local workstation. Once we’ve logged into our registry, what we’re going to do is use the <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/demo-add-docker-support-to-an-existing-application/">Docker</a> terminal which is also installed on our local workstation. And we’re going to first, pull down a basic hello world image from the Docker Hub.</p>
<p>Once we have the Hello World image pulled down from Docker Hub, we’ll take that image and we’ll push it to our Container Registry in <a href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>. Once we have it pushed to our Container Registry in Azure, we’ll go back to the Azure portal, and we’ll take a look and confirm that our hello world image has in fact been pushed into our Container Registry. So let’s get started here.</p>
<p>On the screen, you can see I’m logged into my Azure Portal here, I’m at my homepage. I am logged in as the admin here. To deploy a Container Registry, we’re simply going to create a resource. And we’ll search the marketplace for Container Registry. And we can see Container Registry here and we’ll create it. We need to give our registry a unique name. And we’ve called it my9878 and it appends, what Azure will do here is append this azurecr.io domain name to your registry name.</p>
<p>So the registry name needs to be unique across Azure. We’ll deploy into our lab subscription and into my resource group. We can leave the rest of this stuff here at its default. We’ll go ahead and click Create. The deployment here shouldn’t take long, usually a couple minutes at most. We can see it’s been deployed. So we’ll go to our resource here. And if we go into repositories within our registry, we can see we have no repositories here.</p>
<h1 id="Demo-Add-Docker-Support-to-an-Existing-Application"><a href="#Demo-Add-Docker-Support-to-an-Existing-Application" class="headerlink" title="Demo: Add Docker Support to an Existing Application"></a>Demo: Add Docker Support to an Existing Application</h1><p>So now that our my9878 <a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/demo-create-an-azure-container-registry/">container registry</a> has been deployed. Let’s log into it using the Azure CLI from my workstation. So let me bounce down here. I actually have my PowerShell running and my Docker terminal here. So let’s open up PowerShell here. And from PowerShell what I’m going to do is run the az acr login command. And when I do this, I need to specify the name of my repository.</p>
<p>Now oddly enough, I don’t need to nor should I include the azurecr.io domain name when I specify the name for my repository here. So we bounced back out to overview. See the full login server here, my9878.azurecr.io Instead, I just use the name that I gave my repository. So we’ll go ahead hit enter here and we can see that our login has succeeded. Now what we’re going to do into this exercise is push the basic hello world image up to my container registry. That being said, I have to obtain that hello world image first and I’m going to obtain that from Docker Hub.</p>
<p>Now to do that, I’m going to switch over to my Docker terminal here. Now from Docker terminal, what I’m going to do is run a Docker pull hello world command and what this will do is pull the latest hello world image from Docker.io So it’s coming from Docker Hub. Now before we push this image into our container registry. We need to first tag it with the fully qualified domain name of our ACR login server.</p>
<p>If we bounce out to our Azure portal, we can see the FQDN for our login server is my9878.azurecr.io So that’s what we’re going to use here. So let’s bounce back into our terminal here. And we’re going to use the Docker tag command to perform this tagging. Along with the tag command, we need to specify the image. After specifying the name of the image we want to tag, we need to specify the ACR login server. And with that we need to specify the name of our image and the versioning for it.</p>
<p>So we’ll go ahead and tag it. And then what we’ll do now is perform the push using the Docker push command. And essentially we’re going to specify the name we just called in the Docker tag command. And we can see it prepares and then pushes and tells us the image has been pushed. To confirm that our image has been pushed, we can go into our portal and then take a look at our repositories. And we can see hello world is now listed as a repository.</p>
<p>At this point, we can now try to run the image from our container registry. And to do that we’ll bounce back down into our Docker terminal. And from here we’ll use the Docker run command. So we’ll go Docker run and again, we’ll specify the image from our registry. And if we look closely here we can see we get a message from Docker telling me that our installation appears to be working correctly.</p>
<p>So with that, we’ve deployed a container registry in <a href="https://cloudacademy.com/library/azure/">Microsoft Azure</a> using the portal. We used Azure CLI within Azure PowerShell from our local workstation to log in to our registry. And then we used the Docker terminal to pull down an image from Docker Hub. We tagged it and then we pushed that image up into our own registry. Once we confirmed that the push was successful, we were also able to successfully run the image from our registry. So with that let’s call it a wrap.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Congratulations! You’ve come to the end of “<a href="https://cloudacademy.com/course/building-containers-with-azure-devops-978/introduction/">Building Containers with Azure DevOps</a>“. Let’s review what you’ve learned!</p>
<p>We kicked things off by talking about ways to create deployable images. You learned about docker containers and their role in development. You also learned about microservices and where they fit in.</p>
<p>After discussing microservices, we looked at the different Azure container-related services. We talked about Azure Container Instances, the Azure Kubernetes Service, the Azure Container Registry, and Azure Service Fabric. We also touched on Azure App Service.</p>
<p>After finishing up with the different container-related services, you learned what a typical Dockerfile looks like.</p>
<p>Later on, you learned about Docker multi-stage builds. You learned what multi-stage builds are, and things to consider when working with multi-stage builds.</p>
<p>We wrapped up with a hands-on demonstration that showed you how to create an Azure Container Registry.</p>
<p>At this point, you should have a better understanding of containers and how they are used in Azure DevOps.</p>
<p>I should point out, before you go, that, in addition to completing courses like this one, you should always keep up with the latest features and services by reading Microsoft’s published documentation as well.</p>
<p>As always, thanks for watching, and happy learning!</p>
<h2 id="4Container-Related-Services-in-Azure"><a href="#4Container-Related-Services-in-Azure" class="headerlink" title="4Container-Related Services in Azure"></a>4<strong>Container-Related Services in Azure</strong></h2><p><a href="https://azure.microsoft.com/en-us/services/container-instances/">Azure Container Instances</a></p>
<p><a href="https://azure.microsoft.com/en-us/services/kubernetes-service/">Azure Kubernetes Service</a></p>
<p><a href="https://azure.microsoft.com/en-us/services/container-registry/">Azure Container Registry</a></p>
<p><a href="https://azure.microsoft.com/en-us/services/service-fabric/">Azure Service Fabric</a></p>
<p><a href="https://azure.microsoft.com/en-us/services/app-service/">Azure App Service</a></p>
<h2 id="5Anatomy-of-a-Dockerfile"><a href="#5Anatomy-of-a-Dockerfile" class="headerlink" title="5Anatomy of a Dockerfile"></a>5<strong>Anatomy of a Dockerfile</strong></h2><p><a href="https://docs.docker.com/engine/reference/builder/">Dockerfile reference</a></p>
<h2 id="7Best-Practices-for-Multi-Stage-Builds"><a href="#7Best-Practices-for-Multi-Stage-Builds" class="headerlink" title="7Best Practices for Multi-Stage Builds"></a>7<strong>Best Practices for Multi-Stage Builds</strong></h2><p><a href="https://www.docker.com/blog/intro-guide-to-dockerfile-best-practices/">Dockerfile best practices</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Configuring-Azure-Blob-Storage-Lifecycle-Management-20</title>
    <url>/2022/11/14/AZ-204-Configuring-Azure-Blob-Storage-Lifecycle-Management-20/</url>
    <content><![CDATA[<h1 id="Configuring-Azure-Blob-Storage-Lifecycle-Management"><a href="#Configuring-Azure-Blob-Storage-Lifecycle-Management" class="headerlink" title="Configuring Azure Blob Storage Lifecycle Management"></a>Configuring Azure Blob Storage Lifecycle Management</h1><p>Welcome to “Configuring Azure Blob Storage Lifecycle Management”. I’m Guy Hummel. To get the most from this course, you should already have some knowledge of Azure Blob Storage. In this short course, I’ll explain how you can save money by setting up lifecycle management policies to automatically move your blobs to less expensive access tiers when certain conditions are met.</p>
<p>First, let’s review Azure Blob Storage access tiers. The Hot tier is designed for blobs that will be accessed frequently. This is the default tier. It has the most expensive storage costs but the lowest access costs.</p>
<p>The Cool tier has lower storage costs but higher access costs. That’s why you should only put infrequently accessed blobs in the Cool tier. If you were to put frequently accessed blobs in this tier, then the access costs would very quickly outweigh the lower storage costs. Also, you have to leave data in the Cool tier for at least 30 days. If you delete it or move it to a different tier in less than 30 days, you’ll have to pay an early removal penalty.</p>
<p>The Archive tier has the lowest storage costs and the highest access costs. It’s intended for data that you rarely need to access, such as long-term backups. To avoid an early deletion penalty, you need to leave data in the Archive tier for at least 180 days. It’s significantly different from the hot and cool tiers because you can’t access your data right away when you need it. That’s because it uses offline storage. So you have to wait for your data to be rehydrated before you can access it. This process can take up to 15 hours.</p>
<p>Since there’s a big difference in cost between the different tiers, it’s a good idea to set up an automated system to move your data between tiers when the time is right. For example, you might have monthly reports that get accessed frequently in the first month after they’re created, are accessed much less frequently for the next 11 months, and are rarely accessed after that but need to be retained for a total of 10 years for compliance reasons.</p>
<p>In this case, you might want to create a policy that:</p>
<ul>
<li>Moves these reports from the Hot tier to the Cool tier after 30 days,</li>
<li>Moves them from the Cool tier to the Archive tier when they’re 12 months old,</li>
<li>And deletes them from the Archive tier after they’re 10 years old.</li>
</ul>
<p>Notice that I said 12 months instead of 11 months for the second one because the blobs would have already been in the Hot tier for 1 month before being moved to the Cool tier, so they would be 12 months old. I’ll show you two different ways to set up these rules: using the Azure portal and using the command line.</p>
<p>First, let’s use the portal. I’ve already created a storage account and a blob container. In the menu on the left, select “Lifecycle management”. This is where we create the rules we want. Notice that it says lifecycle management is only available for general-purpose v2 accounts and blob storage accounts. Since most storage accounts are general-purpose v2 accounts these days, you probably won’t need to worry about having the right account type.</p>
<p>Now click “Add a rule”. Let’s call it “LifecycleForReports”. We’ll leave the rule scope as “Apply rule to all blobs in your storage account”. We’ll leave the blob type as just “Block blobs”. Append blobs are used for files that frequently have new data appended to them, which likely wouldn’t be the case for our monthly reports.</p>
<p>You might not be familiar with the blob subtype. If you turn on blob versioning, then a copy of the blob will be saved every time the blob is modified. That way, you could retrieve a previous version of the blob if you needed to. Snapshots are similar except that you create them manually. If you don’t use either versioning or snapshots, then you can just leave “Base blobs” checked.</p>
<p>Okay, now we can click “Next” and define the rule. A rule needs to contain one or more conditions. The first condition we want to have is to move blobs to Cool storage after 30 days, so let’s change this to “If base blobs were created more than 30 days ago, then move to cool storage. Then we click “Add conditions” again to add the next one, which is to move blobs from Cool storage to Archive storage when they’re 12 months old. So, we’ll put 365 days since they were created.</p>
<p>Finally, we’ll click “Add conditions” again, and this time, we’ll say that after 3,650 days (which is 10 years if you don’t count leap years), then delete the blob.</p>
<p>Now we click “Add” and we’re done. However, this lifecycle policy won’t go into effect immediately. Azure only runs policies once a day, so it can take up to 24 hours before any actions triggered by a new policy will take place.</p>
<p>This example was pretty simple, but there are some other features we can use to customize it. First, we could create a rule that only applies to certain blobs. To do this, we’d need to create a filter. Technically, when we set the blob type to only block blobs, that was a filter, but we can also create a filter that looks at the name of a blob.</p>
<p>For example, suppose we want a lifecycle rule to only apply to blobs that start with the word “report”, then we’d select “Limit blobs with filters”. Now there’s a tab called “Filter set”. There are two types of filters we can apply: blob prefix and blob index match. The second one is more complicated and requires tagging your blobs before it’ll work. Blob prefix is the one we need for our example. We just need to type “report” in this field. And we have to click the Update button. Now the rule will apply to any blobs that start with those letters.</p>
<p>Here’s another change we can make. Suppose you don’t want a blob to be moved to the Cool tier until a certain number of days after the last time it was accessed rather than since it was created. You might have noticed that this wasn’t an option in the list of possible conditions, so how would we do it? First, we have to check the “Enable access tracking” box. Then, when we go back to the first condition, the list includes “Last accessed”, so we can select it. And click “Update”.</p>
<p>This visual interface makes it very easy to create lifecycle rules, but if you had to apply lifecycle policies to lots of different storage accounts, it would probably be faster to create a standard configuration and apply it using the command line. Then you wouldn’t have to keep pointing and clicking in the interface over and over again.</p>
<p>To do this, you need to create a JSON file that contains your rules. But this can be a bit of a daunting task, so there’s a shortcut you can use. Once you’ve created one or more rules in this interface, you can go to the Code View tab, and there’s the JSON code you need.</p>
<p>The rule definition is divided into two sections: the rule actions and the rule filters. For each of the conditions we created, it shows the action to take and the condition required to take that action. Here’s the one for moving blobs to the Cool tier. Here’s the one for moving to the Archive tier, and here’s the one for deleting blobs. In the filters section, it shows the blob type filter and the prefix match filter that we set.</p>
<p>If we wanted to change anything, we could actually edit it right here and click the Save button, which would apply the updated policy to this storage account. But in most cases, we’d probably want to download the code, modify it, and use the command line to apply it to other storage accounts.</p>
<p>So, we’ll click “Download”. Then, to avoid having to install the Azure command-line utility on your desktop, we can upload the JSON file to the Cloud Shell and run the command there. So, I’ll open the Cloud Shell. Then I’ll select “Upload”. Here’s the file we downloaded. It’s called “policy.json”.</p>
<p>I’m not going to modify anything, but I’ll show you what command you’d use to apply this lifecycle policy to a storage account. I put the command in the transcript below in case you want to try this yourself.</p>
<p>It starts with “az storage account management-policy create”. Then you specify the account name. My storage account is called “camonthlyreports”. Then you type “–policy” and the name of the JSON file. And finally, you tell it the resource group where your storage account resides. I called mine “camonthlyreportsrg”. Now hit Enter. It might not be obvious from this output, but it successfully applied the policy to that storage account. </p>
<p>And that’s it for Blob Storage lifecycle management. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-140-Resource-Required-Reading-for-AZ-140-25</title>
    <url>/2022/11/13/AZ-140-Resource-Required-Reading-for-AZ-140-25/</url>
    <content><![CDATA[<h1 id="Security-best-practices"><a href="#Security-best-practices" class="headerlink" title="Security best practices"></a>Security best practices</h1><p>Azure Virtual Desktop is a managed virtual desktop service that includes many security capabilities for keeping your organization safe. In a Azure Virtual Desktop deployment, Microsoft manages portions of the services on the customer’s behalf. The service has many built-in advanced security features, such as Reverse Connect, which reduce the risk involved with having remote desktops accessible from anywhere.</p>
<p>This article describes additional steps you can take as an admin to keep your customers’ Azure Virtual Desktop deployments secure.</p>
<h2 id="Security-responsibilities"><a href="#Security-responsibilities" class="headerlink" title="Security responsibilities"></a>Security responsibilities</h2><p>What makes cloud services different from traditional on-premises virtual desktop infrastructures (VDIs) is how they handle security responsibilities. For example, in a traditional on-premises VDI, the customer would be responsible for all aspects of security. However, in most cloud services, these responsibilities are shared between the customer and the company.</p>
<p>When you use Azure Virtual Desktop, it’s important to understand that while some components come already secured for your environment, you’ll need to configure other areas yourself to fit your organization’s security needs.</p>
<p>Here are the security needs you’re responsible for in your Azure Virtual Desktop deployment:</p>
<table>
<thead>
<tr>
<th align="left">Security need</th>
<th align="center">Is the customer responsible for this?</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Identity</td>
<td align="center">Yes</td>
</tr>
<tr>
<td align="left">User devices (mobile and PC)</td>
<td align="center">Yes</td>
</tr>
<tr>
<td align="left">App security</td>
<td align="center">Yes</td>
</tr>
<tr>
<td align="left">Session host operating system (OS)</td>
<td align="center">Yes</td>
</tr>
<tr>
<td align="left">Deployment configuration</td>
<td align="center">Yes</td>
</tr>
<tr>
<td align="left">Network controls</td>
<td align="center">Yes</td>
</tr>
<tr>
<td align="left">Virtualization control plane</td>
<td align="center">No</td>
</tr>
<tr>
<td align="left">Physical hosts</td>
<td align="center">No</td>
</tr>
<tr>
<td align="left">Physical network</td>
<td align="center">No</td>
</tr>
<tr>
<td align="left">Physical datacenter</td>
<td align="center">No</td>
</tr>
</tbody></table>
<p>The security needs the customer isn’t responsible for are handled by Microsoft.</p>
<h2 id="Azure-security-best-practices"><a href="#Azure-security-best-practices" class="headerlink" title="Azure security best practices"></a>Azure security best practices</h2><p>Azure Virtual Desktop is a service under Azure. To maximize the safety of your Azure Virtual Desktop deployment, you should make sure to secure the surrounding Azure infrastructure and management plane as well. To secure your infrastructure, consider how Azure Virtual Desktop fits into your larger Azure ecosystem. To learn more about the Azure ecosystem, see <a href="https://learn.microsoft.com/en-us/azure/security/fundamentals/best-practices-and-patterns">Azure security best practices and patterns</a>.</p>
<p>This section describes best practices for securing your Azure ecosystem.</p>
<h3 id="Enable-Microsoft-Defender-for-Cloud"><a href="#Enable-Microsoft-Defender-for-Cloud" class="headerlink" title="Enable Microsoft Defender for Cloud"></a>Enable Microsoft Defender for Cloud</h3><p>We recommend enabling Microsoft Defender for Cloud’s enhanced security features to:</p>
<ul>
<li>Manage vulnerabilities.</li>
<li>Assess compliance with common frameworks like PCI.</li>
<li>Strengthen the overall security of your environment.</li>
</ul>
<p>To learn more, see <a href="https://learn.microsoft.com/en-us/azure/defender-for-cloud/enable-enhanced-security">Enable enhanced security features</a>.</p>
<h3 id="Improve-your-Secure-Score"><a href="#Improve-your-Secure-Score" class="headerlink" title="Improve your Secure Score"></a>Improve your Secure Score</h3><p>Secure Score provides recommendations and best practice advice for improving your overall security. These recommendations are prioritized to help you pick which ones are most important, and the Quick Fix options help you address potential vulnerabilities quickly. These recommendations also update over time, keeping you up to date on the best ways to maintain your environment’s security. To learn more, see <a href="https://learn.microsoft.com/en-us/azure/defender-for-cloud/secure-score-security-controls">Improve your Secure Score in Microsoft Defender for Cloud</a>.</p>
<h2 id="Azure-Virtual-Desktop-security-best-practices"><a href="#Azure-Virtual-Desktop-security-best-practices" class="headerlink" title="Azure Virtual Desktop security best practices"></a>Azure Virtual Desktop security best practices</h2><p>Azure Virtual Desktop has many built-in security controls. In this section, you’ll learn about security controls you can use to keep your users and data safe.</p>
<h3 id="Require-multi-factor-authentication"><a href="#Require-multi-factor-authentication" class="headerlink" title="Require multi-factor authentication"></a>Require multi-factor authentication</h3><p>Requiring multi-factor authentication for all users and admins in Azure Virtual Desktop improves the security of your entire deployment. To learn more, see <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/set-up-mfa">Enable Azure AD Multi-Factor Authentication for Azure Virtual Desktop</a>.</p>
<h3 id="Enable-Conditional-Access"><a href="#Enable-Conditional-Access" class="headerlink" title="Enable Conditional Access"></a>Enable Conditional Access</h3><p>Enabling <a href="https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/overview">Conditional Access</a> lets you manage risks before you grant users access to your Azure Virtual Desktop environment. When deciding which users to grant access to, we recommend you also consider who the user is, how they sign in, and which device they’re using.</p>
<h3 id="Collect-audit-logs"><a href="#Collect-audit-logs" class="headerlink" title="Collect audit logs"></a>Collect audit logs</h3><p>Enabling audit log collection lets you view user and admin activity related to Azure Virtual Desktop. Some examples of key audit logs are:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/activity-log">Azure Activity Log</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/active-directory/reports-monitoring/concept-activity-logs-azure-monitor">Azure Active Directory Activity Log</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-whatis">Azure Active Directory</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/agents/agent-windows">Session hosts</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/key-vault/general/logging">Key Vault logs</a></li>
</ul>
<h3 id="Use-RemoteApps"><a href="#Use-RemoteApps" class="headerlink" title="Use RemoteApps"></a>Use RemoteApps</h3><p>When choosing a deployment model, you can either provide remote users access to entire virtual desktops or only select applications. Remote applications, or RemoteApps, provide a seamless experience as the user works with apps on their virtual desktop. RemoteApps reduce risk by only letting the user work with a subset of the remote machine exposed by the application.</p>
<h3 id="Monitor-usage-with-Azure-Monitor"><a href="#Monitor-usage-with-Azure-Monitor" class="headerlink" title="Monitor usage with Azure Monitor"></a>Monitor usage with Azure Monitor</h3><p>Monitor your Azure Virtual Desktop service’s usage and availability with <a href="https://azure.microsoft.com/services/monitor/">Azure Monitor</a>. Consider creating <a href="https://learn.microsoft.com/en-us/azure/service-health/alerts-activity-log-service-notifications-portal">service health alerts</a> for the Azure Virtual Desktop service to receive notifications whenever there’s a service impacting event.</p>
<h3 id="Encrypt-your-VM"><a href="#Encrypt-your-VM" class="headerlink" title="Encrypt your VM"></a>Encrypt your VM</h3><p>Encrypt your VM with <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/disk-encryption-overview">managed disk encryption options</a> to protect stored data from unauthorized access.</p>
<h2 id="Session-host-security-best-practices"><a href="#Session-host-security-best-practices" class="headerlink" title="Session host security best practices"></a>Session host security best practices</h2><p>Session hosts are virtual machines that run inside an Azure subscription and virtual network. Your Azure Virtual Desktop deployment’s overall security depends on the security controls you put on your session hosts. This section describes best practices for keeping your session hosts secure.</p>
<h3 id="Enable-endpoint-protection"><a href="#Enable-endpoint-protection" class="headerlink" title="Enable endpoint protection"></a>Enable endpoint protection</h3><p>To protect your deployment from known malicious software, we recommend enabling endpoint protection on all session hosts. You can use either Windows Defender Antivirus or a third-party program. To learn more, see <a href="https://learn.microsoft.com/en-us/windows/security/threat-protection/windows-defender-antivirus/deployment-vdi-windows-defender-antivirus">Deployment guide for Windows Defender Antivirus in a VDI environment</a>.</p>
<p>For profile solutions like FSLogix or other solutions that mount VHD files, we recommend excluding VHD file extensions.</p>
<h3 id="Install-an-endpoint-detection-and-response-product"><a href="#Install-an-endpoint-detection-and-response-product" class="headerlink" title="Install an endpoint detection and response product"></a>Install an endpoint detection and response product</h3><p>We recommend you install an endpoint detection and response (EDR) product to provide advanced detection and response capabilities. For server operating systems with <a href="https://learn.microsoft.com/en-us/azure/defender-for-cloud/integration-defender-for-endpoint">Microsoft Defender for Cloud</a> enabled, installing an EDR product will deploy Microsoft Defender for Endpoint. For client operating systems, you can deploy <a href="https://learn.microsoft.com/en-us/windows/security/threat-protection/microsoft-defender-atp/onboarding">Microsoft Defender for Endpoint</a> or a third-party product to those endpoints.</p>
<h3 id="Enable-threat-and-vulnerability-management-assessments"><a href="#Enable-threat-and-vulnerability-management-assessments" class="headerlink" title="Enable threat and vulnerability management assessments"></a>Enable threat and vulnerability management assessments</h3><p>Identifying software vulnerabilities that exist in operating systems and applications is critical to keeping your environment secure. Microsoft Defender for Cloud can help you identify problem spots through <a href="https://learn.microsoft.com/en-us/azure/defender-for-cloud/deploy-vulnerability-assessment-tvm">Microsoft Defender for Endpoint’s threat and vulnerability management solution</a>. You can also use third-party products if you’re so inclined, although we recommend using Microsoft Defender for Cloud and Microsoft Defender for Endpoint.</p>
<h3 id="Patch-software-vulnerabilities-in-your-environment"><a href="#Patch-software-vulnerabilities-in-your-environment" class="headerlink" title="Patch software vulnerabilities in your environment"></a>Patch software vulnerabilities in your environment</h3><p>Once you identify a vulnerability, you must patch it. This applies to virtual environments as well, which includes the running operating systems, the applications that are deployed inside of them, and the images you create new machines from. Follow your vendor patch notification communications and apply patches in a timely manner. We recommend patching your base images monthly to ensure that newly deployed machines are as secure as possible.</p>
<h3 id="Establish-maximum-inactive-time-and-disconnection-policies"><a href="#Establish-maximum-inactive-time-and-disconnection-policies" class="headerlink" title="Establish maximum inactive time and disconnection policies"></a>Establish maximum inactive time and disconnection policies</h3><p>Signing users out when they’re inactive preserves resources and prevents access by unauthorized users. We recommend that timeouts balance user productivity as well as resource usage. For users that interact with stateless applications, consider more aggressive policies that turn off machines and preserve resources. Disconnecting long running applications that continue to run if a user is idle, such as a simulation or CAD rendering, can interrupt the user’s work and may even require restarting the computer.</p>
<h3 id="Set-up-screen-locks-for-idle-sessions"><a href="#Set-up-screen-locks-for-idle-sessions" class="headerlink" title="Set up screen locks for idle sessions"></a>Set up screen locks for idle sessions</h3><p>You can prevent unwanted system access by configuring Azure Virtual Desktop to lock a machine’s screen during idle time and requiring authentication to unlock it.</p>
<h3 id="Establish-tiered-admin-access"><a href="#Establish-tiered-admin-access" class="headerlink" title="Establish tiered admin access"></a>Establish tiered admin access</h3><p>We recommend you don’t grant your users admin access to virtual desktops. If you need software packages, we recommend you make them available through configuration management utilities like Microsoft Endpoint Manager. In a multi-session environment, we recommend you don’t let users install software directly.</p>
<h3 id="Consider-which-users-should-access-which-resources"><a href="#Consider-which-users-should-access-which-resources" class="headerlink" title="Consider which users should access which resources"></a>Consider which users should access which resources</h3><p>Consider session hosts as an extension of your existing desktop deployment. We recommend you control access to network resources the same way you would for other desktops in your environment, such as using network segmentation and filtering. By default, session hosts can connect to any resource on the internet. There are several ways you can limit traffic, including using Azure Firewall, Network Virtual Appliances, or proxies. If you need to limit traffic, make sure you add the proper rules so that Azure Virtual Desktop can work properly.</p>
<h3 id="Manage-Office-Pro-Plus-security"><a href="#Manage-Office-Pro-Plus-security" class="headerlink" title="Manage Office Pro Plus security"></a>Manage Office Pro Plus security</h3><p>In addition to securing your session hosts, it’s important to also secure the applications running inside of them. Office Pro Plus is one of the most common applications deployed in session hosts. To improve the Office deployment security, we recommend you use the <a href="https://learn.microsoft.com/en-us/DeployOffice/overview-of-security-policy-advisor">Security Policy Advisor</a> for Microsoft 365 Apps for enterprise. This tool identifies policies that can you can apply to your deployment for more security. Security Policy Advisor also recommends policies based on their impact to your security and productivity.</p>
<h3 id="Other-security-tips-for-session-hosts"><a href="#Other-security-tips-for-session-hosts" class="headerlink" title="Other security tips for session hosts"></a>Other security tips for session hosts</h3><p>By restricting operating system capabilities, you can strengthen the security of your session hosts. Here are a few things you can do:</p>
<ul>
<li>Control device redirection by redirecting drives, printers, and USB devices to a user’s local device in a remote desktop session. We recommend that you evaluate your security requirements and check if these features ought to be disabled or not.</li>
<li>Restrict Windows Explorer access by hiding local and remote drive mappings. This prevents users from discovering unwanted information about system configuration and users.</li>
<li>Avoid direct RDP access to session hosts in your environment. If you need direct RDP access for administration or troubleshooting, enable <a href="https://learn.microsoft.com/en-us/azure/defender-for-cloud/just-in-time-access-usage">just-in-time</a> access to limit the potential attack surface on a session host.</li>
<li>Grant users limited permissions when they access local and remote file systems. You can restrict permissions by making sure your local and remote file systems use access control lists with least privilege. This way, users can only access what they need and can’t change or delete critical resources.</li>
<li>Prevent unwanted software from running on session hosts. You can enable App Locker for additional security on session hosts, ensuring that only the apps you allow can run on the host.</li>
</ul>
<h2 id="Azure-Virtual-Desktop-support-for-Trusted-Launch"><a href="#Azure-Virtual-Desktop-support-for-Trusted-Launch" class="headerlink" title="Azure Virtual Desktop support for Trusted Launch"></a>Azure Virtual Desktop support for Trusted Launch</h2><p>Trusted launch are Gen2 Azure VMs with enhanced security features aimed to protect against “bottom of the stack” threats through attack vectors such as rootkits, boot kits, and kernel-level malware. The following are the enhanced security features of trusted launch, all of which are supported in Azure Virtual Desktop. To learn more about trusted launch, visit <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/trusted-launch">Trusted launch for Azure virtual machines</a>.</p>
<h2 id="Azure-Confidential-Computing-virtual-machines-preview"><a href="#Azure-Confidential-Computing-virtual-machines-preview" class="headerlink" title="Azure Confidential Computing virtual machines (preview)"></a>Azure Confidential Computing virtual machines (preview)</h2><p> Important</p>
<p>Azure Virtual Desktop support for Azure Confidential virtual machines is currently in PREVIEW. See the <a href="https://azure.microsoft.com/support/legal/preview-supplemental-terms/">Supplemental Terms of Use for Microsoft Azure Previews</a> for legal terms that apply to Azure features that are in beta, preview, or otherwise not yet released into general availability.</p>
<p>Azure Virtual Desktop support for Azure Confidential Computing virtual machines (preview) ensures a user’s virtual desktop is encrypted in memory, protected in use, and backed by hardware root of trust. Deploying confidential VMs with Azure Virtual Desktop gives users access to Microsoft 365 and other applications on session hosts that use hardware-based isolation, which hardens isolation from other virtual machines, the hypervisor, and the host OS. These virtual desktops are powered by the latest Third-generation (Gen 3) Advanced Micro Devices (AMD) EPYC™ processor with Secure Encrypted Virtualization Secure Nested Paging (SEV-SNP) technology. Memory encryption keys are generated and safeguarded by a dedicated secure processor inside the AMD CPU that can’t be read from software. For more information, see the <a href="https://learn.microsoft.com/en-us/azure/confidential-computing/overview">Azure Confidential Computing overview</a>.</p>
<h3 id="Secure-Boot"><a href="#Secure-Boot" class="headerlink" title="Secure Boot"></a>Secure Boot</h3><p>Secure Boot is a mode that platform firmware supports that protects your firmware from malware-based rootkits and boot kits. This mode only allows signed OSes and drivers to start up the machine.</p>
<h3 id="Monitor-boot-integrity-using-Remote-Attestation"><a href="#Monitor-boot-integrity-using-Remote-Attestation" class="headerlink" title="Monitor boot integrity using Remote Attestation"></a>Monitor boot integrity using Remote Attestation</h3><p>Remote attestation is a great way to check the health of your VMs. Remote attestation verifies that Measured Boot records are present, genuine, and originate from the Virtual Trusted Platform Module (vTPM). As a health check, it provides cryptographic certainty that a platform started up correctly.</p>
<h3 id="vTPM"><a href="#vTPM" class="headerlink" title="vTPM"></a>vTPM</h3><p>A vTPM is a virtualized version of a hardware Trusted Platform Module (TPM), with a virtual instance of a TPM per VM. vTPM enables remote attestation by performing integrity measurement of the entire boot chain of the VM (UEFI, OS, system, and drivers).</p>
<p>We recommend enabling vTPM to use remote attestation on your VMs. With vTPM enabled, you can also enable BitLocker functionality with Azure Disk Encryption, which provides full-volume encryption to protect data at rest. Any features using vTPM will result in secrets bound to the specific VM. When users connect to the Azure Virtual Desktop service in a pooled scenario, users can be redirected to any VM in the host pool. Depending on how the feature is designed this may have an impact.</p>
<p> Note</p>
<p>BitLocker should not be used to encrypt the specific disk where you’re storing your FSLogix profile data.</p>
<h3 id="Virtualization-based-Security"><a href="#Virtualization-based-Security" class="headerlink" title="Virtualization-based Security"></a>Virtualization-based Security</h3><p>Virtualization-based Security (VBS) uses the hypervisor to create and isolate a secure region of memory that’s inaccessible to the OS. Hypervisor-Protected Code Integrity (HVCI) and Windows Defender Credential Guard both use VBS to provide increased protection from vulnerabilities.</p>
<h4 id="Hypervisor-Protected-Code-Integrity"><a href="#Hypervisor-Protected-Code-Integrity" class="headerlink" title="Hypervisor-Protected Code Integrity"></a>Hypervisor-Protected Code Integrity</h4><p>HVCI is a powerful system mitigation that uses VBS to protect Windows kernel-mode processes against injection and execution of malicious or unverified code.</p>
<h4 id="Windows-Defender-Credential-Guard"><a href="#Windows-Defender-Credential-Guard" class="headerlink" title="Windows Defender Credential Guard"></a>Windows Defender Credential Guard</h4><p>Windows Defender Credential Guard uses VBS to isolate and protect secrets so that only privileged system software can access them. This prevents unauthorized access to these secrets and credential theft attacks, such as Pass-the-Hash attacks.</p>
<h2 id="Nested-virtualization"><a href="#Nested-virtualization" class="headerlink" title="Nested virtualization"></a>Nested virtualization</h2><p>The following operating systems support running nested virtualization on Azure Virtual Desktop:</p>
<ul>
<li>Windows Server 2016</li>
<li>Windows Server 2019</li>
<li>Windows Server 2022</li>
<li>Windows 10 Enterprise</li>
<li>Windows 10 Enterprise multi-session</li>
<li>Windows 11 Enterprise</li>
<li>Windows 11 Enterprise multi-session</li>
</ul>
<h2 id="Windows-Defender-Application-Control"><a href="#Windows-Defender-Application-Control" class="headerlink" title="Windows Defender Application Control"></a>Windows Defender Application Control</h2><p>The following operating systems support using Windows Defender Application Control with Azure Virtual Desktop:</p>
<ul>
<li>Windows Server 2016</li>
<li>Windows Server 2019</li>
<li>Windows Server 2022</li>
<li>Windows 10 Enterprise</li>
<li>Windows 10 Enterprise multi-session</li>
<li>Windows 11 Enterprise</li>
<li>Windows 11 Enterprise multi-session</li>
</ul>
<p> Note</p>
<p>When using Windows Defender Access Control, we recommend only targeting policies at the device level. Although it’s possible to target policies to individual users, once the policy is applied, it affects all users on the device equally.</p>
<h1 id="Enable-or-disable-Start-VM-on-Connect"><a href="#Enable-or-disable-Start-VM-on-Connect" class="headerlink" title="Enable or disable Start VM on Connect"></a>Enable or disable Start VM on Connect</h1><p>Start VM On Connect lets you reduce costs by enabling end users to turn on their session host virtual machines (VMs) only when they need them. You can them turn off VMs when they’re not needed.</p>
<p>You can configure Start VM on Connect for personal or pooled host pools using the Azure portal or PowerShell. Start VM on Connect is a host pool setting.</p>
<p>For personal host pools, Start VM On Connect will only turn on an existing session host VM that has already been assigned or will be assigned to a user. For pooled host pools, Start VM On Connect will only turn on a session host VM when none are turned on and additional VMs will only be turned on when the first VM reaches the session limit.</p>
<p>The time it takes for a user to connect to a session host VM that is powered off (deallocated) increases because the VM needs time to turn on again, much like turning on a physical computer. The Remote Desktop client has an indicator that lets the user know the VM is being powered on while they’re connecting.</p>
<p> Note</p>
<p>Azure Virtual Desktop (classic) doesn’t support Start VM On Connect.</p>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>To use Start VM on Connect, make sure you follow these guidelines:</p>
<ul>
<li>You can only configure Start VM on Connect on existing host pools. You can’t enable it at the same time you create a new host pool.</li>
<li>The following Remote Desktop clients support Start VM on Connect:<ul>
<li>The <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/users/connect-windows?toc=/azure/virtual-desktop/toc.json&bc=/azure/virtual-desktop/breadcrumb/toc.json">Windows client</a> (version 1.2.2061 or later)</li>
<li>The <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/users/connect-web?toc=/azure/virtual-desktop/toc.json&bc=/azure/virtual-desktop/breadcrumb/toc.json">Web client</a></li>
<li>The <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/users/connect-macos?toc=/azure/virtual-desktop/toc.json&bc=/azure/virtual-desktop/breadcrumb/toc.json">macOS client</a> (version 10.6.4 or later)</li>
<li>The <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/users/connect-ios-ipados?toc=/azure/virtual-desktop/toc.json&bc=/azure/virtual-desktop/breadcrumb/toc.json">iOS and iPadOS client</a> (version 10.2.5 or later)</li>
<li>The <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/users/connect-android-chrome-os?toc=/azure/virtual-desktop/toc.json&bc=/azure/virtual-desktop/breadcrumb/toc.json">Android and Chrome OS client</a> (version 10.0.10 or later)</li>
<li>The <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/users/connect-microsoft-store?toc=/azure/virtual-desktop/toc.json&bc=/azure/virtual-desktop/breadcrumb/toc.json">Microsoft Store client</a> (version 10.2.2005.0 or later)</li>
<li>Thin clients listed in <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/users/connect-thin-clients?toc=/azure/virtual-desktop/toc.json&bc=/azure/virtual-desktop/breadcrumb/toc.json">Thin client support</a></li>
</ul>
</li>
<li>If you want to configure Start VM on Connect using PowerShell, you’ll need to have <a href="https://www.powershellgallery.com/packages/Az.DesktopVirtualization">the Az.DesktopVirtualization PowerShell module</a> (version 2.1.0 or later) installed on the device you use to run the commands.</li>
<li>You must grant Azure Virtual Desktop access to power on session host VMs, check their status, and report diagnostic information. You must have the <code>Microsoft.Authorization/roleAssignments/write</code> permission on your subscriptions in order to assign the role-based access control (RBAC) role for the Azure Virtual Desktop service principal on those subscriptions. This is part of <strong>User Access Administrator</strong> and <strong>Owner</strong> built in roles.</li>
</ul>
<h2 id="Assign-the-Desktop-Virtualization-Power-On-Contributor-role-with-the-Azure-portal"><a href="#Assign-the-Desktop-Virtualization-Power-On-Contributor-role-with-the-Azure-portal" class="headerlink" title="Assign the Desktop Virtualization Power On Contributor role with the Azure portal"></a>Assign the Desktop Virtualization Power On Contributor role with the Azure portal</h2><p>Before you can configure Start VM on Connect, you’ll need to assign the <em>Desktop Virtualization Power On Contributor</em> role-based access control (RBAC) role with your Azure subscription as the assignable scope. Assigning this role at any level lower than your subscription, such as the resource group, host pool, or VM, will prevent Start VM on Connect from working properly. You’ll need to add each Azure subscription as an assignable scope that contains host pools and session host VMs you want to use with Start VM on Connect. This role and assignment will allow Azure Virtual Desktop to power on VMs, check their status, and report diagnostic information in those subscriptions.</p>
<p>To assign the <em>Desktop Virtualization Power On Contributor</em> role with the Azure portal to the Azure Virtual Desktop service principal on the subscription your host pool is deployed to:</p>
<ol>
<li>Open the Azure portal and go to <strong>Subscriptions</strong>. Select a subscription that contains a host pool and session host VMs you want to use with Start VM on Connect.</li>
<li>Select <strong>Access control (IAM)</strong>.</li>
<li>Select the <strong>+ Add</strong> button, then select <strong>Add role assignment</strong> from the drop-down menu.</li>
<li>Select the <strong>Desktop Virtualization Power On Contributor</strong> role and select <strong>Next</strong>.</li>
<li>On the <strong>Members</strong> tab, select <strong>User, group, or service principal</strong>, then select <strong>+Select members</strong>. In the search bar, enter and select either <strong>Azure Virtual Desktop</strong> or <strong>Windows Virtual Desktop</strong>. Which value you have depends on when the <em>Microsoft.DesktopVirtualization</em> resource provider was first registered in your Azure tenant. If you see two entries titled Windows Virtual Desktop, please see the tip below.</li>
<li>Select <strong>Review + assign</strong> to complete the assignment. Repeat this for any other subscriptions that contain host pools and session host VMs you want to use with Start VM on Connect.</li>
</ol>
<p> Tip</p>
<p>The application ID for the service principal is <strong>9cdead84-a844-4324-93f2-b2e6bb768d07</strong>.</p>
<p>If you have an Azure Virtual Desktop (classic) deployment and an Azure Virtual Desktop (Azure Resource Manager) deployment where the <em>Microsoft.DesktopVirtualization</em> resource provider was registered before the display name changed, you will see two apps with the same name of <em>Windows Virtual Desktop</em>. To add the role assignment to the correct service principal, <a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/role-assignments-powershell">you can use PowerShell</a> which enables you to specify the application ID:</p>
<p>To assign the <em>Desktop Virtualization Power On Contributor</em> role with PowerShell to the Azure Virtual Desktop service principal on the subscription your host pool is deployed to:</p>
<ol>
<li><p>Open <a href="https://learn.microsoft.com/en-us/azure/cloud-shell/overview">Azure Cloud Shell</a> with PowerShell as the shell type.</p>
</li>
<li><p>Get the object ID for the service principal (which is unique in each Azure tenant) and store it in a variable:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$objId</span> = (<span class="built_in">Get-AzADServicePrincipal</span> <span class="literal">-AppId</span> <span class="string">&quot;9cdead84-a844-4324-93f2-b2e6bb768d07&quot;</span>).Id</span><br></pre></td></tr></table></figure>
</li>
<li><p>Find the name of the subscription you want to add the role assignment to by listing all that are available to you:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-AzSubscription</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Get the subscription ID and store it in a variable, replacing the value for <code>-SubscriptionName</code> with the name of the subscription from the previous step:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$subId</span> = (<span class="built_in">Get-AzSubscription</span> <span class="literal">-SubscriptionName</span> <span class="string">&quot;Microsoft Azure Enterprise&quot;</span>).Id</span><br></pre></td></tr></table></figure>
</li>
<li><p>Add the role assignment:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">New-AzRoleAssignment</span> <span class="literal">-RoleDefinitionName</span> <span class="string">&quot;Desktop Virtualization Power On Contributor&quot;</span> <span class="literal">-ObjectId</span> <span class="variable">$objId</span> <span class="literal">-Scope</span> /subscriptions/<span class="variable">$subId</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Enable-or-disable-Start-VM-on-Connect-1"><a href="#Enable-or-disable-Start-VM-on-Connect-1" class="headerlink" title="Enable or disable Start VM on Connect"></a>Enable or disable Start VM on Connect</h2><p>Now that you’ve assigned the <em>Desktop Virtualization Power On Contributor</em> role to the service principal on your subscriptions, you can configure Start VM on Connect using the Azure portal or PowerShell.</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/start-virtual-machine-connect?tabs=azure-portal#tabpanel_1_azure-portal">Portal</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/start-virtual-machine-connect?tabs=azure-portal#tabpanel_1_azure-powershell">PowerShell</a></li>
</ul>
<p>To configure Start VM on Connect using the Azure portal:</p>
<ol>
<li>Sign in to the <a href="https://portal.azure.com/">Azure portal</a>.</li>
<li>In the search bar, enter <em>Azure Virtual Desktop</em> and select the matching service entry.</li>
<li>Select <strong>Host pools</strong>, then select the name of the host pool where you want to enable the setting.</li>
<li>Select <strong>Properties</strong>.</li>
<li>In the configuration section, you’ll see <strong>Start VM on connect</strong>. Select <strong>Yes</strong> to enable it, or <strong>No</strong> to disable it.</li>
<li>Select <strong>Save</strong> to apply the settings.</li>
</ol>
<p> Note</p>
<p>In pooled host pools, Start VM on Connect will start a VM every five minutes at most. If other users try to sign in during this five-minute period while there aren’t any available resources, Start VM on Connect won’t start a new VM. Instead, the users trying to sign in will receive an error message that says, “No resources available.”</p>
<h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><p>If you run into any issues with Start VM On Connect, we recommend you use the Azure Virtual Desktop <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/diagnostics-log-analytics">diagnostics feature</a> to check for problems. If you receive an error message, make sure to pay close attention to the message content and make a note of the error name for reference. You can also use <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/azure-monitor">Azure Monitor for Azure Virtual Desktop</a> to get suggestions for how to resolve issues.</p>
<p>If the session host VM doesn’t turn on, you’ll need to check the health of the VM you tried to turn on as a first step.</p>
<p>For other questions, check out the <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/start-virtual-machine-connect-faq">Start VM on Connect FAQ</a>.</p>
<h1 id="Configure-the-personal-desktop-host-pool-assignment-type"><a href="#Configure-the-personal-desktop-host-pool-assignment-type" class="headerlink" title="Configure the personal desktop host pool assignment type"></a>Configure the personal desktop host pool assignment type</h1><p> Important</p>
<p>This content applies to Azure Virtual Desktop with Azure Resource Manager Azure Virtual Desktop objects. If you’re using Azure Virtual Desktop (classic) without Azure Resource Manager objects, see <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/virtual-desktop-fall-2019/configure-host-pool-personal-desktop-assignment-type-2019">this article</a>.</p>
<p>You can configure the assignment type of your personal desktop host pool to adjust your Azure Virtual Desktop environment to better suit your needs. In this topic, we’ll show you how to configure automatic or direct assignment for your users.</p>
<p> Note</p>
<p>The instructions in this article only apply to personal desktop host pools, not pooled host pools, since users in pooled host pools aren’t assigned to specific session hosts.</p>
<h2 id="Prerequisites-1"><a href="#Prerequisites-1" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>This article assumes you’ve already downloaded and installed the Azure Virtual Desktop PowerShell module. If you haven’t, follow the instructions in <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/powershell-module">Set up the PowerShell module</a>.</p>
<h2 id="Personal-host-pools-overview"><a href="#Personal-host-pools-overview" class="headerlink" title="Personal host pools overview"></a>Personal host pools overview</h2><p>A personal host pool is a type of host pool that has personal desktops. Personal desktops have one-to-one mapping, which means a single user can only be assigned to a single personal desktop. Every time the user signs in, their user session is directed to their assigned personal desktop session host. This host pool type is ideal for customers with resource-intensive workloads because user experience and session performance will improve if there’s only one session on the session host. Another benefit of this host pool type is that user activities, files, and settings persist on the virtual machine operating system (VM OS) disk after the user signs out.</p>
<p>Users must be assigned to a personal desktop to start their session. There are two types of assignments in a personal host pool: automatic assignment and direct assignment.</p>
<h2 id="Configure-automatic-assignment"><a href="#Configure-automatic-assignment" class="headerlink" title="Configure automatic assignment"></a>Configure automatic assignment</h2><p>Automatic assignment is the default assignment type for new personal desktop host pools created in your Azure Virtual Desktop environment. Automatically assigning users doesn’t require a specific session host.</p>
<p>To automatically assign users, first assign them to the personal desktop host pool so that they can see the desktop in their feed. When an assigned user launches the desktop in their feed, their user session will be load-balanced to an available session host if they haven’t already connected to the host pool.</p>
<p>To configure a host pool to automatically assign users to VMs, run the following PowerShell cmdlet:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Update-AzWvdHostPool</span> <span class="literal">-ResourceGroupName</span> &lt;resourcegroupname&gt; <span class="literal">-Name</span> &lt;hostpoolname&gt; <span class="literal">-PersonalDesktopAssignmentType</span> Automatic</span><br></pre></td></tr></table></figure>

<p>To assign a user to the personal desktop host pool, run the following PowerShell cmdlet:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">New-AzRoleAssignment</span> <span class="literal">-SignInName</span> &lt;userupn&gt; <span class="literal">-RoleDefinitionName</span> <span class="string">&quot;Desktop Virtualization User&quot;</span> <span class="literal">-ResourceName</span> &lt;appgroupname&gt; <span class="literal">-ResourceGroupName</span> &lt;resourcegroupname&gt; <span class="literal">-ResourceType</span> <span class="string">&#x27;Microsoft.DesktopVirtualization/applicationGroups&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="Configure-direct-assignment"><a href="#Configure-direct-assignment" class="headerlink" title="Configure direct assignment"></a>Configure direct assignment</h2><p>Unlike automatic assignment, when you use direct assignment, you must assign the user to both the personal desktop host pool and a specific session host before they can connect to their personal desktop. If the user is only assigned to a host pool without a session host assignment, they won’t be able to access resources and will see an error message that says, “No resources available.”</p>
<p>To configure a host pool to require direct assignment of users to session hosts, run the following PowerShell cmdlet:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Update-AzWvdHostPool</span> <span class="literal">-ResourceGroupName</span> &lt;resourcegroupname&gt; <span class="literal">-Name</span> &lt;hostpoolname&gt; <span class="literal">-PersonalDesktopAssignmentType</span> Direct</span><br></pre></td></tr></table></figure>

<p>To assign a user to the personal desktop host pool, run the following PowerShell cmdlet:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">New-AzRoleAssignment</span> <span class="literal">-SignInName</span> &lt;userupn&gt; <span class="literal">-RoleDefinitionName</span> <span class="string">&quot;Desktop Virtualization User&quot;</span> <span class="literal">-ResourceName</span> &lt;appgroupname&gt; <span class="literal">-ResourceGroupName</span> &lt;resourcegroupname&gt; <span class="literal">-ResourceType</span> <span class="string">&#x27;Microsoft.DesktopVirtualization/applicationGroups&#x27;</span></span><br></pre></td></tr></table></figure>

<p>To assign a user to a specific session host, run the following PowerShell cmdlet:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Update-AzWvdSessionHost</span> <span class="literal">-HostPoolName</span> &lt;hostpoolname&gt; <span class="literal">-Name</span> &lt;sessionhostname&gt; <span class="literal">-ResourceGroupName</span> &lt;resourcegroupname&gt; <span class="literal">-AssignedUser</span> &lt;userupn&gt;</span><br></pre></td></tr></table></figure>

<p>To directly assign a user to a session host in the Azure portal:</p>
<ol>
<li>Sign in to the <a href="https://portal.azure.com/">Azure portal</a>.</li>
<li>Enter <strong>Azure Virtual Desktop</strong> into the search bar.</li>
<li>Under <strong>Services</strong>, select <strong>Azure Virtual Desktop</strong>.</li>
<li>At the Azure Virtual Desktop page, go the menu on the left side of the window and select <strong>Host pools</strong>.</li>
<li>Select the host pool you want to assign users to.</li>
<li>Next, go to the menu on the left side of the window and select <strong>Application groups</strong>.</li>
<li>Select the name of the app group you want to assign users to, then select <strong>Assignments</strong> in the menu on the left side of the window.</li>
<li>Select <strong>+ Add</strong>, then select the users or user groups you want to assign to this app group.</li>
<li>Select <strong>Assign VM</strong> in the Information bar to assign a session host to a user.</li>
<li>Select the session host you want to assign to the user, then select <strong>Assign</strong>. You can also select <strong>Assignment</strong> &gt; <strong>Assign user</strong>.</li>
<li>Select the user you want to assign the session host to from the list of available users.</li>
<li>When you’re done, select <strong>Select</strong>.</li>
</ol>
<h2 id="How-to-unassign-a-personal-desktop"><a href="#How-to-unassign-a-personal-desktop" class="headerlink" title="How to unassign a personal desktop"></a>How to unassign a personal desktop</h2><p>To unassign a personal desktop, run the following PowerShell cmdlet:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Update-AzWvdSessionHost</span> <span class="literal">-HostPoolName</span> &lt;hostpoolname&gt; <span class="literal">-Name</span> &lt;sessionhostname&gt; <span class="literal">-ResourceGroupName</span> &lt;resourcegroupname&gt; <span class="literal">-AssignedUser</span> <span class="string">&quot;&quot;</span> <span class="literal">-Force</span></span><br></pre></td></tr></table></figure>

<p> Important</p>
<ul>
<li>Azure Virtual Desktop will not delete any VHD or profile data for unassigned personal desktops.</li>
<li>You must include the <em>-Force</em> parameter when running the PowerShell cmdlet to unassign a personal desktop. If you don’t include the <em>-Force</em> parameter, you’ll receive an error message.</li>
<li>There must be no existing user sessions on the session host when you unassign the user from the personal desktop. If there’s an existing user session on the session host while you’re unassigning it, you won’t be able to unassign the personal desktop successfully.</li>
<li>If the session host has no user assignment, nothing will happen when you run this cmdlet.</li>
</ul>
<p>To unassign a personal desktop in the Azure portal:</p>
<ol>
<li><p>Sign in to the <a href="https://portal.azure.com/">Azure portal</a>.</p>
</li>
<li><p>Enter <strong>Azure Virtual Desktop</strong> into the search bar.</p>
</li>
<li><p>Under <strong>Services</strong>, select <strong>Azure Virtual Desktop</strong>.</p>
</li>
<li><p>At the Azure Virtual Desktop page, go the menu on the left side of the window and select <strong>Host pools</strong>.</p>
</li>
<li><p>Select the host pool you want to modify user assignment for.</p>
</li>
<li><p>Next, go to the menu on the left side of the window and select <strong>Session hosts</strong>.</p>
</li>
<li><p>Select the checkbox next to the session host you want to unassign a user from, select the ellipses at the end of the row, and then select <strong>Unassign user</strong>. You can also select <strong>Assignment</strong> &gt; <strong>Unassign user</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/unassign.png" alt="A screenshot of the unassign user menu option from the ellipses menu for unassigning a personal desktop."></p>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/unassign-2.png" alt="A screenshot of the unassign user menu option from the assignment menu for unassigning a personal desktop."></p>
</li>
<li><p>Select <strong>Unassign</strong> when prompted with the warning.</p>
</li>
</ol>
<h2 id="How-to-reassign-a-personal-desktop"><a href="#How-to-reassign-a-personal-desktop" class="headerlink" title="How to reassign a personal desktop"></a>How to reassign a personal desktop</h2><p>To reassign a personal desktop, run the following PowerShell cmdlet:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Update-AzWvdSessionHost</span> <span class="literal">-HostPoolName</span> &lt;hostpoolname&gt; <span class="literal">-Name</span> &lt;sessionhostname&gt; <span class="literal">-ResourceGroupName</span> &lt;resourcegroupname&gt; <span class="literal">-AssignedUser</span> &lt;userupn&gt; <span class="literal">-Force</span></span><br></pre></td></tr></table></figure>

<p> Important</p>
<ul>
<li>Azure Virtual Desktop will not delete any VHD or profile data for reassigned personal desktops.</li>
<li>You must include the <em>-Force</em> parameter when running the PowerShell cmdlet to reassign a personal desktop. If you don’t include the <em>-Force</em> parameter, you’ll receive an error message.</li>
<li>There must be no existing user sessions on the session host when you reassign a personal desktop. If there’s an existing user session on the session host while you’re reassigning it, you won’t be able to reassign the personal desktop successfully.</li>
<li>If the user principal name (UPN) you enter for the <em>-AssignedUser</em> parameter is the same as the UPN currently assigned to the personal desktop, the cmdlet won’t do anything.</li>
<li>If the session host currently has no user assignment, the personal desktop will be assigned to the provided UPN.</li>
</ul>
<p>To reassign a personal desktop in the Azure portal:</p>
<ol>
<li><p>Sign in to the <a href="https://portal.azure.com/">Azure portal</a>.</p>
</li>
<li><p>Enter <strong>Azure Virtual Desktop</strong> into the search bar.</p>
</li>
<li><p>Under <strong>Services</strong>, select <strong>Azure Virtual Desktop</strong>.</p>
</li>
<li><p>At the Azure Virtual Desktop page, go the menu on the left side of the window and select <strong>Host pools</strong>.</p>
</li>
<li><p>Select the host pool you want to modify user assignment for.</p>
</li>
<li><p>Next, go to the menu on the left side of the window and select <strong>Session hosts</strong>.</p>
</li>
<li><p>Select the checkbox next to the session host you want to reassign to a different user, select the ellipses at the end of the row, and then select <strong>Assign to a different user</strong>. You can also select <strong>Assignment</strong> &gt; <strong>Assign to a different user</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/reassign-doc.png" alt="A screenshot of the assign to a different user menu option from the ellipses menu for reassigning a personal desktop."></p>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/reassign.png" alt="A screenshot of the assign to a different user menu option from the assignment menu for reassigning a personal desktop."></p>
</li>
<li><p>Select the user you want to assign the session host to from the list of available users.</p>
</li>
<li><p>When you’re done, select <strong>Select</strong>.</p>
</li>
</ol>
<h1 id="Use-Log-Analytics-for-the-diagnostics-feature"><a href="#Use-Log-Analytics-for-the-diagnostics-feature" class="headerlink" title="Use Log Analytics for the diagnostics feature"></a>Use Log Analytics for the diagnostics feature</h1><p> Important</p>
<p>This content applies to Azure Virtual Desktop with Azure Resource Manager Azure Virtual Desktop objects. If you’re using Azure Virtual Desktop (classic) without Azure Resource Manager objects, see <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/virtual-desktop-fall-2019/diagnostics-log-analytics-2019">this article</a>.</p>
<p>Azure Virtual Desktop uses <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/overview">Azure Monitor</a> for monitoring and alerts like many other Azure services. This lets admins identify issues through a single interface. The service creates activity logs for both user and administrative actions. Each activity log falls under the following categories:</p>
<ul>
<li>Management Activities:<ul>
<li>Track whether attempts to change Azure Virtual Desktop objects using APIs or PowerShell are successful. For example, can someone successfully create a host pool using PowerShell?</li>
</ul>
</li>
<li>Feed:<ul>
<li>Can users successfully subscribe to workspaces?</li>
<li>Do users see all resources published in the Remote Desktop client?</li>
</ul>
</li>
<li>Connections:<ul>
<li>When users initiate and complete connections to the service.</li>
</ul>
</li>
<li>Host registration:<ul>
<li>Was the session host successfully registered with the service upon connecting?</li>
</ul>
</li>
<li>Errors:<ul>
<li>Are users encountering any issues with specific activities? This feature can generate a table that tracks activity data for you as long as the information is joined with the activities.</li>
</ul>
</li>
<li>Checkpoints:<ul>
<li>Specific steps in the lifetime of an activity that were reached. For example, during a session, a user was load balanced to a particular host, then the user was signed on during a connection, and so on.</li>
</ul>
</li>
<li>Agent Health Status:<ul>
<li>Monitor the health and status of the Azure Virtual Desktop agent installed on each session host. For example, verify that the agents are up to date, or whether the agent is in a healthy state and ready to accept new user sessions.</li>
</ul>
</li>
<li>Connection Network Data:<ul>
<li>Track the average network data for user sessions to monitor for details including the estimated round trip time and available bandwidth throughout their connection.</li>
</ul>
</li>
</ul>
<p>Connections that don’t reach Azure Virtual Desktop won’t show up in diagnostics results because the diagnostics role service itself is part of Azure Virtual Desktop. Azure Virtual Desktop connection issues can happen when the user is experiencing network connectivity issues.</p>
<p>Azure Monitor lets you analyze Azure Virtual Desktop data and review virtual machine (VM) performance counters, all within the same tool. This article will tell you more about how to enable diagnostics for your Azure Virtual Desktop environment.</p>
<p> Note</p>
<p>To learn how to monitor your VMs in Azure, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/vm/monitor-vm-azure">Monitoring Azure virtual machines with Azure Monitor</a>. Also, make sure to review the <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/azure-monitor-glossary">Azure Monitor glossary</a> for a better understanding of your user experience on the session host.</p>
<h2 id="Before-you-get-started"><a href="#Before-you-get-started" class="headerlink" title="Before you get started"></a>Before you get started</h2><p>Before you can use Log Analytics, you’ll need to create a workspace. To do that, follow the instructions in one of the following two articles:</p>
<ul>
<li>If you prefer using Azure portal, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/quick-create-workspace">Create a Log Analytics workspace in Azure portal</a>.</li>
<li>If you prefer PowerShell, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/powershell-workspace-configuration">Create a Log Analytics workspace with PowerShell</a>.</li>
</ul>
<p>After you’ve created your workspace, follow the instructions in <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/agents/agent-windows#workspace-id-and-key">Connect Windows computers to Azure Monitor</a> to get the following information:</p>
<ul>
<li>The workspace ID</li>
<li>The primary key of your workspace</li>
</ul>
<p>You’ll need this information later in the setup process.</p>
<p>Make sure to review permission management for Azure Monitor to enable data access for those who monitor and maintain your Azure Virtual Desktop environment. For more information, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/roles-permissions-security">Get started with roles, permissions, and security with Azure Monitor</a>.</p>
<h2 id="Push-diagnostics-data-to-your-workspace"><a href="#Push-diagnostics-data-to-your-workspace" class="headerlink" title="Push diagnostics data to your workspace"></a>Push diagnostics data to your workspace</h2><p>You can push diagnostics data from your Azure Virtual Desktop objects into the Log Analytics for your workspace. You can set up this feature right away when you first create your objects.</p>
<p>To set up Log Analytics for a new object:</p>
<ol>
<li><p>Sign in to the Azure portal and go to <strong>Azure Virtual Desktop</strong>.</p>
</li>
<li><p>Navigate to the object (such as a host pool, app group, or workspace) that you want to capture logs and events for.</p>
</li>
<li><p>Select <strong>Diagnostic settings</strong> in the menu on the left side of the screen.</p>
</li>
<li><p>Select <strong>Add diagnostic setting</strong> in the menu that appears on the right side of the screen.</p>
<p>The options shown in the Diagnostic Settings page will vary depending on what kind of object you’re editing.</p>
<p>For example, when you’re enabling diagnostics for an app group, you’ll see options to configure checkpoints, errors, and management. For workspaces, these categories configure a feed to track when users subscribe to the list of apps. To learn more about diagnostic settings see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/diagnostic-settings">Create diagnostic setting to collect resource logs and metrics in Azure</a>.</p>
<p> Important</p>
<p>Remember to enable diagnostics for each Azure Resource Manager object that you want to monitor. Data will be available for activities after diagnostics has been enabled. It might take a few hours after first set-up.</p>
</li>
<li><p>Enter a name for your settings configuration, then select <strong>Send to Log Analytics</strong>. The name you use shouldn’t have spaces and should conform to <a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/resource-name-rules">Azure naming conventions</a>. As part of the logs, you can select all the options that you want added to your Log Analytics, such as Checkpoint, Error, Management, and so on.</p>
</li>
<li><p>Select <strong>Save</strong>.</p>
</li>
</ol>
<p> Note</p>
<p>Log Analytics gives you the option to stream data to <a href="https://learn.microsoft.com/en-us/azure/event-hubs/event-hubs-about">Event Hubs</a> or archive it in a storage account. To learn more about this feature, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/stream-monitoring-data-event-hubs">Stream Azure monitoring data to an event hub</a> and <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/resource-logs#send-to-azure-storage">Archive Azure resource logs to storage account</a>.</p>
<h2 id="How-to-access-Log-Analytics"><a href="#How-to-access-Log-Analytics" class="headerlink" title="How to access Log Analytics"></a>How to access Log Analytics</h2><p>You can access Log Analytics workspaces on the Azure portal or Azure Monitor.</p>
<h3 id="Access-Log-Analytics-on-a-Log-Analytics-workspace"><a href="#Access-Log-Analytics-on-a-Log-Analytics-workspace" class="headerlink" title="Access Log Analytics on a Log Analytics workspace"></a>Access Log Analytics on a Log Analytics workspace</h3><ol>
<li>Sign in to the Azure portal.</li>
<li>Search for <strong>Log Analytics workspace</strong>.</li>
<li>Under Services, select <strong>Log Analytics workspaces</strong>.</li>
<li>From the list, select the workspace you configured for your Azure Virtual Desktop object.</li>
<li>Once in your workspace, select <strong>Logs</strong>. You can filter out your menu list with the <strong>Search</strong> function.</li>
</ol>
<h3 id="Access-Log-Analytics-on-Azure-Monitor"><a href="#Access-Log-Analytics-on-Azure-Monitor" class="headerlink" title="Access Log Analytics on Azure Monitor"></a>Access Log Analytics on Azure Monitor</h3><ol>
<li>Sign into the Azure portal</li>
<li>Search for and select <strong>Monitor</strong>.</li>
<li>Select <strong>Logs</strong>.</li>
<li>Follow the instructions in the logging page to set the scope of your query.</li>
<li>You are ready to query diagnostics. All diagnostics tables have a “WVD” prefix.</li>
</ol>
<p> Note</p>
<p>For more detailed information about the tables stored in Azure Monitor Logs, see the <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/reference/tables/tables-category#azure-virtual-desktop">Azure Monitor data reference</a>. All tables related to Azure Virtual Desktop are prefixed with “WVD.”</p>
<h2 id="Cadence-for-sending-diagnostic-events"><a href="#Cadence-for-sending-diagnostic-events" class="headerlink" title="Cadence for sending diagnostic events"></a>Cadence for sending diagnostic events</h2><p>Diagnostic events are sent to Log Analytics when completed.</p>
<p>Log Analytics only reports in these intermediate states for connection activities:</p>
<ul>
<li>Started: when a user selects and connects to an app or desktop in the Remote Desktop client.</li>
<li>Connected: when the user successfully connects to the VM where the app or desktop is hosted.</li>
<li>Completed: when the user or server disconnects the session the activity took place in.</li>
</ul>
<h2 id="Example-queries"><a href="#Example-queries" class="headerlink" title="Example queries"></a>Example queries</h2><p>Access example queries through the Azure Monitor Log Analytics UI:</p>
<ol>
<li>Go to your Log Analytics workspace, and then select <strong>Logs</strong>. The example query UI is shown automatically.</li>
<li>Change the filter to <strong>Category</strong>.</li>
<li>Select <strong>Azure Virtual Desktop</strong> to review available queries.</li>
<li>Select <strong>Run</strong> to run the selected query.</li>
</ol>
<p>Learn more about the sample query interface in <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/queries">Saved queries in Azure Monitor Log Analytics</a>.</p>
<p>The following query list lets you review connection information or issues for a single user. You can run these queries in the <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/log-analytics-tutorial#write-a-query">Log Analytics query editor</a>. For each query, replace <code>userupn</code> with the UPN of the user you want to look up.</p>
<p>To find all connections for a single user:</p>
<p>KustoCopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WVDConnections</span><br><span class="line">|where UserName == &quot;userupn&quot;</span><br><span class="line">|take 100</span><br><span class="line">|sort by TimeGenerated asc, CorrelationId</span><br></pre></td></tr></table></figure>

<p>To find the number of times a user connected per day:</p>
<p>KustoCopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WVDConnections</span><br><span class="line">|where UserName == &quot;userupn&quot;</span><br><span class="line">|take 100</span><br><span class="line">|sort by TimeGenerated asc, CorrelationId</span><br><span class="line">|summarize dcount(CorrelationId) by bin(TimeGenerated, 1d)</span><br></pre></td></tr></table></figure>

<p>To find session duration by user:</p>
<p>KustoCopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let Events = WVDConnections | where UserName == &quot;userupn&quot; ;</span><br><span class="line">Events</span><br><span class="line">| where State == &quot;Connected&quot;</span><br><span class="line">| project CorrelationId , UserName, ResourceAlias , StartTime=TimeGenerated</span><br><span class="line">| join (Events</span><br><span class="line">| where State == &quot;Completed&quot;</span><br><span class="line">| project EndTime=TimeGenerated, CorrelationId)</span><br><span class="line">on CorrelationId</span><br><span class="line">| project Duration = EndTime - StartTime, ResourceAlias</span><br><span class="line">| sort by Duration asc</span><br></pre></td></tr></table></figure>

<p>To find errors for a specific user:</p>
<p>KustoCopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WVDErrors</span><br><span class="line">| where UserName == &quot;userupn&quot;</span><br><span class="line">|take 100</span><br></pre></td></tr></table></figure>

<p>To find out whether a specific error occurred for other users:</p>
<p>KustoCopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WVDErrors</span><br><span class="line">| where CodeSymbolic ==&quot;ErrorSymbolicCode&quot;</span><br><span class="line">| summarize count(UserName) by CodeSymbolic</span><br></pre></td></tr></table></figure>

<p> Note</p>
<ul>
<li>When a user launches a full desktop session, their app usage in the session isn’t tracked as checkpoints in the <code>WVDCheckpoints</code> table.</li>
<li>The <code>ResourcesAlias</code> column in the <code>WVDConnections</code> table shows whether a user has connected to a full desktop or a published app. The column only shows the first app they open during the connection. Any published apps the user opens are tracked in <code>WVDCheckpoints</code>.</li>
<li>The <code>WVDErrors</code> table shows you management errors, host registration issues, and other issues that happen while the user subscribes to a list of apps or desktops.</li>
<li>The <code>WVDErrors</code> table also helps you to identify issues that can be resolved by admin tasks. The value on <code>ServiceError</code> should always equal <code>false</code> for these types of issues. If <code>ServiceError</code> equals <code>true</code>, you’ll need to escalate the issue to Microsoft. Ensure you provide the <em>CorrelationID</em> for errors you escalate.</li>
<li>When debugging connectivity issues, in some cases client information might be missing even if the connection events completes. This applies to the <code>WVDConnections</code> and <code>WVDCheckpoints</code> tables.</li>
</ul>
<h1 id="Use-Azure-Monitor-for-Azure-Virtual-Desktop-to-monitor-your-deployment"><a href="#Use-Azure-Monitor-for-Azure-Virtual-Desktop-to-monitor-your-deployment" class="headerlink" title="Use Azure Monitor for Azure Virtual Desktop to monitor your deployment"></a>Use Azure Monitor for Azure Virtual Desktop to monitor your deployment</h1><p>Azure Monitor for Azure Virtual Desktop is a dashboard built on Azure Monitor Workbooks that helps IT professionals understand their Azure Virtual Desktop environments. This topic will walk you through how to set up Azure Monitor for Azure Virtual Desktop to monitor your Azure Virtual Desktop environments.</p>
<h2 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h2><p>Before you start using Azure Monitor for Azure Virtual Desktop, you’ll need to set up the following things:</p>
<ul>
<li>All Azure Virtual Desktop environments you monitor must be based on the latest release of Azure Virtual Desktop that’s compatible with Azure Resource Manager.</li>
<li>At least one configured Log Analytics Workspace. Use a designated Log Analytics workspace for your Azure Virtual Desktop session hosts to ensure that performance counters and events are only collected from session hosts in your Azure Virtual Desktop deployment.</li>
<li>Enable data collection for the following things in your Log Analytics workspace:<ul>
<li>Diagnostics from your Azure Virtual Desktop environment</li>
<li>Recommended performance counters from your Azure Virtual Desktop session hosts</li>
<li>Recommended Windows Event Logs from your Azure Virtual Desktop session hosts</li>
</ul>
</li>
</ul>
<p>The data setup process described in this article is the only one you’ll need to monitor Azure Virtual Desktop. You can disable all other items sending data to your Log Analytics workspace to save costs.</p>
<p>Anyone monitoring Azure Monitor for Azure Virtual Desktop for your environment will also need the following read-access permissions:</p>
<ul>
<li>Read-access to the Azure resource groups that hold your Azure Virtual Desktop resources.</li>
<li>Read-access to the subscription’s resource groups that hold your Azure Virtual Desktop session hosts.</li>
<li>Read access to the Log Analytics workspace. In the case that multiple Log Analytics workspaces are used, read access should be granted to each to allow viewing data.</li>
</ul>
<p> Note</p>
<p>Read access only lets admins view data. They’ll need different permissions to manage resources in the Azure Virtual Desktop portal.</p>
<h2 id="Open-Azure-Monitor-for-Azure-Virtual-Desktop"><a href="#Open-Azure-Monitor-for-Azure-Virtual-Desktop" class="headerlink" title="Open Azure Monitor for Azure Virtual Desktop"></a>Open Azure Monitor for Azure Virtual Desktop</h2><p>You can open Azure Monitor for Azure Virtual Desktop with one of the following methods:</p>
<ul>
<li>Go to <a href="https://aka.ms/avdi">aka.ms&#x2F;avdi</a>.</li>
<li>Search for and select <strong>Azure Virtual Desktop</strong> from the Azure portal, then select <strong>Insights</strong>.</li>
<li>Search for and select <strong>Azure Monitor</strong> from the Azure portal. Select <strong>Insights Hub</strong> under <strong>Insights</strong>, then select <strong>Azure Virtual Desktop</strong>. Once you have the page open, enter the <strong>Subscription</strong>, <strong>Resource group</strong>, <strong>Host pool</strong>, and <strong>Time range</strong> of the environment you want to monitor.</li>
</ul>
<p> Note</p>
<p>Azure Virtual Desktop currently only supports monitoring one subscription, resource group, and host pool at a time. If you can’t find the environment you want to monitor, see <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/troubleshoot-azure-monitor">our troubleshooting documentation</a> for known feature requests and issues.</p>
<h2 id="Log-Analytics-settings"><a href="#Log-Analytics-settings" class="headerlink" title="Log Analytics settings"></a>Log Analytics settings</h2><p>To start using Azure Monitor for Azure Virtual Desktop, you’ll need at least one Log Analytics workspace. Use a designated Log Analytics workspace for your Azure Virtual Desktop session hosts to ensure that performance counters and events are only collected form session hosts in your Azure Virtual Desktop deployment. If you already have a workspace set up, skip ahead to <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/azure-monitor#set-up-using-the-configuration-workbook">Set up using the configuration workbook</a>. To set one up, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/quick-create-workspace">Create a Log Analytics workspace in the Azure portal</a>.</p>
<p> Note</p>
<p>Standard data storage charges for Log Analytics will apply. To start, we recommend you choose the pay-as-you-go model and adjust as you scale your deployment and take in more data. To learn more, see <a href="https://azure.microsoft.com/pricing/details/monitor/">Azure Monitor pricing</a>.</p>
<h2 id="Set-up-using-the-configuration-workbook"><a href="#Set-up-using-the-configuration-workbook" class="headerlink" title="Set up using the configuration workbook"></a>Set up using the configuration workbook</h2><p>If it’s your first time opening Azure Monitor for Azure Virtual Desktop, you’ll need set up Azure Monitor for your Azure Virtual Desktop environment. To configure your resources:</p>
<ol>
<li>Open Azure Monitor for Azure Virtual Desktop in the Azure portal at <a href="https://aka.ms/avdi">aka.ms&#x2F;avdi</a>, then select <strong>configuration workbook</strong>.</li>
<li>Select an environment to configure under <strong>Subscription</strong>, <strong>Resource Group</strong>, and <strong>Host Pool</strong>.</li>
</ol>
<p>The configuration workbook sets up your monitoring environment and lets you check the configuration after you’ve finished the setup process. It’s important to check your configuration if items in the dashboard aren’t displaying correctly, or when the product group publishes updates that require new settings.</p>
<h3 id="Resource-diagnostic-settings"><a href="#Resource-diagnostic-settings" class="headerlink" title="Resource diagnostic settings"></a>Resource diagnostic settings</h3><p>To collect information on your Azure Virtual Desktop infrastructure, you’ll need to enable several diagnostic settings on your Azure Virtual Desktop host pools and workspaces (this is your Azure Virtual Desktop workspace, not your Log Analytics workspace). To learn more about host pools, workspaces, and other Azure Virtual Desktop resource objects, see our <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/environment-setup">environment guide</a>.</p>
<p>You can learn more about Azure Virtual Desktop diagnostics and the supported diagnostic tables at <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/diagnostics-log-analytics">Send Azure Virtual Desktop diagnostics to Log Analytics</a>.</p>
<p>To set your resource diagnostic settings in the configuration workbook:</p>
<ol>
<li>Select the <strong>Resource diagnostic settings</strong> tab in the configuration workbook.</li>
<li>Select <strong>Log Analytics workspace</strong> to send Azure Virtual Desktop diagnostics.</li>
</ol>
<h4 id="Host-pool-diagnostic-settings"><a href="#Host-pool-diagnostic-settings" class="headerlink" title="Host pool diagnostic settings"></a>Host pool diagnostic settings</h4><p>To set up host pool diagnostics using the resource diagnostic settings section in the configuration workbook:</p>
<ol>
<li><p>Under <strong>Host pool</strong>, check to see whether Azure Virtual Desktop diagnostics are enabled. If they aren’t, an error message will appear that says “No existing diagnostic configuration was found for the selected host pool.” You’ll need to enable the following supported diagnostic tables:</p>
<ul>
<li>Checkpoint</li>
<li>Error</li>
<li>Management</li>
<li>Connection</li>
<li>HostRegistration</li>
<li>AgentHealthStatus</li>
</ul>
<p> Note</p>
<p>If you don’t see the error message, you don’t need to do steps 2 through 4.</p>
</li>
<li><p>Select <strong>Configure host pool</strong>.</p>
</li>
<li><p>Select <strong>Deploy</strong>.</p>
</li>
<li><p>Refresh the configuration workbook.</p>
</li>
</ol>
<h4 id="Workspace-diagnostic-settings"><a href="#Workspace-diagnostic-settings" class="headerlink" title="Workspace diagnostic settings"></a>Workspace diagnostic settings</h4><p>To set up workspace diagnostics using the resource diagnostic settings section in the configuration workbook:</p>
<ol>
<li><p>Under <strong>Workspace</strong>, check to see whether Azure Virtual Desktop diagnostics are enabled for the Azure Virtual Desktop workspace. If they aren’t, an error message will appear that says “No existing diagnostic configuration was found for the selected workspace.” You’ll need to enable the following supported diagnostics tables:</p>
<ul>
<li>Checkpoint</li>
<li>Error</li>
<li>Management</li>
<li>Feed</li>
</ul>
<p> Note</p>
<p>If you don’t see the error message, you don’t need to do steps 2-4.</p>
</li>
<li><p>Select <strong>Configure workspace</strong>.</p>
</li>
<li><p>Select <strong>Deploy</strong>.</p>
</li>
<li><p>Refresh the configuration workbook.</p>
</li>
</ol>
<h3 id="Session-host-data-settings"><a href="#Session-host-data-settings" class="headerlink" title="Session host data settings"></a>Session host data settings</h3><p>To collect information on your Azure Virtual Desktop session hosts, you’ll need to install the Log Analytics agent on all session hosts in the host pool, make sure the session hosts are sending to a Log Analytics workspace, and configure your Log Analytics agent settings to collect performance data and Windows Event Logs.</p>
<p>The Log Analytics workspace you send session host data to doesn’t have to be the same one you send diagnostic data to. If you have Azure session hosts outside of your Azure Virtual Desktop environment, we recommend having a designated Log Analytics workspace for the Azure Virtual Desktop session hosts.</p>
<p>To set the Log Analytics workspace where you want to collect session host data:</p>
<ol>
<li>Select the <strong>Session host data settings</strong> tab in the configuration workbook.</li>
<li>Select the <strong>Log Analytics workspace</strong> you want to send session host data to.</li>
</ol>
<h4 id="Session-hosts"><a href="#Session-hosts" class="headerlink" title="Session hosts"></a>Session hosts</h4><p>You’ll need to install the Log Analytics agent on all session hosts in the host pool and send data from those hosts to your selected Log Analytics workspace. If Log Analytics isn’t configured for all the session hosts in the host pool, you’ll see a <strong>Session hosts</strong> section at the top of <strong>Session host data settings</strong> with the message “Some hosts in the host pool are not sending data to the selected Log Analytics workspace.”</p>
<p> Note</p>
<p>If you don’t see the <strong>Session hosts</strong> section or error message, all session hosts are set up correctly. Skip ahead to set up instructions for <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/azure-monitor#workspace-performance-counters">Workspace performance counters</a>. Currently automated deployment is limited to 1000 session hosts or fewer.</p>
<p>To set up your remaining session hosts using the configuration workbook:</p>
<ol>
<li>Select <strong>Add hosts to workspace</strong>.</li>
<li>Refresh the configuration workbook.</li>
</ol>
<p> Note</p>
<p>For larger host pools (&gt; 1000 session hosts), or if there are deployment issues, it is recommended to install the Log Analytics agent at <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/extensions/oms-windows#extension-schema">time of session host creation</a> through the use of an ARM template.</p>
<h4 id="Workspace-performance-counters"><a href="#Workspace-performance-counters" class="headerlink" title="Workspace performance counters"></a>Workspace performance counters</h4><p>You’ll need to enable specific performance counters to collect performance information from your session hosts and send it to the Log Analytics workspace.</p>
<p>If you already have performance counters enabled and want to remove them, follow the instructions in <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/agents/data-sources-performance-counters">Configuring performance counters</a>. You can add and remove performance counters in the same location.</p>
<p>To set up performance counters using the configuration workbook:</p>
<ol>
<li>Under <strong>Workspace performance counters</strong> in the configuration workbook, check <strong>Configured counters</strong> to see the counters you’ve already enabled to send to the Log Analytics workspace. Check <strong>Missing counters</strong> to make sure you’ve enabled all required counters.</li>
<li>If you have missing counters, select <strong>Configure performance counters</strong>.</li>
<li>Select <strong>Apply Config</strong>.</li>
<li>Refresh the configuration workbook.</li>
<li>Make sure all the required counters are enabled by checking the <strong>Missing counters</strong> list.</li>
</ol>
<h4 id="Configure-Windows-Event-Logs"><a href="#Configure-Windows-Event-Logs" class="headerlink" title="Configure Windows Event Logs"></a>Configure Windows Event Logs</h4><p>You’ll also need to enable specific Windows Event Logs to collect errors, warnings, and information from the session hosts and send them to the Log Analytics workspace.</p>
<p>If you’ve already enabled Windows Event Logs and want to remove them, follow the instructions in <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/agents/data-sources-windows-events#configure-windows-event-logs">Configuring Windows Event Logs</a>. You can add and remove Windows Event Logs in the same location.</p>
<p>To set up Windows Event Logs using the configuration workbook:</p>
<ol>
<li>Under <strong>Windows Event Logs configuration</strong>, check <strong>Configured Event Logs</strong> to see the Event Logs you’ve already enabled to send to the Log Analytics workspace. Check <strong>Missing Event Logs</strong> to make sure you’ve enabled all Windows Event Logs.</li>
<li>If you have missing Windows Event Logs, select <strong>Configure Events</strong>.</li>
<li>Select <strong>Deploy</strong>.</li>
<li>Refresh the configuration workbook.</li>
<li>Make sure all the required Windows Event Logs are enabled by checking the <strong>Missing Event Logs</strong> list.</li>
</ol>
<p> Note</p>
<p>If automatic event deployment fails, select <strong>Open agent configuration</strong> in the configuration workbook to manually add any missing Windows Event Logs.</p>
<h2 id="Optional-configure-alerts"><a href="#Optional-configure-alerts" class="headerlink" title="Optional: configure alerts"></a>Optional: configure alerts</h2><p>Azure Monitor for Azure Virtual Desktop allows you to monitor Azure Monitor alerts happening within your selected subscription in the context of your Azure Virtual Desktop data. Azure Monitor alerts are an optional feature on your Azure subscriptions, and you need to set them up separately from Azure Monitor for Azure Virtual Desktop. You can use the Azure Monitor alerts framework to set custom alerts on Azure Virtual Desktop events, diagnostics, and resources. To learn more about Azure Monitor alerts, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-log">Azure Monitor Log Alerts</a>.</p>
<h2 id="Diagnostic-and-usage-data"><a href="#Diagnostic-and-usage-data" class="headerlink" title="Diagnostic and usage data"></a>Diagnostic and usage data</h2><p>Microsoft automatically collects usage and performance data through your use of the Azure Monitor service. Microsoft uses this data to improve the quality, security, and integrity of the service.</p>
<p>To provide accurate and efficient troubleshooting capabilities, the collected data includes the portal session ID, Azure Active Directory user ID, and the name of the portal tab where the event occurred. Microsoft doesn’t collect names, addresses, or other contact information.</p>
<p>For more information about data collection and usage, see the <a href="https://privacy.microsoft.com/privacystatement">Microsoft Online Services Privacy Statement</a>.</p>
<p> Note</p>
<p>To learn about viewing or deleting your personal data collected by the service, see <a href="https://learn.microsoft.com/en-us/microsoft-365/compliance/gdpr-dsr-azure">Azure Data Subject Requests for the GDPR</a>. For more information about GDPR, see <a href="https://servicetrust.microsoft.com/ViewPage/GDPRGetStarted">the GDPR section of the Service Trust portal</a>.</p>
<h2 id="Next-steps"><a href="#Next-steps" class="headerlink" title="Next steps"></a>Next steps</h2><p>Now that you’ve configured Azure Monitor for your Azure Virtual Desktop environment, here are some resources that might help you start monitoring your environment:</p>
<ul>
<li>Check out our <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/azure-monitor-glossary">glossary</a> to learn more about terms and concepts related to Azure Monitor for Azure Virtual Desktop.</li>
<li>To estimate, measure, and manage your data storage costs, see <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/azure-monitor-costs">Estimate Azure Monitor costs</a>.</li>
<li>If you encounter a problem, check out our <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/troubleshoot-azure-monitor">troubleshooting guide</a> for help and known issues.</li>
<li>To see what’s new in each version update, see <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/whats-new-azure-monitor">What’s new in Azure Monitor for Azure Virtual Desktop</a>.</li>
</ul>
<h1 id="How-to-resolve-Azure-Advisor-recommendations"><a href="#How-to-resolve-Azure-Advisor-recommendations" class="headerlink" title="How to resolve Azure Advisor recommendations"></a>How to resolve Azure Advisor recommendations</h1><p>This article describes how you can resolve recommendations that appear in Azure Advisor for Azure Virtual Desktop.</p>
<h2 id="“No-validation-environment-enabled”"><a href="#“No-validation-environment-enabled”" class="headerlink" title="“No validation environment enabled”"></a>“No validation environment enabled”</h2><p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/no-validation-environment.png" alt="A screenshot of the Azure Advisor Operational Excellence page. The &quot;no validation environment enabled&quot; recommendation is highlighted in red."></p>
<p>This recommendation appears under Operational Excellence. The recommendation should also show you a warning message like this:</p>
<p>“You don’t have a validation environment enabled in this subscription. When you made your host pools, you selected <strong>No</strong> for “Validation environment” in the Properties tab. To ensure business continuity through Azure Virtual Desktop service deployments, make sure you have at least one host pool with a validation environment where you can test for potential issues.”</p>
<p>You can make this warning message go away by enabling a validation environment in one of your host pools.</p>
<p>To enable a validation environment:</p>
<ol>
<li>Go to your Azure portal home page and select the host pool you want to change.</li>
<li>Next, select the host pool you want to change from a production environment to a validation environment.</li>
<li>In your host pool, select <strong>Properties</strong> on the left column. Next, scroll down until you see “Validation environment.” Select <strong>Yes</strong>, then select <strong>Apply</strong>.</li>
</ol>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/validation-yes.png" alt="A screenshot of the Properties menu. &quot;Validation environment&quot; is highlighted in red, and the &quot;Yes&quot; bubble is selected."></p>
<p>These changes won’t make the warning go away immediately, but it should disappear eventually. Azure Advisor updates twice a day. Until then, you can postpone or dismiss the recommendation manually. We recommend you let the recommendation go away on its own. That way, Azure Advisor can let you know if it comes across any problems as the settings change.</p>
<h2 id="“Not-enough-production-non-validation-environments-enabled”"><a href="#“Not-enough-production-non-validation-environments-enabled”" class="headerlink" title="“Not enough production (non-validation) environments enabled”"></a>“Not enough production (non-validation) environments enabled”</h2><p>This recommendation appears under Operational Excellence.</p>
<p>For this recommendation, the warning message appears for one of these reasons:</p>
<ul>
<li>You have too many host pools in your validation environment.</li>
<li>You don’t have any production host pools.</li>
</ul>
<p>We recommend users have fewer than half of their host pools in a validation environment.</p>
<p>To resolve this warning:</p>
<ol>
<li>Go to your Azure portal home page.</li>
<li>Select the host pools you want either want to change from validation to production.</li>
<li>In your host pool, select the <strong>Properties</strong> tab in the column on the right side of the screen. Next, scroll down until you see “Validation environment.” Select <strong>No</strong>, then select <strong>Apply</strong>.</li>
</ol>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/validation-no.png" alt="A screenshot of the Properties menu. &quot;Validation environment&quot; is highlighted in red, and the &quot;No&quot; bubble is selected."></p>
<p>These changes won’t make the warning go away immediately, but it should disappear eventually. Azure Advisor updates twice a day. Until then, you can postpone or dismiss the recommendation manually. We recommend you let the recommendation go away on its own. That way, Azure Advisor can let you know if it comes across any problems as the settings change.</p>
<h2 id="“Not-enough-links-are-unblocked-to-successfully-implement-your-VM”"><a href="#“Not-enough-links-are-unblocked-to-successfully-implement-your-VM”" class="headerlink" title="“Not enough links are unblocked to successfully implement your VM”"></a>“Not enough links are unblocked to successfully implement your VM”</h2><p>This recommendation appears under Operational Excellence.</p>
<p>You need to unblock specific URLs to make sure that your virtual machine (VM) functions properly. You can see the list at <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/safe-url-list">Safe URL list</a>. If the URLs aren’t unblocked, then your VM won’t work properly.</p>
<p>To solve this recommendation, make sure you unblock all the URLs on the <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/safe-url-list">Safe URL list</a>. You can use Service Tag or FQDN tags to unblock URLs, too.</p>
<h2 id="Next-steps-1"><a href="#Next-steps-1" class="headerlink" title="Next steps"></a>Next steps</h2><p>If you’re looking for more in-depth guides about how to resolve common issues, check out <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/troubleshoot-set-up-overview">Troubleshooting overview, feedback, and support for Azure Virtual Desktop</a>.</p>
<h1 id="Session-host-virtual-machine-sizing-guidelines"><a href="#Session-host-virtual-machine-sizing-guidelines" class="headerlink" title="Session host virtual machine sizing guidelines"></a>Session host virtual machine sizing guidelines</h1><p>Whether you’re running your session host virtual machines (VM) on Remote Desktop Services or Azure Virtual Desktop, different types of workloads require different VM configurations. The examples in this article are generic guidelines and you should only use them for initial performance estimates. For the best possible experience, you will need to scale your deployment depending on your users’ needs.</p>
<h2 id="Workloads"><a href="#Workloads" class="headerlink" title="Workloads"></a>Workloads</h2><p>Users can run different types of workloads on the session host virtual machines. The following table provides examples of a range of workload types to help you estimate what size your virtual machines need to be. After you set up your virtual machines, you should continually monitor their actual usage and adjust their size accordingly. If you end up needing a bigger or smaller virtual machine, you can easily scale your existing deployment up or down in Azure.</p>
<p>The following table describes each workload. <em>Example users</em> are the types of users that might find each workload most helpful. <em>Example apps</em> are the kinds of apps that work best for each workload.</p>
<table>
<thead>
<tr>
<th align="left">Workload type</th>
<th align="left">Example users</th>
<th align="left">Example apps</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Light</td>
<td align="left">Users doing basic data entry tasks</td>
<td align="left">Database entry applications, command-line interfaces</td>
</tr>
<tr>
<td align="left">Medium</td>
<td align="left">Consultants and market researchers</td>
<td align="left">Database entry applications, command-line interfaces, Microsoft Word, static web pages</td>
</tr>
<tr>
<td align="left">Heavy</td>
<td align="left">Software engineers, content creators</td>
<td align="left">Database entry applications, command-line interfaces, Microsoft Word, static web pages, Microsoft Outlook, Microsoft PowerPoint, dynamic web pages, software development</td>
</tr>
<tr>
<td align="left">Power</td>
<td align="left">Graphic designers, 3D model makers, machine learning researchers</td>
<td align="left">Database entry applications, command-line interfaces, Microsoft Word, static web pages, Microsoft Outlook, Microsoft PowerPoint, dynamic web pages, photo and video editing, computer-aided design (CAD), computer-aided manufacturing (CAM)</td>
</tr>
</tbody></table>
<h2 id="Single-session-recommendations"><a href="#Single-session-recommendations" class="headerlink" title="Single-session recommendations"></a>Single-session recommendations</h2><p>Single-session refers to when there is only one user logged on to a session host virtual machine at any one time, such as when using personal host pools in Azure Virtual Desktop. For VM sizing recommendations for single-session scenarios, we recommend at least two physical CPU cores per VM (typically four vCPUs with hyper-threading). If you need more specific VM sizing recommendations for single-session scenarios, ask the software vendors specific to your workload. VM sizing for single-session VMs will likely align with physical device guidelines.</p>
<p>The following table shows examples of typical workloads:</p>
<table>
<thead>
<tr>
<th align="left">Workload type</th>
<th align="left">vCPU&#x2F;RAM&#x2F;OS storage minimum</th>
<th align="left">Example Azure instances</th>
<th align="left">Profile container storage minimum</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Light</td>
<td align="left">2 vCPUs, 8 GB RAM, 32 GB storage</td>
<td align="left">D2s_v5, D2s_v4</td>
<td align="left">30 GB</td>
</tr>
<tr>
<td align="left">Medium</td>
<td align="left">4 vCPUs, 16 GB RAM, 32 GB storage</td>
<td align="left">D4s_v5, D4s_v4</td>
<td align="left">30 GB</td>
</tr>
<tr>
<td align="left">Heavy</td>
<td align="left">8 vCPUs, 32 GB RAM, 32 GB storage</td>
<td align="left">D8s_v5, D8s_v4</td>
<td align="left">30 GB</td>
</tr>
</tbody></table>
<h2 id="Multi-session-recommendations"><a href="#Multi-session-recommendations" class="headerlink" title="Multi-session recommendations"></a>Multi-session recommendations</h2><p>Multi-session refers to when there is more than one user logged on to a session host virtual machine at any one time, such as when using pooled host pools in Azure Virtual Desktop with the Windows 11 Enterprise multi-session operating system (OS). The following tables list the maximum suggested number of users per virtual central processing unit (vCPU) and the minimum VM configuration for each workload. If you need more specific VM sizing recommendations for single-session scenarios, ask the software vendors specific to your workload.</p>
<p>The following table shows examples of standard or larger user workloads:</p>
<table>
<thead>
<tr>
<th align="left">Workload type</th>
<th align="left">Maximum users per vCPU</th>
<th align="left">Minimum vCPU&#x2F;RAM&#x2F;OS storage</th>
<th align="left">Example Azure instances</th>
<th align="left">Minimum profile storage</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Light</td>
<td align="left">6</td>
<td align="left">8 vCPUs, 16 GB RAM, 32 GB storage</td>
<td align="left">D8s_v5, D8s_v4, F8s_v2, D8as_v4, D16s_v5, D16s_v4, F16s_v2, D16as_v4</td>
<td align="left">30 GB</td>
</tr>
<tr>
<td align="left">Medium</td>
<td align="left">4</td>
<td align="left">8 vCPUs, 16 GB RAM, 32 GB storage</td>
<td align="left">D8s_v5, D8s_v4, F8s_v2, D8as_v4, D16s_v5, D16s_v4, F16s_v2, D16as_v4</td>
<td align="left">30 GB</td>
</tr>
<tr>
<td align="left">Heavy</td>
<td align="left">2</td>
<td align="left">8 vCPUs, 16 GB RAM, 32 GB storage</td>
<td align="left">D8s_v5, D8s_v4, F8s_v2, D8as_v4, D16s_v5, D16s_v4, F16s_v2, D16as_v4</td>
<td align="left">30 GB</td>
</tr>
<tr>
<td align="left">Power</td>
<td align="left">1</td>
<td align="left">6 vCPUs, 56 GB RAM, 340 GB storage</td>
<td align="left">D16ds_v5, D16s_v4, D16as_v4, NV6, NV16as_v4</td>
<td align="left">30 GB</td>
</tr>
</tbody></table>
<p>For multi-session, we recommend limiting VM size to between 4 vCPUs and 24 vCPUs for the following reasons:</p>
<ul>
<li><strong>All VMs should have more than two cores</strong>: the UI components in Windows rely on using at least two parallel threads for some of the heavier rendering operations. For multi-session, having multiple users on a two-core VM will lead to the UI and apps becoming unstable, which lowers the quality of user experience. Four cores is the lowest recommended number of cores that a stable multi-session VM should have.</li>
<li><strong>VMs should not have more than 32 cores</strong>: as the number of cores increase, the system’s synchronization overhead also increases. For most workloads, at around 16 cores the return on investment gets lower, with most of the extra capacity being offset by synchronization overhead. You are likely to have more users from two 16 core VMs as opposed to one 32 core one.</li>
</ul>
<p>The recommended range between 4 and 24 cores will generally provide better capacity returns for your users as you increase the number of cores. For example, let’s say you have 12 users sign in at the same time to a VM with four cores. The ratio is three users per core. Meanwhile, on a VM with eight cores and 14 users, the ratio is 1.75 users per core. In this scenario, the latter configuration with a ratio of 1.75 offers greater burst capacity for your applications that have short-term CPU demand.</p>
<p>This recommendation is true at a larger scale. For scenarios with 20 or more users connected to a single VM, several smaller VMs would perform better than one or two large VMs. For example, if you’re expecting 30 or more users to simultaneously sign in within 10 minutes on the same session host with 16 cores, two eight-core VMs will handle the workload better. You can also use breadth-first load balancing to evenly distribute users across different VMs, rather than depth-first where a session host is saturated before using another one.</p>
<p>It’s also better to use a large number of smaller VMs instead of a few large VMs because it’s easier to shut down VMs that need to be updated or aren’t currently in use. With larger VMs, you’re more likely to have at least one user signed in at any time, which prevents you from shutting down the VM. When you have many smaller VMs, it’s more likely you’ll have some that don’t have any users signed in. You can safely shut these unused VMs to conserve resources (either automatically using autoscale in Azure Virtual Desktop, or manually), making your deployment more resilient, easier to maintain, and less expensive.</p>
<h2 id="General-virtual-machine-recommendations"><a href="#General-virtual-machine-recommendations" class="headerlink" title="General virtual machine recommendations"></a>General virtual machine recommendations</h2><p>In addition to the base requirements to run your chosen OS, in Azure we recommend you use Premium SSD storage for your OS disk for production workloads that require a service level agreement (SLA). For more details, see the <a href="https://azure.microsoft.com/support/legal/sla/virtual-machines/v1_8/">SLA for virtual machines</a>.</p>
<p>Graphics processing units (GPUs) are a good choice for users who regularly use graphics-intensive programs for video rendering, 3D design, and simulations.. Azure has several graphics acceleration deployment options and multiple available GPU VM sizes. Learn more at <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/windows/sizes-gpu">GPU optimized virtual machine sizes</a>. For more general information about graphics acceleration in Remote Desktop Services, see <a href="https://learn.microsoft.com/en-us/windows-server/remote/remote-desktop-services/rds-graphics-virtualization">Choose your graphics rendering technology</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/windows/b-series-burstable">B-series burstable VMs</a> in Azure are a good choice for users who don’t always need maximum CPU performance. For more information about VM types and sizes, see <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/windows/sizes">Sizes for Windows virtual machines in Azure</a> and the pricing information on <a href="https://azure.microsoft.com/pricing/details/virtual-machines/series/">our Virtual Machine series page</a>.</p>
<h2 id="Test-your-workload"><a href="#Test-your-workload" class="headerlink" title="Test your workload"></a>Test your workload</h2><p>Finally, we recommend you use simulation tools to test your deployment with both stress tests and real-life usage simulations. Make sure your system is responsive and resilient enough to meet user needs, and remember to vary the load size to avoid surprises.</p>
<h1 id="Autoscale-for-Pooled-Host-Pools-on-Azure-Virtual-Desktop"><a href="#Autoscale-for-Pooled-Host-Pools-on-Azure-Virtual-Desktop" class="headerlink" title="Autoscale for Pooled Host Pools on Azure Virtual Desktop"></a>Autoscale for Pooled Host Pools on Azure Virtual Desktop</h1><p>We shared at Microsoft Inspire that one of our most anticipated features, Autoscale for pooled host pools, will soon be Generally Available on Azure Virtual Desktop. Today, we are happy to announce that Autoscale for pooled host pools is officially Generally Available!</p>
<p><strong>Autoscale for Pooled Host Pools</strong></p>
<p>Autoscale on Azure Virtual Desktop is a native automated scaling solution that automatically turns session host virtual machines on and off according to the schedule and capacity thresholds that you define to fit your workload. With Autoscale, you can save costs by shutting down idle session hosts during off-peak hours while ensuring there’s enough capacity to meet your users’ needs during peak hours. </p>
<p>The following capabilities are now generally available with Autoscale for pooled host pools: </p>
<ul>
<li>You can now use the Desktop Virtualization Power On Off Contributor built in RBAC role instead of a custom RBAC role to grant permissions to Azure Virtual Desktop to scale the session hosts in your host pool.</li>
<li>Scaling plans are now available in almost all regions where Azure Virtual Desktop host pool objects are, including Australia East and all US and Canada regions.</li>
</ul>
<p>In addition, stay tuned for announcements on the following capabilities that are coming soon:</p>
<ul>
<li>Scaling plans in UK and Japan regions.</li>
<li>The ability to port Autoscale diagnostics logs to Log Analytics for analysis and parsing.</li>
<li>The ability to create schedules as proxy resources in PowerShell for easier configuration.</li>
</ul>
<p><strong>Getting Started</strong></p>
<p>To enable this feature, simply create a scaling plan, define schedules for when virtual machines should be turned on or off, and assign the scaling plan to one or more host pools.</p>
<p><img src="https://techcommunity.microsoft.com/t5/image/serverpage/image-id/393421iA84288292EE6B510/image-size/medium?v=v2&px=400" alt="thumbnail image 1 of blog post titled  	 	 	  	 	 	 				 		 			 				 						 							Announcing General Availability of Autoscale for Pooled Host Pools on Azure Virtual Desktop 							 						 					 			 		 	 			 	 	 	 	 	 "></p>
<h1 id="Manage-app-groups-with-the-Azure-portal"><a href="#Manage-app-groups-with-the-Azure-portal" class="headerlink" title="Manage app groups with the Azure portal"></a>Manage app groups with the Azure portal</h1><p>This content applies to Azure Virtual Desktop with Azure Resource Manager Azure Virtual Desktop objects. If you’re using Azure Virtual Desktop (classic) without Azure Resource Manager objects, see <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/virtual-desktop-fall-2019/manage-app-groups-2019">this article</a>.</p>
<p>The default app group created for a new Azure Virtual Desktop host pool also publishes the full desktop. In addition, you can create one or more RemoteApp application groups for the host pool. Follow this tutorial to create a RemoteApp app group and publish individual Start menu apps.</p>
<p> Note</p>
<p>You can dynamically attach MSIX apps to user sessions or add your app packages to a custom virtual machine (VM) image to publish your organization’s apps. Learn more at <a href="https://learn.microsoft.com/en-us/azure/virtual-desktop/remote-app-streaming/custom-apps">How to host custom apps with Azure Virtual Desktop</a>.</p>
<p>In this tutorial, learn how to:</p>
<ul>
<li>Create a RemoteApp group.</li>
<li>Grant access to RemoteApp programs.</li>
</ul>
<h2 id="Create-a-RemoteApp-group"><a href="#Create-a-RemoteApp-group" class="headerlink" title="Create a RemoteApp group"></a>Create a RemoteApp group</h2><p>If you’ve already created a host pool and session host VMs using the Azure portal or PowerShell, you can add application groups from the Azure portal with the following process:</p>
<ol>
<li><p>Sign in to the <a href="https://portal.azure.com/">Azure portal</a>.</p>
<p> Note</p>
<p>If you’re signing in to the US Gov portal, go to <a href="https://portal.azure.us/">https://portal.azure.us/</a> instead.</p>
<p>If you’re accessing the Azure China portal, go to <a href="https://portal.azure.cn/">https://portal.azure.cn/</a>.</p>
</li>
<li><p>Search for and select <strong>Azure Virtual Desktop</strong>.</p>
</li>
<li><p>You can add an application group directly or you can add it from an existing host pool. Choose an option below:</p>
<ul>
<li>Select <strong>Application groups</strong> in the menu on the left side of the page, then select <strong>+ Add</strong>.</li>
<li>Select <strong>Host pools</strong> in the menu on the left side of the screen, select the name of the host pool, select <strong>Application groups</strong> from the menu on the left side, then select <strong>+ Add</strong>. In this case, the host pool will already be selected on the Basics tab.</li>
</ul>
</li>
<li><p>On the <strong>Basics</strong> tab, select the <strong>Subscription</strong> and <strong>Resource group</strong> you want to create the app group for. You can also choose to create a new resource group instead of selecting an existing one.</p>
</li>
<li><p>Select the <strong>Host pool</strong> that will be associated with the application group from the drop-down menu.</p>
<p> Note</p>
<p>You must select the host pool associated with the application group. App groups have apps or desktops that are served from a session host and session hosts are part of host pools. The app group needs to be associated with a host pool during creation.</p>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/basics-tab.png" alt="A screenshot of the Basics tab in the Azure portal."></p>
</li>
<li><p>Select <strong>RemoteApp</strong> under <strong>Application group type</strong>, then enter a name for your RemoteApp.</p>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/remoteapp-button.png" alt="A screenshot of the Application group type fields. &quot;RemoteApp&quot; is highlighted."></p>
</li>
<li><p>Select <strong>Next: Assignments &gt;</strong> tab.</p>
</li>
<li><p>To assign individual users or user groups to the app group, select <strong>+Add Azure AD users or user groups</strong>.</p>
</li>
<li><p>Select the users you want to have access to the apps. You can select single or multiple users and user groups.</p>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/select-users.png" alt="A screenshot of the user selection menu."></p>
</li>
<li><p>Select <strong>Select</strong>.</p>
</li>
<li><p>Select <strong>Next: Applications &gt;</strong>, then select <strong>+Add applications</strong>.</p>
</li>
<li><p>To add an application from the start menu:</p>
<ul>
<li>Under <strong>Application source</strong>, select <strong>Start menu</strong> from the drop-down menu. Next, under <strong>Application</strong>, choose the application from the drop-down menu.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/add-app-start.png" alt="A screenshot of the add application screen. The user has selected the Character Map as the application source and entered Character Map in the display name field."></p>
<ul>
<li>In <strong>Display name</strong>, enter the name for the application that will be shown to the user on their client.</li>
<li>Leave the other options as-is and select <strong>Save</strong>.</li>
</ul>
</li>
<li><p>To add an application from a specific file path:</p>
<ul>
<li>Under <strong>Application source</strong>, select <strong>File path</strong> from the drop-down menu.</li>
<li>In <strong>Application path</strong>, enter the path to the application on the session host registered with the associated host pool.</li>
<li>Enter the application’s details in the <strong>Application name</strong>, <strong>Display name</strong>, <strong>Icon path</strong>, and <strong>Icon index</strong> fields.</li>
<li>Select <strong>Save</strong>.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/add-app-file.png" alt="A screenshot of the add application page. The user has entered the file path to the 7-Zip File Manager app."></p>
</li>
<li><p>Repeat this process for every application you want to add to the application group.</p>
</li>
<li><p>Next, select <strong>Next: Workspace &gt;</strong>.</p>
</li>
<li><p>If you want to register the app group to a workspace, select <strong>Yes</strong> for <strong>Register application group</strong>. If you’d rather register the app group at a later time, select <strong>No</strong>.</p>
</li>
<li><p>If you select <strong>Yes</strong>, you can select an existing workspace to register your app group to.</p>
<p> Note</p>
<p>You can only register the app group to workspaces created in the same location as the host pool. Also. if you’ve previously registered another app group from the same host pool as your new app group to a workspace, it will be selected and you can’t edit it. All app groups from a host pool must be registered to the same workspace.</p>
<p><img src="https://learn.microsoft.com/en-us/azure/virtual-desktop/media/register-existing.png" alt="A screenshot of the register application group page for an already existing workspace. The host pool is preselected."></p>
</li>
<li><p>Optionally, if you want to create tags to make your workspace easy to organize, select <strong>Next: Tags &gt;</strong> and enter your tag names.</p>
</li>
<li><p>When you’re done, select <strong>Review + create</strong>.</p>
</li>
<li><p>Wait a bit for the validation process to complete. When it’s done, select <strong>Create</strong> to deploy your app group.</p>
</li>
</ol>
<p>The deployment process will do the following things for you:</p>
<ul>
<li>Create the RemoteApp app group.</li>
<li>Add your selected apps to the app group.</li>
<li>Publish the app group published to users and user groups you selected.</li>
<li>Register the app group, if you chose to do so.</li>
<li>Create a link to an Azure Resource Manager template based on your configuration that you can download and save for later.</li>
</ul>
<p> Important</p>
<p>You can only create 500 application groups for each Azure Active Directory tenant. We added this limit because of service limitations for retrieving feeds for our users. This limit doesn’t apply to app groups created in Azure Virtual Desktop (classic).</p>
<h2 id="Edit-or-remove-an-app"><a href="#Edit-or-remove-an-app" class="headerlink" title="Edit or remove an app"></a>Edit or remove an app</h2><p>To edit or remove an app from an app group:</p>
<ol>
<li><p>Sign in to the <a href="https://portal.azure.com/">Azure portal</a>.</p>
<p> Note</p>
<p>If you’re signing in to the US Gov portal, go to <a href="https://portal.azure.us/">https://portal.azure.us/</a> instead.</p>
</li>
<li><p>Search for and select <strong>Azure Virtual Desktop</strong>.</p>
</li>
<li><p>You can either add an application group directly or from an existing host pool by choosing one of the following options:</p>
<ul>
<li>To add a new application group directly, select <strong>Application groups</strong> in the menu on the left side of the page, then select the app group you want to edit.</li>
<li>To edit an app group in an existing host pool, select <strong>Host pools</strong> in the menu on the left side of the screen, select the name of the host pool, then select <strong>Application groups</strong> in the menu that appears on the left side of the screen, and then select the app group you want to edit.</li>
</ul>
</li>
<li><p>Select <strong>Applications</strong> in the menu on the left side of the page.</p>
</li>
<li><p>If you want to remove an application, select the check box next to the application, then select <strong>Remove</strong> from the menu on the top of the page.</p>
</li>
<li><p>If you want to edit the details of an application, select the application name. This will open up the editing menu.</p>
</li>
<li><p>When you’re done making changes, select <strong>Save</strong>.</p>
</li>
</ol>
<h2 id="Next-steps-2"><a href="#Next-steps-2" class="headerlink" title="Next steps"></a>Next steps</h2><p>In this tutorial, you learned how to create an app group, populate it with RemoteApp programs, and assign users to the app group. To learn how to create a validation host pool, see the following tutorial. You can use a validation host pool to monitor service updates before rolling them out to your production environment.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Configuring-Networking-in-Azure-App-Service-9</title>
    <url>/2022/11/14/AZ-204-Configuring-Networking-in-Azure-App-Service-9/</url>
    <content><![CDATA[<h1 id="Configuring-Networking-in-Azure-App-Service-Introduction"><a href="#Configuring-Networking-in-Azure-App-Service-Introduction" class="headerlink" title="Configuring Networking in Azure App Service - Introduction"></a>Configuring Networking in Azure App Service - Introduction</h1><p>Welcome to “Configuring Networking in Azure App Service”. In this course, I’ll cover the most commonly used networking configurations in App Service. First, I’ll explain how to create a custom domain name for your app. Then, I’ll show you how to enable TLS&#x2F;SSL so people can reach your app using HTTPS. Finally, I’ll explain different ways of controlling inbound and outbound connections to and from your app.</p>
<p>To get the most from this course, you should already have some basic knowledge of both App Service and Azure networking. It would also help to have some knowledge of DNS, that is, the Domain Name System.</p>
<p>Okay, let’s get started.</p>
<h1 id="Custom-Domains"><a href="#Custom-Domains" class="headerlink" title="Custom Domains"></a>Custom Domains</h1><p>One of the most common things you’ll need to do when you create an app using Azure App Service is to set it up with a custom domain name. That’s because, by default, an App Service app has a URL that ends with the “.azurewebsites.net” domain, which probably isn’t what you want for a commercial website. For example, if you have an app that should be hosted at a site called contoso.com, then you’ll need to tell App Service to use that custom domain name. </p>
<p>Here’s how to do that. First, you need to make sure your App Service Plan is using a paid tier because custom domains are not supported in the free F1 tier.</p>
<p>Next, let’s assume that you’ve already registered your domain name with a domain provider and that you can edit the DNS records for your domain. This isn’t a DNS course, so I’m not going to go into detail about how DNS works. I’ll just explain what you need to do to set up a custom domain for an App Service app. If you’re not familiar with DNS, then it would be a good idea to learn more about it before you make changes to your DNS records.</p>
<p>Okay, now go into the Custom Domain settings for your app in App Service and find the Custom Domain Verification ID. This is something that you’ll add to your domain records to prove to Microsoft that you own the domain. Copy the verification ID and paste it into a text editor. You’ll also need to copy the IP address of your app and the existing URL of the app from the Custom Domains page. The existing URL will end in “.azurewebsites.net”. Paste both of these values into a text editor as well.</p>
<p>Now go to your domain provider’s website and open your DNS records. If you’re going to use a root domain, such as contoso.com, for your app, then create an A record. If you’re going to use a subdomain, such as <a href="http://www.contoso.com/">www.contoso.com</a>, then create a CNAME record. You’ll often want to do both.</p>
<p>In the A record, set the name to ‘@’ (which means the root domain), and set the value to the IP address of your app. In the CNAME record, set the name to the subdomain, such as www, and set the value to the existing URL of your app.</p>
<p>Now to prove to Microsoft that you own this domain and its subdomain, you need to create a TXT record for each of them. A TXT record is just an informational record that doesn’t affect the resolution of your domain name. For the root domain, set the name to asuid, which I’m assuming stands for “App Service Unique Identifier”, and set the value to the Custom Domain Verification ID that you copied from App Service. For the subdomain, set the name to asuid dot and the subdomain, so it would be asuid.www in our example. And set the value to the Custom Domain Verification ID.</p>
<p>Now you need to go back to the Custom Domains page for your App Service app and add your custom domain. You just need to put in the name of the domain and the DNS record type, which will be either A or CNAME, depending on whether you’re adding the root domain or a subdomain. Then you click the “Validate” button, and Azure checks for the DNS records that you added. If it works, then your app is now accessible using your custom domain name.</p>
<h1 id="Enabling-TLS-x2F-SSL"><a href="#Enabling-TLS-x2F-SSL" class="headerlink" title="Enabling TLS&#x2F;SSL"></a>Enabling TLS&#x2F;SSL</h1><p>After you’ve configured a custom domain for your app, it will only be accessible at a URL starting with “http”, which is an insecure protocol. These days, every website should be able to respond to requests over HTTPS, which is the secure version of HTTP. To set that up, you need to enable TLS&#x2F;SSL, which takes a bit of work.</p>
<p>First, you need to make sure that the tier of your App Service Plan is at least Basic because the Free and Shared tiers don’t support TLS&#x2F;SSL for custom domains.</p>
<p>Second, you need to have a TLS&#x2F;SSL certificate file. This type of file contains a private key and a certificate with a public key. These are needed for a couple of reasons. First, the public&#x2F;private key pair is used to encrypt and decrypt traffic between the website and the browser of anyone visiting the site. Second, the certificate verifies that the browser is interacting directly with the website.</p>
<p>This might seem like an unnecessary step, but it helps prevent something called a man-in-the-middle attack. This is where another computer is intercepting messages between two parties (the web server and the browser in this case) and listening in on the conversation. In some cases, it will even change the messages. However, if the web server starts an encrypted conversation by presenting a certificate that is verified by a trusted certificate authority, then the browser can be sure that it’s communicating directly with the webserver.</p>
<p>Third, you need to create a TLS binding to your custom domain.</p>
<p>Now let’s get into the details of how to do steps 2 and 3. So where do you get a certificate file? The easiest way is to use the free App Service managed certificate. It’s provided by Digicert, which is the certificate authority that verifies the authenticity of the certificate. This solution won’t work in all cases, but it works for most situations, and it’s free, so it’s hard to beat that. If you need to do something special, then you can import a certificate file that you obtained from somewhere else.</p>
<p>To create a free certificate, go into the TLS&#x2F;SSL settings for your App Service app, then select Private Key Certificates, and click Create App Service Managed Certificate. Then tell it which custom domain you want to create the certificate for, and that’s it.</p>
<p>Once you have a private key certificate, whether it’s a free one or one that you imported from elsewhere, then you can bind TLS&#x2F;SSL to your domain.</p>
<p>Other than specifying the custom domain and the certificate, you need to tell it whether to use SNI SSL or IP SSL. SNI SSL binds the certificate using the website’s hostname, while IP SSL binds the certificate to the website’s IP address. SNI SSL gives you more flexibility, and it’s easier to configure, so it’s usually the best choice. The only disadvantage is that it doesn’t work on really old browsers, and when I say “really old”, I mean it. All major browsers have provided support for SNI SSL since 2007.</p>
<p>Once you’ve bound your certificate to your custom domain, people will be able to access your app using HTTPS. However, they’ll still be able to access it using HTTP, which is not encrypted, so if you want to ensure that everyone will access your site over HTTPS, then you can select the “HTTPS only” option in your app’s TLS&#x2F;SSL settings. There’s also a “Minimum TLS Version” option. By default, it’s set to 1.2, which is the recommended version, but you can set it to 1.0 or 1.1 if you want to support older browsers. It’s usually best to leave it set to 1.2, though.</p>
<p>As I mentioned earlier, one of the benefits of binding a certificate to a custom domain is that it lets a client device know that it’s communicating with a legitimate website and not a hacker. But the website has no way of knowing that’s it’s communicating with a legitimate client and not a hacker. If you require that level of security, then you can enable TLS mutual authentication. This is also known as client certificate authentication. It’s typically used only within an individual organization because it requires that all client devices have a client certificate.</p>
<p>To enable this, you need to go into the general configuration settings for your app, and set “Client certificate mode” to “Require”. You have to do more to make it work, though, because App Service doesn’t handle the client authentication. It just forwards the client certificate to your app. So, you need to add code to your app to handle the authentication. App Service forwards the client certificate as a base-64 encoded value in an X-ARR-ClientCert request header.</p>
<p>And that’s it for enabling TLS&#x2F;SSL.</p>
<h1 id="Inbound-and-Outbound-Connections"><a href="#Inbound-and-Outbound-Connections" class="headerlink" title="Inbound and Outbound Connections"></a>Inbound and Outbound Connections</h1><p>By default, a web app created using App Service can only be accessed through the internet. But there are many cases when you’d want to be able to connect to an app in different ways. For example, you might want an app to only be accessible internally rather than over the internet, or you might want to connect the app to a database in either Azure or an on-premises environment.</p>
<p>There are many different ways to connect to or from an app, depending on exactly what you need to do. These methods can be divided into two groups: inbound (for connecting to an app) and outbound (for connecting from an app to other resources).</p>
<p>We’ll start with the inbound methods. If you’re okay with your app communicating over the internet, but you want to restrict which IP addresses can connect to it, then the easiest way to do that is to add access restriction rules to your app. Each rule either allows or denies access to a single IP address or a block of IP addresses.</p>
<p>If you have resources in an Azure virtual network that need to connect to your app over the Microsoft backbone network rather than over the internet, then you can restrict access to your app using a service endpoint rather than an IP address. A service endpoint is something you can enable on a subnet. So you can create a service-endpoint-based rule that allows access to your app from a particular subnet in a VNet.</p>
<p>A newer way of doing this is to create a private endpoint for your app. This is a private IP address in your VNet that gets attached to your app. One advantage of using a private endpoint is that it makes it easy to connect to your app from an on-premises environment. If you already have a connection from your on-premises environment to your Azure VNet using a method such as Azure ExpressRoute or Azure VPN, then you can connect to the app through the private endpoint in the VNet. This is more difficult to do with a service endpoint. For this and other reasons, Microsoft recommends using private endpoints rather than service endpoints.</p>
<p>All of the methods I’ve mentioned so far have been for controlling inbound connections to your app. To allow your app to initiate outbound connections to various resources, we need to use different methods. An outbound connection is typically used to connect an app to a database or other type of supporting resource.</p>
<p>App Service Hybrid Connections is a feature that allows an app to connect to a resource in an Azure virtual network or an on-premises environment. To make it work, you need to install Hybrid Connection Manager on a Windows Server that has access to both networks over port 443. App Service then uses this as a relay to connect to the other environment. The advantage of using Hybrid Connections is that it provides secure access even if you don’t have an ExpressRoute or VPN connection between your on-premises environment and Azure.</p>
<p>Another method is called VNet Integration. There are two different types: Regional VNet Integration and Gateway-required VNet Integration. The great thing about the Regional method is that you don’t need to install anything.</p>
<p>To configure it in App Service, you go into the Networking section of your app’s configuration and select VNet Integration. Then you just need to tell it which VNet you want to add. If the VNet that you want to integrate with is in the same region as the app, then the only requirement is that the VNet has to have an empty subnet that the Integration feature can use.</p>
<p>Once you’ve configured Regional VNet Integration, then your app can connect to resources in the VNet or in an on-premises network that’s connected to the VNet through ExpressRoute or a VPN. It can even connect to a VNet in a different region if there’s a peering connection between that VNet and the regional VNet.</p>
<p>Pretty much the only reason you’d need to use Gateway-required VNet Integration is if your app needs to connect to a VNet in another region that isn’t peered with a regional VNet. In that case, you’d need to install a virtual network gateway in the remote VNet. This method has a number of disadvantages, though, such as not allowing connections to on-premises environments over ExpressRoute. So, in most cases, it’s better to use Regional VNet Integration than Gateway-required VNet Integration.</p>
<p>And that’s it for configuring networking in Azure App Service. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Configuring-Azure-API-Management-33</title>
    <url>/2022/11/14/AZ-204-Configuring-Azure-API-Management-33/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Welcome to configuring Azure API Management. My name is Matthew Quickenden, and I am going to be guiding you through some of the key features and aspects of configuring the Azure API Management resource. I have over 20 years industry experience and have recently been working with cloud and hybrid cloud technologies, with a specific focus on <a href="https://cloudacademy.com/library/azure/">Azure</a> and Azure Stack. If you have any questions, feel free to connect with me on LinkedIn, or send an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. </p>
<p>This course is intended for people who want to become a certified Azure developer, or who are tasked with creating and managing an Azure API Management resource. To get the most out of this course, you should have a general understanding of Microsoft Azure and be able to deploy and manage resources. Being familiar with restful APIs and having some experience using Postman and an understanding of OAuth token flow would be useful, but not essential. For this course, you do not need any knowledge of any specific development languages. </p>
<p>We are going to look at what Azure API Management is and what it can do, and we will create an instance in Azure. Once we have this instance, we will look at various ways we can secure the APIs and apply policies during different stages of an API request. We will use Postman to help access and consume the service external to the Azure Portal. </p>
<p>By the end of this course, you should be able to set up an instance of Azure’s API Management, secure it using OAuth endpoints, apply policies to alter API requests and responses and be able to troubleshoot and trace policies being applied. Your feedback on this course is important, so please give it a rating when you’re finished. Let’s <a href="https://cloudacademy.com/course/configuring-azure-api-management/getting-started/">get started</a>.</p>
<h1 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h1><p>Because <a href="https://cloudacademy.com/course/configuring-azure-api-management/introduction/">Azure API Management</a> takes a while to deploy and become usable we’re going to go to the <a href="https://cloudacademy.com/library/azure/">Azure</a> portal and kick off the provisioning process immediately. There is only one blade you need to complete to start the creation of your service which we can review now. </p>
<p>In this case, we can see a screenshot, where I’ve named it clouddemo which is appended with the .azure-api.net suffix. I’ve select a subscription and a resource group. I’ve chosen a location and given the company name. I’ve also entered an email address, this needs to be a valid email as you will receive emails to this based on the service and selected a pricing tier which is Developer. </p>
<p>If we look at the pricing details we can see that the Developer tier costs around 33 dollars a month and contains all the features we need to develop. This includes AAD Integration, virtual networks, the things you are short on, the things like redundancy. You’re only in a single region and you can’t scale. However, all the features you need to develop are there for any of the other tiers. Once you go into production you can change the skew of your API very easily by selecting a new skew. So with all this done, let’s click create and we can let the service provision. Once the service is ready, you will receive a notification email.</p>
<h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>While that’s provisioning, let’s take a look at what the <a href="https://cloudacademy.com/course/configuring-azure-api-management/introduction/">Azure API Management</a> is. On the Microsoft website if you look up what is API Management, <a href="https://cloudacademy.com/library/azure/">Microsoft</a> defines it as API Management helps organizations publish APIs to external, partner, and internal developers to unlock the potential of their data and services. Businesses everywhere are looking to extend operations as a digital platform, creating new channels, finding new customers, and driving deeper engagement with existing ones. API Management provides the core competencies to ensure a successful API program through developer engagement, business insight, analytics, security, and protection. You can use Azure API Management to take any backend system and develop a fully-fledged API on top of it. </p>
<p>So what does that mean? Using an API is a very common way to communicate over the internet, allowing your organization to provide services in a secure manner. You can consider APIM as a gateway service that provides a developer portal, a publisher portal, and allows developers, publishers, and applications and users to access all the content and data securely hosted in your own backend systems. </p>
<p>Using API Management allows developers to easily consume APIs in different formats, including open API, which is an open standard and language agnostic, WADL XML representation of APIs, WSDL, which is SOAP representation of APIs, and other Azure-hosted services like Logic Apps, Function Apps, and API Apps. </p>
<p>Once you have ingested these APIs, you can create different products, which allows you to deliver parts of these APIs to different user groups with different restrictions and options. When a user or company connects to the API Management service, they obtain a subscription. This subscription is used to help manage incoming requests. Azure API Management also offers a flexible way to version, test, and publish APIs to internal and external users. </p>
<p>Some of the benefits of the Azure API Management are freedom of language choice, scalable, limit access or the number of calls, offloading security, insights for performance and troubleshooting. </p>
<p>Now that we have an idea of what the Azure API Management is and can do and before we proceed with configuring the service, let’s discuss the <a href="https://cloudacademy.com/course/configuring-azure-api-management/scenario-outline/">scenario</a> of what we’re going to try and achieve over the length of this course.</p>
<h1 id="Scenario-Outline"><a href="#Scenario-Outline" class="headerlink" title="Scenario Outline"></a>Scenario Outline</h1><p>There are a lot of components that make up the <a href="https://cloudacademy.com/course/configuring-azure-api-management/configuring-the-service/">configuration of the service</a>. Here we are going to explain what we are going to work through. We have already started the creation of the Clouddemo API in our subscription. Once this completes we are going to ingest an API provided by <a href="https://cloudacademy.com/library/azure/">Microsoft</a>. This API contains a number of API operations around getting conference data. We will then create a simple API request in Postman. From there we can create the required applications in Azure AD, I’ve already provisioned an Azure AD called Cyber Labs for this demo. And will expect you to have your own Azure AD or if you don’t have one to configure it now. In the Azure AD we will create a backend app, a front end app along with a secret key. We will also grant the front end application permission to access the backend app. We will use the Azure Portal, the Developer Portal, and Postman to query the import of Microsoft Demo APIs using these applications. We will then add API policies and look at how we can scope and understand effective policy and how to trace these policies. Finally we will make sure that our API is secure and that requests to the API require a valid access token or bearer token from our Azure AD tenant which in this case is Cyber Labs. </p>
<p>There are a lot of configuration items throughout this demo I record into Notepad To help you here is all the text. You may just want to copy it from the transcript and fill it out with your specific data as you go through the demos.</p>
<p><a href="https://conferenceapi.azurewebsites.net/?format=json">https://conferenceapi.azurewebsites.net?format=json
</a>https:&#x2F;&#x2F;{name}.azure-api.net&#x2F;sessions<a href="https://clouddemo.azure-api.net/sessions">
</a>Starter Subscription Key: 76c24a0abeb94104809b0810f74a20e5<br>Subscription Header: Ocp-Apim-Subscription-Key</p>
<p>Azure AD Tenant: mycyberlabs.onmicrosoft.com<br>Azure AD Tenant GUID: fc9f98a5-2d78-4a13-afa4-2ccfe88db15a</p>
<p>Apps<br>myFrontEndApp ID: 902eef25-668f-4e58-8398-f72a5da893ea<br>myFrontEndApp Secret Key: QZdqqvNXBxm466IvJd5ociARYInUwNyPbXJuJLP3IyE&#x3D;<br>myBackEndApp ID: f9a45df4-6102-4f5c-a855-e2a2cbbab627</p>
<p>Call Back URLs<br>Postman Call back URL: <a href="https://www.getpostman.com/oauth2/callback[](https://www.getpostman.com/oauth2/callback)">https://www.getpostman.com/oauth2/callback[](https://www.getpostman.com/oauth2/callback)</a></p>
<p>https:&#x2F;&#x2F;{name}.portal.azure-api.net&#x2F;signin<a href="https://clouddemo.portal.azure-api.net/signin"></a></p>
<p>https:&#x2F;&#x2F;{name}.portal.azure-api.net&#x2F;docs&#x2F;services&#x2F;cyberlabs&#x2F;console&#x2F;oauth2&#x2F;authorizationcode&#x2F;callback<a href="https://clouddemo.portal.azure-api.net/docs/services/cyberlabs/console/oauth2/authorizationcode/callback"></a></p>
<p>https:&#x2F;&#x2F;{name}.portal.azure-api.net&#x2F;signin-aad<a href="https://clouddemo.portal.azure-api.net/signin-aad"></a></p>
<p>Endpoints<br>OAuth 2.0 (v1) Authorization Endpoint: <a href="https://login.microsoftonline.com/%7Baad-tenant%7D/oauth2/authorize[">https://login.microsoftonline.com/{aad-tenant}/oauth2/authorize[</a><br>](<a href="https://login.microsoftonline.com/fc9f98a5-2d78-4a13-afa4-2ccfe88db15a/oauth2/authorize)OAuth">https://login.microsoftonline.com/fc9f98a5-2d78-4a13-afa4-2ccfe88db15a/oauth2/authorize)OAuth</a> 2.0 (v1) Token Endpoint: <a href="https://login.microsoftonline.com/%7Baad-tenant%7D/oauth2/token[">https://login.microsoftonline.com/{aad-tenant}/oauth2/token[</a><br>](<a href="https://login.microsoftonline.com/fc9f98a5-2d78-4a13-afa4-2ccfe88db15a/oauth2/token">https://login.microsoftonline.com/fc9f98a5-2d78-4a13-afa4-2ccfe88db15a/oauth2/token</a>)</p>
<p>OpenID Connect meta document: <a href="https://login.microsoftonline.com/%7Baad-tenant%7D/v2.0/.well-known/openid-configuration[](https://login.microsoftonline.com/fc9f98a5-2d78-4a13-afa4-2ccfe88db15a/v2.0/.well-known/openid-configuration)">https://login.microsoftonline.com/{aad-tenant}/v2.0/.well-known/openid-configuration[](https://login.microsoftonline.com/fc9f98a5-2d78-4a13-afa4-2ccfe88db15a/v2.0/.well-known/openid-configuration)</a></p>
<p>V1<br><a href="https://login.microsoftonline.com/mycyberlabs.onmicrosoft.com/.well-known/openid-configuration">https://login.microsoftonline.com/mycyberlabs.onmicrosoft.com/.well-known/openid-configuration</a></p>
<p>postman Oauth<br><a href="https://login.microsoftonline.com/%7Baad-tenant%7D/oauth2/authorize?resource=%7Bresource">https://login.microsoftonline.com/{aad-tenant}/oauth2/authorize?resource={resource</a> ID}</p>
<p><a href="https://login.microsoftonline.com/%7Baad-tenant%7D/oauth2/authorize?resource=%7Bresource">https://login.microsoftonline.com/{aad-tenant}/oauth2/authorize?resource={resource</a> ID}&amp;response_type&#x3D;code&amp;client_id&#x3D;{client ID}&amp;redirect_uri&#x3D;https:&#x2F;&#x2F;{name}.portal.azure-api.net&#x2F;docs&#x2F;services&#x2F;cyberlabs&#x2F;console&#x2F;oauth2&#x2F;authorizationcode&#x2F;callback&amp;state&#x3D;{state ID}</p>
<h1 id="Configuring-the-Service"><a href="#Configuring-the-Service" class="headerlink" title="Configuring the Service"></a>Configuring the Service</h1><p>If we go to our clouddemo API management service and we see the overview, we can see we have the clouddemo.azure-api.net. We can see we’ve got a virtual IP address, the developer tier for this queue that we selected, and the region and the status is currently online. So, this is all the information we expected, which is great. If we go to the APIs, we can see the add API and the different types we looked at earlier. We need to find an API we can import. If you go to your favorite search engine and enter democonference api, you should be able to find the Import and publish your first API from Azure Management. We can see it’s an OpenAPI Specification and it’s conferenceapi on Azure websites in the format of JSON. So I’m gonna copy this URL. I’m also gonna record all these links in just a Notepad for my own reference. So, save that there. And if we actually open this in a browser, we can see the API definition here with the different operations. So this has the GetSessions, GetTopics.</p>
<p>If we return to the API Management service, if we go into the Add API and OpenAPI, we’re gonna add here, and we paste in this URL, we can see that it recognizes the URL and calls it Demo Conference API. The products, and add the Starter and the Unlimited products, which are already defined when the service is created. And click Create. And now that’s imported. So we can see we’ve got the Demo Conference API now in this portal, and we can see a number of operations. I’m just gonna minimize displayed so that we can see more real estate and look at one of these operations itself. </p>
<p>So, can we actually get some sessions back from the Demo Conference API we’ve just imported? We’re just gonna click Test and test it within the <a href="https://cloudacademy.com/library/azure/">Azure</a> portal, and click on the GetSessions. We can see here there’s a number of parameters you can pass to it. We’re not so interested in that at the moment. We just wanna see the Request URL gets us some data. So if we press Send, we can see we get the HTTP response back, 200 OK, which is good, it’s green, green is good. And if we look down, we can see a collection of items. So there’s a session here, 100, keynotes with Dan North. We can see another record, time slots. So, this looks correct. </p>
<p>We wanna test this outside of the Azure portal ‘cause we’re likely gonna be building other applications or interacting this with another way. So I’m gonna grab this Request URL here for the sessions. I’m just gonna paste that into my Notepad over here. And we’re gonna go to the Postman application. If you haven’t used Postman before, it’s a free app to download. There is a paid subscription which allows you to share your APIs with different team members. It’s a very useful tool for orchestrating and creating API requests and troubleshooting problems with APIs. </p>
<p>I’d like to go through and make sure that we can access our Azure API services that we’re creating using Postman as well. We’ve just copied in the URL for these sessions. I’ve done nothing more here than create a workspace and a collection called demo. Again, paste that URL in and we’ll just save that, and that’s gonna be called sessions. Select the collection and Save. So now, if we click the Send button, we get an Access denied due to missing subscription key. Make sure you include a subscription key when you make an API request. If we go back to the portal, when we clicked this, we went okay, so we need to understand the difference between what’s happened here and what we need to do to access this externally. </p>
<p>So, what we did do when we first added the API, we added the product Starter and Unlimited. That’s where we’re gonna get our subscription keys from. We’re gonna open up the Developer portal, so you see the link here on the API Management service. That will open another web browser for us. We can see there, it’s Cloud Company. That was the name that we had entered in originally when we created the system. And we can see we’ve got an Administrator log in here. So this is the portal which was created by the API service. You don’t have to create anything. You can customize this. </p>
<p>This is supposed to be the Developer portal on how developers would interact with your API. We wanna create a user. We don’t wanna use the Administrator. So, we’re just gonna sign out. This will allow us to go through the sign up experience. Sign up right away. And I’m just gonna pause the video and enter in some details. </p>
<p>I’ve entered an email, a password, first name, last name, and the characters we see here. And we click Sign up. We’ll save that for ease of use. And we’re told we get a verification email we need to go check. Got that email in my inbox. It’s over here. We can see we’ve got the link, welcome to Cloud Company API account, and we just need to activate this. So, it’s asking me for the password again. And sign up. Just gonna copy this out of that Chrome browser and put it in our Firefox browser here. There’s the user we’re gonna sign back in with. And we can see we have the Cloud Company API Developer portal. We have no subscriptions. So, we need to go to Products and in this case, we wanna sign up for the Starter subscription. Along with the Starter subscription, we can see we get access to the Echo API and the Demo Conference API. Just gonna click Subscribe. And we get to give that a name. Starter is fine. Confirm. </p>
<p>We can see now for Matt Quickenden, we have a subscription for Starter and we started on this date. We have a primary and secondary key. I’m gonna just click Show here and see that key. We’re gonna use this key a couple times, so I’m gonna bring this over to my Notepad and we’re gonna call this MQ Starter Subscription Key, and save. From here, let’s go back to the clouddemo API and we wanna go to the Settings for the Demo Conference API. These settings are around the import for this app, so we can see, here’s the URL we put in. Both the URL scheme are allowed or required. Here are those products we selected. We can see we have Subscription, Subscription required. The header name is this, and the query parameter subscription key. Now that we have the subscription ID and we know what the header is we need to provide, we will go back to the Postman app and add in this information. So, let’s copy out this header name here. This is Subscription Header. Bring up Postman. And we can see we have Headers over here, so let’s click header. Let’s add in the key name, which is the subscription key. And then we’re gonna wanna add in the key itself. So, we take this number we copied, put it in the value, and Send. </p>
<p>We’ve now actually created the appropriate headers to access the information for sessions using that key. We can now do in the Postman portal what we’ve seen happen in the Azure portal. So during this process, we created a subscription. Let’s go back to the API and have a look at what this actually means. Expand displayed, click on Subscriptions. We can see here that this Administrator has access to each of these products. The built-in service has a product. And there’s a Starter product subscribed to Matt Quickenden. If we wanna look at the different products, we have the Product displayed over here. By default, there’s a Starter and an Unlimited, and the access control here for different groups. So, you can create your own subscriptions for different access controls, different levels of permission, different customers, different end users, different developers. They’ll have different access and different levels and that very much depends on how you wanna utilize and segregate your APIs. We’re gonna be just using the Starter for our demo. </p>
<p>So, let’s review what we’ve done. We’ve created the API Management service in the Azure portal. We have imported a Demo Conference API from Microsoft. We’ve created a user in the portal called Matt Quickenden, and we’ve captured our subscription key. We’ve tested a call for GetSessions in the Azure portal itself. And we’ve created a GetSessions request with our subscription key in Postman. We’re gonna pause the demo session here and go back and look at some of the <a href="https://cloudacademy.com/course/configuring-azure-api-management/authentication/">authentication theory</a>.</p>
<h1 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h1><p>What does offloading security actually mean? It means the built-in APIM is the ability to consume other authentication services, which means you don’t have to deploy and maintain your own security layer. You can allow a range of different public identity services, so that your users can connect to your APIM portal. These services can be Azure AD, Azure B2C, Facebook, Google, <a href="https://cloudacademy.com/library/azure/">Microsoft</a> and Twitter accounts can all be used to protect and access your APIM. </p>
<p>With regards to securing the APIs directly, APIM has some native features to help secure APIs using OpenID Connect or OAuth 2.0. We are going to be working through the process of setting up and securing an API using OAuth 2, and our Azure AD tenant, Cyberlabs.</p>
<h1 id="What-is-OAuth"><a href="#What-is-OAuth" class="headerlink" title="What is OAuth?"></a>What is OAuth?</h1><p>Let’s review the OAuth authentication protocol. OAuth allows a user to prove their identity without having to share their secure password. It covers authorization, it does not cover <a href="https://cloudacademy.com/course/configuring-azure-api-management/authentication/">authentication</a>. A user can obtain a token, which they give to an application to use as proof of that user’s identity. This token is often referred to as a bearer token. Using bearer tokens means third party services, once configured, can validate a user with their identity provider, and provide access to privileged or secure resources. </p>
<p>What is the difference between OAuth and OpenID Connect? The OAuth 2.0 protocol was designed to allow authorization to occur over HTTP. OpenID Connect was designed to be an additional layer on top of the OAuth 2.0 protocol, and adds authentication. For our scenario, we will be focusing on the OAuth 2.0 protocol.</p>
<h1 id="Oauth-Grants"><a href="#Oauth-Grants" class="headerlink" title="Oauth Grants"></a>Oauth Grants</h1><p>There are different types of <a href="https://cloudacademy.com/course/configuring-azure-api-management/what-is-oauth/">OAuth</a> grants: authorization code, implicit, password, client credentials, device code, and refresh token. We will be taking a look at the authorization code grant, which is what we are setting up for our scenarios. Having an understanding of the code flow is very useful when implementing and troubleshooting. </p>
<p>An authorization code flow is when a client obtains a user’s approval and gets an authorization code that can be exchanged for an access token which is used to gain access to privileged resources. </p>
<p>Let’s take a closer look at the OAuth flow for authorization code. Here we can see we have a user and their browser, a client application, the user’s authorization server, and a privileged resource server. </p>
<p>Let’s walk through the eight steps. First, the process will be initiated by the user trying to get into a client application. Second, the client will redirect the user to an authorization server that they trust. Third, the user will log into the authorization server with their username and password. Fourth, the authorization server will validate the user’s credentials and redirect them to the client application to the reply or callback URL with an authorization token. Fifth, the browser hands the authorization token to the client application. Sixth, the client application will send the authorization token to the authorization server, to the token endpoint, and get an access token. It will also gain a refresh token. Seventh, the application will submit the access token to the resource server. Eighth, the resource server will validate the access token and will allow the client application access to the resource. </p>
<p>With an authorization code grant, at no stage does the user give their credentials to the app. They enter their credentials into a server they know and trust. The other benefit of this flow is the access token does not pass through the browser, which makes it harder to be compromised. </p>
<p>Next, we are going to set up the <a href="https://cloudacademy.com/course/configuring-azure-api-management/oauth-prerequisites/">AAD applications and delegated permissions</a> that are required to implement this.</p>
<h1 id="OAuth-Prerequisites"><a href="#OAuth-Prerequisites" class="headerlink" title="OAuth Prerequisites"></a>OAuth Prerequisites</h1><p>This demo will be focused on setting up the prerequisites, which are critical to creating the configuration items for our <a href="https://cloudacademy.com/course/configuring-azure-api-management/what-is-oauth/">OAUTH</a> and making sure we have everything we need to set up the configuration. We’ll be creating two applications in Azure ID, and we will be setting this OAUTH token flow request up into Postman. </p>
<p>So the first thing we need to do is gather some information. Here is our cyber labs domain, we can see the name, there, Cyber Labs on microsoft.com, and it’s also helpful to grab sometimes the directory ID. So if you’ve got a properties, you can see the directory ID here. I’ve recorded this information in my notepad, so we have the My Cyber Labs and the Tenant ID. </p>
<p>Next we wanna create the applications. And it’s important to note here that you need to use the application registrations, not DV-2 application registrations, which are currently in preview. So if we’ve got APP registrations and we create a new application registration. We gonna call this API back end, and for the sign on URL, we want to use for now just a HTTPS on our local host. So we’ll create that and click okay. </p>
<p>Now we wanna record the application ID, so we can click this copy button here, and take that to our notepad, and turn here and we need to create the next application. So new application again, API front end, and for the sign on URL here, we want to use the API’s developer portal. If we click copy here, and return to our application creation, with forward slash sign in. And if we wanna look, I’ve recorded that information here as well, dot sign in. And click okay for create. </p>
<p>We also want to grab this application ID, so that’s API front end, and we wanna put that in our API front end text.</p>
<p>The next thing we’re going to do is create a secret key, that we’re going to use in the front end application to allow us to communicate and exchange the authorization token, to get an access token. We need to go to the settings and go to keys. Here we have no keys. So we’re gonna call this secret. And duration never expires and save. Now you’ll only get to see this value once. So it’s important that you do copy it. This is a secure key and it’s important that you keep it secret. In this case for this demo, we’re just gonna save it on this text file. We have now created the two applications. </p>
<p>The last step is we need to grant the appropriate permissions on the front end application. So under here under required permissions, we need to select the required permissions and add, select an API and we wanna grant the access to the API back end APP which is here. So we select that and we wanna say this application is allowed to access the API back end. We select okay and done. And that has added that delegated permission to this front end application. Something we can use the preview APP registrations for is getting the end points. So if we go over here and select API, we can see a API front end, and if we select in points, we can see all our OAUTH in points. There’s a V two and a V one, currently the API management service only works with the V one end points. So you’ll notice that the URL is slightly different. So in this case we wanna copy the OAUTH two authorization end point version one, and OAUTH two token end point version one. Also copying the open ID connect metadata document, would be useful later. So I’ve copied all these into this document here. </p>
<p>The next step is we wanna configure Postman to utilize all these end points in this application. If we bring up the postman application and go to authorization, under type, select OAUTH two. And we wanna add the authorization to request status, and we need to get the access token. So get new access token. We can see here, this form is blank, we gonna go through and give this a name. We’ll call this our token, the code <a href="https://cloudacademy.com/course/configuring-azure-api-management/oauth-grants/">grant</a>, we can see the different types here. We had this mentioned earlier, we want to add a callback URL, as we’re using this in Postman, the callback URL will be postman. So this is copied into this callback URL, paste that in, the authorization URL we’re trying to authorize at our end point, which is the Tenant for Cyber Labs and we’re wanna authorize a particular resource which happens to be our back end application. That’s where we wanna actually get access to. We look at this is the fully constructed URL. So if you can see we’ve got the login from <a href="https://cloudacademy.com/library/azure/">Microsoft</a>, the tenant ID, OAUTH and authorize, and after that we do a question mark, resource equals and then the ID of our back end APP. So we’ve already constructed that. I’m gonna copy that and put it under the authorization URL. </p>
<p>Next, we wanna go to the access token URL. So this comes from the OAUTH two V one token end point, copy that and let’s paste that in. And we wanna use the client ID and client key from the front end application. So the front end application had this ID here, and we want the secret for that application, which is here. Paste that in, and let’s try get that authentication token. Now you can see here, I’m currently logged in as mat at cyber labs, which is the administrator for this Azure ID domain and we’ve been given the option to authorize API front end, to access back end up, and sign it and read your profile. So this is what we talked about originally, with the OAUTH flow, and we can see in particular the permissions that does want to access. So we gonna accept that, and we can see the reply URL does not match what’s configured. So when we configured the application, we didn’t add the URL for Postman. So that’s fair that that won’t respond. So in this case, we can close this down, we can see there’s the callback URL we want to allow. So let’s copy that and return to our Azure ID applications, Azure ID application registrations, and we wanna look for API front end under labs. </p>
<p>In the front end app we wanna change the settings and the reply URL. So we can see we enabled the cloud demo portal sign in page, but we haven’t allowed Postman. So if we add the Postman URL to this, we can then save that information. Let’s return to Postman and try to request token again, refresh request, and here we have a token. So we can see we’ve got an APP token, and the token information, what type is it bare, is a bunch of information. We also have the refresh token, so that’s great. </p>
<p>So to review what we’ve done, in the Azure ID, we’ve set up two API applications, a front end and a back end application, we’ve created a secret key on the front end application and we’ve delegated permission to access the back end APP. We’ve also captured the end points for that, and put that information into Postman, which has allowed us to now get a new token from that end point. We also approved access for the API APP to access My Data from the Cyber Labs domain.</p>
<h1 id="Front-and-Back-Channels"><a href="#Front-and-Back-Channels" class="headerlink" title="Front and Back Channels"></a>Front and Back Channels</h1><p>You might be wondering the reason we <a href="https://cloudacademy.com/course/configuring-azure-api-management/oauth-prerequisites/">create two applications</a>. Let’s look at the OAuth diagram again. When talking about OAuth, there is the concept of front channel and back channel. The front channel could be a browser on a user’s computer. A browser is very good at interacting with users. For example, presenting the user with a login screen and asking for user approvals. However, we don’t control the browser, and we can’t trust it with sensitive information. The back channel is considered servers or code we control or, more importantly, we can trust with sensitive information. </p>
<p>This is why we get an access token in two phases. First, we get an authorization token through the browser or front channel. We can then exchange this <a href="https://cloudacademy.com/course/configuring-azure-api-management/oauth-grants/">authorization token</a> over the back channel using the client ID and secret we have already configured. OAuth utilizes the best things about the front channel and the best things about the back channel in order to obtain the access token or bearer token securely.</p>
<h1 id="Registering-the-Client-Application"><a href="#Registering-the-Client-Application" class="headerlink" title="Registering the Client Application"></a>Registering the Client Application</h1><p>Before a client application can present a token to an authorization server to gain access to privileged information on behalf of a user that application must be registered with an authentication server. To do this the application owner must provide a name, a callback or reply URL to represent the application. We can use this information in Azure AD to create a registered application. When we create the application we get a Client ID which is a public and unique identifier and we create a Client Secret. We give this Client ID and Client Secret back to the client application. With this combination, Azure AD knows who is sending the request and has a list of valid reply URLs stored for that application and will direct the OAuth request to the requested URL as long as it is valid. We saw this earlier with Postman when we tried to get an access token, the request failed because Postman’s callback URL was not on the list of valid reply URLs stored with the Azure AD application.</p>
<h1 id="Decoding-the-Token"><a href="#Decoding-the-Token" class="headerlink" title="Decoding the Token"></a>Decoding the Token</h1><p>Tokens are encoded data, and if we decode that data, we can see that a token is made up of a header, a payload, and a signature. Decoding the data we retrieved from Postman can help us validate we have set up the AAD applications and <a href="https://cloudacademy.com/course/configuring-azure-api-management/what-is-oauth/">OAuth</a> and Postman correctly. </p>
<p>We can use jwt.io to decode the token and take a look at the payload. If you’d like to do this yourself, copy the token out of Postman, go to jwt.io, and paste it into the encoded field. And you can take a look at the payload yourself. In this case, we can see in the image the aud is the audience for this token, which is the back end application. And we can see the app which is in the application requesting the token is the ID of the front end application. Using this tool, we can see we have validated that our application and OAuth flow are configured correctly. Next, let’s <a href="https://cloudacademy.com/course/configuring-azure-api-management/configuring-oauth-authentication-service/">configure this in our APIM service</a>.</p>
<h1 id="Configuring-OAuth-Authentication-Service"><a href="#Configuring-OAuth-Authentication-Service" class="headerlink" title="Configuring OAuth Authentication Service"></a>Configuring OAuth Authentication Service</h1><p>For our example we’re going to be using OAuth 2.0, so let’s configure the appropriate endpoints. Under the management API service we go to security, OAuth 2.0, and we can see there’s no results here, we click add. I’ve already pre-populated this page here so we’re just going to talk through what the results are. So we have the CyberLabs for a display name. We have a client registration URL. I’ve just made up this URL. The type of grant is the authorization code. The authorization endpoint is the same authorization endpoint we used in Postman. </p>
<p>So if we go back to our document here, we can see that this was the code we used. The next piece of information we need is the <a href="https://cloudacademy.com/course/configuring-azure-api-management/decoding-the-token/">token</a> URL, again, this is the same as we’ve already used and the token endpoint is here. If we keep scrolling down we can see we need the client credentials, front-end client ID, and the secret. Which we can see here is that same secret key that we’ve put in the text file. And if we click create, we can see that OAuth service is added. </p>
<p>The next step is to use this auth service with our API. So let’s go to the APIs, Demo Conference, and we look at the settings for the Demo Conference API. If we scroll down, we can see security. So let’s select OAuth and we will get a list of all the configured OAuth 2.0 servers. So we’ve only got one, that’s fine, we’ll click save. We’ve now connected this API to the OAuth server. </p>
<p>Next step is we wanna try and view this authorization code. What we’re going to do is launch an incognito browser just so that we make sure we end up with the correct user. I’m gonna go log into portal.azure, and I’m going to use a user that I’ve already configured in the Azure AD. Which is in the onmicrosoft and keep Jessica signed in, yes. So now we’re signed in as a user in the CyberLabs domain. And we want to take the developer portal and log in here. So I’m gonna use my other user. This would probably be Jessica as well, but this is the way we’ve set it up for now. And if we go to the Demo Conference API, and let’s go to the GetSessions, and click try it. </p>
<p>We can see now we’ve got the subscription key, it’s already picked up the primary subscription. But we have a CyberLabs authorization. So if I select authorization code, we’re getting a request here from CyberLabs for the app API to get access to the backend app and read the profile. So we’re gonna accept that. And what we can see here is expected, this is saying that again, the reply URL isn’t valid. </p>
<p>So I wanted to show you a way you can grab this information to try and understand what it’s doing. If you select this header here to Notepad, we’ll just do a quick replace here to help make this readable. 3a becomes a colon and the percent 2f becomes a forward slash. </p>
<p>We can now see that this application is looking for a redirect to cloud portal docs authorize callback. So this is the URL now that we need to authorize again against our application. We go to Reply URLs, we’ve already got it loaded. Paste that in there and save. cloud portal demo docs CyberLabs console, which is the complete URL for us to get to this developer portal. So let’s just give this a hard refresh. </p>
<p>Let’s go to the get authorization token again, and we can see that Bearer Token’s come through. So if we just show that token, let’s just validate what we’ve got there. Copy that token, we’ll go to the JWT.io. And we’ll paste that into our debugger, and we can see we’ve got the backend application, the front-end application, and we’re logged in as Jessica. Oh if we try and execute our request, we’re getting the response 200 back, which is great. Successfully set up the OAuth server. We have successfully connected that OAuth server to our API, collected an authorization code through the browser. </p>
<p>Let’s just try this through Postman, see what we get. So if we put this in, now we don’t have any token here, but we’ve still got the data back. So what we actually need to do is apply a <a href="https://cloudacademy.com/course/configuring-azure-api-management/api-policies/">policy to check for valid token</a>, which we will do in the next section.</p>
<h1 id="API-Policies"><a href="#API-Policies" class="headerlink" title="API Policies"></a>API Policies</h1><p>A key strength of APIM is that it allows you to apply policies to change the behavior of the API. The policies can be applied on different attributes, like the subscription or data types returned and much more. The policies allow publishers to control or manipulate the requests or the various data at different stages. This screenshot is from the <a href="https://cloudacademy.com/library/azure/">Azure</a> Portal and shows us where we can add policies. The Frontend, Inbound, Backend, or Outbound again. </p>
<p>The policy definition is a simple XML document that describes the order that the policies are executed in. This policy can be added directly in the Azure Portal. The portal offers a range of code snippets that you can add to each area to perform a range of functions to a request. Here we can see the XML document with the inbound, backend, outbound, and on-error sections.</p>
<p>Some examples of policies are securing your API by requiring an OAuth token, converting XML to JSON or JSON to XML, rate limiting the number of requests based on the specific subscription, or simply changing header values and callback URLs. Many of these policies can be applied through the UI experience by filling in the form and applying the policy in the right area. You can also code these policies by hand. The solution is very extensible. </p>
<p>Policies can be configured at different levels. You can set an API policy globally or at the scope of a product, a specific API, or individual operation. Before creating a policy, you should decide at what level you want to apply the policy. Policy scopes are evaluated in the following order: Global scope, which is all APIs, product scopes, like starter, API scope, which is like the Demo Conference API or all operations, and operation scope, which is an individual operation. </p>
<p>The statements within the policies are evaluated according to the placement of the base element if it is present. Global policy has no parent and using the base has no effect. We will take a look at what tools we can use to help us understand effective policies and troubleshooting policies during execution.</p>
<h1 id="Adding-API-Policies"><a href="#Adding-API-Policies" class="headerlink" title="Adding API Policies"></a>Adding API Policies</h1><p>Let’s look at configuring <a href="https://cloudacademy.com/course/configuring-azure-api-management/api-policies/">policies</a> against the API requests. First thing let’s look for an existing policy. So as we’ve said we’ve got different scopes. If we go to the products and we go to starter, we can see those are policies listed here. We can see there’s an inbound policy which limits the number of calls and renewal period. If we go to Postman and we just run this one, two, three, four, five, this time should fail and indeed it does. So we see the rate is limited, try again in 54 seconds with the 429 request and 47 seconds. So that’s counting down for us. That was an easy way for us to see how this policy has been applied to our particular subscription. </p>
<p>Next thing we do is we want to look at perhaps changing some other policies, maybe an outbound policy. So let’s go back here and look at the API and we want to change the Demo Conference API. This is specific to this API. We want to change all operations, and we want to add some outbound processing. We’re going to try to use the UI here to change some headers. We’ve got the outbound policy and we want to choose set header. So let’s go find a header to change. </p>
<p>If we rerun this request here, and look at our headers, let’s say we don’t want anyone to know what the version of AspNet is. So let’s grab that, there. And we want to delete it. We also want to delete the powered by ASP NET. Add header, delete, delete, and save. Cannot have values, sometimes these get populated with a value. You just need to delete it. If we go and write our query again that’s already saved, we can see those headers have disappeared. So that was very easy to manipulate or control the data coming back from the API. </p>
<p>Let’s say we want to try something a little different. We want to go and edit this policy manually. So rather than choosing this we can choose this button here, choose expand, and we want to do a find and replace. We want to basically replace all the URL CORS that reference this conference API website and send them back to our website. If we scroll down here we can see all the different types of policies we have. In our case we wanna do the find and replace string. So what do we want to find? We want to find anything that says conference, API, azurewebsites, and we want to replace it with our URL. We’ll click save.</p>
<p>So if we go and run the Postman call again, we can see that’s now changed. So we’ve applied two policies, three policies, to the outbound processing of the API request and we’ve applied this to all operations. So let’s say we want to change one particular operation. If we go to get sessions and we want to add a new policy, you can see here we can choose other policies. We want to add an outbound policy here and we’re going to look for JSON TO XML. So we’d like to convert the JSON output to XML for this particular function. So if we click save and go to Postman, let’s try to run that again. </p>
<p>We’re still getting back the JSON version of the code. If you wanted to troubleshoot this, there’s a method for doing that. If we go over to the test, select get sessions, and send the query, we can then click the trace button here. So as much as we’ve got this response, we want to know why that policy hasn’t applied. So we can see the total response time, and we have different sections we can jump to.</p>
<p>So let’s look at the outbound section. The reason that we can see that here, is the content type. It’s not applied. We can see the other policies that we did apply worked. All we need to do in this case is go to the design for that item, and we’re going to change these two values to false, and save. Now if we try this operation and test, click send, we will look at the trace again and we’re hoping to see that the JSON to XML has been applied. Outbound, and we can see that it was set to XML which is exactly what we want. We can validate this by resending the request, and we can see we’ve got a different style of return. </p>
<p>If we save this query, and let’s duplicate it. We’re going to call this one speakers. Change the COR there to speakers. We can see we’re getting JSON from the speakers still, and we’re getting XML from sessions. Effectively applied policy at different levels to manipulate the API request in different ways. The very next thing we want to do is apply the policy to look for the correct token. We’ve seen that we can validate the token, but we’re not applying that to our session. </p>
<p>So again on the Demo Conference API, all operations, I would like to add a new policy. We’re going to go into the code editor for this one and expand. On the inbound policy I would like to validate the JWT token. We need to delete some of this code. We’re going to delete the issuers, audience, the claim, the particular claim we’re going to match as audience and the audience value is the backend application. In the token it will decode it, and we’re looking for this value. We’re going to call this auth, and let’s just change the message here so we know that it’s us, and we need the endpoint that we’re going to validate that token against. We captured this earlier from Microsoft here. </p>
<p>Now there’s only one problem with the endpoint that we got, and that’s it’s version two. We just need to remove the version two and you may also know that you can swap out these values here. If it wants to be more readable, instead of the tenant ID, you can put in your cyberlab’s name there. So let’s grab this openid connect inpoint for validation and put it in here. Don’t forget to leave the html closed, and save. </p>
<p>Now we’ve applied a lot of policies here and we’re maybe not sure exactly what order they’re happening in. What we can do is calculate effective policy. If we choose a particular product, you can see the effective policy view. Here we can see the rate call limited, which was on the product. Different versions are there. If we go and check this against the sessions and we edit this one we should see that particular policy for the JSON to XML call as well. So there’s our oauth, check, jwt token, check, the rate limit, and outbound policy. We’re doing the final replace JSON to XML and removing the headers, so this helps you view all the different policies in one place. </p>
<p>Now let’s test if our policies worked. We’ll try the developer portal first. Jessica let’s give it a refresh. We’re in the get sessions authorization code. Let’s have a look at the token just to make sure we’ve got the right user. So we have Jessica@mycyberlabs, and we’re going for the backend application. Let’s click send. We get a 200 response okay. So we’ve successfully applied that validation code there. If we turn auth off we get the authorization failure, you are not allowed in. Which is good. </p>
<p>Let’s go to the Postman application, and we’ve got our speakers and sessions. We’re gonna say get new access token. We’re gonna call this Jessica, and request a token. Let’s grab this token and prove that we are Jessica, no slight of hand going on. Jessica@cyberlabs on <a href="https://cloudacademy.com/library/azure/">Microsoft</a> and our audience is the backend application. </p>
<p>If we go back to Postman, we can then choose the token Jessica and preview the header. We’ve then added this token to this header here and we click send so we get a result. Let’s take this to the sessions header. We’re gonna send as well. You’re not allowed in. So make sure we’ve got the latest Jessica token and send, and we get our result. So if we were to remove this token from the header, and send, you are not allowed in. So we’ve successfully secured our API with a validation policy and we’ve tested that and validated that token for that user works. </p>
<p>This concludes the course, and the demos. I hope you’ve found this useful. I’ve tried to include steps here that help with troubleshooting. The oauth token flow is definitely difficult and without some of these tools it’s difficult to troubleshoot.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p><a href="https://cloudacademy.com/course/configuring-azure-api-management/introduction/">Azure API Management</a> provides a rich set of features to manage, control, and publish your content. During this presentation, we have published our own API using an existing API from Microsoft. We have focused on using <a href="https://cloudacademy.com/course/configuring-azure-api-management/what-is-oauth/">OAuth</a> as a method to protect your API. Using Postman has allowed us to set up and consume this service external to the <a href="https://cloudacademy.com/library/azure/">Azure</a> portal tooling. And finally, we used Azure API policies to manipulate responses. </p>
<p>There are many other areas worth investigating, from using your own custom domains, using revisions and a Git repository to version and control the release of API functionality, using application insights to help track and troubleshoot performance, also creating alerts. I hope you found this content useful and it helps you create and consume your own APIs.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Deploying-Code-From-GitHub-to-Azure-App-Service-8</title>
    <url>/2022/11/14/AZ-204-Deploying-Code-From-GitHub-to-Azure-App-Service-8/</url>
    <content><![CDATA[<h1 id="Deploying-Code-From-GitHub-to-Azure-App-Service"><a href="#Deploying-Code-From-GitHub-to-Azure-App-Service" class="headerlink" title="Deploying Code From GitHub to Azure App Service"></a>Deploying Code From GitHub to Azure App Service</h1><p>Welcome to “Deploying Code from GitHub to Azure App Service”. To get the most from this course, you should already have some experience using App Service. If you don’t, then you can take our “<a href="https://cloudacademy.com/course/introduction-azure-app-service-2185/introduction/">Introduction to Azure App Service</a>” and “<a href="https://cloudacademy.com/course/using-deployment-slots-azure-app-service-2359/using-deployment-slots-in-azure-app-service/">Using Deployment Slots in Azure App Service</a>” courses. It would also be helpful to have some experience with GitHub, although it’s not a requirement.</p>
<p>Microsoft provides many ways to deploy code to App Service, but one of the best ways is to deploy from a source code repository, such as GitHub, Bitbucket, or Azure Repos. This is useful whether you need to upload your code once or need to implement continuous deployment in a DevOps environment.</p>
<p>In this short course, I’ll show you how to deploy code from GitHub to App Service both manually and using continuous deployment. Although it’s possible to do both using the Azure Portal’s graphical user interface, I’m going to use the command-line interface to do the manual deployment for a couple of reasons. First, you can use Azure commands in automation scripts. Second, Microsoft often asks command-line questions in its Azure Developer certification exam, so if you’re preparing to take that exam, it’s good to know these commands.</p>
<p>In this demo, I’m going to show you all of the commands you’ll need to use if you don’t have any App Service resources yet. First, I’m going to create a resource group to hold the resources. Then, I’ll create an App Service Plan to host the app. Next, I’ll create a webapp in the plan. And finally, I’ll deploy a sample app from one of Microsoft’s GitHub repositories to the webapp in App Service. The sample app is called “html-docs-hello-world”. It doesn’t do much, but it’ll be fine for demonstration purposes.</p>
<p>To use the command-line interface from your desktop, you need to install the <a href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-cli/">Azure CLI</a>. But an alternative is to use Azure Cloud Shell, which has the Azure CLI preinstalled. Click here to start it. If it’s your first time running Cloud Shell, then it’ll ask you to create a storage account that it can use. I’ve used Cloud Shell before, so mine already has a storage account.</p>
<p>Okay, first let’s create a resource group. You need to use the “az group create” command. Add the name parameter and call it “webapprg” for “webapp resource group”. Then add the location parameter and specify an Azure region. I’ll use “westus”.</p>
<p>As you’d expect in a course about GitHub, I put all of the commands from this demo in a readme file in a GitHub repository so you can copy and paste them. You can find a <a href="https://github.com/cloudacademy/azure-app-service-github">link</a> to the repository in the Overview tab below this video.</p>
<p>All right, now we need to create an App Service plan using the “az appservice plan create” command. For the name parameter, I’ll call it “asplan” for “App Service Plan”. For the resource group, we need to say “webapprg”, which is the resource group we just created. For the location, we’ll use the same region as we did for the resource group. And finally, we have to specify the SKU, which means the pricing tier for the App Service Plan. F1 is the free tier, so we won’t have to pay anything.</p>
<p>Okay, now we need to create a webapp in the plan. This will essentially be a place to put our app when the time comes, so when we first create the webapp, it’ll be empty. We use the “az webapp create” command. The name has to be globally unique, so I’ll call it “ca” for “Cloud Academy”, “webapp”. You’ll have to call it something else. Then tell it to use the webapprg resource group and the App Service plan we just created, which we called asplan.</p>
<p>All right, now we have everything we need to deploy the app. The command we need is “az webapp deployment source config”. We need to give it a lot of parameters. You can put them in any order, but I’ll put them in the order that I think is most logical.</p>
<p>First, we’ll use the “repo-url” parameter to tell it where the GitHub repository is. This is the URL for the “html-docs-hello-world” sample app. Then we need to tell it which branch of the repository contains the code we want to deploy. In most cases, you’ll probably just want to deploy the master branch, but if you need to deploy a different branch, this is where you do it.</p>
<p>Next, we need to specify the “manual-integration” parameter. This means that we’re deploying the code manually rather than telling it to automatically deploy the app every time the code changes.</p>
<p>Then we tell it the name of the webapp where we want to deploy the code. And finally, we tell it which resource group the webapp is in. This’ll take a while, so I’ll fast-forward.</p>
<p>Okay, it’s done. Now we can see if it worked by going to the URL of the webapp, which is the name of the webapp and then “.azurewebsites.net”.</p>
<p>Yes, this is the sample hello world app, so it worked.</p>
<p>If you want to configure continuous deployment, which is where the app automatically gets deployed every time the code in the repository changes, then Microsoft recommends using the Azure Portal.</p>
<p>First, I’ll find my app in the portal. Here it is. Now, we need to go to the Deployment Center. Since we already did a deployment from GitHub, it shows the configuration we used. Here’s the URL of the GitHub repository. If we wanted to do another deployment manually, then we’d just click on “Sync” up here. But we’re going to set up continuous deployment, so first we need to get rid of this manual configuration, which we can do by clicking “Disconnect”.</p>
<p>It says, “You’re now in the production slot, which is not recommended for setting up continuous integration &#x2F; continuous deployment. That’s because if a new version of the app got deployed to the production slot, it would cause the app to be unavailable until the deployment is finished, which is not something you want to do to your users. The solution is to configure continuous deployment in a non-production deployment slot.</p>
<p>Since our App Service Plan is using the Free tier, which doesn’t support deployment slots, we’ll need to upgrade our plan to the Standard tier. To do that, we go to “Scale up”, choose the S1 tier, which means “Standard”, and click “Apply”.</p>
<p>There. Now we need to create a deployment slot, so we select “Deployment slots” in the menu, and then click “Add Slot”. We’ll call it “staging” and tell it to clone settings from the production slot.</p>
<p>Then we click on the slot, and now we can go back to the Deployment Center. Good, the warning is gone because now we’re in the staging slot, which is a non-production deployment slot.</p>
<p>In the “Source” dropdown, it gives us the option to set up either continuous deployment or manual deployment. Let’s select “GitHub” in the continuous deployment section.</p>
<p>Before it can deploy the app, it needs to build it. By default, it uses GitHub Actions to do the build, but it’s usually easier to change this to “App Service Build Service”. This means that App Service will take care of building it.</p>
<p>Now I need to authorize App Service to access my GitHub account.</p>
<p>Then I need to choose the organization, the repository, and the branch. I don’t have privileged access to Microsoft’s sample repository, so it’s not something I can select here. Instead, I copied Microsoft’s repository to my own organization, where I do have privileged access. Then I’ll click “Save”.</p>
<p>That worked, so now whenever the code in the master branch of my copy of the repository changes, it will automatically build and deploy the app to the staging slot. Then I could swap the staging slot with the production slot to upgrade the production version of the app. Alternatively, I could configure auto swap on the staging slot, so it would automatically swap the slot with production once the app is running.</p>
<p>If you’ve been following along on your own, make sure to either downgrade the App Service Plan to the free tier or delete the whole resource group. That way, you won’t incur any more charges.</p>
<p>And that’s it for deploying code from GitHub to Azure App Service. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>
<h2 id="Deploying-Code-From-GitHub-to-Azure-App-Service-1"><a href="#Deploying-Code-From-GitHub-to-Azure-App-Service-1" class="headerlink" title="Deploying Code From GitHub to Azure App Service"></a><strong>Deploying Code From GitHub to Azure App Service</strong></h2><p><a href="https://github.com/cloudacademy/azure-app-service-github">Course GitHub repo</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Exam-Preparation-Additional-Topics-35</title>
    <url>/2022/11/14/AZ-204-Exam-Preparation-Additional-Topics-35/</url>
    <content><![CDATA[<h1 id="Additional-Topics"><a href="#Additional-Topics" class="headerlink" title="Additional Topics"></a>Additional Topics</h1><p>Congratulations on making it all the way through this learning path. There are a few topics that you’ll need to know for the exam that weren’t covered yet, so I’ll go over them now.</p>
<p>First up is Azure Container Instances. Although Kubernetes is usually the preferred system for running container-based applications, it would be overkill if you just need to run one container. For example, suppose you want to deploy a simple web application that’s in a single Docker container. Using Azure Container Instances, you can deploy it very easily.</p>
<p>All you have to do is run the <code>az container create</code> command and specify the resource group, the name you want to give the container, the image it should use to build the container, the DNS name to assign to its public IP address, and the ports you want to open. This single command will spin up your container. I should point out that the name parameter is technically for the name of the container <em>group</em> because it’s possible to spin up more than one container at the same time, but in most cases, you’ll probably use this command to spin up only a single container.</p>
<p>If you want to check the status of your container, you can use the <code>az container show</code> command. This will give you lots of details about your container, such as its IP address, its operating system, and its current state.</p>
<p>It’s also possible to create and manage Azure Container Instances using PowerShell or the Azure Portal.</p>
<p>The next topic is a feature of Azure Functions called Durable Functions. Typically Azure functions are stateless, meaning when a function runs, it doesn’t know anything about previous runs of that function. A classic example of an Azure function is one that waits for an image file to be uploaded to a particular container in Blob storage and then creates a thumbnail version of that image. It’s stateless because it doesn’t matter what images it processed in the past, it runs in exactly the same way every time. Furthermore, it doesn’t care what other Azure functions are doing either. It only cares about its own job.</p>
<p>This approach is fine for simple applications, but if you try to build a more complex application out of stateless functions, you’ll probably have to write a lot of code to try to coordinate the actions of these functions.</p>
<p>For example, suppose you’re writing an order processing system that needs to execute four different functions in the same sequence every time. To make that happen, you’d have to write code to ensure that the output of the first function triggers the execution of the second function, and so on. It is possible to do this by creating events, but it’s much easier to use the Durable Functions library. Here’s what the C# code for this would look like.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[FunctionName(&quot;ProcessOrder&quot;)]</span><br><span class="line">public static async Task &lt; object &gt; Run([OrchestrationTrigger] IDurableOrchestrationContext context) &#123;</span><br><span class="line">	try &#123;</span><br><span class="line">		var x = await context.CallActivityAsync &lt; object &gt; (&quot;Function1&quot;, null);</span><br><span class="line">		var y = await context.CallActivityAsync &lt; object &gt; (&quot;Function2&quot;, x);</span><br><span class="line">		var z = await context.CallActivityAsync &lt; object &gt; (&quot;Function3&quot;, y);</span><br><span class="line">		return await context.CallActivityAsync &lt; object &gt; (&quot;Function4&quot;, z);</span><br><span class="line">	&#125;</span><br><span class="line">	catch(Exception) &#123;</span><br><span class="line">		// Error handling or compensation goes here.</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Here are the four functions. You just need to put them in the order you want. Also notice the error handing section down here. This is another reason why it’s way easier to orchestrate a workflow using Durable Functions than to try to do it yourself. Here, your error handling code can deal with multiple components in the workflow, which would be very difficult to do with stateless functions.</p>
<p>This is actually one of the simplest use cases for Durable Functions. A more complicated example is called fan-out &#x2F; fan-in. The first function splits the work into multiple tasks that will be executed in parallel by the second function. Then the output from these parallel tasks needs to be aggregated and sent to the third function. This is much more challenging than the previous example because the third function needs to know when all of the parallel functions have completed. Using the Durable Functions extension, the code for this is still relatively straightforward.</p>
<p>The next topic is how to implement web tests using Application Insights. Once you’ve deployed a web application, you’ll want to monitor its availability so you’ll know if it ever goes down. Application Insights provides a great tool to do that.</p>
<p>Go to Application Insights, and then select Availability from the menu. Now click Add Test. The only parameters you have to set are the name of the test and the URL of the website. But there are lots of options.</p>
<p>The default test type is a URL ping test, but you can configure a multi-step web test if you want. This is a recording of a series of requests to send to your website. To create it, you have to use Visual Studio Enterprise.</p>
<p>Parse dependent requests means request all of the images, scripts, and other files in the web page instead of just the one file at the URL you specified.</p>
<p>When this is checked, the test won’t fail until it has tried to connect three times with a 20-second delay between retries. You can also change how often the test is run.</p>
<p>Here, you can set which locations to test from. Microsoft recommends testing from at least five locations.</p>
<p>When you’ve set all of the options, click the Create button. Here’s the web test.</p>
<p>There’s one more step that’s really important. You need to tell it where to send alerts when there’s a problem with the website. But it’s not obvious where to do that. In the context menu for the web test, select Edit alert. Under Action Groups, click Create. Give the action group a name. Then you have to give it a short name that’s a maximum of 12 characters.</p>
<p>You can put it in an existing resource group or just leave it so it’ll create this default resource group. Give the action a name. Under Action type, select Email&#x2F;SMS&#x2F;Push&#x2F;Voice (or one of the other options if you want to send the alerts somewhere else). I’ll tell it to send an email to this address. Click OK, and click OK again. Now click Save.</p>
<p>It’s also possible to set up a web test using an ARM template. Here’s a <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/platform/alerts-metric-create-templates#template-for-an-availability-test-along-with-a-metric-alert">link</a> to an example of how to do that. OK, that’s it for additional topics for the AZ-204 exam. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks and good luck on the exam!</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Designing-Azure-Solutions-Using-Platform-Services-13</title>
    <url>/2022/11/14/AZ-204-Designing-Azure-Solutions-Using-Platform-Services-13/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Greetings! Welcome to the Cloud Academy Microsoft Azure Design Solutions using Platform Services course! I am delighted to have you join me on what is bound to be yet another educational and delightful adventure into the world of Microsoft Azure. </p>
<p>First I will let you know a bit about myself before I get into the course outline. My name is Jonathan. I am one of the course developers with Cloud Academy. I work professionally as a technical consultant specializing in DevOps, data engineering, and security. I am also a former high school teacher, so it is a treat to get back into teaching all you lovely people about technology.</p>
<p>So enough about me, let’s get into this course. Who is this course for exactly? This course is also for anyone looking to improve their knowledge of Azure platform solutions in the fields mentioned above. If you happen to be a software engineer, a product manager, a CTO, or just someone who happens to be trying to build a product using Microsoft Azure, then this course could save you a lot of time and money as you discover Azure’s powerful product toolset.</p>
<p>So what exactly are the prerequisites for this course then - what do I expect you to know in order to understand the material? Well, not too much actually. You don’t need to be a programmer or have a deep knowledge of computer science. The course will focus mostly on explaining Microsoft Azure systems and how to use the Azure user interface. You should have a general understanding of the domains related to each product category. You will need a basic understanding of terms like “Internet of Things,” “Machine Learning,” “Messaging Queue,” and, “File Encoder.” If you have no idea what any of these things are, this course may be premature for you.</p>
<p>The course will cover a lot of information given its short length. We are going into detail on a number of Azure services and practices. Our goal is to explain in depth each Azure service and ensure that you have a stronger understanding of which service to choose to solve a particular problem. After going through all of the content, you should have a thorough grasp of several Azure products. You should be ready to start creating products in any of the four domains described above. </p>
<p>So as you may have gathered, there are four core learning objectives - takeaways, if you will: 1. The student will have an in-depth knowledge of Azure artificial intelligence services and know when to opt for specific offerings. 2. The student will have an in-depth knowledge of Azure IoT services and know when to opt for specific offerings. 3. The student will be able to design a scalable messaging architecture using Azure services. 4. The student will have a deep understanding of Azure media services.</p>
<p>Lastly, I want to encourage everyone to leave feedback. Email <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> if you have any questions, comments, suggestions, or concerns. We always appreciate people taking the time. Now without further ado, let’s get started.</p>
<h1 id="Section-1-Introduction"><a href="#Section-1-Introduction" class="headerlink" title="Section 1 Introduction"></a>Section 1 Introduction</h1><p>We have divided section one, focusing on AI and machine learning, into two parts. The first part will give a thorough survey of Microsoft Azure’s machine learning solutions. We’ll explain what problems each solution solves and explain in-depth how to actually use them. The second part of this section will focus on specific use-cases. We will offer several examples of problems and show how a specific Azure machine learning solution can help.</p>
<p>So without further ado, let’s get right into it with an overview of Azure artificial intelligence products.</p>
<h1 id="Azure-Artificial-Intelligence-Services"><a href="#Azure-Artificial-Intelligence-Services" class="headerlink" title="Azure Artificial Intelligence Services"></a>Azure Artificial Intelligence Services</h1><p>‘Artificial Intelligence’ and ‘Machine Learning’ are related terms that until now I have used somewhat interchangeably. It is worth explaining the exact difference before we start talking about Azure products. Artificial Intelligence, or AI for short, refers to intelligent decision making performed by non-living agents such as computers. Machine Learning, also called ML, is the science of teaching computers to improve at specific tasks by using algorithms that cause the computer to ‘learn’. With some reflection, it should become clear how AI and ML are related. Machine learning is one of the core disciplines that powers AI.</p>
<p>AI and ML power a number of software applications. Apple’s Siri personal assistant is an example of AI. She has to intelligently respond to user questions and provide useful answers. Machine learning is what powers Siri’s understanding. Siri’s understanding of language comes from training against thousands of hours of audio of human conversations. This training fuels her intelligence - her ability to understand what a human is asking for and how to properly respond.</p>
<p>With Microsoft Azure, you get a number of services that can help you to build similar systems that employ machine learning and AI. They are all listed under the Azure Artificial Intelligence category. As you can see there are several products as well as a number of command-line tools, frameworks, SDKs, and extensions. We will not go in-depth into every single offering this course. Instead, we will cover some of the most important products and then in the next lesson talk about which services solve specific problems.</p>
<p>Just to further emphasize the scope it is worth mentioning that Azure also has a large set of Analytics services (<a href="https://docs.microsoft.com/en-us/azure/#analytics">https://docs.microsoft.com/en-us/azure/#analytics</a>). These include tools like Data Catalog and Azure Stream Analytics. You can see the entire catalog using the link below. This course will only very briefly mention Azure Analytical tools where they may help differentiate use cases. In general, however, they are out of scope for this course, as data analytics is a distinct domain from AI. The science of analytics is about deriving useful information from your data. By contrast, AI is about putting that data to work in some intelligent way.</p>
<p>So for our purposes, the best place to start is with Azure Machine Learning. This is Azure’s flagship product for anything related to ML. As you can see from the diagram the Azure Machine Learning studio does A LOT. Once you import your data, you have a lot of tools for processing, cleanup, visualization, and model training. You can easily shuffle and split your data into training sets and test different learning algorithms. You also get great third party support for things like Jupyter notebooks and Hadoop.</p>
<p>Making use of Azure Machine Learning requires a solid knowledge of data science and programming. It integrates with a number of systems and APIs such as Spark, Docker, Jupyter, Kubernetes, TensorFlow, and many others. The platform itself is actually built on top of many of these systems. See the slides here for a more exhaustive list.</p>
<p>Azure also has a separate related product called Machine Learning Studio. Unlike the core Azure Machine Learning platform, Studio is a drag and drop service with a narrower focus. It is designed to simplify creating predictive tools on top of an existing data set.</p>
<p>Cloud Academy has an in-depth course focused solely on Azure Machine Learning Studio. I recommend going and checking that out if you want to get really thorough walkthroughs and explanations. For our purposes, the high level overview and diagrams should be enough to get you started.</p>
<p>Now Azure has another powerful offering in the algorithm training space called Azure Batch AI. There is a lot of overlap in Batch AI with Azure Machine Learning so to simplify we are going to focus on the differences. Batch AI, somewhat like Machine Learning Studio, is a more comprehensive ML solution. It offers ML job scheduling and resource coordination. To this end when you create a Batch AI job, it will take as an input a description of your cluster, which are the resources, and your job, which is the task. The cluster input is really just the hardware, so basically you will tell Azure how many VMs you need, what type, what disk image to use, what region, and what remote storage to access for the data. The ML job description will reference the cluster you just defined and also take other inputs such as a particular AI framework, command-line arguments, VMs, and input or output directory locations.</p>
<p>Batch AI, as the name implies, is better suited to one-off jobs of a larger scale. While it can be incorporated into a long-lived application stack, you may be better off with something more configurable such as Azure Machine Learning.</p>
<p>Azure also has a service that covers both analytics and ML for people with a background in Apache Spark. It is called Azure Databricks. Databricks is an “Apache Spark-based analytics platform optimized for the Microsoft Azure cloud services platform.” It incorporates the entire set of Spark open-source APIs and services including Spark streaming, Spark ML, SparkSQL, and GraphX. So if you have some expertise with Spark or an existing Spark codebase, Databricks may be the way to go. Setup is similar to Batch AI. You go into the portal and create a Databricks workspace. You define your cluster resources and your Spark job. Clusters can be configured to live only for a set amount of time to reduce costs as well. Thus in short, Databricks is basically just “easy mode Spark” for Azure.</p>
<p>The last big offering Microsoft Azure Cognitive Services are, “a set of APIs, SDKs, and services available to developers to make their applications more intelligent.” In short, Cognitive Services refers to a set of ready to use AI tools that you can add to an existing application. They include things like image classifiers for faces and text analysis tools for automatic phrase completion and search. To make use of these tools you need to create a Cognitive Services API account in the Azure portal. This is easy to do with a few clicks. You can even get a free account if your transactions are below a certain threshold per month.</p>
<p>In the final part of this section, I’ll just briefly mention some AI products with a narrower focus. There is Microsoft Genomics, a tool for people working with gene sequencing. I know precious little about genetics so I won’t even try to explain the use case. Suffice to say if you are working in that field you should check out the Microsoft Genomics documentation linked below. There is also the Azure Bot Service. This is basically a toolkit for creating interactive agents such as chatbots. You can create a wide variety of bots by training them to respond in specific ways to different inputs. The Bot Service is also serverless, so you don’t need to worry about administration, which is nice. And finally, there is also Azure Search. As the name implies this is Search as a Service.</p>
<p>So that about wraps up our discussion of Azure AI services. You should have a good broad understanding of each offering. In our next lesson, we will start talking about how to pick the right AI tool for your specific needs. See you there.</p>
<h1 id="Choosing-the-Right-A-I-Service"><a href="#Choosing-the-Right-A-I-Service" class="headerlink" title="Choosing the Right A.I. Service"></a>Choosing the Right A.I. Service</h1><p>Knowing which Azure AI service will fit your needs first requires understanding the problem you are trying to solve. While there is considerable overlap in what the different solutions can do, you can save yourself a lot of stress by picking the optimal product from the start.</p>
<p>Fortunately, some Azure AI services are quite narrow in focus. They should stand out if your needs are in that particular domain. The three I am referring to here are Azure Bot Service, Microsoft Genomics, and Azure Search. If you are looking to create a bot that interacts with users, work on sequencing genomes, or create a tool for searching heterogeneous data, then you should know where to turn.</p>
<p>The challenge comes when you have a more open-ended or nuanced problem. For example, let’s say your company has accumulated a lot of data over time and wants to see if there may be some value in analyzing it. This is a broad question that requires a deep understanding of both your business and the data itself. Which Azure data-related solution will offer the most value? Perhaps you could create some sort of facilities or office automation system using Azure Cognitive Services. Or perhaps you could make predictions about visitors to your site by using Machine Learning Studio. Or perhaps you really want to run large scale ETL operations on your data for some brand new business case or software service.</p>
<p>There is a more general point I am trying to make here with all of these hypothetical examples. Big data and machine learning are popular terms today. Often they can become solutions looking for a problem. In many cases, companies really have no practical need for investing the time and resources needed to make use of machine learning technologies, even in cases where you have relatively easy to use solutions in Microsoft Azure. So really, the first question to ask when trying to figure out which Azure AI solution to use is, “Do I actually even need to get into ML and big data analysis at all?” Smaller companies in particular can often get more value with less effort out of a few smart employees working with Excel.</p>
<p>But let’s say you have crossed that threshold and have a strong business case for digging into Azure’s more comprehensive solutions. The way to determine which tool is relevant is to first clarify your understanding of the problem you are trying to solve.</p>
<p>If you are in a very early stage where the work is exploratory meaning there is no clear desired outcome or deliverable, then what you want is something that can just give you insight into your data. This is not what Azure Machine Learning services or studio are really designed for - rather ML is more about using data to predict something. In this scenario, you do not even know what you want to predict. You would be better off using one of Azure’s many analytics services such as Data Catalog, Data Lake Analytics, Stream Analytics, or Azure Analysis Services.</p>
<p>Once you have narrowed down the problem to being of a specific type, now you can start thinking about Azure AI solutions. For example, if you know you want to make some kind of prediction by training an algorithm against data, then Azure Machine Learning is the way to go. The specific choice of whether or not to use Machine Learning Studio or not really depends on the state of your data and data science team. As Studio is a “drag and drop” system it is not going to be as flexible as Azure Machine Learning Services which gives you more control over how you prepare your data. If you are doing more resource-intensive training work on a more complex or long-range data science task, you should consider Azure Batch AI.</p>
<p>As implied early Azure Data Bricks is the best solution for ETL, especially if you have some familiarity with Spark. Lastly, Azure Cognitive services is for when you are ready to take the results of your analytical work and incorporate it into an application.</p>
<p>So to summarize, ask yourself what you are trying to do with your data. Do you want to make a prediction? Look at Machine Learning services. Do you want to transform data into some more usable form? Check out Data Bricks. Do you want to incorporate some understanding of your data into an app to make it more intelligent? Try Cognitive Services. And finally, if you are unsure of exactly what you want to do, first ask whether or not you need any AI service at all and consider using Azure Analytics Services to get a better understanding of your data.</p>
<p>So that about wraps it up for section 1. Congrats on making it this far. We’re going to continue on now with a few lessons on Azure and the Internet of Things. It should be a blast. See you there.</p>
<h1 id="Section-2-Introduction"><a href="#Section-2-Introduction" class="headerlink" title="Section 2 Introduction"></a>Section 2 Introduction</h1><p>The “Internet of Things.” A curious name for a curious phenomena. It may seem like a silly meme but believe it or not, IoT, or Internet of Things, is a big deal. We’re going to talk about why it is a big deal in this section and we’re going to talk about how Azure can help you make use of it.</p>
<p>The first lesson will talk about exactly what IoT is. It is a short concept lesson. Feel free to skip if you feel like you already know it well. The second lesson will be long and dense. We’re going to go cover several different Azure technologies all related to IoT. There will be a lot of documentation links and useful diagrams. Plan accordingly. The third and final lesson in this section will be all about ensuring you understand WHEN to use which IoT service over another. Should not be too tricky.</p>
<p>So without further ado, let’s dive into that wonderful world of the Internet of Things.</p>
<h1 id="IoT-Concept-Explanation"><a href="#IoT-Concept-Explanation" class="headerlink" title="IoT Concept Explanation"></a>IoT Concept Explanation</h1><p>Get ready for a super short lesson that is completely skippable if you already know the subject. All we’re going to do is briefly define exactly what we mean by, “Internet of Things,” or “IoT.”</p>
<p>Now, a lot of people, when they hear the term “Internet of Things,” immediately get a very superficial image. They imagine cheesy home automation gadgets, like an internet-connected talking toaster. Due to the dubious value of many trendy items billed as “IoT,” there is an unfortunate tendency to be dismissive of the term.</p>
<p>In reality, “Internet of Things,” refers to a much more consequential and larger trend. The Internet of Things refers to a historically recent growth of internet access and network-connected devices in all manner of fields. So when we talk IoT, we’re not just talking toasters. We’re also talking about agriculture, solar power, elderly care, transportation, and manufacture. We’re talking about internet-connected cameras and audio sensors deployed by municipal police to combat crime. We’re talking about internet-connected crop watering systems that let farmers automate much of their work and generate larger crop yields. We’re talking about a massive new economic opportunity creating jobs and new fields of technological inquiry. We are talking about all of the ways cheaply adding internet access to everyday devices creates new opportunities to make our communities safer, our lives easier, and our work more intelligent and efficient.</p>
<p>IoT is not just a meme. It is one of the few truly futuristic technological developments that will push us toward living the George Jetson &#x2F; Back to the Future lifestyle we’ve all dreamed of since we were kids. IoT is a natural consequence of computers getting smaller and high-speed internet access getting cheaper. Thousands of startups are exploiting new business opportunities as a result. With the right vision, it could be a great opportunity for you as well.</p>
<p>So that is all you really need to know at the conceptual level. So now the natural question is, “Where does Azure factor into all of this?” Well, to make IoT work, you need the right software infrastructure. Azure has many tools in place to simplify setup of IoT systems. In the next lesson, we will take a thorough survey of these technologies. So if you’re ready, let’s dive in. Good luck.</p>
<h1 id="IoT-Azure-Technology-Review"><a href="#IoT-Azure-Technology-Review" class="headerlink" title="IoT Azure Technology Review"></a>IoT Azure Technology Review</h1><p>Internet of Things software infrastructure is all about messaging and events. In the next major section, we will do a deep dive on messaging infrastructure in Azure. For this section all you need to understand is that messages between IoT devices and the cloud backend are used to transmit events. These events could be temperature measurements from an IoT thermostat, humidity readings from an IoT greenhouse monitor, a configuration change for an IoT home light switch, or any other sort of data transmission.</p>
<p>So how do we handle these events efficiently? Well, you could build our own event handling system using something like Apache Kafka. If you have the expertise in-house, this could work well, but it will take time and effort.</p>
<p>Here is where Azure comes in. Azure has a number of different solutions for managing IoT events. We’re going to talk about event handling in two parts. First we’ll talk about initial event ingestion and processing. That will entail an explanation of three core Azure technologies - Azure Event Hubs, IoT Hub, and Azure Service Bus. Next, we’ll talk about actually using the ingested event data both by end users and our backend services. Relevant technologies here are Azure Notification Hub, Azure Stream Analytics, and Azure Event Grid.</p>
<p>So let’s start with event ingestion. Azure Service Bus, Event Grid, and IoT Hub are all capable of ingesting events - they just go about it in different ways. Service Bus is the more generalized solution. It is not strictly speaking an event ingestion system. Rather it is a managed message broker. Like Kafka or RabbitMQ, Service Bus is designed to decouple applications and services from each other with a reliable system for asynchronous state transfer.</p>
<p>Not all messages are events but all events are messages. Again, we’ll dig into the concept of messages in section three. Service Bus can do much of what IoT Hub and Event Hub can do, only it is not specialized around events or IoT. It doesn’t integrate with all of the same Azure services as well. As you can see from the documentation link, whatever your needs, Service Bus can likely accommodate you. The enterprise level support and security make it great for sensitive data like financial transactions. What’s more it has strong library support for .NET as well as Java and JMS.</p>
<p>Service Bus really shines when you need to support a variety of state transfer paradigms. Perhaps you need transactions that let you group operations together. Perhaps you need batching, or scheduled delivery of messages.</p>
<p>However this whole section is on IoT, and as we discussed IoT is focused on events. While Service Bus can serve as our main event ingestion system, it would require more development knowledge to get it to do everything we want. To make it easier for us to focus on events and in particular IoT, Azure offers IoT Hub and Event Hubs.</p>
<p>You can think of IoT Hub as a specialized version of Event Hub. Event Hubs act as the “front door” for your data. As you can see from the diagram, event data can come from a range of sources. End user devices, laptops, phones, tablets, software applications, devices, clients - all kinds of things can transmit event data. They need a place to send that data to - an endpoint essentially that speaks their language and understands the event data it is receiving.</p>
<p>So as an event ingestor Event Hub will have a few responsibilities. It has to validate that event data is properly formatted. It will use SAS tokens to identify and authenticate the event publisher. It will capture data and store it in an Azure storage service if needed. Even nicer: Event Hub can scale with your app. You control traffic using throughput units that can handle a certain number of MB per second. You can manually scale through the portal or enable auto-inflate to let Azure scale for you.</p>
<p>So what about IoT Hub? Why pick it over Event Hub? To add to your initial skepticism, know that IoT Hub is more expensive than Event Hub. So why go to the trouble and cost of using it instead of Event Hub or Service Bus? Simple: It provides functionality for IoT workloads that you won’t find anywhere else.</p>
<p>With IoT Hub you get the ability to not only ingest data from clients but also to easily push data back to those same endpoints. This can be hugely valuable for managing IoT devices. You get access to the Azure IoT Edge system that enable on-device data processing for analytics, app changes, configuration, and security. IoT Edge in particular is very powerful from some use-cases as we’ll see in a bit. Key takeaway is that IoT Hub is like Event Hub on steroids…Magic steroids that grant powers for IoT…Anyway, see the chart for a proper feature comparison.</p>
<p>(link comparing IoT Hub and event Hubs: <a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-compare-event-hubs">https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-compare-event-hubs</a>)</p>
<p>So now that the event data has been ingested either using Service Bus, Event Hubs, or IoT Hubs, we want to do stuff with those events. Most likely we want to do one of two things. We either want to pass those events on to some other service to power our application or business logic, or, we want to immediately start analyzing that data directly and start deriving insights.</p>
<p>So let’s start with the former case. How can we easy mobilize all of this ingested data? Azure Event Grid is the answer. Event Grid is basically a managed intelligent routing service that consumes events in a publish-subscribe model. So take a look at the diagram here. As you can see Event Grid is basically a middle layer between your event ingestion systems and your downstream services.</p>
<p>You can see it supports Service Bus, Event hubs, and IoT Hubs as topics for ingestion. However it can also take in data from other Azure components such as Media Services and Blob Storage. The services that will then subscribe to your Event Grid will depend on your infrastructure. So for example you may have an Azure Function or an Azure Logic App that is powered by event data pulled from an Event Grid subscription. Your app then takes that event data, which may have originated from some user activity, and then return some output or value to the end user.</p>
<p>Event Grid is easy to set up using the Azure portal. All you need to do is define a topic and give it some input - perhaps your IoT Hub or Service Bus. Then on the other end you create a subscription. For something like an Azure Function this is as easy as clicking “Add Event Grid Subscription” in the top right of the UI. Event Grid can also be managed using Azure CLI tools or PowerShell.</p>
<p>Now let’s say that instead of piping our events to some other system we would rather process them directly to derive useful insights. Here is where Azure Stream Analytics comes in to save the day. If you look at the diagram you can see that, much like Event Grid, Stream Analytics act as as a kind of middleware. It takes streams of event data from Event Hubs or IoT Hub as an input, performs some processing, and then outputs to some downstream consumer.</p>
<p>Exactly what Stream Analytics will do for output will vary based on your business. You might want to save Stream Analytics outputs to a DB for storage or batch jobs. You might push the results to Service Bus, an Azure Function, or even to another Event Hub. It all depends on the type of job you are doing. The key thing that distinguishes Stream Analytics from Event Grid is the ability to visualize and utilize data immediately from the source pipeline. This is helpful when you want to make sense of telemetry data, send alerts based on sensor readings, or trigger some other backend functionality based on a real-time understanding of the data.</p>
<p>So with Event Grid and Stream Analytics we have covered how we can use event data for our purposes by either coupling events with other services or doing real time analytics. But what about if we want to use event data on the client side? How can we do useful work away from the cloud or even just interact with clients and users?</p>
<p>This is where Azure Notification Hubs and IoT Edge come in. The former is ready made smart device notification solution. Need to send push notifications to iPhones, Android phones, or tablets? Notification Hubs is your answer. The great thing about it is that it takes away a lot of the pain involved in supporting a variety of mobile devices. If you have experience as a mobile developer then you’ll really know what I am talking about. Unlike other forms of messaging, push notifications often have tricky platform-dependent logic. Scaling, managing tokens, and routing messages to different segments of users on different hardware and different versions of Android is non-trivial work for even an experienced tech team.</p>
<p>Notification Hub takes away most of that pain. It lets you broadcast to all platforms with a single interface. It can work both in the cloud or on-premises and includes security features like SAS, shared access secrets, and federated authentication. See the “How To” guide link for more details. (<a href="https://docs.microsoft.com/en-us/azure/notification-hubs/notification-hubs-aspnet-cross-platform-notification">https://docs.microsoft.com/en-us/azure/notification-hubs/notification-hubs-aspnet-cross-platform-notification</a>)</p>
<p>Lastly we need to talk about IoT Edge. IoT Edge is a tool for empowering IoT devices. It lets you run code directly on client devices instead of in the cloud. So you can do things like change device configuration, get real-time analytical data, or detect anomalous conditions. The chief value of doing such work directly on the device is that it saves the effort of having to send event data back and forth over the internet. So for example, we might want an IoT home sensor to alert us to some unusual condition without having to phone home to the cloud to run analysis. You can imagine how valuable this could be for something like an IoT smoke detector or security system. IoT Edge can also empower devices where network connectivity is not always reliable.</p>
<p>So how exactly does IoT Edge let you run code on the device itself? It’s pretty ingenious actually. What you do is install an IoT Edge runtime on your client device. This runtime executes IoT Edge modules. These modules are just lightweight Docker containers that run whatever business logic you want. Modules can call other Azure services, run 3rd party software, or execute your own custom code. Whatever it is you need your device to do. The IoT Edge runtime will manage your modules, track module health, facilitate communication with downstream itself and other endpoints, and manage security. Best of all: You can track all of this activity in the Azure web portal. With a few clicks you can monitor device health and push updates or configuration changes. IoT Edge gives you ultimate control over your entire fleet of IoT devices.</p>
<p>IoT Edge does not integrate with Azure Event Hub. To properly make use of IoT Edge you need an IoT Hub account. Note that with the IoT Hub basic tier account, you can only use IoT Edge for testing and evaluation. You need a paid IoT Hub Standard tier account to get proper support for IoT Edge production use cases. As mentioned above this is what enables the cloud-to-device messaging that powers IoT Edge.</p>
<p>So that about wraps it up. We have gone over all of Azure’s offerings in the IoT space. You should know enough now to be dangerous. To really solidify your understanding, play around with some of these tools in the Azure portal or at least read some of the quickstart and how-to guides in the Azure documentation. So for our next section we’re going to offer some additional insight about selecting the right IoT Azure service for your particular use-case. See you there.</p>
<h1 id="IoT-Azure-Technology-Selection-Insight"><a href="#IoT-Azure-Technology-Selection-Insight" class="headerlink" title="IoT Azure Technology Selection Insight"></a>IoT Azure Technology Selection Insight</h1><p>The third and last part of our section on Azure IoT services is really meant for reinforcement. We’re not really presenting anything new about the services we discussed in the last section. Rather we’re just going to briefly talk about what differentiates the services to help you understand when to favor one solution over another.</p>
<p>We’ll start with the more specialized technologies with narrower use-cases. This covers Azure Stream Analytics, Azure IoT Edge, and Azure Notification Hubs. Let’s begin with the last one. Notification Hubs, as the name implies, is for sending notifications to mobile devices. That’s basically it. Notification Hubs is a Push Engine and API for notifications. Azure Stream Analytics is your toolkit for real-time analytics on event streams. So if you are looking to gain some business insight on streams of data, that’s where to look. Finally, IoT Edge is for implementing data analysis and processing directly on your IoT devices. Basically it is a method for taking workloads off of your backend allowing you to send fewer messages back and forth.</p>
<p>So now we’re left with four key IoT services: Event Grid, Service Bus, Event Hubs, and IoT Hub. Now of these four, one of these things is not like the other. For the folks playing at home, that would be Azure Event Grid.</p>
<p>Event Grid is NOT an event ingestion or processing system. Rather it is middleware meant to help you create applications with an event-based architecture. It is designed to help connect sources of event data to different endpoints or event handlers. So for example it can take event data from Service Bus or IoT Hub and connect it to your Azure Functions to create a serverless application stack. So think of Event Grid as the glue that connects your event data and downstream applications.</p>
<p>So finally, the remaining three services, Azure IoT Hub, Azure Event Hubs, and Azure Service Bus. All three can be used for event ingestion and processing, so how do we know which one to use?</p>
<p>I think the easiest approach is to think of them in terms of decreasing levels of specialization. So, Azure Service Bus is the most general purpose of the three. It is a cloud messaging service that can be used not only for events but any sort of asynchronous FIFO messaging system. If you are not even thinking in terms of events Service Bus may be the place to start. It also is great when you need ACID guarantees, meaning you need real transactions that are durable and won’t get dropped. This is especially important when dealing with temporal transactions with things like finance or manufacturing.</p>
<p>From there we go to Azure Event Hubs, a more specialized service than Service Bus. This is really your event “on ramp” for your entire infrastructure. It is definitely Azure’s most cost-effective and performant event handling system at scale. IoT Hub, by contrast, is more expensive and specialized even more. IoT Hub is designed specifically for IoT workflows. It allows for greater control of bidirectional events between devices and your backend system.</p>
<p>So in short, if you need something specialized for IoT and don’t have to be super tight on budget, IoT Hub is the way to go. If you need a more generalized event handling system that is extremely robust and competitively priced, go with Event Hubs. If what you really need is messaging with transactions and durability, go with Service Bus.</p>
<p>So that should about cover it all. Hopefully, now you have a clear sense of which service is best for a variety of situations. This will help for technology professionals trying to design a solution using Azure. From here we will move on to section 3 and get into the magical world of messaging. See you there.</p>
<h1 id="Section-3-Introduction"><a href="#Section-3-Introduction" class="headerlink" title="Section 3 Introduction"></a>Section 3 Introduction</h1><p>We talked all about event handling in the last section and I explained that events are a type of message. Messages are the more general concept. Messages are data - encapsulations of system state transmitted electronically. They may be text, binary, or some other format.</p>
<p>Messaging infrastructure is a big field in the world of cloud-based applications. It is an integral part of most SaaS (software as a service) systems. At some point, data about the state of the system at one point will need to be transmitted to some other system. Your user signup service will need to take new account data, transmit it to some storage, and then perhaps some other service will need to use that data. How do we efficiently move data around in systems with potentially many services? How do we coordinate between services that push data somewhere and services looking to subscribe and receive data from somewhere?</p>
<p>This is the essence of messaging systems. There are numerous technologies that have come about to try to solve this issue. On the one hand you have message queues like RabbitMQ. There are also more robust systems like Apache Kafka and Ignite.</p>
<p>We’re going to cover Microsoft Azure’s messaging solutions in this section and talk about the specific use-case of push notifications on smart devices. Now, some of this will be review, as we talked about some of these solutions while covering events in the context of IoT. I will try my best to not repeat myself too much, but if you decide to watch the video at 2x speed when I am covering Azure Service Bus for a second time, I won’t be offended.</p>
<p>So before we do our technology review and go about creating a push notification system, we are going to talk a little bit about messaging more generally. If you’re ready, let’s dive in.</p>
<h1 id="Messaging-and-Push-Notifications"><a href="#Messaging-and-Push-Notifications" class="headerlink" title="Messaging and Push Notifications"></a>Messaging and Push Notifications</h1><p>Messages are one of the fundamental building blocks of software systems. So what exactly is a ‘message’? At a basic level, messages represent system state. Messages have a sender and a receiver. A typical message will be formatted with a body, representing its content, and additional metadata for things like origin, destination, authentication, authorization, timestamp, and encryption. Messages can come in the form of sensor data from an IoT device. They can come from user input on a website or game. They can be generated by an analytics pipeline outputting the results of some workflow to a downstream system. The key thing to understand is that messages represent real world information. For that reason we have to treat them carefully. We have to care about order and we can’t afford to drop them.</p>
<p>This is why software teams are so wary of making changes to servers that deal with ingesting or storing messages. If you have ever worked for a startup, you may have had this experience. Your deployment system, say Amazon Cloud Formation or something like it, is really great for stateless services that can be torn down and relaunched without losing data. But once something stateful needs an upgrade, something like a database, or Redis, or Kafka, things get sticky.</p>
<p>To reduce the pain, good messaging systems should have a few features. They should be resilient. They should be scalable. They should be capable of carefully tracking message order. They should have good security. And finally, they should be easy to integrate with various clients - both consumers and producers of messages. Now, just for clarification, by “resilient,” I mean that you need a messaging system that can survive minor failures. You want something that can be deployed on multiple servers and possibly across multiple regions. By “scalable” I mean that you need something that can process messages quickly and can be easily expanded by adding more hardware if necessary.</p>
<p>Apache Kafka meets all of these requirements. An internally developed proprietary system in theory could do. Now, happily, you can also save yourself some time by using Azure’s messaging solutions and get all of the above features right with your Azure account.</p>
<p>So now that we have some context around messaging and messaging systems, I want to briefly go over push notifications. Push notifications are messages that pop up on mobile devices, usually in the upper area. They look like SMS text messages but are transmitted via the internet only to users of the relevant app. So when you send a message to someone via Google Hangout or Facebook Messenger, the little notification that person receives is a push notification.</p>
<p>Push notifications are an integral part of any cloud based software application. They are one of the key ways we can alert users to important changes and solicit critical user feedback. Being able to create a stable, performant push notification system is an extremely useful skill if you are on a development team. And that, my friends, is precisely what we’re going to do in the coming lessons.</p>
<p>So, now that we’re all up to speed on messaging and push notifications, it’s time to take a deep dive into the world of Azure messaging solutions. Good luck and see you there.</p>
<h1 id="Azure-Messaging-Technology-Review"><a href="#Azure-Messaging-Technology-Review" class="headerlink" title="Azure Messaging Technology Review"></a>Azure Messaging Technology Review</h1><p>Now that you have some context around messaging systems and push notifications we’re going to do a thorough survey of the relevant Azure solutions. Some of them you likely already know. We covered several in the previous section. Others we have covered in other Cloud Academy courses. For this lesson, we will do a short review of those technologies covered in the section on IoT. The other technologies that have not yet been introduced in this course will be covered after that.</p>
<p>So let’s start with a brief review of Azure Event Grid, Azure Event Hubs, Azure Service Bus, and Azure Notification Hubs. Azure Event Grid, as you may recall, is an intelligent event routing system. It takes, as an input, some event source, such as IoT Hubs or blob storage, and connects it to a downstream service such as Azure Functions or Logic Apps. It is not meant for message processing or ingestion but rather relaying. Azure Event Hubs, like IoT Hub, IS an event ingestion system. It can be used to ingest generic messages since events are a type of message, however, it is optimized for an event-based use case. It is designed to be extremely scalable and performant. With the right configuration, you can ingest literally millions of messages per second.</p>
<p>Now as for Azure Notification Hubs, which we talked about for IoT, we’re actually going to give it its own lesson.</p>
<p>So that leaves Service Bus for review. Azure Service Bus is probably most directly relevant to this section as it is indeed designed for generic message handling. Service Bus is more than just a queuing system that supports publish&#x2F;subscribe based approaches. As you can see in the comparison below it is a “high-value enterprise messaging” system. Similar to Kafka, it can use topics for sending and receiving messages. Topics can have multiple subscriptions making it easy to scale horizontally.</p>
<p>Now as we discussed previously Service Bus has a number of additional features that make it more robust than just a typical message queue. You get durable transactions, scheduled delivery, dead-lettering for messages that cannot be delivered - you can store and process them later - you also get client-side batching options, filtering for subscription rules to ensure downstream consumers only get specific messages, message duplicate detection, and some handy security features including role-based access control and SAS aka shared access signatures.</p>
<p>So, whew! That’s a lot that it can do. It may seem like Service Bus should then be your go-to solution for messaging with Azure. Mmm…not quite. There are tradeoffs with Service Bus that we will discuss when we start talking about the other messaging solutions later in this section.</p>
<p>One other important thing we need to cover before moving away from Service Bus is Azure Relay. This is a very important component of the Azure product line that has gone under significant change and is directly related to the Service Bus overall platform. At a high-level Azure Relay is a system for connecting corporate enterprise networks to the wider public cloud, without the need to open firewalls or make changes to corporate network infrastructure. If you have had to work with corporate network security with Windows, you may already be familiar with WCF relays - Windows Communication Foundation, that is. WCF is the legacy relay for enabling remote procedure calls securely. Azure Relay subsumes this feature and offers a second feature known as Hybrid Connections.</p>
<p>So what’s the difference between WCF and Hybrid Connections. Well to start, see the chart here. Hybrid Connections is actually an open-protocol evolution of the WCF relay approach. It can be implemented in any language with WebSockets support. Its feature set is entirely based on HTTP and WebSockets. To set it up all you need to do is define a relay namespace in your Azure account.</p>
<p>Now we don’t need to get into the nitty-gritty technical details of how Azure Relay implements all of this. The diagram should give you some idea and we’ve included a link to the documentation for people that want to know more. The key thing is to understand the problem it solves: Allowing your messaging system to safely connect traffic from the public internet to an on-premise or corporate network. (<a href="https://docs.microsoft.com/en-us/azure/service-bus-relay/relay-what-is-it">https://docs.microsoft.com/en-us/azure/service-bus-relay/relay-what-is-it</a>)</p>
<p>Now let’s get into the as yet uncovered messaging solutions. We need to talk about Azure Storage Queues, Azure Functions, and Azure Logic Apps.</p>
<p>Let’s take them in order. Azure Storage Queues are the most popular message queuing system within Azure. This is because of their incredible simplicity and flexibility. All you need is an Azure storage account and you can begin creating queues of work to process asynchronously. Using HTTP or HTTPS calls you can process millions of messages from a single queue. The two limitations to keep in mind are 1. The total capacity of your storage account and 2. Individual messages in a queue can only go up to 64 KB in size. Service Bus, by contrast, supports messages from 256 KB up to 1 MB in size depending on your tier. Even with these restrictions, Azure Storage Queues are usually better for most simple message queue use cases. They are simpler to configure than Service Bus and often cheaper. They also have wider library support as there are Azure storage libraries for C++, Python, Ruby, PHP, Node.js, and Java, as well as PowerShell and .NET.</p>
<p>Now, one tradeoff is that Azure Storage queues do not give you the same ordering guarantees as Azure Service Bus. You get an “at least once” delivery guarantee and have to make sure your app has logic to properly order operations and transactions. For this and other reasons Storage Queues are generally better for simply managing messages within your Azure app. See the detailed comparison in the slide here. As you can see there are a number of feature differences between Storage Queues and Service Bus. So thinking about use cases, if, for example, you are dealing with backend worker processes that need to communicate with frontend services, all within an Azure infrastructure, Storage Queues would probably work fine. In this use case, the overhead of Service Bus is likely unnecessary. Once you need to start integrating with external apps and you need more guarantees and real transactions, Service Bus may be the better way to go.</p>
<p>So now let’s switch gears and talk about Azure Functions. If you’re familiar with Amazon Lambda then you already have a basic idea of Azure Functions. They are a service for executing “code on demand.” They are not a message queue or ingestion system. Rather they are for processing messages coming from some other source. So often you will have something like an Event Hub or Service Bus act as an input to an Azure Function. The function takes the message, executes some code to process it, and then outputs it to some other endpoint based on your architecture. Functions are ‘pay per use’ in terms of pricing and super easy to scale; since they are serverless, Azure will do all of the scaling for you.</p>
<p>So how do we actually use an Azure Function? The basic approach is to set triggers. As you can see here there are many kinds of triggers. A Function can be triggered by messages arriving in an Azure Storage Queue, or an Event Hub, or Service Bus. Functions can also be triggered by HTTP requests, Github webhooks, timers, and other generic types of webhooks. You get a range of options and strong integration with Azure services like Event Grid, Notification Hubs, Cosmos DB, and Azure Storage. So if you’re application logic - your startup’s “special sauce” - can be easily translated into discrete code calls to be run as an Azure Function, this may be the simplest and most scalable paradigm for message processing available.</p>
<p>Finally, let’s talk about Azure Logic Apps. Logic Apps are a tool for automating workflows in Azure. So what exactly is a workflow? Well, a workflow is just a business process broken down into a series of steps. It may involve grabbing data from storage, executing a function, posting a message somewhere, sending an alert, firing an email, etc. etc. What Logic Apps do is allow you to automate these workflows and add, surprise surprise, logic! This means you can add conditions - you can make it so that workflows only trigger after specific events. You can define logic apps using the Azure Portal or by writing JSON definitions. You can also use PowerShell.</p>
<p>Logic Apps are not for creating custom code or complete software applications from scratch. They are really for wiring together parts of your Azure infrastructure or connecting it with legacy systems. So how does this relate to messaging? Well, consider the diagram here. Your messaging system needs to do more than just ingest messages. It may need those messages to trigger additional processes. You may be able to do that with an Azure Function, but that would require writing code. With an Azure Logic App you could, for example, have a message trigger an update to a Slack chatroom by having the app monitor your blob storage. This could be set up with just a few clicks on the Azure portal. Pretty cool.</p>
<p>So that about does it for our review of Azure messaging solutions. There is A LOT of content in this lesson so don’t feel bad if you need to review it a few times. We’re going to focus in on our push notification use case in the next lesson and do some light review in the final part of the section covering scalability. See you there!</p>
<h1 id="Creating-a-Push-Notification-System"><a href="#Creating-a-Push-Notification-System" class="headerlink" title="Creating a Push Notification System"></a>Creating a Push Notification System</h1><p>There are many scenarios where you will need your application to send notifications to end users’ smart devices. It may be a fitness app that tracks how many steps we have walked and wants to let us know that we reached a daily goal. It could be a messenger app letting alerting us to a new contact request. If you have a smartphone you can surely think of many other examples.</p>
<p>To demonstrate how to set up a push notification system, we’re going to take the example of a bank application. It needs to notify users whenever they receive a deposit over a certain amount of money. The centerpiece for our system will be Azure Notification Hubs. We’re going to walk through it step by step.</p>
<p>So let’s start by considering what our backend might look like. Consider this architecture. Financial data is managed by a legacy system. We’re using Azure Service Bus to ingest messages and event data. Then there is a mobile backend that subscribes to specific topics and is responsible for pushing messages to our banking mobile app.</p>
<p>The easiest way to integrate our mobile app backend with notification hub would be to use something like Azure App Service Mobile Apps. This is an Azure Platform as a Service tool that has direct integration with notification hubs.</p>
<p>App Service mobile Apps: <a href="https://docs.microsoft.com/en-us/azure/app-service-mobile/app-service-mobile-value-prop">https://docs.microsoft.com/en-us/azure/app-service-mobile/app-service-mobile-value-prop</a></p>
<p>However if we want to take a more open-ended approach, the basic solution is to create a notification hub and connect it to our mobile app project. We have included a link to a detailed example for how to do that with Android. It is a little out of scope to cover how to set up an Android project, so we’re going to focus on setting up the notification hub. You can do this in the web UI by simply clicking on “create a resource,” then selecting “Web + Mobile” and finally selecting “Notification Hub.” The next menu will ask for some basic information to configure your hub, such as your Azure region, a name for the hub, and a resource group.</p>
<p>Android example: <a href="https://docs.microsoft.com/en-us/azure/notification-hubs/notification-hubs-android-push-notification-google-fcm-get-started">https://docs.microsoft.com/en-us/azure/notification-hubs/notification-hubs-android-push-notification-google-fcm-get-started</a></p>
<p>Once the hub exists you will need to get the connection string from the Access Policies page. This is the credential that will let your mobile backend actually connect to your hub for pushing messages. It will be part of your mobile backend code. From there, usually your code will use some library to handle transmitting the notification with relevant target details. If a library is not available for your use-case, you can use the REST API to send notification messages.</p>
<p>The nice thing about Azure notification hubs is that it makes it easy to test push notifications once you are ready. As you can see from the diagram, in the web UI you can select a platform, create a payload, and do a “test send.” If you have configured your app correctly you should see it on targeted phones running the app.</p>
<p>So that’s basically it, at a high level at least. Actually implementing all of this in a real software stack is of course more complex and requires some programming knowledge. What we wanted to demonstrate here was just problem solved by Azure Notification Hubs - namely, giving your app a centralized easily managed service for handling transmission of notifications.</p>
<p>So now we will close out this section by talking about scaling. It’s all well and good to be able to handle lots of messages with Service Bus and send notifications with Notification hub. But how do we deal with bottlenecks and sudden increases in traffic? How do we optimize our performance? Stick around for the next lesson and you’ll find out!</p>
<h1 id="Scaling-Your-Messaging-Infrastructure"><a href="#Scaling-Your-Messaging-Infrastructure" class="headerlink" title="Scaling Your Messaging Infrastructure"></a>Scaling Your Messaging Infrastructure</h1><p>Scalability is often your biggest and most critical challenge when designing cloud infrastructure. If we cannot tolerate traffic spikes or sudden growth then we have been derelict in our duty. The first place to start when addressing scalability is to identify bottlenecks. What components of our system are most vulnerable to catastrophic failure due to changes in usage patterns?</p>
<p>With the notification and messaging systems we discussed in the previous lessons, there are, at a high level, three places we want to focus: 1. Messaging and event ingestion, or, the “on-ramp” into our system. 2. Message routing, meaning getting ingested messages to the right place without latency. And 3. Message processing, meaning once we are ready to do something with our messages, be it run some code or store them somewhere, we can do that thing quickly.</p>
<p>So let’s start with message ingestion. We’ll address Azure Storage Queues and Azure Service Bus. For Storage Queues, you get Azure’s enterprise storage SLAs, which include certain performance guarantees. See the links for full details in the Azure documentation. Basically, unless you have an extremely high volume system, Azure should be able to handle your needs. Storage Queues can tolerate 20,000 messages per second per storage account at a rate of 2000 messages per second per queue.</p>
<p>With Service Bus, performance varies a bit depending on the tier you select. In both cases you will be able to handle larger message sizes than storage queues. The main difference between the Service Bus Premium and Standard tiers is in network performance. The Premium tier guarantees consistent high throughput performance at a fixed price with the ability to scale workloads up and down. With the standard tier it is “pay as you go” with variable latency and throughput. Also note that the size of individual queues with Service Bus is fixed at a maximum of 80 GB, wherease Azure Storage queues can go all the way up to 500 TB. Keep this in mind if you have an unusual use case.</p>
<p>So the basic scaling takeaway here is that with both services you get strong performance guarantees but you may need to think carefully about whether Service Bus or Storage Queues make more sense for your needs as there are key differences.</p>
<p>Now for routing messages we’re going to just briefly mention Event Grid. It has strong scalability guarantees as well and is great for serverless architectures that need to route data to various endpoints. Event Grid includes 24-hour retry with exponential backoff to give you some breathing room if there is a temporary issue with your system. You also get a throughput guarantee of support for millions of events per second. Be aware, though, that the pricing model is pay-per-event. If cost is an issue it could be cheaper to handle events with your own custom system and only pay for network bandwidth.</p>
<p>Finally, how do we scale our message processing? Well, that depends on exactly what is doing the processing. If we’re using Azure Functions, happily, we don’t need to worry about scaling - Azure will do it for us automatically as traffic increases. Be aware that you will of course be charged based on function usage. If we have some sort of app running on a VM doing the processing, then we may need to implement some form of autoscaling. Our endpoint could also be an Azure Logic Apps. See the documentation link for details on its limitations. There are http request and message size limits that are not really changeable. If your bottleneck is needing to run more actions in a logic app workflow, you can add nested workflows to get more done.</p>
<p>So that about does it for scaling. We have talked about ingesting, routing, and processing messages using Azure solutions. In many cases we get solid default guarantees from Azure. In some cases we may need to select specific service tiers or change our configuration. The nice thing is that Azure is such a mature and robust system that, unless you are Amazon or Google, you probably can get your work done with their solutions. So we will end it there for our section on messaging. Our last part of this course will focus on handling media with Azure services. See you there!</p>
<p>Logic Apps: <a href="https://docs.microsoft.com/en-us/azure/logic-apps/logic-apps-limits-and-config">https://docs.microsoft.com/en-us/azure/logic-apps/logic-apps-limits-and-config</a></p>
<p>Storage queues performance: <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-scalability-targets#azure-queue-storage-scale-targets">https://docs.microsoft.com/en-us/azure/storage/common/storage-scalability-targets#azure-queue-storage-scale-targets</a></p>
<h1 id="Section-4-Introduction"><a href="#Section-4-Introduction" class="headerlink" title="Section 4 Introduction"></a>Section 4 Introduction</h1><p>In the final section of the Design Solutions Using Platform Services course, we are going to focus on media - specifically video content. Video media content is notoriously tricky to work with both for developers and cloud platforms. It is more difficult to analyze than text or images. It also tends to be far larger in size and therefore more expensive to store and transmit. You also have to worry about encoding and optimizing user experience for different browsers, media players, and bandwidths.</p>
<p>With Azure, these challenges do not go away, but they are made easier to deal with by the available toolset. Azure Media Services, Microsoft’s flagship solution for dealing with media, will help you navigate most of the above challenges. We will spend a good amount of time in the next lesson covering all of its capabilities. We will also discuss Azure Video Indexer, Computer Vision API, and a few other useful products. In the last part of the section, we will go over file-based encoding thoroughly and introduce Azure Media Analytics.</p>
<p>Once you finish this section, you should be a lot less nervous about dealing with videos and streaming content on the Azure platform. So if you’re ready, let’s dive in and get started.</p>
<h1 id="Media-Technology-Review"><a href="#Media-Technology-Review" class="headerlink" title="Media Technology Review"></a>Media Technology Review</h1><p>Azure Media Services is your base of operations for managing video media. It will handle storage, encoding, and packaging video for streaming delivery. To use it you need to create an Azure Media Services account. This is as simple as a few clicks in the Azure web portal.</p>
<p>As you can see from the diagram Media Services manages video content in five parts. First, there is upload and storage for administering content at rest. Then there is the encoding step to prepare content for media players. Next is setting asset delivery policies for clarifying how content can be used. From there, content is published to an OnDemand locator, and finally, content can be streamed to clients. Mixed into those five steps are some important security decisions. In this diagram, we add those in. There is setting the encryption content key and an authorization policy. Together these allow for content to be dynamically encrypted during playback. Media Services also includes options for encrypting content at rest.</p>
<p>Azure Media Services supports a number of approaches to delivering content. You can create streaming endpoints for video content using multi-bitrate (adaptive bitrate for unstable network conditions) streams over HLS, HTTP Live Streaming, or MPEG-DASH. You can create URL endpoints for both streaming or download. It’s up to you to decide whether you want users to be able to copy your media files, play them in browsers, or stream them in smart phones and other devices.</p>
<p>Honestly, it would take its own course to cover every single thing Media Services can do. See the documentation if you really want to go down a rabbit hole. One very important thing I will leave you with regarding Media Services, however, is that you can interact with its functionality in multiple ways. Like other Azure products Media Services works with the Azure web dashboard, a REST API, and has an SDK for .NET language support. So regardless of how you want to access your Media Services account, you will always have options.</p>
<p>Now, an important related service is the Azure Video Indexer product. Video Indexer replaces the older Video API service Azure supported in the past. Video Indexer is a relatively straightforward set of tools built on top of Azure Media Analytics, which we will cover later. It is designed to extract information from videos for easier management. So for example you can use Video Indexer to do visual text recognition on a video, transcribe audio, detect faces, translate the video to another language, and much much more. See the list of features in the slide here to get a full sense. Important to note: These tools are also supported by the SDK and can be accessed using .NET or REST calls.</p>
<p>Finally, the Azure Computer Vision API is somewhat similar to the image classification tools we discussed in the section on AI. This API gives developers tools for processing images using Azure’s advanced classification algorithms. You can access the API using languages like Python, C#, Ruby, Java, and PHP, or even just use cURL. Assuming your image meets the requirements shown in the slide, you can then call the API to do things like recognize text, flag adult content, apply tags based on content, generate descriptions, detect human faces, and even recognize domain-specific content.</p>
<p>So there you have it - we have gone over most of the basic media technologies in the Azure software ecosystem. We still have one major component to cover - the Azure Media Analytics toolset. We will cover that and briefly discuss file-based encoding systems in Azure in the next lesson. See you there.</p>
<h1 id="File-Based-Encoding-and-Azure-Media-Analytics"><a href="#File-Based-Encoding-and-Azure-Media-Analytics" class="headerlink" title="File-Based Encoding and Azure Media Analytics"></a>File-Based Encoding and Azure Media Analytics</h1><p>We will wrap up our lesson on Azure Media with a discussion on media file encoding and an introduction to the Azure Media Analytics tool set.</p>
<p>We aren’t going to go super deep here with respect to compression algorithms or the history of different codecs. For our purposes you just need to know what a video codec is. It is simply a piece of software that compresses or decompresses digital media. An encoder is for compression and a decoder is for decompression, and the codec is the software doing the work. Generally when we talk about encoding we are talking about audio or video files. There are numerous formats such as mp3, wma, mp4. Some forms are lossy or lossless depending on the compression algorithms used. Lossy formats usually take far less space but will lose information over time as the file is compressed and decompressed. Lossless formats take more space but maintain their quality over time. This is why your hipster friend is really into using FLAC for his music collection.</p>
<p>So our focus is file-based encoding. File-based encoding, as you might have guessed, relies on video files. These will be the inputs and outputs for your codec software. So you will start with some raw video file taken from a camera or other source, run that through an encoding program, and the output will be a compressed version of the video that will use less space and be playable in a wide range of media players.</p>
<p>Microsoft Azure has its own Encoding service. See the link below for the full list of supported input file types and output file options. Suffice to say, with Azure Encoding, you should have everything you need to get your video content properly formatted for delivery. The trickier question may be deciding which version of the service to use. Azure offers both a standard and a “Premium Workflow” version. Pause the video on this slide to get a thorough look at the feature differences. Probably the biggest advantage for Premium is the ability to apply conditional logic on file encoding. This will allow you to automate encoding rules and thereby encode large numbers of files quickly. If you only have a small number of video files to manage, the standard service may suit you just fine.</p>
<p>(List of formats: <a href="https://docs.microsoft.com/en-us/azure/media-services/previous/media-services-compare-encoders">https://docs.microsoft.com/en-us/azure/media-services/previous/media-services-compare-encoders</a>)</p>
<p>In the last part of this section, with the other Azure media services and file encoding now behind us, we will talk about how to gain useful insights from our media using Azure Media Analytics. As you can see in the diagram Media Analytics works in parallel with the components responsible for encoding, streaming, and storing your media.</p>
<p>Media Analytics is actually a combination of several small tools that work together to give you useful intelligence on your video content. There is the Indexer service that makes your content searchable and helps generate closed-captioning tracks. There is the Hyperlapse service that adds video stabilization and time-lapse capability. There is an optical character recognition tool as well as a face and motion detector application. There is a tool for face redaction if needed for legal or security purposes. There are also content moderation and video summarization systems to make administration of large amounts of video content simpler.</p>
<p>Azure Media Analytics is your one stop shop for efficiently analyzing and optimizing your video library. It can save you thousands by baking together several tools that would be expensive if purchased separately.</p>
<p>So that about wraps it up for our lesson on encoding and media analytics. Congratulations. You are now an expert on media management with Azure. Great job!</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>So congratulations! You made it! Give yourself a pat on the back because it has been a long and tough ride. We went through a lot of pretty dense material so before we pop the champagne bottles, let’s take a minute to briefly review what we have accomplished.</p>
<p>We learned how to design a variety of software solutions using Azure platform services. You should now be ready to tackle a wide range of problems using Azure technologies. We focused on four broad categories: Artificial Intelligence, Internet of Things, Messaging, and Media.</p>
<p>Recall our four learning objectives:</p>
<p>\1. The student will have an in-depth knowledge of Azure artificial intelligence services and know when to opt for specific offerings. To that end, we covered various Azure tools including Azure Machine Learning, Machine Learning Studio, Batch AI, Cognitive Services, and Databricks.</p>
<p>\2. The student will have an in-depth knowledge of Azure IoT services and know when to opt for specific offerings.  In section 2 we went deep on this, covering many services, including Azure Event Grid, Service Bus, IoT Edge, Stream Analytics, and Notification Hubs.</p>
<p>\3. The student will be able to design a scalable messaging architecture using Azure services. In what was probably the densest section we covered both the concept of messaging in software systems and how to scale. The relevant Azure technologies were Azure Service Bus, Storage Queues, and Event Hubs, some of which were covered in IoT but required a deeper dive here.</p>
<p>\4. The student will have a deep understanding of Azure media services. So, “Azure Media Services” is the name of the core Azure tool for managing video. However, we also covered media file encoding in some depth, as well as other media services including Azure Media Analytics, Computer Vision API, and Azure Video Indexer.</p>
<p>With all this information at your disposal, you should be ready to get to work on a number of different problems. Keep in mind, however, that practice makes perfect. You won’t be a true expert until you actually make use of these different technologies and learn the nuances. To be a master Azure technologist, you will need to dive in and get your hands dirty.</p>
<p>Now that you are done I’d like to invite you to send any feedback you have about the course to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. We greatly appreciate your comments, questions, and suggestions. Congratulations again on fighting through the whole course and good luck in your future endeavors.</p>
<h2 id="Azure-Artificial-Intelligence-Services-1"><a href="#Azure-Artificial-Intelligence-Services-1" class="headerlink" title="Azure Artificial Intelligence Services"></a><strong>Azure Artificial Intelligence Services</strong></h2><p><a href="https://docs.microsoft.com/en-us/azure/#analytics">Analytics Tools Catalogue</a></p>
<h2 id="7IoT-Azure-Technology-Review"><a href="#7IoT-Azure-Technology-Review" class="headerlink" title="7IoT Azure Technology Review"></a>7<strong>IoT Azure Technology Review</strong></h2><p><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-compare-event-hubs">IoT Hub and Event Hubs Comparison</a></p>
<p><a href="https://docs.microsoft.com/en-us/azure/notification-hubs/notification-hubs-aspnet-cross-platform-notification">How-To Guide</a></p>
<h2 id="12Creating-a-Push-Notification-System"><a href="#12Creating-a-Push-Notification-System" class="headerlink" title="12Creating a Push Notification System"></a>12<strong>Creating a Push Notification System</strong></h2><p><a href="https://docs.microsoft.com/en-us/azure/app-service-mobile/app-service-mobile-value-prop">App Service mobile Apps</a></p>
<h2 id="13Scaling-Your-Messaging-Infrastructure"><a href="#13Scaling-Your-Messaging-Infrastructure" class="headerlink" title="13Scaling Your Messaging Infrastructure"></a>13<strong>Scaling Your Messaging Infrastructure</strong></h2><p><a href="https://docs.microsoft.com/en-us/azure/logic-apps/logic-apps-limits-and-config">Logic Apps</a></p>
<p><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-scalability-targets#azure-queue-storage-scale-targets">Storage queues performance</a></p>
<h2 id="16File-Based-Encoding-and-Azure-Media-Analytics"><a href="#16File-Based-Encoding-and-Azure-Media-Analytics" class="headerlink" title="16File-Based Encoding and Azure Media Analytics"></a>16<strong>File-Based Encoding and Azure Media Analytics</strong></h2><p><a href="https://docs.microsoft.com/en-us/azure/media-services/previous/media-services-compare-encoders">List of formats</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Designing-for-Azure-Operations-31</title>
    <url>/2022/11/14/AZ-204-Designing-for-Azure-Operations-31/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Greetings! Welcome to Design for Azure Operations with Cloud Academy! I am delighted to have you join me on what is bound to be an educational and delightful adventure into the world of Microsoft Azure.</p>
<p>First I will let you know a bit about myself before I get into the course outline. My name is Jonathan. I am one of the course developers with Cloud Academy. I work professionally as a technical consultant specializing in DevOps, data engineering, and security. Long ago in another life I was a public school teacher, so I love educating people and I am thrilled to be doing it again only now with technology.</p>
<p>So enough about me, let’s get into this course. Who is this course for exactly? This course is for anyone looking to improve their infrastructure engineering abilities with Microsoft Azure. If you are a DevOps engineer, sysadmin, or security specialist and plan to work with Microsoft Azure at your next job, then this course will be very helpful to you.</p>
<p>So what exactly are the prerequisites for this course then - what do I expect you to know in order to understand the material? Well, not much actually. This is not a programming intensive subject. You do not need any deep knowledge of computer science or software development. The course will focus mostly on explaining Microsoft Azure systems and how to use the Azure user interface. You should know some basic concepts, like what a virtual machine is, or what software application logs are. You should also know some basic networking concepts, like SSL and TCP. If these sort of rudimentary cloud and software concepts are new to you, then you probably don’t need this course anyway.</p>
<p>The course will cover a lot of information given its short length. We are going to go into detail on a number of Azure services and practices. You will learn all about Azure monitoring and automation systems - the kinds of things DevOps engineers would need to worry about in their day to day work. We are going to talk about log aggregation, software application instrumentation, and network security.</p>
<p>There are three core learning objectives for this course. Number one is learning how to use Azure for application monitoring. Number two is how monitor Azure resources and infrastructure. Number three finally, is about task automation in Azure, including instance autoscaling. If you finish the course with a solid understanding of these three things, you will have gotten your money’s worth.</p>
<p>Lastly I want to encourage everyone to leave feedback. Email <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> if you have any questions, comments, suggestions, or concerns. We always appreciate people taking the time. Now without further ado, let’s get started.</p>
<h1 id="The-Big-Four-Priorities-of-Microsoft-Azure"><a href="#The-Big-Four-Priorities-of-Microsoft-Azure" class="headerlink" title="The Big Four Priorities of Microsoft Azure"></a>The Big Four Priorities of Microsoft Azure</h1><p>For section 1 of this course we have four priorities: System monitoring, application monitoring, log monitoring, and alerting. System monitoring refers to monitoring of cloud resources and hardware with a focus on things like CPU, memory, and network. Application monitoring refers to instrumentation of your own service code - anything you deploy on top of your servers. Log monitoring, as you can probably guess, is focused on analyzing logs generated by your system. Finally alerting is the process by which we automate a variety of alarms triggered by your application getting into an unhealthy state. The fourth priority, alerting, is made possible by the first three - system and application monitoring along with log analysis.</p>
<p>For system monitoring you will need to learn about the Azure Monitor service. For logging you will get acquainted with Azure Log Analytics. For application monitoring Azure offers its Application Insights service, which we will also be using for alerting in the last part of the section. So if you’re ready, we’ll get started now in the next lesson with an introduction to Azure Monitor.</p>
<h1 id="Monitoring"><a href="#Monitoring" class="headerlink" title="Monitoring"></a>Monitoring</h1><p>One of the nice things about Azure is that there are a lot of default metrics automatically reported for different services. For Azure VM’s, system level metrics are enabled by default and viewable in the dashboard. You can see a lot of these metrics right from the Azure compute interface by just clicking on the relevant VMs.</p>
<p>Azure Monitor is sort of your ‘base camp’ for metrics in Microsoft Azure. Azure Monitor, ‘provides base level infrastructure metrics and logs for most services in Microsoft Azure. The service has evolved over time, gradually subsuming more and more types of metrics from other Azure services. We are going to focus on Azure Monitor as our solution for system level monitoring.</p>
<p>In the Azure Monitor interface we can casually browse different system metrics. By default all Azure resources report basic information about network and system state. It is analogous to Amazon’s Cloudwatch. Azure Monitor is meant to be used primarily with Azure resources, however individual components can be used with non-Azure servers. For example the Application Insights component, which we will address in more detail later, can be installed on on-premise servers or virtual instances in another cloud. You could then use Azure Monitor to collect metrics about your Google Cloud or Amazon servers. This is not a very common use case though.</p>
<p>Azure also has a diagnostics extension that can be used for application performance monitoring. For this course we will be using Application Insights for this sort of monitoring, but it is cool to know that Monitor is also getting into this use case. In the future the two systems may become more tightly integrated, so it’s good to be aware of it.</p>
<p>By default Azure Monitor will store metrics for 30 days. If you need to keep metrics for longer than that you will need to store them somewhere. You can easily import metrics into Azure storage by using the console. If you wish to store metric data elsewhere, you can also export everything to some other system.</p>
<p>Now that we have a good understanding of Azure Monitor’s capabilities and how to get started, our next priority is looking at log aggregation. In the next lesson we’ll talk about Azure Log Analytics and learn how it can be your one-stop shop for logs. Let’s get to it.</p>
<h1 id="Log-Analytics"><a href="#Log-Analytics" class="headerlink" title="Log Analytics"></a>Log Analytics</h1><p>Having application and system level metrics is a minimum requirement for a proper monitoring system. However log aggregation is a similarly important but often overlooked part of an overall monitoring strategy. Many companies do not even think about proper log management until some disaster comes along and they find they cannot properly identify the root of the problem. Being able to collect and quickly analyze large numbers of logs is extremely helpful for any forensic investigation.</p>
<p>Companies spend large amounts of money and development on solutions like Splunk or ELK. With Azure, you get a baked in solution with Azure Log Analytics. It gives you an easy way to search a variety of types of event logs and has simple quickstart guides for Linux, Windows, and Azure VM server types.</p>
<p>The setup for Azure VM’s is easiest. All you will have to do is enable to log analytics extension from the console. With just a few clicks you can immediately start collecting event data for analysis. For Linux and Windows servers you will need to obtain a set of credentials - specifically a workspace ID and key. These will be used to set up the log analytics agent that will run on your server. The actual agent installation is pretty straightforward. You can do it with a few terminal commands in Linux. For Windows, you can download the agent from Azure directly and set it up with a few clicks on the relevant server. In both cases, you will need to configure the agent with the workspace ID and key so that the log data is sent to your Azure portal.</p>
<p>From the Log Analytics portal you will do most of your setup using the ‘Advanced Settings’ tab. There you can type in the name of the relevant logs to set as event logs. You can enable OS performance data for Linux or Windows with a separate option and configure severity levels WARN and ERROR for isolating potentially serious events. Once you are done with configuration, you can freely search and view log data by clicking on ‘Log Search.’ There you can type in any arbitrary pattern and find matches among all of your events.</p>
<p>One final cool feature to note about Azure Log Analytics is the ecosystem of additional plugins, known as ‘management solutions’ that you can add to your workspace. Management solutions are additional data acquisition rules and visualizations that let you really customize your log analysis needs to your specific use case. There are dozens of them available. Just to name a few examples, there is a management solution specifically for container monitoring, a solution for tracking specific events in your activity log, and a solution for automated real-time server mapping and graphing. If you want to really get the most out of your log data then it is definitely worth your time to browse these additional features for Azure Log Analytics.</p>
<p>In the alerting section we will discuss how to use Log Analytics for automatically catching dangerous conditions in your system. For now, you should have a basic understanding of how to set up Log Analytics and use it for investigating your systems. Next, we move on to application monitoring with Application Insights. See you there.</p>
<h1 id="App-Monitoring"><a href="#App-Monitoring" class="headerlink" title="App Monitoring"></a>App Monitoring</h1><p>Now that we have a solid understanding of log analysis and system monitoring in Azure, we can proceed to the final and most critical component of our instrumentation: Application monitoring. This is a deeper level of monitoring that goes beyond just tracking the state of the hardware. When we talk about application monitoring, we really mean monitoring everything we actually put into our infrastructure - all of our own unique business logic, internally developed software, and external libraries.</p>
<p>The general way to do this is to use a monitoring library with your code. There are many such libraries as frameworks for different languages, such as dropwizard metrics or ERMA for Java. Application Insights is similar in that you will need to add it to your code base before you can start getting metrics. Like many such frameworks the library is pretty lightweight and should not cause much performance overhead. Tracking calls are non-blocking, batched, and sent in a separate thread.</p>
<p>Application Insights can be used to monitor applications running <em>anywhere</em>. You can use it to monitor applications hosted in another provider like AWS or Digital Ocean. You can use it to monitor applications hosted on premise or even on your personal computer. All that Azure needs is for your application to have the Insights library installed and sending metrics to an endpoint in Azure.</p>
<p>Now, the Azure Portal has some great quickstart guides for a few languages including Java, Node.js, and .Net. It starts by having you create the Application Insights resource in the portal. You will need to set an app name, a region, an application type (usually just the language or framework name), and a resource group name, which is just the name for the resource actually hosting the metric data.</p>
<p>Once you have the Application Insights resource defined, step two is installing the library in your app. The quickstart guide shows how to do this very quickly using an IDE like Eclipse. It can also be done manually if you carefully follow the Azure documentation. There are some useful code examples that show how to actually get your application code to send data.</p>
<p>Once you have solid application and system monitoring in place, you need to make use of all that data. You need to empower your systems to send you actionable alerts when metrics suggest that something is wrong. In the next lesson we will discuss how to create meaningful alerts using application and system metrics.</p>
<h1 id="App-Alerting"><a href="#App-Alerting" class="headerlink" title="App Alerting"></a>App Alerting</h1><p>A key principle with alerting is ensuring that alerts are actionable and relevant. If you set up a large number of irrelevant alerts that fire constantly, you will train your team to ignore all alerts. Maintaining a good signal to noise ratio is critical with alerts that may require human intervention. It is similarly important that you try to make sure all alerts are actionable. This is not always possible - sometimes you may have to configure an alert for a situation that is not easily resolved. To the extent possible, you want to try to have documented responses to alerts so that the majority of your alerts are actionable.</p>
<p>For system level alerts - things like low disk space or high cpu load - we can use Azure Monitor. In the Azure Monitor portal we can configure notifications to fire when specific metric thresholds are met. From the monitoring dashboard click on the ‘Add metric alert’ button and create a name for your alert. You will then pick a relevant metric and set a condition such as ‘greater than’ or ‘less than’ some specific value.</p>
<p>You also will have to set a time period for the condition such as ‘5 minutes’. This would mean that the alert condition must be sustained for five minutes in order for the alert to trigger. It is crucial to think very carefully about the time period parameter. Configuring it incorrectly can lead to false positives or false negatives. For example, let’s say we set an alert for CPU load. We set it to alert whenever load is above 2.0 for more than 3 minutes. This may be too sensitive, as perhaps your application regularly has short periods of high load that are expected. In such case the alert would just end up being noise and training your response team to not take alerts seriously.</p>
<p>For Azure metric alerts be sure to add the right email address under the ‘Additional administrator email(s)’ section. This way you can ensure that the right people are notified when an alert is triggered.</p>
<p>Application Insights alerts are similarly easy to set up for your application performance metrics. From the Insights dashboard just click on ‘Alerts’ and then ‘Add alert’ to get the setup menu. From there you will define the alert rules in much the same way as we did with system metrics. You will pick a metric, a time period, a threshold, and a condition. You can set contact emails or a webhook address if you wish to integrate your Insights alerts with another system.</p>
<p>Finally it is possible to set up alerts based on queries run by Azure Log Analytics. From the Analytics dashboard you can create the alert rules by defining a time window and query. If the query returns the expected result within the time window, and alert can be generated. This can be used for example to catch serious ERROR messages that were output to an event log within some time frame.</p>
<p>And that about wraps it up for alerting using Azure Monitor and Application Insights. As we have seen, we can create a variety of alerts based on system metrics and application performance stats. Keep in mind the importance of minimizing noise with your alerts - make sure that when an alert is triggered it really means something. With this in mind, let’s move on to the next major section of course.</p>
<h1 id="Network-Security-and-Access-Management-with-Azure"><a href="#Network-Security-and-Access-Management-with-Azure" class="headerlink" title="Network Security and Access Management with Azure"></a>Network Security and Access Management with Azure</h1><p>Now that we have a solid understanding of application monitoring and alerting with Azure, we need to think about how to properly monitor Azure resources at a higher level. While Azure Monitor is a pretty flexible system for getting basic metrics about Azure VM’s, we need to think about how to monitor other Azure components. We also need to think about Azure network security and access management.</p>
<p>Section two will address these priorities in three parts. In part one, we’ll look at how to actually monitor all of the different Azure components using Azure Health, Azure Advisor, and the Activity Log. In part two we will focus on network security the Network Watcher Service and Azure Log Analytics. Finally in part three take a detailed look at the Azure Security Center and see how it can help ensure our Azure infrastructure is not compromised.</p>
<p>So without further ado, let’s begin.</p>
<h1 id="Monitoring-Platform-Resources"><a href="#Monitoring-Platform-Resources" class="headerlink" title="Monitoring Platform Resources"></a>Monitoring Platform Resources</h1><p>Out first monitoring priority is just tracking the health of Azure itself. Azure Health is your first line of defense for identifying problems with Azure platform resources. It is the most high level view of your cloud system and is generally the best place to start if you are experiencing problems and have no other leads.</p>
<p>Azure Health offers three basic levels of information about your infrastructure. At the highest level is Azure Status, which is simply a dashboard with information about the health of all of Azure’s different components. This information is not specific to your account; rather it will tell you if there is a global issue with a particular Azure service, such as virtual machines or storage. A quick check of the Azure Status dashboard is the fastest way to rule provider level problems when debugging failures.</p>
<p>The next level is Azure Service Health. It is similar to Azure Status but focused only on Azure resources in your account. Like Azure Status it is a dashboard only this one is customizable. You can arrange elements to focus on specific Azure products and regions.  Also like Azure Status, it will give you a general health check for each product category and inform you of issues that need your attention. Azure Service Health will notify you of planned maintenance that may affect your system. It will also warn you if you are approaching a resource quota or if a feature you use is about to become deprecated. After a quick check of the Azure Status dashboard, Azure Service Health is often the next best place to quickly examine when you are in the middle of responding to some kind of system failure.</p>
<p>Finally you have Azure Resource Health, the most granular level of inspection in the Azure Health suite. With Azure Resource Health you can get the status of specific instances of Azure resources, such as a single VM. It will let you know if a given resource is unavailable and it keeps a very useful log of platform events. You can see if an Azure platform SLA was violated at any point. With its very simple status messages and historical data, Azure Resource Health is the simplest way to monitor individual resources from the Azure platform’s perspective.</p>
<p>The Azure Health set of services gives us a lot of information to track our system’s health over time. However we often need to more than just data; we need some analysis and a more granular view of system events. To address these two issues we will use Azure Advisor and Azure Activity Log respectively.</p>
<p>Azure Advisor, as the name implies, is a personalized cloud consultant. It automatically examines all of your Azure resources and identifies ways to optimize them. It will spit out tons of recommendations automatically focusing on security, availability, performance, and cost. The nice thing about Advisor is that it’s really simple to use. Literally all you do is click “Advisor” in the left pane menu and you’ll get a summary of recommendations. You can then drill down to one of the four categories I just mentioned. So for example, you might get a cost recommendation telling you to scale down your storage provisioning if you are not actually using much of it.</p>
<p>So Azure Health has given us copious amounts of information about our system and Advisor continually helps us optimize. The final component is tracking system changes over time. For this we have Azure Activity Log.</p>
<p>Azure Activity Log is a subscription log that records events using event data from Azure Resource Manager. It records eight specific types of events: Administrative, Service Health, Security, Alert, Autoscale, Recommendation, Policy, and Resource Health.</p>
<p>Now, Azure Activity Log is accessible from a wide range of tools. You can get event data from the console, Powershell, CLI tools, and the Azure Monitor REST API. You can do a lot of useful things aside from just viewing system event data in the dashboard. You can store the data offline and query it programmatically with scripts. You can set alerts against specific types of event. You can also stream Activity Log data to external event hubs such as a third party analytics tool or monitoring system.</p>
<p>Activity Log is a very flexible tool and is very simple to use. That said, it is important to understand its limitations. It is not a replacement for proper application logging and monitoring. Activity Log is primarily concerned with Azure Resource Manager events. Some of the older “classic” type resources will not by default send events to Activity Log. You will need proxy resource providers to make the operations appear in Activity Log.</p>
<p>So now we are at the end of our dive into platform resource monitoring. You should have a basic understanding now of how Azure can monitor its own assets, track events over time, and automatically help us use resources most efficiently. So next we move onto all of that space in between our Azure resources: the network. In the next lesson we will learn how to properly monitor our network infrastructure in Azure.</p>
<p>Let’s get to it.</p>
<h1 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h1><p>We have spent a good deal of time covering how to monitor the physical infrastructure of our system. We have covered application level monitoring and Azure resources from the smallest levels up to the entire set of Azure datacenters. Our priority now is to fill in the gaps - to track what happens in between all of those resources at the network level. Our main tool to accomplish this will be the Azure Network Watcher service. We will also revisit Azure Log Analytics as it plays a role here too.</p>
<p>Network Watcher is a comprehensive network topology monitoring and analytics solution. It is comprised of several features. A full list is presented here in the slides. I will not dive deeply into every single one so it is a good idea to pause the lesson and read through each description. I will cover three of the more important Network Watcher tools so that you know how to handle basic network level monitoring.</p>
<p>It starts with the Topology app. This gives you a network level view showing the various interconnections between network resources within a given resource group. This will be your go-to tool when you need to get a clear picture of your network infrastructure.</p>
<p>Next up is the Variable Packet Capture tool. This lets you capture packets flowing in and out of virtual machines, much as you might do with tcpdump or wireshark. You can filter the capture tool to set size and time constraints and then store the packets in the Azure blob store or on the VM disk. This is a really useful surgical tool for analyzing very low level network events.</p>
<p>Thirdly there is the Next Hop tool. This is a personal favorite because it can identify unexpected behavior. Basically it just determines the next hop for packets routed in the Azure Network Fabric. It is great for identifying problems with user-defined routes.</p>
<p>There are eight other great tools to look at in Network Watcher. It’s worth giving a quick mention to the NSG Flow Logging, Security Group View, and IP Flow Verify tools, all of which are really great for identifying where exactly packets are permitted to go and not go. Again, be sure to take a deeper look at the documentation to learn about the other Network Watcher tools.</p>
<p>Azure Log Analytics adds a few useful supplemental feature  to your overall network monitoring system. They are activated through the Log Analytics UI and so need to be addressed separately. Most are just additional levels of instrumentation. For example there are the DNS Analytics and Traffic Analytics components. The former is for DNS administrators and aggregates DNS logs. The latter is for aggregating and visualizing public internet traffic against Azure systems.</p>
<p>Two larger pieces of the Log Analytics network monitoring feature set, are the Network Performance Monitor and the Application Gateway analytics solution. We’ll start with the Network Performance Monitor. At a high level, all it is meant to do is track performance between various parts of your infrastructure. The power comes from the versatility and the web interface. Network Performance Monitor can track loss and latency across  various subnets and set alerts. It can track connectivity between user locations, multiple data centers, on-premise locations, and other endpoints, all while visualizing everything in an intuitive UI.</p>
<p>The Application Gateway analytics solution will provide you with an additional level of network logging, specifically firewall logs, performance logs, and access logs for application gateways. It is quick to set up too. Simply enable the Azure Application Gateway analytics solution from Azure Marketplace and then enable diagnostics logging for the desired application gateways.</p>
<p>Whew! So this was pretty thorough. As you can see, Azure gives you A LOT of tools for monitoring your network infrastructure. If you are the type that likes to be able to audit every single packet, then Azure is going to be a lot of fun for you.</p>
<p>Our final priority in this section is going to be security. We have covered in depth how to track everything that happens in our system both in transit and at rest, so now we need to think about how to harden the system from threats. We’ll dive in in the next lesson. See you there space cowboy!</p>
<h1 id="Securing"><a href="#Securing" class="headerlink" title="Securing"></a>Securing</h1><p>Properly securing your cloud infrastructure is a multi-faceted effort. It includes a lot more than just using the tools provided by your hosting solution. It takes employee training, secure coding practices, properly maintained facilities, regular auditing, and a number of other important practices. That said, Microsoft Azure does of good job of simplifying the task of securing its own resources. Thanks to the Azure Security Center service you have one full-featured centralized solution for hardening your entire Azure infrastructure.</p>
<p>Security Center is automatically included with your Azure account at no additional charge. By default it can only be used with your Azure systems. If you upgrade from the free tier to the ‘standard’ tier, you can have Security Center work with non-Azure resources in a sort of hybrid infrastructure model. The upgraded ‘standard’ tier also adds a number of useful features not available to the free tier. These include advanced threat detection systems for Azure systems, customizable alerting, security event collection and search, and a threat intelligence module.</p>
<p>Security Center’s core functionality, available in both the free and standard tiers, is its security policy system. Security policies let you defined the configuration of your workloads such that they satisfy specific company or regulatory security requirements. When you access the Security Center UI you will discover that there are default policies for all Azure subscriptions. These policies include recommendations that can be turned on or off. A good place to start looking is at your computer resources. On the Security Center dashboard, click ‘Overview,’ and then select ‘Computer.’ It will display a color-coded list of recommendations for your entire computer infrastructure.</p>
<p>The security policy and recommendation services are the bulk of what the free tier of Azure Security Center does. It might seem simple, but it is actually quite powerful, particularly if you are <em>only</em> using Azure for your cloud environment. You get tons of free recommendations and a central location for auditing and adjusting security policies to suit company compliance requirements. When combined with all of the other monitoring, event logging, and alerting systems in Azure that we have already covered, you have all the tools you need to maintain a hardened, transparent, self-optimizing infrastructure.</p>
<p>We strongly recommend digging into the Security Center documentation to learn about some of the additional features at the standard tier. In particular VM access management and customizable alert systems can be very helpful for complex cloud systems. One cool thing is you can actually use the standard tier with all of its additional features completely free for 60 days. It’s a great way to see if you actually need any of its advanced capabilities.</p>
<p>So with that, we come to the end of section two. We have thoroughly covered platform monitoring, network monitoring, and security for your Azure systems. Congratulations on making it this far. You’re ready to really do some great operational work for any Azure environment now. Our final section will focus on operation automation. See you there!</p>
<h1 id="Automation-Overview"><a href="#Automation-Overview" class="headerlink" title="Automation Overview"></a>Automation Overview</h1><p>This is a very broad topic that could easily be its own course. For our purposes we will focus on Azure-specific technologies and introduce a few third-party tools that integrate well with the platform.</p>
<p>We will again divide our subject into three parts. We will start by just introducing the relevant automation technologies, namely, Chef, Puppet, PowerShell, Desired State Configuration, Event Grid, and Azure Logic Apps. The next two sections will be about using these technologies to address the challenges mentioned above: Autoscaling, and task automation. By the end of this unit you should have a solid understanding of how to automate operations in Azure.</p>
<p>So without further ado, let’s get started.</p>
<h1 id="Automation-Technologies"><a href="#Automation-Technologies" class="headerlink" title="Automation Technologies"></a>Automation Technologies</h1><p>When it comes to automation with Azure we have a lot of different options. The three basic categories are Azure web console tools, PowerShell scripts with Azure SDK, or a third party tool like Chef. Which approach we take will be a function of our expertise and the nature of the work we want to automate.</p>
<p>We will start by focusing on Azure’s built-in tool set. Azure Automation is comprised of two core pieces: Runbooks and Configurations, both built on top of PowerShell. Before you do anything you will need to set up an Azure Automation  account in the UI. Once done you are ready to start writing PowerShell runbooks and PowerShell Desired State Configurations (DSC). A runbook is a simply a collection of scripts. These scripts use the Azure SDK API to execute changes to your Azure system. It takes some programming knowledge to use it properly. The upside is that Powershell is far more flexible than simply using the web gui.</p>
<p>Desired State Configurations are special methods within PowerShell that let you predefine a configuration state for your servers. For example you can enforce that specific ports are open or that only a specific set of software is installed. DSC greatly simplifies the process of writing scripts by letting you work from the end state. The Azure documentation and console make it very easy for non-programmers to generate and import basic PowerShell DSC scripts in their Azure Automation account. It lets you define a specific end state for your Azure systems and let Azure do the work of getting things there. Be warned that DSC Configurations sometimes do tasks in a manner or order you don’t expect. If you have very delicate requirements regarding how and when things change in your system it may be better to write more explicit PowerShell code instead of relying on DSC.</p>
<p>Azure also has a service for intelligent event routing. It is called Azure Event Grid and it lets you automate responses to relevant events across both Azure and non-Azure services. Event Grid uses a publish-subscribe model and is configurable in the portal or by using Azure CLI or Powershell scripts. To use Event Grid you need to create an event subscription. This is done by selecting ‘Add Event Grid subscription’ to the relevant app in the Azure portal. The Azure documentation includes a number of handy examples of how you can make use of this. In one it shows how you can use Event Grid to automatically resize images uploaded to your Azure storage. It can be done in minutes and save you a great deal of time and money that would be spent on manually fixing images.</p>
<p>Let’s turn our attention to some non-Azure tools. Chef and Puppet are two cloud infrastructure automation tools. Both have open source offerings that have integrations with not only Azure, but other providers like Google Cloud and AWS. Chef and Puppet have different names for their different pieces. For example in Chef, modules are described as ‘cookbooks’ with scripts called ‘recipes.’ In Puppet these things are called ‘manifests’ and ‘modules.’ One thing to note is that both are fairly complex tools. If your automation needs are very simple, then it is likely not a great idea to try to set up Chef or Puppet; better to just stick with Azure’s built-in tools such as PowerShell with DSC or Event Grid.</p>
<p>So we he have discussed Chef, Puppet, Powershell with DSC, Runbooks, and Event Grid. As you can see, we have a lot of options when it comes to automating work in Azure. In our next lesson we will focus in on a specific use case: autoscaling. Let’s get started.</p>
<h1 id="Autoscaling"><a href="#Autoscaling" class="headerlink" title="Autoscaling"></a>Autoscaling</h1><p>Azure has multiple systems for automatically scaling computer resources. Our focus will be on horizontal scaling - namely, adding additional compute resources instead of trying to switch to a larger instance.</p>
<p>The simplest approach with Azure is to use Azure Monitor’s built-in autoscale feature. This lets you automatically scale up and down compute resources based on metrics.</p>
<p>Azure VM’s also have a concept known as ‘Scale Sets.’ A Scale Set is simply a group of VM’s that can be given autoscaling rules. They are similar to AWS autoscale groups and make for a handy way to organize and think about your VM’s in terms of large groups instead of individual machines. Scale Sets can also be configured through Azure Service Fabric. Each node type in a Service Fabric cluster can be a separate VM scale set, thus allowing each node type to scale up or down independently.</p>
<p>Azure autoscaling is also available for the Azure App Service. Autoscaling is actually built right in as an app-level setting. It will allow you to scale based on a designated metric. You select a value and also use a slider to set your maximum and minimum number of instances. Similarly, Azure Cloud Services have a setting for autoscaling. The difference here is that scaling is based on number of cores being used. Depending on your subscription you may have a limit for a maximum number of cores for autoscaling. You can set this up in the portal by clicking on the scale tab in the portal and setting it to ‘automatic.’</p>
<p>Finally, probably the most bleeding-edge approach to autoscaling, would be to cut out VM’s and containers entirely and just use Azure Functions. If you can adopt a serverless paradigm wherein your app logic is defined using Azure Functions, then you won’t need to think about autoscaling at all. The Azure platform automatically allocates computer resources as necessary to any code running as an Azure Function in your account.</p>
<p>We won’t focus much on non-Azure autoscaling systems. I’ll instead just take a quick second to remind you that such systems exist. Kubernetes, for example, has support for horizontal scaling of ‘pods’ based on metrics. You can also integrate your configuration management tools like Chef with your monitoring to create autoscaling logic.</p>
<p>So now that we have a good understanding of what autoscaling looks like in Azure, it is time to broaden our automation scope. In the next lesson we will discuss how to automate arbitrary tasks in Azure using a variety of different approaches. See you there.</p>
<h1 id="Task-Automation"><a href="#Task-Automation" class="headerlink" title="Task Automation"></a>Task Automation</h1><p>Azure is very flexible when it comes to arbitrary task automation. In this short lesson we will introduce a few common maintenance tasks and explain how we can fully automate the work using different tools.</p>
<p>As we have seen in earlier lessons, Azure integrates well with management tools such as Chef and Puppet. If, for example, you are already very comfortable with Chef, then it trivial to automate any task defined in your Chef code on subsets of your servers. There is an easy to use cron Chef cookbook that lets you define cronjobs. One common use-case is to automate the chef-client run itself to run every few minutes. This ensures that configuration changes are automatically propagated quickly.</p>
<p>Another common need is automated resource deletion and re-creation. For example a business may want to save money by not running Azure VM’s during non-work hours. Automating this safely requires ensuring you have a reliable way of preserving the environment’s state and then recreating and deleting resources easily. This is do-able using Chef and Puppet if you have your infrastructure well-defined in your config management code. A perhaps easier approach, however, is to use a runbook with a Powershell Workflow.</p>
<p>As mentioned in the previous lesson, runbooks are just collections of Powershell scripts. An Azure Powershell Workflow uses runbooks to execute a series of tasks. Workflows add a number of useful features to your Runbooks. For one, they can be scheduled, and they can include automated failure recovery and retry logic. Workflows can help automate many simple maintenance tasks. For example, you can create workflows that save your environment state every day at 8 pm and then delete unneeded resources. Then you can have another workflow that executes a runbook to recreate everything the next day at 8 am. This would cut your Azure hourly costs in half.</p>
<p>You might need several different scripts to do all of the work of snapshotting your environment, deleting everything safely, and then recreating everything in the right order with proper tests to ensure environment health. You could combine the scripts into multiple runbooks and multiple workflows.</p>
<p>Powershell workflows are great for people comfortable writing scripts. For people that prefer to focus on GUI tools, Azure has its Logic Apps system. Azure Logic Apps let you automate and schedule workflows. Logic Apps are similar to Powershell scripts in that they can include conditional statements, switches, loops, and branches. All of this is definable in the GUI, so if you have ever done any coding using a GUI you will have a sense of what to expect.  You can define a logic app in the Azure portal. You will have to define a resource group to let the logic app know what Azure components it will access, and then you define a schedule trigger, which lets you set the exact time interval for when to execute the app.</p>
<p>So that’s basically all you need to know about task automation in Azure. You have your third party services like Chef and Puppet. These integrate well so if you’re familiar with them you can continue to lean on them with Azure. If you prefer writing scripts perhaps because you like checking them into version control and being more transparent, Powershell works great with Azure runbooks and workflows. If you are not as confident about writing scripts, you’ve got Azure Logic Apps, and that will let you automate pretty much anything involving Azure resources.</p>
<p>So keep those core three approaches in mind and congrats on making it through this final section of the course. We will finish up with a final course summary in the next lesson. See you there.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Congratulations on completing the Microsoft Azure Design for Operations course. For a relatively short course there is a lot of material crammed in here, and you made it through, so kudos. We covered a lot of ground.</p>
<p>We started by talking about application monitoring and alerting. We learned how to thoroughly instrument applications using Azure Application Insights and we learned how to aggregate log data using Azure Log Analytics. We explored the numerous features in the Azure Monitor system.</p>
<p>We then learned all about how to monitor the Azure platform itself. We went over how to use Azure Status and Azure Health to quickly assess the state of both our own Azure resources and the wider Azure platform. We learned about how to optimize our resource usage with Azure Advisor. We covered how to use the Activity Log for forensic investigations and resource tracking. We also covered the Azure Network Watcher service and Azure Security Center to handle network and platform security respectively.</p>
<p>Finally we did a deep dive on Azure automation. We learned how to autoscale resources using Azure Autoscale, and we learned how to automate various tasks by using Powershell and Runbooks. We also reviewed configuration management technologies like Chef and Puppet to see how they integrate with our Azure systems.</p>
<p>By combining all of this knowledge we have a skill set for thoroughly modernizing our cloud infrastructure. We can instrument, monitor, configure, automate, and secure our Azure systems as well as a professional DevOps engineer. That’s pretty darn cool for a class like this. Of course remember that practice makes perfect. We have described a lot of technology in this course. It is up to you to actually play around with things in Azure and develop some intuition.</p>
<p>Now that you are done I’d like to invite you to send any feedback you have about the course to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. We greatly appreciate your comments, questions, and suggestions. Congratulations again on fighting through the whole course and good luck in your future endeavors.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Getting-Started-with-Azure-Container-Instances-12</title>
    <url>/2022/11/14/AZ-204-Getting-Started-with-Azure-Container-Instances-12/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Designing-for-Azure-Identity-Management-28</title>
    <url>/2022/11/14/AZ-204-Designing-for-Azure-Identity-Management-28/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Welcome to Designing for Azure Identity Management. My name is Thomas Mitchell and I’ll be taking you through this course on the key technologies to consider when designing an identity management solution. I’m an Azure Content Author at Cloud Academy and I have over 25 years of deep IT experience, several of those with cloud technologies. If you have any questions, feel free to connect with me on LinkedIn, or send an email to <a href="mailto:&#115;&#117;&#112;&#112;&#x6f;&#x72;&#x74;&#64;&#99;&#x6c;&#x6f;&#117;&#x64;&#97;&#x63;&#x61;&#100;&#x65;&#x6d;&#121;&#46;&#x63;&#x6f;&#109;">&#115;&#117;&#112;&#112;&#x6f;&#x72;&#x74;&#64;&#99;&#x6c;&#x6f;&#117;&#x64;&#97;&#x63;&#x61;&#100;&#x65;&#x6d;&#121;&#46;&#x63;&#x6f;&#109;</a>. This course is intended for IT professionals who are interested in earning Azure certification, those who wish to become Azure architects, and those who are tasked with designing an Azure identity management solution. To get the most from this course, you should have at least a moderate understanding of Microsoft Azure, and of identity management concepts. We’ll kick off the course by discussing <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a> and what it offers. We will then talk a bit about hybrid identities and what purpose they serve. Next, we’ll cover Azure AD Domain Services and how to deploy this feature. </p>
<p>After covering Azure AD Domain Services, we’ll get into <a href="https://cloudacademy.com/course/designing-azure-identity-management/single-sign-on-overview/">single sign-on</a>, and how to configure it for a web application. Azure MFA or multi-factor authentication is another cool feature that we will discuss. We’ll cover what it is, what it offers, and how to enable it. After covering MFA, we will get into Azure AD B2B and Azure AD B2C. These are Azure AD Business to Business and Azure AD Business to Consumer. You will learn what they are, what they offer, and how to deploy them. We’ll then move into Privileged Identity Management, otherwise known as PIM. Rounding out the course are topics on <a href="https://cloudacademy.com/course/designing-azure-identity-management/self-service-password-reset/">self-service password reset</a>, self-service group management, and <a href="https://cloudacademy.com/course/designing-azure-identity-management/overview-of-managed-identities-for-azure-resources/">managed identities for Azure resources</a>. There are demonstrations sprinkled throughout the course. These demos will show you how to deploy and use the technologies covered. By the end of this course, you should have a good understanding of all key technologies and features as they relate to designing for Azure identity management. You should also be able to deploy each feature with an understanding of what it offers and how it fits into any identity management solution. We’d love to get your feedback on this course, so please give it a rating when you’re finished. If you’re ready to learn about Designing for Azure Identity Management, let’s get started.</p>
<h1 id="Introduction-to-Azure-AD"><a href="#Introduction-to-Azure-AD" class="headerlink" title="Introduction to Azure AD"></a>Introduction to Azure AD</h1><p>Microsoft’s Azure Active Directory is a cloud-based identity and access management service. With it, users can sign in and access external resources such as Office 365, the Azure portal, and other software as a service applications. Azure AD, of course, also allows users to access internal resources as well. Such resources include applications inside the corporate network and on the internet along with cloud applications that have been developed and deployed by your organization. Azure AD is used to control access to applications and resources according to business requirements. For example, Azure AD can be configured to require multi-factor authentication or MFA when a user needs access to important company resources. In addition, Azure AD can be used to automate user provisioning between an existing on-prem Windows server AD and corporate cloud applications like Office 365. With Azure AD, organizations have access to tools that can used to automatically help protect user identities and credentials which allows them to meet access governance requirements. Microsoft Online services like Office 365 and Microsoft Azure leverage Azure AD for sign-in and for identity protection. As such, an organization that subscribes to any of the Microsoft Online business services automatically gets at least the free version of Azure AD along with those services. </p>
<p>Adding paid services to a tenant can enhance an Azure AD implementation. Such paid services include Azure Active Directory Basic, Azure Active Directory Premium 1, and Azure Active Directory Premium 2. These Azure AD paid licenses ride on top of an existing free directory, and they can provide additional services such as self-service, security reporting, enhanced monitoring, and secure access for mobile users. One thing to note, however, is that while all of these added features can add cool functionality and security, Azure Active Directory Basic, Azure Active Directory Premium 1, and Azure Active Directory Premium 2 are not currently supported in China. The free version of Azure Active Directory offers basic user and group management functionality and on-prem directory synchronization. It also offers basic reporting and single sign-on or SSO across Office 365, Microsoft Azure, and many popular SaaS applications. In addition to the free features available in the Azure AD Free version, Azure AD Basic provides cloud-centric application access as well as group-based access management. Other features included with the Basic version include self-service password reset for cloud apps and Azure AD Application Proxy which is a feature that allows you to publish on-prem web applications using Azure AD. Azure Active Directory Premium P1 offers quite a bit more than either Free or Basic. In addition to what those versions offer, Azure AD Premium P1 offers hybrid users access to both on-prem and cloud resources. Premium P1 also supports advanced administration tasks like self-service group management, dynamic groups, and it even integrates with Microsoft Identity Manager or MIM. Microsoft Identity Manager is an advanced, on-prem identity and access management solution. </p>
<p>Azure AD Premium P1 also offers cloud write-back capabilities which are used to allow self-service password reset for your on-prem users. Azure Active Directory Premium P2 builds upon what is offered in the P1 edition by offering everything included in the Free, Basic, and P1 versions plus Azure Active Directory Identity Protection which helps provide risk-based conditional access to applications and critical company data. Azure AD Premium P2 also offers Privileged Identity Management or PIM which is useful for discovering, restricting, and monitoring administrators as well as their access to corporate resources. Privileged Identity Management also provides just-in-time access when it’s needed, meaning access to resources can be limited to only those times when it’s required and then be taken away automatically when the access is no longer needed. Other pay-as-you-go feature licenses such as Azure AD Business-to-Consumer are also available to assist with <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">identity management</a>. Azure AD B2C as it’s called helps provide identity and access management solutions for customer-facing applications.</p>
<h1 id="Create-Directory-and-Add-Custom-Domain"><a href="#Create-Directory-and-Add-Custom-Domain" class="headerlink" title="Create Directory and Add Custom Domain"></a>Create Directory and Add Custom Domain</h1><p>To create a new directory and add a custom domain for it, log into the Azure portal. While in the portal, open <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a> and click on the create a directory link. Provide an Organization name along with the domain to use for the directory. Select a country or region and then click create. Once the directory has been provisioned, click the link to manage the new directory and sign in if required to do so. From within Azure Active Directory click custom domain names and then add your custom domain name. Provide and internet routable custom domain name and then click add domain. </p>
<p>At this point you’re provided with the option to verify the domain via either a text record or an MX record. My preference is to typically use the text record. Copy the record value and then visit your domain’s DNS management console. Create a text record and supply the value that you were provided. Save your new text record and switch back over to Azure. Click the verify button to verify the domain using the DNS record that you’ve just created. After verifying the domain, set its primary. And then click yes to confirm.</p>
<h1 id="Azure-AD-Domain-Services-Overview"><a href="#Azure-AD-Domain-Services-Overview" class="headerlink" title="Azure AD Domain Services Overview"></a>Azure AD Domain Services Overview</h1><p>Azure AD Domain Services is a Microsoft cloud-based offering that provides managed domain services, such as domain join, group policy, LDAP, and Kerberos and NTLM authentication. The domain services provided are fully compatible with traditional on-prem Active Directory and they can be deployed without any need for deployment or management of domain controllers in the cloud. Azure AD Domain Services integrates with the existing <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a> tenant and makes it possible for users to log in with their corporate credentials. Existing user accounts and groups can be leveraged to secure access to resources. As such, this offers a smoother transition of on-prem resources to Microsoft Azure. Companies leveraging a hybrid IT infrastructure will typically synchronize their <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">identity</a> information from their on-prem directories to the Azure AD tenant. As more of their on-prem applications are migrated to Azure, Azure AD Domain Services can become more useful. An important caveat to consider when deciding if Azure AD Domain services are the right solution is that password sync is mandatory for a hybrid organization to use Azure AD Domain Services. </p>
<p>This is required because users’ credentials are needed for authentication via NTLM and Kerberos in the managed domain that is provided by Azure AD Domain Services. When considering Azure AD Domain Services, keep in mind that the managed domain is actually a stand-alone domain. It is not, and I repeat, it is not an extension of the on-prem AD domain. This is a common misconception among IT professionals. Also, because the domain is managed, the IT administrator does not need to, nor can he, manage, patch, or monitor the domain controllers for the managed domain. Likewise, there is no need to manage or even monitor AD replication within the managed domain. Quite frankly, there really isn’t much for the administrator to do in the managed domain, especially since the administrator doesn’t even have Domain Admin or Enterprise Admin privileges on the managed domain.</p>
<h1 id="Deploy-Azure-AD-Domain-Services"><a href="#Deploy-Azure-AD-Domain-Services" class="headerlink" title="Deploy Azure AD Domain Services"></a>Deploy Azure AD Domain Services</h1><p>To deploy <a href="https://cloudacademy.com/course/designing-azure-identity-management/azure-ad-domain-services-overview/">Azure AD Domain Services</a> log into the Azure portal. Once in the portal click on Create a Resource and then search for Domain Services. Select Azure AD Domain Services from the search results and then click Create. Provide the basic information for the domain, including the DNS name for the domain as well as the Subscription you are deploying to, along with a Resource group. You’ll also need to supply a Location. Click Okay to move onto the next step. At this point you’re prompted to create a Virtual network for the managed domain that you are setting up. Provide a name for the network along with an address space that works for your environment. You will also need to define a Subnet and a Subnet address range that you’d like to use for the managed domain. </p>
<p>The managed domain controllers and associated infrastructure that gets deployed by <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">Azure</a> as part of the Manage Domain setup will reside on this network and on this subnet. Click Okay and then Okay again. Next you are advised that the AAD DC Administrators group has been created. This group is used to manage the domain. It’s similar to but not quite like Domain Admins in an On-Prem Active Directory Domain. Click on the group to add members to it. When you’re done adding members that need to manage the domain go back and click Okay. This synchronization step has nothing to do with Azure AD Connect or with On-Prem AD if one exists. Instead, this synchronization step is meant to sync users and groups from Azure AD into Domain Services. You have a choice of syncing all users or scoping the sync to just certain groups. In this demonstration I’m just going to sync all users and groups from Azure AD to Domain Services. Clicking Okay takes you to the next step where you can review your options. Click Okay to commence the deployment of Azure AD Domain Services. </p>
<p>The actual deployment can take the better part of an hour because it’s deploying lots of stuff in the background. It’s deploying the network infrastructure that you’ve defined as well as two managed domain controllers. It’s also setting up the managed domain itself. After enabling Azure Active Directory Domain Services you need to enable computers within the Virtual Network to connect to and consume these services. To do so you need to update the DNS Server Settings for your Virtual Network so that it points to the two IP addresses where Azure Active Directory Domain Services are available. To update the DNS Server settings for the Virtual Network hosting your Azure Active Directory Domain Services browse to the Azure portal and open up your instance of Azure AD Domain Services. The Overview tab will list a set of required configuration steps. One of those is to update the DNS Server settings for the Virtual Network. You will be presented with two different IP addresses. These are the IP addresses where Azure AD Domain Services is available. These are essentially the managed domain controllers that were stood up as part of the deployment of Azure AD Domain Services. After making a note of these IP addresses, click the Configure button and update the DNS Server settings for the Virtual Network. With Azure AD Domain Services provisioned and your DNS updated you can now move on and enable password hash synchronization using Azure AD Connect.</p>
<h1 id="A-Word-About-Personas"><a href="#A-Word-About-Personas" class="headerlink" title="A Word About Personas"></a>A Word About Personas</h1><p>Personas can be an important tool that drives adoption and business value realization. What happens quite often is that organizations deploy technology solutions without a full understanding of the users that those solutions are intended for. When this happens, the deployed solutions do not get used, and the value of those solutions goes unrealized.</p>
<p>If an organization deploys an Azure solution, but nobody uses it, the organization doesn’t realize the value – and it becomes a waste. In order to generate value from an Azure solution, an organization must determine what users should START doing or STOP doing, in order to realize the value of the solution.</p>
<p>Essentially, its user behavior change that becomes the yardstick for evaluation, adoption, and use of solutions deployed in Azure. Personas can be useful when trying to drive adoption of new Azure solutions.</p>
<p>A persona is really just a fictitious character that represents a certain user type. Personas refer to the “who” when discussing an organization. The use of personas helps organizations characterize different sets of users, and to capture details about what a typical day looks like to those users. Personas can be used to capture the pains, needs, and desired outcomes that users have as they perform their daily tasks. </p>
<p>To build personas that reflect the workforce, organizations need to communicate with end users. Organizations need to know how work currently gets done in order to deploy Azure solutions that help users get that work done. Defining personas for each user type can help organizations accomplish this. More specifically, from an Azure perspective, an organization can build personas to assist with the creation of roles. By defining different personas, the organization has better visibility into what roles are necessary – and if custom roles are needed.</p>
<p>As a result, organizations can realize more value when deploying Azure solutions, because the solutions that are deployed can then be tailored to the users for whom the solutions are intended. Management of those solutions can be streamlined via built-roles that match the defined personas, or via custom roles, when the built-in roles are not sufficient.</p>
<h1 id="Hybrid-Identities"><a href="#Hybrid-Identities" class="headerlink" title="Hybrid Identities"></a>Hybrid Identities</h1><p>As the move to the cloud gathers steam, corporations are finding themselves supporting a mixture of on-prem and cloud applications. Users obviously are finding themselves requiring access to those applications as well. This, of course, becomes a challenge to implement. The <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">identity</a> solutions we previously discussed are solutions that span on-prem and cloud-based capabilities. Leveraging these solutions allows an organization to create a common user identity for authentication and authorization to all resources, regardless of whether they are on-prem or in the cloud. This concept is called hybrid identity. Achieving hybrid identity requires the development of one of three authentication methods. The authentication method that is deployed is dependent on the specific scenario being addressed. The three authentication methods include Password Hash Synchronization, Pass-Through Authentication, and Federation. Password Hash Synchronization is also referred to as PHS, while Pass-Through Authentication is referred to as PTA. Federation is referred to as, well, Federation. Password hash synchronization is a sign-in method used as part of a hybrid identity solution. This is accomplished with Azure AD Connect by synchronizing a hash, of the hash, of a user’s on-prem AD password to a cloud-based <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a> instance. This feature is useful for signing in to Azure AD services like Office 365 with the same password as an on-prem AD account, which reduces end-user impact. The password hash synchronization strategy reduces, to just one, the number of passwords that an organization’s users need to maintain. As such, password hash synchronization can improve user productivity and reduce helpdesk costs. Password hash synchronization, which is the most common hybrid identity solution, requires an organization to install Azure AD Connect. </p>
<p>Once Azure AD Connect is installed, directory synchronization between the on-prem Active Directory instance and the Azure Active Directory instance is configured. As part of the synchronization configuration, password hash synchronization is enabled. Azure AD Pass-through Authentication, or PTA, much like Password Hash Synchronization, allows users to sign in to both on-prem and cloud-based apps with the same password. And much like password hash synchronization, this option offers a better end user experience. However, pass-through authentication validates user passwords directly against the on-prem Active Directory, instead of using a synced password hash. A key benefit of pass-through authentication over password hash synchronization is that it affords organizations the ability to enforce their on-prem AD security and password policies, since pass-through authentication is actually leveraging the on-prem credentials. By combining Pass-through Authentication with Seamless Single Sign-On, organizations can allow users to access applications on corporate machines inside the network without the need to type in their passwords again. Azure AD Pass-through Authentication provides an improved end-user experience because it offers end users the ability to complete self-service password management tasks in the cloud. Deployment and administration are easy because Pass-Through Authentication only requires a lightweight agent to be installed on-prem. Since the agent automatically receives updates, there is no management overhead. Pass-Through Authentication offers improved security over Password Hash Synchronization because on-prem passwords are never stored in the cloud. </p>
<p>Because it works with Azure AD Conditional Access policies, including MFA, Pass-Through Authentication offers additional account protection. Another benefit of Pass-Through Authentication is the fact that the agent only makes outbound connections from the network, removing all requirements for a DMZ as part of a solution. Communication between the on-prem agent and Azure AD is secured via cert-based authentication, which adds another layer of security. Further, the certificates that are used are automatically renewed every few months by Azure AD, removing the requirement to manually maintain them. In addition to high security, Azure AD Pass-Through Authentication offers high availability by allowing the installation of additional agents on multiple on-prem servers. Federation is a bit different from the other two solutions. It is a collection of domains with an established trust, which typically includes authentication, and almost always includes authorization. In a common configuration, a federation might include multiple organizations that have established trust for shared access to a specific set of resources. Federating an on-prem environment with Azure AD allows and organization to use the federation for authentication and authorization. Federation ensures that all user authentication happens on-prem and it provides administrators with the ability to implement more rigorous levels of access control. Federation with ADFS and PingFederate is available. To protect against a failure of the ADFS infrastructure when using federation with ADFS, organizations can set up password hash synchronization, or PHS, as a backup. Doing so allows authentication to continue, despite an ADFS infrastructure failure. All three of these authentication methods including PHS, PTA, and Federation provide single-sign on capabilities, which automatically signs users in when they are on their corporate devices inside the corporate network.</p>
<h1 id="DEMO-Managing-Users-Groups-and-Devices-in-Azure-AD"><a href="#DEMO-Managing-Users-Groups-and-Devices-in-Azure-AD" class="headerlink" title="DEMO: Managing Users, Groups, and Devices in Azure AD"></a>DEMO: Managing Users, Groups, and Devices in Azure AD</h1><p>Hello and welcome back! In this brief demonstration, I just wanted to walk you through the process of managing users and groups within Azure Active Directory. Now on the screen here, you can see I’m logged into my Azure Portal for the directory called Test9878.org. This is the custom domain I’m using for my Azure AD here.</p>
<p>Now to get to this screen from Azure, what I’ll do here is I’ll bounce back out to my homepage and here’s the homepage. To get into Azure AD, I can simply select Azure Active Directory from the top here, or I can go to the hamburger and select Azure Active Directory.</p>
<p>So from this overview page, I can browse to lots of different pieces of Azure AD. Under the manage section is where I’ll manage my users and groups along with devices, app registrations, all of this fun stuff where you’ll do your day to day management of your Azure Active Directory. Down the bottom is where you’ll perform your monitoring. And then down at the very bottom, you’ll do your troubleshooting and support.</p>
<p>So from this page, let’s go ahead and create a user in Azure Active Directory. And to do that, it’s pretty straight forward. We simply select users here. And from this screen, we can see all of the existing users in our AD.</p>
<p>We can see, we have two accounts here. One is an admin in the actual Azure Active Directory as shown here under source. The ThomasMitchell.net account is actually an external Azure Active Directory account from another directory.</p>
<p>What we’re going to do here is create a new user and we’ll just call this Dave. And in this dropdown we can select the actual domain name we want to use, we’re using the custom domain, so we’ll leave it at Test9878.org and we’ll give our username. And then we have the option to auto-generate a password or create one, we’ll leave the auto-generate here. And this will show us what the password is.</p>
<p>We can then provide that password to the new user. I would not send this out via any kind of electronic methods when possible. That’s obviously a security risk. As we create our user, we can then select a group to add our user to. So we’ll go ahead and make him a user within our box users group.</p>
<p>This is actually a group I created earlier for some other demonstration. So we’ll go ahead and we’ll select him. So now what we’re doing here is creating our <a href="mailto:&#x44;&#97;&#x76;&#x65;&#64;&#84;&#x65;&#115;&#116;&#57;&#x38;&#55;&#56;&#46;&#111;&#x72;&#x67;">&#x44;&#97;&#x76;&#x65;&#64;&#84;&#x65;&#115;&#116;&#57;&#x38;&#55;&#56;&#46;&#111;&#x72;&#x67;</a>, we’re auto generating a password and we’re placing this new user in the box users group.</p>
<p>The block sign in is pretty self explanatory. We can either block sign in by selecting yes or allow sign-ins by leaving the no option selected here. And then we have some additional info we can add. We can add a job title in a department.</p>
<p>We can also specify the usage location. So we’ll go ahead and we’ll select United States down here. And we’ll go ahead and create the user. And at this point, we now have a new user in our directory. If we select our user from our list, we can then look at the user’s profile, which includes his identity, his job information, any kind of special settings, contact info. This is where we manage this information as far as the profile goes.</p>
<p>We can then go into assigned roles where we can actually look at any roles that have been assigned to this user. And we can add assignments. You can see all of the different directory roles here that are included by default.</p>
<p>Now we can also see, we can assign custom roles, but if you look at the little icon up here, it tells us that if we want to assign custom roles to a user, the organization needs Azure AD Premium P1 or P2. I’m using the free Azure edition right now. But if he wanted to make, you know, Dave an application administrator, we simply check the box and add the role. And now we can see under assigned roles for Dave, we have application administrator, and of course the description tells us what an application administrator can do.</p>
<p>If we want to remove this assignment for this user, we select the assignment and remove it. Now, if we go back out to our directory, let’s take a look at groups and how we can manage groups here. By selecting groups, we can look at what groups are currently defined within our Azure AD.</p>
<p>If we want to create a new group, we simply select a new group and we can choose whether it’s a security group or an office 365 group. We’ll leave this at security and we’ll just call this marketing. And we’ll give it a description. We can see, we currently have no owners or members defined for this group.</p>
<p>So we’ll go ahead and select an owner. We’ll just make myself an owner here. And then we’ll add a new member. Let’s go ahead and add Dave. And then we create it. So now we have a new group called marketing. It’s a security group and the membership type here is assigned, which means we’re going to manually add and remove users from this group. So we’ll go ahead and select marketing here. And from here, we can look at the different properties of this group.</p>
<p>We can see when it was created, the membership type, whether it’s a cloud sourced group and what type of group it is. We can see the different direct members and any kind of group memberships. We look at properties here. We can see here, we have the name and we can actually change it here. And the description, and then members and owners will tell us who the members are and who the owners are.</p>
<p>If we select group memberships here, we can see that the marketing group is not a member of any other groups. So this is where you could see group nesting. Now in this applications area, we can see what applications are assigned to our group. So if we have a group of users that needs access to a specific application, we can create that group, assign the application to that group, and then add users to that group.</p>
<p>Any users that get added to that group are the ones that will get access to the application. Same thing with licensing. We can assign licenses to specific groups. So whatever users get added to that group also get those licenses. And same thing for Azure roleassignments.</p>
<p>So that’s the quick and dirty on how to create users and groups and how to manage them through the Azure Portal for Azure Active Directory. And before we run away here, let’s just take a look at devices.</p>
<p>Now, this devices page is where you manage any devices that are joined to your Azure AD. We can see here, I have a workstation that has been joined. And if I select that workstation, I can take a look at its device ID, its object ID, and all kinds of information about this specific device. I can then even disable the device so it’s no longer able to access Azure AD. We’re not going to do that here, but we will bounce back to our directory.</p>
<p>Now from this Azure Active Directory overview page, you can also manage password resets, manage Azure AD connect. You can take a look at the provisioning status. You can manage your custom domain names, even managed company branding. So there’s a lot you can do from your Azure Active Directory page here. And this is where all of your management will happen.</p>
<p>All of your users, all of your groups, all of your devices, all of your branding, all of your domains, all this stuff is done right here from this Azure Active Directory page. So I really recommend that you go in and you play around in here and kind of learn what you can do and do some experimentation because you really want to try to get some stick time to get a real good understanding of all of the different features in Azure Active Directory.</p>
<h1 id="Deploy-Azure-AD-Connect"><a href="#Deploy-Azure-AD-Connect" class="headerlink" title="Deploy Azure AD Connect"></a>Deploy Azure AD Connect</h1><p>In this demonstration, we’re going to deploy Azure AD Connect so we can sync our on-prem active directory users to <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a>. We are also going to need to ensure that we synchronize NTLM and Kerberos credential hashes to Azure AD, since this isn’t done by default. To get started, login to the server that will run Azure AD Connect and download the Azure AD Connect software. Launch the Azure AD Connect installer that you downloaded. Because our lab environment in a single forest with an internet routable domain name, we can use the express option. </p>
<p>When prompted, we’ll connect to Azure AD by providing our global admin <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">credentials</a>. And then, we can then connect to the on-prem AD by providing an enterprise admin credential. Clicking install begins the setup of Azure AD Connect. When the installation completes, click Exit. Because Azure AD Connect does not by default synchronize NTLM and Kerberos credential hashes to Azure AD, we must ensure that these hashes get synchronized if we want to use Azure AD Domain Services. To enable synchronization of the required credential hashes from your on-premises directory to the Azure AD tenant, run the script that you see on your screen:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$adConnector = &quot;&lt;CASE SENSITIVE AD DS CONNECTOR NAME&gt;&quot;</span><br><span class="line">$azureadConnector = &quot;&lt;CASE SENSITIVE AZURE AD CONNECTOR NAME&gt;&quot;</span><br><span class="line">Import-Module -Name &quot;C:\Program Files\Microsoft Azure AD Sync\Bin\ADSync&quot;</span><br><span class="line">$c = Get-ADSyncConnector -Name $adConnector</span><br><span class="line">$p = New-Object Microsoft.IdentityManagement.PowerShell.ObjectModel.ConfigurationParameter &quot;Microsoft.Synchronize.ForceFullPasswordSync&quot;, String, ConnectorGlobal, $null, $null, $null</span><br><span class="line">$p.Value = 1</span><br><span class="line">$c.GlobalParameters.Remove($p.Name)</span><br><span class="line">$c.GlobalParameters.Add($p)</span><br><span class="line">$c = Add-ADSyncConnector -Connector $c</span><br><span class="line">Set-ADSyncAADPasswordSyncConfiguration -SourceConnector $adConnector -TargetConnector $azureadConnector -Enable $false</span><br><span class="line">Set-ADSyncAADPasswordSyncConfiguration -SourceConnector $adConnector -TargetConnector $azureadConnector -Enable $true</span><br></pre></td></tr></table></figure>

<p>What this script will do is enable all on-premises users’ NTLM and Kerberos password hashes to be synchronized to the Azure AD tenant. This script will also initiate a full synchronization in Azure AD Connect. </p>
<p>The values for $adconnector and $azureadconnector variables can be found in the Azure AD Connect synchronization service manager. What I’ve done is create a PowerShell script called NTLMSync.ps1. This script includes all of these commands. I just need to open PowerShell on the Azure AD Connect server to run the script. The output tells me that the password hash sync configuration has been updated.</p>
<h1 id="Azure-Role-Based-Access-Control"><a href="#Azure-Role-Based-Access-Control" class="headerlink" title="Azure Role-Based Access Control"></a>Azure Role-Based Access Control</h1><p>Hello and welcome back. A tool that goes hand-in-hand with Azure active directory is Azure role-based access control, or RBAC. Azure RBAC is used to manage who has access to what resources and to manage what those users can do with those resources. It’s an authorization system that is built upon Azure resource manager, and it offers fine-grained access management to your Azure resources.</p>
<p>Azure RBAC relies on role assignments for access control. Each role assignment consists of three parts, a security principal, a role definition, and a scope.</p>
<p>The Security principal is essentially an object that represents either a user, a group, a service principal, or a managed identity that requires access to resources in Microsoft Azure. </p>
<p>The role definition is essentially a collection of permissions. Role definitions are usually referred to simply as roles. A specific role will list the operations that can be performed by someone with that role. These operations include things like read, write, and delete.</p>
<p>Although there are many built-in roles in Azure that you can use, there are four fundamental roles available. These fundamental roles include owner, contributor, reader, and user access administrator. A person assigned the owner role has full access to all resources, including the rights to delegate access to others. A person assigned the contributor role can create and manage all kinds of Azure resources. However, a contributor cannot grant access to those resources to other users. The reader role allows you to view existing Azure resources, while the user access administrator role allows you to manage user access to your Azure resources.</p>
<p>In addition to the built-in roles you can also create custom roles. This allows you to tailor access to your resources in a way that best suits your organization.</p>
<p>A scope is a set of resources that the access you are setting up applies to. For example, you may provide access to a scope that includes a subscription or maybe a resource group or even a specific resource. A scope in Microsoft Azure can be specified at the management group level, the subscription level, the resource group level, or to specific resources. Because scopes are structured in parent-child relationship, access that is granted at the parent scope level will be inherited by the child scopes.</p>
<p>The process that Azure RBAC uses to determine if a user has access to a specific resource is pretty straightforward. First, the user requesting the access acquires a token from Azure resource manager. This token includes any group memberships for the user. </p>
<p>Next, the user makes a rest API call to Azure resource manager with the attached token.</p>
<p>What Azure resource manager will do next is retrieve all the role assignments and deny assignments for the resource that the user is trying to access. Azure resource manager will then narrow those role assignments down to only those that apply to the user or to groups that the user is a member of. It will also determine which roles have been assigned to the user for the resource being accessed.</p>
<p>Next, Azure resource manager will determine whether or not the requested action in the API call is allowed by the role that the user has for the specific resource being accessed.</p>
<p>Assuming the user is assigned a role that allows the action being requested at the requested scope, access is granted. Otherwise, access is blocked.</p>
<p>Azure RBAC is free and is included with all Azure subscriptions.</p>
<p>To learn more about Azure RBAC, visit the <a href="https://docs.microsoft.com/azure/role-based-access-control/overview">URL</a> that you see on your screen.</p>
<h1 id="Single-Sign-On-Overview"><a href="#Single-Sign-On-Overview" class="headerlink" title="Single Sign-On Overview"></a>Single Sign-On Overview</h1><p>Unless an organization deploys a single sign-on solution, its users will be required to remember multiple usernames and passwords, one for each different application in use. Additionally, the IT department needs to maintain all of these different accounts and passwords manually. Single sign-on allows users to sign in once with one account in order to access domain-joined devices, corporate resources, SAS applications, and even web apps. After signing in, users can then launch apps right from the O365 portal or via the MyApps access panel. With single sign-on, IT administrators can centralize user account management, allowing them to automatically add or remove user access to applications based on group membership. In this lecture, we are going to discuss the various single sign-on options that are available when designing an <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">identity management</a> solution that incorporates single sign-on. </p>
<p>Choosing a single sign-on solution for an application will largely depend on how the application is configured for authentication. Of all the single sign-on methods we are about to discuss, disabled is the only one that does not automatically sign users into applications without requiring a second sign-on to occur. When deciding on a single sign-on solution, it’s important to know that cloud apps can use SAML, password-based, linked, and disabled methods for single sign-on. Of the bunch, SAML is the most secure method. On-prem apps, when configured for Application Proxy, can use password-based, Integrated Windows Authentication, or IAW, header-based, linked, or the disabled methods for single sign-on. The table that you see on your screen provides a summary of the single sign-on methods that are available. Use SAML for single sign-on whenever possible. </p>
<p>This method works when applications are configured to use a SAML protocol. Use password-based single sign-on when an application authenticates with a username and password. Using password-based single sign-on offers secure application password storage and replay via a web browser extension or via mobile application. Password-based single sign-on uses the existing sign-in process that’s provided by the application while allowing an administrator to manage the passwords for it. The linked single sign-on method is useful when an application is configured for SSO in another identity provider service. This SSO option doesn’t add single sign-on to the application. Use disabled single sign-on when an application isn’t ready for single sign-on. Users of the application will need to provide their username and password each time they launch the application.</p>
<p> Use IWA SSO for applications that use Integrated Windows Authentication or for claims-aware applications. When using this method for SSO, Application Proxy connectors use Kerberos Constrained Delegation to authenticate users to the application. Header-based single sign-on should be used when an application uses headers for authentication. It should be noted that header-based single sign-on requires PingAccess for Azure AD. When using header-based SSO, Application Proxy uses <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a> to authenticate the user and then passes traffic through the connector service.</p>
<h1 id="Enable-Single-Sign-On-for-Dropbox"><a href="#Enable-Single-Sign-On-for-Dropbox" class="headerlink" title="Enable Single Sign-On for Dropbox"></a>Enable Single Sign-On for Dropbox</h1><p>In this demonstration, we’re going to walk through the process of <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">enabling</a> single sign-on for an application. We’re going to enable single sign-on for Steven Davis so that he can access his Dropbox for Business account. To configure single sign-on for Dropbox, browse to <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a>. From here, click on Enterprise applications, and then click New application. Find the Dropbox application in the gallery, and then select the application and click Add. After adding the application to Azure, click Single sign-on located under Manage. Select SAML to open the SAML configuration screen. Retrieve the sign on URL from the application vendor and provide that URL in the Sign on URL field for the application in Azure. Provide an identifier value. In this case, we’ll just use the word Dropbox. And then next, download the SAML signing certificate from Azure. This certificate needs to be provided to the application vendor. After downloading the certificate, switch over to the application vendor’s configuration dashboard and provide the certificate you downloaded. </p>
<p>The type of certificate you download will be largely dependent on the application itself so you’ll need to refer to the vendor’s documentation for setting up single sign-on. Retrieve the login URL for the application from Azure and provide it to the application. Save the application configuration, and then after the configuration is complete in both Azure and the app vendor’s portal, you can go ahead and test the login. To test single sign-on, assign a user to the application in Azure by clicking Users and groups within the application’s Azure dashboard. Find a user and then click Assign. Ensure that there is a user account for the assigned user also configured in the application itself. Next, open an incognito window and launch the application panel and login as the user to whom the application was assigned. Launch the application from the application panel and confirm that single sign-on works.</p>
<h1 id="MFA-Overview"><a href="#MFA-Overview" class="headerlink" title="MFA Overview"></a>MFA Overview</h1><p>Two-step verification provides a layered approach to security. Even the most enterprising attacker would have problems compromising multiple authentication factors, because, even if the attacker obtains a user’s password, the password would be useless without also being in possession of the additional authentication method, a mobile phone, for example. Multi-factor authentication works by requiring two or more authentication methods, which typically include something like a password that the user knows, something the user owns, typically a mobile phone, and something the user is, biometrics, for example. Azure MFA offers the ability to safeguard access to apps and data while maintaining a simple end-user experience. By providing additional security via a second form of authentication, MFA provides much sought after security for end-user authentication, and it does so via a range of easy to use authentication methods, including passwords, security questions, email address, application, OATH hardware token, SMS, voice call, and app passwords. Multi-Factor Authentication comes as part of <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a> Premium.</p>
<p> A subset of MFA capabilities is also available as part of an Office 365 subscription and as a means to protect Global Administrator accounts. As part of Azure AD Premium, Azure MFA is offered in two flavors, including the Azure Multi-Factor Authentication Service, which is cloud-based, and the Azure MFA Server option, which is a good option for organizations who have deployed ADFS and that want to or need to <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">manage</a> MFA on-prem. Because most users are used to using only passwords to authenticate to applications and services, it’s critical that an organization communicate with the user base when rolling out an MFA solution. Doing so will invariably reduce the number of helpdesk calls that come in during any MFA rollout. Now, despite the best laid plans and deployments, there will be times when you may need to disable MFA in a one-off scenario. For example, if a user can’t sign in because he has lost access to his authentication methods, a lost phone, for example, in such a case, you could use a conditional access policy for Azure MFA. </p>
<p>With a conditional access policy in place, you can create a user group that is excluded from the policy that requires MFA. Placing the user in the excluded group would temporarily allow access until MFA functionality or access can be restored. A way to temporarily bypass MFA for Azure MFA Server users is to allow them to authenticate without two-step verification. Such a bypass can be configured but it expires after a specified number of seconds. Two-step verification prompts can be minimized for users that are on the local network. This can be accomplished with trusted IPs or named locations. By leveraging this features, an administrator for a managed or federated tenant can bypass two-step verification for users that are signing in from a trusted network location.</p>
<h1 id="Enable-MFA-for-O365-User"><a href="#Enable-MFA-for-O365-User" class="headerlink" title="Enable MFA for O365 User"></a>Enable MFA for O365 User</h1><p>In this demonstration, we’re going to enable <a href="https://cloudacademy.com/course/designing-azure-identity-management/mfa-overview/">Multi-Factor Authentication</a> for an Office 365 user, so you can see how the process works and have a <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">log in</a> process works once it’s been enabled. To enable Multi-Factor Authentication for an Office 365 user, open the Office 365 admin portal as a global administrator. Click on Users, and then Active Users. Find the user in the list for whom you wish to enable MFA and double click that entry. On the user’s property page, down at the bottom, click “manage multi-factor authentication”. Select the user in the multi-factor authentication screen and click Enable. Confirm that you want to enable multi-factor authentication by clicking the enable multi-factor auth button, and then close the box out. You’ll notice that the multi-factor auth status now shows enabled for this particular user. Open an incognito browser window and launch the Office 365 portal. Login as the user for whom you just enabled MFA. If you’ve configured MFA properly, the user, Steve in this case, will be prompted for more information before being allowed to login. Continue the login process by providing the information requested. Be sure to save the application password, so that it can be used for other applications if necessary, and then go ahead and click Done. After providing the MFA info, you’re prompted to log back in. Log back in, and be sure to supply the proper MFA info. As you can see on your screen, MFA is now working for Steve.</p>
<h1 id="Azure-AD-B2B"><a href="#Azure-AD-B2B" class="headerlink" title="Azure AD B2B"></a>Azure AD B2B</h1><p>Azure Active Directory Business-to-Business collaboration, also known as Azure AD B2B, allows an organization to securely share company applications and company services with guest users from other organizations while retaining control over company data. With Azure AD B2B, an organization can work with external partners, even if they don’t use Azure AD. The invitation and redemption process of Azure AD B2B allows users in a partner organization to use their own credentials to access a company’s resources. Because the partner organization uses its own <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">identity management</a> solution, external administrative overhead for the sharing organization is essentially non-existent. There’s no requirement to manage external accounts or passwords, nor is there a need to synchronize accounts or manage account lifecycles. When guest users are invited to access resources in a partner organization, they sign into the shared applications and services with their own identities. Guest users without a Microsoft account or Azure AD account have one created for them when they redeem their invitations. Inviting a guest user to access an app or service, using AD B2B, is as simple as sending an invite to the guest user, using the guest user’s email address.</p>
<p>The guest user then follows a few easy redemption steps to sign in. Azure AD B2B offers the ability to use authorization policies to protect corporate content. Conditional access policies like <a href="https://cloudacademy.com/course/designing-azure-identity-management/mfa-overview/">MFA</a> can be used to protect corporate applications and data. Such policies can be enforced at the tenant level, the application level, and even for specific guest users. With Azure AD B2B, administrators can add guest users to the organization right from the Azure portal. When the administrator creates the new guest user, which is done in a similar fashion to adding a new internal user, the guest user receives an invitation that allows him to sign into the Access Panel for that user. Guest users can be assigned to apps and even groups. By delegating guest user management to application owners, you can reduce the workload of the Azure administrators in your organization. Delegating user management allows application owners to add guest users to any application that they want. By delegating guest user management to application owners, you can reduce the workload of the Azure administrators in your organization. Delegating user management allows application owners to add guest users to any application that they want to share, even if it’s not a Microsoft application. To make this work, an administrator needs to set up self-service app and group management. Once this has been configured, non-admins can use their Access Panel to add guest users to applications or to groups.</p>
<h1 id="Add-Guest-Users-to-the-Directory"><a href="#Add-Guest-Users-to-the-Directory" class="headerlink" title="Add Guest Users to the Directory"></a>Add Guest Users to the Directory</h1><p>In this demonstration, we’re going to add a guest user to our Azure AD. To add a guest user, <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">log in</a> to the Azure portal and browse to <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a>. Click users and then click new guest user. Provide the new guest users email address and then click Invite. The user you’ve invited receives an invite email. Upon clicking the get started button in the invite email, the guest user is prompted to accept the invite. After accepting the invite, the guest user is taken to the applications pane, where he will be able to access applications that ultimately get assigned to him.</p>
<h1 id="Azure-AD-B2C"><a href="#Azure-AD-B2C" class="headerlink" title="Azure AD B2C"></a>Azure AD B2C</h1><p>Azure Active Directory Business-to-Consumer, also known as Azure AD B2C, is an <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">identity management</a> service that offers organizations the ability to customize and control how customers interact with corporate applications. It allows organizations to control how users sign up, sign in, and how they manage their profiles when using the applications. Azure AD Business-to-Consumer enables this functionality while also protecting customer identities. Applications registered with Azure AD B2C can be configured to handle many identity management tasks. </p>
<p>For example, you can allow users to sign up to use a registered application, you can enable a signed-up user to edit his profile, and you can even enable <a href="https://cloudacademy.com/course/designing-azure-identity-management/mfa-overview/">MFA</a> in the application. Other identity management tasks that can be handled include allowing users to sign up and sign in with specific identity providers, such as Facebook, for example. You can even customize the look and feel of the signup experience for users, as well as the sign-in experience. Azure AD B2C completes identity tasks by interacting in sequence with identity providers, also known as IdPs. It also interacts with users, other systems, and with the local directory. The Identity Experience Framework establishes multi-party trust and completes these steps. Along with a Trust Framework policy, this framework defines the actors, actions, protocols, and sequence of steps that need to be completed in order to make things work. Azure AD B2C makes use of SYN cookies and rate and connection limits to protect against denial-of-service and password attacks against applications. It also includes mitigation for brute-force password attacks, as well as dictionary password attacks. </p>
<p>A service that authenticates customer identities and issues security tokens is called an identity provider. Azure AD B2C offers the ability to configure several different identity providers in the tenant. Common identity providers include Microsoft accounts, Facebook, and even Amazon. Before configuring an identity provider in an Azure AD B2C tenant, the application identifier, client identifier, password secret, and client secret, or a combination of each, depending on the identity provider itself, must be recorded from the identity provider application that is created. This identifier information is then used to configure the application that will be accessed via the identity provider being configured. Every Azure AD B2C tenant is distinct and separate from other Azure AD B2C tenants. To leverage the features of AD B2C, you must deploy a B2C tenant, and link it to your Azure subscription. If you wish to allow users to sign in to an application using Facebook, Amazon, or some other identity provider, you must first register the application in the Azure AD B2C tenant.</p>
<h1 id="Create-a-Link-and-Azure-AD-B2C-Tenant"><a href="#Create-a-Link-and-Azure-AD-B2C-Tenant" class="headerlink" title="Create a Link and Azure AD B2C Tenant"></a>Create a Link and Azure AD B2C Tenant</h1><p>In this demonstration, we are going to create a new <a href="https://cloudacademy.com/course/designing-azure-identity-management/azure-ad-b2c/">Azure B2C</a> tenant and then, we’re going to link the new B2C tenant to our <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">Azure subscription</a>. To get started, login to the Azure portal and make sure you’re in the directory that contains the Azure subscription. We only have one subscription here, so we’re good on that front. Click create a resource and then search for Azure Active Directory B2C. Click on Azure Active Directory B2C in the search results and then click create. Choose the option to create a new Azure AD B2C tenant. Provide an organization name and a domain name. Select a region and then click create. After creating the Azure AD B2C tenant, you now have to link it to your Azure subscription. While, again, ensuring you’re in the directory that contains your Azure subscription, create a new resource and search for Azure AD B2C, just as you did the first time. Click on Azure SD B2C in the results and click create. This time, however, choose the second option to link an existing Azure AD B2C tenant. In the Azure AD B2C tenant dropdown, choose the B2C tenant that you created earlier. Leave the subscription where it’s at and then select a resource group. Click create to complete the linking process. When the process completes, click Go to resource to manage the newly created B2C tenant.</p>
<h1 id="Privileged-Identity-Management"><a href="#Privileged-Identity-Management" class="headerlink" title="Privileged Identity Management"></a>Privileged Identity Management</h1><p>Azure Active Directory Privileged Identity Management, otherwise known as PIM, is an Azure offering that allows you to manage and control access to resources within <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">Azure</a> and <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a>, as well as within other services, such as Intune and Office 365. A valid Azure AD Premium P2 license is required for all users that will interact with or benefit from Privileged Identity Management before enabling the service on a tenant. Alternatively, you can assign an Enterprise Mobility + Security E5 license for each user that interacts with Privileged Identity Management. Generally speaking, licensing is required for users that are assigned to the Privileged Identity Role Administrator role or who are assigned as eligible to other directory roles that are manageable through Privileged Identity Management. If a user can approve or reject requests in Privileged Identity Management, that user also requires a license. Users assigned to a role with time-based assignments, such as Just in time or Direct, or those assigned to an access review role, also require licensing. With Azure AD Privileged Identity Management, an organization can see which users are assigned privileged roles that are used to manage Azure resources. Organizations can also see which users are assigned administrative roles within Azure Active Directory. </p>
<p>Privileged Identity Management also offers the ability to enable on-demand, or just in time, administrative access to services such as Office 365 and Intune, as well as to Azure subscriptions, resource groups, and even individual Azure resources, like virtual machines and such. Azure AD Privileged Identity Management offers the ability to view a history of administrator activation, along with a history of changes that administrators have made to Azure resources. Alerts can also be configured to notify you about changes in administrator assignments. Privileged Identity Management also allows you to require approval for activation of Azure AD privileged admin roles, to review membership of such administrative roles, and to force users to provide justification for ongoing membership in these roles. In Azure Active Directory, Privileged Identity Management can be used to manage users that are assigned to built-in Azure AD roles, such as Global Admin. In Azure itself, Privileged Identity Management can manage users and groups assigned via Azure RBAC roles, such as the Owner and Contributor roles.</p>
<h1 id="Enable-PIM-and-Manage-Subscriptions"><a href="#Enable-PIM-and-Manage-Subscriptions" class="headerlink" title="Enable PIM and Manage Subscriptions"></a>Enable PIM and Manage Subscriptions</h1><p>In this demonstration, we’re going to enable <a href="https://cloudacademy.com/course/designing-azure-identity-management/privileged-identity-management/">Privileged Identity Management</a>, and we’re going to set up a subscription to be managed by Privileged Identity Management. To enable Privileged Identity Management or PIM for short, Login to the <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">Azure</a> portal, and then click on All services and search for privileged identity management. Click on the Azure AD privileged identity management in the search results. Next, click on “consent to PIM” and then verify your identity when prompted to do so. Provide the additional security verification info that is requested and then click Next. Click Verify to verify your information. At this point you’re taken back to the PIM consent screen. To complete the consent process, click the “consent” link and then click Yes to confirm. With PIM enabled, you can now sign up for PIM for Azure AD role management. To do so, click on Azure AD roles, under Manage. Click sign up for PIM in the left pane and then click the sign-up link at the top. When prompted to confirm, click Yes. After setting up PIM to manage AD roles, you need to discover resources in the subscription, so they, too, can be managed with PIM as well. To do this, go back to the quick start page and click Azure Resources. In this demo, here, we’re going to manage all resources in the subscription. Click Discover Resources and then select the subscription. Click Manage Resource to onboard the resource for management, and then click Yes to confirm. At this point, you’ve deployed PIM and configured Azure AD roles and Azure resources to be managed by it.</p>
<h1 id="Self-Service-Password-Reset"><a href="#Self-Service-Password-Reset" class="headerlink" title="Self-Service Password Reset"></a>Self-Service Password Reset</h1><p>Self-service password, or SSPR, is pretty self-explanatory. This feature allows end users to reset forgotten passwords without the need for a call to the help desk. It’s a feature that many organizations request, as it helps provide a more streamlined and pleasant end-user experience. Depending on the SSPR functionality that is required, license requirements may vary. For example, Self-Service Password Change functionality for cloud users is included in all editions of <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a>. In these cases, we are talking about cloud-only users who wish to change their passwords to something new. Self-Service Password Reset functionality for cloud users is only included in Azure AD Basic and higher. It’s not offered in the free version of Azure AD. This functionality applies to cloud-only users who wish to reset their passwords to something they know. Self-Service Password Reset, Password Change, and Password Unlock, leveraging on-premises write-back, requires either Azure AD Premium P1 or Premium P2. This functionality applies to hybrid users that are synced to Azure AD from an on-prem AD. So, when considering Self-Service Password Reset, it’s important to understand the user base and how users are <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">managed</a> and provisioned.</p>
<h1 id="Configure-Self-Service-Password-Reset"><a href="#Configure-Self-Service-Password-Reset" class="headerlink" title="Configure Self-Service Password Reset"></a>Configure Self-Service Password Reset</h1><p>Enabling <a href="https://cloudacademy.com/course/designing-azure-identity-management/self-service-password-reset/">self-service password</a> for end users take a huge burden off of the shoulders of the help desk. In this demonstration, we will enable self-service password reset, and test that it’s working with a test account. Before enabling self-service password reset, make sure that password writeback is turned on in Azure AD Connect. To do this, launch Azure AD Connect on the server running it. Click configure and then view the current configuration. If its disabled, relaunch Azure AD Connect, click configure, and then select customize synchronization options. Provide the global admin account to connect to Azure AD. Click next to leave the directories and domain and ou filtering options unchanged. Under optional features, check the password writeback box and click Next. Click Configure to update the configuration and then click Exit. After turning on password writeback, switch over to the Azure portal and then browse to Azure active directory. From here, click Password Reset. For this demonstration, I’m going to enable password reset for all of my users so I’m going to click All, and then save. After enabling password reset, click on Authentication methods and select the authentication methods you wish to make available, along with how many are required to set a password. </p>
<p>This is obviously going to be different for every environment. If you select the security questions option, you’ll be presented with more info to supply. We aren’t using security questions here, so I’ll turn this off. For this demonstration, I’m going to make mobile phone available as the only option. After clicking Save, I’m going to click on registration. I’m asked if I want to require users to register when <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">signing in</a>. I’m going to leave the default value set to yes. I’m also going to leave the window set to the default of 180 days. Clicking notifications allows me to set the notification options for when a user resets a password. I’m going to set both options here to yes. this ensures users receive a notification when they reset their passwords, but it also ensures that all administrators are notified when another administrator resets his password. In the customization pane, I can provide a customized helpdesk link for users to visit if they need assistance. I don’t have helpdesk here in the lab, so I’m going to leave this off for this demonstration. When I click on the on-premises integration link, Azure confirms that the on-prem writeback client is running and allows me to determine if I want passwords to writeback to on-prem AD. I need to leave this set to yes. The second option designates whether or not users should be given the option to unlock their accounts without resetting their passwords. </p>
<p>I’m going to leave this set to no for this demonstration. With password reset enabled, we can now test it. To test self-service password reset, open an incognito browser window and launch the single sign on setup process with a test account. In my case here, we previously enabled <a href="https://cloudacademy.com/course/designing-azure-identity-management/mfa-overview/">MFA</a> so let me get through the authentication process here first. As you can see here, I’m prompted to to work through the process of setting up self service password reset for my account. Once I’ve completed the self service password reset setup, I’m presented with my application dashboard. To reset my password, I need to open the password reset URL in my browser. The password reset URL is <a href="https://aka.ms/sspr">https://aka.ms/sspr</a>. On the next screen, I’m prompted to begin the reset process. I just have to provide my user ID and I need to complete the captcha. Clicking Next takes me to the verification screen, where I can request a code via mobile phone. After I click the Text button, I receive a code on my phone that I need to enter. After providing my verification code and clicking Next, I’m then prompted to create a new password. Clicking Finish completes the process.</p>
<h1 id="Self-Service-Group-Management"><a href="#Self-Service-Group-Management" class="headerlink" title="Self-Service Group Management"></a>Self-Service Group Management</h1><p>To further improve the end user experience, <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure AD</a> offers the ability for users to create and <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">manage</a> their own security groups and Office 365 groups. In addition, users can also request security group memberships as well as Office 365 group memberships. In such cases, the owner of these groups can approve or deny their membership requests. By delegating group membership control, organizations can ensure that the people who best understand the business context for such memberships are the ones controlling group membership. It’s important to note, however, that this feature applies only to security groups and Office 365 groups. It does not apply to mail-enabled security groups nor does it apply to distribution lists. There are essentially two flavors of self-service group management currently available. These include delegated group management and self-service group management. An example of delegated group management would be a scenario where an organization uses a SaaS application, whose access is managed by an administrator. As the company grows, access management becomes a bit cumbersome for the administrator to handle. To ease the burden of granting access and revoking access to the application, the administrator requests that the application owner create a new group. </p>
<p>After the group has been created, the administrator assigns access to the application for the new group. He also adds all users who need access to the application to this group. Because the application owner created the group, he has he ability to add and remove users from it. Users added to the group are automatically granted access to the application, while users that are removed from the group have their access to the application revoked when the leave the group. By delegating group membership management to the application owner, the application owner no longer needs to wait on the administrator to provide and revoke access to the application. Of course, however, the administrator would still be able to see who has access to the application, and he could block access as necessary. A self-service group management example would be a scenario where an app owner manages an application. In order to grant a group of business users access to the application, the app owner creates a group in Azure AD, grants the group access to the application, and then enables self-service group management on the group. When a user in the organization needs access to the application, the user simply requests access to it from the Access Panel. When the request is approved, the user receives access to the application.</p>
<h1 id="Demo-Self-Service-Group-Management"><a href="#Demo-Self-Service-Group-Management" class="headerlink" title="Demo: Self-Service Group Management"></a>Demo: Self-Service Group Management</h1><p>In this demonstration we are going to enable <a href="https://cloudacademy.com/course/designing-azure-identity-management/self-service-group-management/">Self Service group management</a>, by allowing users to create their own security groups and to <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">manage</a> them. To enable Self Service group management, sign into the Azure portal and browse to Azure Active Directory. You’ll need to do this with a Global Admin account for the directory. From here select groups, and then go into the general settings for groups. Set the option for owners can manage group membership requests to yes. And then set the option for users can create security groups to yes as well. With these settings enabled users in the directory are allowed to create new security groups and to add members to those groups. These new groups will also show up in the access panel for all other users. In addition, if the policy settings on the group allow it, other users can create requests to join these groups as well.</p>
<h1 id="Overview-of-Managed-Identities-for-Azure-Resources"><a href="#Overview-of-Managed-Identities-for-Azure-Resources" class="headerlink" title="Overview of Managed Identities for Azure Resources"></a>Overview of Managed Identities for Azure Resources</h1><p><a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">Managed Identities</a> for Azure Resources is a feature of <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a>. There are several Azure services that support Managed Identities for Azure Resources. For those who build cloud applications, management of credentials within a code for authenticating to cloud services is often a common challenge. It’s critical to ensure credentials are kept secure. As a matter of fact, preferably, credentials should never appear on a developer’s workstation, nor should credentials ever be checked into source control. With Azure Key Vault, administrators have a way to securely store credentials. However, to be effective, the application code needs to authenticate to Key Vault to retrieve those credentials that are stored. Enter Managed Identities for Azure Resources. Using the Managed Identities for Azure Resources feature in Azure AD solves this problem. This solution provides supported Azure services with an automatically managed identity in Azure AD that can be used to authenticate to any service that supports Azure AD authentication without the need to store any credentials in code. Key Vault is one of the Azure services that is supported. Managed Identities for Azure Resources is a free feature that comes with all Azure AD editions. There are two types of managed identities to choose from. </p>
<p>They include a system-assigned managed identity and a user-assigned managed identity. A system-assigned managed identity is enabled directly on an Azure service instance. Once the identity has been enabled, Azure will create an identity for the instance in the Azure AD tenant that’s trusted by the subscription of the instance. The credentials for the identity are provisioned onto the instance after the identity had been created. System-assigned identities are tied to the Azure service instances that they are enabled on. Deleting an instance with a system-assigned managed identity attached to it will cause Azure to automatically clean up the credentials, along with the identity in Azure AD. A user-assigned managed identity is essentially a standalone Azure resource. Via a creation process, Azure creates the identity in the Azure AD tenant. The subscription in use, in turn, trusts the identity. An identity, once created, can be assigned to one or more Azure service instances. Unlike a system-assigned managed identity, the lifecycle of a user-assigned identity is managed separately from that of the Azure service instance, or instances, to which it’s been assigned. Application code can use managed identities to request access tokens for services that support Azure AD authentication. Azure will handle the rolling of the credentials that are used by the service instance.</p>
<h1 id="Enable-a-Systems-Designed-Management-Identity-on-a-VM"><a href="#Enable-a-Systems-Designed-Management-Identity-on-a-VM" class="headerlink" title="Enable a Systems Designed Management Identity on a VM"></a>Enable a Systems Designed Management Identity on a VM</h1><p>To enable <a href="https://cloudacademy.com/course/designing-azure-identity-management/overview-of-managed-identities-for-azure-resources/">System Assigned Managed Identity</a> on a VM that was originally provisioned without it your account needs at least the Virtual Machine Contributor Role assignment. In the case of our demo here I’m using a global admin so that’s a non-issue. To complete this task sign into the <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">Azure</a> portal, navigate to the Resource Group that contains the VM that you wish to configure. Clock on the desired Virtual Machine and then select Identity. Under System Assigned Status select On and then click Save. Once the System Assigned Managed Identity is enabled the VM will be registered with <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a>. After being registered you can then control its access to other services like Storage Accounts and the like.</p>
<h1 id="DEMO-Azure-AD-Reporting-and-Monitoring"><a href="#DEMO-Azure-AD-Reporting-and-Monitoring" class="headerlink" title="DEMO: Azure AD Reporting and Monitoring"></a>DEMO: Azure AD Reporting and Monitoring</h1><p>Hello and welcome back. In this brief demonstration here, what I wanna do is give you a tour, so to speak, of some of the Azure Active Directory Reporting and Monitoring options that are available.</p>
<p>Now, on the screen here, you can see I’m logged in to my Azure Portal, and I’m at the Overview page for my Azure Active Directory. We are working in the test9878.org directory. Now, the Azure Active Directory Reports that are available provide you with a view of the different activities that are going on in your environment.</p>
<p>You can use reports to determine how applications and services are utilized by your users, and you can detect potential risks that affect the health of your environments. You can use reports to also troubleshoot issues.</p>
<p>With Azure Active Directory Monitoring, you can route your Azure AD activity logs to different endpoints. You can then view this data to see what’s going on within your Active Directory.</p>
<p>Let’s take a look at some audit logs and some sign-in activities. Now, to take a look at the audit log for Azure Active Directory, what you do here is scroll down in the left pane from the Overview page of your directory and you select Audit logs under Monitoring. Now, what this Audit Log Report does is provide you with a record of the different system activities that have occurred.</p>
<p>For example, we can take a look and see who had access to an admin group and who gave them that access. We can also see information regarding password resets and the like. Now, in this dashboard here for our audit logs, we can see a few different activities that have occurred. We’ve seen some Add user activities. We’ve seen some Add member activities. We’ve also seen some activities revolving around roles.</p>
<p>If we select an activity here, so for example, we’ll choose this Add owner to group, what this tells us is what happened, when it happened, and what the status was. It also tells us who performed this action. Selecting the target gives us more information about the activity that occurred. And if we select Modified Properties, we can see what properties were actually modified.</p>
<p>So when you need to look at information for compliance, for example, the Audit logs report would be the report to go to. Now, if we click over to Sign-ins, we can see what was going on regarding sign-ins to our Azure Active Directory. Typically, you’d use the Sign-ins Report to find the sign-in pattern of specific users, or to see how many users have logged in in the last week, or what the sign-in status is.</p>
<p>On the screen here, we can actually see two different sign-ins that occurred. One was interrupted and one was successful. If we select the one here that was interrupted, we can see information about that specific sign-in. We can see when it happened, what happened, what the error code was, and what the failure reason was for the interrupted sign-in. We can see which user generated the alert and even the application where the sign-in occurred.</p>
<p>Along this top tab, we have lots of other different information we can look at. We can look at the location where this occurred. The Device Info. We can see that this failed login occurred on a Windows 10 machine from the Chrome browser. If we look at the Authentication Details, we can see that was a CloudOnlyPassword and that it was false. We can see any Conditional Access information that applied here.</p>
<p>In this case, there were no policies applied. And any Additional Details. Now, to configure monitoring for Azure Active Directory, what you can do is go into Diagnostic settings here below Monitoring, and we can see we have no diagnostic settings configured yet. So what we’ll do is add a diagnostic setting.</p>
<p>So we’ll go ahead and call this MyDiags. Now, what we can do here is we can collect audit logs or sign-in logs. And then when we do that, we can send them to either Log Analytics or to a storage account, or we can stream them to an event hub. For this demonstration here, what we’ll do is we’ll gather our audit logs and send them to a storage account.</p>
<p>Now, if we leave Retention here set to zero, if you look down here, you can see that setting it to zero does not apply a retention policy. This means the data that you collect is retained forever. I’ll just retain this for one day for this demonstration.</p>
<p>Now, when we select our storage account, we need to choose what storage account we want to archive to. So I already have a test9878 storage account here, so that’s what’s selected here. But I could change this to a different storage account if I wanted to. So what we’re doing here is collecting our audit logs with a retention of one day and sending them to our storage account, and then we’ll go ahead and save this.</p>
<p>Now, what we could also do here is instead of sending to a storage account, we can send to Log Analytics. Now, to send to Log Analytics, you’ll need to have a Log Analytics workspace already created. We have a default workspace here. We actually have a couple. So what we’ll do here is we’ll send to Log Analytics, and we’ll save it, and we can see we get the success here.</p>
<p>Now, to take a look at our logs, what we can do is go back out to our directory and then go into Logs here under Monitoring. Now, from the Log Analytics page here, what I can do is run different queries to track down the information I’m looking for as it relates to my Azure Active Directory. So that will call it a wrap.</p>
<p>Just keep in mind that you can run reports to track down specific information that’s reported in the Sign-ins Report and in the Audit logs report. And you can use Monitoring to send your information through logs into the Azure Monitor and&#x2F;or Log Analytics workspace.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>We’ve covered quite a bit of ground in <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction/">this course</a>. With so many terms and features to keep track of, it’s critical to be able to distinguish them from one another and understand what each does. By understanding what each identity management piece does, it becomes far easier to design an identity management solution. With that said, let’s walk through a high-level recap of all of the key players in the identity management space and what each offers. Microsoft’s <a href="https://cloudacademy.com/course/designing-azure-identity-management/introduction-to-azure-ad/">Azure Active Directory</a> is a cloud-based identity and access management service. With it, users can sign in and access external resources, such as Office 365, the Azure portal, and other SaaS applications. Azure AD is used to control access to applications and resources according to business requirements. A hybrid identity is an identity that spans on-prem and cloud-based capabilities. Leveraging hybrid identities allows an organization to create a common user identity for authentication and authorization to all resources, regardless of whether they are on-prem or in the cloud. Azure AD Domain Services is a Microsoft cloud-based offering that provides managed domain services, such as domain join, group policy, LDAP, and Kerberos and NTLM authentication. These services are fully compatible with traditional on-prem Active Directory and they can be deployed without any need for deployment or management of domain controllers in the cloud. <a href="https://cloudacademy.com/course/designing-azure-identity-management/single-sign-on-overview/">Single sign-on</a>, also referred to as SSO, allows users to sign in once with one account in order to access domain-joined devices, corporate resources, software as a service apps, and even web applications. </p>
<p>After signing in, users can then launch apps right from the O365 portal or via the MyApps access panel. With single sign-on, IT administrators can centralize user account management, allowing them to automatically add or remove user access to applications, based on group membership. Also known as MFA, <a href="https://cloudacademy.com/course/designing-azure-identity-management/mfa-overview/">multi-factor authentication</a> works by requiring two or more authentication methods, which typically include something like a password that the user knows, something the user owns, which is typically a mobile phone, and&#x2F;or something the user is, biometrics would be a good example. Azure MFA offers the ability to safeguard access to applications and data while maintaining a simple end-user experience. Azure Active Directory Business-to-Business collaboration, also known as AD B2B, allows an organization to securely share company applications and services with guest users from other organizations, while retaining control over company data. Azure Active Directory Business-to-Consumer, also known as Azure AD B2C, is an identity management service that offers organizations the ability to customize and control how customers interact with corporate applications. It allows organizations to control how users sign up, sign in, and how they manage their profiles when using the applications. Azure AD B2C enables this functionality while also protecting customer identities. Azure Active Directory Privileged Identity Management, also known as PIM, is an Azure offering that allows you to manage and control access to resources within Azure and Azure AD, as well as within other services such as Intune and Office 365. <a href="https://cloudacademy.com/course/designing-azure-identity-management/self-service-password-reset/">Self-Service Password Reset</a>, also known an SSPR, allows end users to reset forgotten passwords without the need for a call to the helpdesk. It’s a feature that many organizations request, as it helps provide a more streamlined and pleasant end-user experience.</p>
<p>Depending on the SSPR functionality that is required, license requirements may vary. Through self-service group membership, Azure AD offers the ability for users to create and manage their own security groups and Office 365 groups. In addition, users can also request security group memberships as well as Office 365 group memberships. In such cases, the owner of such groups can approve or deny their membership. <a href="https://cloudacademy.com/course/designing-azure-identity-management/overview-of-managed-identities-for-azure-resources/">Managed Identities for Azure Resources</a> provides supported Azure services with an automatically managed identity in Azure AD that can be used to authenticate to any service that supports Azure AD authentication without the need to store any credentials in code. Key Vault is one of the Azure services that is supported. Managed Identities for Azure Resources is a free feature that comes with all Azure AD editions. So, like I said, lots of terms. To learn more about each feature, you can, and should, read Microsoft’s published documentation on each. Be sure to also watch for new Microsoft Azure courses on Cloud Academy, because we’re always publishing new ones. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks for watching and happy learning!</p>
<h1 id="10Azure-Role-Based-Access-Control"><a href="#10Azure-Role-Based-Access-Control" class="headerlink" title="10Azure Role-Based Access Control"></a>10<strong>Azure Role-Based Access Control</strong></h1><p><a href="https://docs.microsoft.com/azure/role-based-access-control/overview">Azure RBAC overview</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Introduction-to-Azure-App-Service-4</title>
    <url>/2022/11/14/AZ-204-Introduction-to-Azure-App-Service-4/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Welcome to “Introduction to Azure App Service”. I’m Guy Hummel, and I’m a certified Azure Developer and Solutions Architect.</p>
<p>In this course, I’ll start with an overview of Azure App Service, and then I’ll show you how to create a simple app. Finally, I’ll go over App Service Plans. This course is not intended to explain every aspect of Azure App Service, which is quite a complex product. Instead, it’s intended to help you get started with hosting web apps on Azure. We cover additional aspects of App Service, such as autoscaling, deployment slots, networking, and security, in other courses.</p>
<p>To get the most from this course, you should already have some basic experience using Azure. If you don’t have any experience with Azure, then you can take our “Microsoft Azure Fundamentals” learning path.</p>
<p>We’d love to get your feedback on this course, so please give it a rating when you’re finished. Thanks!</p>
<h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>When you need to host a website on Azure, there are lots of potential choices. If it’s a static website that doesn’t require any interactions with users, then you can just store your website in Azure Storage and serve it from there. If you need to host something more sophisticated, then you could deploy it on an Azure virtual machine that’s running a content management system, such as WordPress. If you’ve built a microservices-based application in Docker containers, then you could run it on Azure Kubernetes Service.</p>
<p>But the most popular way to do it is to use Azure App Service. Why? Well, because App Service tries to make deploying a web application as easy as possible while still providing lots of flexibility and features. It’s considered to be a platform-as-a-service rather than infrastructure-as-a-service because it manages the underlying infrastructure for you. This means you don’t have to worry about things like patching the operating system.</p>
<p>App Service supports a wide variety of programming languages and frameworks, including ASP.NET, ASP.NET Core, Java, Ruby, Node.js, PHP, and Python. Not only do these come preinstalled, but they’re also updated when new patches or releases are available. For most of these frameworks, you can choose whether to run it on Windows or Linux (although that’s not the case with ASP.NET Framework 4.8, which can only run on Windows).</p>
<p>Even if you want to use a different programming language, you can still use App Service if you put your application in a Docker container that has the right dependencies installed in it.</p>
<p>There are other key development and deployment features, too. First, it’s well-integrated with Visual Studio and Visual Studio Code, which are the preferred programming environments for many software developers. It’s also integrated with continuous integration &#x2F; continuous delivery tools, such as Azure DevOps, GitHub, and BitBucket. You can also use App Service to host mobile backends and application programming interfaces.</p>
<p>Aside from the ease of deployment and maintenance, one of the biggest advantages of using App Service is its enterprise-class features. First, there’s high availability. Microsoft guarantees 99.95% uptime in most cases for apps running on this service. Then there’s scalability. You can configure it to automatically add more resources to your application when demand increases.</p>
<p>Of course, security is important, too, so Microsoft provides authentication capabilities if you only want authorized users to be able to access your apps. It also lets you control which IP addresses are allowed or denied access to your site if you want.</p>
<p>There are other features as well, but this should give you a good idea of why App Service is the preferred choice for hosting web apps on Azure.</p>
<h1 id="Creating-a-Simple-App"><a href="#Creating-a-Simple-App" class="headerlink" title="Creating a Simple App"></a>Creating a Simple App</h1><p>Now I’ll show you how easy it is to deploy an application on Azure App Service. In fact, it only takes one command to do it.</p>
<p>There are a few different options for where we could deploy it from. We could use Visual Studio, Visual Studio Code, or the Azure Command-Line Interface. I’m going to use the Azure CLI because it’s possible to use it without having to install anything. Microsoft provides something called the Cloud Shell that brings up a small virtual machine that has the Azure CLI and other tools installed on it.</p>
<p>To open it, you click here in the Azure Portal. If you haven’t used it before, then it’ll ask you for permission to create a storage account that the Cloud Shell VM can use. But I’ve used it before, so it comes right up.</p>
<p>Before we can deploy an app, we need to get one from somewhere. I’m going to use a sample .NET application. To get it, you can type this command.[dotnet new webapp -n MyFirstAzureWebApp -f net6.0 &amp;&amp; cd MyFirstAzureWebApp] To save you some typing, I’ve included this command in the transcript below. This command also moves you into the MyFirstAzureWebApp folder, which is where the app was downloaded.</p>
<p>Now that we have the app, we can deploy it to App Service using this command.[az webapp up –sku F1 –name <app-name>] The “az” means it’s an Azure command. “webapp” is the command for App Service. “up” tells it to create the web app using the code in the current directory. “sku F1” means that we want to use the free tier so we won’t be charged for this service. I’ll explain more about service tiers later. Then we say “–name” and what we want to call the app. I’m calling it “ca” for Cloud Academy”, “webapp”. You’ll have to call it something else because the name has to be unique among all of the App Service names across all Azure customers.</app-name></p>
<p>There are quite a few other options we can add, but we can get away with only including these ones. Some of the other most common options are:</p>
<ul>
<li>–resource-group for the resource group that it will put your App Service instance in</li>
<li>–location to specify the Azure region where your app will be hosted</li>
<li>–plan to specify which App Service Plan to use. I’ll tell you more about this in the next lecture.</li>
<li>–os-type, which can be either Windows or Linux. If you don’t specify one, then it’ll default to “Windows”.</li>
</ul>
<p>Since we didn’t specify any of these options, it’s going to create a new resource group and a new App Service Plan using default names, it will put everything in your default location, and it will use Windows for the operating system.</p>
<p>[Hit Enter]Okay, this is going to take a while, so I’ll fast-forward.</p>
<p>All right, it’s done. You can see the choices it made for the options we left out. For example, here’s what it called the App Service Plan, and here’s what it called the resource group.</p>
<p>Now to bring up the app we just deployed, we can use this link. We can click on it, but notice that it’s going to include the quote at the end, so it’ll give us an error. That’s okay because we can just remove the extra bit at the end.</p>
<p>That’s better. This is a very simple web page because that’s all that’s in the sample app. Now, suppose we wanted to make a change to the app. Normally, you’d probably do that in either Visual Studio or Visual Studio Code, but we can actually do it from Cloud Shell, too.</p>
<p>If you click here, it’ll bring up an editor. First, we’ll go into the MyFirstAzureWebApp folder, and then go into the Pages folder, which is where we’ll find the home page for our app. It’s called Index.cshtml.</p>
<p>Right now, the main text on the home page is just “Welcome”. Let’s change it to “Welcome to Azure”. Now we’ll save it and then close the editor.</p>
<p>Okay, we’re back at the command line. If we hit the up arrow, it’ll bring back our previous command. To update our app, we’ll use the “az webapp up” command again, but this time, we don’t need to specify the sku or the name.[Erase them and hit Enter.] I’ll fast-forward again.</p>
<p>All right, it’s done. Now if we go back to the web page and hit refresh, you’ll see that the message changed to “Welcome to Azure”, so it worked.</p>
<p>And that’s it for creating and updating a simple app.</p>
<h1 id="App-Service-Plans"><a href="#App-Service-Plans" class="headerlink" title="App Service Plans"></a>App Service Plans</h1><p>Although Azure App Service takes care of managing the underlying infrastructure for you, you still need to decide what type of infrastructure it should use. To do that, you need to create an App Service Plan.</p>
<p>The three main settings you have to choose in an App Service Plan are the operating system, the region, and the pricing tier. The operating system can be either Windows or Linux. For the region, you typically choose the one that’s closest to where most of your users are located, such as East US. Bear in mind that you can’t change a service plan’s region. So if you decide to move an app to another region later, you’ll have to make a copy of it and put it in a new App Service Plan.</p>
<p>Those first two settings are usually pretty easy to choose, but the pricing tier is much more complex. This is where you decide what type of compute resources to allocate and what App Service features you want. This table shows a summary of the different tiers, although it doesn’t actually show all of the options and features in each tier. I’ll walk you through some of the highlights.</p>
<p>If you’ll be using this plan for development and testing, then you can probably get away with using a low-powered and inexpensive option. The Free tier is a good choice as long as you only need 60 CPU minutes per day. If you need more CPU time than that, then you’ll have to go with a plan that costs money.</p>
<p>The next step up is the Shared tier, which is also known as the D1 tier. It gives you up to 240 CPU minutes per day. It’s called the Shared tier because you have to share compute resources with other Azure customers. That’s the case with the Free tier as well. Both of these tiers have just one gig of RAM and one gig of storage, so you can’t do too much with them. The Shared tier also allows you to use a custom domain name for your app’s website, which isn’t something you can do with the Free tier.</p>
<p>If you need more resources, then you can go with the Basic tier, which puts your apps on dedicated virtual machines instead of shared VMs. There are several options that vary based on the number of virtual CPU cores and the amount of memory. All of the options come with 10 gig of storage.</p>
<p>The next step up is the Standard tier, but although it has 50 gig of storage instead of 10 gig, the CPU and memory options are exactly the same as the Basic tier. The big difference is that the Standard tier supports autoscaling, which means it can automatically add more virtual machines to handle increased traffic. It lets you use up to 10 VM instances. That’s significantly more than the Basic tier, which has a maximum of 3 VM instances.</p>
<p>The Premium tier has options for more CPU, memory, and storage, and it lets you use up to 30 VM instances in most Azure regions.</p>
<p>The Isolated tier gives you a private, dedicated environment that’s in its own virtual network. While the Standard and Premium tiers allow you to connect your dedicated VMs to a virtual network, the Isolated tier actually puts your VMs in a private virtual network so they’re isolated from other App Service instances. It lets you have up to 100 VM instances.</p>
<p>Regardless of which pricing tier you choose, it’s possible to put multiple apps in your service plan. But all of those apps will share the same compute resources, so if you put too many apps in the same service plan, then you’ll run into performance issues.</p>
<p>One potential way to resolve this problem would be to add more virtual machine instances up to the limit of the number of instances allowed in the pricing tier you’ve chosen. This is known as scaling out. It’s also possible to set up autoscaling, which is such a complex topic that we cover it in a separate course.</p>
<p>If scaling out doesn’t solve the problem, then you can switch your plan to a pricing tier that has more powerful instances and&#x2F;or a higher limit on the number of instances you can have. This is called scaling up, and it’s very easy to do. You can simply select the new pricing tier, and it will only take seconds to go into effect.</p>
<p>And that’s it for App Service Plans.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>All right, let’s do a quick review of what you’ve learned.</p>
<p>Azure App Service tries to make deploying a web application as easy as possible by managing the underlying infrastructure for you.</p>
<p>It supports a wide variety of programming languages and frameworks, including ASP.NET, ASP.NET Core, Java, Ruby, Node.js, PHP, and Python. For most of these frameworks, you can choose whether to run it on Windows or Linux (although that’s not the case with ASP.NET Framework 4.8, which can only run on Windows).</p>
<p>To use a different programming language, put your application in a Docker container that has the right dependencies installed in it.</p>
<p>You can deploy apps to App Service from Visual Studio, Visual Studio Code, or the Azure Command-Line Interface. To do it from the command line, use “az webapp up”.</p>
<p>The three main settings you have to choose in an App Service Plan are the operating system, the region, and the pricing tier.</p>
<p>If you choose the Free tier or the Shared tier, you have to share compute resources with other Azure customers.</p>
<p>If you choose the Basic tier or higher, your apps will be put on dedicated virtual machines instead of on shared VMs.</p>
<p>Autoscaling is supported on the Standard tier and higher.</p>
<p>The Premium tier has options for more CPU, memory, and storage.</p>
<p>The Isolated tier gives you a private, dedicated environment that’s in its own virtual network.</p>
<p>Regardless of which pricing tier you choose, you can put multiple apps in your service plan. But all of those apps will share the same compute resources.</p>
<p>You can scale up the resources in your service plan by switching to a higher pricing tier. You can scale out your service plan’s resources by adding more VMs.</p>
<p>That’s all for now. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Integrating-Redis-Cache-and-CDN-on-Azure-30</title>
    <url>/2022/11/14/AZ-204-Integrating-Redis-Cache-and-CDN-on-Azure-30/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>- [Thomas] Welcome to Integrating Redis Cache and CDN on Azure. My name is Thomas Mitchell and I’ll be taking you through this course on key caching and content delivery concepts. I’m an Azure content author at Cloud Academy and I have over 25 years of deep IT experience, several of those with cloud technologies. If you have any questions, feel free to connect with me on LinkedIn or send an email to <a href="mailto:&#x73;&#117;&#112;&#x70;&#111;&#114;&#116;&#64;&#99;&#x6c;&#x6f;&#x75;&#100;&#x61;&#x63;&#97;&#x64;&#x65;&#x6d;&#x79;&#46;&#x63;&#111;&#109;">&#x73;&#117;&#112;&#x70;&#111;&#114;&#116;&#64;&#99;&#x6c;&#x6f;&#x75;&#100;&#x61;&#x63;&#97;&#x64;&#x65;&#x6d;&#x79;&#46;&#x63;&#111;&#109;</a>. </p>
<p>This course is intended for IT professionals who are interested in earning Azure certification and those who need to incorporate Redis Cache or CDN with their solutions. To get the most from this course, you should have at least a moderate understanding of what caching is and why it’s used. We’ll kick off the course with an overview Redis Cache, and then we’ll create a Redis Cache instance in Azure. With Redis Cache deployed in Azure, we’ll then connect an application to the cache. Next, we’ll walk through the process of storing and retrieving data in Redis Cache. After covering Redis Cache, we’ll walk through an overview of what CDN is and what it’s used for. We’ll then develop some code for leveraging CDN. As we wrap up the course, we’ll cover the process for invalidating date in both Redis Cache and in a CDN. </p>
<p>By the end of this course, you should have a good understanding of what Redis Cache and what CDN are and what purposes they serve. You’ll also know how to connect to each from applications and how to purge or invalidate data in both. We’d love to get your feedback on this course, so please give it a rating when you’re finished. </p>
<p>If you’re ready to start learning about integrating Redis Cache and CDN on Azure, let’s get started!</p>
<h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>- [Instructor] Azure Cache for Redis is usually used to improve performance and scalability of systems and applications that rely on back end data-stores. Leveraging Redis cache improves performance by temporarily copying frequently accessed data to fast storage that’s located close to the application that’s being run. Azure Cache for Redis provides the storage and memory instead of loading data from disc via a database. </p>
<p>In addition to providing caching services, Azure Cache for Redis can also be used for other purposes. For example, it can be used as an in-memory data structure store or even a distributed non-relational database. By taking advantage of the Redis engines high throughput and low latency, application performance is improved. </p>
<p>Leveraging Azure Cache for Redis provides organizations with access to a cache that’s managed by Microsoft. Because it’s hosted in Azure, Azure Cache for Redis is accessible to all applications, whether they reside within Azure or outside of it. </p>
<p>There are several typical patterns where Azure Cache for Redis comes in handy for supporting application architecture or to improve application performance. </p>
<p>Common patterns include things such as cache-aside, content caching, user session caching, job and message queuing and distributed transactions. </p>
<p>Because databases can be quite large, they should never be loaded in their entirety into a cache. That said, a common strategy would be to use the cache-aside pattern to load data items into the cache only as needed. When the back end data is updated by the system, the cache can also be updated. Such updates are then distributed with other clients. Through expiration settings or by using an eviction policy, the system can cause data updates to be reloaded into the cache. </p>
<p>Because most web pages are generated from templates that contain static headers, footers, toolbars, et cetera, they don’t change all that often, as such, generating them dynamically isn’t recommended. By using an in-memory cache like Azure Cache for Redis, you can speed up access to web content by providing your web servers with quicker access to this type of static content when compared to back end data-stores. The content caching pattern reduces processing time and server load that would otherwise be necessary to generate content dynamically. What this does, is allow web servers to be more responsive. As such, this results in the ability to actually reduce the number of servers that are needed to handle similar loads. Azure Cache for Redis provides the Redis output cache provider to help support this pattern with asp.net. </p>
<p>User session caching is typically used with shopping carts. It’s also used in other applications that deal with user-history types of information that make use of cookies. Because storing too much in a cookie can negatively affect performance, you can instead use the cookie as a key to query the data that’s stored in a back end database. Using Azure Cache for Redis to associate information with a user is far faster than interacting with a full relational database. </p>
<p>Any time an application receives a request, there’s a chance that the operations that are associated with that request, might take additional time to execute. A common way to deal with these types of longer running operations is to add them to a queue, which is then processed later and maybe even by a different server altogether. This type of deferment strategy is called task queuing and Azure Cache for Redis serves this purpose well by acting as a distributed queue. </p>
<p>An application will often need to be able to execute multiple commands against a back end data-store in a single operation. If all commands don’t succeed, then they must all be rolled back to the initial state. </p>
<p>Azure Cache for Redis provides support for executing a batch of commands in a single operation. It does so in the form of transactions. Azure Cache for Redis is available in three different tiers. These tiers include basic, standard and premium. The basic tier offers a single node cache. It supports multiple memory sizes from 250 megabytes all the way up to 53 gigabytes. </p>
<p>The basic tier is a good fit for development environments, testing and non-critical workloads. It’s important to note that the basic tier offers no service-level agreement. The standard tier offers a replicated cache in a two-node, or primary, secondary configuration that’s managed by Microsoft. </p>
<p>The standard tier offers a high-availability SLA of 99.99% or four nines. </p>
<p>The premium tier is enterprise ready. Caches in the premium tier offer more features, higher throughputs, and lower latencies than standard or basic. Premier tier caches are deployed on more powerful hardware than the other tiers, which in turn obviously offers better performance than basic or standard. </p>
<p>It’s important to note that a cache can be scaled to a higher tier after it’s already been created, but it can’t be scaled down to a lower tier. So with that in mind, when you’re deploying a cache make sure that you don’t over-provision, because if you do, you may find yourself in a spot where you can’t go backwards. It’s always better to slightly under-provision and then scale higher if necessary.</p>
<h1 id="Create-a-Redis-Cache-Instance"><a href="#Create-a-Redis-Cache-Instance" class="headerlink" title="Create a Redis Cache Instance"></a>Create a Redis Cache Instance</h1><p>- [Instructor] In this demonstration, we’re going to create an Azure Cache for Redis on Azure. To do so, I’ve logged in to my Azure portal, as you can see on your screen. </p>
<p>To create our Azure Cache for Redis, I browse over to the left pane and click Create a resource. From here, I can browse to Databases, and then, in the list of featured services, I can scroll down to Redis Cache and select it. I need to provide a globally unique name for my Redis Cache. Now, basically, what that means is the name that I give my cache needs to be unique across the entire Azure landscape. So, I’ll call it myredis9878. The green check box tells me that my name is valid. Then, of course, I need to select a subscription, so I’ll select the Microsoft Azure Sponsorship subscription that I have, and then, I need to specify a resource group. </p>
<p>I don’t have an existing resource group, so I’ll create a new one. And I’ll just call it Redis and okay it. I typically deploy my resources in the east region, so I’ll go East US, and for this demonstration, I’m going to select the basic pricing tier. </p>
<p>Now, if I click on View full pricing details, I can see all of the different options that are available to me for my Redis Cache pricing. If we scroll back up here, we can see Premium. We scroll down, we see the standard. And then, at the bottom, we can see our basic tiers. I’m using the C0 Basic tier. You can see further down here that some features or options, I should say, are not available because I’m not using a premium tier. </p>
<p>So, now, what I’ll do is I’ll create my cache, and this can sometimes take a few minutes to complete. We can see up here we get the Deployment in progress status. And what I’ll do is I’ll switch over to my resource group here, and if I select my cache here, we can see that the status is creating. This status will change to running once it’s completed. </p>
<p>We’ll refresh it here. And we can see it’s still creating. And while we’re waiting for this to create, what I’m going to do is switch over to my dashboard and create a new one for my Redis Cache lab here. And then, I’ll switch back to my resource group, and then, I’ll pin my Redis to my dashboard here. And if we select my cache, we can see it’s still creating. And let’s give it one more refresh. </p>
<p>So, we can see now that our cache is in the running state. So, in the next demonstration, we’re going to retrieve our access keys and connect a Python app to our cache.</p>
<h1 id="Installing-Redis-PY"><a href="#Installing-Redis-PY" class="headerlink" title="Installing Redis PY"></a>Installing Redis PY</h1><p>- [Narrator] In this lesson, we’re going to create a Python application and connect it to our Redis cache. However, before doing so we need to install redis-py, which is a Python interface to the Azure cache for Redis. I’m goin to install redis-py through Microsoft Visual Studio, which you see on your screen. To perform the installation I simply click on tools and then Python. From here I go to Python Environments. In my packages search I can search for Redis. In my list of commands that are returned I can see install redis here installs redis-py. So we’ll go ahead and click this command, and we need to run it in an elevated prompt, so we’ll go ahead and elevate it, and you can see on the bottom here that it was successfully installed. In the next demonstration we will test the read and write access to our cache from Python.</p>
<h1 id="Test-Read-and-Write"><a href="#Test-Read-and-Write" class="headerlink" title="Test Read and Write"></a>Test Read and Write</h1><p>- [Instructor] What we are going to do in this demonstration is connect to our Redis cache via Python through an interactive window in Microsoft Visual Studio. Once we connect to our cache, we are going to use the set command to store some data in the cache and then use the get command to pull that data out and display it. It’s a basic demonstration, but it shows how to connect to the ready cache and how to store and retrieve data. </p>
<p>Before connection to our cache, we need to import the readis-py package. And what I am going to do is copy and paste some of these commands and explain them as we go. </p>
<p>So on the screen we have my Python interactive window open and what I am going to do is paste in this import command and essentially what this does is pull in that ready cache package, so we can use it to connect to our ready cache. We’ll hit enter here, doesn’t give us any feed back, but it doesn’t give us an error either. So we know we are good. </p>
<p>And what we are going to do here is connect to our cache. So this is the connection string we are going to use to connect to our cache. We are storing this in a variable. You can see here that we have to specify the complete host name for our cache. And this is our host name that we give it when we deployed it earlier on. We need to specify the port we are going to connect over. And sixty-three eighty, by the way, is the default port number. The Db equals zero command here tells us that we are connecting to the zero data base. Remember, there are sixteen databases that comprise the data cache. So we are just specifying which database we are working with. The password here that we are specifying is actually the access key that we copy from our cache after we deployed it in Azure. And then lastly, we are just telling the command that we are going to use SSL to connect. </p>
<p>So with this command we hit enter and again there is no real feedback to tell us anything. What we are going to do now is perform a set command to store some data in the cache. So essentially performing this set against our variable. And we are put in some data in our cache and we can hit enter. So finally, we get some feedback true tell us that our storage set was successful. So now, what I am going to do here is to perform a get against our variable to pull the data back out. And on the screen here we can see that the get was successful. </p>
<p>What we will do on our next demonstration is create an actual Python script that goes out and communicates with our ready cache.</p>
<h1 id="Test-Read-and-Write-Access-to-Cache"><a href="#Test-Read-and-Write-Access-to-Cache" class="headerlink" title="Test Read and Write Access to Cache"></a>Test Read and Write Access to Cache</h1><p>- What we’re going to do here is create a basic Python script or application in Visual Studio. What this script is going to do is connect to the cache, set a message into the cache, and then retrieve it and display it. </p>
<p>To create our new project in Visual Studio, you can go up here and click file and then new project. We’re going to select a Python application and we’ll call it my Python app. We’ll leave it in the default location and what this does is open an editor window. Now what I’m going to do is I’m going to copy some of the lines for this code into the window rather than just type everything out. Essentially what we’re going to do is import the redis and then we’re going to set two variables. The redis host name and the access key. The host name is the FQDN of the cache that we configured in Azure and the access key is the access key to access it. </p>
<p>What we’ll do is we’ll open a connection to the cache we’ll ping it to confirm it’s accessible and then we’ll set a message, confirm that the message was set and then we’ll access and display that message. I’m going to start here by importing redis and then I’m going to pull in my two variables the redis host name is the FQDN of my cache and the access key is the key to access that cache. What I’m going to do now is open up the connection to the cache on port 6380 and then what I’m going to here is ping the cache we’ll do the ping store it in result and then print the result so we can see it. What we’ll then do is set a message in our cache we’re essentially setting a string here in a message that says hi Tom. </p>
<p>Python can access the cache and then what we’re going to do is we’ll print that result out and then what we’ll do here I have one more command or two more commands I wanna paste in here and after we’ve set that message, what we’re going to do is retrieve that message and display it. </p>
<p>So what this simple little Python script does is verify that we can connect to the cache that we can ping the cache, that we can set data to the cache, and that we can retrieve data from the cache. So to run our little test Python application here, we can simply click debug and then start without debugging. And the basic feedback we get is that the ping returns a true statement so we were in fact able to ping the cache. We were able to set the message in the cache which means we can store data in it, and then we were able to retrieve that data which is represented by the message that’s returned, Hi Tom, Python can access the cache. So we’ll hit enter to continue and exit back out. </p>
<p>So what we’ve done with 10 lines of code is confirm that we can connect to our cache and at the same time we’ve also demonstrated that we can store data in that cache as well as retrieve that data.</p>
<h1 id="Flushing-Redis-Cache"><a href="#Flushing-Redis-Cache" class="headerlink" title="Flushing Redis Cache"></a>Flushing Redis Cache</h1><p>- [Instructor] You will sometimes find yourself in a spot where you need to invalidate the data in your Redis cache. Doing so is pretty straightforward right from the Azure Portal. So, what I wanted to do in this really, really brief demonstration is show you how to open the console for the Redis cache in Azure Portal and issue a flushall command to empty out the Redis cache. On the screen here, you see that I’m in my Redis resource group and I have my Redis cache here. What I’m going to do is open my Redis cache and then click on Console. From here, I can simply flush my cache by issuing a flushall command. And that’s it. It’s a rather straightforward process that you can do right from the Azure Portal.</p>
<h1 id="Azure-CDN-Overview"><a href="#Azure-CDN-Overview" class="headerlink" title="Azure CDN Overview"></a>Azure CDN Overview</h1><p>- [Narrator] A content delivery network, which is also known as a CDN, is a network of distributed servers that’s used to more efficiently deliver content to end users. What CDNs do is store cached content on what are called edge servers that are located in specific point-of-presence locations that are near the end users who are consuming the content. What this does is minimize latency. </p>
<p>The Azure Content Delivery Network provides a global solution for organizations and developers that need to deliver high-bandwidth content to end users by caching that content on strategically-placed nodes all over the world. While a CDN is useful for delivering static content, Azure CDN can even accelerate delivery of non-cacheable, dynamic content by leveraging many different network optimizations using CDN POPs, or points of presence. </p>
<p>Using Azure CDN to deliver web content offers better performance and an improved end user experience for those who are consuming the content. This is especially true when the end users are using applications that require multiple round-trips to load that content. </p>
<p>Azure CDN also offers large scaling. What this does is allow it to better handle high loads, which is something that you would expect to see maybe during a product launch. </p>
<p>By distributing user requests and serving content directly from the edge servers, Azure CDN ensures that less traffic is actually sent to the origin server, which further improves performance and responsiveness of the origin server.</p>
<h1 id="How-Azure-CDN-Works"><a href="#How-Azure-CDN-Works" class="headerlink" title="How Azure CDN Works"></a>How Azure CDN Works</h1><p>- [Narrator] On the screen here, you can see a diagram of exactly how CDN works. Let’s put a little context behind it. In step one, User A requests a file or an asset via a URL with a special domain name. Such a domain name might be mydomain.azureedge.net. The domain name can actually be an endpoint hostname or even a custom domain. DNS then routes that request to the best performing point-of-presence, or PoP, which is often the point-of-presence that is geographically closest to the user requesting the content. </p>
<p>Now, if there are no edge servers in the point-of-presence that have the requested file in their cache, the POP, or point-of-presence, requests the file from the originating server. The originating server could be an Azure Web App, an Azure Cloud Service, an Azure Storage Account, or essentially any other publicly accessible web server. Next, the originating server returns the requested file to one of the edge servers in the PoP. The edge server in the PoP then caches the file and returns it to the original requester, which is User A in this case. The file will then remain cached on that edge server in the PoP until the time to live, or TTL, that’s specified by its HTTP headers, expires. The default TTL is seven days, unless the origin server provides a specific TTL. Other users can then request the same file by using the same URL that User A used, and can also be directed to the same PoP. If the TTL for the file hasn’t expired, the PoP edge server returns the file directly from the cache instead of going back to the originating server. What this does is result in a far faster, more responsive end user experience.</p>
<h1 id="Adding-Azure-CDN-to-an-Azure-Web-App"><a href="#Adding-Azure-CDN-to-an-Azure-Web-App" class="headerlink" title="Adding Azure CDN to an Azure Web App"></a>Adding Azure CDN to an Azure Web App</h1><p>- [Instructor] In this demonstration, we’re going to add an Azure CDN to an existing Azure web app. What we’re going to do is deploy a CDN profile in Azure, along with an endpoint for our web app. The web app that we’re going to use is a basic static HTML page that we’re going to use to demonstrate the functionality of the CDN and how to purge CDN content. </p>
<p>On the screen, you can see my dashboard for my CDNLab. We already have a basic web app deployed. It’s a static HTML page, and it’s essentially a picture of a cat, because I like cats, and a little bit of text at the bottom. The website in its starting form displays a sentence called “This is a cat!!” in red text. We’re going to use the color of this text to demonstrate how a CDN caches content from a web application. So let’s bounce back over into my dashboard here. </p>
<p>The first thing I need to do is create a CDN profile and an endpoint. So let’s go ahead and click Create a resource here, and search for CDN. We’ll deploy a CDN, and create it. And we’ll call it mycdnlabdemo. And we’ll put this in our CDNLab Resource group. And for the Pricing tier, we’re going to use the Standard Akamai. This is because we need to be able to configure custom rules later on. </p>
<p>Now to create our CDN endpoint, which points to our application, we’ll click the checkbox, and then give our CDN endpoint a name. This needs to be unique across the entire Azure landscape. So I’ll just call it mycatendpoint.azureedge.net. And what we’re going to do is specify an Origin type of Web App, since it’s a web app we’re pointing to. And we’ll browse to the Origin hostname, which is themywebapp1973, which you saw up here. So we’ll go ahead and create that CDN profile and endpoint. </p>
<p>So now that we have our CDN profile created, what we can do is browse to our CDN and see that our endpoint is running. If we click on our endpoint here, we can get the hostname. So we’ll copy this and paste it into a new tab. Now the name of our file here, our HTML page, is CDNDemo.htm. So we’ll append that to our cache. So as you can see, our CDN cache is the same as our application, our web app. So now that we’ve confirmed that our cache and our live site both match, what we’re going to do is make a change to the website itself. So to do this, I’m going to drop down into my FTP client here, which is already connected to my web app. If I open up my CDNDemo page on my live site, I can see that I’m specifying a red color for the text. We’re going to go ahead and change this to blue, and we’ll save it. </p>
<p>Now if I bounce back up to my web app itself, which is denoted by mywebapp1973.azurewebsites.net, if I refresh my page here, I now have blue text. However, if I go to my endpoint in my CDN, which is denoted by my endpoint name with an azureedge.net attached to it, and refresh, the text is still red. This is because the cache content hasn’t been updated yet. Now the CDN, in and of itself, will periodically refresh its content from the origin webpage. This is based on the TTL configuration. That being said, the default TTL is seven days. </p>
<p>So there will be times when content is updated on a website that we may wish to purge the cached content from our CDN. This is one of those cases. So what we’re going to do is purge the content from our CDN by browsing over, back into our Azure portal, and into our endpoint here. If we roll back out into our demo here, we can see our endpoint listed. What we can do is click Purge at the top here. And I’m going to purge the CDNDemo. And we’ll purge it. Now this takes a minute or so to do, but once this happens, we’ll go back up and refresh our endpoint here to see if it’s updated. So let’s bounce back up into our endpoint here and do a refresh. </p>
<p>And there you have it. So by purging the CDN cache, we’ve allowed it to recache the new content from the source website. So now you know a little bit about how to deploy your CDN profile, how to create that endpoint that references the production website, and how to purge your CDN content to ensure it pulls down the latest version of the content so that it can serve it up properly.</p>
<h1 id="Using-Query-Strings-to-Version-Content"><a href="#Using-Query-Strings-to-Version-Content" class="headerlink" title="Using Query Strings to Version Content"></a>Using Query Strings to Version Content</h1><p>- [Instructor] In this demonstration we’re going to see how the cache in an Azure CDN can be manipulated using query strings. On your screen you can see I’m in here with my CDN in Azure. On your screen here you can see I’m in my CDN. If I click on my end point that we created in our previous demonstration, I can browse over to caching rules to see what rules are set up for this end point. We can see that we have global caching rules and custom rules. What we’re going to do here in this demonstration is change the query string caching behavior. If I select this drop-down you can see there’s three options. We have ignore query strings, bypass caching for query strings and cache every unique URL. What we’re going to do here is change the default caching behavior to cache every unique URL. And then we’ll save it. While this is saving, we’ll go out to our web app and we’ll refresh here and see that our text is blue. If we go into our cache, we can also see that our text is blue. Now what I’m going to do here is copy my end point URL and open a new tab. I’ll paste this URL in, but I’ll specify a query string. So we can see here even with a query string of one we still have blue text, which makes sense, we haven’t made any changes yet. And I’ll just refresh this to make sure it gets committed to cache. And now what I’m going to do is go down into my ftp client and I’m going to edit my web app and I’ll change the color to green. So on my production web app this text is now green. So what I’ll do next is open up my end point again this time with a query of two. We can see my query two shows green text, my query one shows blue. If I refresh, I still have blue text. So what this demonstrates is how each query string is treated differently based on the fact that I have the query string caching behavior set to cache every unique URL. If we bounce back down to my editor here, and change it to black, I can then open another tab, so another query and now I get black text. So as you can see, you can control what content is cached and how, based on how you configure your caching rules, and how you access the content itself.</p>
<h1 id="Invalidating-CDN-Cache-With-a-Custom-Rule"><a href="#Invalidating-CDN-Cache-With-a-Custom-Rule" class="headerlink" title="Invalidating CDN Cache With a Custom Rule"></a>Invalidating CDN Cache With a Custom Rule</h1><p>- While we’re in here looking at caching rules for our CDN cache, let’s take a look at a custom caching rule. What we’re going to do in this demonstration is define a custom caching rule that invalidates our CDN cache after a specified amount of time. What we’re going to do in this demonstration is use a custom caching rule to set a cache duration of one second on our cdndemo.htm file. What this will do is override any cache control or expires http headers that are sent by the originating server. </p>
<p>So to create our custom caching rule, we’ll browse down here, down to the custom caching rule section. So to define our custom caching rule, we’ll go down to the bottom here where it says custom caching rules. So to create our custom caching rule, what we’re going to do is go down to the bottom here where it says custom caching rules. What we’re going to do for the match condition field is set it to path. The value we’re going to match on is our cdndemo.htm file. The caching behavior we’re going to set is override and we’re going to tell it that we want a cache duration of one second. We can go ahead and save our new rule. </p>
<p>With our new rule in place, what we’ll do is go up to our web app and we’ll refresh it. And we can see we have black text. If we switch over to our end point, we can refresh and we see we have black text. Now what I’m going to do is go into my FTP client again and I’m going to edit the text color back to red. Now if I go back up to my application and refresh, we can see I get red text. Now what I would expect in my end point is that a refresh also displays red text. This is because the custom rule down here should override the default cache expiration of seven days because I’m focused on the cdndemo.htm match. So let’s go up here and do a refresh and as you can see here, the text is in fact red. So what this demonstrates is that I can control individual caching with custom caching rules. Our custom rule here that matches on the cdndemo.htm file overrides the default caching expiration duration of seven days. And if you read closely under the custom caching rule section, Microsoft will tell you that these rules override the default settings above and that they’re evaluated from top to bottom. That being said, rules that are lower in this list can override rules that are further above it. So keep that in mind when you start creating custom caching rules.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>- [Instructor] I hope you’ve enjoyed learning about integrating Redis Cache and CDN on Azure. Let’s review what you’ve learned. </p>
<p>Early on in this course, you learned about Azure Cache for Redis and what it offers. You learned about several patterns where Azule Cache for Redis comes in handy and about different service tiers. After learning what Azure Cache for Redis is, you learned how to create a cache instance in Azure and how to access it. You then learned how to test, read, and write access to the cache and how to access the cache with a Python application via Visual Studio. We then moved on to the Azure Content Delivery Network or Azure CDN where you learned what it is, what it offers, and how it works. Later in the course, you learned how to add an Azure CDN to an Azure App Service web app and how to invalidate CDN content as well as Redis Cache content. </p>
<p>To learn more about integrating Redis Cache and CDN on Azure, you can and should read Microsoft’s published documentation. Be sure to also watch for new Microsoft Azure courses on Cloud Academy because we’re always publishing new ones. Please give this course a rating and if you have any questions or comments, please let us know. As always, thanks for watching and happy learning.</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Introduction-to-Azure-Functions-15</title>
    <url>/2022/11/14/AZ-204-Introduction-to-Azure-Functions-15/</url>
    <content><![CDATA[<h1 id="Course-Introduction"><a href="#Course-Introduction" class="headerlink" title="Course Introduction"></a>Course Introduction</h1><p>Aloha, I’m David Gaynes. And I have been developing .NET and cloud software for more than 20 years. I spent some time at Microsoft, and I’ve written a book or two in the past as well. This course is intended for software developers who want to learn how to implement <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/azure-functions-overview/">Azure Functions</a> as a part of their cloud software design. You don’t need any specific background to get something out of the course, but it will certainly help if you understand event driven programming, what servers and APIs are in general and if you have experience with C#, JSON and how to create a project in Visual Studio.</p>
<p>Azure Functions are little bits of your application logic that live in the cloud. You can think of them in the same way that you think of any API endpoint, meaning you can get to an <a href="https://cloudacademy.com/library/azure/">Azure</a> Function using HTTP. You just call them whenever you need to run that logic. The course will include how to activate, or what we call trigger, your Azure Functions, how to pass data to and from them and also how to tie different Azure Functions together.</p>
<p>Note that this course covers Azure Functions 2.0 and up. As is typical with Microsoft, there were several breaking changes from V1 to V2. So if you have used Azure Functions V1 in the past, then, obviously, there are some places where the material in this course won’t match what you are used to.</p>
<p>For any additional help, just email <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. And please rate my course when you’re finished. Thanks! And on we go.</p>
<h1 id="Azure-Functions-Overview"><a href="#Azure-Functions-Overview" class="headerlink" title="Azure Functions Overview"></a>Azure Functions Overview</h1><p>You would typically use <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Functions</a> to run bits of your overall application logic on-demand in the same way that you use any other HTTP-accessible endpoint. Just as with any other API endpoint or library function, you create a serverless <a href="https://cloudacademy.com/library/azure/">Azure</a> Function to do some compute work as a part of a larger logic landscape. You can configure Azure Functions and pass data to and from them using a wide range of architectures.</p>
<p>As I mentioned, Azure Functions are just HTTP endpoints that you can call in the same way that you call any other API endpoint from within your code or other process. However, instead of residing on a standard web server that is operational 24&#x2F;7&#x2F;365, your Azure Function is available, quote, on demand whenever you call it. The endpoint is not provisioned into the cloud until it is called. As a result, because your cloud services charge you per minute for any resource in use, an Azure Function is typically less costly to operate than a typical API endpoint web server that’s running and available all the time.</p>
<p>And when do you use Azure Functions? Well, Azure Functions have <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/introduction-to-triggers/">triggers</a> that cause them to execute. So they are especially useful when responding to events such as data coming or going, timers going off, or even HTTP requests coming in. If you have some code that you want to execute based only on a particular event, one that may or may not occur regularly, Azure Functions can be a solution.</p>
<p>As I mentioned, triggers for your Azure Function can include timers, data operations, and standard HTTP calls or webhooks. Triggers are created in a configuration file that is a companion to your Azure Function. As we’ll see when we write our first Azure Function, the trigger type you choose actually defines your project.</p>
<p>Azure Functions connect to your data stores and resources through the use of bindings. Input bindings provide any needed data to your Azure Function and output bindings receive any results. Bindings are created in the same configuration file I mentioned that is the companion to your Azure Function when you publish it.</p>
<p>We will cover the implementation of triggers and bindings in the first part of the course.</p>
<p>Because <a href="https://cloudacademy.com/library/azure/">Azure</a> Functions employ the on-demand services model I mentioned earlier, they are typically stateless. Azure Functions are serverless meaning there is no host server to hold or store information between calls. Your Azure Function is provisioned into the cloud when it needs to run and de-provisioned immediately afterwards so there is no concept of state connected to it.</p>
<p>However, there is an extension to standard Azure Functions called Durable Functions that does allow you to manage state&#x2F;coordination of different Azure Functions. It’s a very useful feature in a serverless environment. We will cover the use of Durable Functions in the second part of the course.</p>
<h1 id="Introduction-to-Triggers"><a href="#Introduction-to-Triggers" class="headerlink" title="Introduction to Triggers"></a>Introduction to Triggers</h1><p>Triggers are how your <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Function</a> starts, so it seems the best place for us to start as well. A trigger defines how your function is invoked. There are several kinds of triggers you can employ to run your function when desired. In general, they have three primary types, including HTTP&#x2F;Webhooks, timers, and data operations.</p>
<p>So for HTTP trigger, your Azure Function fires whenever an HTTP request hits that endpoint.</p>
<p>For a generic webhook trigger, your function fires when a webhook HTTP request, hits that endpoint from any service that supports webhooks, such as Stripe or Twilio.</p>
<p>A GitHub webhook trigger in specific means that your function fires when an event occurs in your GitHub repository, such as create, delete, download, fork, push, pull requests, commit comment or any of the other several dozen GitHub events.</p>
<p>For a timer trigger your function is called at intervals, we’ll actually be creating a timer trigger in our exercise.</p>
<p>A queue trigger means your function fires when a new message comes into your <a href="https://cloudacademy.com/library/azure/">Azure</a> queue storage. The message contents are then passed on as input to the function. We will also be doing a queue trigger in our exercise.</p>
<p>For a service bus trigger, your function fires when a new message arrives from a service bus queue or topic. The message contents are then passed in as input to your function.</p>
<p>A BLOB trigger means that your function fires when a new or updated BLOB is detected, and then the BLOB contents are passed to your function as input or an event hub trigger your function fires when any events are delivered to an Azure Event Hub.</p>
<p>To define those triggers and other bindings for your Azure Function, you create a function.json file that creates the configuration metadata for the function itself. Here you can see an example of a function.json file.</p>
<p>You can see within it that a function can only have a single trigger binding. As we’ll discuss later, it can have multiple input slash output bindings. All bindings and triggers will have a direction property and note that for triggers, the direction is always in.</p>
<p>Here you can see examples of several common types of trigger bindings used for implementation of those that we just listed. This code would all be found in your function.json file, typically auto generated by Visual Studio, but you do have direct access to edit it when you desire.</p>
<p>So you can see httpTrigger with an authorization level, a timerTrigger with a schedule, a blobTrigger with the file path to the blob, a queueTrigger with the name of the queue, and so on all of the details necessary for your binding to enable itself to be properly connected to whichever resource you are binding to.</p>
<p>The easiest way to create an Azure Function, and to see all of this is using Visual Studio. You just write your functions, starting with the templates provided, and then publish in the usual way to your Azure Cloud. Note that because any Azure Function can have exactly only one trigger as specified, the trigger type you intend to use is what differentiates your Azure Functions when you <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/demo-creating-a-new-function/">create them</a> in Visual Studio, so let’s take a look at that.</p>
<h1 id="DEMO-Creating-a-New-Function"><a href="#DEMO-Creating-a-New-Function" class="headerlink" title="DEMO: Creating a New Function"></a>DEMO: Creating a New Function</h1><p>To begin, we’ll be creating the <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Functions</a> equivalent of Hello World. Although, in this case, we’ll actually be logging to our console. So, just use your create a new project template in the typical way to create an Azure Function project. If you don’t see it immediately in your list of projects, you can always use the filter control at the top by <a href="https://cloudacademy.com/library/azure/">Azure</a>, and you’ll find it quickly.</p>
<p>We’re gonna go ahead and name our function according to the primary type of <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/introduction-to-triggers/">trigger</a> that we intend to use, which in this case for simplicity’s sake, we’ll just go ahead and make a timer. So, we’ll call our project, AzureFunctionTimer. And although we will be using a couple of other types of timers throughout the project, including an HTTP trigger, which is the kind that you would want to use to access your function as an API endpoint.</p>
<p>As we discussed earlier, we’ll also be touching on Queue trigger, but, as I mentioned for the moment for simplicity’s sake, we’ll start with a Timer trigger that runs on a simple interval. The interval that we’ll specify here will be the default value of five minutes, and we’re also going to want to be engaging our default development storage emulator provided by Visual Studio and Azure, which is the AzureWebJobsStorage account. That’s going to allow us to interact with our local Blob storage, Queue storage, anything that we might need as Azure storage without having to provision any live resources into the cloud, which would incur charges and require a live Azure account.</p>
<p>So, for development work, we can use the free local storage emulator provided by Visual Studio. We’ll go ahead and create that function, and let Visual Studio do its magic for us. And when it’s finished doing so, you can see that we have a base function signature for an Azure function, and that it includes the necessary trigger attribute applied to the first argument, which in this case is the Timer trigger with the interval specified in part of its constructor argument.</p>
<p>That attribute applies to the TimerInfo variable, myTimer. And, in this function, all we’re going to be doing is logging information that lets us know, yes, that function ran. To do so, we’re going to use the dependency injection ILogger variable log. If you’re not familiar with dependency injection, don’t worry about it for right now. It just means that Visual Studio and Azure have some built-in functionality that you can access by using the right types of arguments in your function’s signature, things like logging and configuration.</p>
<p>So, in this particular case, we’re gonna go ahead and use logging, and then we’re just gonna go ahead and run that function and see the sort of output that we get. And you’ll see the first thing that happens when you run locally is that Azure Functions will pop up your console, so that you can see the logging activity that’s happening inside of your function.</p>
<p>Here, you can see it picking up some configuration information, including the Cron schedule here that indicates that this function will be running every five minutes at five, 10, 15, 20, 25 minutes past the hour, etc. And so, as soon as we hit one of those specific timer intervals, our Timer trigger will fire, and there it is. As we see, we have successfully executed Function1. Because the timer fired, we have logged our information to the console, and we have confirmed that our function has executed successfully from end-to-end. So, congratulations, you have created your first Azure function.</p>
<p>Now, if you’d like to see the function.json file that goes along with that Azure function and defines all of the configuration inside the function, you can drill down by doing Show All Files inside of your Visual Studio. Then, you’re gonna want to go into the bin directory, into your compilation, down inside of Function1, and there you will see your function.json file with the specified trigger binding automatically injected into it. So, your function.json file will hold all of your bindings, all the bindings that are created throughout the rest of the project, triggers, or input or <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/introduction-to-output-bindings/">output bindings</a>, whatever they are, but they will all go into your function.json file, which was automatically created when you built the project and will automatically be deployed with your project when you deploy it into the cloud.</p>
<h1 id="Introduction-to-Output-Bindings"><a href="#Introduction-to-Output-Bindings" class="headerlink" title="Introduction to Output Bindings"></a>Introduction to Output Bindings</h1><p>Creating and then deploying your <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Function</a> to the cloud in your usual way in Visual Studio automatically <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/demo-creating-a-new-function/">creates</a> and deploys that function.json file we talked about earlier that contains the configuration&#x2F;metadata information for your Azure Function that it requires based on the code you just wrote. The cloud runtime environment reads the file when it spins up your Azure Function and then runs the logic in the function itself. All in response to the activated trigger.</p>
<p>Triggers are one kind of binding. But Azure Functions also make use of input and <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/demo-output-bindings/">output bindings</a> to allow you to easily connect to your related cloud resources such as data and other resources. Azure Functions 2.0 and later supports a variety of bindings that you can use for inbound or outbound connection to those resources.</p>
<p>Note quickly that all bindings except HTTP and Timer must be registered. .NET functions can access and register bindings just by using NuGet packages. Other functions can use extension bundles to access bindings through configuration settings.</p>
<p>Notice in the function.json file that input and output bindings can use directions both in and out, depending on the type of the binding. And some bindings even support a special direction InOut that is available using the Advanced editor in the <a href="https://cloudacademy.com/library/azure/">Azure</a> portal, but we won’t be talking about InOut bindings in this opening course on Azure Functions.</p>
<p>So what kinds of resource bindings are supported in Azure Functions? Well, for input you’ve got Blob Storage, Cosmos DB, IoT Hub, Microsoft Graph Excel tables, Microsoft Graph OneDrive files, Microsoft Graph events, Microsoft Graph Auth tokens, mobile apps, SignalR, Table storage and even Twilio. And for output bindings, it’s all of the above except for the Graph Auth tokens, IoT Hub and SignalR. Plus, Event Grid, Event Hubs, HTTP and webhooks, Microsoft Graph Outlook email, Notification Hubs, Queue Storage, SendGrid, and Service Bus. </p>
<p>In other words, your ability to create interactions in your Azure Functions between the various parts of your cloud architecture is nearly limitless through the use of input and output bindings.</p>
<p>So let’s continue our code example by adding an Output binding to our Azure Function. Suppose that we have a scenario in which whenever our current Timer triggered Azure Function goes off, we want to send a message to our Queue. Let’s just hop back into Visual Studio to implement that code.</p>
<h1 id="DEMO-Output-Bindings"><a href="#DEMO-Output-Bindings" class="headerlink" title="DEMO: Output Bindings"></a>DEMO: Output Bindings</h1><p>Implementation of your <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/introduction-to-output-bindings/">output binding</a> in your <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Function</a> inside of Visual Studio is very straightforward. All you’re actually doing is adding an output parameter argument to your function signature and then applying an attribute to that argument to actually indicate the binding that you’re looking to create.</p>
<p>So you can begin to see a pattern developing here. For example when we used the TimerTrigger attribute, we simply applied that attribute to our initial argument of the type that we want it to be using. And we’re doing exactly the same thing in our second argument where we apply this binding attribute for the queue to the out message that we’re going to be creating using our queue.</p>
<p>If the Visual Studio that you’re using doesn’t recognize this particular item, make sure that you have a couple of NuGet packages installed which would be the Microsoft.Azure.Storage.Queue and then the Microsoft.Azure.WebJobs.Extensions.Storage will give you everything that you’re gonna need to be able to interact with your queue both presently and in the future if you’re ever gonna be creating functions to peek into your queue or anything like that.</p>
<p>So those two namespaces will give you everything that you need. And then the only caveat here before we run our function would be to make sure that we actually have a queue that matches this name that exists because what our code is saying here is that when our <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/demo-output-bindings-with-triggers/">trigger</a> function runs, we will automatically be sending data.</p>
<p>Because it’s an output binding, we’re going to be sending data to the object specified here in this argument. So to make sure that our queue exists, we just pop open our local cloud explorer, and it will include a menu item for local, you may have other connections established, but initially all you’re interested in for this project would be your local connection, using that as your WebJobs storage connection string. And you can see as you drill down that in your storage account you’ll have blob containers and queues and tables and so on and so forth. And so in our case we’re just checking our queues that we, yes, we do have an item in here called thequeue, and if we right-click on that queue, we can pop it open and we can actually see that there is nothing in it. Queue contains no messages.</p>
<p>So in theory when we run our function, we should be able to go back into that queue and see that this QMessage, Timer triggered, has been created. So you’ll note that there is another name for the string value that we’re passing to QMessage. I’ll get into the details of this in just a second.</p>
<p>We’re gonna use this when we do a combination of an input binding to combine with our output binding. But again right now our output binding simply acts as a receiver for data that we’re gonna be sending, in this case it’s our queue object and the particular message that we’re going to be sending is Timer triggered. This should all happen automatically when our timer function runs.</p>
<p>So we’ll just go ahead and run the function and see what we get. And so Visual Studio pops open our console as is typical for a local development Azure Function. It reports on its status in the usual way. And then we can see that our function has executed. So our Timer trigger function has executed and successfully.</p>
<p>So now in order to verify that everything worked properly with our queue, we just close that up, stop the host, head over to our queue, open it up, and we see that we have the first message successfully in there, Timer triggered. If you’re curious about what that looks like inside your function.JSON file, here it is, here is your trigger binding with your queue output. </p>
<p>Remember that Visual Studio takes care of all of this by simply creating the arguments properly with the attributes inside of your Azure Function. So typically you don’t even have to see inside of your function JSON file, you don’t have to make any changes to it. <a href="https://cloudacademy.com/library/azure/">Azure</a> and Visual Studio will automatically take care of all of those bindings for you. So you have successfully implemented your first output binding in an Azure Function.</p>
<h1 id="DEMO-Output-Bindings-with-Triggers"><a href="#DEMO-Output-Bindings-with-Triggers" class="headerlink" title="DEMO: Output Bindings with Triggers"></a>DEMO: Output Bindings with Triggers</h1><p>So now that we’ve done that, successfully added an <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/demo-output-bindings/">output binding</a> to our <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Function</a>. Recall that, queue can actually be a trigger as well. So we have now created a timer trigger to inject something into our queue, we could create another Azure Function that would respond to that queue entry, as a queue trigger.</p>
<p>So let’s go ahead and add another Azure Function. We’ll just go ahead and call that function two for the moment. Then when we do, we’ll get the choice of trigger types that we wanna create. We select queue trigger. We go ahead and we use the same <a href="https://cloudacademy.com/library/azure/">Azure</a> web jobs storage that we have been using for our default development environment. We can even rename the queue according to the particular queue that we have been working with. And then we select OK.</p>
<p>Visual Studio will whip up our new as your function with a queue trigger. And this particular function, again indicated with a queue trigger binding is named properly and using our connection and all this function does is again use the dependency injection parameter for logging. Logging information that says that our queue trigger function has actually run and then it should indicate the content of the queue item when we run the function.</p>
<p>So we just go ahead and run all of that and it should all weave together automatically. Once again, Visual Studio pops up our console so that we can see what’s going on inside of our Azure Function. And it reports back to us on its progress in the usual way. And it runs our function and we can see that everything that we wanted to happen has happened. Our timer trigger function has run and our queue trigger function has also run.</p>
<p>We can see that both functions succeeded. You can see the detail that our function with the queue trigger ran because a new queue message was detected. So our timer has run, our output binding has functioned in providing a message to the queue. And our queue trigger function has run in response to that.</p>
<p>So we have now chained together different Azure Functions with different triggers. That is one of the most valuable things that you can do with Azure Functions. You have a wide variety of these kinds of conditions that you can create. To use logical sequences in your programming a very valuable use of Azure Functions. And so you have successfully created your first function, your output binding, and your second function to respond as a trigger to that output binding.</p>
<h1 id="Introduction-to-Input-Bindings"><a href="#Introduction-to-Input-Bindings" class="headerlink" title="Introduction to Input Bindings"></a>Introduction to Input Bindings</h1><p>For input bindings, you’ll see in a moment that when using .NET, you just define the data types using function parameters in the typical way. For example, as your argument for an inbound stream, such as from a BLOB, you would use type stream from the standard System.IO namespace, while for the inbound text coming from a queue <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/introduction-to-triggers/">trigger</a> you would use a string argument. You can also use any custom type of your choice as an argument to de-serialize input to that object type.</p>
<p>For dynamically typed languages, such as JavaScript, you would need to set the dataType property in the function.json file as a part of that binding definition. For example, to read stream input from a BLOB, set the dataType to stream, like you see here.</p>
<p>Other options for dataType are byte array, binary, and string. So this time let’s go back into our <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Function</a> inside Visual Studio so we can see an example of how we employ the use of an <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/demo-input-bindings/">input binding</a> as an argument.</p>
<h1 id="DEMO-Input-Bindings"><a href="#DEMO-Input-Bindings" class="headerlink" title="DEMO: Input Bindings"></a>DEMO: Input Bindings</h1><p>To implement an <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/introduction-to-input-bindings/">input binding</a> in your <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Functions</a>, let’s go ahead and return to our queue trigger function and provide an attribute to that function so that we can create our binding. </p>
<p>Now remember that a queue trigger will be activated by any entry placed into the specific queue that is referenced. So although in our previous example, we were using our timer to create a queue entry, any connection to your queue from anywhere in your enterprise software that creates an entry in your queue will activate this trigger.</p>
<p>So let’s suppose that somewhere in your enterprise, you have a security application that takes a photograph every time a secure area or restricted area is violated, and that at the moment that that violation occurs an image is taken and sent to your blob storage. And that at the same moment, a queue entry is created saying, “Hey, there’s a new security image that somebody needs to review or that we need to process in order to find out what’s going on.” So what we need is an input binding that is expecting that data to be there, and then a queue trigger activated off of that queue entry, that will then go look for that image inside of our storage.</p>
<p>Here’s a quick look at what that activity does inside of your function, .json file, here you can see the direction of the input binding and the same specifications that we applied inside of our function parameter. So we’ve provided a blob attribute which references this container and this specific image.</p>
<p>So assuming that this image is here, we will not get a null value return. Let’s just go check our Cloud Explorer real quick and make sure yes, we do have an image in our Cloud Explorer that I put there earlier, QR2.jpg, which will match this name.</p>
<p>So when this trigger is fired, we should be able to have a valid log entry created that says, “New image was found,” and then just the size of the picture in this case, will help us separate which picture was found. Keep in mind that just for the moment that I have hard-coded that value, QR2.jpg so that we can verify our connection to blob storage and that when an image exists, we can actually effectively process it. We’ll soon be creating a dynamic value in there as a variable but in this case, we expect it QR2.</p>
<p>So let’s go ahead and run that function. <a href="https://cloudacademy.com/library/azure/">Azure</a> will pop up your console as usual to let you see what’s going on inside of your Azure function. We can see that it has found two functions, both one and two. And we can also see that because we have a timer triggered, queue trigger firing, that we know was created by our timer, it has gone in and it has found the image that we were looking for QR2, 4388 bytes, we can go in, we can go back to our blob container, and we can verify that yes, the size of that image was 4.3 K.</p>
<p>So we know that in this particular case, the function has run properly, our connection to our storage is working. And now we can get on to an actual real-world example, in which we would not be providing a hard-coded value here. The key to this is that this value can be dynamic, based on the text content of the queue item that came in.</p>
<p>So we would want to have the queue item that had just come in from your security application, indicating some specific information in the queue, an image name that would help us go into our blob container and fetch that image.</p>
<p>So how do we do that? And the answer is by using special syntax, and a special argument called queue trigger, that is going to provide us with the text information that came into the my queue item argument that we have the queue trigger attribute applied to.</p>
<p>So now what we are expecting is that our blob will have an image of the same name as whatever the item was, that was created inside of our queue. So let’s go back into our Cloud Explorer, and we’ll pop open our blobs container again. And we’ll see that we have an image in here, an image in here that has been created in this case manually, but could have been sent in by our security application. That is called SecurityViolation.jpg.</p>
<p>So assuming that we create an item in our queue of the same name, we should now be able to see that a security image was found and with the actual length of that particular picture. So our queue item has to contain the word security when we create it. And of course, we need to actually have our function running to make sure that our Azure function will be responsive when we create our item in the queue.</p>
<p>So now that we know that we have that up and running, we just head back over to our queue and we create a message with very specific text called security violation, because that is the name of the image that we are expecting to be able to match. So we go ahead and we create that text entry in our queue. And as soon as we do, we can see that our queue trigger is immediately processed, and that it has indicated to us that it is in specific a security violation that it executed.</p>
<p>So now we have been able to see that our queue trigger Azure Function can be responsive to multiple ways of inputting information to our queue, that we can narrow down inside of that function, the specific item information that we’ve received from the queue, and that we can use that information to apply specific logic for that situation. And so you have effectively combined your input binding of expected data with your queue trigger function.</p>
<h1 id="Durable-Functions-Types-and-Uses"><a href="#Durable-Functions-Types-and-Uses" class="headerlink" title="Durable Functions: Types and Uses"></a>Durable Functions: Types and Uses</h1><p>Okay that covers our introduction to <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Functions</a>. We got one running, we used bindings to interact with remote resources, we called functions from it, triggered functions from it and logged our activities. I spoke briefly earlier about the ILogger Dependency Injection that we were using for that.</p>
<p>Azure Functions 2.0 and later is much, much better at handling Dependency Injection than was version 1.0. And since it’s pretty much required in a stateless environment that’s a very good thing.</p>
<p>As I mentioned, if you’re not familiar with Dependency Injection, that’s okay. In this case the point of it is that Azure Functions as a runtime has some built-in tools such as Logging and Configuration that you can use for all of your Azure Function.</p>
<p>And you get access to those tools when you pass the right kind of object types in the Constructor of your Azure Function. Since you haven’t created those objects yourself you know that <a href="https://cloudacademy.com/library/azure/">Azure</a> must be doing it for you in the background. Because those background objects are actually controlling much of what happens in your function, Dependency Injection of objects is sometimes called Inversion of Control.</p>
<p>The need for Dependency Injection brings us back to a point I mentioned earlier and again just now, the whole on-demand serverless model is by nature stateless. It’s hard to hold state in something that doesn’t exist most of the time such as is the case with your Azure Function.</p>
<p>But what happens when you do have several Azure Functions and you would like them to be aware of what the others have done before they execute in a smarter way than we just employed using our bindings and triggers? It’s a common enough scenario and it’s why Durable Functions were created.</p>
<p>Durable Functions is an extension of Azure Function that lets you orchestrate, or tie together in one way or another, stateful functions in a serverless environment. The <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/use-of-orchestrator-and-activity-functions/">orchestration</a> is typically a sequence of logical processing. A Durable Function application is a solution you create that is composed of different Azure Functions, each one playing a different role within that orchestration.</p>
<h1 id="Use-of-Orchestrator-and-Activity-Functions"><a href="#Use-of-Orchestrator-and-Activity-Functions" class="headerlink" title="Use of Orchestrator and Activity Functions"></a>Use of Orchestrator and Activity Functions</h1><p>There are currently four durable function types in <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Functions</a>, Activity, Orchestrator, Entity, and Client. But we’ll start by looking at just the first two, Activity and Orchestrator. </p>
<p>Activity Functions are pretty much basic <a href="https://cloudacademy.com/library/azure/">Azure</a> Functions written more or less as usual with the one important difference being the requirement of an ActivityTrigger attribute that indicates that this function can be triggered from your Orchestrator function.</p>
<p>Your Orchestrator orchestrates the various Activity Functions by executing them as you specify. The Orchestrator function type requires an OrchestrationTrigger as we’ll soon see.</p>
<p>When you start your <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/durable-functions-types-and-uses/">Durable function</a>, it creates the necessary control queues for each of the Activity Functions that it finds, and one worker item queue. Take note that although your Orchestrator looks like it is directly calling the function, under the covers it is instead actually sending a message to that work-item queue.</p>
<p>Your Activity Functions will receive a message from the queue through implementation of your ActivityTrigger and then execute any of its internal logic. When the Activity Function completes its execution, the function sends a response message to the control queue. The Orchestrator function then receives that response message via its OrchestrationTrigger, and the full behavior of the Durable Function is complete.</p>
<p>So an example might be you have a total of order items that you need to pass to another function to get taxes, or you have area parameters for something that then you need to calculate the total volume. Basically, any situation in which you have a value that you would like to pass on to another separate function to return a dependent value would be a use case for Durable Functions orchestrating your Azure Functions.</p>
<p>So let’s take a look at how this works in code by jumping back into our Visual Studio project.</p>
<h1 id="DEMO-Durable-Functions"><a href="#DEMO-Durable-Functions" class="headerlink" title="DEMO: Durable Functions"></a>DEMO: Durable Functions</h1><p>The <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/durable-functions-types-and-uses/">Durable Functions</a> equivalent of hello world, would be to create a set of activity functions that could be executed from your <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/use-of-orchestrator-and-activity-functions/">orchestrator function</a>. So that’s what we’re going to do in this exercise, we’ll even create our own as <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Function</a> outside of the template, and we’ll have a value returned from that function that we can then pass on. In this case, we’ll be passing it back to the same function to show a change in value, but we could take that value and pass it along anywhere, thus maintaining state which is usually very challenging in the serverless world of <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/use-of-orchestrator-and-activity-functions/https://cloudacademy.com/library/azure/">Azure</a> Functions.</p>
<p>To add a Durable Function to your Azure Functions project, just right click on the project name and do Add New Azure Function. We’ll actually go ahead and name this one FunctionDurable since we know that’s what we’re gonna do with it, and then the list of Azure Function Types pops up, and you will see that Durable Functions Orchestration is in the list. So we just click Okay, and Visual Studio will do its thing and create for us our basic Durable Functions template, which is going to include three different types of functions in it. It will include first our orchestrator function that will be responsible for calling all of the other activity functions. And then there will also be an HTTP trigger function, that is going to be how we are going to activate our orchestrator function in the first place, meaning that yes, at last, we will finally be executing one of our Azure Functions using the much mentioned HTTP trigger as if our function was an API endpoint.</p>
<p>So first, just to make sure that we can see what’s going on here, we’re expecting some text to be written to the screen when we run our orchestrator calling our activity functions. So let’s just run the Azure Function and make sure that everything is looking good inside of our Durable Function. As usual, Visual Studio pops up your console so that you can see all the logging. We’re going to need some important bits of this, you can see right there durable task has been created. And you can see in the green there just flashing by us was a critical bit of information that we need. This is our actual HTTP endpoint that we would need to use from a browser to call our Azure Function.</p>
<p>So we’ll go ahead and do a quick copy on that, we’ll pop open a new window, we’ll paste that in, and we’ll run our Durable Function. You can see we got something back from running it so everything’s looking good. And when we come over to our console, we can see it’s full of a lot of stuff, including here’s a hello to London, here’s a hello to Seattle. And so we can see that each of the activity functions within our Durable Function has run properly.</p>
<p>So now let’s take advantage of some of the power of that so that we can actually pass some values from one Durable Function to another and see that important sequence happening. So let’s just create a little bit of space here. And then I have a pre-created function that I can drop in that does nothing but add five to the value that we pass in. So here’s x equals five, here’s the logging information telling us that we’re gonna be adding that value to whatever the value that is passed in. And then we’re gonna be going ahead and returning that value.</p>
<p>So how would we get access to some of that stuff up here inside of our orchestrator function? Let’s go ahead and take out a few thing. And this is the simple process of creating an integer, having the value of that integer then reassigned to the return value from our add five function, and then doing the same thing again. So between Seattle and London, we should have one output that says we’re adding five to zero, and then we should have another output that says we’re adding five to five. And we can watch that value change dynamically as our Durable Function runs.</p>
<p>So let’s go ahead and run that function and see what we get. Azure Functions, once again, displays our log, verifying we have a durable task running. And there’s the endpoint that we’re going to need to use, which of course, fortunately, turns out to be the same endpoint that we just used.</p>
<p>So now that we know that everything is up and running, we can actually just come back to our open browser, make another request to the same endpoint. When it’s completely finished, we can go in, and we can take a look. And we can see that our function durable hello has been running properly, and so has our add function. here we can see down in the list, we’re adding five plus five. Here further above, we’re adding five plus zero.</p>
<p>So, as we are going through our Azure Function, and here’s the beginning saying hello to Seattle, adding five plus zero, adding five plus five, and then at the end here, saying hello to London. And so, in this process, we have really been able to see very powerfully that Azure Functions can tie together in a number of ways, orchestrating your Azure Functions to create a sequence like this is one of the most powerful ways that you can manage your state and the logic within your larger application picture.</p>
<p>So, now we have successfully created an Azure Durable Function that has called individual activity functions. We have activated that function using an HTTP trigger endpoint. And that concludes the first part of our introduction to Durable Functions.</p>
<h1 id="Course-Summary"><a href="#Course-Summary" class="headerlink" title="Course Summary"></a>Course Summary</h1><p>That concludes our introductory look at <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/course-introduction/">Azure Functions</a>. We’ve seen that Azure Functions are actually just little bits of your application logic that you can have reside in the cloud as a part of your general software architecture, and they can perform on demand pretty much anything that you want them to, using a variety of triggers such as timers or data events or HTTP triggers, as if they were regular API endpoints.</p>
<p>You have the ability to string together different bindings of a wide range of data sources and resources such as queue, BLOB, <a href="https://cloudacademy.com/library/azure/">Azure</a> tables, etc, etc, that you can weave all of these things together into a sequence of bindings and triggers that allow you to really dictate a logical flow of data or processing through one piece of your application logic. That’s just one way to orchestrate Azure Functions together.</p>
<p>The formal Azure Functions way of orchestrating things together is by using <a href="https://cloudacademy.com/course/introduction-to-azure-functions-990/demo-durable-functions/">Durable Functions</a>. We’ve seen that Durable Functions can, through the use of orchestration, call other Azure Functions that can pass data to and from each other using the orchestration function as that sort of nexus that lets you be in complete control of logical and data flow.</p>
<p>So, hopefully, you’ve seen some things within Azure Functions that get you excited to use them. Hopefully, you can apply them to the benefit of your enterprise coding structure soon. Thank you again for taking my course. I hope you enjoyed it, I hope you got a lot out of it. Happy coding!</p>
<h2 id="6DEMO-Output-Bindings"><a href="#6DEMO-Output-Bindings" class="headerlink" title="6DEMO: Output Bindings"></a>6<strong>DEMO: Output Bindings</strong></h2><p><a href="https://docs.microsoft.com/en-us/visualstudio/azure/vs-azure-tools-resources-managing-with-cloud-explorer?view=vs-2022">Cloud Explorer Alternatives</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Introduction-to-Azure-Resource-Manager-25</title>
    <url>/2022/11/14/AZ-204-Introduction-to-Azure-Resource-Manager-25/</url>
    <content><![CDATA[<h1 id="Course-Introduction"><a href="#Course-Introduction" class="headerlink" title="Course Introduction"></a>Course Introduction</h1><p>Hi, and welcome to this introduction to this Azure Resource Manager course. My name is Hallam Webber and I will be your instructor for this course. This is a beginner’s course that’s aimed at those who want to know more about managing and configuring their Azure environment. So whether you’re in DevOps, IT support, or a developer that wants to get a better understanding of fast-tracking deployments, there is something in this course for you.</p>
<p>In this course, we will start with an overview of what Azure Resource Manager is and where it fits into the overall Azure picture. Then, we’ll get an understanding of why it’s important. and then, we will delve into some hands-on demonstrations of how you can use it to simplify what would otherwise be quite labor-intensive tasks. </p>
<p>As an introductory course, we will be learning by doing, to give you a basic “how-to” foundation in ARM templates. When we’re not in the Azure portal I’ll be using Visual Code with the ARM template extension which provides IntelliSense for Azure Resource Manager syntax. This is a very helpful tool if you’re not familiar with ARM instructions.</p>
<p>We welcome all comments and feedback, so please feel free to reach out to us at <a href="mailto:&#115;&#117;&#112;&#112;&#111;&#x72;&#x74;&#64;&#99;&#x6c;&#111;&#x75;&#100;&#x61;&#x63;&#x61;&#100;&#x65;&#x6d;&#x79;&#x2e;&#x63;&#x6f;&#x6d;">&#115;&#117;&#112;&#112;&#111;&#x72;&#x74;&#64;&#99;&#x6c;&#111;&#x75;&#100;&#x61;&#x63;&#x61;&#100;&#x65;&#x6d;&#x79;&#x2e;&#x63;&#x6f;&#x6d;</a> with any questions or comments. Let’s get started.</p>
<h1 id="Azure-ARM-Intro-Overview"><a href="#Azure-ARM-Intro-Overview" class="headerlink" title="Azure ARM Intro Overview"></a>Azure ARM Intro Overview</h1><p>So, what is Azure resource manager? Well, it is what it says it is. For a lot of people when they think of Azure they think of the complete Microsoft cloud product and all that it entails. But in reality, Azure is a collection of services or resources. When you sign up to Azure for the very first time as an organization with a new subscription and you log in to the portal there is nothing there. As you require services whether that’s a virtual machine, a web app, or database server you create instances of those resources. Azure resource manager is the glue behind-the-scenes that makes it substantially easier for you to deploy and manage all those different resources. </p>
<p>ARM in Context</p>
<p>You might think that the portal is Azure, but the portal is one of several interfaces to Azure resource manager. The portal is merely a graphical interface over the resource manager, which in itself is an interface to the various resources, especially in terms of deployment, and managing the order and dependencies involved in deploying various resources. Apart from the portal, there is also an API interface to Azure resource manager and more importantly for us, an SDK interface.</p>
<p>Command Line Interface</p>
<p>PowerShell for Windows and the Azure command-line interface are the preferred methods for interacting with Azure resource manager when it comes to large, complex, and repeated deployments. One thing I want you to take notice of on the slide is where authentication fits into the scheme. Because there are multiple ways to interact with resource manager authentication is handled directly by it. This is demonstrated by the fact that when you log into Azure through PowerShell or the Azure CLI a browser window will pop up and you can authenticate through that when using two-step authentication or a Microsoft account.</p>
<h2 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h2><p>As we can see here Azure resource manager is mostly used when managing resources within a resource group. All resources are created within a group even if they are spread over multiple geographical regions. By grouping resources, you can perform actions on all the resources in that group at one time. A simple example would be creating a database server with databases and a web app service for some testing and then deleting all of them at one time by deleting the resource group that contains them. Having said that depending on the type of billing account you have with Microsoft you can also create subscriptions and management groups through resource manager.</p>
<p>Why You Need to Know ARM</p>
<p>But why do you need to know about Azure resource manager? After all, the portal works just fine and is easy enough to use. Infrastructure as code is the reason. In the cloud, hardware does not exist; everything is virtual and can be defined by code. It’s fine for you to deploy a simple resource or even a couple of simple resources using the portal in a one-off situation. But having to set up by hand multiple and complex resources, perhaps several times for different environments, like development test and production, would not only be tedious and time-consuming but also prone to error. You can create resource deployments with scripts and run them through the Azure CLI or PowerShell. As resource creation and deployment are so important Azure has developed templates for defining your resources.</p>
<p>A template is a JSON formatted text specification of a resource. The JSON template file contains all the information about a resource necessary for Azure to create it. It contains vital information like the type of resource, for example, virtual machine, database or storage, and the resource’s name. What resource group, and where the resource should be deployed, as in the geographic region are other configurable attributes in the JSON definition. The template specifies the size of the resource, whether that is disk space for a database or compute power for a virtual machine. As I said, every detail about the resource you want to create, including other resources that the target resource will depend on. A template won’t be that useful if it just specifies exactly the same resource. What I mean by that, is you can’t have resources with identical names. The template architecture allows you to use input parameters to reuse a template to deploy the same type of resource, with a different name and attributes. We will see that all the attributes we choose from drop-down lists, radio buttons, and checkboxes as well as text we enter during the resource creation process in the portal become template parameters.</p>
<p>I’m going to introduce you to templates by creating a virtual machine resource in the portal and then saving the template. We will look at the elements of the template like how a resource is defined and how parameters are used to modify a resource deployment. Creating a VM will also demonstrate how one resource is dependent on other resources. A virtual machine doesn’t exist in isolation, it requires a network and storage in the form of a disk. Don’t worry if you don’t get resource templates after the first demonstration. I will examine the different elements of a template in more detail later. The first demo is to show you the relationship between a resource created in the portal and the corresponding template that gets produced.</p>
<h1 id="DEMO-Modifying-Existing-Templates"><a href="#DEMO-Modifying-Existing-Templates" class="headerlink" title="DEMO:Modifying Existing Templates"></a>DEMO:Modifying Existing Templates</h1><p>Without a doubt, the easiest way to get started with templates is to go to a current resource and download the deployment as an ARM template. This process can be likened to recording an Excel macro and then inspecting the code to see how it works. </p>
<p>I’ll start by creating a virtual machine resource. Let’s just fast forward through the portal process by going with most of the defaults. It’s not important what we choose here as template creation will work for any resource. I’ll go with premium SSD and the standard networking setup. I will turn on OS guest diagnostics, take the advanced defaults, and not bother with tags. We can see before we hit the create button, we have the opportunity to download the template before getting the portal to deploy the VM. I’m going to download the template now for use later on.</p>
<p>Having a look at the template we can see it is made up of 22 input parameters that can be changed or substituted to alter how the resources are created. The parameters have a name and a data type. There are 3 variables that are used within the template, and of course, there are the 6 resources being created in the deployment. The parameters file contains the values that are currently used for the resource deployments. These are default values, or values manually entered in the portal when creating the VM resource, like location, machine name, and resource group. Scripts just links you to Azure documentation. The same information is accessible while the deployment is happening. For an existing resource, you can download the template or deploy from the Export Template page. Some of you might be thinking, “hang on, now there are only 3 parameters and 1 resource”. That’s because this template is just the virtual machine component and doesn’t include the supporting network infrastructure resources. If you need to get the templates for all resources in a deployment after the fact, you can go to the resource group and select the resources and click export template.</p>
<p>Back at our VM resource, Azure lets you save templates to an online library, which is what I’ll do now by giving the template a name and simple description. You can view templates saved to the library through More Services, then All Services, and then select Templates. With a template, you can redeploy the resource or make a similar resource with different attributes by changing some of the input parameters.</p>
<p>We’ve got the template what now? The usual method for deploying resources using templates is to use a command-line interface, either PowerShell or Azure CLI. We will look at both of these later, but initially let’s create the VM resource through the portal using the downloaded template.</p>
<p>Search for deploy on the home page of the portal and select Deploy a custom template. Under common templates, there are templates for creating common resources that you can adapt and modify. We want to build our own template in the editor. Here we have a blank boilerplate template, which I’m going to replace with the template I previously downloaded. I’ll upload the file and save it. Once that’s been loaded, we can see that there are 6 resources in our template – correct. Now we have an interface for entering the parameters for the resource creation. Typing in all those values does seem a bit painful, but if I click edit parameters, I can upload the associated parameters.json file with all the values in it and click save. Boom, and there we go, the values that are entered as part of the resource creation wizard are filled in as parameters. We can do a side by side comparison of the parameters as they relate to the manual portal process Resource Group, virtual machine name, region, VM size, user name, disk type, and networking. I’ll fill in the password and agree to the terms and conditions. The purchase button is a bit misleading, and I assume I won’t be charged for my own template. Anyway, the template validates correctly as I would expect, and the deployment successfully completes.</p>
<p>As with most things Azure, there is a marketplace for templates where you can browse or search for a template that meets, or closely meets your requirements at Azure quick-start templates. I’ll search for something a little bit interesting involving Cosmos, like Create an Azure Cosmos account for MongoDB API autoscale. Clicking on the link takes us to a description of the template and its parameters, along with instructions on how to deploy the template using either PowerShell or Azure command-line interface. Browse on GitHub will take you to the template’s repo where you can download the template JSON files.</p>
<p>Clicking Deploy to Azure takes back to the same Deploy Custom Template page where you can enter the missing parameters using the GUI interface.</p>
<h1 id="ARM-Templates"><a href="#ARM-Templates" class="headerlink" title="ARM Templates"></a>ARM Templates</h1><p>An ARM template is a JSON file describing the resources or services that you want to deploy and it has many advantages. Templates are idempotent. This means changes are applied only once, which is exactly what we want. Associated with this is repeatability, and that each time we apply the template we get the same result. Unlike a procedural script where the order of commands is crucial, the template is submitted as one object and Azure Resource Manager works out the order that resources should be created in. So dependency management and orchestration of deployment operations are carried out correctly. That JSON format also allows for nested and hierarchical resources and you can divide up a deployment into multiple linked files to make complex deployments modular and easier to manage. Azure Resource Manager includes commands for testing templates, and Azure DevOps has a task for including ARM templates in pipelines.</p>
<p>A template file is made up of five sections. There are parameters that can be passed into the template. A parameter has a name and a type, for example, string or int for integer, so like programming data types. There is a functions section, this is where you define your own functions. This is in addition to the ARM template built-in functions. Any values you want to use within the template are defined in the variables section. So not variables in the traditional programming sense, but more like constants. Of course, we have a resources section which is obviously the most important part of the template as this is where we define the resources or services we want to deploy. Finally, we have an outputs section that could be used for displaying information or daisy-chaining templates. Also at the root of the template, we have the JSON schema, which we shall see is very important when building a template and also the content version.</p>
<p>Parameters allow you to pass variables into the template to make its functionality more dynamic. Each parameter object starts with its name. A parameter has a type that can be an int, bool, array, object, string, secure object, or secure string. You can also define a default value, allowed values and minimum and maximum lengths or values. Within the metadata section, you can give your parameter a description.</p>
<p>Before I move on to the function section, I just briefly want to touch on the built-in functions that are available within ARM templates. As you can see from this table, there are quite an extensive array of built-in functions, ranging from array functions through to string, although not all of the string functions have been listed here. Many of the functions are what you would expect to find in most programming languages and definitely in the .NET environment. Resource functions are there to provide access to your Azure resources and account settings, while the deployment value functions allow you to access different sections of the template.</p>
<p>User-defined functions are more like formulas or expressions rather than functions that you might find in a procedural programming language. They do take parameters that are defined with a name and a data type and the return type called output also has a defined data type. Template variables and parameters are global and can be used within user-defined functions. While you can use built-in logical functions within your user-defined function, there is no facility for iterations or for-loops. Essentially user-defined functions are a way of separating out complex or compound functionality that you want to use more than once into a separate piece of template code.</p>
<p>Variables are key-value pairs that are defined once and can be used throughout the template. As I said earlier, they are more like constant values as they can’t be assigned to once defined. Variables don’t have to be simple data types, they can be nested and complex JSON objects. The resource section is the main event, if you will. This is where we define the resources or services that we want to deploy. For obvious reasons, different resources will have different properties but there are some properties that all resources must contain. Every resource needs a name and every resource is of a type and is located somewhere. The resource shown here is an app service and depends on another resource of the type app service plan.</p>
<p>Output values are essentially the inverse of parameters. They enable you to output values from your template for either informational purposes or as inputs to linked templates, that we shall look at later, or to be used in scripts that executing the template.</p>
<h1 id="DEMO-Virtual-Machine-Template"><a href="#DEMO-Virtual-Machine-Template" class="headerlink" title="DEMO: Virtual Machine Template"></a>DEMO: Virtual Machine Template</h1><p>Let’s look at how the template structure relates to the virtual machine template we previously downloaded. I’m using Visual Studio Code to view the JSON files. Here we have those 22 parameters, followed by the three variables, and then the 6 resources. A virtual machine deployment involves more than just the machine. There is all the supporting network and security infrastructure that allows you to safely connect to and use the VM. Here we have a resource name which is one of the parameters that we input to this template. That’s the parameter definition specifying its data type. If I go over to parameters.json I can see the value that is being inserted for network interface name. Going back to template.json we can see each resource has a type, that is what resource is created. This is a network interface which is defined in the region specified by the location parameter. We have a security group name, virtual network resource, a public IP address resource, the actual virtual machine itself with the various nested properties that define that machine like its size, which is also retrieved from the machine size parameter. Here we have the virtual machine’s dependsOn section specifying that the VM requires the network interface and storage resources.</p>
<h1 id="DEMO-Simple-Template"><a href="#DEMO-Simple-Template" class="headerlink" title="DEMO: Simple Template"></a>DEMO: Simple Template</h1><p>I know what you’re thinking, this is very complex, and where do I start? Well, as luck would have it, Visual Studio has some fantastic features for creating and editing ARM templates. To access the ARM template intellisense, you need to have the Azure Resource Manager Tools extension installed in VS Code.</p>
<p>First thing I’m going to do is create a new file, and save it with the JSON extension. Straightaway, we can see that VS Code recognizes this as a JSON file. This is where the magic starts, or more correctly intellisense, when I type ARM for Azure Resource Management. We can see I have code auto-complete here with some prompts. I’m just going to select the top one, which is a resource group template and there we have all the sections that we have talked about earlier. So if I want to create a simple web app deployment, all I have to do is go into resources and once again type ARM, and we can see here we have a lot of resources to choose from.</p>
<p>Now this is all context-based, and I’m going to select web app, and there we have all the properties that we need to create a web app deployment. Obviously, I don’t want my app to be called webApp1. So I’m going to create a parameter of type string, called appname. We can see here with the yellow squiggly line that part of the template functionality is that it recognizes that I haven’t used that parameter yet. So, I’ll go down here and type open square bracket P and you see the auto-complete prompts with parameters. I’ll pick parameters and type open bracket and I’m prompted with the parameter appname. I can then go and I can just replace all the instances of webApp1 with my appname parameter. Every resource has a type and in this case it’s a web site and it’s already put in the ARM tags and properties for us.</p>
<p>In the dependsOn section, we can see a service plan. But before I define that I’m going to show you how we can test our template before deploying it. If I go to my PowerShell window, which I’ve already logged into Azure and enter Test AzResourceGroupDeployment, I’m prompted for the parameter appname, which I’ll supply, called howdeploywebapp. It’s returned with an invalid template error. It’s complaining that it doesn’t have an appServicePlan1.</p>
<p>Okay, so I need to back in the resources section and I will add a service plan and I will also add another parameter called planname. I can use that parameter everywhere I’ve got appServicePlan1, and that is even within the app service itself, like in this concat function. As you can see, functions, parameters and variables are used within square brackets. The error in the concat function indicates a missing comma. Right, so I’ll save that. Just notice here that the location is picked up from the resource group.</p>
<p>So when we are testing, we are testing it with AzResourceGroupDeployment, and that relies on the fact that it belongs to an existing resource group as opposed to using the Test-AzDeployment command. I’ll go back here and re-run this, howdeploywebbapp and the plan name is howdeployplan and we can see that has been successful. So let’s go ahead and deploy that. I’ll just go back here and change my test to new. Now we can go over to the portal and see what’s happening. If I refresh deployments, we can see we’ve got a deployment happening. Let’s click on that and go into it, and it’s complete. I’ll navigate back to the resource group home page so we can see the newly created resources.</p>
<p>Right, so here we have the plan and the app, and as you would expect. Clicking on the app service resource takes us to the app service, where we can click on the app service URL to see it deployed.</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;$schema&quot;: &quot;https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#&quot;,</span><br><span class="line">  &quot;contentVersion&quot;: &quot;1.0.0.0&quot;,</span><br><span class="line">  &quot;parameters&quot;: &#123;</span><br><span class="line">    &quot;appname&quot;: &#123;</span><br><span class="line">      &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">      &quot;metadata&quot;: &#123;</span><br><span class="line">        &quot;description&quot;: &quot;description&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;planname&quot;: &#123;</span><br><span class="line">      &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">      &quot;metadata&quot;: &#123;</span><br><span class="line">        &quot;description&quot;: &quot;description&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;functions&quot;: [],</span><br><span class="line">  &quot;variables&quot;: &#123;&#125;,</span><br><span class="line">  &quot;resources&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;[parameters(&#x27;planname&#x27;)]&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;Microsoft.Web/serverfarms&quot;,</span><br><span class="line">      &quot;apiVersion&quot;: &quot;2018-02-01&quot;,</span><br><span class="line">      &quot;location&quot;: &quot;[resourceGroup().location]&quot;,</span><br><span class="line">      &quot;sku&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;F1&quot;,</span><br><span class="line">        &quot;capacity&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;tags&quot;: &#123;</span><br><span class="line">        &quot;displayName&quot;: &quot;[parameters(&#x27;planname&#x27;)]&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;[parameters(&#x27;planname&#x27;)]&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;[parameters(&#x27;appname&#x27;)]&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;Microsoft.Web/sites&quot;,</span><br><span class="line">      &quot;apiVersion&quot;: &quot;2018-11-01&quot;,</span><br><span class="line">      &quot;location&quot;: &quot;[resourceGroup().location]&quot;,</span><br><span class="line">      &quot;tags&quot;: &#123;</span><br><span class="line">        &quot;[concat(&#x27;hidden-related:&#x27;, resourceGroup().id, &#x27;/providers/Microsoft.Web/serverfarms/&#x27;, parameters(&#x27;planname&#x27;))]&quot;: &quot;Resource&quot;,</span><br><span class="line">        &quot;displayName&quot;: &quot;[parameters(&#x27;appname&#x27;)]&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;dependsOn&quot;: [</span><br><span class="line">        &quot;[resourceId(&#x27;Microsoft.Web/serverfarms&#x27;, parameters(&#x27;planname&#x27;))]&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;[parameters(&#x27;appname&#x27;)]&quot;,</span><br><span class="line">        &quot;serverFarmId&quot;: &quot;[resourceId(&#x27;Microsoft.Web/serverfarms&#x27;, parameters(&#x27;planname&#x27;))]&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;outputs&quot;: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="DEMO-Linked-Template"><a href="#DEMO-Linked-Template" class="headerlink" title="DEMO: Linked Template"></a>DEMO: Linked Template</h1><p>In this demonstration, I want to show you how to use linked templates. That’s how you can separate resources into separate template files to make management easier and to reuse resources and deployments. This is a little bit of a contrived example but what I’m going to do is separate out the app plan resource from the app service deployment. </p>
<p>First of all, create a new file that I will save as appsplandeploy.json and start with the ARM template boilerplate structure. Then move the plan name parameter along with the plan resource from the existing template file to the new one. </p>
<p>In the appsplandeploy template, I will need to define an output parameter that will pass the planname to the parent or calling template. That output parameter will be the plan name and will be of type String and the value is simply going to be the parameter planname that is being passed in. </p>
<p>I’m going to create a new file for my web app deployment called websitedeploy. This will be the parent or master template. It will just be the content from the original template, so yes I could have just renamed the file.</p>
<p>We can see here that we already have some issues with our missing parameter and service plan, so I will need to add a link to the appsplandeploy template, and I will do that by creating a nested resource. </p>
<p>While link and nested might not be intuitive, I guess that is exactly what we are doing; we are nesting this linked resource within our main resource template. One thing to be aware of is that the template file cannot be accessed locally, you must have that file accessible by HTTP, which means storing it somewhere on the Internet, and in my case, I’ve created container storage where I will upload that template file to. I’ll just upload that file to my storage container templates inside the howarmtemplate storage account. I’ll grab the link to the file and I will paste it into the URI property of the template link section. Obviously the other issue we need to address is the now redundant planname parameter and we do that by using a reference function to reference the output value from our linked template. So the reference name is the name of my linked template resource. I’ll just change the name of that resource from nested deployment to linkedTemplate. </p>
<p>We reference our outputs with the word outputs, then it picks up the name of the output, which is planname, and then we want to use the keyword value to get its value.</p>
<p>We no longer need the dependsOn section, so I will get rid of that. Another thing you need to be aware of is that the reference function does not work as a parameter within another function, that is, you cannot nest it with another function. Replacing the planname parameters within the linked template reference inside the concat function will throw a template error.</p>
<p>One thing I forgot to mention was that in the app service plan template as it is being linked from our website deploy template we will not be prompted for our plan name parameter. Just for the purposes of demonstration, and it is definitely not best practice, I will use the default parameter to specify a plan name. Later on we will look at a much better option. I’ll just save appsplandeploy and refresh it to my blob storage. Before we continue I’ll demonstrate how that reference function within the concat function will give an invalid template error by running a Test-Az- ResourceGroupDeployment. Here we have the invalid template error’s telling us there is a problem at line 30 column 9 and the function reference is not expected at this location. Line 30 column 9 isn’t really accurate but the closest reference we have to that is within the tags property, but I know this to be the case and I will change it and we will retest. Having changed that tag property it passes the test deployment so I can now deploy for real using the new-azresourcegroupdeployment command. Going back to the portal and into deployments of the resource group, we can see the link template and the website deploy are both in action. If we go and have a look at the link template deployment and in outputs we can see the plan name output value and obviously that is also the input for the website deploy deployment.</p>
<p>Let’s recap what’s gone on here. We started with a resource template that had an app service plan and a website. Then we took the app service plan and we put it in another template file; this is called a linked or nested template. The app service plan template file is linked to the master template using a deployments resource. Values are passed from the master into the linked template with parameters, and values generated in the linked template can be passed back to the master with outputs. Input parameters take the same format as we’ve already seen, while outputs are analogous to return values of a programming function. Linked or nested templates must be stored on-line and referenced with a URL. Template deployments can be tested with the Azure CLI test-azresourcegroupdeployment command, taking the resource group and template file as parameters. Once successfully tested a template can be deployed to Azure with the new-azresourcegroupdeployment command.</p>
<h1 id="DEMO-Parameter-Template"><a href="#DEMO-Parameter-Template" class="headerlink" title="DEMO: Parameter Template"></a>DEMO: Parameter Template</h1><p>Obviously, using a default parameter in our linked template, which is essentially the same as hard coding, the value is completely unacceptable and almost pointless. Before I show you how to use a parameter file to dynamically change parameters, I’ll just delete the web app and plan. Let’s go back to visual studio code and create a new JSON file called deploy parameters, and from the autocomplete, I will choose the parameter template. We just need the app name and plan name parameters with values inside the parameter template and add the plan name parameter to the website deploy template. </p>
<p>With the parameters set up I’ll save and close the the template file, and go back to appsplandeploy.json and add the plan name parameter to the website deploy template. The plan name parameter in this template, website deploy is where the plan name comes in from externally. Then we will pass it to the linked or nested template via a parameter within the linked template resource below.</p>
<p>Now in the parameters section of the linked template resource I will just add the plan name parameter and pass it the parameters planname value. This is a completely ridiculous and circular scenario in reality as the plan name parameter is being passed to the link template and then subsequently retrieved through the outputs value. But this is just to give you an idea of how to use parameters in linked templates using the previous example. Now, to deploy the resources, we’ve got the parameters in a file. That file will be passed as a parameter to the new-azresourcegroupdeployment command. The parameter values get pulled out of the JSON file and matched by name to the parameters defined in the ARM template file. Those parameters, can in turn be passed to linked or nested templates, by matching on name.</p>
<p>Let’s switch over to the PowerShell command prompt. First I’ll test the deployment, specifying the resource group name, the ARM template file, and the parameters file. Okay having successfully tested that I will now redeploy by executing the new resource group deployment command with the template parameter. We can see in the PowerShell CLI and the portal that it has successfully executed.</p>
<h1 id="DEMO-Database-Deployment"><a href="#DEMO-Database-Deployment" class="headerlink" title="DEMO: Database Deployment"></a>DEMO: Database Deployment</h1><p>As I’ve said the demos so far have been a little contrived. Now I want to show you a few of the more advanced features of ARM templates like the use of user-defined functions and how to create multiple instances of a resource type using something that could be called a looping mechanism. We will then deploy that template via a PowerShell script which will involve creating a new resource group and then submitting the template parameters using a template object. Let’s begin by creating a new template. I’m going to call it arm deploy and once again that will be a resource group template. In terms of resources, we are going to need a database server and then obviously some databases to run on that server. From the ARM template autocomplete I’ll select arm-sql-server and then arm-sql-db for my resources.</p>
<p>For parameters, I will need a server name and because I am creating more than one database I’m going to need a parameter that lets me tell the template how I databases I want. I will call that dbcount. Because we are accessing Azure SQL I will also need to provide an IP address for the database firewall. That will be startip and endip to define the IP address range. In terms of naming the databases, I’m going to call them test_db and that name will have a number appended to it, and also define an admin name and password. I’m defining these as variables to demonstrate the variable use, but you could just as well pass them in as parameters. I’ll replace SqlServer1 with the servername parameter, which will have to be changed in several places. I’ll also replace the administrator login and password with my variables. Next, I’ll replace the firewall start IP and end IP addresses with the corresponding parameters.</p>
<p>When it comes to the database name this is where it all gets a little bit interesting. So the database name is made up of the server name&#x2F;followed by the database name so the first thing I’m going to have to do is concatenate my server name parameter with the database name. But of course, the database name is a compound of the DB prefix variable plus the database number. To make up this compound name I’m going to define a function that will return the name. Let’s go into the functions section and we’ll look for arm-user, which is for user-defined function. I’ll give my function a name of databasename, and like all functions it takes parameters. This is where the auto complete doesn’t fully meet expectations. The function section has to have a namespace property and all functions have to be defined within a members section of the functions section. I’ll need a parameter for my database name prefix and I will need an integer parameter for the number that will be appended to the name. The return value or output is a string and it is a concatenation of name prefix and index, which I’ll join together with the built-in conact function. Going back to the database name I will use the databasename function firstly by starting with the namespace and the function name. Then I will use the DB prefix variable as my first parameter and then a built-in function called copy index. I guess you could say copyindex is a little bit like the index of a for loop, although we have yet to tell the database template to make copies. I’ll just replace the SqlServer1 text with the server name parameter in the depends on section for my database, as obviously, a database does depend on a database server. Now I’ll add the copy section. So it has a name and it has a count and that count is the number of copies to make and I will get that from my dbcount parameter. I’ll just replace the display name and tags with my compound database name.</p>
<p>Now that we are done with the template let’s move on to the PowerShell script. So this is going to be called dbarmdeploy.ps1 and Visual Studio Code recognizes the file extension and that I’m working with a PowerShell script and it is doing a nice job of syntax highlighting for me. So I’ll start by declaring a resource group variable and I will give it a name and a location. The location is the Azure abbreviation for the West US region. Next, I want to issue the command to create a new resource group. So that’s New-AzResourceGroup with a name and the location, which is the location element of the resource group variable. Next, I’m going to create a compound template variable which will have the name of my template as file name and nested within it the parameters that I want to submit. So that will be server name dbcount, startip and endip. I’ll create a new deployment with New-AzResourceGroupDeployment and use the resource group variable to get the ResourceGroupName parameter. Then the template variable to get the file name for -TemplateFile and then the template parameters object will be for the -TemplateParameterObject parameter, my word that’s a mouthful of parameters. Just in case that wasn’t clear, the TemplateParameterObject is a compound parameter, whereas the other parameters are strings. Right, let’s save that and go to the PowerShell command prompt, and run the script. Straightaway we can see the resource group has been created so that’s a good start, and if we pop over to the portal we can see that the deployment is running. If I open up an Azure SDK command prompt I can issue a deployment group list command to see which deployments are running for my resource group. At the top, I can see the name of the deployment is armdeploy so using that I can issue and az deployment group show command with my resource group and then the name of the deployment. This will also return all the details of the deployment plus the provisioning state at the bottom which is currently showing it as running.</p>
<p>Okay, the server has been deployed and Azure resource manager has accepted the database deployments. Going back to the PowerShell window we can see that the whole deployment has finished successfully and it returns our input parameters. I’ll just open up SQL Server management and log into the database server and check out my to test databases. Finally, I will remove the resource group with the force parameter so I’m not prompted.</p>
<h1 id="Deploying-with-a-Script"><a href="#Deploying-with-a-Script" class="headerlink" title="Deploying with a Script"></a>Deploying with a Script</h1><p>As I said at the beginning of this course in the architecture section, Azure Resource Manager accepts commands from PowerShell and the Azure CLI. In a way, templates are a little bit like the portal in terms of providing an alternative interface. Everything that you can do with a template you can do with a script. Here is an example of what a script might look like for creating a resource group in an Azure SQL server with firewall rules and a database. In some ways, this does seem more concise and easy to understand what exactly is going on here, but in one crucial respect, templates have an advantage over scripts when it comes to deployment mode.</p>
<p>Azure Resource Manager has two deployment modes; the default, which is incremental, means that whatever is in your deployment is added to your resource group, whereas complete says the resource group will become whatever is in your deployment. This essentially means that the resource group is cleaned out before the deployment is applied or all resources that are not in your deployment are removed from the resource group.</p>
<h1 id="Course-Summary"><a href="#Course-Summary" class="headerlink" title="Course Summary"></a>Course Summary</h1><p>Let’s recap what we have learned about Azure Resource Manager. It’s not the Azure portal. It’s the behind-the-scenes process that’s mostly involved with managing the deployment of resources in the Azure cloud. There are multiple interfaces for interacting with Azure Resource Manager apart from the graphical interface of the portal.</p>
<p>You can issue commands through PowerShell and the Azure CLI, but the preferred method is to use ARM templates. Azure Resource Manager templates are JSON files with sections that allow you to specify parameters, variables, functions, and resources. There is also an outputs section so you can pass values from one template to another.</p>
<p>A template can specify multiple resources, and multiple resources can be specified in multiple template files that are linked to a master template deployment file. Visual Studio Code has an IntelliSense extension for creating ARM templates. This extension has auto-complete and syntax checking and greatly simplifies the creation of templates.</p>
<p>As well as defining your own functions, there are many built-in functions to work with strings, arrays, logical comparisons, and Azure resources. Once a template has been defined, it can be tested with the Test-AzResourceGroupDeployment command. The template can then be deployed to Azure using the New-AzResourceGroupDeployment command. Both of these commands can be actioned either through PowerShell or the Azure CLI.</p>
<p>When a deployment is in progress you can monitor it through the portal or by using the Az group deployment list and show commands. You don’t have to create your template from scratch. You can download deployments as templates that you have created previously through the portal. This reaffirms the architecture of the portal as an interface to the Azure Resource Manager.</p>
<p>There is also a marketplace of Quickstart templates that you can use as-is, or download and modify. ARM templates simplify deployment by taking care of dependency management and orchestration. Unlike deploying resources with a script, you don’t have to worry about the order you define your resources in. Testing a deployment will let you know if dependencies are missing, and if you deploy without testing either the whole template is successful or none of it succeeds. You won’t end up in a situation with half of your resources deployed due to missing dependencies.</p>
<p>When a new resource or service becomes available on Azure often deploying an instance is only available using ARM templates and commands. Quite often a resource is released and there may be some time before the portal is updated to support it. But the main reason to become familiar and experienced with Azure Resource Manager is that it is by far the easiest method to ensure that your deployments are consistent and repeatable. This is of particular importance when deploying infrastructure as code through a DevOps pipeline.</p>
<h1 id="Course-Introduction-1"><a href="#Course-Introduction-1" class="headerlink" title="Course Introduction"></a><strong>Course Introduction</strong></h1><p><a href="https://github.com/cloudacademy/intro-to-arm">Github Repo</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Introduction-to-Azure-Cosmos-DB-23</title>
    <url>/2022/11/14/AZ-204-Introduction-to-Azure-Cosmos-DB-23/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Greetings. Welcome to Cloud Academy’s course on Microsoft Cosmos DB. I’m delighted to have you join me on what is bound to be an educational and delightful adventure into the world of database technology. First, I’ll let you know a little bit about myself before I get into the course outline. My name is Jonathan. I’m one of the course developers with Cloud Academy. I work professionally as a technical consultant specializing in DevOps, data engineering, and security. Long ago in another life, I was a public school teacher, so I love educating people and I’m thrilled to be doing it again, only now, with technology. </p>
<p>This course is designed to be very practical. It’s meant for technology professionals, DevOps engineers, data architects, CTOs, etc, with the goal of helping them get a solid understanding of Cosmos DB in a short time. So, what exactly are the prerequisites then for a course like that? Well, we’re going to be doing a pretty deep dive on the Cosmos DB architecture and its varying data models. For that reason, we recommend that people have some basic knowledge of database technologies. You should also have at least a passing familiarity with <a href="https://cloudacademy.com/library/azure/">Microsoft Azure</a> and cloud hosting generally. So, when I talk about how an Azure service can talk to Cosmos DB, I’m going to assume that the students know what that means at a high level. In short, if you have any technical experience working with cloud providers and databases, you’ll probably be fine. If this is your first time learning about databases, then maybe you’ll struggle a bit.</p>
<p>So, what are the exact learning objectives for a course like this? Well, I’ve narrowed it down to three big ones that will guide each section. Objective one, is to ensure that the student gains a <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/intro-azure-cosmos-db/">basic understanding of the Cosmos DB</a> technology, including its feature set and design philosophy and a little bit of history too. Objective two, is to teach students how to use Cosmos DB, via its APIs, Microsoft CLI tools, and the Azure web console. Finally, objective three, is to give students a practical understanding of how to integrate Cosmos DB with other Azure services with the goal of creating a working app. So in short, what is Cosmos DB, how do we use it, and then concrete example. So, lastly, I would like to encourage everyone to leave feedback. Email <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a> if you have any questions, comments, suggestions, or concerns. We always appreciate people taking the time to provide feedback. So now without further ado, let’s get started.</p>
<h1 id="Introduction-to-Cosmos-DB"><a href="#Introduction-to-Cosmos-DB" class="headerlink" title="Introduction to Cosmos DB"></a>Introduction to Cosmos DB</h1><p>The fact that you’re here with me taking this course implies that you know, or at least care a little bit about data based technology. If that’s the case, then you know there are a lot of different products out there. There are relational databases like PostgreSQL and MySQL as well. You have no sequel systems like MongoDB or key value stores, collum databases, things like Cassandra, numerous enterprise offerings from big companies. Things like Amazon’s DynamoDB. So with such a crowded ecosystem, the first question anyone would rightly ask about Cosmos DB is what makes it so special? Before we try to tackle that question, let’s talk a little history.</p>
<p><a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/introduction/">Cosmos DB</a> is actually an extension of Microsoft’s DocumentDB which was released back in 2014. Microsoft had been developing Cosmos DB since 2010 and in 2017, it officially migrated all DocumentDB users to Cosmos DB. Cosmos DB supports the same SQL-like API as DocumentDB as well as several other APIs and features. Now according to <a href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>‘s own documentation, Cosmos DB is best described as a globally distributed multi-model database. Now the two descriptive terms there are key. </p>
<p>Globally distributed and multi-model, that should already give you an idea of the problems Cosmos DB is meant to solve. For those of you familiar with CAP theory, C-A-P CAP theory, you could infer that availability is one of the chief guarantees. This is critical because achieving reliable database performance across multiple geographic regions is very difficult, especially for relational databases. So what do we mean when we say that Cosmos DB is a multi-model database? When we use the term model when talking about databases, we’re referring to how the data is actually stored and what sort of APIs are used for clients to read and write data. So for example, Cassandra has a certain API and storage paradigm that makes it more suitable for some use cases than others. MongoDB and PostgreSQL have their own models. So what does it mean to say that Cosmos DB is multi-model? Well, as you might guess, this simply means that with Cosmos DB, you have the flexibility to use a variety of different APIs for different use cases. In fact, the available models for Cosmos DB come from well known database technologies. Cosmos DB supports Table API, Cassandra, SQL, MongoDB, and Gremlin. </p>
<p>There are STKs available in multiple languages for clients. Cosmos DB is sort of like DynamoDB in that it is a database as a service. That is, you don’t install it on your own server and configure it like you would with Cassandra or Postgres. Rather, what you do is you sign up for access through Azure, and behind the scenes Microsoft handles the scaling. Microsoft Azure offers 99.999% uptime SLA to ease concerns about entrusting your precious data to them. Still, it is important to keep in mind the relative lack of control you have if you rely on Cosmos DB. It isn’t like a typical database system where you can SSH to the server and tune things the way you want. This is understandably a deal breaker for some people. On the flip side, as a former DynamoDB user, I can say that it can be a really big boon for a small startup to have the reliability and performance guarantees of a large company like Microsoft backing your app. </p>
<p>It lets you focus on your business logic and scale very quickly. So, that’s it in a nutshell. Cosmos DB is a powerful database as a service system designed to support a variety of data models and work across multiple geographic regions. In the next lesson, we’ll dive into the <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/cosmos-db-features-and-capabilities/">feature set</a> and talk about how companies actually might use Cosmos DB. See you there.</p>
<h1 id="Cosmos-DB-Features-and-Capabilities"><a href="#Cosmos-DB-Features-and-Capabilities" class="headerlink" title="Cosmos DB Features and Capabilities"></a>Cosmos DB Features and Capabilities</h1><p>For this section we’re gonna focus on Cosmos DB’s unique capabilities. We are not going to cover literally every single thing <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/introduction/">Cosmos DB</a> can do. There is a lot of overlap with other database technologies and quite frankly if you just want a feature list you’re better off reading their documentation, linked below. Instead, in this lesson, we’re going to focus on the six most important and compelling capabilities unique to Cosmos DB. Those six features are, in order, global distribution of data, serverless architecture, multi-model support, throughput consistency guarantees, partitioning, and security. Let’s start by talking about Cosmos DB multi-region support. This is one of the main reasons enterprises choose to use Cosmos DB. The fact that it is designed from the ground up to support access patterns from all over the planet. With over 50 geographic locations for its data centers, Cosmos DB users can ensure minimal latency for their users. What’s more, new locations are regularly added each year. Multi-region logic is deeply integrated into the Cosmos DB service. As the user, you can associate as many geographic regions with your data as you want.</p>
<p>You can tune consistency levels for read and write operations, to improve availability or data precision. You can set entire regions as read only, write only, or read-write. Furthermore, you get built-in failover that lets your set priority lets you set priorities for each region, so you can decide what happens if one of your US data centers goes down, for example. You can plan for exactly which regions take precedence and how you will recover. In section two, we’ll go into how all of these geolocation features are used via their Cosmos DB rest API and web console. The next key thing to introduce is Cosmos DB’s serverless architecture. As described previously, Cosmos DB is an example of a database as a service. You do not set up database servers and manage them, instead you just get an endpoint for your app to utilize. The currency for making use of the Cosmos DB endpoint is known as request units. This will determine how much you pay and what sort of performance guarantees you can get. The larger your data, the more frequent your queries, the more indexing you do, the more consistency you demand, the larger the number of request units you will need. The nice thing about this system is it greatly simplified your data layer. You don’t need to think about memories, CPU, hardware provisioning, OS optimization, updates and patches, SSL certs, et cetera, et cetera. All of this operational overhead of managing a database is gone. The time saved alone could translate into more than enough cost savings to offset the cost of needed request units. Cosmos DB’s serverless architecture also ensures strong SLAs. You get a guarantee of 99.999% uptime, far better than what a typical tech company achieves on their own. You’ll also get first order integration with other <a href="https://cloudacademy.com/library/azure/">Azure</a> services and great support. So let’s move on and talk about the multi-model data support. </p>
<p>This I think is perhaps Cosmos DB’s most intriguing feature. Cosmos DB offers APIs for Cassandra, Gremlin, MongoDB, SQL, and Table Key-Value API. This means that with a single Cosmos DB account, you can run multiple database engines. So if a portion of your data is best suited for Cassandra, you can set up Cassandra key spaces. And then if a subset of your data needs a document paradigm, you can use Mongo. If you happen to need a graph database and a relational database as well, you can add them as well using Gremlin and SQL. This means you have the flexibility of using the right data model for the job. It means you can easily migrate an existing heterogeneous data architecture into Cosmos DB with little hassle. Now there are some important trade-offs and restrictions that come from using multiple APIs. We’ll dig into that in later sections. Next, let’s talk about throughput and consistency. As far as the cap theorem goes, Cosmos DB is very strong on partition tolerance and availability. Like Cassandra, consistency is tunable and throughput is a function of your request units and consistency settings. Cosmos DB features five different consistency settings. </p>
<p>In order from strongest to weakest guarantees, they are strong, bounded staleness, session, consistent prefix, and eventual. If you need to ensure that always the most recent data is read, choose the strong consistency level. It ensures that no reads are processed until rights are completed durably by a quorum of replicas. With bounded staleness, you get a configurable level of consistency. Reads will lag behind writes by either an adjustable time interval or a number of item revisions. Then there’s the session consistency level. This gives you a read your own writes guarantee suitable for scenarios where you need guarantees at the level of individual clients. It’s considerably cheaper than bounded staleness and strong consistency levels, but you get no consistency guarantee outside of individual client session. And then lastly you have the consistent prefix and eventual consistency levels. Both of these guarantee that your data will eventually converge to the most recently written. With the consistent prefix, at least you get an additional guarantee that data will never be out of order. So even if you don’t get the most recent data on read, you can at least be sure that you’re not skipping over data inadvertently. Both of these consistency levels allow for fast throughput and are relatively inexpensive. The more inconsistency you can tolerate, the more you can save money on request unit usage. </p>
<p>Let’s now talk about partitioning and indexing a bit. In Cosmos DB, there are physical partitions that compromise compute hardware resources. SSD storage, CPU, memory, logical partitions, which are a subset of the physical ones. In other words, a physical partition may be made up of several logical partitions. The basic abstraction for sets of data is a container. A container in Cosmos DB can span multiple physical partitions and will be responsible for storing your collections, graphs, SQL tables, et cetera. Every document in Cosmos DB is uniquely identifiable by the combination of its partition key and row key. The partition key, specifically, acts as a logical partition for your data and helps to create boundaries to enable cosmos DB to map data to specific physical resources. In Cosmos DB, the data for a single logical partition must reside on a single physical partition. When designing collections of data, two critical things to think about are partition key and indexing. On the latter point, Cosmos DB automatically indexes all of your data. However it’s possible to create custom indexing policies that let you tune trade offs between query throughput and consistency. Now regarding partition keys however, you’ll have to think carefully about the nature of your data to decide on a proper partition key. People coming from the Cassandra world will have some good intuition here. </p>
<p>The main thing you want is a column with high cardinality and a large variety of values to help distribute your workloads evenly. See Azure’s best documentation for more details. We will cover both of the indexing and partition key selection in more depth in section three of this course when we get into the practical application. And finally let’s talk a little about security. Now as a cloud-based service, Cosmos DB has many of the same security considerations as any other provider. You need to control who has access to your Azure account, who has credentials to use the API and ensure that sensitive data is properly isolated. The nice thing about Cosmos DB though is that it has very sane defaults when it comes to security. Without taking any action at all, Cosmos DB encrypts all data both at rest and in transit. Cosmos DB supports HTTPS, TLS for all client to server interactions. It also includes two different types of credentials for different use cases, master keys, and resource tokens. </p>
<p>The former are useful for administrators that need to make significant changes, while the latter can be used by clients with narrower needs. So there you have it, consider this your crash course into the world of Cosmos DB. For a more detailed breakdown, please take a look at the Cosmos DB documentation, it will answer many of your questions. Our goal in the following two sections is to go beyond the documentation and get you to actually use Cosmos DB on your own. In section two, we’ll dig into how to set up and utilize Cosmos DB futures that were described here and in section three we’ll walk through <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/introduction-to-using-cosmos-db/">creating an actual software service</a>. Good luck and see you there.</p>
<h1 id="Introduction-to-Using-Cosmos-DB"><a href="#Introduction-to-Using-Cosmos-DB" class="headerlink" title="Introduction to Using Cosmos DB"></a>Introduction to Using Cosmos DB</h1><p>In this section, we will get a little more hands-on with <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/introduction/">Cosmos DB</a>. We’re gonna learn how to actually start using Cosmos DB via the web console in various APIs. This is not a lab, so you’re not required to actually follow all of the stops. However, if you have access to an <a href="https://cloudacademy.com/library/azure/">Azure</a> account, I would suggest setting up Cosmos DB and actually trying some of what we cover on your own. We’ll start with just the initial setup via the web console. We will create a Cosmos DB account, select a data model API, and show how to manage our data via the browser. This will be a good opportunity to review several key <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/cosmos-db-features-and-capabilities/">features</a>. Next, we’ll explain how to use libraries for languages like Python and .NET to interact with our Cosmos DB storage. We will also cover using CLI tools, Powershell, and the REST API for Cosmos DB. By the time you’re done with this section, you should have a theoretical knowledge, enough to dive in and do some real work. So if you’re ready, let’s <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/getting-started-with-cosmos-db/">get started</a>.</p>
<h1 id="Getting-Started-with-Cosmos-DB"><a href="#Getting-Started-with-Cosmos-DB" class="headerlink" title="Getting Started with Cosmos DB"></a>Getting Started with Cosmos DB</h1><p>Section two, part two, Getting Started with Cosmos DB. The first and most obvious prerequisite for using Cosmos DB is having a Microsoft Azure account. Once that’s ready, you can go ahead and create a Cosmos DB account. This is as simple as clicking Create a Resource in the top left of the web UI and then clicking on Databases or just starting a search for Cosmos DB by typing that in.</p>
<p>You will then be prompted to input some basic information about your new cosmos DB resource, a name to uniquely identify it with your account, as well as a resource group name, a region, and potentially an option for replica failover region. Also, most important, you’ll have to select your API type. This is what’s gonna define the data model as we said and recall that you can select from MongoDB, Cassandra, SQL, and Gremlin and Azure table.</p>
<p>Now, once everything is filled in click create and wait for a few minutes. It’ll validate and your account will be generated. Now, remember at this point you have a Cosmos DB account resource that’s ready to use but there’s no actual database at this point. What we wanna do next is to use the web console to define a database and then a collection or a table to which we could write some data.</p>
<p>Now before we walk through the steps to do that it’s important to clarify some of the nomenclature here. Different database engines use different terms to describe database schema. So for example, Cassandra uses terms like keyspaces and column families while Mongo uses terms like collections and documents, and in SQL generally, you have a database that has tables and then a row within a table to describe an individual item and that’s kind of your hierarchy.</p>
<p>So depending on the API we pick, we’ll actually see different terms used in the web UI. Now, using the core SQL API we’re gonna see terms like database and container as our general terms. The latter container, this refers to the units of scalability and are analogous to MongoDB collections. So, the process for actually setting up our database in the web console goes something like this.</p>
<p>In the Cosmos DB dashboard we wanna select the Data Explorer option on the left menu. Now we could also start by selecting Add Container in the top menu; however, going through the data explorer makes what we’re doing a little bit more transparent and obvious.</p>
<p>So, in the data explorer UI, we can do all sorts of typical database tasks such as executing queries and changing configuration. Now once you’re in the data explorer page simply click on the New Database button to define your first database. All you need to fill in is a name and a number of RUs, request units, and remember that the RU value will define the kind of throughput performance you can expect.</p>
<p>Now once you have a database, its name should appear in the left side menu, the one that’s to the right of the leftmost menu with the other Cosmos DB options. So click on the little three dots next to your database name and you’ll get an option there to create a container.</p>
<p>So you give your collection a name, you give it an ID, and you give it a partition key, which should be optional, and then you’re done. You’ve got a database and you’ve got a container within your database. Now, that’s just the basic setup and with that clarified let’s step back for a minute and try to fully understand how request units work, because this determines our throughput and it determines our cost to a large extent. </p>
<p>How many request units should we set for our account? What is the formula? Azure offers some really good general advice in the <a href="https://docs.microsoft.com/en-gb/azure/cosmos-db/request-units">documentation</a>. So of course, be sure to check out the <a href="https://docs.microsoft.com/en-gb/azure/cosmos-db/request-units">links</a>. They also offer a nice request unit calculator tool where you can upload a sample JSON document and input some parameters such as reads and deletes, updates per second, kind of your expected use case, and then the calculator will spit out an estimated optimal value for how many RUs you need.</p>
<p>So, without using that, the basic formula for determining RUs is to multiply the number of desired reads per second by the average item size in kilobytes and then perform the same calculation for desired writes per second and then add those two numbers.</p>
<p>So, for example, if your item size is two kilobytes on average and you need 300 reads per second and 500 writes per second you would get 600 and 1,000 by multiplying those two numbers by two, two kilobytes. And therefore in that scenario you add those two numbers together, you should opt for roughly 1,600 RUs, okay?</p>
<p>Now, there are a few important other variables to consider here; document indexing, complexity of query patterns, and critically the desired consistency level. Now remember there’s five; strong, bounded staleness, session, consistent prefix, and eventual. All of these parameters will have an impact on the proper RU setting. So for this reason we strongly recommend taking a look at the documentation and testing out the RU calculator but do keep in mind the formula above. And that’s basically it.</p>
<p>That’s it for this lesson. Congrats, you now know how to set up the Cosmos DB account, the endpoint, and also calculate RUs, all of this using the GUI. You can create your basic config, you can execute queries, you can add arbitrary data. You’re ready to handle basic maintenance for things like request units and other config. Very magical stuff, but of course we can’t stop there. Unless you have a very unusual app, you probably want software to handle querying your database instead of humans. So, in the next lesson, we will learn all about the Cosmos DB API and how you can get computers to do all of this stuff for you. See ya there, space cowboy.</p>
<h1 id="Cosmos-DB-API"><a href="#Cosmos-DB-API" class="headerlink" title="Cosmos DB API"></a>Cosmos DB API</h1><p>So we’ve got our <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/introduction/">Cosmos DB</a> account set up. We can select a desired data API, create databases, write arbitrary data, and execute queries all from the browser. We’re ready to administer our data intelligently. Swell right? Well, in all likelihood you’ll not be doing all of your database reading and writing manually via GUI. You need applications and tools to be able to talk to Cosmos DB. You may want your web app to serve requests to Cosmos DB or you may have devops scripts that have to execute Cosmos DB queries. This is where the Cosmos DB API comes into play. The API documentation is divided by data model, meaning there are separate docs for a Cassandra API, MongoDB, Gremlin, SQL, Azure Table. When you select one you will get information for how to set up your development environment depending on your language choice. Cosmos DB has strong support for many languages including .NET, Java, Python, Ruby, JavaScript. The best way to get started is to look through the SDK documentation for the language of your choice. So for example, let’s say we wanted to use Cosmos DB’s SQL API with, oh I don’t know, how about Java. </p>
<p>The documentation will link us to a GitHub repo for the Java Cosmos DB SDK. There you’ll find a nice README and walkthrough to help you set up the SDK with your Java IDE and begin writing code that could interact with Cosmos DB. Now in some cases you won’t use a Cosmos DB SDK specifically, but rather a driver meant for whatever data model API you selected. So, for example, if we go through the Cosmos DB Python quick start guide for a Cassandra API server, the setup documentation links to the Python Cassandra driver GitHub repo. The Python code you write for Cosmos DB in this instance will be just like Python code for a Cassandra app. You will import the Python Cassandra driver and use its methods to connect, write, and query your Cosmos DB. This flexibility, I think, is one of the most powerful things about Cosmos DB. What it does is it makes it so that if you already have expertise in one database technology, like Mongo or SQL, you can leverage that and often reuse the same code in SDKs. The only new overhead is ensuring your applications have the right permissions and authorization to actually connect to your Cosmos DB account. We’ll drill down about that in section three when we build a real service. Furthermore, with Cosmos DB we have more than just SDKs, and in the web console we have CLI tools and a REST API and Powershell. </p>
<p>Using the Azure CLI tool we can do all of the things we did with the web console in the previous lessons. Now see the links below for the complete command reference. We’re not gonna go through every command. There is also a nice set of BASH scripts in that link that make use of the CLI tool to set up and manage your databases. They have them throughout the Azure documentation. With Powershell we can do everything from the CLI as well as scripting. So if you’re comfortable writing Powershell code you can do many of the same things as you would in BASH scripts, only it’ll probably require fewer lines of code. And then finally you have the REST API. This lets you do everything your own way with any programming language that can make HTTP requests or you can just use curl, if it pleases you. So as we can see from this section, Cosmos DB is both very powerful and very flexible. We can do most of our setup, configuration, and maintenance from the web console or using command line tools. When it comes time for our software to read and write data we have options for many languages and workarounds for unusual use cases. All of this surely sounds great, and by now you have enough theoretical understanding to dive in, build your own little app with Cosmos DB. However, to help ensure you start strong in section three we’re gonna walk through <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/app-creation-with-cosmos-db/">building an application</a>, using <a href="https://cloudacademy.com/library/azure/">Azure</a> services, and Cosmos DB. It’s gonna be a blast, see you there.</p>
<h1 id="Introduction-to-Creating-an-App-with-Cosmos-DB"><a href="#Introduction-to-Creating-an-App-with-Cosmos-DB" class="headerlink" title="Introduction to Creating an App with Cosmos DB"></a>Introduction to Creating an App with Cosmos DB</h1><p>By now, you should have a pretty strong theoretical understanding of <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/introduction/">Cosmos DB</a>. We walked through its feature set, explained its <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/azure-cosmos-db-api/">API</a>, demonstrated its tooling and generally covered how the technology can serve as a backend for a variety of use cases. What we have not done is actually tried to build something so that we can see all this cool stuff in action. In this final section of the course, we’re gonna do just that. We’re gonna stop being polite and start getting real. </p>
<p>This isn’t a Cloud Academy lab, so you won’t actually need to create anything in a <a href="https://cloudacademy.com/library/azure/">Microsoft Azure</a> account to follow along. Instead, we’ll just very carefully cover step-by-step how to create a working application backend using Cosmos DB. Now, to keep things simple, we’re not gonna create a frontend. The app we create will be a simple event processing system. It’ll take in event data using Azure Event Hub, transmit the events to an Azure Function where we can perform transformations, and then finally, save everything to Cosmos DB. The setup for Azure Event Hub and Azure Functions will be minimal. We will include some screenshots and explanation, but we won’t focus too much on those systems since they’re out of scope for this class. </p>
<p>There are other classes if you wanna dig into those tools. You’re welcome to skip those short lessons if you don’t feel like they’re of use to you. The meat of this section will be the creating our app backend and validating our app lessons where we will walk through the Cosmos DB endpoint setup and then run some test data through <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/azure-event-ingestion/">Event Hub</a> to see if it actually persisted in Cosmos DB. Again, you don’t actually need to do any of this yourself, but if you have access to an Azure account, it’s a great way to reinforce all that we have covered. So if you’re ready, let’s get to it.</p>
<h1 id="Event-Ingestion-in-Azure"><a href="#Event-Ingestion-in-Azure" class="headerlink" title="Event Ingestion in Azure"></a>Event Ingestion in Azure</h1><p>Okay. Welcome to our Cloud Academy demo for this course on Cosmos DB in Azure. And now for this demo section, there’ll be multiple videos and we’re going to put together a backend application using Azure Event Hubs as your functions and as your Cosmos DB.</p>
<p>So for this first video, we’re gonna start by creating an Event Hub. Now what you see here on the screen, this is my personal account. There’s some test infrastructure here. That’s pretty recent. And we’re gonna run through how to create this piece, the Event Hub.</p>
<p>Now, if we just click Event Hubs, we’ll see here it takes us first to this section, which these are namespaces. You have to first create a namespace for your Event Hub. So if you click on it here, we have this Bethune namespace. This is my last name. And then there is a bethune Event Hub, and we can create click plus to create an additional Event Hub within that. But let’s start from scratch.</p>
<p>Let’s say we don’t have any namespace at all. We can go through the, create a resource menu here. And if you want, you can actually just type Event Hubs if you can’t find it and you can click create, and it’ll take you to the wizard and it will tell you first to create a namespace.</p>
<p>Now there’s some information you fill out here. We’ll stick with pay as you go, resource group, we have an existing one, but let’s say we wanna create a new one. We’ll call it, let’s create a new one and we’ll call it bethune2 and so we have a new resource group that will be for this namespace. And then the namespace name we’ll also just call that bethune2.</p>
<p>We wanna pick a region for the data center. I think East US is fine. We’ll stick with the standard pricing tier we can go with, let’s say one consumer group is enough for us and throughput units one is fine for a test. And then we can just go to review and create.</p>
<p>Now after you click review and create, it’s not actually gonna create it right away, it’s gonna just do validation. So don’t navigate away, it’s just done the validation piece. So we know that this configuration is okay, and then we have to click create. And now it’s actually deploying the infrastructure for our Event Hub namespace. That doesn’t take very long, but we have to, we’ll give it a minute and we’ll refresh. Okay.</p>
<p>So eventually your deployment for the Event Hub namespace will complete. It’ll get to this point and we can just click on, go to resource and we can see here at bethune2 Event Hub namespace, and we can navigate there from the home menu as well.</p>
<p>If we click on Event Hubs and we’ll see there’s the additional namespace right there, it’s still in status activating, but that’ll be done very soon. So at this point, we don’t have an actual Event Hub yet. We just have a namespace. So to create an Event Hub, we click on the namespace bethune2 that we created and we want to do we wanna add an Event Hub we do plus Event Hub. And this is pretty simple as well. We just have to give it a name. We’ll call this as well bethune2 partition count of two is fine. Just for test purposes. We don’t need to worry about message retention or capture at this point.</p>
<p>So we’ll just click create and that’ll trigger the validation. And it’ll take a second, but eventually, we’ll see spin up right there bethune2. Down there, we can see the Event Hub. These create very, very quickly, but after you’ve done that, congrats, you’re done. You have your ready-to-use Event Hub right here. No messages or traffic yet, but we’ll get to that soon enough.</p>
<h1 id="Creating-our-App-Backend-with-Cosmos-DB"><a href="#Creating-our-App-Backend-with-Cosmos-DB" class="headerlink" title="Creating our App Backend with Cosmos DB"></a>Creating our App Backend with Cosmos DB</h1><p>Okay, so now in this next demonstration, we’re gonna go through the process of setting up an Azure Cosmos DB account. Now that we have a new event hub, namespace, and event hub, we need a backend to save data. And in the final section, we’ll do. In the section after this, we’ll talk about Azure functions, something to actually process data.</p>
<p>So we have here a sample account, bethune. Now I’ll walk through the steps of how we created it. Similarly, we can do the Create a Resource wizard if we want, and we can just search for Cosmos DB. And so we click on create, and again, we just go, to the fill in the information. We’re gonna go through the same resource group we just created before, bethune2, we’ll say pay as you go and a name for the account. Let’s just keep it as bethune2.</p>
<p>API, this is very important. As you know, Cosmos DB can support many different data structures and API types. So we can do Cassandra. We can do Gremlin. We’re going to just stick with the SQL for this demo. We’ll keep it, keep it simple.</p>
<p>We’ll do the provision throughput capacity mode here. There’s a serverless version in preview mode as of this recording but we’ll stick with the provision for the location. Let’s keep it in the same place as our event, hub US East. And then there’s some additional configuration options here. We don’t really need any of this stuff. Multi-region geo-redundancy. This is, if you want a greater, greater resilience and more robust deployment, we don’t really need to worry about this stuff.</p>
<p>So review and create, and as before it’ll do a validation first. So it’s valid. There’s nothing wrong with this config. We then click create, and this will just take a moment to deploy. So the account is in progress and it’s important to remember once this is done, you don’t have a database yet. You just have the account. So you have to actually create the actual schema, the collections and, you know, DB instances manually, or you can actually have your software created. You can have an Azure function, or you could submit a SQL query. There’s many ways to, to create the schema afterward, but here we can see a deployment is in progress. </p>
<p>Usually only takes about a minute or so, and we can see, well, if we click refresh, we’ll see if it’s making any progress. Alright, well, let’s, let’s give this a sec. We’ll come back when this is done.</p>
<p>Okay. So it took a few minutes longer than I thought, but it did eventually complete. We have here our Azure Cosmos DB bethune2 account, which successfully finished. So what we can do is now actually look at the data, although there’s no data there, I’ll, I’m gonna show you how we can create a database, which will be our, our storage for our application.</p>
<p>So there’s the bethune1 here, which was done for test purposes. This is bethune2 account that we just created. Now, if we go into it, there’s nothing there right now. So to create a database within the account, there’s a lot of ways you can do that. You can get with the API, you can get with it with the query. We’re going to go through the Data Explorer piece here. And in this window, you can see, they give us a few options. You can create a container, which is a sort of a fixed storage and then throughput unit. Or you can go through here to create the database directly, which will give us our initial schema. And remember, this is all SQL API.</p>
<p>So what we’ll do is we’ll, we’ll just create a database to start. We’ll give it a unique ID to call it. We’ll call it the database bethunetest, just to give it a slightly different name. You know, the, the throughput is fine. We can pick the default. We don’t really need to worry about scaling or anything right now. So we’ll just click okay for that. And in a few seconds we should have our database backend. Good to go. Fetching. Okay. There it is.</p>
<p>Now that’s coming up and we can see there’s no data in there. Now, if we go to this older one that does have data, we can see what it would look like. What, what we should hope to get. This one, bethune, has working data in it. I believe it’s under the bethune1 collection. Yeah, here we go.</p>
<p>So you can see here items. If you do have data, you’ll see, you know, a separate collection and you’ll see some items that will load. So this one has one unit there and this one, oh, this one actually has more of than this one under Bethune has more items, these message items here. So we’ll know that we’ve succeeded with our app. When we can go back to this one here that we just created, bethune2, and we should see a collection and items.</p>
<p>So in order to do that, we need to create an answer function, to process some data. And then we’re going to send some messages that will be captured by the event hub processed by the function and stored in our Cosmos DB backend. So next up is, Azure function, see you there.</p>
<h1 id="Azure-Functions-and-Cosmos-DB"><a href="#Azure-Functions-and-Cosmos-DB" class="headerlink" title="Azure Functions and Cosmos DB"></a>Azure Functions and Cosmos DB</h1><p>Okay, so now that we have a working Cosmos DB service and backend running and we have an Event Hub for receiving events and messages, the next thing we need is a Azure Function. That’s gonna be our actual service for processing the data we receive and we have an example here called bethune, and we’ll dig into the code and a little bit but before we do that, I wanna show how it is we set up an Azure Function app.</p>
<p>As with a lot of Azure services, there’s two parts essentially. There’s the shell, the Function app. And then there’s the code itself. The function that’s actually running. So as before we can just go through the create a resource wizard or Function app. We click Create. Pay as you go is fine. We want an existing resource group. We’ll put it in bethune2. We’ll name it bethune2 as well.</p>
<p>Our runtime stack, this is important. We’re gonna do Node.js ‘cause we wanna do a JavaScript app. And how we publish it here, we’re gonna just publish it as code. You can also save as a Docker Container. Version 12 is fine. Most recent default, Node.js version from the time of this recording. And we’ll stick to US East for our region.</p>
<p>There’s some additional configuration here. We go through our hosting. It’s gonna need a storage account so we’ll just, there isn’t an existing one in this namespace, in this account so we’ll create a new one by default. We’ll just call it new storage account, bethune, whatever, that’s fine. Operating system, Windows is okay. We’ll stick with the Windows default. And our plan type is serverless. We don’t need to pick one of the options, other options here.</p>
<p>There’s an app service plan and premium plan. If you know you need, you know, more storage and more resources. And then monitoring we can accept, well actually we’ll go with no. We don’t need to enable application insights. That’s more if we need more deep level granular monitoring. You can add that if you’d like, but for this tutorial we won’t need it. And for tags, we’re not gonna add any tags. That’s fine.</p>
<p>So we’ll go ahead and review and create. And as always, it’ll do a validation first. Config seems to be okay so we click Create and we’ll just give this a few moments and we will have our bethune2 Function app. Right? There we go. Deployment in progress, let’s give that a minute. Okay, all right.</p>
<p>So eventually the deployment will create, will complete and it shouldn’t take more than a minute or so. So once it’s finished, we can just click Go to resource, or we can find it from the dashboard. And you’ll see we now have a bethune2 Function app, and this is our sort of our container for our serverless Azure Function, our actual code.</p>
<p>So right now there’s not really any code executing, there’s just this account. So what we have to do is click on Functions and here is where we can go ahead and create our event processor. So we’ll click on Add, and this will take us through a pretty simple wizard to set something up.</p>
<p>Now, when you click New Function here, it’s gonna ask for the type of function, there’s a number of templates here. HTTP trigger, Timer trigger. These are the conditions that will determine when the code executes. So there’s many types of triggers here. For our purposes, we’re interested in this one, the Azure Event Hub trigger.</p>
<p>So with an Azure Event Hub trigger, what’ll happen is the code for the Azure Function will execute whenever a message or an event is received by that event hub. So we’ll go ahead and we’ll call this EventHubTrigger2, and then we will come up with some connection. We’ll have to create a new connection here.</p>
<p>So in order to create a connection, you’d need an existing event hub. Now fortunately we have an existing one. We just created the bethune2 event hub a little while ago. So we’ll use that. It’ll put in the rest of the config automatically. We’ll call it bethune2 connection. We’ll use the route manage access the route manage shared access key policy for that. Click OK. And now we have an event hub trigger for the event hub we created.</p>
<p>Event hub name, we’ll go ahead and call this bethune2 and we’ll give it the default consumer group. As you know, event hubs can have multiple consumer groups. So we click Create Function and this will, again, it’s not gonna give us the code for the function itself, but it will give us the configuration for the trigger. And that’s key for getting everything to be wired together properly. So just give this a second.</p>
<p>We can refresh it after a while and we should see, boom, there it is. There is our function EventHubTrigger2. And if we click on that, we can see here that the basic configuration, there’s a code here and there’s the integration.</p>
<p>Now the integration, we’ll start with that. This is defined by our trigger, by the type of function. Then we selected Event Hub. So we can see here eventHubsMessages is our trigger. And then this is where the actual function code is. I’ll come to that in a second here. But if we look at the trigger here, this is the configuration that we just set. And we can actually look at this as code in a little bit.</p>
<p>If you go to Code + Test, we can see. So here’s some default JavaScript code that’ll give us a message if we run it, we’ll try that in a second. But there’s another bit of code, this is function.json. This code is defined by the integration that we just looked at, which was the Azure Event Hub integration.</p>
<p>So we see here it’s a bindings config type eventHubTrigger. name, eventHubMessages, direction in. So this is, you know, if a message comes into the event hub, it’ll trigger this. Event Hub name, bethune2. The one we created and here’s our connection. Cardinality, many. I’ll come back to that in a bit, it deals with whether we’re dealing with individual messages or arrays of objects. And we care about the default consumer groups. So this function.json file is very important. This is our configuration for integrating with Event Hub.</p>
<p>Now the code, the actual JavaScript code is in this index.js file. And this doesn’t really do anything too fancy. If we look through it line by line, we can see it’s, it’s basically just logging some text here, context.log JavaScript eventhub trigger function called for message. It’ll print out this message object, and then context.log processed message giving us the message.</p>
<p>There’s a little for-loop here. It’ll go through every message in this object. It’s assuming that it’s receiving an array of messages. See, there’s that cardinality thing. It’s assuming that there’s multiple messages here. So we can do a test run of this if we’d like. We can just do Test and Run and click Run, and we can see it’ll connect to our function. And if we click Run we’ll see, it should just output some basic message text.</p>
<p>Okay, give that a moment. Welcome, we’re now connected to our streaming and we’ll do a quick run. So there’s 202 accepted, that’s good. And there it is, there’s our output right there. The same as the code, right? Processed message, message, right. Process to message, test message. That’s all it was setting as input, this test message here. And then we saw JavaScript eventhub trigger called, right. This is the output there and so it succeeded.</p>
<p>So we now have a working event hub triggered Azure Function with some default to JavaScript code. So now how do we integrate this with Cosmos DB? Well that’s our next challenge. Okay, so we have our function set up. We have some basic JavaScript code. We have our Event Hub trigger. So now we need to integrate with Cosmos DB and in order to do that, there’s a little bit more configuration we need to set up.</p>
<p>So what we’re gonna do is we’re gonna go back home and we’re gonna go back to our Cosmos DB account, bethune2, and we’re gonna go into the Data Explorer, and we’re gonna set up a container that will give us a collection within the database that we can use.</p>
<p>Now here in the Azure Function configuration, the main thing we need to do, if we go here we can say that, that was not set. We’ll go back to the integration and we can see here there’s no outputs defined. This is the main goal. We have to define an output so that the function knows to save its results or its output somewhere, and that’s going to be Cosmos DB.</p>
<p>Now what we need to do is we need to create a container within our bethune test DB. So we’ll click New Container. We’re gonna use this existing database and the container ID will be bethunecontainer. We’ll just call it bethune, we’ll call it bethune2container, why not. And then we will also give this a partition key. Let’s just call this testkey1, simple enough. So we have a partition key. This will help us ensure things work the right way. So click OK. And very quickly we will have a collection that we can use for storing the output of our Azure Function. All right, perfect.</p>
<p>So that’s already set and good to go. And if we click on the collection we’ll see there’s no data in it. There’s no items there. And hopefully if we do a test, we’ll see items show up. So let’s go back to our event hub and our Azure Function here, and we will add an output for this new collection.</p>
<p>Now the output, we have to pick Cosmos DB, that’s the output type we want. And then we get a few interesting bits of configuration here. This output document, that’s the parameter that we’re gonna care about in the actual code. And then the database name. We wanna use this bethune test database so we’ll put that in. And the collection we want to use would be the same as this container name, bethune2container.</p>
<p>One of the nice things is there’s this feature here called if true, create if doesn’t exist, basically. It means that if you don’t have this container or if you don’t have this database or collection existing, then the function will create it for you. So we can leave that as yes, you can leave it as no if you don’t want it automatically doing that. But what we have to also do is create a connection to the Cosmos DB account.</p>
<p>What we’ll do is we’ll click New and want to connect to the bethune2 database. We click OK. And we’ll have this connection here. Actually they’re already is an existing connection we can use, but in any event, in this part here, as long as you already have a Cosmos DB account, you should be able to just find, fill it in here and put in your connection. And then for the partition key, the partition key we had before here in this container we saw was testkey1. So we can literally just copy that and paste it and click OK.</p>
<p>So now we have an output. Now we actually have an output for our function. So how can we test this? How can we make sure that it works appropriately? So we’re not gonna test the event hub piece. We just want to test that the function can output into Cosmos DB. Well, there’s a very simple way to test that.</p>
<p>Okay, so now that we have the output defined for Cosmos DB, in order to test that it works, we have to make two changes to our function set up here. We’re gonna make a change to the JavaScript code, and we’re gonna make a change to the event hub integration piece. So the integration piece here, we can change it by just going through the wizard. You can also change the JSON which I’ll show in a little bit, but basically we wanna go to this cardinality section and change this to one.</p>
<p>Now cardinality tells the code what type of object to expect, whether we’re dealing with a one-to-one or many to one relationship. What we want is to deal with a single message object. We don’t want an array of messages to iterate through. So we change that to one, that we click Save, and then we’re gonna go, and we’re going to edit our JavaScript code, we can click here. And actually before I go into the JavaScript code, I’ll just show you the change in the function.json, we can see that this code has changed.</p>
<p>We’ve added this output section for the Cosmos DB integration. We have the parameter name for the output document here for what will actually go into Cosmos DB. We have the config for the database name, the collection, create if not exist. The string for the connection and then the partition key and the type direction. So this has all changed. And of course here, the cardinality has changed.</p>
<p>It now says one instead of many. So, you know, we can update our integration config here either using the wizard by clicking on it and we have the little boxes or we can edit this function.json file and save it. So we go to our JavaScript code, index.json, you can see that the problem here with this code is that it’s expecting an array, it wants to do a for-loop for each message on this eventHubMessages object, it wants to log them all. And what we’re gonna do is instead update the code to expect a single object, a single thing instead of an array. So we’ll just paste in some different codes so you don’t have to hear me type it all out. And really all we’ve changed is we’re still doing the logging here, but there’s no longer a for-loop.</p>
<p>So we’re taking in a single object. We have this processed output. And then this line is important. We have here the output document parameter. This is what’s gonna go into Cosmos DB. So we call this output document and we call a JSON.stringify to make sure we get a string. And this is the thing that will go into Cosmos DB. So what we’ll do is we will save this and we will do a quick test run to see if it works.</p>
<p>So we’ll click Test. Now if we go into Cosmos DB now we can see in the bethune2container collection. If we click on items there’s nothing there, right? There’s no items for us now. So if our code works, we should see something show up there. So we have a little silly message there, a test message banana face. We know for sure that that’s us. And so we just run, click Run here and cross fingers. Hopefully we should see this execute without any failures. And there we go.</p>
<p>Okay it executed. And now let’s see if this actually went into Cosmos DB, we’ll click on Items. And there it is, there’s our message, Test Message banana face. So we know that our function works in terms of the output piece. We know that we can have the Azure function connect to Cosmos DB and save messages in a collection of our choice in the database of our choice.</p>
<p>Now the last thing we need to do is test the event hub piece. We wanna see the whole thing work end to end. We want to see a message go into event hub, and then that trigger the Azure function. And then after that function is triggered, it should then save it into Cosmos DB. We know this Cosmos DB part works, but we wanna see the event hub part as well.</p>
<p>So that’s what we’ll do in the last section of this demo. It should be fun.</p>
<h1 id="Validating-Our-App"><a href="#Validating-Our-App" class="headerlink" title="Validating Our App"></a>Validating Our App</h1><p>Okay, so now we’re coming into the final section of our demo. We’re going to do an end-to-end validation of our app. What we did before with Cosmos DB, we were able to send a test message through the Azure function dashboard, and we were able to see it persisted in Cosmos DB. So that’s good, but what we really want to see is that the Event Hub works is able to capture a message and then that will trigger the Azure function, and then it will be persisted in Cosmos DB.</p>
<p>So we wanna see all three steps. Now, in order to do that we have to send a message to our Event Hub. And there’s a lot of ways we can do this. If you’re familiar with PowerShell or command line, if you can use a Python Repl, you can write some code. you could send a curl command with the right authentication and all that. But these aren’t the most user-friendly approaches if you are not, if you don’t have experience in programming.</p>
<p>So if you’re not an experienced programmer, then I would say the easiest thing to do is to just use Visual Studio and the SampleSender library that you could get from Microsoft GitHub. So we’ll give you <a href="https://github.com/Azure/azure-event-hubs/tree/master/samples/DotNet/Microsoft.Azure.EventHubs/SampleSender">links</a> for that, downloading and installing Visual Studio is not too difficult. You can do it right, obviously on Windows works great or other platforms. And then the SampleSender library, you’ll just download that from GitHub. And once you have it, you’re just gonna open it, you’re gonna go into you’re gonna wanna open a project solution yeah that’s correct. You can look for an SLN file and that should just pop up in SampleSender directory. And you’re gonna want here SampleSender.SLN, okay. And once you have that, you’re ready to go. You’re basically ready to send your messages, although actually sorry, you’re not quite ready to go.</p>
<p>You have to change two things here. You have to put in the right name for your Event Hub and you have to put in the right authentication, the right connection string. This is the credential it’s using it. And right now it has the old ones for my previous test. So we have to get the correct name and connection string. So we have to figure out where can we get that from.</p>
<p>Well, you can get it from the dashboard and I’ll show you how to do that in one sec. Okay, so in order to get the connection string, we’re gonna go into the dashboard and I’ll show you how that’s, how you obtain it. First, we can change this to bethune2, because we know already the Event Hub name is bethune2, that’s in the dashboard.</p>
<p>If we click on bethune2 namespace, we will see here, this is the Event Hub itself bethune2. Now that connection string, in order to get that, we need to have a policy, a connection policy that will generate that credential. So in here where it says shared access policies, there’s none by default. What we can do is we click add, and then this will let us create a policy. We’ll just call it default. And we’ll say that this is for sending and for listening, we don’t need to give it management permission. I mean we can, it doesn’t really matter. This is just for a test, but for this one, we’ll go ahead and click create, we’ll call it default and we’ll see it should generate those connection strings if we… Okay yeah already created it.</p>
<p>So we click here and then here are the strings that we need. There’s a primary key, secondary key, connection string, a secondary key here. We care about this one connection string, primary key. We wanna copy this to our clipboard. And then we go into the code and we’re gonna get rid of this one here. We don’t need this anymore. This is the old one, and then we’ll just paste in the new one and there you go. And so now we have our credentials set properly.</p>
<p>So the last thing to do is so we’ll save it. We’ll make sure that this is all set there. The last thing we have to do is actually run this code and we should see the messages appear in the Cosmos DB backend.</p>
<p>Now just to show that they’re not already there as a some kind of slight of hand trick here, we’ll go into Cosmos DB now. We’ll go into our Data Explorer and we should see as it connects, if we go into the collection, we should see that there’s only maybe one or two items from when we ran the tests with the Azure function.</p>
<p>So if we go here and then go to this container, we click on items. It’s only loading that one silly test message we have here, this banana face thing. So there’s nothing else there. Cause this is selecting everything, it’s not finding anything. So if we run this code and it succeeds we should see more messages propagate.</p>
<p>So, let’s see if it works. We click on this green arrow here to run the code samplecenter, and it should start spinning everything up. We’ll see a terminal pop-up and there we go. All right, our code is executing and it should send exactly 100 messages. They’re all just small string that says the message and the number. And then if everything is working properly, these messages will hit the Event Hub trigger the Azure function, and then the function output will put them into Cosmos DB.</p>
<p>So we’ll go ahead and click anything here. Continuous X out I suppose and then we’ll close this. Now one thing we can do to validate the traffic is we can actually look at the Event Hub logs as well. We can go here to bethune2 and look at this bethune2 Event Hub. And this will tell us if any traffic or messages are going through.</p>
<p>Now it’ll take a while for them to show up. We don’t see it right away. We can also look at the, at the Azure function. We can see the logs for the Azure function. We can see if it’s executing at all. So we can go to our bethune2 function app here, and we can see if we go to our functions, we can see here this one, and we can look at the monitor for it. Well actually we don’t need the insights monitor. We can actually this, we didn’t configure application insights so we can just go to the activity log and it should tell us if anything is happening.</p>
<p>So we’re not seeing anything yet, but let’s check Cosmos DB. Let’s see if there’s any activity there. So we will go ahead and reload that and give it a moment. Close this, oh sorry one sec. Let’s go back to that Cosmos DB and we’ll see if we have any messages coming through. Oh, I hope this works all right, we’re connecting to Cosmos DB and we’ll go to our bethune test database container. We’ll click on items, drum roll please. And there it is, there are all the messages that we sent.</p>
<p>So the messages are now in Cosmos DB, which means that the function executed properly. Now we’re not seeing them in the activity logs here. It might take a minute or so for it to show up because we don’t have any advanced insights configured just yet. Actually yes, we are seeing it now.</p>
<p>So if we look at the overview, we could see this spike in activity for the function app. This shows us that the function executed, and then we may see something similar in the Event Hub. If we look at throughput, we might we should see requested messages. Well, it might take a moment for that to propagate, but the most important thing is here are the actual messages are there.</p>
<p>So now we know that the code worked successfully. Our Cosmos DB, Event hub, and Azure function app is working as designed. So congrats if you’re able to get this working on your own and thanks for playing along, cheers.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Congratulations, you made it. Give yourself a pat on the back, because it’s been a long and tough ride. We went through a lot of pretty dense material, so before we pop the champagne bottles, let’s take a minute to briefly review what we have accomplished. By completing this course, you should now have a working knowledge of <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/introduction/">Cosmos DB</a>. You should understand the basic service and its features, you should know how to make use of it with an Azure account, and you should have a pretty solid idea of how to integrate Cosmos DB with a real-world application.</p>
<p>Recall our three learning objectives. Number one, the student will have a basic understanding of the Cosmos DB technology, including its feature set and design philosophy. We covered that in section one where we talked about Cosmos DB’s history, its unique capabilities, and the general architecture and design. Number two, the student will know how to use Cosmos DB via its APIs, CLI tools, and the Azure web console. Section two went over this pretty thoroughly. We walked through setting up Cosmos DB in the web console using Azure data explorer. We also talked about how to start coding with Cosmos DB SDKs and how to use both PowerShell and Azure’s CLI tool with Cosmos DB. And then number three, students will have a practical understanding of how to integrate Cosmos DB with other <a href="https://cloudacademy.com/library/azure/">Azure</a> services with the goal of creating a working app. This was section three where we introduced a few other Azure services and explained how to make them work with Cosmos DB. We walked through creating an app backend and even showed how to <a href="https://cloudacademy.com/course/introduction-azure-cosmos-db/validating-app-cosmos-db/">validate everything</a>. You should now be ready to work with Cosmos DB, both at work and in your side projects. </p>
<p>Now, remember, practice makes perfect. The best way to really solidify your knowledge is to actually go build something, so get out there and make some magic. Now that you’re done, I’d like to invite you to send any feedback you have about the course to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>. We greatly appreciate your comments, questions, and suggestions. Congratulations again on fighting through the whole course, and good luck in your future endeavors.</p>
<h2 id="5Getting-Started-with-Cosmos-DB"><a href="#5Getting-Started-with-Cosmos-DB" class="headerlink" title="5Getting Started with Cosmos DB"></a>5<strong>Getting Started with Cosmos DB</strong></h2><p><a href="https://docs.microsoft.com/en-gb/azure/cosmos-db/request-units">Cosmos DB Request Units</a></p>
<h2 id="11Validating-Our-App"><a href="#11Validating-Our-App" class="headerlink" title="11Validating Our App"></a>11<strong>Validating Our App</strong></h2><p><a href="https://github.com/Azure/azure-event-hubs/tree/master/samples/DotNet/Microsoft.Azure.EventHubs/SampleSender">Microsoft GitHub repo</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Knowledge-Check-Introduction-to-Azure-Resource-Manager-26</title>
    <url>/2022/11/14/AZ-204-Knowledge-Check-Introduction-to-Azure-Resource-Manager-26/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Introduction-to-Azure-Storage-17</title>
    <url>/2022/11/14/AZ-204-Introduction-to-Azure-Storage-17/</url>
    <content><![CDATA[<h1 id="Course-Introduction"><a href="#Course-Introduction" class="headerlink" title="Course Introduction"></a>Course Introduction</h1><p>Hi there. Welcome to Introduction to Azure Storage. My name is Thomas Mitchell and I’ll be taking you through this course.</p>
<p>I’m an Azure instructor at Cloud Academy and I have over 25 years of IT experience, several of those with cloud technologies. If you have any questions about this course, feel free to connect with me on LinkedIn, or send an email to <a href="mailto:&#115;&#x75;&#x70;&#x70;&#111;&#x72;&#116;&#64;&#99;&#108;&#x6f;&#117;&#x64;&#97;&#99;&#97;&#100;&#x65;&#109;&#x79;&#x2e;&#99;&#111;&#x6d;">&#115;&#x75;&#x70;&#x70;&#111;&#x72;&#116;&#64;&#99;&#108;&#x6f;&#117;&#x64;&#97;&#99;&#97;&#100;&#x65;&#109;&#x79;&#x2e;&#99;&#111;&#x6d;</a>.</p>
<p>This course is intended for those who wish to learn about the basics of Microsoft Azure storage.</p>
<p>We’re going to start things off with an introduction to azure storage. You’ll learn about the core storage services in Azure and about the different storage account types that are available. You also get to see a demonstration that shows you how to create a storage account in Microsoft Azure.</p>
<p>We’ll then take a look at the different storage services in a little more detail. We will start with blob storage, where you will learn what it is and what it offers. Next, will dive into Azure Files.</p>
<p>After covering Azure Files, we’ll dive into Azure queues. You’ll learn what Azure queues are and how to create a queue.</p>
<p>After learning about Azure queues, you’ll learn about Azure tables, where you will learn why and when to use Azure table storage.</p>
<p>We’ll wrap things up by taking an introductory look at Azure disks. </p>
<p>By the time you finish this course, you should have a solid understanding of the storage basics of Microsoft Azure.</p>
<p>We’d love to get your feedback on this course, so please give it a rating when you’re finished. If you’re ready to learn about Azure storage, let’s get started.</p>
<h1 id="Core-Storage-Services-in-Azure"><a href="#Core-Storage-Services-in-Azure" class="headerlink" title="Core Storage Services in Azure"></a>Core Storage Services in Azure</h1><p>Hello and welcome to core storage services in Azure. In this lesson, we will take a look at some of the core storage offerings, including blob storage, Azure Files, queue storage, table storage, and disk storage. However, before we get into the separate storage services, let’s take a look at some of the benefits of Azure storage.</p>
<p>Because the Azure storage platform is designed for virtually all modern-day data storage requirements, it was built to offer several key benefits. First and foremost, all Azure storage services are durable and highly available. Built-in redundancy keeps data safe in the event of underlying hardware failures within the Azure infrastructure. In addition to this redundancy, you can also cross multiple data centers and even multiple geographical regions. This provides protection against natural disasters or local failures at the data center level.</p>
<p>Because all data that gets written to Azure storage accounts is encrypted automatically, it is inherently secure as well. Azure also offers the ability to maintain fine-grained control over data access. </p>
<p>Azure storage offerings are also scalable and widely accessible. As I mentioned earlier, the Azure storage platform is designed to support all modern-day data storage requirements. That being the case, it’s designed to be massively scalable. You can access Azure data from anywhere in the world over HTTP or HTTPS. There are also numerous client libraries available for Azure storage in numerous languages. This means you can access Azure storage using things like .NET, Java, Python, PHP, and many others.</p>
<p>You can also access Azure storage through PowerShell scripting, through the Azure CLI, through the Azure portal, and through Azure Storage Explorer.</p>
<p>So now that you understand some of the key benefits of the core Azure storage services, let’s take an introductory look at each of them.</p>
<p>Let’s start with Azure blobs.</p>
<p>Azure blob storage provides object storage for the cloud. This offering has been optimized to support massive amounts of unstructured data. Unstructured data is data that does not fit a specific data model. For example, text and binary data would be the type of unstructured data that falls under blob storage.</p>
<p>Azure Files is essentially a fully managed file share system available in the cloud. You can access Azure Files through the typical SMB protocol. You can mount Azure file shares from Windows, Linux, and MacOS machines that reside both on-prem and in the cloud. You can even cash Azure file shares on Windows servers, using the Azure file sync service. This helps make data more accessible for remote offices.</p>
<p>Azure queue storage is a special type of storage service. It’s not meant for storing files. Instead, it’s designed for storing large numbers of messages. These messages are used in communications between the different components of a distributed application. Such messages can be accessed from anywhere in the world through authenticated calls via HTTP or HTTPS. Each queue message can be up to 64 KB in size. A typical queue can contain millions of messages.</p>
<p>Azure table storage is a storage offering intended for the storage of structured NoSQL data. It offers a key&#x2F;attribute store and a schema-less design. The schema-less design of Azure table storage allows you to more easily adapt the data to the needs of your business or application.</p>
<p>Lastly, let’s take a look at Azure managed disks. Azure managed disks are essentially block-level storage volumes. These storage volumes, which are managed by Azure, are used, to provide storage capabilities for virtual machines. A managed disk is much like a physical desk that you would see in an on-prem server. However, it’s virtualized. There are several types of disks available in Azure. They include ultra disks, premium SSD disks, standard SSD disks and standard HDD disks. We will touch on these in more detail later on.</p>
<p>So, to wrap things up for this lesson, let’s review. There are essentially five different core storage services available in Microsoft Azure. They include Azure blobs, Azure Files, Azure queues, Azure tables, and Azure disks. Each of these storage services are accessed through an Azure storage account. Over the next several lessons, we will dive into storage accounts and into the details of each core storage service in Microsoft Azure.</p>
<h1 id="Storage-Account-Types-in-Azure"><a href="#Storage-Account-Types-in-Azure" class="headerlink" title="Storage Account Types in Azure"></a>Storage Account Types in Azure</h1><p>Hello and welcome to storage account types in Microsoft Azure. In this lesson, we are going to take a look at the different types of storage accounts that are available when it comes time to provision storage in your Azure subscription.</p>
<p>Before we get into the different types of storage accounts. Let’s talk a little bit about what a storage account is and what it’s used for. A storage account in Azure can be viewed as the container, so to speak, that houses all of your Azure storage data objects. A storage account can host blobs, Azure Files, queues, tables, and disks.</p>
<p>When you provision a storage account. You are asked to provide a unique name for that storage account. This is necessary because data within a storage account is accessible from anywhere in the world. That being the case, the storage account namespace must be unique across the Azure landscape.</p>
<p>There are several different types of storage accounts available. Each type offers different features, and each has a different pricing model.</p>
<p>The first type of storage account is the general-purpose V2 account. A general-purpose V2 storage account is a basic storage account that can be used, to host blobs, files, queues, and tables. Microsoft recommends using the general-purpose V2 storage account for most scenarios that require Azure storage.</p>
<p>The general-purpose V1 storage account is similar to the V2 account. This legacy type account can also host blobs, files, queues, and tables. While a general-purpose V1 account offers similar functionality to the V2 accounts, Microsoft recommends using the general-purpose V2 account instead. This tells me that the general-purpose V1 storage account will probably go away at some point in the future.</p>
<p>The next type of storage account we are going to take a look at here is the block blob storage account. Block blob storage accounts offer premium performance for block blobs and append blobs. You would typically use a block blob storage account for situations where high transaction rates are in play. Block blob storage accounts are also a good choice for scenarios that require low storage latency.</p>
<p>File storage accounts are exactly what the name says they are. They are files only storage accounts. Because they feature high-performance characteristics, Microsoft recommends using these kinds of accounts for enterprise applications or for high-performing applications.</p>
<p>The last storage account type touch on here is the blob storage account. The blob storage account is a legacy account that is used for blob only storage. Microsoft actually recommends that, instead of using blob storage accounts, you use general-purpose V2 accounts. Like the general-purpose V1 accounts, I suspect the blob storage accounts, because of their legacy status, will likely go away sometime in the future.</p>
<p>The table that you see on your screen right now shows each of the different types of storage accounts, along with their key features. As you can see on your screen. Every storage account type is encrypted using storage service encryption, or SSE, for data that is at rest.</p>
<p>I should point out that archive storage and blob level tiering only support block blobs.</p>
<p>Another key point I should mention here is that zone redundant storage and Geo zone redundant storage are only available for standard general-purpose V2 accounts, block blob accounts, and file storage accounts in certain regions.</p>
<p>The premium performance that you see listed for general-purpose V2 and general-purpose V1 accounts is only available for disk storage and page blobs. Premium performance for block blobs and append blobs is only available for block blob accounts. Also, just as importantly, premium performance for files is only available on file storage accounts.</p>
<p>For more information on the different storage accounts available in Microsoft Azure, visit the URL that you see on your screen:</p>
<p><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview">https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview</a></p>
<h1 id="DEMO-Creating-a-Storage-Account"><a href="#DEMO-Creating-a-Storage-Account" class="headerlink" title="DEMO: Creating a Storage Account"></a>DEMO: Creating a Storage Account</h1><p>Hi everyone and welcome back. In this brief demonstration, I’m going to show you how to create a storage account using the Azure portal. Now, every storage account needs to belong to a resource group. Now a resource group, as you may know is a logical container that groups all of your Azure resources.</p>
<p>Now when we create our storage account here, we’re going to have two options, we can create a storage account and then as part of that process, we can create the new resource group or we can select an existing resource group. What we’re going to do here is add this new storage account to an existing resource group.</p>
<p>So on the screen here, I’m logged into my Azure portal and I’m at the home page. To create our general purpose V2 storage account, what we’ll do here is go up to the hamburger here and select all services. And then from here, we can search for storage accounts. And we’ll select it from the results page here. And we can see in my existing subscription here, I already have a storage account called VMLab diag 601.</p>
<p>What we’re going to do here is create a new one by clicking Add. And then from here, we need to provide some basic information, we need to specify the subscription that’s going to host the storage accounts. We need to select the resource group we want to deploy the storage account into or we can create a new one here. And then of course, we need to give our storage account a name, tell Azure which locations going into and then the performance of the storage account.</p>
<p>We can see that standard storage accounts are backed by magnetic drives and they are the cheapest cost per gigabyte. We can see in this popup, that standard storage accounts are good for applications that need bulk storage or where you’re accessing the data within that storage account infrequently. The premium storage accounts are backed by solid state drives. You use these when you need a consistent low latency performance.</p>
<p>Now you will notice here that a premium performance storage account can only be used with Azure virtual machine disks and they are best for IO intensive applications like databases. Another important item to note here is that virtual machines that use premium storage for all of their discs, do qualify for a 99.9% SLA even if they’re not running within an availability set so that’s pretty important to remember.</p>
<p>For this exercise, we’ll just use a standard storage account here and then the account kind here is where we can select what type of storage account to deploy. Here, we have three options storage V2, storage which is basically the legacy general purpose V1 and Blob storage.</p>
<p>Now in the replication dropdown, we can specify the redundancy that we need for our storage whether it be locally-redundant, zone-redundant, geo-redundant, read-access geo-redundant, geo zone-redundant or read access geo zone-redundant. Instead of going through each of these individually, you can visit the URL that you see on your screen for more information about each of these types of redundancy options. And lastly, we have the access tier here.</p>
<p>Now the hot access tier is really used for data that’s accessed frequently. The cool access tier is typically used for infrequently access data. We can also see that there is a another option and it’s the archive access tier but that can only be set at the Blob level and not on the actual storage account level.</p>
<p>So let’s go ahead and see here. We’ll deploy our storage accounts and we only have one subscription here, our labs subscription. So we’ll leave that set and then we have a couple of different resource groups here. So I’ll just deploy this into my VMLab resource group. And then we need to give our storage account a name and this name must be unique across all storage accounts in Azure, it needs to be unique across the landscape. The name can be as short as three characters but as long as 24 and it can only contain lowercase letters and numbers. So let’s call this test9878storage.</p>
<p>We get the green checkbox which means we’re good and we’ll deploy into the Central US region, that’s all we really need for this demonstration. And we’re going to deploy a general purpose V2 and we’ll accept the default read-access geo-redundant storage. We’ll do the same thing for the access tier.</p>
<p>Now, when we click Next for Networking, we can specify our network connectivity requirements, including the connectivity method and any kind of network routing or routing preferences. Now we can see here we have three options, we have a public endpoint for all networks, public end point for selected and private end points.</p>
<p>Essentially, storage accounts have a public endpoint that’s accessible through the internet. That’s what this public endpoint would be. Now, if we select public endpoint, what we do is we’re enabling that public endpoint to all networks, that’s why we have all networks here. If we select the second option here, we can see we then allow a public endpoint but then we can select which networks can access this storage account. </p>
<p>So that allows us to segment our traffic and block certain traffic. And then we have private endpoint. Now you would create a private end point to allow only private connections to this storage accounts. Now, what this would do is assign a private IP address from the virtual network that we select and it would take it and assign it to these storage accounts. And then as a result, all traffic between that virtual network and the storage account would be secured over a private link.</p>
<p>For this exercise here, we’re just going to go public and the only option we have here for routing is Microsoft network routing defaults and that’s because the combination of the storage account kind performance and replication along with location does not support internet routing which we probably wouldn’t do anyway.</p>
<p>We’ll go into data protection and then we can see, we have the Blob soft delete option, we have the file share soft delete option here and then we have versioning but versioning is not offered for this storage account due to the type of storage account combined with the subscription replication and location options.</p>
<p>So we’ll leave these at their defaults. We’ll click Next through to advanced. Now here’s where we could configure some advanced features. We could configure the secure transfer which essentially enhances the security of the storage account by only allowing the requests to that storage account by secure connections.</p>
<p>When you enable the Blob public access, the storage accounts Blobs can be read publicly without needing to share an account key or even a shared access signature. So your Blobs are wide open. We have the TLS versioning. Now this large file shares option here, turning this on provides file share support for a maximum of a hundred terabytes.</p>
<p>Now you’ll notice here that large file share storage accounts don’t have the ability to convert to geo-redundant storage offerings. And down here, we have some Data Lake Storage Gen2 options. We’ll leave these other defaults, we’ll click next for tags, we’re not going to do any tagging here. This just allows us to categorize our resources and then we’ll go ahead and click Next to Review and Create. And at this point we can see our validation has passed, we can review our configuration and then we can go ahead and click Create. And what this will do is deploy our general V2 storage account. And we can go ahead and click, Go to Resource and we are now in our test9878 storage account.</p>
<p>So that is how you walk through the process of creating a storage account in the Microsoft Azure portal.</p>
<h1 id="An-Introduction-to-Blob-Storage"><a href="#An-Introduction-to-Blob-Storage" class="headerlink" title="An Introduction to Blob Storage"></a>An Introduction to Blob Storage</h1><p>Hello and welcome to blob storage. In this lesson, we are going to take a closer look at blob storage and when you should use it.</p>
<p>Azure Blob storage, as I mentioned earlier in this course, is an object storage solution in Azure. It’s optimized to allow the storage of massive amounts of unstructured data, including text and binary data.</p>
<p>You would typically use blob storage to host images and documents that you wish to serve up to a web browser. Think images on a website. Blob storage is also used when you wish to stream video or audio or to store log files. Organizations will also often use blob storage to store backup data, archive data, and data that needs to be analyzed by some on-prem process or Azure-hosted process.</p>
<p>To access objects in blob storage, you can use HTTP or HTTPS. You can also access blob storage objects through the Azure storage rest API, through Azure PowerShell, through the Azure CLI, or through an Azure storage client library such as Java, PHP, .NET, or several others.</p>
<p>There are three types of resources that you should be familiar with when discussing blob storage. They include the storage account that hosts the blob storage, containers within the storage account, and the blobs within those containers.</p>
<p>The image on your screen depicts the relationship between these resources.</p>
<p>The storage account creates the unique namespace in Azure that you use to access your data. When you access your data, you’ll use a combination of the storage account name and the Azure Storage blob endpoint that you are trying to access. Together, these two pieces form the base address for the objects that reside in the storage account.</p>
<p>For example, the URL that you see on your screen would be used to access blob storage in a storage account called MyStorage:</p>
<p><a href="http://mystorage.blob.core.windows.net/">http://mystorage.blob.core.windows.net</a></p>
<p>Containers within a storage account are used to organize the blobs within the account. You can view containers like directories in a file system. You can create an unlimited number of containers within a storage account, and each container can store an unlimited number of blobs.</p>
<p>There are actually three types of blobs that Azure storage supports. They include block blobs, append blobs, and page blobs. Block blobs can contain up to about 190.7TiB of text and binary data. They are called block blobs because they consist of blocks of data that can be managed individually.</p>
<p>Append blobs are similar to block blobs insofar as they, too, consist of blocks of data. However, unlike block blobs, append blobs are optimized for append operations. This makes append blobs a good choice for logging data from virtual machines.</p>
<p>Page blobs are used to store random access files up to 8 TiB in size. You would typically use page blobs to store VHD files, which would serve as disks for Azure virtual machines. </p>
<p>To learn more about blob storage, visit the URL that you see on your screen:</p>
<p><a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction">https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction</a> </p>
<h1 id="DEMO-Uploading-a-Block-Blob-to-Azure"><a href="#DEMO-Uploading-a-Block-Blob-to-Azure" class="headerlink" title="DEMO: Uploading a Block Blob to Azure"></a>DEMO: Uploading a Block Blob to Azure</h1><p>Hello and welcome back. In this demonstration, we are going to create a container in our storage account. And then what we’re going to do is upload a block blob to that storage account. Now, before we upload our block blob to our storage account, we need to create a container.</p>
<p>The container is what will host our blob. So on the screen here, we have my test9878storage account. To create my container here, I simply select the containers chiclet here. And I can see I have no containers configured yet. So what we’ll do here, we’ll create a container.</p>
<p>Now the container name must be lowercase. So we’re gonna call it mycontainer. And we’ll create it. So now we have our container created. We can see that the default access level for that container is private. There’s no anonymous access to it. With our container created, we can upload our block blob to our storage.</p>
<p>To upload our block blob, we simply select our container and then we click upload here. And then in the right pane here, we can select the file we want to upload. And we’re just going to upload this, mytextdocument.text. And then we have an overwrite if it already exists. And then some advanced features here. None of these are required. We just get to specify what kind of authentication type, block size, the access tier and any folders we want to upload to.</p>
<p>For this demonstration, we’re just going right into the container. And then we’ll go ahead and click upload. And we can now see my text document listed in our container. We’ll close this out. And with that, we now have our container created and we were able to upload a block blob or file to our container.</p>
<p>Now, if we wanted to download our block blob, we simply right click it, and then we could select download here. So with that, you now know how to create a container in your blob storage and you know how to upload and download block blobs to, and from it.</p>
<h1 id="An-Introduction-to-Azure-Files"><a href="#An-Introduction-to-Azure-Files" class="headerlink" title="An Introduction to Azure Files"></a>An Introduction to Azure Files</h1><p>Hello and welcome to an intro to Azure Files. In this lesson, we are going to take a look at what Azure Files is and talk a little bit about what it offers.</p>
<p>Azure Files is an offering that makes file shares available in the cloud. It’s a fully managed solution that supports access to these cloud-based file shares via the industry-standard server message block protocol, or SMB.</p>
<p>You can mount Azure file shares from cloud deployments and on-prem deployments of not only Windows machines, but also Linux, and Mac OS machines. You can also use the Azure file sync service with Azure Files to cache your Azure file shares on Windows servers that are located close to your users. By leveraging Azure file shares with Azure file sync, you can speed data access for your end users. </p>
<p>Organizations will often use Azure Files to replace on-prem file servers or to supplement them. While earlier iterations of Azure Files were not a good replacement for on-prem file servers, this is no longer the case. Because popular operating systems like Windows, Linux, and Mac OS can mount Azure file shares, Azure Files can now completely replace traditional on-prem file servers and even NAS devices. As a matter of fact, the release of Azure Files AD Authentication means Azure file share permissions can even be controlled through on-prem active directories.</p>
<p>Azure Files is also helpful when lifting and shifting applications to the cloud. This is especially true for applications that require file shares to store application data and user data.</p>
<p>Because Azure Files are fully managed, you can create as many file shares as you need without worrying about hardware management and OS installation. This means you also have no need for OS patching or security upgrades.</p>
<p>You can also use familiar PowerShell commands and Azure CLI commands to create, mount, and manage Azure file shares. They can also be created and managed through the Azure portal and through Azure Storage Explorer.</p>
<p>Because Azure Files are built to be resilient, you no longer need to worry about file server upgrades or local power outages and network issues that typically affect access to on-prem file shares.</p>
<p>Join me in the next lesson, where I will show you how to create an Azure file share using the Azure portal.</p>
<h1 id="DEMO-Creating-an-Azure-File-Share"><a href="#DEMO-Creating-an-Azure-File-Share" class="headerlink" title="DEMO: Creating an Azure File Share"></a>DEMO: Creating an Azure File Share</h1><p>Hello and welcome back. Now, once we have a storage account created, we can go ahead and create file shares if we’re going to use the Azure file service. What I’m going to do here is show you how to create a file share within an Azure Storage account.</p>
<p>Now on the screen, you can see I’m in the storage account and I’m on the overview page. Now, from this overview page, to create a file share, I simply navigate to the file shares tab. The file shares tab allows us to see any file shares we’ve already created. And as you can see on the screen, we have none.</p>
<p>To create a new file share, we simply click the file share link here, and then we can give our file share a name and a quota. So what we’ll do here, we’ll call this file share MyShare. Now we can see the little exclamation point here and this is telling me that the file share name can only be lowercase letters, numbers, and hyphens. So we’ll go ahead and rename this myshare in lowercase letters.</p>
<p>Now, if I hover over the quota icon here, we can see that we can set a quota essentially up to five terabytes that limits the total size of this file share. We are not going to set a quota here, so we’ll go ahead and click create. And now we can see that our share is created and that we have the default quota. Since we didn’t specify one, it’s just giving us the entire size that’s available to us for the share.</p>
<p>If we select the share here, we can click the connect link here and this will give us information on how to connect to this share from Windows, Linux, or MacOS. We can also upload files directly to it, and we can add a directory, so let’s call this marketing, and now we have a directory within our myshare file share called marketing. So you can build a hierarchy of your file shares within your Azure portal.</p>
<p>So with that, you know how to create a file share in Microsoft Azure using the Azure portal.</p>
<h1 id="An-Introduction-to-Azure-Queues"><a href="#An-Introduction-to-Azure-Queues" class="headerlink" title="An Introduction to Azure Queues"></a>An Introduction to Azure Queues</h1><p>Hello and welcome to Azure queues. In this brief lecture. We are going to take an introductory look at Azure queues and what they are used for. </p>
<p>The Azure queues storage service is designed to store large numbers of messages. Now these messages aren’t the type that you would normally think of. We’re not talking about emails or anything like that. Instead, these messages are used to facilitate communication between the components of distributed applications. When using Azure queue storage, you can access these messages from anywhere in the world through authenticated calls via HTTP or HTTPS.</p>
<p>The Azure queue service is comprised of several components. These include the URL format, a storage account, a queue, and messages.</p>
<p>To access a queue, you must do so through a specific URL format. The URL for a specific queue will include the storage account name and the queue name. For example, the URL that you see on your screen would be used to access a queue called images to process in a storage account called mystorageaccount.</p>
<p>Speaking of storage accounts, all access to virtually all Azure storage services is provided through a storage account. You can view the storage account as the overarching container that hosts your Azure storage.</p>
<p>The queue itself is actually a set of messages. When you name a queue, you must use all lowercase letters.</p>
<p>And last but not least we have messages. Messages in any format can be up to 64 kB. As I mentioned previously, these messages are used to facilitate communication between the different components of a distributed application.</p>
<p>Join me in the next lesson where I will show you how to create a queue in Microsoft Azure.</p>
<h1 id="DEMO-Creating-a-Queue"><a href="#DEMO-Creating-a-Queue" class="headerlink" title="DEMO: Creating a Queue"></a>DEMO: Creating a Queue</h1><p>Welcome back. In this quick demonstration, I want to show you how to create a queue in Microsoft Azure using the Azure portal. Now, since this isn’t a course on using queues, we’re not going to get into all the details of how to use it, but I wanted to at least show you how to create a queue.</p>
<p>On the screen here, you can see I’m logged into my Azure portal. I’m at the home page and I’m logged in as an admin. To create a queue service, what I need to do is browse to my storage accounts. And then from the overview page of my storage accounts, I simply click on the queues box here.</p>
<p>Now from the queues page, I can see what existing queues I have set up. I can also see what authentication method I’m using. Now to create my queue, it’s a pretty straightforward process. I simply click the plus queue button up here and then give my queue a name.</p>
<p>Now my name for the queue needs to be all lowercase. It must start with a letter or a number, and it can only include letters, numbers, or hyphens. So I’m just going to call this myqueue. And then we’ll click okay here. And then we can see here myqueue is created and it gives me the URL to access that queue. And that’s really all there is to creating a queue.</p>
<p>Now, before we go, I’ll just show you quickly how to add a message to that queue through the portal. And to do that, I simply click on my queue here and then add a message. Now what I’ll do here, I’ll just add some kind of message text here. And we can set the expiration. I’ll just leave the defaults there.</p>
<p>Now because Microsoft recommends encoding binary data, this checkbox here for encode the message body in Base64 is checked by default. So we’ll leave it there and we’ll go ahead and click okay. And now we can see the message in our queue. If we select the message, we can look at some of the message properties. We can see the body of the message, when that message was inserted into the queue and when it expires. </p>
<p>Now, if we wanted to dequeue this message or remove it from the queue, we simply click the dequeue message. Now since this is the first and only message in my queue, it’s asking me if I’m sure I want to remove the first message in the queue. We’ll go ahead and click yes. And now we can see, we have no more messages in our queue.</p>
<p>So that’s the long and short of it on how to create a queue, how to add a message to a queue, and how to dequeue that message.</p>
<h1 id="An-Introduction-to-Azure-Table-Storage"><a href="#An-Introduction-to-Azure-Table-Storage" class="headerlink" title="An Introduction to Azure Table Storage"></a>An Introduction to Azure Table Storage</h1><p>Hello and welcome to Azure table storage. In this lesson, we will take a look at what table storage is and what it’s used for. </p>
<p>Azure table storage is a storage service offered by Microsoft that allows you to store structured no SQL data in the cloud. It provides a key&#x2F;attribute store with a schema-less design. When I say schema-less here, what I mean is that the data does not conform to a rigid schema. In other words, it doesn’t conform to specific data types that a typical relational database would conform to. </p>
<p>Organizations will often use table storage to store flexible databases that include things like user data for Web applications or maybe even address books or device information. Table storage allows you to store all kinds of entities in a table. Storage accounts can contain as many tables as you need up to the capacity limits of the storage account itself. </p>
<p>Azure table storage, which is actually a NoSQL datastore, often comes into play when an organization needs to store large amounts of structured data. It’s perfect for scenarios that require the storage of structured non-relational data. For example, table storage would be a good choice if you need to store terabytes of structured data required for web scale applications. If you have datasets that don’t require complex joins, foreign keys, or stored procedures, table storage would be a good choice, assuming those data sets can be denormalized for fast access.</p>
<p>Leveraging Azure table storage allows you to store and query massive sets of structured nonrelational data.</p>
<p>Table storage consists of several different components. The URL format for accessing Azure table storage can be seen on your screen.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://&lt;storage account&gt;.table.core.windows.net/&lt;table&gt;</span><br></pre></td></tr></table></figure>

<p>Notice the URL includes the storage account name and the table name. It’s the inclusion of these values that makes the URL address unique.</p>
<p>The storage account is another component that helps comprise the Azure table storage offering. The function of the Azure storage account is simple. Access to all Azure storage, including table storage, is provided through a storage account.</p>
<p>The third piece of Azure table storage is the table itself. All a table is is a collection of entities. What makes an Azure table storage table different from a typical relational database table is the fact that it doesn’t enforce a schema on the entities within it. This means that a single table can, and often does, contain all kinds of entities with many different sets of properties.</p>
<p>Speaking of entities, the entity is the fourth component that makes up the Azure table storage offering. The best way to describe an entity is that it is similar to a typical database row. It’s essentially a set of properties. Each entity in Azure storage can be up to 1 MB in size.</p>
<p>The properties, which make up the fifth component, are name-value pairs. You can include up to 252 properties for each entity. There are also three system properties associated with each entity as well. These include a partition key, a row key, and a timestamp.</p>
<p>The image on your screen depicts the relationship among each of these components. As you can see the storage account holds the tables. Each table consists of the entities. Each entity consists of many different properties. The URL that we mentioned earlier is how you access all of this stuff.</p>
<p>In the next lesson, I will show you how to create an Azure storage table using the Azure portal.</p>
<h1 id="DEMO-Creating-an-Azure-Storage-Table"><a href="#DEMO-Creating-an-Azure-Storage-Table" class="headerlink" title="DEMO: Creating an Azure Storage Table"></a>DEMO: Creating an Azure Storage Table</h1><p>Welcome back. In this brief demonstration, we are going to walk through the process of creating an Azure Storage table in the Azure portal. As you can see here, I’m logged into my portal as my admin, and I’m on the homepage. We have my storage account here, test9878storage. This obviously is a prerequisite to create a table.</p>
<p>So what we’ll do to begin the process of creating our storage table is select our storage account. And then from the overview page, we can select tables. Now from this table storage page, we can see I have no tables defined yet.</p>
<p>Now, one thing I didn’t mention in the lecture is that there is a premium table experience and it’s not necessarily table storage per se so I didn’t cover it in the course, but this premium table experience is offered through Cosmos DB. And if I open this up here, it takes me out to Azure Cosmos DB and what Azure Cosmos DB is is a globally distributed database service.</p>
<p>Now, what Cosmos DB offers is a premium Azure table API. And so that’s why we didn’t get into it because it’s not really table storage as part of the Azure Storage service offering. But just keep that in mind that there is a premium experience for Azure table API if it comes up in an exam somewhere.</p>
<p>So let’s go back to our test9878storage here. So to create our table, we simply click plus table and we’ll give our table a name. I’ll just call it MyTable and we’ll OK it. And from there, we can see our new table has been created along with a URL to access that table.</p>
<p>If we click the ellipsis here for the context menu, we can configure access policies or delete the table altogether. Now, since this is an introduction to Azure Storage, we’re not going to get into table design and actually doing things with the table storage. I just wanted to introduce you, hence the name of the course, to this storage option so you have an idea of what it is, where you access it and how you create a table.</p>
<p>So with that, we’ll call it a wrap and I’ll see you in the next lesson.</p>
<h1 id="Introduction-to-Azure-Managed-Disks"><a href="#Introduction-to-Azure-Managed-Disks" class="headerlink" title="Introduction to Azure Managed Disks"></a>Introduction to Azure Managed Disks</h1><p>Hello and welcome to Azure managed disks. In this lesson, we’re going to take a look at the benefits of managed disks and at the types of encryption you can use with managed disks. Let’s start by identifying what a managed disk is in Azure. An Azure managed disk is similar to a physical disk that you would find in a physical on-prem server, but it’s virtualized. It’s a block level storage volume that’s used with Azure VMs and is managed by <a href="https://cloudacademy.com/library/azure/">Microsoft Azure</a>.</p>
<p>Creating a managed disk in Microsoft Azure is as simple as specifying the size of the disk, and the type of the disk you want to use. When you provision a managed disk, you have a choice of several different types. You can deploy ultra disks, premium SSD disks, standard SSD disks, and standard HDD disks. We will actually look at these types in a little more detail in the next lesson. But for now, we’re just going to look at the benefits of using managed disks.</p>
<p>For starters, managed disks are designed for 99.999% availability. That’s five nines of availability. To achieve this level of availability, there are three replicas of the data stored on each managed disk. This type of durability protects you from not only one, but two failures of disk replicas.</p>
<p>Managed disks make it easy to deploy and scale VMs. Microsoft Azure allows up to 50,000 VM disks of a specific type per region in each subscription. This allows you to create thousands of virtual machines in one subscription. Because Azure supports so many disks, you can create VM scale sets that include up to 1000 VMs per set, provided you use a marketplace image. </p>
<p>I should point out that managed disks are integrated with both availability sets and availability zones. The integration with availability sets ensures that VM disks within an availability set are isolated from one another. This protects your applications from a single point of failure within an Azure datacenter. Availability zone integration protects applications from entire Azure datacenter failures.</p>
<p>Since Azure backup supports the backup and restore of managed disks, you can use Azure backup to create backup jobs to protect your data. This makes VM restores a snap. I should mention, however, at the time of this course publication, Azure backup supports disk sizes up to 32 terabytes.</p>
<p>Through Azure role-based access control, or RBAC, you can specify granular access control for managed disks. You can assign specific permissions for managed disks to your users.</p>
<p>Lastly, Azure managed disks make it easier to upload your on-prem VMs to Azure because you can use direct upload to transfer your VHD files to Azure managed disks. There are far fewer steps to uploading your VHDs than there used to be.</p>
<p>There are two types of encryption that you can use with managed disks. They include server-side encryption, or SSE, and Azure disk encryption, or ADE.</p>
<p>Server-side encryption is performed by the Azure storage service, and is enabled by default for all managed disks. This type of encryption provides encryption at rest for your data. Server-side encryption is also enabled by default for snapshots and images in regions where managed disks are available.</p>
<p>Azure disk encryption is enabled on the OS and data disks of a VM. Using Azure disk encryption, you can encrypt the OS and data disks for a virtual machine, including managed disks. On Windows VMs, the disks are encrypted using bit locker technology. While on Linux VMs, the disks are encrypted using DM-crypt technology.</p>
<p>There are three disk roles in Azure. These roles include data disks, OS disks, and temporary disks.</p>
<p>Data disks are managed disks that you attach to a virtual machine. They’re used to store applications and other sorts of data that you need. When you attach a data disk to a VM, it’s registered as a SCSI drive. You can assign a drive letter to a data disk just like any other physical disk in a physical server. Data disks have a max capacity of 32 terabytes, and the number of data disks that you can attach to a virtual machine will be determined by the size of the virtual machine itself.</p>
<p>OS disks are pretty self-explanatory. When you deploy a virtual machine, it’s deployed with a single OS disk attached. The OS disk, as you may have guessed, hosts the VM’s operating system and boot volume. The max capacity of an OS disk is four terabytes.</p>
<p>Temporary disks are probably the most misunderstood of the three disk types. Every VM contains a temporary disk. I should mention, however, that the temporary disk is not a managed disk. The temporary disk is not intended for storage of important data. Instead, temporary disks are used to host things like page files and swap files. Data that is stored on a temporary disk is often lost during maintenance events and when a VM is redeployed. The temporary disk is assigned the drive letter of D on Windows machines by default. On Azure Linux VMs, the temporary disk is &#x2F;dev&#x2F;sdb.</p>
<h1 id="Course-Summary"><a href="#Course-Summary" class="headerlink" title="Course Summary"></a>Course Summary</h1><p>Congratulations. You’ve come to the end of Introduction to Azure Storage. Let’s review what you’ve learned.</p>
<p>We kicked things off with an introduction to azure storage. You learned about the core storage services in Azure and about the different storage account types that are available. You also got to see a demonstration that showed you how to create a storage account in Microsoft Azure.</p>
<p>We then took a look at the different storage services in a little more detail. We started with blob storage, where you learned what it is and what it offers. Next, we dove into Azure Files.</p>
<p>After covering Azure Files, we got into Azure queues, where you learned what Azure queues are and how to create a queue.</p>
<p>After learning about Azure queues, you learned about Azure tables. You learned why they are used and when to use Azure them.</p>
<p>We wrapped up with Azure disks. </p>
<p>At this point, you should have a solid understanding of the storage offerings in Microsoft Azure.</p>
<p>To learn more about Microsoft Azure storage options, you can, and should, read Microsoft’s published documentation. You should also keep an eye out for new courses on Cloud Academy, because we’re always publishing new ones. Be sure to give this course a rating, and if you have any questions or comments, please let us know. Thanks for watching and happy learning.</p>
<h2 id="3Storage-Account-Types-in-Azure"><a href="#3Storage-Account-Types-in-Azure" class="headerlink" title="3Storage Account Types in Azure"></a>3<strong>Storage Account Types in Azure</strong></h2><p><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview">Azure Storage Accounts Overview</a></p>
<h2 id="5An-Introduction-to-Blob-Storage"><a href="#5An-Introduction-to-Blob-Storage" class="headerlink" title="5An Introduction to Blob Storage"></a>5<strong>An Introduction to Blob Storage</strong></h2><p><a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction">Azure Blob Storage Overview</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Knowledge-Check-Introduction-to-Azure-Storage-18</title>
    <url>/2022/11/14/AZ-204-Knowledge-Check-Introduction-to-Azure-Storage-18/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Knowledge-Check-Overview-of-Azure-Services-3</title>
    <url>/2022/11/14/AZ-204-Knowledge-Check-Overview-of-Azure-Services-3/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Lab-Azure-Key-Vault-and-Disk-Encryption-29</title>
    <url>/2022/11/14/AZ-204-Lab-Azure-Key-Vault-and-Disk-Encryption-29/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Lab-Developing-with-the-Cosmos-DB-Core-API-and-Change-Feed-24</title>
    <url>/2022/11/14/AZ-204-Lab-Developing-with-the-Cosmos-DB-Core-API-and-Change-Feed-24/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Lab-Azure-API-Management-Policies-and-Security-34</title>
    <url>/2022/11/14/AZ-204-Lab-Azure-API-Management-Policies-and-Security-34/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Lab-Azure-Resource-Manager-Templates-In-Depth-27</title>
    <url>/2022/11/14/AZ-204-Lab-Azure-Resource-Manager-Templates-In-Depth-27/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Lab-Creating-a-Topic-and-Subscription-in-Azure-Service-Bus-14</title>
    <url>/2022/11/14/AZ-204-Lab-Creating-a-Topic-and-Subscription-in-Azure-Service-Bus-14/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Lab-Deploying-And-Monitoring-Azure-App-Service-Web-Apps-7</title>
    <url>/2022/11/14/AZ-204-Lab-Deploying-And-Monitoring-Azure-App-Service-Web-Apps-7/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Lab-Integrate-Services-with-Azure-Function-Apps-16</title>
    <url>/2022/11/14/AZ-204-Lab-Integrate-Services-with-Azure-Function-Apps-16/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Lab-Monitoring-Resources-with-Azure-Monitor-32</title>
    <url>/2022/11/14/AZ-204-Lab-Monitoring-Resources-with-Azure-Monitor-32/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer-19</title>
    <url>/2022/11/14/AZ-204-Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer-19/</url>
    <content><![CDATA[<h1 id="Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer"><a href="#Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer" class="headerlink" title="Managing Azure Storage With AzCopy and Azure Storage Explorer"></a>Managing Azure Storage With AzCopy and Azure Storage Explorer</h1><p>Welcome to Managing Azure Storage with AzCopy and Azure Storage Explorer. I’m Guy Hummel. To get the most from this course, you should already have some knowledge of Azure Storage. I’ll show you two different ways of working with Azure Storage. If you prefer a graphical user interface, then you can use Azure Storage Explorer, which is an application that runs on Windows, MacOS, and Linux. If you’re comfortable with the command line, then you can use AzCopy. Let’s start with Azure Storage Explorer. First you need to download it from Microsoft. The URL for this page is in the transcript below. Select your operating system and click the ‘Download’ button. On a Mac, you just need to open the zip file and then run the Storage Explorer application. On Windows and Linux, you need to run an installation program. The first thing you’ll need to do is sign into your Azure Storage account. Unless you’re using a special Azure environment, leave this set to Azure and click ‘Next’.</p>
<p>It opens a browser tab and asks you to authenticate. I’m already logged in, so once I select my account, I’m authenticated and I can close this tab and go back to Storage Explorer. Over here, you can choose your subscription and your storage account. I have an account called camonthlyreports and a blob container in it called monthly-reports. When I click on the container, it shows me the blobs in it. I don’t have any blobs in this container which is why nothing shows up here. I’ll upload some files into it so we have something to work with. You can either upload a whole folder or individual files. If I were to choose folder, then it would create a virtual folder inside the container, which isn’t what I want in this case. So, I’m going to upload the files that are in the folder. I can select all of the files by holding down the ‘Shift’ key when I click the bottom one. That way they’ll all get uploaded at the same time.</p>
<p>Now all of the files are in the container. If you right click on one of the files, you can see that there are lots of options for what we can do with it. For example, we could copy it, or delete it, or change its access tier, such as if we wanted to move it to the cool tier. I’ll show you how to copy a blob to another container. First, let’s create a second container so we have a place to copy the blob to. If we right-click on blob containers, there’s an option to create a blob container. Let’s call it Copies. Now, if we go back to the first container, we can right-click on a file and select ‘Copy’. It’s not obvious that we did anything, but if we go to the second container, we can click the ‘Paste’ button and it’ll copy that blob into this container. You might have noticed something interesting down here. It says ‘Copy AzCopy Command to Clipboard’. It turns out that Azure Storage Explorer uses the AzCopy command when it needs to copy blobs. And if you want to see the actual command, you can click here.</p>
<p>Now it’s on the clipboard, so we have to paste it somewhere to see it. I’ll paste it to a text editor. It kind of looks like gibberish, doesn’t it? Well it’s not as bad as it looks. The basic command is just ‘azcopy copy’ then the URL of the source and the URL of the destination. So, why do you have to put ‘copy’ after ‘azcopy’? That’s because the AzCopy command can also do other things besides just copying files, so the name of the utility is a bit misleading. For example, if you wanted to delete a blob, you’d start the command with azcopy remove. Okay, so why are the URLs so long? That’s because the URL contains a shared access signature, or SAS. It’s the part after the question mark. A SAS gives access to resources in a storage account for a limited amount of time. You can generate a SAS yourself if you want to give someone access to a particular resource for, let’s say, the next week. But Storage Explorer generated a SAS for the source and a SAS for the destination for you.</p>
<p>You don’t have to use them though, because there’s another way to provide authentication. <a href="https://cloudacademy.com/course/overview-azure-active-directory-3142/introduction/">Azure Active Directory</a>. If you have an Azure account that’s authorized to access the source and destination, then you don’t need to use shared access signatures. There’s something very important you need to know to get this to work though. Even if you’re the owner of the source and destination storage accounts, you could still get a permission error. You’re probably thinking, what? How is that possible? Well, it turns out that your Azure Active Directory account needs to have the Storage Blob Data Contributor role for the source and destination storage accounts if you want to copy blobs using AzCopy. In this example, I’m using the same storage account for both the source and the destination, so I only need to give myself the Storage Blob Data Contributor role for that storage account.</p>
<p>To see whether you have that role assigned to you or not, go into the storage account, select ‘Access Control’, and then click ‘View my access’. You can see that I have that role assigned to me, but if you don’t then click on the role assignments tab and assign it to yourself. Or if you don’t have permission to do that, then ask an administrator to do it for you. If that would be a problem, then you could use shared access signatures instead. Okay, now I’ll show you how to run the AzCopy command. I could install AzCopy on my desktop, but since it’s already installed in Cloud Shell, let’s use that instead. But we still need to do one more thing first. Type ‘azcopy login’ to authenticate. Then go to this URL and copy and paste this code. Then choose your Azure account and click ‘Continue’. All right, now we can finally try to copy a blob. First type azcopy copy, then put in the URL of the source blob.</p>
<p>This is the name of the storage account, this is the name of the container, and this is the name of the blob. Note that if we were including a shared access signature at the end of the URL, we’d need to put quotes around the whole thing, but since we’re not using a SAS, we don’t need to. Now put in the URL of the destination. If we wanted to give the blob copy a different name than the original one, we type a different name here. We could even leave the blob name out and just give the URL of the container where we want to copy the blob, but it doesn’t hurt to give the name. In the AzCopy command we got from Azure Storage Explorer, there were some options at the end. The first one was overwrite&#x3D;prompt. This means that if the command will overwrite a blob in the destination, then it should ask whether you actually want to overwrite it before doing so.</p>
<p>Since we’re copying the same blob that we already copied using Storage Explorer, this option will matter for our example. If we don’t include this option, then it’ll overwrite the blob by default. Let’s include this option so we can see what the prompt looks like. The next one is s2s-preserve-access-tier&#x3D;false. This tells it not to ensure that the access tier of the destination blob is the same as the one for the source blob. By default, this option is true. For our example, there’s no good reason to set this to false, so we can leave this option out entirely. The next one is include-directory-stub&#x3D;false. This is kind of an obscure option and it’s false by default anyway, so we can leave it out. The next one is recursive, which means that if you’re copying a folder from your local file system, it will recursively copy its subfolders as well. That’s not what we’re doing, so we can leave this out too. The last one is log-level&#x3D;INFO.</p>
<p>This refers to how much information is sent to the AzCopy log file and INFO is the default, so we don’t need to include this one either. Okay, let’s run it. There’s the prompt we were expecting that’s asking if we want to overwrite the blob. To say yes, type y. And it’s done. If you want to see all of the options that are available, you can type azcopy copy -h. But it’s easier to read if you go to this web page. Now after seeing that AzCopy is more difficult to use than Azure Storage Explorer, you might be wondering why you’d even use AzCopy. After all, Storage Explorer actually runs AzCopy under the hood, so you don’t have to use it yourself. Well, if you need to automate your copying activities, then you can write scripts that contain AzCopy commands. It’s also possible to do it by calling the Azure Storage Client Libraries in your code. They’re available for a variety of languages such as .NET, Java, and <a href="https://cloudacademy.com/course/python-beginners/hello-world/">Python</a>.</p>
<p>But if you want to put something together quickly, it’s much easier to use AzCopy. However, Azure Storage Explorer is better than AzCopy for general storage management because it supports more operations and storage types than AzCopy does. You can use it to manage not only blobs but also queues, tables, file shares also known as Azure Files, and Data Lake Storage Gen2. The Azure Storage Client Library support all of the storage types too, of course, but you have to write code to use them, so they’re not meant for doing storage management manually. AzCopy supports blobs, file shares, and Data Lake Storage Gen2, but it doesn’t support queues or tables, so it’s not as robust as Storage Explorer. And that’s it for AzCopy and Azure Storage Explorer. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks.</p>
<h2 id="1Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer"><a href="#1Managing-Azure-Storage-With-AzCopy-and-Azure-Storage-Explorer" class="headerlink" title="1Managing Azure Storage With AzCopy and Azure Storage Explorer"></a>1<strong>Managing Azure Storage With AzCopy and Azure Storage Explorer</strong></h2><p><a href="https://azure.microsoft.com/products/storage/storage-explorer">Azure Storage Explorer</a></p>
<p><a href="https://learn.microsoft.com/azure/storage/common/storage-ref-azcopy-copy">Azcopy Copy</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Lab-Working-with-Azure-Storage-Using-PowerShell-22</title>
    <url>/2022/11/14/AZ-204-Lab-Working-with-Azure-Storage-Using-PowerShell-22/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Resource-Required-Reading-for-Microsoft-AZ-204-Exam-36</title>
    <url>/2022/11/14/AZ-204-Resource-Required-Reading-for-Microsoft-AZ-204-Exam-36/</url>
    <content><![CDATA[<h1 id="Required-Reading-for-Microsoft-AZ-204-Exam"><a href="#Required-Reading-for-Microsoft-AZ-204-Exam" class="headerlink" title="Required Reading for Microsoft AZ-204 Exam"></a>Required Reading for Microsoft AZ-204 Exam</h1><p><strong>Before taking Microsoft’s AZ-204 exam, please read the pages at the following links because these specific topics were not covered anywhere else in this learning path:</strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/learn/modules/configure-web-app-settings/5-enable-diagnostic-logging">Enable diagnostic logging</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/authentication-vs-authorization#authentication-and-authorization-using-the-microsoft-identity-platform">Authentication and authorization using the Microsoft identity platform</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-app-configuration/use-key-vault-references-dotnet-core">Use Key Vault references in an ASP.NET Core app</a></li>
<li><a href="https://docs.microsoft.com/en-us/graph/overview">Overview of Microsoft Graph</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/architecture/best-practices/caching#considerations-for-implementing-caching-in-azure">Considerations for implementing caching in Azure</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Running-a-Container-on-Azure-App-Service-10</title>
    <url>/2022/11/14/AZ-204-Running-a-Container-on-Azure-App-Service-10/</url>
    <content><![CDATA[<h1 id="Running-a-Container-on-Azure-App-Service"><a href="#Running-a-Container-on-Azure-App-Service" class="headerlink" title="Running a Container on Azure App Service"></a>Running a Container on Azure App Service</h1><p>Welcome to “Running a Container on Azure App Service”. To get the most from this course, you should already have some basic experience using App Service. If you don’t, then you can take our “Introduction to Azure App Service” course.</p>
<p>In this course, I’ll give you a demonstration of how to build and run a Docker container on App Service. If you want to do the demo yourself, as well, then you’ll need to have an Azure account. If you don’t already have one, then you can create a free trial account.</p>
<p>Although App Service supports many different programming languages and frameworks, such as .NET, Java, and Python, sometimes you might need a different development stack that isn’t directly supported by App Service. In these cases, the solution is to create a custom Docker container that has all of the software you need preinstalled.</p>
<p>A Docker container is a self-contained software environment that includes an application and all of its dependencies. Because it includes everything it needs, the container is portable. That is, it can run on any system that supports Docker without having to worry about what’s installed in the underlying operating system.</p>
<p>Container images are normally stored in a central location, which makes it easier to manage them and deploy them. Microsoft offers a service called Azure Container Registry that provides this central location.</p>
<p>To deploy a container to App Service, here are the steps you need to take. First, create an instance of Azure Container Registry. Then build a container image. Next, upload it to your container registry. Then deploy it from the container registry to Azure App Service. And finally, try to connect to the application to make sure it worked.</p>
<p>Okay, let’s go through the steps. First, we’ll create the container registry. In the Azure Portal, type “container” in the search bar, and choose “Container registries”. Then click “Create”. We can choose an existing resource group, but let’s create a new one, which will make it easier to delete everything when we’re done. I’ll call it “demorg”.</p>
<p>The registry name has to be unique across all Azure customers, so I’ll call it “ca” for “Cloud Academy” and then “reg”. You’ll have to choose a different name if you do this yourself. For the SKU, choose “Basic”, which is cheaper. Then click “Review + Create” and “Create”.</p>
<p>When it’s done, click “Go to resource”. Then go to “Access keys” and set “Admin user” to “Enabled”. This is required for deploying to App Service.</p>
<p>Next, we need to build the container image, so you need to have Docker installed and running on your desktop. If you don’t already have it, then you can download it from docs.docker.com&#x2F;get-docker.</p>
<p>Once you have Docker running, you can build the container image in a variety of different ways, but we’re going to do it from Visual Studio Code, which is a free development tool from Microsoft. You can download it from code.visualstudio.com.</p>
<p>You’ll also need to install the Azure Tools extension. To install it, click on Extensions, search for “azure”, and install Azure Tools. When it’s done, the Azure logo and the Docker logo will show up over here.</p>
<p>Click the Azure logo, then click “Sign in to Azure”. It’ll bring up a browser tab where you have to select your Microsoft account. This came up on a different screen for me, which is why you can’t see it. Okay, I selected my account, so I’m logged in.</p>
<p>Now we need to connect to Azure Container Registry. Click the Docker logo. Then click “Connect Registry”, and select “Azure”.</p>
<p>Next, we need to create a Dockerfile, which is a file that tells Docker how to build a specific container. Normally, we’d need to type some instructions that tell Docker what base image to use and how to install our application and all of its dependencies, but this isn’t a Docker course, so we’re going to take a shortcut. We’re just going to copy an example container image that Microsoft has already created.</p>
<p>Click on the “Explorer” icon. Then click “Open Folder”, and create a new folder called “dockerdemo”. Now click “New File”. To save you the trouble of typing in the contents of this file, I’ve put the text in a readme file in a GitHub repository. You can find a <a href="https://github.com/cloudacademy/azure-container-app">link</a> to the repository at the bottom of the Overview tab below this video. Copy this text, paste it into the editor, and save it. Call it “Dockerfile”.</p>
<p>These instructions tell Docker to get a .NET Core container image from the Microsoft Container Registry, which is Microsoft’s own registry. The last line tells Docker where the app is in the container, so it can start it when it runs the container.</p>
<p>Now we’re going to build the container image. Hit the F1 key. Then type “docker images”, and select “Build image”. This is what we want to name the image plus the tag to apply to it. We need to tell it that we’re going to put this image in our container registry, so we need to prefix this with the URL of the container registry. I called mine “careg”. Then type “.azurecr.io” because that’s where Azure Container Registry hosts it. Then slash and the name of the image. Then leave the tag as “latest” which means that this is the latest version of the container.</p>
<p>Okay, it’s done. Now we’re going to push the image to the container registry. Click the Docker logo. The image name shows up here. If you click on it, the “latest” tag appears, which means this is the version of the image that we just built. Now, right-click on the image and select “Push”. It brings up the image name and tag again up here, so hit “Enter”. It takes quite a while to push the image to the registry, so I’ll fast-forward.</p>
<p>All right, it’s done. To check that it worked, click the Refresh button next to “Registries”, and the image name should show up under your registry. If you click on it, the tagged version of the image is there.</p>
<p>Now that the container image is in our registry, we can finally deploy it to Azure App Service. Right-click the tagged image, and select “Deploy image to Azure App Service”. Choose a globally unique name for the app. I’m going to use “ca” and the “dockerdemo”. You’ll have to choose something else. Then select the resource group you created before. I called mine “demorg”. Then select a region.</p>
<p>Finally, select an App Service Plan. If you haven’t created one already, then you can create one from here. The pricing tier for your service plan has to be at least Basic because you can’t deploy a container to a Free plan.</p>
<p>If you have an App Service Plan and it’s not showing up here, it might be because it’s for the wrong operating system. This Docker image runs on Linux, so you can only select a Linux App Service Plan. It’s possible to deploy a Windows container to App Service, but most people use Linux.</p>
<p>Now, it’s pulling the image from the container registry and deploying it to the App Service Plan. Okay, it’s finished. Now we can make sure it worked by clicking “Open Site”. If you need to do this after the popup disappears, you can click on the Azure logo. Here’s the app we just pushed to App Service in a container. If you right-click, you can select “Browse Website”. It came up on my other monitor, so I’ll bring it over. It opened the URL of the app we just deployed on App Service. This is Microsoft’s sample app, so it worked.</p>
<p>That’s the end of this demo. If you want to avoid incurring any additional charges, then the easiest way to delete everything is to delete the resource group you created. I’ll do that with my demorg resource group.</p>
<p>And that’s it for running a container on Azure App Service. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>
<h2 id="Running-a-Container-on-Azure-App-Service-1"><a href="#Running-a-Container-on-Azure-App-Service-1" class="headerlink" title="Running a Container on Azure App Service"></a><strong>Running a Container on Azure App Service</strong></h2><p><a href="https://github.com/cloudacademy/azure-container-app">Course GitHub repo</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Setting-and-Retrieving-Azure-Blob-Storage-Properties-and-Metadata-21</title>
    <url>/2022/11/14/AZ-204-Setting-and-Retrieving-Azure-Blob-Storage-Properties-and-Metadata-21/</url>
    <content><![CDATA[<h1 id="Setting-and-Retrieving-Azure-Blob-Storage-Properties-and-Metadata"><a href="#Setting-and-Retrieving-Azure-Blob-Storage-Properties-and-Metadata" class="headerlink" title="Setting and Retrieving Azure Blob Storage Properties and Metadata"></a>Setting and Retrieving Azure Blob Storage Properties and Metadata</h1><p>Welcome to “Setting and Retrieving Azure Blob Storage Properties and Metadata”. I’m Guy Hummel. To get the most from this course, you should already have some knowledge of Azure Blob Storage. You should also have some experience with programming, especially C#.</p>
<p>In this short course, I’ll explain how to manage blob properties and metadata using the Azure Portal and the Azure Storage client libraries for .NET.</p>
<p>So what’s the difference between blob properties and metadata? Properties are automatically created by Azure, while metadata is user-defined. That is, metadata is optional, and you only create it if you need it.</p>
<p>Let’s have a look at some properties. I’m in the Azure Portal, and I’m looking at a blob container in a storage account. These are the blobs in the container. To see the system properties for one of them, you right-click on the blob and select “Properties”.</p>
<p>Some of the properties are pretty straightforward, such as Last Modified, Creation Time, and Size. You’ll notice that these properties can’t be modified, which makes sense because there’s only one true value for each of them. Some of the properties will change if you change the blob itself. For example, if you add more data to the blob, then its size will increase, or if you move the blob from the Hot tier to the Cool tier, then the access tier property will change.</p>
<p>You can see that there are a handful of properties that you can change, though. The first one only applies if this blob is configured to be cached in the Azure Content Delivery Network. The rest of them are things like content type and content language. Azure doesn’t necessarily know what these should be set to, so it allows you to set them. For example, you could set the content language to “en-us”, which means US English. Then, you’d click “Save”.</p>
<p>There are actually a few more you can set using the portal even though it doesn’t look like you can. These three lease properties can be set indirectly by clicking the “Acquire lease” button. If you apply a lease to a blob, then the blob can’t be modified by anyone else until the lease has expired. It’s a good way to prevent two people or programs from making conflicting changes to a blob.</p>
<p>When we click “Acquire lease”, it changes the lease status to “Locked”, the lease state to “Leased”, and the lease duration to “Infinite”. The duration is infinite because we didn’t set a time when the lease should expire. Of course, we weren’t given the option to set an expiration time, so we didn’t have a choice. To set one, we’d need to use the Azure Storage client libraries. To end the lease, we can click “Break lease”. Now, these three properties have changed again.</p>
<p>Okay, down here we can see a Metadata section. It’s empty because, as I mentioned, metadata is optional. Suppose we wanted to set a category for each of our documents. Then we’d create a key called “category”, and we’d set the value to the appropriate category for the document, such as “finance”. Then we’d click “Save”, and our key&#x2F;value pair would show up in the metadata list.</p>
<p>Using the Azure Portal to read and write blob properties and metadata is fine if you only need to change a few blobs, but if you need to make a lot of changes, then it would be easier to write a script. You could do that using either the Azure command-line interface or Azure PowerShell. If you have an application that needs to manage blob properties and metadata, then you can use Azure Storage client libraries. They’re available for a number of languages, but I’ll show you an example from Microsoft’s documentation that uses the .NET version.</p>
<p>This is an example C# method called SetBlobPropertiesAsync. It shows how to set the ContentType and ContentLanguage properties. First, it retrieves the existing properties by calling the GetPropertiesAsync method. It does this because when it creates a new BlobHttpHeaders class, it needs to set all of the properties for the blob, so it needs to know what to set the other properties to. By the way, even though it’s called BlobHttpHeaders, it just means BlobProperties.</p>
<p>First, it sets the ContentType to “text&#x2F;plain” and the ContentLanguage to “en-us”, which is the whole purpose of this method. Then it sets the remaining properties to the values it retrieved at the beginning. If it didn’t set these properties, then their existing values would be wiped out, so it has to set them.</p>
<p>Now it calls the SetHttpHeadersAsync method to actually set the properties of the blob to the values in the BlobHttpHeaders class that was created above. Then there’s a catch block to say what to do if the operation fails.</p>
<p>Okay, now how about setting blob metadata? It’s pretty similar. Here’s an example method called AddBlobMetadataAsync. First, it creates a Dictionary object called “metadata” that you can put key&#x2F;value pairs in.</p>
<p>Then it shows you two different ways to add a key&#x2F;value pair. The first is to use the Add method and pass it the key and value. In this example, it’s setting a key called “docType” to the value “textDocuments”, but you could set these to whatever you want because they’re user-defined.</p>
<p>The second way is to use this key&#x2F;value syntax where the key, called “category” in this example, is in square brackets, and the value (“guidance”, in this example) comes after the equal sign.</p>
<p>When you’re done adding key&#x2F;value pairs to the dictionary, you call the SetMetadataAsync method and pass it the dictionary object that contains the metadata. Finally, there’s a catch block to handle errors.</p>
<p>Now, I’ll show you one more code sample. This one shows you how to read metadata from a blob. Interestingly, you use the GetPropertiesAsync method, which seems weird considering we’re trying to get the metadata, not the properties. Well, this method actually gets both the properties and the metadata. We already saw how to read the properties from this in the first example, but to retrieve the metadata, you use a foreach loop to read all of the key&#x2F;value pairs from the Metadata dictionary.</p>
<p>And that’s it for setting and retrieving properties and metadata in Azure Blob Storage. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>
<h2 id="1Setting-and-Retrieving-Azure-Blob-Storage-Properties-and-Metadata"><a href="#1Setting-and-Retrieving-Azure-Blob-Storage-Properties-and-Metadata" class="headerlink" title="1Setting and Retrieving Azure Blob Storage Properties and Metadata"></a>1<strong>Setting and Retrieving Azure Blob Storage Properties and Metadata</strong></h2><p><a href="https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blob-properties-metadata#set-and-retrieve-properties">Manage blob properties and metadata with .NET</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-204-Using-Deployment-Slots-in-Azure-App-Service-6</title>
    <url>/2022/11/14/AZ-204-Using-Deployment-Slots-in-Azure-App-Service-6/</url>
    <content><![CDATA[<h1 id="Using-Deployment-Slots-in-Azure-App-Service"><a href="#Using-Deployment-Slots-in-Azure-App-Service" class="headerlink" title="Using Deployment Slots in Azure App Service"></a>Using Deployment Slots in Azure App Service</h1><p>Welcome to “Using Deployment Slots in Azure App Service”. To get the most from this course, you should already have some basic experience using App Service. If you don’t, then you can take our “Introduction to Azure App Service” course.</p>
<p>App Service makes it easy to deploy a new version of an app to production. All you have to do is run the “az webapp up” command. But you’d normally want to test a new version thoroughly before putting it into production. So you need a testing environment that’s as close as possible to your production environment.</p>
<p>App Service has a great solution. It’s called a deployment slot. By default, an app has one deployment slot called “Production”. But you can create other deployment slots, too, and give them names like “testing” and “staging”. Then when you deploy an app, you can choose which deployment slot to put it in.</p>
<p>Here’s a typical way to do it. First, you clone your production slot to a staging slot. When you do this, you can choose to clone the production slot’s configuration, including app settings, connection strings, the language framework, and many other settings. That way your staging slot’s configuration will be as close as possible to your production slot’s configuration, which will make your testing more valid.</p>
<p>Once you’ve cloned the slot to a new one, though, you can change any of those settings in the new slot if you need to. For example, you might change the version of the language framework to a newer version, such as going from Java 8 to Java 11.</p>
<p>You might expect it to clone the actual app as well, and not just the settings, but it doesn’t. That’s because it expects you to upload a new version of the app to the staging slot, so there’s no point in cloning the production app.</p>
<p>Note that if you use the command line to upload the app to the staging slot, you can’t use the “az webapp up” command. Instead, you have to use the “az webapp deployment source” command, which takes a bit more work. The most common deployment source is a git repository.</p>
<p>Once you’ve tested the new version in your staging slot, the next step is to swap the staging slot with the production slot. You start by setting the source slot and the target slot. The source slot contains the new version of the app, so it’s the staging slot. The target slot is the one that will be running the new version once the swap has been completed, so it’s the production slot.</p>
<p>When you tell it to swap the source and target slots, it swaps not only the two different versions of your app but also any settings that you changed in the staging slot, such as the language framework if you changed that.</p>
<p>However, there is an exception to this. You can create slot-specific settings. For example, it’s usually a good idea to have a separate test database so you don’t mess up the production one when you’re testing a new version of your app in the staging slot. In this case, you’d need to have a different connection string for the database in each slot, and you wouldn’t want this setting to be swapped. It would need to stay with the slot rather than the app, which is why it’s called slot-specific. So when you add or change an application setting or a connection string in a non-production slot, you have the option of making it a slot-specific setting.</p>
<p>Aside from giving you the ability to properly test a new version before putting it into production, there are a couple of other big advantages to using a swap to deploy an app. First, when you deploy a new version of an app, it will often cause a reboot of the virtual machines that are used to host the app. During the warm-up period when the <a href="https://cloudacademy.com/course/getting-started-with-azure-virtual-machines-988/what-is-a-virtual-machine/">VM instances</a> are spinning up, the app is not available, so if you were to simply deploy the new version of the app to production, it would cause downtime. But if you deploy to a staging slot first, then the VM instances have a chance to warm up before you swap the slot with production.</p>
<p>Second, if there’s a problem after you swap the new version into production, you can easily roll back and revert to the previous version. All you have to do is swap the two slots again. If you’ve ever had to quickly roll back a new version that you’ve deployed, then I’m sure you can appreciate how helpful this feature is.</p>
<p>There’s also an option that makes the swap even safer if you have slot-specific settings. It’s called “swap with preview”. This does the swap in two phases. First, it temporarily copies the slot-specific settings from the target slot (that is, the production slot) to the source slot (that is, the staging slot). It then gives you a chance to test the new version of the app with all of the settings it will have after the swap is completed.</p>
<p>If it doesn’t work, then you can cancel the swap. If it does work, then you can tell it to complete the swap. At that point, it swaps the app and the other settings between the two slots. But it leaves the slot-specific settings with each slot. So the version of the app that was previously in production and is now in the staging slot has the connection string for the test database, for example.</p>
<p>There’s also a riskier option for doing a swap. If you enable “auto swap” on a slot, then every time you push a new version of your app to that slot, it will automatically swap it with whichever slot you specify. So, for example, if you enable “auto swap” on the staging slot, and you set the “Auto swap deployment slot” to the Production slot, then every time you upload a new version of the app to the staging slot, it will automatically be swapped into Production.</p>
<p>Why on earth would you do such a thing? Well, you might want to do this as part of an <a href="https://cloudacademy.com/course/implementing-a-build-strategy-for-continuous-integration-with-azure-devops/introduction/">automated DevOps process</a>. If you have a continuous integration system that automatically tests your app every time you commit new changes to the source code repository, then you might feel comfortable putting new versions into production without doing any manual testing.</p>
<p>So, if that’s the case, then why bother pushing it to the staging slot first and then auto-swapping it into production? Why not just push it straight to production? Well, as I mentioned earlier, when you push an app to the staging slot first, it has a chance to warm up before going into production.</p>
<p>In fact, it’s even possible to create a custom warm-up. If your app needs to be initialized before it can serve requests from users, then you can create a custom warm-up that makes sure the initialization is complete before it performs the swap. There are two ways to set this up. If your app is running on an IIS web server, then you can configure the applicationInitialization element in the web.config file. Alternatively, regardless of the web server you’re using, you can set WEBSITE_SWAP_WARMUP_PING_PATH and WEBSITE_SWAP_WARMUP_PING_STATUSES in the app settings in <a href="https://cloudacademy.com/course/getting-started-with-azure-app-service-949/introduction/">Azure App Service</a>.</p>
<p>So far, I’ve only talked about having two slots and having all of your end-user traffic go to the production slot. But you can have more complicated configurations if you want. First, you can have more than two slots. For example, you might want to have separate development, testing, staging, and production slots to handle the different stages of your software development process.</p>
<p>Second, you can make things really interesting by sending some of your end-user traffic to non-production slots. For example, suppose you want to do canary testing, which means that you want to reduce the risk involved with deploying a new version of your app by releasing the new version to only a small percentage of your users. Then if those users don’t have any problems with it, you can release it to the rest of your users.</p>
<p>App Service supports this type of testing by allowing you to set a different percentage of traffic for each slot. Normally, the production slot is set to take 100% of the traffic and all other slots are set to take 0%. But if you wanted to do a canary test, you could set the staging slot to 5% and the production slot to 95%. Then after you’ve done your testing, you could swap the two slots, which would put the staging version into production, and then set the production slot to take 100% of the traffic again.</p>
<p>I should mention that the total number of slots you can use depends on the pricing tier of the App Service Plan you’re using. Deployment slots are only supported in the Standard, Premium, and Isolated tiers. The Standard tier supports up to 5 slots, but the Premium and Isolated tiers support up to 20. So if you’re using the Standard tier, and for some reason, you need more than 5 slots, you can just scale up your service plan to the Premium tier.</p>
<p>And that’s it for deployment slots in Azure App Service. Please give this course a rating, and if you have any questions or comments, please let us know. Thanks!</p>
]]></content>
  </entry>
  <entry>
    <title>AZ-500-AZ-500-Exam-Preparation:-Summary-23</title>
    <url>/2022/11/15/AZ-500-AZ-500-Exam-Preparation-Summary-23/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-204-Overview-of-Azure-Services-2</title>
    <url>/2022/11/14/AZ-204-Overview-of-Azure-Services-2/</url>
    <content><![CDATA[<h1 id="Course-Introduction"><a href="#Course-Introduction" class="headerlink" title="Course Introduction"></a>Course Introduction</h1><p>Welcome to Overview of Azure Services. My name’s Guy Hummel and I’m a Microsoft-certified Azure Expert. If you have any questions, feel free to connect with me on LinkedIn and send me a message, or send an email to <a href="mailto:support@cloudacademy.com">support@cloudacademy.com</a>.</p>
<p>This course is an introduction to Microsoft Azure. It’ll give you a broad overview of the types of services available in Azure without going too deeply into any of them.</p>
<p>This course is intended for anyone who’d like to learn more about Azure, so you don’t need to have any experience with it before taking this course. It would be helpful to have some general technical knowledge though because I don’t explain basic terms like <em>file server</em> or <em>operating system</em>.</p>
<p>The best way to learn is by doing, so I recommend that you try performing these tasks yourself on your own Azure account. If you don’t already have one, then you can create a free trial account.</p>
<p>To save you the trouble of typing in the URLs and commands shown in this course, I’ve put them in a readme file in a GitHub repository. You can find a link to the repository at the bottom of the Overview tab below this video.</p>
<p>By the end of this course, you should be able to describe some of the Azure services available in various categories, use the <a href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-portal/">Azure Portal</a>, and use the <a href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-cli/">Azure command line</a>. We’d love to get your feedback on this course, so please give it a rating when you’re finished.</p>
<p>Now, if you’re ready to learn about what you can do with Microsoft Azure, then let’s get started.</p>
<h1 id="Azure-Overview"><a href="#Azure-Overview" class="headerlink" title="Azure Overview"></a>Azure Overview</h1><p>So what is <a href="https://cloudacademy.com/course/overview-of-azure-services/course-introduction/">Microsoft Azure</a>? To put it simply, it’s a collection of online services that organizations can use to build, host, and deliver applications. The best part is that you don’t need to have your own data center or even any servers because Azure runs in Microsoft’s data centers around the world, which your users can access over the internet.</p>
<p>Not only does this approach save you the trouble of having to build and maintain your own on-premises IT infrastructure, but it can also save you money because you only have to pay for what you use, and you can scale your Azure resources up and down as needed.</p>
<p>For most applications, you need three core elements: compute, storage, and networking. Let’s start with compute. In Azure’s early days, Microsoft offered only one type of compute service: virtual machines, or VMs for short. These are machines that run either Windows or Linux. If you currently have an application running on a Windows or Linux server, then the most straightforward way to migrate it to Azure is to do what’s called a “lift and shift” migration. That is, you simply lift the application from your on-premises server and shift it to a virtual server in the cloud. Azure VMs are known as Infrastructure-as-a-Service because they’re traditional IT infrastructure components that are offered as a service.</p>
<p>Later, Microsoft came out with what’s known as a Platform-as-a-Service offering called Azure App Service. This platform lets you host web and mobile applications without having to worry about the underlying infrastructure. After doing a minor amount of configuration, you can just upload your code to an App Service instance and let Azure take care of the details. In most cases, this is a better solution than using virtual machines, but there are times when it makes more sense to use VMs. For example, if you have an application that’s not a web or mobile app, then you can’t use App Service, so you’ll have to use a VM.</p>
<p>These days, the hottest compute technology is containers. These are self-contained software environments. For example, a container might include a complete application plus all of the third-party packages it needs. Containers are somewhat like virtual machines except they don’t include the operating system. This makes it easy to deploy them because they’re very lightweight compared to virtual machines. In fact, containers run on virtual machines.</p>
<p>Microsoft provides a variety of ways to run containers. The simplest way is to use Azure Container Instances. This service lets you run a container using a single command. If you have a more complex application that involves multiple containers, then you’ll probably want to use Azure Kubernetes Service, which is what’s known as a container orchestrator. It makes it easy to deploy and manage multi-container applications.</p>
<p>Before we move on, I should mention one more compute service. It’s called Azure Functions, and it’s Microsoft’s main “serverless” offering. Azure Functions is kind of like Azure App Service except that it executes individual functions rather than entire applications, and you only pay for it when it gets used. When you provision an App Service instance, it runs until you shut it down, and you pay for it the whole time it’s running. Although it’s possible to configure Azure Functions in the same way, it’s usually better to use the Consumption plan, which means that it only uses resources when a function is running, so you only pay when a function is running.</p>
<p>Okay, that was a lot of compute options. Now let’s move on to storage. Believe it or not, there are even more options for storage than for compute. That’s because I’m also including databases and other data stores in the storage category.</p>
<p>The simplest form of storage is called Blob storage. It’s referred to as object storage, but really it’s just a collection of files. It’s not like a normal file system, though, because it doesn’t have a hierarchical folder structure. It has a flat structure. It’s typically used for unstructured data, such as images, videos, and log files.</p>
<p>One of the great things about it is that it has multiple access tiers: hot, cool, and archive. The hot tier is for frequently accessed files. The cool tier is for files you expect to access only about once a month or less. The advantage is that it costs less than the hot tier as long as you don’t access it frequently. The archive tier is for files that are rarely accessed, such as backup files. It has the lowest storage costs but the highest retrieval costs. It also takes several hours to retrieve files from the archive tier.</p>
<p>If you need hierarchical file storage, there are a couple of options. The one that will probably seem more familiar is Azure File Storage, which is like a typical SMB file server. It serves up file shares that you can mount on Windows servers. The less familiar option is Azure Data Lake Storage Gen2. This is Hadoop-compatible storage for use with data analytics applications. </p>
<p>Okay, now how about relational databases? In an on-premises Microsoft environment, SQL Server is the most commonly used database. The cloud equivalent is Azure SQL Database. It’s very similar to SQL Server, although it’s not 100% compatible. If you need to run an open source database, then Microsoft still has you covered. It offers Azure Database for MySQL, MariaDB, and PostgreSQL.</p>
<p>All of these databases, including both SQL Database and the open source options, are suitable for online transaction processing. On the other hand, if you need to build a data warehouse, then Azure Synapse Analytics is the best choice.</p>
<p>If you release an application that attracts a very large number of users, you may find that a traditional relational database can’t scale to meet the demand. One common solution is to use a so-called NoSQL database. These databases are designed to handle far more data than relational databases. However, in order to achieve that massive scalability, they have to sacrifice something, so they don’t support all of the features of relational databases. Nonetheless, they have become a cornerstone of many cloud-based applications.</p>
<p>Microsoft’s main NoSQL offering is called Cosmos DB. It’s an amazing database service that can scale globally. Another NoSQL service is Azure Cache for Redis, which is typically used to speed up applications by caching frequently requested data.</p>
<p>That’s a lot of storage options, and I still didn’t cover them all, but you don’t need to know every single option at this point, so let’s move on to network services.</p>
<p>When you create a virtual machine on Azure, you have to put it in a virtual network, or VNet. A virtual network is very similar to an on-premises network. Each virtual machine in a VNet gets an IP address, and it can communicate with other VMs in the same VNet. You can also divide a VNet into subnets and define routes to specify how traffic should flow between them. </p>
<p>By default, all outbound traffic from a VM to the internet is allowed. If you also want to allow inbound traffic, then you need to assign a public IP address to the VM.</p>
<p>If you want VMs in one VNet to be able to communicate with VMs in another VNet, then you can connect the VNets together using VNet peering. By the way, so far, I’ve only been talking about virtual machines, but other resources, such as Kubernetes clusters, can be in VNets, too.</p>
<p>If you want to create a secure connection between a VNet and an on-premises network, then you can use either a VPN, which stands for Virtual Private Network, or Azure ExpressRoute. A VPN sends encrypted traffic over the public internet, whereas ExpressRoute communicates over a private, dedicated connection between your site and Microsoft’s Azure network. ExpressRoute is much more expensive than a VPN, but it provides higher speed and reliability since it’s a dedicated connection.</p>
<p>There are plenty of other network services available as well, but the ones I’ve covered are enough to give you a good high-level understanding of Azure networking.</p>
<p>Azure also provides a wide variety of other services outside of the core compute, storage, and networking categories, such as in hot areas like artificial intelligence and DevOps. I’ll go over some of those later.</p>
<p>The easiest way to understand how Azure works is to actually use it, so in the next lesson, we’ll create a virtual machine. If you’re ready, then go to the <a href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-portal/">next video</a>.</p>
<h1 id="Using-the-Azure-Portal"><a href="#Using-the-Azure-Portal" class="headerlink" title="Using the Azure Portal"></a>Using the Azure Portal</h1><p>Now we’re going to dive into using <a href="https://cloudacademy.com/course/overview-of-azure-services/course-introduction/">Azure</a>. Suppose you have a server application that you want to migrate to the cloud. As I mentioned earlier, the most straightforward way to do this is to move the application to a virtual machine on Azure.</p>
<p>There are many ways to interact with Azure, the Azure portal runs in a browser, so you don’t need to install anything to use it. Alternatively, you can install the CLI, which stands for command-line interface, or Azure PowerShell or the SDK, which stands for Software Development Kit.</p>
<p>If you want to use a command-based interface, and you have a lot of experience with PowerShell, then that’s probably your best bet. Otherwise, use the CLI, which is easier to learn than PowerShell. It’s actually possible to use the CLI and PowerShell from inside the browser too without having to install anything on your desktop. I’ll show you how to do that in the next lesson.</p>
<p>The SDK is what you need to use if you’re going to add code in your applications to interact with Azure.</p>
<p>It’s even possible to interact with Azure from a mobile device by using the Azure mobile app. You can even use the CLI and PowerShell from the mobile app.</p>
<p>The easiest way to get started, though, is to use the Azure portal. So if you’re following along on your own account, go to portal.azure.com. There are a few different ways to get to the place where you can create a VM. In this search box, you can start typing virtual machine and you’ll see it come up at the top of the search results.</p>
<p>Another way is to go into the menu on the left and select virtual machines. It takes you to the same place. Once you’re here, you can click Add.</p>
<p>The first thing it wants to know is what subscription to put this VM in. It always sets this to your default subscription, so you can usually just leave it that way. But I should explain what a subscription is.</p>
<p>When you sign up for an Azure account, Microsoft creates both a billing account and a subscription. It’s easy to get the two mixed up because they’re both involved in billing. A <em>billing account</em> is an agreement you or your organization sign to use Microsoft services. A <em>subscription</em> is actually just a collection of Azure resources. But all of the resources in a subscription are on the same monthly bill, so it’s also a unit of billing.</p>
<p>So why do you need to have both a billing account and a subscription? Well, you might want to have multiple subscriptions in your billing account. Since each subscription generates a separate invoice, it can be useful to have a separate subscription for each department in your organization. Also, since the resources in different subscriptions are isolated from each other, you might want to have multiple subscriptions for security or compliance reasons.</p>
<p>Okay, so we’ll leave the subscription with the default. Next, it’s asking for the resource group. Like a subscription, a resource group is a collection of resources, but a subscription can have multiple resource groups so it’s a way of further grouping the resources within a subscription.</p>
<p>There are a variety of ways to divide resources into resource groups. But the best practice is to group related resources together, such as a VM and its associated storage account. Generally speaking, the resources in a group should be created and deleted at the same time, which makes sense if they’re components that work together to provide a solution.</p>
<p>All right, so let’s create a new resource group to hold this VM. I’ll call it example-RG. Now we need to give the VM a name. I’ll call it example-VM. Next we need to decide which region the VM should run in.</p>
<p>Microsoft has data centers on every continent except Antarctica. Each of these dots is a region, and each region contains multiple Azure data centers. You usually want to choose a region that’s closest to where your users are located. I’ll choose West US 2. Notice that it has a diamond in it. That’s because it has availability zones. I’ll explain what those are in a minute.</p>
<p>You need to set an availability option if you want to make sure your application will still be available, even if Azure experiences an outage that affects this VM. The first option is “Availability zone”, which is what I just showed you on the map. A region that supports availability zones has at least three data centers, each of which is called a zone. If you put VMs in multiple zones, then a data center outage won’t take down your application, because your VMs and other zones will still be running.</p>
<p>It added another field called “Availability zone”. We can choose 1, 2, or 3. It doesn’t really matter which one we choose for this VM, but if we were to create a second VM, we’d need to put it in a different availability zone. I’ll choose “1”. </p>
<p>Next, we need to choose a VM image. This is a copy of the disk that will be used for the VM. The choices are different versions of Linux and Windows, such as Ubuntu, Red Hat, and Windows Server. This is only a small subset of the images that are available. You can click on this link to see more. For example, suppose you want an image that includes not only Windows Server but also SQL Server, click on Databases and then type “sql server”. Surprisingly, there are images of SQL Server on Linux first. I’ll add windows to the search to narrow it down. There we go. There are lots of SQL Server image options. For this example, we’ll just go back and pick one of the basic options though. I’ll pick the Ubuntu server option.</p>
<p>If you use an Azure spot instance for this VM, then the cost will be dramatically lower, but the VM might be shut down with only 30 seconds’ notice. So you should only use this option for non-critical workloads.</p>
<p>There are lots of options for the size of the VM. At the top of the list, there’s a size with only one virtual CPU, half a gig of memory, and four gigs of temporary storage. You can see that the cost per month is very low. Some of these other options are much bigger, but so is the cost. Since we’re not actually going to use this VM, I’ll choose the cheapest option.</p>
<p>Here, we need to create the administrator account. In most cases, you should use an SSH public key for authenticating to the VM. But to keep it simple for this demo, I’ll use a password. You can name your administrator account almost anything.</p>
<p>The inbound port rules let you open up the VM to access from the internet. If this VM will be acting as a web server, then you’ll want to open up ports 80 and 443. There’s also an option to open up the SSH port so you can log into the VM remotely. The problem with opening up the SSH port here is that it will allow access from all internet addresses, which is dangerous. There are other more secure ways to give yourself access to the VM. So you shouldn’t select this unless you’re just doing some testing. I’m going to set this to “None”.</p>
<p>That’s it for the basic settings, but there are a few more settings we should have a look at. We’ll click this button to go to the disks tab. The operating system disk is set to premium SSD by default. That option has the highest performance, but it’s much more expensive than the other two. I’ll set it to Standard SSD. You can also add data disks if you want.</p>
<p>And now let’s have a look at the networking options. By default, it creates a virtual network, a subnet inside that virtual network, and a public IP address. If we already had another virtual network, we could put it in there instead if we wanted to.</p>
<p>Okay, that takes care of the compute, storage, and networking options for this VM. So let’s create it. First, click “Review + Create”. It says that our settings have passed validation testing. Then it summarizes all of our settings. Now click the Create button.</p>
<p>It’ll take a little while to create, so I’ll fast forward. All right, it’s done. We can click on “Go to resource” to have a look at the VM. </p>
<p>Here it shows the details of this VM, such as its status, and its public IP address. Up here it has some controls that let you stop and restart the VM or even delete it. If we had set up SSH authentication, then we could connect to it from here too. In the menu on the left, there are all kinds of options for things like activity logs, security, backups, and monitoring.</p>
<p>That’s it for this demo, you should have a pretty good idea of how to create resources in the portal now, because the process is fairly similar, regardless of what kind of Azure resources you’re creating. If you’re following along on your own Azure account, you might want to look around and see what you can do with your new VM.</p>
<p>When you’re done, make sure you delete the VM so you don’t incur any ongoing charges. The best way to delete everything associated with the VM, including the public IP address, etc., is to delete its resource group. Select Resource groups in this menu, and then click on “example-rg”. Here’s a list of all the resources associated with the VM. Now click “Delete resource group”. Then type the name of the resource group. Then click the Delete button.</p>
<p>Now if you’re ready to see how to work with Azure using the <a href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-cli/"><em>command-line interface</em></a>, then please go to the next video.</p>
<h1 id="Using-the-Azure-CLI"><a href="#Using-the-Azure-CLI" class="headerlink" title="Using the Azure CLI"></a>Using the Azure CLI</h1><p>As you saw in the <a href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-portal/">last demo</a>, it’s pretty easy to use the portal to create Azure resources but it’s definitely not the most efficient way to do it because it requires a lot of pointing and clicking. An alternative is to use the command line. Although it can be more difficult since you have to know the exact names of all the command line options. Once you’ve mastered it, you can often create and manage resources much more quickly.</p>
<p>In this demo, I’m going to show you how to create a website using Azure App Service. Do you remember when I said that it’s possible to use the command line without having to install anything on your desktop? Well, now that you’re familiar with the portal, I’ll show you how.</p>
<p>You see this icon to the right of the search bar? That’s how you start something called the Cloud Shell. It’s a very small virtual machine that you can use to run Azure commands. Click on it.</p>
<p>The first time you run Cloud Shell, it’ll ask you for permission to create a storage account that the Cloud Shell VM can use. This isn’t the first time I’ve used Cloud Shell, so my storage account is already set up. If you do get a dialogue box asking for permission, then click the option to create a storage account.</p>
<p>Cloud Shell supports both PowerShell and the Bash shell. You can switch between them using this menu. We’re going to use the Bash Shell because the commands are simpler. If you’re familiar with Linux commands, then it will be especially easy.</p>
<p>First, we need to download the files for a sample website. The command to do that is pretty long, so it’s easiest to copy and paste it. You can get it from the read me file in the GitHub repository for <a href="https://cloudacademy.com/course/overview-of-azure-services/course-introduction/">this course</a>. You can find a link to the repository at the bottom of the overview tab below this video.</p>
<p>Okay, copy this <code>git clone</code> command and paste it into the Cloud Shell window. It created a directory (which is the Linux term for folder) called html-docs-hello-world. Change into that directory with the <code>cd</code> command. I’m just going to use keyboard shortcuts to do the copying and pasting now. Now we can create an Azure App Service Web App using one command. Here it is.</p>
<p>It starts with <code>az</code> which means it’s an Azure command. Then we say <code>webapp</code> which is the command for Azure App Service. Then <code>up</code> which means to create the web app using the code in the current directory. Then we say <code>--location</code> and the name of the region where we want to deploy the web app. I’ve set it to <code>westus</code>. Then we say <code>--name</code> and what we want to call the app. I’m calling it <code>ca-example,</code> but you’ll have to call it something else because the name has to be unique among all of the out service names across all Azure customers. Then we say <code>--html</code> to tell it that we’re creating a static HTML website. Now hit Enter.</p>
<p>That’s all you have to do to create a website running on Azure App Service. It’ll take a little while to deploy so I’ll fast forward.</p>
<p>Okay, it’s done. Now we can make sure the website is working by going to this URL. Remember to change this name to the one you used. Great, there’s the sample website.</p>
<p>All right, now let’s delete the web app, so we don’t incur any more charges. In the VM demo, we deleted everything associated with the VM by deleting its resource group. We can do the same thing here but since we didn’t specify a resource group name in the command, how do we do that? App Service created a resource group for us. You’ll see it in the output from the command. Type <code>az group delete --name</code> then copy and paste the resource group name from here. Type “y”.</p>
<p>While that’s getting deleted, I should mention that there are many ways to deploy a web app. For example, both Visual Studio and Visual Studio Code can publish an app directly to Azure App Service without you needing to use the Azure portal or the command line. Once the app is deployed, though, you’ll need to use the portal or the CLI to manage it.</p>
<p>And that’s it for using the CLI.</p>
<h1 id="Service-Categories"><a href="#Service-Categories" class="headerlink" title="Service Categories"></a>Service Categories</h1><p>So far, I’ve only talked about compute, storage, and networking services, but Microsoft offers services in many other categories as well. I won’t talk about all of the <a href="https://cloudacademy.com/course/overview-of-azure-services/course-introduction/">Azure services</a> available, but I’ll go over some of the highlights.</p>
<p>If your organization is just getting started with Azure, then one of the first things you’ll want to do is figure out how you can migrate at least some of your existing applications to Azure. Microsoft provides a great tool for this called Azure Migrate.</p>
<p>First, it discovers your on-premises servers, both physical and virtual. On the virtual side, this includes both Hyper-V and VMware. Then it assesses these machines. For each one, it tells you whether or not it’s ready to migrate, how big the Azure VM will be, how much it will cost, and any dependent servers that will also need to be migrated. When you’re ready, it will even help you do the migration. Azure Migrate is also integrated with other tools to help you migrate SQL Server databases, web apps, and data. Also, if you have a virtual desktop infrastructure, there’s a tool that will do an assessment to help you migrate it to Windows Virtual Desktop, which is hosted on Azure.</p>
<p>Another question that always comes up is, “How do we integrate our on-premises identities with Azure?” In most cases, organizations are using Active Directory for identity management. Naturally, Microsoft has a good solution for these customers. And, not surprisingly, it’s called Azure Active Directory. This is a managed identity service that takes care of authentication. It’s not exactly the same as Active Directory, but it’s very similar, and there are many options for synchronizing your on-premises directory with your Azure directory.</p>
<p>Let’s move on to the development area. The DevOps approach has spread rapidly in organizations around the world. If you’re not familiar with it, the idea is that you can automate large portions of the building, testing, and releasing of application updates. Microsoft offers a suite of services called Azure DevOps to help you implement these processes. The most important service in this suite is called Azure Pipelines. It lets you create automated workflows to continuously build, test, and deploy code.</p>
<p>Another service that helps with the development process is Azure DevTest Labs, which makes it easy to spin up non-production environments. You could do this in other ways, but DevTest Labs gives you some extra capabilities, such as allowing administrators to control costs by setting limits on how many VMs can be deployed at once and ensuring that VMs are shut down when they’re not in use.</p>
<p>One really helpful service for speeding up the responsiveness of your applications is Azure Content Delivery Network, which lets you take advantage of Microsoft’s extensive global network. It caches your most frequently accessed content in locations around the world so your end-users will retrieve it from the closest point on the network. This really helps with making your web applications feel more like local applications.</p>
<p>Although there are billions of computers connected to the internet, they’re dwarfed by the number of other devices connected to the internet, such as smart thermostats or power meters. This is often referred to as the Internet of Things or IoT.</p>
<p>Microsoft offers a suite of services to help organizations connect, monitor, and control IoT devices. The simplest way to get started is to use Azure IoT Central, which is a fully managed SaaS solution that takes care of the technical details for you. It lets you create IoT applications without writing any code.</p>
<p>If you need something more customized, then you can integrate your applications with Azure IoT Hub. It’s a service that handles secure communications with thousands, or even millions, of IoT devices. In fact, it’s the service that IoT Central uses behind the scenes.</p>
<p>Microsoft also offers a solution called Azure Sphere to make your IoT devices more secure. It includes certified chips, the Azure Sphere operating system, and the Azure Sphere Security Service, all of which provide layers of protection for your IoT devices.</p>
<p>When you have a large volume of data coming in, whether it’s from IoT devices or applications, you’ll probably want to perform analytics on it. Microsoft’s analytics offerings have evolved over time, which is why you’ll see a variety of services in this area.</p>
<p>The oldest one is HDInsight. It supports a wide variety of open-source big data frameworks, including Hadoop, Spark, Hive, Storm, and many others. Azure Databricks is a similar service because it runs Spark as well, but it’s more user-friendly and easier to manage than HDInsight. Azure Synapse Analytics is the new version of Azure SQL Data Warehouse. It includes all of the old data warehouse functionality, but it also supports Spark analytics. Have you noticed a common theme? Apache Spark seems to be the king of big data analytics, and it’s just a question of which service you want to use to run it.</p>
<p>A more sophisticated type of analytics is artificial intelligence. You’ve probably heard about the amazing advances in AI that have enabled computers to do everything from language translation to facial recognition to beating humans at games like chess and Go.</p>
<p>Even though AI seems like it must be incredibly complex, the basic idea is fairly simple. The most common method is called machine learning. The way it works is you feed lots of real-world data into a program and the program tries to make generalizations about the data. This is known as training a model. It then uses these generalizations to make predictions when it’s given new data. For example, it can analyze the viewing habits of millions of Netflix customers and make generalizations about the kinds of movies that different types of people like to watch. Then it can look at movies you’ve watched in the past and predict which movie you’d like to watch now. That’s how Netflix makes its recommendations.</p>
<p>Microsoft offers lots of different AI services. If you’re new to AI, then the best place to start is Azure Cognitive Services. This is a collection of pre-built artificial intelligence tools. These services let you add AI capabilities to applications even if you don’t know anything about machine learning.</p>
<p>They’re grouped into five categories: decision, language, speech, vision, and web search. For example, the vision category includes the Computer Vision API, which can classify images, and the Face API, which can detect faces in images.</p>
<p>A related offering is Azure Bot Service, which gives you the tools to create a chatbot. This is an intelligent agent that can answer questions. For example, you could create a chatbot to handle simple support requests from customers.</p>
<p>If you have some basic knowledge of machine learning, then you might want to try Azure Machine Learning Studio. It lets you train and deploy machine learning models without any coding, using a drag-and-drop interface. I highly recommend it for learning the basics of machine learning.</p>
<p>A much more sophisticated option is Azure Machine Learning Services, which gives you full control over every stage of the machine learning process. You can use any Python-based machine learning framework, such as TensorFlow or PyTorch, train models using services such as Azure Databricks, and deploy models using services such as Azure Kubernetes Service. Azure Machine Learning Services is usually the best solution when you need to build your own custom artificial intelligence application.</p>
<p>The last category I’ll mention is integration tools. Since we use so many applications and services, it would be nice to be able to perform certain tasks on them automatically. For example, suppose you have an Azure blob container that your customer uploads documents to, and you’d like to be notified by email as soon as one arrives so that you can respond to it as quickly as possible. Microsoft offers a service called Azure Logic Apps that lets you automate this sort of task without writing any code. You can create a logic app using a drag-and-drop interface. </p>
<p>In this example, the logic app would be able to detect events that occur in Blob storage, but in most cases, you’d need to use another service called Azure Event Grid to notify your logic app of particular events. For example, if you want to get an email every time a virtual machine is created in a subscription, then you would configure Event Grid to send a message to your logic app whenever this occurs.</p>
<p>These examples are actually pretty trivial. Azure Logic Apps can be used to build complex workflows involving not only Azure services but also third-party services, such as Twitter and Dropbox.</p>
<p>I’ve covered some of the most important Azure services, but there are many more that I didn’t cover. So if you have a need that doesn’t seem to fit with any of these services, there are plenty of other options. First, you can look through Microsoft’s Azure Products page. Another way is to select all services from the main menu in the <a href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-portal/">Azure Portal</a> and then search for what you need. If you still can’t find what you’re looking for, then you can search the Azure Marketplace from the search bar at the top of the portal. The Marketplace includes a wide variety of third-party solutions that work with Azure, such as Docker Enterprise or Barracuda Firewall.</p>
<p>Okay, that’s it for my services overview.</p>
<h1 id="Designing-a-Solution"><a href="#Designing-a-Solution" class="headerlink" title="Designing a Solution"></a>Designing a Solution</h1><p>Now that we have a good idea of what <a href="https://cloudacademy.com/course/overview-of-azure-services/course-introduction/">services are available in Azure</a>, let’s see how we can put them together to create a more complex solution. One of the best ways to get started is to look at the examples in the Azure Architecture Center. If you click on reference architectures, you’ll see some recommended architectures for particular types of solutions. You can also check out these example workloads for specific business and technical challenges. I’m going to walk you through this e-commerce example.</p>
<p>The scenario in this example is that we need to build an Azure-based solution for customers who want to buy concert tickets. The diagram they use is a bit confusing, so we’ll use our own. </p>
<p>The first service we need to use is Azure App Service because it’s the easiest way to host a web app. To buy concert tickets, our customers will connect to our website, which will be hosted on Azure App Service.</p>
<p>The website won’t be able to do very much, though, until we add more services. For example, it would be pretty difficult to have a continually updated list of concerts without using a database. We could connect our website to a variety of databases, such as MySQL or Cosmos DB. But the most obvious choice is to use Azure SQL database. We can store concert information there and then have a list of upcoming concerts appear on the website.</p>
<p>If we’re going to have a lot of concerts to choose from, then we should also allow customers to search for specific concerts. Azure Cognitive Search is a good choice for that. It indexes your content so it can provide quick responses to search queries.</p>
<p>Next, we’ll want to give customers the ability to purchase tickets. This example solution for Microsoft doesn’t include the actual payment handling part of the transaction, but it does include a couple of the important pieces. First, we’ll want to give customers the option to create an account so they don’t have to re-enter their information every time they use our app to purchase tickets. The good solution is to use Azure Active Directory, B2C. The B2C stands for business to consumer. It provides everything you need to handle authentication for people outside of your organization.</p>
<p>When we receive custom orders, we should put them in a queue. Then we can have a separate component that pulls orders from the queue and processes them. This is one of the best ways to pass data from one component to another because it makes applications more reliable and scalable. Even if a component goes down, the data will be buffered in the queue until that component comes back up. Microsoft has a special type of storage to handle this need, and it’s called, not surprisingly, Queue Storage. It scales up and down as needed.</p>
<p>To retrieve orders from the queue and process them, we can use an Azure Function. The function will be triggered automatically whenever a new item is added to the queue. The function then creates a printable concert ticket for the customer. When it’s done, it stores the ticket in Blob Storage, which is the perfect place for image files. The ticket will then be sent to the customer, although that’s not shown in this example app.</p>
<p>Okay, now we have a complete solution (other than the couple of missing pieces that I mentioned), but we can add more functionality to our app. Another feature we can add is to allow people to post a review after they’ve seen a concert.</p>
<p>This can be handled in a similar way to the order processing feature. We’ll add new concert reviews to another queue and have an Azure Function that retrieves those concert reviews from the queue. And then it will store the reviews in SQL Database so they can be displayed on the website.</p>
<p>All right, now we have all the functionality we need, but we can add some more services to make our app better.</p>
<p>First, we can add Azure Cache for Redis and use it to cache concert information. This will make searches faster when customers are looking for concerts.</p>
<p>Another important way to make our app faster is to use the Azure Content Delivery Network. It’ll cache our website static files, so they’ll come up faster when customers access our site. </p>
<p>Yet another way to improve responsiveness is to use a service called Azure Traffic Manager. If we create multiple copies of our web app and host them in different regions around the world, then we can configure traffic manager to serve each customer from the web app instance that’s closest to the customer on the internet. So now not only do they get the static website files from the closest point on the content delivery network, but they also interact with the web app using the nearest instance.</p>
<p>To ensure that our app is functioning properly, we can use the application insight service. It takes care of monitoring the app and alerting us if there are issues. It also provides us with analytics to help diagnose issues and to understand how users are interacting with our app.</p>
<p>Finally, if we want to automatically classify concert reviews as positive or negative, we can use the Text Analytics component of cognitive services. We’ll have an Azure Function that runs a sentiment analysis on each concert review and then updates the concert review in the database to show whether it’s positive or negative.</p>
<p>That’s a lot of services for one application. So how much will everything cost? Thankfully, Microsoft provides sample pricing on the solution example page. It even has options for small, medium, and large implementations, depending on how much customer traffic we think we’ll get. Let’s try the medium option, which can handle up to 100,000 users per month.</p>
<p>This brings up the pricing calculator, which is a really handy feature for estimating the price of nearly any Azure service. I’m going to click the “Collapse all button” so we can see a summary of all the costs. The total is up here. It’s around $900 per month for everything.</p>
<p>If you look through the breakdown of the price, you might be surprised to see that app service is not the number one cost on this list. Considering that it hosts the core application, it seems like it should have the highest cost. But actually Azure Active Directory, B2C, and Azure Cognitive Search are higher. That’s a bit misleading, though, because this pricing example only includes app service hosting in one region. If we want to host the app in multiple regions and use traffic manager to make it more responsive for users around the world, then we’ll pay at least this much for each region, which would easily make app service the most expensive component.</p>
<p>And that’s it for designing a solution.</p>
<h1 id="Managing-Services"><a href="#Managing-Services" class="headerlink" title="Managing Services"></a>Managing Services</h1><p><a href="https://cloudacademy.com/course/overview-of-azure-services/designing-solution/">Building a solution</a> is one thing, but making sure it continues to run properly and cost-efficiently is another. And, of course, you also need to make sure everything is secure and compliant. Fortunately, Microsoft has lots of services to help you with these tasks, too.</p>
<p>Azure Monitor is your one-stop shop for keeping track of what’s happening with your Azure resources. It’s a collection of a variety of monitoring tools. Remember when I mentioned Application Insights in the last lesson? That’s actually just one component of Azure Monitor. Another is Log Analytics, which lets you run complex queries on multiple logs collected from your Azure resources.</p>
<p>But the core features of Azure Monitor are metrics and alerts. Metrics are basically statistics on various aspects of your resources, such as CPU usage on virtual machines and space used on Blob Storage. Azure Monitor creates graphs showing how these metrics have changed over time. It can also watch critical metrics you specify and send you an alert if there’s a problem. For example, it could text you if a database is overwhelmed by a sudden spike in activity.</p>
<p>Microsoft also provides a dashboard called Service Health where you can find out about problems with the Azure platform itself as well as upcoming maintenance events. You can even create alerts so you’ll be notified of both planned and unplanned outages.</p>
<p>Speaking of outages, it’s always a good idea to have backups of your critical resources to help recover from service failures. Most Azure services, such as Cosmos DB, have their own built-in backup capabilities. Azure VMs are a little different because you back them up using a service called Azure Backup. Surprisingly, you can even use this service to back up your on-premises systems.</p>
<p>Even if you’re doing a good job of maintaining your Azure systems, you might still be able to make some improvements. Microsoft provides a very helpful service called Azure Advisor that will not only suggest ways to improve the performance and availability of your applications, but it will even suggest ways to reduce your costs. For example, if it finds underutilized virtual machines, it will recommend that you use smaller (and less expensive) VMs to perform the same tasks.</p>
<p>Azure Advisor also provides security recommendations. It actually gets these recommendations from an important service called Microsoft Defender for Cloud, which was formerly known as Azure Security Center. So if you want to get more details, that’s the place to go. It’s a dashboard that gathers security information from resources across your subscriptions and assesses your vulnerabilities.</p>
<p>First, it shows you your secure score, which is an assessment of how secure your Azure resources are. You can click on it to see a list of recommendations to improve the security of your compute, storage, networking, and identity resources. Each recommendation shows you how much your secure score would be improved if you were to implement the recommendation. You don’t have to implement these recommendations, but it’s usually a good idea.</p>
<p>Then it shows you how well the resources in your Azure subscriptions meet regulatory compliance standards. By default, it will measure your compliance with a set of policies called the Azure Security Benchmark. You can customize these default policies if you want, or you can create your own custom policies from scratch in a service called, naturally, Azure Policy. For example, you could create a policy saying that all storage resources must reside in the European Union, and then if someone in your organization created a storage resource outside of the EU, it would show up in this compliance panel. You can also add other regulatory compliance standards, such as ISO 27001.</p>
<p>Finally, the Workloads protection panel shows you how many security alerts you have. These are potential threats that were detected by Microsoft Threat Intelligence. You can click on it to see the actual alerts so you can address them.</p>
<p>Be aware that only secure score and its recommendations are free. To get the other features, you need to enable enhanced security. This’ll give you lots of additional features as well. One really important feature is the ability to add your on-premises environments to the set of resources that are protected. Another enhanced feature is called just-in-time VM access. This blocks access to a virtual machine until an administrator allows specific users or IP addresses to get in for a limited period of time.</p>
<p>So far in <a href="https://cloudacademy.com/course/overview-of-azure-services/course-introduction/">this course</a>, I’ve only talked about creating Azure resources manually, but once you’re happy with a particular configuration for a resource, such as a virtual machine, you’ll probably want to create nearly identical resources in a more automated way. The solution is something called an ARM template. ARM is short for Azure Resource Manager.</p>
<p>First, you create an ARM template that specifies all of the configuration details for one or more resources. For example, suppose you create an ARM template for a specific VM configuration. Then, whenever you need to create a VM with those characteristics, you can just run a certain command using that template, and voila, it takes care of all of the details for you. The best part is that Microsoft makes it really easy to create an ARM template. All you have to do is go to an existing resource that has the configuration you want and select “Export template” from the menu.</p>
<p>An even more powerful tool is Azure Blueprints, which lets you automate the deployment of entire Azure environments. A blueprint is a collection of ARM templates plus a few other details, such as policies and user permissions. When a blueprint is assigned to a subscription, it not only automates the creation of an environment, but it also keeps a record of the deployment. This makes it a critical governance tool because it enables the tracking and auditing of deployments.</p>
<p>We’ve covered a lot of Azure management tools, and that’s not even all of them. You can rest assured that Microsoft has the services you need to manage your Azure infrastructure.</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>I hope you enjoyed <a href="https://cloudacademy.com/course/overview-of-azure-services/course-introduction/">learning about Azure</a>. Let’s do a quick review of what you learned.</p>
<p>Azure is a collection of online services that organizations can use to build, host, and deliver applications, and it runs in Microsoft’s data centers around the world.</p>
<p>Azure’s primary compute offerings are virtual machines, App Service, Azure Kubernetes Service, and Azure Functions.</p>
<p>In the raw storage area, Microsoft provides Blob storage for unstructured objects, File Storage for traditional file sharing, and Data Lake Storage Gen2 for Hadoop-compatible data analytics.</p>
<p>Azure’s relational database offerings are SQL Database, which is similar to SQL Server, and Azure Database for MySQL, MariaDB, and PostgreSQL for people who need those particular open source alternatives.</p>
<p>Microsoft’s main NoSQL offering is Cosmos DB. Another NoSQL service is Azure Cache for Redis, which is typically used to speed up applications by caching frequently requested data. </p>
<p>Azure’s equivalent of an on-premises network is a virtual network, or Vnet. You can connect VNets together using VNet peering. To create a secure connection between a VNet and an on-premises network, you can either use a VPN, which stands for Virtual Private Network, or Azure ExpressRoute, which is a dedicated, private connection.</p>
<p>Azure Migrate will help you move applications from your on-premises environment to Azure.</p>
<p>Azure Active Directory is a managed identity service that takes care of authentication and integrates with on-premises Active Directory servers.</p>
<p>Azure DevOps can help you automate large portions of the building, testing, and releasing of application updates. Azure DevTest Labs makes it easy to spin up non-production environments.</p>
<p>Azure Content Delivery Network caches your most frequently accessed content in locations around the world so your end-users will retrieve it from the closest point on the network.</p>
<p>Azure IoT Central lets you create Internet of Things applications without writing any code. If you need something more customized, then you can integrate your applications with Azure IoT Hub. Azure Sphere provides extra layers of protection for your IoT devices.</p>
<p>Some of Microsoft’s data analytics services include Azure Databricks, Azure Synapse Analytics, and HDInsight. All of these services can run Apache Spark.</p>
<p>Azure Cognitive Services is a collection of pre-built artificial intelligence tools. Azure Bot Service is a framework for creating chatbots. Azure Machine Learning Studio lets you train and deploy machine learning models without any coding. Azure Machine Learning Services is more sophisticated and gives you full control over every stage of the machine learning process. </p>
<p>Azure Logic Apps lets you automate integration tasks using a drag-and-drop interface.</p>
<p>Azure Monitor is a centralized place for keeping track of what’s happening with your Azure resources. Azure Security Center is a dashboard that gathers security information from your resources and assesses your vulnerabilities.</p>
<p>You can automate your deployments using Azure Resource Manager templates and Azure Blueprints.</p>
<p>You can access Azure using the <a href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-portal/">Azure Portal</a>, the <a href="https://cloudacademy.com/course/overview-of-azure-services/using-azure-cli/">command-line interface</a>, PowerShell, the Azure Software Development Kit, or the Azure Mobile App. You can run CLI or PowerShell commands in a browser by using Cloud Shell in the Azure Portal.</p>
<p>When you sign up for an Azure account, Microsoft creates both a billing account and a subscription. A billing account can contain multiple subscriptions, each of which contains its own isolated set of resources. Within a subscription, each resource is part of a resource group.</p>
<p>Azure has many regions around the world, and each region contains multiple data centers. You can provide high availability by distributing virtual machines across availability zones, which are in separate data centers.</p>
<p>Whew! I think that’s by far the most times I’ve said the word Azure in one video. Okay, now I’m going to say it just a few more times.</p>
<p>To learn more about Azure, please look through our Azure Library. We have courses, labs, and practice exams on nearly every Azure topic, and we have more content coming out all the time.</p>
<p>Please give this course a rating, and if you have any questions or comments, please let us know. Thanks and have fun with Microsoft Azure!</p>
<h2 id="1Course-Introduction"><a href="#1Course-Introduction" class="headerlink" title="1Course Introduction"></a>1<strong>Course Introduction</strong></h2><p><a href="https://github.com/cloudacademy/azure-overview">Course GitHub repo</a></p>
<h2 id="4Using-the-Azure-CLI"><a href="#4Using-the-Azure-CLI" class="headerlink" title="4Using the Azure CLI"></a>4<strong>Using the Azure CLI</strong></h2><p><a href="https://github.com/cloudacademy/azure-overview">Course GitHub repo</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-500-Analyzing-Resource-Utilization-on-Azure-9</title>
    <url>/2022/11/15/AZ-500-Analyzing-Resource-Utilization-on-Azure-9/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Cert-Prep:-Microsoft-Azure-Security-Technologies-AZ-500-24</title>
    <url>/2022/11/15/AZ-500-Cert-Prep-Microsoft-Azure-Security-Technologies-AZ-500-24/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Configuring-Azure-Application-and-Data-Security-17</title>
    <url>/2022/11/15/AZ-500-Configuring-Azure-Application-and-Data-Security-17/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Designing-for-Azure-Identity-Management-2</title>
    <url>/2022/11/15/AZ-500-Designing-for-Azure-Identity-Management-2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Configuring-Azure-VM-and-Container-Security-5</title>
    <url>/2022/11/15/AZ-500-Configuring-Azure-VM-and-Container-Security-5/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Designing-an-Azure-Network-Implementation-18</title>
    <url>/2022/11/15/AZ-500-Designing-an-Azure-Network-Implementation-18/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Implementing-Azure-Active-Directory-Privileged-Identity-Management-3</title>
    <url>/2022/11/15/AZ-500-Implementing-Azure-Active-Directory-Privileged-Identity-Management-3/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Implementing-Azure-Network-Security-13</title>
    <url>/2022/11/15/AZ-500-Implementing-Azure-Network-Security-13/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Implementing-Multi-Factor-Authentication-on-Azure-3</title>
    <url>/2022/11/15/AZ-500-Implementing-Multi-Factor-Authentication-on-Azure-3/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Lab-Deploying-and-Configuring-Azure-Firewall-16</title>
    <url>/2022/11/15/AZ-500-Lab-Deploying-and-Configuring-Azure-Firewall-16/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Lab-Azure-Key-Vault-and-Disk-Encryption-22</title>
    <url>/2022/11/15/AZ-500-Lab-Azure-Key-Vault-and-Disk-Encryption-22/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Lab-Manage-Access-to-Azure-With-Role-Based-Access-Control-8</title>
    <url>/2022/11/15/AZ-500-Lab-Manage-Access-to-Azure-With-Role-Based-Access-Control-8/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Lab-Enabling-Microsoft-Defender-for-Azure-SQL-Database-21</title>
    <url>/2022/11/15/AZ-500-Lab-Enabling-Microsoft-Defender-for-Azure-SQL-Database-21/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Lab-Managing-Access-in-Azure-Using-Privileged-Identity-Management-4</title>
    <url>/2022/11/15/AZ-500-Lab-Managing-Access-in-Azure-Using-Privileged-Identity-Management-4/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Lab-Managing-Azure-Storage-Accounts-15</title>
    <url>/2022/11/15/AZ-500-Lab-Managing-Azure-Storage-Accounts-15/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Lab-Monitoring-Resources-with-Azure-Monitor-11</title>
    <url>/2022/11/15/AZ-500-Lab-Monitoring-Resources-with-Azure-Monitor-11/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Lab-Securing-Azure-Storage-Account-using-Private-Endpoints-19</title>
    <url>/2022/11/15/AZ-500-Lab-Securing-Azure-Storage-Account-using-Private-Endpoints-19/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Load-Balancing-with-Azure-14</title>
    <url>/2022/11/15/AZ-500-Load-Balancing-with-Azure-14/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Managing-Azure-Data-Protection-and-Security-Compliance-12</title>
    <url>/2022/11/15/AZ-500-Managing-Azure-Data-Protection-and-Security-Compliance-12/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Managing-Azure-Subscriptions-and-Resource-Groups-6</title>
    <url>/2022/11/15/AZ-500-Managing-Azure-Subscriptions-and-Resource-Groups-6/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Microsoft-Azure-Security-Solutions-20</title>
    <url>/2022/11/15/AZ-500-Microsoft-Azure-Security-Solutions-20/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Managing-Role-Based-Access-Control-on-Azure-7</title>
    <url>/2022/11/15/AZ-500-Managing-Role-Based-Access-Control-on-Azure-7/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-500-Monitoring-Microsoft-365-Security-with-Azure-Sentinel-10</title>
    <url>/2022/11/15/AZ-500-Monitoring-Microsoft-365-Security-with-Azure-Sentinel-10/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-720-Troubleshoot-VPN-gateways-in-Microsoft-Azure-9</title>
    <url>/2022/11/14/AZ-720-Troubleshoot-VPN-gateways-in-Microsoft-Azure-9/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>You work for an enterprise-level organization that has different locations and many users working remotely. It’s essential that the network is stable and able to cope with the volume of traffic as the organization uses multiple cloud-based applications. It relies heavily on the use of audio and video features to hold meetings.</p>
<p>A good quality network is essential so that the different locations and remote users can access the applications and hold meetings in a seamless manner. If users can’t do their jobs properly they become frustrated. Network configuration and the use of Virtual Private Networks (VPNs) is integral to the success of collaborative working.</p>
<p>In this module, we’ll look at how to monitor and troubleshoot site-to-site and point-to-site VPNs.</p>
<h2 id="Learning-objectives"><a href="#Learning-objectives" class="headerlink" title="Learning objectives"></a>Learning objectives</h2><p>After completing this module, you’ll be able to:</p>
<ul>
<li>Explore Log Analytics to determine which logs can help resolve issues in your organization.</li>
<li>Understand the different gateways and SKUs.</li>
<li>Determine when it’s necessary to reset VPN gateways.</li>
<li>Differentiate between error types to troubleshoot connections.</li>
<li>Outline the key issues with certificate-based VPN connections.</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Demonstrate an understanding of the OSI model.</li>
<li>Demonstrate an understanding of Azure CLI.</li>
<li>Demonstrate an understanding of PowerShell.</li>
<li>Know how to operate Cloud Shell to run commands.</li>
<li>Have an understanding of how to set up site-to-site VPNs.</li>
</ul>
<h1 id="Troubleshoot-site-to-site-VPN-gateways"><a href="#Troubleshoot-site-to-site-VPN-gateways" class="headerlink" title="Troubleshoot site-to-site VPN gateways"></a>Troubleshoot site-to-site VPN gateways</h1><p>Completed100 XP</p>
<ul>
<li>10 minutes</li>
</ul>
<p>When you use site-to-site VPN gateways there are many steps and numerous areas where problems can occur. This section gives a brief overview of the setup, reviews the areas that can cause problems and shows how to troubleshoot connection issues.</p>
<h2 id="What-are-site-to-site-VPN-gateways"><a href="#What-are-site-to-site-VPN-gateways" class="headerlink" title="What are site-to-site VPN gateways?"></a>What are site-to-site VPN gateways?</h2><p>If you have a business with offices in different locations, you can establish a secure connection between the Local Area Networks (LANs) over the network. A site-to-site VPN gateway creates a secure connection between computer resources at different locations.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-site-to-site-vpn.png" alt="Screenshot showing a site-to-site VPN set-up."></p>
<p>The key steps to deploy a site-to-site VPN gateway are:</p>
<ul>
<li>Create the virtual network that will connect to the on-premises network.</li>
<li>Create a gateway subnet on your virtual network.</li>
<li>Create a VPN gateway.</li>
<li>Create the local network gateway.</li>
<li>Configure the on-premises gateway.</li>
<li>In Azure, create a connection for the site-to-site connection between Azure and the local network gateway.</li>
</ul>
<p>It will help to troubleshoot your site-to-site or point-to-site connection if you follow clear guidelines at the start. For example:</p>
<ul>
<li>Have a resource group name that clearly identifies the network you’re setting up as you cannot amend it later.</li>
<li>Adopt a naming convention that will easily allow you to identify the different components you create.</li>
</ul>
<p>When you experience problems, check the virtual network connections are correct before delving deeper into the setup. Ask yourself:</p>
<ul>
<li>Have you selected the correct subscription?</li>
<li>Have you selected the correct region?</li>
<li>Is the IP address range unique for both networks? You cannot connect if address spaces overlap.</li>
<li>Is the subnet address range correct? This field often auto-populates, and if you change the IPv4 address range, it will not automatically alter the subnet value.</li>
</ul>
<p>This unit will help to troubleshoot the various steps outlined above.</p>
<h2 id="Available-gateways-and-SKUs"><a href="#Available-gateways-and-SKUs" class="headerlink" title="Available gateways and SKUs"></a>Available gateways and SKUs</h2><p>A site-to-site VPN gateway is a connection over an IPsec&#x2F;IKE (IKEv1 or IKEv2) VPN tunnel.</p>
<h3 id="Gateway-types"><a href="#Gateway-types" class="headerlink" title="Gateway types"></a>Gateway types</h3><ul>
<li><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpn-gateway-settings">VPN</a> – sends encrypted traffic across the public internet.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/expressroute/expressroute-about-virtual-network-gateways">ExpressRoute</a> – sends network traffic on a private connection.</li>
</ul>
<h3 id="SKU-size"><a href="#SKU-size" class="headerlink" title="SKU size"></a>SKU size</h3><p>Each gateway is available in <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpngateways">different SKUs</a>. You need to determine the CPU usage and bandwidth you require to establish which SKU you need. If you have to change the size and&#x2F;or type of SKU it might be possible to upgrade. However, in some circumstances, you might need to set up the gateway again.</p>
<h3 id="VPN-type"><a href="#VPN-type" class="headerlink" title="VPN type"></a>VPN type</h3><p>When you set up a gateway you need to choose a VPN type. Site-to-site supports route-based or policy-based VPNs. It’s not possible to change the VPN type so check that the limitations of a policy-based gateway are not impacting your system. The key limitations are of a policy-based VPN are:</p>
<ul>
<li>You can only use the Basic SKU.</li>
<li>You can only use one tunnel.</li>
<li>Only certain devices allow policy-based connections.</li>
<li>You cannot connect to a point-to-site VPN gateway.</li>
</ul>
<p>If you have set up the VPN type incorrectly, you will need to delete the virtual gateway and create a new one.</p>
<h2 id="Border-Gateway-Protocol-BGP"><a href="#Border-Gateway-Protocol-BGP" class="headerlink" title="Border Gateway Protocol (BGP)"></a>Border Gateway Protocol (BGP)</h2><p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-bgp-configuration-screen.png" alt="Screenshot of the B G P configuration screen."></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-bgp-overview">BGP</a> is an optional feature that can be used with Azure route-based gateways. BGP has the same technology that’s used on the internet, but it’s within Azure. This enables the Azure VPN gateway and any connected on-premises gateways to exchange information about the IP ranges being used.</p>
<p>Use the following checklist to troubleshoot BGP connections:</p>
<ul>
<li>Have you created an autonomous system number (AS) on the virtual network gateway to enable BGP?</li>
<li>In Azure, against the Overview section of the virtual network, check that the system supports BGN. If the SKU is basic, then it needs to be resized to VpnGw1 and then add the AS number.</li>
<li>Have you used PowerShell to provide the Local Network Gateway with the AS number and a BGP peer address?</li>
<li>Has the connection gateway been BGP enabled?</li>
</ul>
<h3 id="Active-x2F-active-VPN-gateways"><a href="#Active-x2F-active-VPN-gateways" class="headerlink" title="Active&#x2F;active VPN gateways"></a>Active&#x2F;active VPN gateways</h3><p>There are two types of gateway: active&#x2F;active and active&#x2F;standby.</p>
<p>If you have configured active&#x2F;active, then ensure the following are met:</p>
<ul>
<li>Two gateway IP configurations have been created with two public IP addresses.</li>
<li>Ensure the EnableActiveActiveFeature flag has been set.</li>
<li>Ensure the gateway SKU is <strong>VpnGw1</strong>, <strong>VpnGw2</strong>, or <strong>VpnGw3</strong>.</li>
</ul>
<h2 id="Locate-review-and-configure-the-configuration-script-for-a-gateway"><a href="#Locate-review-and-configure-the-configuration-script-for-a-gateway" class="headerlink" title="Locate, review, and configure the configuration script for a gateway"></a>Locate, review, and configure the configuration script for a gateway</h2><p>To complete a cross-premises connection, download and complete a <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-download-vpndevicescript">configuration script</a>. Check the following if you are getting errors:</p>
<ul>
<li><p>Have you downloaded the correct script?</p>
</li>
<li><p>As the syntax is different for each model and firmware version it’s important to ensure you downloaded the correct script.</p>
</li>
<li><p>Open the script in a text editor and locate the Replace sections. Have you amended the parameter information correctly?</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-configuration-text.png" alt="Screenshot showing the REPLACE text highlighting the information that needs to be replaced in a configuration script."></p>
</li>
<li><p>Double check the following values on your device:</p>
<ul>
<li>Interface numbers.</li>
<li>Access control list numbers.</li>
<li>Policy names, numbers, and so on.</li>
</ul>
</li>
</ul>
<h2 id="Is-your-Edge-device-compatible-with-the-gateways"><a href="#Is-your-Edge-device-compatible-with-the-gateways" class="headerlink" title="Is your Edge device compatible with the gateways?"></a>Is your Edge device compatible with the gateways?</h2><p>Not all devices have been verified and validated for VPN gateways. If you are having problems with your devices, the following checklist may help:</p>
<ul>
<li>Check whether your <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpn-devices">device</a> is configured correctly, and most importantly, is validated by Microsoft.</li>
</ul>
<p>If your device is not on the list, contact your device manufacturer to see if they can provide support and configuration instructions. It might be that your devices will still work.</p>
<h2 id="Run-log-analytics-queries-to-troubleshoot-gateway-issues"><a href="#Run-log-analytics-queries-to-troubleshoot-gateway-issues" class="headerlink" title="Run log analytics queries to troubleshoot gateway issues"></a>Run log analytics queries to troubleshoot gateway issues</h2><p>You can use Log Analytics to identify trends and analyze data collected by Azure. It’s a useful tool to identify current problems and give important insights into the health of your gateways. Used proactively it might be possible to identify potential issues and be able to take preventative action, rather than troubleshooting.</p>
<p>A range of pre-written queries are available for you to use such as:</p>
<ul>
<li>4xx error rate by RL.</li>
<li>Application rule log data.</li>
<li>BGP route table.</li>
<li>Endpoints with monitoring status down.</li>
<li>Failed request per hour.</li>
<li>Gateway configuration changes.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-microsoft-azure-log-screen.png" alt="Screenshot of the Microsoft Azure log screen showing a query and its results."></p>
<p>When you first set up your queries, preview the information in the different tables to ensure that you are accessing the correct information to help understand what is happening on your network. The samples shown above are just a few of the several hundred pre-written queries available. There are <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/log-analytics-tutorial">tutorials</a> to read if you want to write more complex queries.</p>
<h2 id="Reset-a-VPN-gateway"><a href="#Reset-a-VPN-gateway" class="headerlink" title="Reset a VPN gateway"></a>Reset a VPN gateway</h2><p>If your on-premises devices are working correctly, but you cannot establish the IPsec tunnels with the Azure VPN gateway, you need to reset it.</p>
<p>There are two resets available:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/reset-gateway">Gateway</a> reset</li>
<li><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/reset-gateway">Connection</a> reset</li>
</ul>
<p>The gateway reset will reboot the gateway and retain the current public IP address, so you don’t need to update your VPN router configuration.</p>
<p>Before rebooting, use the following checklist:</p>
<ul>
<li>Are the two IP addresses for the Azure VPN gateway and the on-premises VPN gateway correctly configured in Azure and on-premises VPN policies?</li>
<li>Is the preshared key the same on both gateways?</li>
<li>Have you applied any specific IPsec&#x2F;IKE configurations, such as encryption or hashing logarithms?</li>
<li>If so, check that the configurations match on both gateways.</li>
</ul>
<p>When you issue the command to reboot, it shouldn’t take more than a minute. But if the problem isn’t solved and you issue the command to reboot a second time, it can take up to 45 minutes.</p>
<p>If the problem still exists after two reboots, then a service ticket should be raised with the Azure portal. The reset can be instigated via portal or by using PowerShell.</p>
<p>A connection <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/reset-gateway">reset</a> does not reboot the gateway, it only resets the selected connection.</p>
<h2 id="Troubleshoot-site-to-site-gateway-connection-issues"><a href="#Troubleshoot-site-to-site-gateway-connection-issues" class="headerlink" title="Troubleshoot site-to-site gateway connection issues"></a>Troubleshoot site-to-site gateway connection issues</h2><p>If your connection has been working correctly and suddenly stops, use the following <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-site-to-site-cannot-connect">checklist</a>:</p>
<ul>
<li><p>Check that the on-premises device is validated and configured correctly.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-gateway-overview-screen.png" alt="Screenshot showing the Gateway overview screen."></p>
</li>
<li><p>Check that the shared keys on each connection match.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-shared-key.png" alt="Screenshot of shared key option and shared key field."></p>
</li>
<li><p>Does the Local Network Gateway IP definition in Azure match the on-premises device IP?</p>
</li>
<li><p>Check and remove any user-defined routing (UDR) or network security groups (NSGs) and test the result.</p>
</li>
<li><p>If you are getting sporadic disconnections, ensure that the VPN internet-facing IP address is not included in the Local Network definition in Azure.</p>
</li>
<li><p>Check that the virtual network subnet address space(s) match on the Azure virtual network and the on-premises network?</p>
</li>
<li><p>Check the health probe by browsing to: <strong>https:&#x2F;&#x2F;<YourVirtualNetworkGatewayIP>:8081&#x2F;healthprobe</YourVirtualNetworkGatewayIP></strong>. If you don’t receive a response, then the gateway is probably unhealthy.</p>
</li>
<li><p>If you experience sporadic disconnection problems and have perfect forward secrecy enabled on your device, disable the feature and update the VPN gateway IPsec policy.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-resource-health.png" alt="Screenshot showing the Resource health area"></p>
</li>
<li><p>Check the resource health.</p>
</li>
<li><p>Use troubleshooting tools within Azure.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-diagnose-solve-problems.png" alt="Screenshot of the diagnose and solve problems feature."></p>
</li>
</ul>
<h2 id="Identify-the-root-cause-for-latency-issues-within-site-to-site-VPNs"><a href="#Identify-the-root-cause-for-latency-issues-within-site-to-site-VPNs" class="headerlink" title="Identify the root cause for latency issues within site-to-site VPNs"></a>Identify the root cause for latency issues within site-to-site VPNs</h2><p>Tunnel ingress and egress metrics can be monitored within the Azure portal using Azure Monitor. Cumulative delays exceeding 100ms can be viewed by running tracert on a client machine.</p>
<h3 id="Tunnel-ingress-and-egress-metrics"><a href="#Tunnel-ingress-and-egress-metrics" class="headerlink" title="Tunnel ingress and egress metrics"></a>Tunnel ingress and egress metrics</h3><p>Follow the steps below to access the metrics within Azure:</p>
<ul>
<li><p>Go to the virtual network gateway.</p>
</li>
<li><p>Select <strong>Overview</strong> to view tunnel ingress and egress metrics.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-azure-metrics.png" alt="Screenshot of the Azure metrics screen"></p>
</li>
<li><p>Click <strong>Metric</strong> on the side panel to view additional metrics as required.</p>
</li>
</ul>
<h3 id="Monitor-cumulative-delays"><a href="#Monitor-cumulative-delays" class="headerlink" title="Monitor cumulative delays"></a>Monitor cumulative delays</h3><p>The tracert command checks for cumulative delays exceeding 100 ms:</p>
<ul>
<li>Open a command window on a client machine in the on-premises network.</li>
<li>Type <strong>tracert <VIP for the azure gateway></VIP></strong>.</li>
<li>When the result shows * you have hit the Azure edge.</li>
<li>When the DNS name includes msn you’ve hit the Microsoft backbone.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/3-tracert.png" alt="Screenshot of the tracert screen."></p>
<h1 id="Troubleshoot-point-to-site-VPN-gateways"><a href="#Troubleshoot-point-to-site-VPN-gateways" class="headerlink" title="Troubleshoot point-to-site VPN gateways"></a>Troubleshoot point-to-site VPN gateways</h1><p>Completed100 XP</p>
<ul>
<li>10 minutes</li>
</ul>
<h2 id="What-are-point-to-site-VPN-gateways"><a href="#What-are-point-to-site-VPN-gateways" class="headerlink" title="What are point-to-site VPN gateways?"></a>What are point-to-site VPN gateways?</h2><p>If you’ve individuals working remotely, then a point-to-site connection is a secure way of allowing them to connect to Azure resources using Windows, Linux or macOS.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-point-to-site.png" alt="A diagram showing a sample point-to-site connection."></p>
<p>The key steps to deploy a point-to-site VPN gateway are:</p>
<ul>
<li>Create the virtual network that will connect to the on-premises network.</li>
<li>Create a gateway subnet on your virtual network.</li>
<li>Create a VPN gateway.</li>
<li>Generate a root certificate.</li>
<li>Generate client certificates.</li>
<li>Add VPN to a client address pool.</li>
<li>Specify the tunnel type and authentication type.</li>
<li>Upload the root certificate public key information.</li>
<li>Install the exported client certificate.</li>
<li>Configure settings for VPN clients.</li>
<li>Connect to Azure.</li>
</ul>
<p>This unit will help to troubleshoot the steps outlined above. It will outline the key problems with the various ways of connecting point-to-site VPNs:</p>
<ul>
<li>Certificate-based VPNs</li>
<li>RADIUS authentication</li>
<li>Azure AD authentication</li>
<li>OpenVPN connectivity</li>
</ul>
<h2 id="Describe-supported-protocols-for-point-to-site-VPNS"><a href="#Describe-supported-protocols-for-point-to-site-VPNS" class="headerlink" title="Describe supported protocols for point-to-site VPNS"></a>Describe supported protocols for point-to-site VPNS</h2><p>Point-to-site VPNs support three protocols:</p>
<ul>
<li>OpenVPN® is an SSL&#x2F;TLS based VPN protocol and can be used to connect from Android, iOS (version11.0 and above), Windows, Linux, and Mac devices (macOS versions10.13 and above).</li>
<li>Secure Socket Tunneling Protocol (SSTP) is a proprietary TLS-based VPN protocol that’s only supported on Windows devices.</li>
<li>IKEv2 VPN is a standards-based IPsec VPN solution used to connect from Mac devices (macOS 10.11 and above).</li>
</ul>
<h2 id="What-tools-can-be-used-to-troubleshoot-point-to-site-VPN-gateways"><a href="#What-tools-can-be-used-to-troubleshoot-point-to-site-VPN-gateways" class="headerlink" title="What tools can be used to troubleshoot point-to-site VPN gateways?"></a>What tools can be used to troubleshoot point-to-site VPN gateways?</h2><p>Troubleshooting a point-to-site VPN can be difficult, but there are tools available that can help to highlight areas before they become a problem.</p>
<p>Microsoft Sentinel helps to prevent cyber-attacks. It detects threats and uses Artificial Intelligence (AI) to investigate and respond. It keeps you informed by creating incidents that you can investigate and resolve.</p>
<h3 id="Azure-Activity-Log-events"><a href="#Azure-Activity-Log-events" class="headerlink" title="Azure Activity Log events"></a>Azure Activity Log events</h3><p>The activity log is accessible from most menus within the Azure portal and will display different information depending on what part of the network you’ve selected. If you select a virtual network gateway, you’ll see activity logs about that gateway. Activity logs can be downloaded as csv files for further analysis.</p>
<h3 id="Azure-Monitor"><a href="#Azure-Monitor" class="headerlink" title="Azure Monitor"></a>Azure Monitor</h3><p>Azure Monitor also identifies issues before they become a problem. It monitors and diagnoses networking issues without having to log into your virtual machine. Azure Monitor enables you to:</p>
<ul>
<li>Trigger package capture.</li>
<li>Diagnose routing issues.</li>
<li>Analyze network security group flow logs.</li>
<li>Gain visibility and control over your Azure network.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-azure-monitor.jpg" alt="A diagram showing an overview of Azure Monitor features."></p>
<h2 id="Network-Watcher"><a href="#Network-Watcher" class="headerlink" title="Network Watcher"></a>Network Watcher</h2><p>Network Watcher is an area where a range of monitoring and diagnostic tools are available.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-network-watcher.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-network-watcher.png" alt="Screenshot of Network watcher troubleshooting area."></a></p>
<h2 id="Troubleshoot-issues-with-certificate-based-connections"><a href="#Troubleshoot-issues-with-certificate-based-connections" class="headerlink" title="Troubleshoot issues with certificate-based connections"></a>Troubleshoot issues with certificate-based connections</h2><p>This section looks at key areas to troubleshoot when you create a certificate-based VPN connection.</p>
<h3 id="Create-a-VNet"><a href="#Create-a-VNet" class="headerlink" title="Create a VNet"></a>Create a VNet</h3><p>If you amended the address range from the default, did you manually add the subnet? The subnet range is auto populated from the default address space. If you then amend the default address space, you must manually change the subnet.</p>
<h3 id="Gateway-issues"><a href="#Gateway-issues" class="headerlink" title="Gateway issues"></a>Gateway issues</h3><p>Typical gateway-related error messages or problems are:</p>
<ul>
<li>File download error: Target URI isn’t specified.</li>
<li>The connection is established, but you can’t connect to Azure resources.</li>
</ul>
<p>Typical troubleshooting solutions are:</p>
<ul>
<li>Check your VNet address range as you might not have enough IP addresses in the range you created in the virtual network.</li>
<li>Have you specified the correct VPN type? Most configurations use a gateway type of VPN and a VPN that’s route-based rather than policy-based.</li>
<li>Does the selected SKU support the features you need to use? For instance, if you’ve Mac clients connecting to your network, you can’t have a basic SKU. Is the SKU large enough for the bandwidth and CPU required?</li>
<li>Have you selected the correct virtual network? If you can’t see the network, check that you’ve entered the correct subscription and region.</li>
<li>Have you reset the gateway?</li>
</ul>
<h3 id="Certificates"><a href="#Certificates" class="headerlink" title="Certificates"></a>Certificates</h3><p>Typical errors likely to be certificate-based are:</p>
<ul>
<li>A certificate that can be used with this Extensible Authentication Protocol couldn’t be found. (Error 798.)</li>
<li>A certificate chain processed but terminated in a root certificate that isn’t trusted by the trust provider.</li>
<li>Failed to save virtual network gateway <gateway name>. Data for certificate <certificate id> is invalid.</certificate></gateway></li>
<li>The message received was unexpected or badly formatted. (Error 0x80090326.)</li>
<li>Can’t install the VPN client.</li>
<li>Point-to-site clients are suddenly unable to connect.</li>
</ul>
<p>For any errors relating to certificates, it’s worth checking the following:</p>
<ul>
<li>Have you obtained the trusted.cer file for the root certificate?</li>
<li>Have you exported the public certificate data (not the public keys) as a Base4 encoded X.509.cer file?</li>
<li>Check the status of the root certificate in the Azure portal to see if it has been revoked. If it’s OK, delete and reinstall the certificate.</li>
<li>Have you removed any carriage returns from the text file as the file must be one continuous line?</li>
<li>Have you only copied the information between Begin Certificate and End Certificate?</li>
<li>Have you installed the certificate on each client computer?</li>
<li>Has the certificate rolled over? if so, download and deploy the point-to-site package on all clients again.</li>
</ul>
<h3 id="VPN-client-configuration"><a href="#VPN-client-configuration" class="headerlink" title="VPN client configuration"></a>VPN client configuration</h3><p>Typical client-side messages or problems are:</p>
<ul>
<li>Custom script (to update your routing table) failed. (Error 8007026f.)</li>
<li>Failed to download the file. Error details: error 503. The server is busy.</li>
<li>VPN clients can’t access network file shares.</li>
<li>VPN Client Error: The remote connection wasn’t made because the attempted VPN tunnels failed. (Error 800.)</li>
</ul>
<p>Some key areas to investigate are:</p>
<ul>
<li><p>The connection might be a temporary network problem, so try downloading the VPN package again after a short time.</p>
</li>
<li><p>Did you export the client certificate as a .pfx file?</p>
</li>
<li><p>Delete any shortcuts and open the VPN package directly.</p>
</li>
<li><p>Check the certificate is installed by opening Manage user certificates and selecting Trusted Root Certification Authorities\Certificates. Ensure that the correct certificate is listed.</p>
</li>
<li><p>Update Network Interface drivers.</p>
</li>
<li><p>Disable the caching of domain credentials from the following key.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-disable-domain.png" alt="Screenshot of code to disable caching of domain credentials."></p>
</li>
<li><p>Check the VPN is active by opening an elevated command prompt and running:</p>
</li>
</ul>
<p>Command prompt</p>
<p>ipconfig&#x2F;all.</p>
<p>The results should have an IP address contained within the Client Address Pool as specified in your configuration.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-ip-configure.png" alt="Screenshot showing typical results from running ipconfig/all."></p>
<h3 id="Connection-problems"><a href="#Connection-problems" class="headerlink" title="Connection problems"></a>Connection problems</h3><p>Common error messages are:</p>
<ul>
<li>The network connection between your computer and the VPN server couldn’t be established because the remote server isn’t responding.</li>
<li>The message received was unexpected or badly formatted. (Error 0x80090326.)</li>
<li>Custom script (to update your routing table) failed. (Error 8007026f.)</li>
</ul>
<p>Typical solutions are:</p>
<ul>
<li>Are you using the correct protocol? Windows only supports IKEv2 if updates are installed, and a registry key locally set.</li>
<li>Check the user-defined routes (UDR) are set up properly.</li>
</ul>
<h2 id="Troubleshoot-issues-with-RADIUS-authentication"><a href="#Troubleshoot-issues-with-RADIUS-authentication" class="headerlink" title="Troubleshoot issues with RADIUS authentication"></a>Troubleshoot issues with RADIUS authentication</h2><p>A RADIUS server integrates with the Active Directory (AD) Server to allow users to sign in using their organization domain credentials. For point-to-site connections using <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-how-to-radius-ps">RADIUS authentication</a> you require the following:</p>
<ul>
<li>A route-based VPN gateway.</li>
<li>A RADIUS server, either deployed on the Azure VNet or on-premises, or two servers for high availability.</li>
<li>A VPN client configuration package for the Windows devices that will connect to the VNet.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-radius-setup.png" alt="A diagram showing the integration of a RADIUS server."></p>
<p>Although many of the principles are like site-to-site, there are some important differences:</p>
<h3 id="Virtual-network"><a href="#Virtual-network" class="headerlink" title="Virtual network"></a>Virtual network</h3><ul>
<li>Have you set up three subnet configurations? Some setups use names such as FrontEnd, BackEnd and GatewaySubnet. You can change the names of FrontEnd and BackEnd, but you must not alter GatewaySubnet.</li>
<li>Have you requested a dynamically assigned Public IP address for the VPN gateway?</li>
</ul>
<h3 id="RADIUS-server"><a href="#RADIUS-server" class="headerlink" title="RADIUS server"></a>RADIUS server</h3><ul>
<li>Have you checked the settings on the RADIUS server before creating and configuring the virtual network gateway? Common problems are incorrect settings on the RADIUS server.</li>
<li>Have you configured the VPN gateway as a RADIUS client on the RADIUS and specified the virtual network GatewaySubnet?</li>
<li>Have you obtained the RADIUS server’s IP address and the shared secret that RADIUS clients should use to talk to the server?</li>
<li>VPN</li>
</ul>
<h3 id="VPN-gateway"><a href="#VPN-gateway" class="headerlink" title="VPN gateway"></a>VPN gateway</h3><ul>
<li>Have you set up the gateway as VPN and the VPN type as RouteBased?</li>
<li>Have you set up a <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-vpn-client-configuration-radius">client configuration package</a>?</li>
</ul>
<h3 id="RADIUS-Server-and-client-address-pool-information"><a href="#RADIUS-Server-and-client-address-pool-information" class="headerlink" title="RADIUS Server and client address pool information"></a>RADIUS Server and client address pool information</h3><ul>
<li>Have you entered the Radius secret correctly?</li>
<li>Check you’ve run the <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-how-to-radius-ps">correct configuration</a> for the connection you require.</li>
<li>SSTP</li>
<li>OpenVPN</li>
<li>IKEv2</li>
<li>SSTP and IKEv2</li>
</ul>
<h2 id="Troubleshoot-Azure-AD-authentication-issues"><a href="#Troubleshoot-Azure-AD-authentication-issues" class="headerlink" title="Troubleshoot Azure AD authentication issues"></a>Troubleshoot Azure AD authentication issues</h2><p>When using Azure AD for authentication, you must use the OpenVPN protocol. You can’t use a Basic SKU.</p>
<p>To set up an Azure authentication you need two user accounts: a Global Admin account for setting up the gateway and a User account for everyday servicing.</p>
<p>The following checklist can help you troubleshoot VPN connections using point-to-site and Azure Active Directory authentication:</p>
<ol>
<li><p>Have you opened the Azure VPN client screen and viewed the status log for any error messages?</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-azure-status-screen.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-azure-status-screen.png" alt="Screenshot of A Z status log screen."></a></p>
</li>
</ol>
<ul>
<li><p>Have you cleared the signed-in information and tried to connect?</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-azure-sign-in-screen.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-azure-sign-in-screen.png" alt="Screenshot of sign-in screen."></a></p>
</li>
<li><p>Have you run diagnostics on the connection?</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-azure-diagnostic-page.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-azure-diagnostic-page.png" alt="Screenshot of Azure A D diagnostic page."></a></p>
</li>
<li><p>Have you viewed the client log files?</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-azure-log-directory.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-azure-log-directory.png" alt="Screenshot of Log Directory area within Azure AD."></a></p>
</li>
</ul>
<h2 id="Troubleshoot-OpenVPN-connectivity-issues"><a href="#Troubleshoot-OpenVPN-connectivity-issues" class="headerlink" title="Troubleshoot OpenVPN connectivity issues"></a>Troubleshoot OpenVPN connectivity issues</h2><p>If the Open VPN tunnel is failing to connect to an OpenVPN Access Server, the following pointers will help:</p>
<ul>
<li>Have you checked the OpenVPN Access Server log files? If you’ve trouble starting the server, stop it, remove the logs, then start and stop the log immediately to remove unnecessary information. The following commands should be used to obtain the log file:</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-open-vpn-commands.png" alt="Open V P N commands to obtain log files."></p>
<p>Check the client log files:</p>
<ul>
<li>For Windows use - C:\Program Files (x86)\OpenVPN Technologies\OpenVPN Client\etc\log\openvpn_(unique_name).log.</li>
<li>For Mac use - &#x2F;Library&#x2F;Application Support&#x2F;OpenVPN&#x2F;log&#x2F;openvpn_(unique_name).log.</li>
<li>Have you opened the required three ports: TCP 443, TCP 943, and UDP 1194?</li>
</ul>
<p>If the OpenVPN tunnel is established, but you can’t reach a specific endpoint, these tools might help you to visualize the traffic, to test which path it follows:</p>
<ul>
<li>TCPdump ‒ a Linux command-line tool that can visualize network packets.</li>
<li>WireShark ‒ a Windows GUI tool to visualize network packets.</li>
<li>Ping ‒ a testing tool to determine if a message can be sent back and forth between a source and destination.</li>
<li>Traceroute ‒ displays every hop between a source and destination address.</li>
</ul>
<h2 id="Use-alerts-to-troubleshoot"><a href="#Use-alerts-to-troubleshoot" class="headerlink" title="Use alerts to troubleshoot"></a>Use alerts to troubleshoot</h2><p>Alerts can be set up in the Azure portal or PowerShell to monitor VPN gateway metrics and tunnel resource logs, to quickly detect issues.</p>
<p><strong>To view the metrics and create alerts</strong></p>
<p>Go to the virtual gateway resource within the Azure portal. Select <strong>Overview</strong> to see the total tunnel ingress and egress metrics. Other metrics for <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/monitor-vpn-gateway">monitoring VPN gateways</a> can be viewed by clicking the Metrics sections and selecting the required metric from the dropdown list. Alerts can be created for any metric by selecting <strong>Alerts</strong> from the <strong>Monitoring</strong> tab. For a resource alert, you select <strong>Create</strong> from the <strong>Log Analytics</strong> page.</p>
<h2 id="Troubleshoot-macOS-point-to-site-issues"><a href="#Troubleshoot-macOS-point-to-site-issues" class="headerlink" title="Troubleshoot macOS point-to-site issues"></a>Troubleshoot macOS point-to-site issues</h2><p>Are you using the correct version? Point-to-site only uses OS version 10.11 or higher.</p>
<ol>
<li><p>Go to Network Settings, then press Command + Shift, type VPN, and check the following:</p>
<ul>
<li>Server Address – have you entered the server address as a complete Fully Qualified Domain Name (FQDN)?</li>
<li>Remote ID ‒ is the remote ID the same as the Server Address (Gateway FQDN)?</li>
<li>Local ID – is the local ID the same as the subject of the client certificate?</li>
</ul>
<p>![<a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-mac-os-settings.jpg">Screenshot of macOS X setting screen.</a></p>
</li>
<li><p>Select <strong>Authentication Settings</strong> – select <strong>Certificate</strong> from the dropdown list then check you’ve the correct certificate.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-mac-os-certificate-authentication.png" alt="Screenshot of macOS X authentication certificate screen."></p>
</li>
<li><p>Still In <strong>Authentication Settings</strong>, change the dropdown to show <strong>Username</strong> and check the credentials are correct.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/4-mac-os-username-authentication.png" alt="Screenshot of macOS X authentication username screen."></p>
</li>
<li><p>If you still experience problems, download Wireshark and run a packet capture.</p>
<ol>
<li>Filter on <strong>isakmp</strong>, check the <strong>SA proposal</strong> under <strong>Payload: Security Association</strong>, and then check that the source and corresponding destination IP addresses match.</li>
</ol>
</li>
</ol>
<h2 id="Troubleshoot-client-configuration-issues"><a href="#Troubleshoot-client-configuration-issues" class="headerlink" title="Troubleshoot client configuration issues"></a>Troubleshoot client configuration issues</h2><p>Gateway issues</p>
<p>Examples of possible gateway issues related to certificate are:</p>
<ul>
<li>Have you uploaded an Azureclient.pfx certificate without enabling strong private key protection?</li>
<li>Have you uploaded the AzureRoot.cer certificate?</li>
<li>Have you checked to see if the certificate has been revoked? This happens if the certificate becomes corrupted.</li>
<li>Can some people connect whilst others can’t? You might need to install another certificate to trust the affected gateway.</li>
<li>Are you unable to save the certificate? Check whether there are any spaces in the name or if it starts with a number.</li>
</ul>
<p>Routing</p>
<ul>
<li>Are you using non BGP Transit Routing? It isn’t supported as BGP is the recommended model.</li>
<li>Are you running multiple VNets and connecting using an S2S VPN, but some clients can’t access particular VNets? You need to use BGP for clients to access the additional VNets.</li>
<li>If you make changes to the topology of the network, you need to download the VPN client package for Windows again for the changes to be applied.</li>
</ul>
<p>Split tunneling</p>
<p>Split tunneling can help to reduce high loads and is recommended when you’ve many remote users or cloud-based services. Different models can be adopted depending on the volume of remote users and&#x2F;or the number of cloud-based services you’ve.</p>
<p>you’ve five options to improve the efficiency of your network:</p>
<ul>
<li>VPN Forced Tunnel ‒ 100 percent of traffic goes into VPN tunnel, including on-premises, internet, and all O365&#x2F;M365. Where many employees work remotely, this can hinder performance of corporate traffic as a high load is being put onto the infrastructure.</li>
<li>VPN Forced Tunnel with exceptions ‒ the VPN tunnel is used by default, and a few scenarios are allowed to go direct to the Microsoft 365 service. This ensures the traffic that requires the tunnel has a lower contention for resources.</li>
<li>VPN Forced Tunnel with broad exceptions – the VPN tunnel is used by default with broad exceptions that are allowed to go direct, such as all Microsoft 365, All Salesforce, and All Zoom. This further reduces the load on the corporate VPN infrastructure.</li>
<li>VPN Selective Tunnel ‒ traffic with a corporate IP address is sent through the VPN tunnel and the internet path is used for all other services. If your services are largely stored in the cloud, then this option is the main model to work towards, although your corporation does need to adopt the Zero Trust model.</li>
<li>No VPN ‒ uses modern security approaches like Zscaler ZPA, and Azure Active Directory (Azure AD) Proxy&#x2F;MCAS instead of a VPN.</li>
</ul>
<h1 id="Exercise-Troubleshoot-site-to-site-VPN-gateway-connectivity"><a href="#Exercise-Troubleshoot-site-to-site-VPN-gateway-connectivity" class="headerlink" title="Exercise: Troubleshoot site-to-site VPN gateway connectivity"></a>Exercise: Troubleshoot site-to-site VPN gateway connectivity</h1><p>Completed100 XP</p>
<ul>
<li>9 minutes</li>
</ul>
<p> Important</p>
<p>You need your own <a href="https://azure.microsoft.com/free/">Azure subscription</a> to complete the exercises in this module. If you don’t have an Azure subscription, you can still view the demonstration video at the bottom of this page.</p>
<p>As your organization’s support engineer, you’ve been asked to help fix an issue between your resources in the US and northern Europe. you’ve existing infrastructure of virtual networks in two different regions. The VMs in the US virtual network (VNet1) are unable to get a ping response from the VMs in northern Europe (VNet2).</p>
<p>Checking the topology, you can see that there are VPN gateways and connections.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-network-diagram.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-network-diagram.png" alt="Diagram of the topology of the network that needs troubleshooting."></a></p>
<p>In this exercise, you’ll troubleshoot and resolve the connectivity issue.</p>
<p> Important</p>
<p>You need your own <a href="https://azure.microsoft.com/free/">Azure subscription</a> to complete the exercises in this module. If you don’t have an Azure subscription, you can still read along.</p>
<h2 id="Test-the-connection"><a href="#Test-the-connection" class="headerlink" title="Test the connection"></a>Test the connection</h2><ol>
<li><p>We’re going to test the connection between the two VMs, by sending a ping request between them.</p>
</li>
<li><p>Open the <a href="https://portal.azure.com/learn.docs.microsoft.com">Azure portal</a> in a new tab.</p>
</li>
<li><p>In the search bar, type <strong>virtual machines</strong> then, under Services, select <strong>Virtual machines</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-virtual-machines.png" alt="Screenshot showing the search bar and the results of searching for virtual machines."></p>
</li>
<li><p>From the list of VMs, select <strong>virtualMachine1</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-two-virtual-machines.png" alt="Screenshot showing the two virtual machines."></p>
</li>
<li><p>Make a note of the <strong>Public IP address</strong> and <strong>Private IP address</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-network-ip-address-lightbox.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-network-ip-address.png" alt="Screenshot of V M 1 showing networking the private and public IP addresses."></a></p>
</li>
<li><p>Repeat the last two steps for <strong>virtualMachine2</strong> and note the Public IP address and Private IP address.</p>
</li>
<li><p>On the right, in the Cloud Shell, connect to virtualMachine1 with SSH to the public IP address:</p>
<p>Azure CLICopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh azureuser@&lt;virtualMachine1 public IP address&gt;;</span><br></pre></td></tr></table></figure>

<p> Note</p>
<p>Replace <virtualMachine1 public ip address> with the public IP address you noted for virtualMachine1.</virtualMachine1></p>
</li>
<li><p>At the prompt, <code>Are you sure you want to continue connecting (yes/no)?</code> type yes.</p>
</li>
<li><p>Your prompt should change to <code>azureuser@virtualMachine1:~$</code>.</p>
</li>
<li><p>This means you’ve successfully connected to virtualMachine1.</p>
</li>
<li><p>Ping the private IP address of virtualMachine2.</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ping &lt;private IP address virtualMachine2&gt;</span><br></pre></td></tr></table></figure>

<p> Note</p>
<p>Replace <private ip address> virtualMachine2 with the private IP address you noted for virtualMachine2.</private></p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-ping-request.png" alt="Screenshot showing the ping command to check whether machines can connect."></p>
</li>
<li><p>We can confirm that the two machines can’t connect, as there is no response from virtualMachine2.</p>
</li>
<li><p>Press <strong>CTRL</strong> + <strong>C</strong> keys to quit the ping command.</p>
</li>
</ol>
<h2 id="Troubleshoot-the-gateways"><a href="#Troubleshoot-the-gateways" class="headerlink" title="Troubleshoot the gateways"></a>Troubleshoot the gateways</h2><p>You’ll check the types are correct for both gateways.</p>
<ol>
<li><p>Go to the Azure portal.</p>
</li>
<li><p>In the search bar, type <strong>virtual network gateways</strong>, and then select the service to continue.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-virtual-network-gateways.png" alt="Screenshot showing the virtual gateway service."></p>
</li>
<li><p>Select <strong>VNet1GW</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-virtual-network-gateways-result.png" alt="Screenshot of the virtual gateways."></p>
</li>
<li><p>Confirm that the VPN type is route-based, and the gateway type is VPN.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-vpn-route-based-lightbox.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-vpn-route-based.png" alt="Screenshot showing the Gateway and V P N Type."></a></p>
</li>
<li><p>Scroll down the page to check the tunnel Ingress and Egress. Can you see a time when something might have happened to cause a problem?</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-tunnel-ingress.png" alt="Screenshot of the Tunnel ingress and Egress stats."></p>
</li>
<li><p>Repeat for VNet2GW.</p>
</li>
</ol>
<h2 id="Troubleshoot-the-virtual-networks"><a href="#Troubleshoot-the-virtual-networks" class="headerlink" title="Troubleshoot the virtual networks"></a>Troubleshoot the virtual networks</h2><p>You’ll now check the address spaces don’t overlap for the two virtual networks.</p>
<ol>
<li><p>In the search bar, type <strong>virtual networks</strong>, and then select the <strong>Virtual network</strong> service.</p>
</li>
<li><p>Select <strong>VNet1</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-virtual-networks.png" alt="Screenshot showing the virtual networks."></p>
</li>
<li><p>Make a note of the <strong>Address space</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-address-space.png" alt="Screenshot showing the address spacer."></p>
</li>
<li><p>Select <strong>VNet2</strong>, and check that the address spaces do not overlap.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-dns-server.png" alt="Screenshot showing the address space of V Net 2"></p>
</li>
<li><p>The two address spaces are different, so we can rule out any problems with them.</p>
</li>
<li><p>You’ll now check the subnets are correctly set up.</p>
</li>
<li><p>Select <strong>VNet1</strong>, then select <strong>Subnets</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-subnets.png" alt="Screenshot showing the subnet menu."></p>
</li>
<li><p>Check the <strong>subnet address</strong> is a subset of the <strong>address space</strong>.</p>
</li>
<li><p>Repeat for <strong>VNet2</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-gateway-subnet.png" alt="Screenshot showing the Gateway subnet address."></p>
</li>
<li><p>The <strong>GatewaySubnet</strong> addresses have been correctly created and correspond with the default range.</p>
</li>
</ol>
<h2 id="Check-the-gateway-connections"><a href="#Check-the-gateway-connections" class="headerlink" title="Check the gateway connections"></a>Check the gateway connections</h2><ol>
<li><p>In the search bar, type virtual network gateway and then select <strong>virtual network gateways</strong>.</p>
</li>
<li><p>The two gateways will be displayed.</p>
</li>
<li><p>Select <strong>VNet1GW</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-gateway-connections.png" alt="Screenshot of the V Net 1 gateway."></p>
</li>
<li><p>Select <strong>Connections</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-virtual-network-gateway-connection.png" alt="Screenshot of the Connections option."></p>
</li>
<li><p>The issue seems to be with the connections between the gateways.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-virtual-network-to-virtual-network.png" alt="Screenshot showing the two virtual networks not connected."></p>
</li>
<li><p>Select <strong>Refresh</strong> to check that there is still an issue with connection.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-virtual-network-to-virtual-network-connection.png" alt="Screenshot of the refresh button."></p>
</li>
<li><p>A connection still can’t be made, so you’ll check the shared keys.</p>
</li>
<li><p>Select <strong>VNet1-VNet2</strong>.</p>
</li>
<li><p>Select <strong>Shared key</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-shared-key.png" alt="Screenshot showing the Shared Key option."></p>
</li>
<li><p>Make a note of the <strong>Shared key</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-correct-shared-key.png" alt="Screenshot of the shared key."></p>
</li>
<li><p>On the breadcrumb trail, select <strong>VNet1GW</strong>, then select <strong>VNet2-VNet1</strong>.</p>
</li>
<li><p>Select <strong>Shared key</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/5-incorrect-key.png" alt="Screenshot of the second shared key showing it&#39;s different to the first shared key."></p>
</li>
<li><p>The shared keys are not the same. For the connections to work, the shared key must be identical.</p>
</li>
<li><p>Now that you’ve found the issue, you’ll resolve it in the next exercise.</p>
</li>
</ol>
<p>In this demonstration you will see how to proactively troubleshoot Conditional Access policies using the What if tool in the Azure portal:</p>
<iframe src="https://www.microsoft.com/en-us/videoplayer/embed/RE4Ubff?postJsllMsg=true" frameborder="0" allowfullscreen="true" data-linktype="external" title="Video Player" style="box-sizing: inherit; outline-color: inherit; margin: 0px; padding: 0px; border: 0px; width: 640px; height: 360px; position: absolute; inset: 0px;"></iframe>





















<h1 id="Exercise-Resolve-site-to-site-VPN-gateway-connection"><a href="#Exercise-Resolve-site-to-site-VPN-gateway-connection" class="headerlink" title="Exercise: Resolve site-to-site VPN gateway connection"></a>Exercise: Resolve site-to-site VPN gateway connection</h1><p>Completed100 XP</p>
<ul>
<li>9 minutes</li>
</ul>
<p> Important</p>
<p>You need your own <a href="https://azure.microsoft.com/free/">Azure subscription</a> to complete the exercises in this module. If you don’t have an Azure subscription, you can still view the demonstration video in the preceding unit.</p>
<p>You’ve explored the possible reasons why your two machines can’t connect to each other. You found that the shared key for the two connections is different.</p>
<p>In this exercise, you’ll see how to change the shared key on a VPN gateway connection, and then test that this has resolved the issue. If you have not already run the script in unit 2, please do so now so you can follow the exercise below.</p>
<h2 id="Change-a-gateway-connection’s-shared-key"><a href="#Change-a-gateway-connection’s-shared-key" class="headerlink" title="Change a gateway connection’s shared key"></a>Change a gateway connection’s shared key</h2><p>Follow these steps to check the shared key for both the VPN gateways connections:</p>
<ol>
<li><p>In the Azure portal, search for <strong>virtual network gateways</strong>, then under <strong>Services</strong>, select <strong>Virtual network gateways</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/6-search-gateways.png" alt="Screenshot showing virtual gateway search."></p>
</li>
<li><p>Select the first VPN gateway, <strong>Vnet1GW</strong>.</p>
</li>
<li><p>Under Settings, select <strong>Connections</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/6-gateway-connections.png" alt="Screenshot showing all v net to v net connections."></p>
</li>
<li><p>Select the first connection, <strong>VNet1-VNet2</strong>.</p>
</li>
<li><p>Under Settings, select <strong>Shared key</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/6-copy-shared-key.png" alt="Screenshot showing the first shared key."></p>
</li>
<li><p>Copy the text in the <strong>Shared key (PSK)</strong>.</p>
</li>
<li><p>In the breadcrumb, select <strong>VNet1GW</strong> to return the VPN gateway pane.</p>
</li>
<li><p>Select the second connection, <strong>VNet2-VNet1</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/6-gateway-second-connection.png" alt="Screenshot showing the second vnet to vnet connection."></p>
</li>
<li><p>Under Settings, select <strong>Shared key</strong>.</p>
</li>
<li><p>Paste the value you copied into the <strong>Shared key (PSK)</strong>. This is to make sure that the values match.</p>
</li>
</ol>
<h2 id="Test-the-issue-is-resolved"><a href="#Test-the-issue-is-resolved" class="headerlink" title="Test the issue is resolved"></a>Test the issue is resolved</h2><p>Repeat the steps you did in the previous exercise to see if the two VMs can connect to each other. Using the Cloud Shell on the right and the Azure portal, follow these steps:</p>
<ol>
<li><p>Open the Azure portal in a new tab.</p>
</li>
<li><p>Search for <strong>virtual machines</strong> then, under Services, select <strong>Virtual machines</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/6-search-virtual-machines.png" alt="Screenshot showing search screen for virtual machines."></p>
</li>
<li><p>From the list of VMs, select <strong>VM1</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/6-virtual-machine-1-ip-addresses.png" alt="Screenshot showing the I P address of the first virtual machine."></p>
</li>
<li><p>Make a note of the Public IP address and Private IP address.</p>
</li>
<li><p>Repeat the last two steps for VM2 and note the Public IP address and Private IP address.</p>
</li>
<li><p>On the right, in the Cloud Shell, connect to VM1 with SSH to the public IP address:</p>
<p>Azure CLICopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh azureuser@&lt;VM1 public IP address&gt;</span><br></pre></td></tr></table></figure>

<p> Note</p>
<p>Replace <VM1 public ip address> with the public IP address you noted for VM1.</VM1></p>
</li>
<li><p>At the prompt, <code>Are you sure you want to continue connecting (yes/no)?</code> type yes.</p>
</li>
<li><p>At the prompt for a password, type azur3Pa55w.rd.</p>
</li>
<li><p>Your prompt should now be <code>azureuser@VM1:~$</code>.</p>
</li>
<li><p>This means you have successfully connected to VM1.</p>
</li>
<li><p>Ping the private IP address of VM2.</p>
<p>Copy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ping &lt;private IP address VM2&gt;</span><br></pre></td></tr></table></figure>

<p> Note</p>
<p>Replace <private ip address vm2> with the private IP address you noted for VM2.</private></p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-vpn-gateways/media/6-ping-virtual-machine-2.png" alt="Screenshot showing the ping command working."></p>
</li>
<li><p>If you have resolved the connection issue, you should see a response from VM2.</p>
</li>
</ol>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>Having completed this module, you now have a better understanding of how Log Analytics and alerts can help highlight issues before they become a problem. You know about the different gateways, and when to reset them. Also, you understand the tools available, and why some key issues can cause problems with certificate-based VPN connections.</p>
<p>Now you’ve completed this module, you should be able to:</p>
<ul>
<li>Explore Log Analytics to determine which logs can help to resolve key issues in your organization.</li>
<li>Understand the different gateways and SKUs.</li>
<li>Determine when it’s necessary to reset VPN Gateways.</li>
<li>Differentiate between error types to troubleshoot connections.</li>
<li>Outline the key issues with certificate-based VPN connections.</li>
</ul>
<h2 id="Learn-more"><a href="#Learn-more" class="headerlink" title="Learn more"></a>Learn more</h2><p>Use these resources to discover more about the topics covered.</p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/tutorial-site-to-site-portal">Tutorial - Connect an on-premises network and a virtual network: S2S VPN: Azure portal - Azure VPN Gateway | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/expressroute/expressroute-about-virtual-network-gateways">About ExpressRoute virtual network gateways - Azure | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpn-gateway-settings">Azure VPN Gateway configuration settings | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpngateways">Gateway SKUs by tunnel, connection, and throughput</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-bgp-overview">About BGP with VPN Gateway - Azure VPN Gateway | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-download-vpndevicescript">Download VPN device configuration scripts for S2S VPN connections - Azure VPN Gateway | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpn-devices">Editing a sample VPN device script</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/log-analytics-tutorial">Log Analytics tutorial - Azure Monitor | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/reset-gateway">Reset a VPN gateway or connection to reestablish IPsec tunnels - Azure VPN Gateway | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-site-to-site-cannot-connect">Troubleshoot an Azure site-to-site VPN connection that can’t connect - Azure VPN Gateway | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-how-to-radius-ps">Connect a computer to a virtual network using Point-to-Site and RADIUS authentication: PowerShell - Azure VPN Gateway | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/windows-server/networking/technologies/nps/nps-top">Configuring a RADIUS server</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-vpn-client-configuration-radius">Azure VPN Gateway: Create &amp; install VPN client config files - P2S RADIUS connections | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-how-to-radius-ps%235-add-the-radius-server-and-client-address-pool">RADIUS Server and client address pool</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/monitor-vpn-gateway">Monitoring Azure VPN Gateway | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-point-to-site-osx-ikev2">Troubleshoot Point-to-Site connections: macOS X clients - Azure VPN Gateway | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/troubleshoot-ad-vpn-client">Troubleshoot Point-to-Site VPN clients - Azure AD authentication - Azure VPN Gateway | Microsoft Docs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-vpn-point-to-site-connection-problems">Troubleshoot Azure point-to-site connection problems - Azure VPN Gateway | Microsoft Docs</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-720-Troubleshoot-authentication-and-access-control-issues-in-Microsoft-Azure-5</title>
    <url>/2022/11/14/AZ-720-Troubleshoot-authentication-and-access-control-issues-in-Microsoft-Azure-5/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>You work as an administrator looking after your company’s Azure Active Directory (Azure AD) authentication and access control. Because authentication and access control is crucial to the robust, secure, and effective functioning of both Azure-based and hybrid systems, you can react both proactively and reactively to any authentication and authorization issues.</p>
<p>Microsoft Azure has a sophisticated authentication and access control system to provide high security. Azure AD authentication includes self-service password reset, multifactor authentication, hybrid integration, and passwordless authentication.</p>
<p>In this module, you’ll learn how to troubleshoot a deployment of Azure AD that is based entirely in the cloud and a hybrid deployment of Azure AD that is part cloud-based and part on-premises. You’ll also learn how to troubleshoot authorization issues when using Microsoft Azure.</p>
<h2 id="Learning-objectives"><a href="#Learning-objectives" class="headerlink" title="Learning objectives"></a>Learning objectives</h2><p>After completing this module, you’ll be able to:</p>
<ul>
<li>Troubleshoot Azure AD authentication.</li>
<li>Troubleshoot hybrid authentication.</li>
<li>Troubleshoot authorization issues.</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Demonstrate an understanding of the OSI model</li>
<li>Demonstrate an understanding of PowerShell</li>
<li>Demonstrate an understanding of Azure CLI</li>
</ul>
<h1 id="Troubleshoot-Azure-AD-authentication"><a href="#Troubleshoot-Azure-AD-authentication" class="headerlink" title="Troubleshoot Azure AD authentication"></a>Troubleshoot Azure AD authentication</h1><p>Completed100 XP</p>
<ul>
<li>7 minutes</li>
</ul>
<p>Before troubleshooting Azure AD authentication, you should consider that there are four editions of Azure AD: Free, Office 365 Apps, Premium P1, and Premium P2. The free edition is included with other software products and packages including Azure, Intune, and Office 365. Office 365 Enterprise editions (E1, E3, E5, F1, and F3) include the Office 365 Apps edition, while the Premium editions are available as an additional product.</p>
<h2 id="The-difference-between-Azure-AD-editions"><a href="#The-difference-between-Azure-AD-editions" class="headerlink" title="The difference between Azure AD editions"></a>The difference between Azure AD editions</h2><p>The following table shows the high-level difference between Azure AD editions. For more information, see <a href="https://www.microsoft.com/security/business/identity-access-management/azure-ad-pricing">Azure Active Directory pricing</a>.</p>
<table>
<thead>
<tr>
<th align="left">Feature name</th>
<th align="left">Free</th>
<th align="left">Office 365</th>
<th align="left">Azure Active Directory Premium P1</th>
<th align="left">Azure Active Directory Premium P2</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Authentication, single sign-on and multifactor authentication (MFA)</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Included</td>
<td align="left">Included</td>
</tr>
<tr>
<td align="left">Applications access</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Included</td>
<td align="left">Included</td>
</tr>
<tr>
<td align="left">Authorization and conditional access</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Included</td>
</tr>
<tr>
<td align="left">Administration and hybrid identity</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Included</td>
<td align="left">Included</td>
</tr>
<tr>
<td align="left">End-user self-service</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Included</td>
</tr>
<tr>
<td align="left">Identity governance</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Included</td>
</tr>
<tr>
<td align="left">Event logging and reporting</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Partially included</td>
<td align="left">Included</td>
</tr>
<tr>
<td align="left">Frontline workers</td>
<td align="left">not included</td>
<td align="left">not included</td>
<td align="left">Included</td>
<td align="left">Included</td>
</tr>
</tbody></table>
<h2 id="Troubleshoot-self-service-password-reset-issues"><a href="#Troubleshoot-self-service-password-reset-issues" class="headerlink" title="Troubleshoot self-service password reset issues"></a>Troubleshoot self-service password reset issues</h2><p>Azure AD self-service password reset (SSPR) enables users to change or reset their password without the help of an administrator. If a user forgets the password or becomes locked out of their account, they can resolve the issue by following on-screen prompts.</p>
<p>When you enable SSPR, many prerequisites must be met:</p>
<ul>
<li>You must have a working Azure AD tenant.</li>
<li>You must be using an account with global administrator privileges.</li>
<li>You must enable SSPR. This is done in the Azure portal, in <strong>Azure Active Directory</strong>, in <strong>Password reset</strong>.</li>
<li>In the <strong>Password reset pages</strong>, you must select all the methods that you wish to be available to users. These are:<ul>
<li>Mobile app notification</li>
<li>Mobile app code</li>
<li>Email</li>
<li>Mobile phone</li>
</ul>
</li>
<li>If you want notifications when SSPR is used, in the <strong>Password reset</strong> pages on the <strong>Notifications</strong> page, you must choose whether to notify the user and if you should notify all admins.</li>
</ul>
<p>If you want to test SSPR for a specific user, you should open a browser window using InPrivate or Incognito mode and go to <a href="https://aka.ms/ssprsetup">https://aka.ms/ssprsetup</a>. Sign in as a locked-out user and you should be prompted to reset the password.</p>
<p>For more information on setting up and troubleshooting SSPR, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/authentication/concept-sspr-howitworks">How it works: Azure AD self-service password reset</a>.</p>
<h2 id="Troubleshoot-multifactor-authentication-issues"><a href="#Troubleshoot-multifactor-authentication-issues" class="headerlink" title="Troubleshoot multifactor authentication issues"></a>Troubleshoot multifactor authentication issues</h2><p>Multifactor authentication (MFA) improves security because it requires you to use an additional authentication method and a password.</p>
<p>There are several common issues that you should resolve when troubleshooting MFA:</p>
<ul>
<li>You don’t receive a voice call or text message with the verification code. If this occurs:<ul>
<li>Select <strong>Other verification options</strong> and then try again. If this succeeds, check that your phone numbers are correct in user settings.</li>
<li>If there are no other verification options, ask a global admin to check that your phone numbers are correct in user settings.</li>
<li>If you still can’t connect, ask a global admin to go to the <strong>Users</strong> page in Azure Active Directory, in the Azure portal. Disable <strong>Block sign in</strong> for the user if it’s enabled.</li>
</ul>
</li>
<li>You receive a “Sorry! We can’t process your request” error when you try to set up SSPR. If this happens, ensure that you complete the setup process in less than 10 minutes.</li>
<li>You lose your phone or your phone number has changed, preventing you from using MFA. If this occurs, you need to ask a cloud services admin to select <strong>Require selected users to provide contact methods again</strong> in <strong>Manage user settings</strong> on the multifactor authentication settings.</li>
<li>You receive a “We didn’t receive the expected response” error message. Ensure that you enter the correct code or select <strong>Verify</strong> in the mobile app.</li>
<li>You receive an “Account verification system is having trouble” error message. Ensure that you enter the correct verification code and, if using the call option, you must press the pound (#) key.</li>
</ul>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/troubleshoot/azure/active-directory/troubleshoot-azure-mfa-issue">Troubleshoot Azure Active Directory Multifactor Authentication issues</a>.</p>
<h2 id="Review-customer-access-level-to-enterprise-apps-in-Azure"><a href="#Review-customer-access-level-to-enterprise-apps-in-Azure" class="headerlink" title="Review customer access level to enterprise apps in Azure"></a>Review customer access level to enterprise apps in Azure</h2><p>Applications are registered in Azure AD and users can then be assigned to them.</p>
<h3 id="Registering-applications"><a href="#Registering-applications" class="headerlink" title="Registering applications"></a>Registering applications</h3><p>If you’re setting up a cloud application such as Office 365, the steps are straightforward. For detailed information on setting up each individual cloud app, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/saas-apps/tutorial-list">Tutorials for integrating SaaS applications with Azure Active Directory</a>.</p>
<p>If you’ve an application that you’ve developed in-house, you can register it when you add the application or register it in Enterprise Applications, in the <strong>Azure Active Directory Admin Center</strong>. For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/add-application-portal">Quickstart: Add an enterprise application</a>.</p>
<p>If you want to combine an on-premises application with Azure AD security, you should connect it using <a href="https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/application-proxy">Azure AD Application Proxy</a>.</p>
<h3 id="Managing-access-to-apps-in-Azure"><a href="#Managing-access-to-apps-in-Azure" class="headerlink" title="Managing access to apps in Azure"></a>Managing access to apps in Azure</h3><p>Apps can access user and organizational data if they’re given consent. You should control the user consent settings to ensure the correct level of access is set. For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/configure-user-consent?tabs=azure-portal">Configure how users consent to applications</a>.</p>
<p>The default access level is to allow access to all enterprise applications for every user. However, applications can be assigned to just a subset of users. In Azure Active Directory admin center, select <strong>Enterprise applications</strong>. Select the relevant application and select <strong>Users and groups</strong>. You can now see a list of assigned users and groups and, if necessary, add more.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/2-add-users.png" alt="Assign user account to zn application in your Azure AD tenant."></p>
<p>Troubleshoot issues where users become locked out of their account</p>
<p>To protect the Azure AD domain, an account will be locked out after a defined number of incorrect log in attempts. This could be caused by a brute force malicious attack, or by a user repeatedly entering the wrong password.</p>
<p>You should check whether a user could be using an incorrect password, or whether an app might be using an old or incorrect password. It may be that a password has recently changed in on-premises Active Directory Services (AD DS) and might not have had time to synchronize with Azure AD.</p>
<h3 id="Use-security-audits-to-troubleshoot-account-lockouts"><a href="#Use-security-audits-to-troubleshoot-account-lockouts" class="headerlink" title="Use security audits to troubleshoot account lockouts"></a>Use security audits to troubleshoot account lockouts</h3><p>To preemptively log account lockout issues, you should enable security audits for Azure AD DS. You can enable security audits in the Azure portal. Search for Azure AD Domain Services, select it and select your managed domain. <strong>Select Diagnostic settings</strong> then select <strong>Add diagnostic setting</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/2-add-diagnostic-settings.png" alt="Screen shot showing add diagnostic settings screen."></p>
<p>For more information on enabling security audits, see <a href="https://learn.microsoft.com/en-us/azure/active-directory-domain-services/security-audit-events">Enable security audits for Azure Active Directory Domain Services</a>.</p>
<p>When you’ve enabled security events, in the Azure portal, you can select <strong>Monitor, Log Analytics workspaces</strong>. Select your workspace then select <strong>Logs</strong>. You can then write queries using the Kusto querying language.</p>
<p>To search for lockout entries, you should use the filter where <strong>OperationName has “4740”</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/2-create-log.png" alt="Screen shot of the create logs area."></p>
<p>For example, you could run this kusto query to find account lockout data for the last seven days:</p>
<p>Copy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AADDomainServicesAccountManagement</span><br><span class="line"></span><br><span class="line">| where TimeGenerated &gt;= ago(7d)</span><br><span class="line"></span><br><span class="line">| where OperationName has &quot;4740&quot;</span><br></pre></td></tr></table></figure>

<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory-domain-services/troubleshoot-account-lockout">Troubleshoot account lockout problems with an Azure Active Directory Domain Services managed domain</a>.</p>
<h1 id="Troubleshoot-hybrid-authentication-in-Microsoft-Azure"><a href="#Troubleshoot-hybrid-authentication-in-Microsoft-Azure" class="headerlink" title="Troubleshoot hybrid authentication in Microsoft Azure"></a>Troubleshoot hybrid authentication in Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>5 minutes</li>
</ul>
<p>Many systems have a mixture of Azure and on-premises and use a hybrid identity solution. Azure AD Connect is an on-premises application that synchronizes Azure AD with on-premises Active Directory.</p>
<p>Determine why on-premises systems cannot connect to Azure AD resources</p>
<p>To troubleshoot Azure AD Connect, you should use the Azure AD Connect Health portal at <a href="https://portal.azure.com/">Azure Active Directory Connect Health</a> to view performance monitors and alerts.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/3-connect-health.png" alt="Screen shot of the Azure AD Connect Health screen."></p>
<p>You can also install the Azure AD Connect Administration Agent on an Azure Active Directory Connect server. The Azure AD Connect Administration Agent presents diagnostic data to Microsoft support engineers. Azure AD Connect Administration Agent is not installed by default and doesn’t store any data. It is specifically intended for live troubleshooting. You can disable the reporting of data by the Azure AD Connect Administration Agent if you edit the service config file. For more information on the Azure AD Connect Administration Agent and how to install and disable it, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/whatis-aadc-admin-agent">What is the Azure AD Connect Admin Agent</a>.</p>
<p>To troubleshoot connectivity issues, you should install Azure AD Connect Health agents. There are Azure AD Connect Health agents for AD FS, Azure ADFS, and Sync. For detailed steps on installing the Azure AD Connect Health agents, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-health-agent-install">Azure AD Connect Health agent installation</a>.</p>
<p>To troubleshoot connectivity issues, you must first have installed AD Connect in your on-premises environment. For more information on installing Azure AD Connect, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-install-roadmap">Azure AD Connect and Azure AD Connect Health installation roadmap</a>.</p>
<h2 id="Troubleshoot-pass-through-authentication-and-password-hash-sync-issues"><a href="#Troubleshoot-pass-through-authentication-and-password-hash-sync-issues" class="headerlink" title="Troubleshoot pass-through authentication and password hash sync issues"></a>Troubleshoot pass-through authentication and password hash sync issues</h2><p>To troubleshoot pass-through authentication, you should first check that it is enabled and that the authentication agents are <strong>Active</strong>. To view the status, go to <strong>Azure Active Directory Admin</strong> Center and select <strong>Azure AD Connect</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/3-azure-active-directory-connect.png" alt="Screenshot of Azure Active Directory admin center - Azure AD Connect blade."></p>
<p>You should then check if the user is getting errors, or if errors are reported in the <strong>Azure Active Directory admin center</strong>. For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/tshoot-connect-pass-through-authentication">Troubleshoot Azure Active Directory Pass-through Authentication</a>.</p>
<p>Troubleshooting password hash synchronization with Azure AD Connect sync depends on the version you use. There are different steps depending on whether one or many objects have password synchronization issues. Detailed steps for each scenario are available at <a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/tshoot-connect-password-hash-synchronization">Troubleshoot password hash synchronization with Azure AD Connect sync</a>.</p>
<h2 id="Review-and-resolve-object-synchronization-with-Azure-AD-Connect-sync"><a href="#Review-and-resolve-object-synchronization-with-Azure-AD-Connect-sync" class="headerlink" title="Review and resolve object synchronization with Azure AD Connect sync"></a>Review and resolve object synchronization with Azure AD Connect sync</h2><p>To resolve object sync issues, start by running the troubleshooting task in the wizard. You should complete the following steps:</p>
<ul>
<li><p>On your Azure AD Connect server, start a Windows PowerShell with the Run as Administrator option and run Set-ExecutionPolicy RemoteSigned.</p>
</li>
<li><p>Start the Azure AD Connect wizard, select <strong>Tasks</strong>, select <strong>Troubleshoot</strong> then select <strong>Next</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/3-azure-active-directory-additional-tasks.png" alt="Screenshot of troubleshoot object synchronization."></p>
</li>
<li><p>Click <strong>Launch</strong> and type <strong>1</strong> to <strong>Troubleshoot Object Synchronization</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/3-azure-active-directory-troubleshoot-object-synchronization.png" alt="Screenshot of global administrator credentials."></p>
</li>
</ul>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/tshoot-connect-objectsync">Troubleshoot object synchronization with Azure AD Connect sync</a>.</p>
<h2 id="Troubleshoot-Azure-AD-Application-proxy-connectivity-issues"><a href="#Troubleshoot-Azure-AD-Application-proxy-connectivity-issues" class="headerlink" title="Troubleshoot Azure AD Application proxy connectivity issues"></a>Troubleshoot Azure AD Application proxy connectivity issues</h2><p>To troubleshoot Azure AD Application proxy connectivity issues, do the following steps:</p>
<p>On your on-premises Active Directory server, open the Windows Services console and ensure that the <strong>Microsoft AAD Application Proxy Conne</strong>ctor service is enabled and running.</p>
<p>To discover events that could be causing problems, open Event Viewer and look for Application Proxy connector events in <strong>Applications and Services</strong> <strong>Logs</strong> &gt; <strong>Microsoft</strong> &gt; <strong>AadApplicationProxy</strong> &gt; <strong>Connector</strong> &gt; <strong>Admin</strong>.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/application-proxy-troubleshoot">Troubleshoot Application Proxy problems and error messages</a>.</p>
<h2 id="Troubleshoot-Active-Directory-Domain-Service"><a href="#Troubleshoot-Active-Directory-Domain-Service" class="headerlink" title="Troubleshoot Active Directory Domain Service"></a>Troubleshoot Active Directory Domain Service</h2><p>When troubleshooting Azure AD to Active Directory Domain Service integration, you need to troubleshoot Azure Active Directory Domain Services. Common issues for Azure AD DS include:</p>
<ul>
<li>Problems enabling Azure AD DS.</li>
<li>Microsoft Graph is disabled—this must be enabled to synchronize your Azure AD tenant.</li>
<li>Users in your Azure AD tenant are unable to sign into the managed domain.</li>
<li>There are alerts in your managed domain.</li>
</ul>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory-domain-services/troubleshoot">Common errors and troubleshooting steps for Azure Active Directory Domain Services</a>.</p>
<h1 id="Troubleshoot-authorization-issues-with-Microsoft-Azure"><a href="#Troubleshoot-authorization-issues-with-Microsoft-Azure" class="headerlink" title="Troubleshoot authorization issues with Microsoft Azure"></a>Troubleshoot authorization issues with Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>6 minutes</li>
</ul>
<p>When a user has been authenticated, they must be authorized to carry out actions. If a user can’t complete a required action, but their identity is correctly authenticated, you need to troubleshoot authorization issues.</p>
<h2 id="Troubleshoot-Conditional-Access"><a href="#Troubleshoot-Conditional-Access" class="headerlink" title="Troubleshoot Conditional Access"></a>Troubleshoot Conditional Access</h2><p>Conditional Access policies use numerous signals to decide whether a user should have access to a resource. For example, the user’s geographic location, type of device, and application being used can all be considered, alongside the user’s identity.</p>
<h3 id="Troubleshoot-Conditional-Access-policy-changes"><a href="#Troubleshoot-Conditional-Access-policy-changes" class="headerlink" title="Troubleshoot Conditional Access policy changes"></a>Troubleshoot Conditional Access policy changes</h3><p>If Conditional Access was previously working successfully, but is now not functioning as expected, you should investigate policy changes. Audit log data is held for 30 days and this can be increased in Azure Active Directory Diagnostic settings.</p>
<p>To view the audit log in the Azure portal, select <strong>Azure Active Directory</strong> then select Audit logs. Select the relevant date range and, in <strong>Activity</strong>, select <strong>Add conditional access policy</strong>, or <strong>Update conditional access policy</strong>, or <strong>Delete conditional access policy</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/4-audit-logs.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/4-audit-logs.png" alt="Audit log entry showing old and new JSON values for Conditional Access policy"></a></p>
<h3 id="Troubleshoot-sign-in-problems-with-Conditional-Access"><a href="#Troubleshoot-sign-in-problems-with-Conditional-Access" class="headerlink" title="Troubleshoot sign-in problems with Conditional Access"></a>Troubleshoot sign-in problems with Conditional Access</h3><p>To avoid sign-in problems with Conditional Access, be very cautious if policies apply to all users, all cloud apps, or all devices. These policies could potentially block the entire organization.</p>
<p>To troubleshoot sign-in problems, you should initially review the error message. This will typically list the policy that is causing the problem and allow you to identify the policy to update. By clicking <strong>More details</strong> on the error message you can find the specific sign-in event.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/4-more-details-sign.png" alt="More details from a Conditional Access interrupted web browser sign-in."></p>
<p>When you have the details of the sign-in event, you can open the Azure portal, select <strong>Azure Active Directory</strong> then select <strong>Sign-ins</strong>. Add filters to find the correct type of events, such as Conditional Access failures, and find the specific event.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-authentication-access-control/media/4-conditional-access-sign-log.png" alt="Selecting the Conditional access filter in the sign-ins log"></p>
<p>You can then select the event to view more details and the policy details for that event.</p>
<h3 id="The-What-If-tool"><a href="#The-What-If-tool" class="headerlink" title="The What If tool"></a>The What If tool</h3><p>The What If tool is also available to help with troubleshooting.</p>
<p>Open the Azure portal, select <strong>Azure Active Directory</strong>, select <strong>Conditional Access</strong> then select <strong>What If</strong>. You can now add conditions and see which Conditional Access policies will be applied.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/">Azure AD Conditional Access documentation</a>.</p>
<h2 id="Troubleshoot-role-based-access-control"><a href="#Troubleshoot-role-based-access-control" class="headerlink" title="Troubleshoot role-based access control"></a>Troubleshoot role-based access control</h2><p>A wide range of issues could affect role-based access control (RBAC). These issues include:</p>
<ul>
<li>A limit to the number of role assignments.</li>
<li>Having correct permissions to work with roles.</li>
<li>Losing role assignments when subscriptions are transferred to a different Azure AD directory, or resources are moved.</li>
<li>Security principals deleted or only recently created.</li>
<li>Management capabilities requiring write access.</li>
</ul>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/troubleshooting">Troubleshoot Azure RBAC</a>.</p>
<h2 id="Troubleshoot-issues-when-storing-encrypted-passwords-in-Azure-Key-Vault"><a href="#Troubleshoot-issues-when-storing-encrypted-passwords-in-Azure-Key-Vault" class="headerlink" title="Troubleshoot issues when storing encrypted passwords in Azure Key Vault"></a>Troubleshoot issues when storing encrypted passwords in Azure Key Vault</h2><p>Azure Key Vault uses access policies to authorize user actions. There are many steps to troubleshoot Azure Key Vault access policy issues. For more information, see <a href="https://learn.microsoft.com/en-us/azure/key-vault/general/troubleshooting-access-issues">Troubleshooting Azure key vault access policy issues</a>.</p>
<h1 id="Demo-Troubleshoot-authentication-and-access-control-issues"><a href="#Demo-Troubleshoot-authentication-and-access-control-issues" class="headerlink" title="Demo: Troubleshoot authentication and access control issues"></a>Demo: Troubleshoot authentication and access control issues</h1><p>Completed100 XP</p>
<ul>
<li>5 minutes</li>
</ul>
<p>In this demonstration you will see how to proactively troubleshoot Conditional Access policies using the What if tool in the Azure portal:</p>
<iframe src="https://www.microsoft.com/en-us/videoplayer/embed/RE4RYRI?postJsllMsg=true" frameborder="0" allowfullscreen="true" data-linktype="external" title="Video Player" style="box-sizing: inherit; outline-color: inherit; margin: 0px; padding: 0px; border: 0px; width: 640px; height: 360px; position: absolute; inset: 0px;"></iframe>



















<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>In this module, you learned how to troubleshoot a deployment of Azure Active Directory (Azure AD) that is based entirely in the cloud and a hybrid deployment of Azure AD that is part cloud-based and part on-premises. You also learned how to troubleshoot authorization issues when using Microsoft Azure.</p>
<p>Now that you’ve completed this module, you should be able to:</p>
<ul>
<li>Troubleshoot Azure AD authentication.</li>
<li>Troubleshoot hybrid authentication.</li>
<li>Troubleshoot authorization issues.</li>
</ul>
<h2 id="Learn-more"><a href="#Learn-more" class="headerlink" title="Learn more"></a>Learn more</h2><p>For more information about the topics discussed in this module, see:</p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/authentication/concept-sspr-howitworks">How it works: Azure AD self-service password reset.</a></p>
<p><a href="https://learn.microsoft.com/en-us/troubleshoot/azure/active-directory/troubleshoot-azure-mfa-issue">Troubleshoot Azure AD Multifactor Authentication issues.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/saas-apps/tutorial-list">Tutorials for integrating SaaS applications with Azure Active Directory.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/add-application-portal">Quickstart: Add an enterprise application.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/configure-user-consent?tabs=azure-portal">Configure how users consent to applications.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory-domain-services/security-audit-events">Enable security audits for Azure Active Directory Domain Services.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory-domain-services/troubleshoot-account-lockout">Troubleshoot account lockout problems with an Azure Active Directory Domain Services managed domain.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/whatis-aadc-admin-agent">What is the Azure AD Connect Admin Agent?</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-health-agent-install">Azure AD Connect Health agent installation.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-install-roadmap">Azure AD Connect and Azure AD Connect Health installation roadmap.</a>.</p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/tshoot-connect-pass-through-authentication">Troubleshoot Azure Active Directory Pass-through Authentication.</a>.</p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/tshoot-connect-password-hash-synchronization">Troubleshoot password hash synchronization with Azure AD Connect sync.</a>.</p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/hybrid/tshoot-connect-objectsync">Troubleshoot object synchronization with Azure AD Connect sync.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/application-proxy-troubleshoot">Troubleshoot Application Proxy problems and error messages.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory-domain-services/troubleshoot">Common errors and troubleshooting steps for Azure Active Directory Domain Services.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/">Azure AD Conditional Access documentation.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/troubleshooting">Troubleshoot Azure RBAC.</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/key-vault/general/troubleshooting-access-issues">Troubleshooting Azure key vault access policy issues.</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-720-Troubleshoot-business-continuity-with-Microsoft-Azure-1</title>
    <url>/2022/11/14/AZ-720-Troubleshoot-business-continuity-with-Microsoft-Azure-1/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>As an Azure network support engineer, you understand that business data is valuable, and needs to be protected from internal and external risks. When you encounter problems with backing up or recovery, you need to know how to approach the problem. In this module, you will learn how to monitor the status of backups, review logs, and troubleshoot common issues that occur when backing up and recovering data.</p>
<h2 id="Learning-objectives"><a href="#Learning-objectives" class="headerlink" title="Learning objectives"></a>Learning objectives</h2><p>By the end of this module, you will be able to:</p>
<ul>
<li>Review the status of a backup job, manage alerts, and review logs.</li>
<li>Troubleshoot backing and restoring a virtual machine (VM).</li>
<li>Troubleshoot Microsoft Azure Recovery Services backups.</li>
<li>Troubleshoot backing up and restoring servers.</li>
<li>Troubleshoot Azure to Azure Site Recovery.</li>
<li>Troubleshoot site recovery with Hyper-V, VMM, and VMware.</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Demonstrate an understanding of the OSI model</li>
<li>Demonstrate an understanding of Azure CLI</li>
<li>Demonstrate an understanding of PowerShell</li>
<li>Know how to run Cloud Shell to run commands</li>
</ul>
<h1 id="Troubleshoot-backup-issues-with-Microsoft-Azure"><a href="#Troubleshoot-backup-issues-with-Microsoft-Azure" class="headerlink" title="Troubleshoot backup issues with Microsoft Azure"></a>Troubleshoot backup issues with Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>8 minutes</li>
</ul>
<h2 id="Review-backup-status-in-the-Azure-portal"><a href="#Review-backup-status-in-the-Azure-portal" class="headerlink" title="Review backup status in the Azure portal"></a>Review backup status in the Azure portal</h2><p>The Azure Backup Center is a one-stop location to manage Azure backups including:</p>
<ul>
<li>Azure VM backup</li>
<li>SQL in Azure VM backup</li>
<li>SAP HANA in Azure VM backup</li>
<li>Azure Files backup</li>
<li>Azure Blobs backup</li>
<li>Azure Managed Disks backup</li>
<li>Azure Database for PostgreSQL Server backup</li>
</ul>
<p>For information about supported scenarios, see the <a href="https://learn.microsoft.com/en-us/azure/backup/backup-center-support-matrix">Support matrix for Backup center</a>.</p>
<p>In the Azure portal, search for Backup center in the Search bar. You can then pin the Backup center to your dashboard. Use the filter options to view the specific jobs you are interested in. You can filter on the following parameters:</p>
<ul>
<li>Datasource subscription, resource group, location, tag, or type</li>
<li>Vault</li>
<li>Protection status</li>
</ul>
<p>Use the Backup jobs menu to review the job status. You can review the time the backup started, the duration, the job operation, and its status. You can also display the backup instance associated with the job, the subscription, resource group, and location.</p>
<p>Select an item in the grid to get more details. Right-click an item to go to the resource and take any necessary actions.</p>
<h3 id="Review-and-respond-to-backup-alerts"><a href="#Review-and-respond-to-backup-alerts" class="headerlink" title="Review and respond to backup alerts"></a>Review and respond to backup alerts</h3><p>From the Backup center left menu, under Monitoring + reporting, select Alerts (preview).</p>
<p>By default, the summary displays open alerts in the last 24 hours. You can also filter by a range of parameters:</p>
<ul>
<li><p>Datasource subscription</p>
</li>
<li><p>Datasource resource group</p>
</li>
<li><p>Datasource location</p>
</li>
<li><p>Datasource type</p>
</li>
<li><p>Vault</p>
</li>
<li><p>Severity (0 &#x3D; critical, 1 &#x3D; error, 2 &#x3D; warning, 3 &#x3D; informational, and 4 &#x3D; verbose)</p>
</li>
<li><p>State (New, acknowledged, closed)</p>
</li>
<li><p>Type (Security alert, configured alert)</p>
</li>
<li><p>Signal type (metric or log)</p>
</li>
<li><p>Time range (24 hours, week, two weeks, 30 days, or custom)</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/2-backup-reports.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/2-backup-reports.png" alt="Screenshot that shows Backup Report."></a></p>
</li>
</ul>
<h3 id="Alerts-by-email-notification"><a href="#Alerts-by-email-notification" class="headerlink" title="Alerts by email notification"></a>Alerts by email notification</h3><p>You can get email notifications when alerts are triggered by creating an alert processing rule.</p>
<ul>
<li>From the Azure portal, go to the Backup center.</li>
<li>From the left menu, select Alerts (Preview).</li>
<li>From the top menu, select Alert processing rule (preview).</li>
<li>From the top menu, select Create.</li>
<li>In the Scope section, select Select scope to display the Select Scope pane.</li>
<li>Select the resource you want the alert processing rule applied to by either selecting from the drop-down list, or by typing to filter the resources. The matching resources are then displayed. Use the check boxes to select the resources you want the alert processing rule to apply to.</li>
<li>Alternatively, you can apply the rule for all resources within a subscription. When the Select Scope pane is displayed, select the check box next to the correct subscription.</li>
<li>In the Filter section, you can apply one or more filters. For example, select Severity to generate notifications for alerts of a certain severity.</li>
<li>Under Rule Settings, create an action group (or use an existing one). An action group is the destination to which the alert notification should be sent, such as an email address.</li>
<li>On the Basics tab, select the name of the action group, the subscription, and resource group under which it should be created.</li>
<li>On the Notifications tab, select Email&#x2F;SMS message&#x2F;Push&#x2F;Voice and enter the recipient’s details.</li>
<li>Test the action group. A test email is sent to the specified email addresses.</li>
<li>Select Review + Create, and then Create to save the action group.</li>
<li>Select Create to save the action rule.</li>
</ul>
<h3 id="Review-and-interpret-backup-logs"><a href="#Review-and-interpret-backup-logs" class="headerlink" title="Review and interpret backup logs"></a>Review and interpret backup logs</h3><p>To review and interpret backup logs, select the Backup Reports menu in the Backup center. When configured, Azure Backup Reports allow you to audit your backups and restores, analyze trends, and track and forecast usage.</p>
<p>Configure diagnostics settings for a Recovery Services vault by going to the vault and selecting Diagnostics settings. Select + Add Diagnostic Setting for the metrics you want to collect. Under Destination details, select the destinations that you want to stream them to. This includes Log Analytics workspace as an option.</p>
<p>The following views are available from the tabs:</p>
<ul>
<li><p>Overview – select specific subscriptions and workspaces, and links to more information.</p>
</li>
<li><p>Summary – a high-level overview of your backup estate.</p>
</li>
<li><p>Backup Items – cloud storage consumed at a backup item level.</p>
</li>
<li><p>Usage – key billing parameters for your backups.</p>
</li>
<li><p>Jobs – view long-running trends on jobs, such as the number of failed jobs per day, and the top causes of job failure.</p>
</li>
<li><p>Policies – information on active policies, such as the number of associated items, and the total cloud storage consumed by items backed up under a given policy.</p>
</li>
<li><p>Optimize – potential cost optimization opportunities for your backups.</p>
</li>
<li><p>Policy adherence – success of backups per day for every backup instance.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/2-backup-center.png" alt="Screenshot of Backup Center."></p>
</li>
</ul>
<h2 id="Troubleshooting-backups-with-Microsoft-Azure-Recovery-Services-MARS"><a href="#Troubleshooting-backups-with-Microsoft-Azure-Recovery-Services-MARS" class="headerlink" title="Troubleshooting backups with Microsoft Azure Recovery Services (MARS)"></a>Troubleshooting backups with Microsoft Azure Recovery Services (MARS)</h2><p> Note</p>
<p>Microsoft documentation refers to both the backup agent and MARS interchangeably: both refer to the same service name (cbengine). In this module, it is referred to as Microsoft Azure Recovery Services (MARS).</p>
<p>Microsoft Azure Recovery Services is also known as the backup agent. This is the Azure service that is used to back up data. The MARS agent can run on:</p>
<ul>
<li>On-premises Windows machines.</li>
<li>Azure VMs running Windows. The MARS agent runs side by side with the Azure VM backup extension. The agent backs up specific files and folders on the VM.</li>
<li>A Microsoft Azure Backup Server (MABS) or a System Center Data Protection Manager (DPM) server.</li>
</ul>
<p>Use the MARS agent to back up files, folders, and Windows machines either on-premises or in the cloud. Data is backed up to an Azure Recovery Services Vault.</p>
<p>To troubleshoot with the MARS agent, first check basic issues, and then more advanced issues.</p>
<h3 id="Step-1-Basic-troubleshooting"><a href="#Step-1-Basic-troubleshooting" class="headerlink" title="Step 1: Basic troubleshooting"></a>Step 1: Basic troubleshooting</h3><p>Check that:</p>
<ul>
<li>You have network connectivity between the MARS backup agent and Azure.</li>
<li>The MARS agent is running. You might need to restart it and ensure the MARS agent is ready.</li>
<li>There is 5%-10% free space in the scratch folder.</li>
<li>Antivirus software or any other process is not interfering with the backup.</li>
<li>Any warning messages have been reviewed.</li>
</ul>
<h3 id="Step-2-Troubleshoot-versions-and-other-steps"><a href="#Step-2-Troubleshoot-versions-and-other-steps" class="headerlink" title="Step 2: Troubleshoot versions and other steps"></a>Step 2: Troubleshoot versions and other steps</h3><ul>
<li>For offline backups, ensure Azure PowerShell 3.7.0 is installed on both computers.</li>
<li>The operating system and MARS agent are up-to-date.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-support-matrix-mars-agent">Unsupported drives, and files with unsupported attributes, are excluded from backup</a>.</li>
<li>Are manual backups working, but scheduled backups are not?</li>
<li>Are all relevant clocks set to the correct time zone?</li>
</ul>
<h2 id="Troubleshoot-backing-up-Azure-VMs"><a href="#Troubleshoot-backing-up-Azure-VMs" class="headerlink" title="Troubleshoot backing up Azure VMs"></a>Troubleshoot backing up Azure VMs</h2><p>When configuring backups for an Azure VM, follow best practice guidelines. If you encounter problems with backing up an Azure VM, try the following:</p>
<h3 id="Step-1-Basic-troubleshooting-1"><a href="#Step-1-Basic-troubleshooting-1" class="headerlink" title="Step 1: Basic troubleshooting"></a>Step 1: Basic troubleshooting</h3><ul>
<li>Is the Azure VM provisioning state ‘Running’? The backup will not run if it is in a Stopped&#x2F;Deallocated&#x2F;Updating state. You might see the error message: VM is not in a state that allows backups.</li>
<li>Are there any pending operating system updates or does the VM need to reboot? Install system updates and reboot before retrying the backup.</li>
<li>Does the Azure VM have internet connectivity?</li>
<li>Is another backup service running? Two backup services cannot run at the same time. If you suspect another backup has not left a snapshot extension, <a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout">uninstall extensions</a> to force a reload, then try the backup again.</li>
<li>Is antivirus software preventing the backup from running? If so, you might see the error message: antivirus configured in the VM is restricting the execution of backup extension. To resolve this issue, in the antivirus configuration, exclude the directories below:</li>
</ul>
<p>C:\Packages\Plugins\Microsoft.Azure.RecoveryServices.VMSnapshot</p>
<p>C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.RecoveryServices.VMSnapshot</p>
<h3 id="Step-2-Check-the-Azure-VM-Guest-Agent"><a href="#Step-2-Check-the-Azure-VM-Guest-Agent" class="headerlink" title="Step 2: Check the Azure VM Guest Agent"></a>Step 2: Check the Azure VM Guest Agent</h3><ul>
<li>Is the Azure VM Guest Agent service installed and started? Go to services.msc to check it is running then try rebooting the VM.</li>
<li>Is the Microsoft Azure VM Guest Agent the latest version?</li>
</ul>
<h3 id="Step-3-Check-Azure-VM-extension-health"><a href="#Step-3-Check-Azure-VM-extension-health" class="headerlink" title="Step 3: Check Azure VM extension health"></a>Step 3: Check Azure VM extension health</h3><ul>
<li>Are all Azure VM extensions in the ‘provisioning succeeded’ state? From the Azure portal, go to the VM, then Settings. From the Extensions menu, select Extensions status.</li>
<li>Have all <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/extensions/overview">extension issues</a> been resolved?</li>
</ul>
<h3 id="Step-4-Check-the-Azure-backup-agent"><a href="#Step-4-Check-the-Azure-backup-agent" class="headerlink" title="Step 4: Check the Azure backup agent"></a>Step 4: Check the Azure backup agent</h3><ul>
<li>Is the Windows or Linux VM operating system supported? Refer to the <a href="https://learn.microsoft.com/en-us/azure/backup/backup-support-matrix-iaas">IaaS VM Backup Support Matrix</a> for supported versions.</li>
<li>Is the VM agent up-to-date? Azure VMs are backed up by installing a backup agent. Check that the backup agent is installed and it’s a recent version.</li>
<li>Is the Azure Backup option grayed out? Hover over the grayed-out option to find out the reason.</li>
<li>Is antivirus software blocking the extension? If there are log entries in Event Viewer Application logs with the faulting application name IaaSBcdrExtension.exe then it could be the antivirus software.</li>
<li>Are there entries in the Event Log? The Event Log may show backup failures from products other than Azure Backup. If Azure Backup is failing, find the corresponding error code in <a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout">Common Issues</a> to discover the solution.</li>
</ul>
<p>For an up-to-date list of common error messages, see <a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-vms-troubleshoot">Troubleshoot backup errors with Azure VMs - Azure Backup | Microsoft Docs</a>.</p>
<h2 id="Troubleshoot-Azure-Backup-Server-issues"><a href="#Troubleshoot-Azure-Backup-Server-issues" class="headerlink" title="Troubleshoot Azure Backup Server issues"></a>Troubleshoot Azure Backup Server issues</h2><p>Microsoft Azure Backup Server (MABS), also known as Azure Backup Server, is the software used to back up a range of servers and workloads. For a complete list of what can be protected with MABS, see:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-mabs-protection-matrix">MABS (Azure Backup Server) V3 UR1 (and later) protection matrix</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/microsoft-azure-backup-server-protection-v3">Azure Backup Server V3 RTM protection matrix</a></li>
</ul>
<p>MABS must be installed on a dedicated, single-purpose server. The computer cannot be a domain controller, a node of a cluster, have Exchange Server running, have System Center Operations Manager running, or have the Application Server role installed. It must be a dedicated backup server.</p>
<p>Microsoft Azure Backup Server isn’t supported on Windows Server Core or Microsoft Hyper-V Server.</p>
<p>Microsoft Azure Backup Server must be part of a domain. You cannot move an existing MABS machine to a new domain after deployment.</p>
<p>Microsoft Azure Backup Server must be registered with a Recovery Services vault, whether backup data is stored locally or in Azure.</p>
<p>Run through the following questions to troubleshoot Azure Backup Server issues:</p>
<ul>
<li>Is there network connectivity between the MARS agent and the Azure server?</li>
<li>Is the MARS service running? In the Service console, start or restart the service and try the backup again.</li>
<li>Is the SQL Agent service running and set to automatic in the MABS server?</li>
<li>Is the MARS agent up-to-date?</li>
<li>Ensure no other process or antivirus software is interfering with Azure backup.</li>
<li>If Push install fails, check if DPM agent is already present. If yes, then uninstall the agent and install it again.</li>
<li>Ensure .NET Framework 4.5.2 or later is installed on the server.</li>
<li>Ensure the server on which you’re trying to install Azure Backup Server isn’t already registered with another vault.</li>
<li>Configure antivirus software for MABS server.</li>
<li>Check where MABs is installed, and what else is installed on that server.</li>
<li>Check the backup vault credentials.</li>
</ul>
<h2 id="Troubleshoot-scheduled-backups"><a href="#Troubleshoot-scheduled-backups" class="headerlink" title="Troubleshoot scheduled backups"></a>Troubleshoot scheduled backups</h2><p>There are two types of policies for scheduled backups:</p>
<ul>
<li>Default backup policy – the default policy backs up the VM once a day, retaining the backups for 30 days.</li>
<li>Custom policy – you define whether backups run daily or weekly, and specify how long to retain the backup.</li>
</ul>
<p>If you have problems with scheduled backups, try the following:</p>
<ul>
<li>The VMs must be in the same region and subscription as the recovery vault.</li>
<li>If you get a message saying the recovery point is crash-consistent, check whether the VM is switched on. If the VM is not on, it will be backed up as an offline VM and the recovery point will be crash-consistent. This means that Azure gives no guarantee about the consistency of the data on the storage medium.</li>
<li><a href="https://learn.microsoft.com/en-us/troubleshoot/system-center/dpm/troubleshoot-scheduled-backup-job-failures">Troubleshoot scheduled backup job failures - Data Protection Manager | Microsoft Docs</a></li>
</ul>
<h1 id="Troubleshoot-recovery-issues-with-Microsoft-Azure"><a href="#Troubleshoot-recovery-issues-with-Microsoft-Azure" class="headerlink" title="Troubleshoot recovery issues with Microsoft Azure"></a>Troubleshoot recovery issues with Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>9 minutes</li>
</ul>
<p>When you have created a backup, you may need to recover the data as part of a planned migration, or in case of data loss. In this unit, you will learn how to troubleshoot data recovery for different scenarios.</p>
<h2 id="Troubleshoot-file-recovery-for-an-Azure-VM-backup"><a href="#Troubleshoot-file-recovery-for-an-Azure-VM-backup" class="headerlink" title="Troubleshoot file recovery for an Azure VM backup"></a>Troubleshoot file recovery for an Azure VM backup</h2><p>When you recover data from an Azure VM backup you have three options to restore the data:</p>
<ul>
<li>File Recovery</li>
<li>Restore VM</li>
<li>Disk restore. Only the disks are restored, which can then be used to create a new VM or replace a disk on an existing VM.</li>
</ul>
<p>To recover files, select the <strong>File Recovery</strong> option. It is then a three-step process to recover the files:</p>
<ol>
<li>Select a recovery point. This is the date when your files were available.</li>
<li>Download a script. The script will mount the drives storing your files. The drives will remain mounted for 12 hours for you to restore the files you need.</li>
<li>Unmount the drives and close the connection.</li>
</ol>
<p>The following sections provide troubleshooting information when common error messages appear:</p>
<h3 id="Error-message-Exception-caught-while-connecting-to-target"><a href="#Error-message-Exception-caught-while-connecting-to-target" class="headerlink" title="Error message: Exception caught while connecting to target"></a>Error message: Exception caught while connecting to target</h3><p>This may appear if the script is unable to access the recovery point. To resolve this issue:</p>
<ol>
<li>Check that the machine running the script has access to the recovery vault.</li>
<li>Verify the connection to the Azure target IP addresses. To check, run the following from an elevated command prompt: nslookup download.microsoft.com or ping download.microsoft.com</li>
<li>Ensure access to iSCSI outbound port 3260.</li>
<li>Check for a firewall or NSG blocking traffic to Azure target IPs or recovery service URLs.</li>
<li>Check that antivirus software isn’t preventing the script from running.</li>
</ol>
<p>Also check the following common error messages:</p>
<h3 id="Error-message-The-target-has-already-been-logged-in-via-an-iSCSI-session"><a href="#Error-message-The-target-has-already-been-logged-in-via-an-iSCSI-session" class="headerlink" title="Error message: The target has already been logged in via an iSCSI session"></a>Error message: The target has already been logged in via an iSCSI session</h3><p>This might be caused by the script already running on the same machine, and the drives are already attached. Browse the available volumes using File Explorer to find the mounted drives.</p>
<h3 id="Error-message-This-script-is-invalid-because-the-disks-have-been-dismounted-via-portal-x2F-exceeded-the-12-hr-limit-Download-a-new-script-from-the-portal"><a href="#Error-message-This-script-is-invalid-because-the-disks-have-been-dismounted-via-portal-x2F-exceeded-the-12-hr-limit-Download-a-new-script-from-the-portal" class="headerlink" title="Error message: This script is invalid because the disks have been dismounted via portal&#x2F;exceeded the 12-hr limit. Download a new script from the portal"></a>Error message: This script is invalid because the disks have been dismounted via portal&#x2F;exceeded the 12-hr limit. Download a new script from the portal</h3><p>This message appears if you attempt to run the script more than 12 hours after you downloaded it. You need to download another script from the portal.</p>
<h3 id="Error-message-ExtensionSnapshotFailedCOM"><a href="#Error-message-ExtensionSnapshotFailedCOM" class="headerlink" title="Error message: ExtensionSnapshotFailedCOM"></a>Error message: ExtensionSnapshotFailedCOM</h3><p>The backup operation failed due to an issue with the Windows service COM+ System application. To resolve this issue, follow these steps:</p>
<ol>
<li>Try starting&#x2F;restarting Windows service COM+ System Application (from an elevated command prompt – net start COMSysApp).</li>
<li>Ensure Distributed Transaction Coordinator service is running as Network Service account. If not, change it to run as Network Service account and restart COM+ System Application.</li>
<li>If unable to restart the service, then reinstall Distributed Transaction Coordinator service by following the steps below:</li>
<li>Stop the MSDTC service</li>
<li>Open a command prompt (cmd)</li>
<li>Run the command msdtc -uninstall</li>
<li>Run the command msdtc -install</li>
<li>Start the MSDTC service</li>
<li>Start the Windows service COM+ System Application. After the COM+ System Application starts, trigger a backup job from the Azure portal.</li>
</ol>
<p>For an up-to-date list of common error messages and recommended action, see <a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-vm-file-recovery-troubleshoot">Troubleshoot Azure VM file recovery - Azure Backup | Microsoft Docs</a>.</p>
<h2 id="Troubleshoot-restoring-using-Microsoft-Azure-Recovery-Services-MARS-backup-agent"><a href="#Troubleshoot-restoring-using-Microsoft-Azure-Recovery-Services-MARS-backup-agent" class="headerlink" title="Troubleshoot restoring using Microsoft Azure Recovery Services (MARS) backup agent"></a>Troubleshoot restoring using Microsoft Azure Recovery Services (MARS) backup agent</h2><p>To restore data that has been backed up using Microsoft Azure Recovery Services (MARS):</p>
<ol>
<li>From the MARS agent home screen, select Recover Data. The Recover Data Wizard is displayed.</li>
<li>Specify where you want to restore the data.</li>
<li>Select the data to restore, and the date and time it was backed up. These selections determine the data recovery point.</li>
<li>Select Mount to mount the disk containing the recovery point then select the location where you want to recover the data.</li>
<li>Confirm your selections before starting the data recovery.</li>
</ol>
<p>When you installed the MARS agent, an encryption passphrase was generated. This is stored in a text file and should be kept somewhere safe. If the passphrase is lost, you cannot recover any data backed up by the MARS backup agent.</p>
<p>When the MARS agent is configured, you specify how long the backup data should be retained. Data will not be kept after this period of time.</p>
<h2 id="Troubleshoot-restore-issues-when-using-Azure-backup-agent"><a href="#Troubleshoot-restore-issues-when-using-Azure-backup-agent" class="headerlink" title="Troubleshoot restore issues when using Azure backup agent"></a>Troubleshoot restore issues when using Azure backup agent</h2><p>When you recover an Azure Virtual Machine from a backup, a process server is used to handle the data. If you encounter problems with restoring data, use a step-by-step methodology:</p>
<h3 id="Step-1-Monitor-process-server-health"><a href="#Step-1-Monitor-process-server-health" class="headerlink" title="Step 1: Monitor process server health"></a>Step 1: Monitor process server health</h3><p>It is good practice to proactively monitor the process server when restoring data. This allows you to monitor alerts, and handle issues as they occur.</p>
<p>The following graphic summarizes the steps to troubleshoot a backup recovery:</p>
<ol>
<li>Are all services running?</li>
<li>Is the CPU state OK?</li>
<li>Is the memory state OK?</li>
<li>Is cache free space OK?</li>
<li>Does the process server have a heartbeat?</li>
<li>Troubleshoot connection&#x2F;replication issues.</li>
</ol>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/3-steps-backup-recovery.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/3-steps-backup-recovery.png" alt="Screenshot of steps to troubleshoot a backup recovery."></a></p>
<h2 id="Troubleshoot-restore-issues-from-Microsoft-Azure-Backup-Server-MABS"><a href="#Troubleshoot-restore-issues-from-Microsoft-Azure-Backup-Server-MABS" class="headerlink" title="Troubleshoot restore issues from Microsoft Azure Backup Server (MABS)"></a>Troubleshoot restore issues from Microsoft Azure Backup Server (MABS)</h2><p>Azure Backup Server is designed to back up and restore workloads such as Hyper-V VMs, Microsoft SQL Server, SharePoint Server, Microsoft Exchange, and Windows clients.</p>
<p>If you have problems restoring from MABS, try the following troubleshooting checklist:</p>
<h3 id="Check-the-installation-folder"><a href="#Check-the-installation-folder" class="headerlink" title="Check the installation folder"></a>Check the installation folder</h3><p>The default installation folders for DPM are as follows:</p>
<p>C:\Program Files\Microsoft Azure Backup Server\DPM\DPM</p>
<p>You can also run the following command to find the install folder path:</p>
<p>Reg query “HKLM\SOFTWARE\Microsoft\Microsoft Data Protection Manager\Setup”</p>
<h3 id="Invalid-vault-credentials"><a href="#Invalid-vault-credentials" class="headerlink" title="Invalid vault credentials"></a>Invalid vault credentials</h3><p>When you register to a vault, if you get an error message saying invalid vault credentials have been provided, either you have a corrupt file, or you provided incorrect credentials. Try the following:</p>
<ol>
<li>Download the latest credentials file from the vault and try again.</li>
<li>Try downloading the credentials to a different local directory or create a new vault.</li>
<li>Try updating the date and time settings as described in <a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-mars-troubleshoot">this article</a>.</li>
<li>Check to see if c:\windows\temp has more than 65000 files. Move stale files to another location or delete the items in the Temp folder.</li>
<li>Check the status of certificates.</li>
<li>In Control Panel, open <strong>Manage Computer Certificates</strong>.</li>
<li>Expand the <strong>Personal</strong> node and its child node <strong>Certificates</strong>.</li>
<li>Remove the certificate <strong>Windows Azure Tools</strong>.</li>
<li>Retry the registration in the Azure Backup client.</li>
<li>Check to see if a group policy is in place.</li>
</ol>
<h3 id="Replica-is-inconsistent"><a href="#Replica-is-inconsistent" class="headerlink" title="Replica is inconsistent"></a>Replica is inconsistent</h3><p>In the Protection Group Wizard, verify that the automatic consistency check option is turned on.</p>
<p>In the case of System State&#x2F;BMR backup, verify that Windows Server Backup is installed on the protected server.</p>
<ul>
<li>Check for space-related issues in the DPM storage pool on the DPM&#x2F;Microsoft Azure Backup Server and allocate storage as required.</li>
<li>Check the state of the Volume Shadow Copy Service on the protected server. If it’s in a disabled state, set it to start manually. Start the service on the server then go back to the DPM&#x2F;Microsoft Azure Backup Server console, and start the sync with the consistency check job.</li>
</ul>
<h3 id="Online-recovery-point-creation-failed"><a href="#Online-recovery-point-creation-failed" class="headerlink" title="Online recovery point creation failed"></a>Online recovery point creation failed</h3><p>If you get an error message saying “the Windows Azure Backup Agent was unable to create a snapshot of the selected volume”, try increasing the available space in the recovery point volume.</p>
<p>If you get an error message saying “the Windows Azure Backup Agent cannot connect to the OBEngine service”, try verifying that the OBEngine exists in the list of running services on the computer. If the OBEngine service is not running, use the “net start OBEngine” command to start it.</p>
<p>If you get an error message saying that “the encryption passphrase for this server is not set. Please configure an encryption passphrase”, try configuring an encryption passphrase. If that fails, take the following steps:</p>
<ol>
<li>Verify that the scratch location exists. This is the location that’s mentioned in the registry <strong>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows Azure Backup\Config</strong>, where the name <strong>ScratchLocation</strong> should exist.</li>
<li>If the scratch location exists, try re-registering by using the old passphrase.</li>
</ol>
<p> Note</p>
<p>When you configure an encryption passphrase, always save it in a secure location.</p>
<h2 id="Troubleshoot-hybrid-scenarios"><a href="#Troubleshoot-hybrid-scenarios" class="headerlink" title="Troubleshoot hybrid scenarios"></a>Troubleshoot hybrid scenarios</h2><h3 id="Troubleshoot-site-recovery-with-Hyper-V"><a href="#Troubleshoot-site-recovery-with-Hyper-V" class="headerlink" title="Troubleshoot site recovery with Hyper-V"></a>Troubleshoot site recovery with Hyper-V</h3><p>When recovering an on-premises Hyper-V VM to Azure, use Azure Site Recovery. If you experience issues, use the following checklist to troubleshoot the problem:</p>
<ul>
<li>Do all your Hyper-V hosts and VMs meet the requirements and prerequisites for recovery?</li>
<li>Check the “Support for disaster recovery of on-premises Hyper-V VMs to Azure” link at the end of this module.</li>
<li>If Hyper-V hosts are managed by Virtual Machine Manager (VMM), the VMM server must have at least one cloud and one or more host groups. The Hyper-V hosts running the VMs should be in the cloud with network mapping between on-premises VMM VM networks, and Azure virtual networks. See links in the Summary of this module.</li>
<li>Check the log located in <strong>Applications and Services Logs</strong> &gt; <strong>Microsoft</strong> &gt; <strong>Windows</strong>.</li>
<li>On the guest VM, verify that WMI is enabled and accessible.<ul>
<li><a href="https://learn.microsoft.com/en-us/windows/win32/wmisdk/wmi-troubleshooting">Troubleshoot</a> WMI.</li>
<li><a href="https://learn.microsoft.com/en-us/previous-versions/tn-archive/ff406382(v=msdn.10)">Troubleshoot</a> problems with WMI scripts and services.</li>
</ul>
</li>
<li>On the guest VM, ensure that you have the latest version of Integration Services and it is running. Microsoft recommends keeping integration services up-to-date.</li>
</ul>
<p>Also, check common error messages:</p>
<h3 id="Cannot-enable-protection-as-the-virtual-machine-is-not-highly-available"><a href="#Cannot-enable-protection-as-the-virtual-machine-is-not-highly-available" class="headerlink" title="Cannot enable protection as the virtual machine is not highly available"></a>Cannot enable protection as the virtual machine is not highly available</h3><p>Try restarting the VMM service on the VMM machine. If that doesn’t work, try removing the virtual machine from the cluster and adding it again.</p>
<h3 id="The-VSS-writer-NTDS-failed-with-status-11-and-writer-specific-failure-code-0x800423F4"><a href="#The-VSS-writer-NTDS-failed-with-status-11-and-writer-specific-failure-code-0x800423F4" class="headerlink" title="The VSS writer NTDS failed with status 11 and writer specific failure code 0x800423F4"></a>The VSS writer NTDS failed with status 11 and writer specific failure code 0x800423F4</h3><p>To resolve this issue, upgrade to Windows Server R2 with 4072650 applied. Also, check that the Hyper-V host has Windows 2016 or later installed.</p>
<h3 id="Troubleshoot-site-recovery-with-VMware"><a href="#Troubleshoot-site-recovery-with-VMware" class="headerlink" title="Troubleshoot site recovery with VMware"></a>Troubleshoot site recovery with VMware</h3><p>Before you restore a VMware VM, ensure it meets <a href="https://learn.microsoft.com/en-us/azure/site-recovery/vmware-physical-azure-support-matrix">Azure requirements</a>.</p>
<p>Verify properties as follows:</p>
<ol>
<li>In <strong>Protected Items</strong>, select <strong>Replicated Items</strong>, and then select the VM you want to verify.</li>
<li>In the <strong>Replicated item</strong> pane, there’s a summary of VM information, health status, and the latest available recovery points. Select <strong>Properties</strong>.</li>
<li>In <strong>Compute and Network</strong>, you can modify these properties as needed:<ul>
<li>Azure name</li>
<li>Resource group</li>
<li>Target size</li>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/windows/tutorial-availability-sets">Availability set</a></li>
<li>Managed disk settings</li>
</ul>
</li>
<li>You can view and modify network settings, including:<ul>
<li>The network and subnet in which the Azure VM will be located after failover.</li>
<li>The IP address that will be assigned to it.</li>
</ul>
</li>
<li>In <strong>Disks</strong>, review operating system information, and data disks on the VM.</li>
</ol>
<p>To run a failover to Azure, in <strong>Settings</strong>, select <strong>Replicated items</strong>, select the VM to fail over, and then select <strong>Failover</strong>.</p>
<p>In <strong>Failover</strong>, select a <strong>Recovery Point</strong> to fail over to. You can use one of the following options:</p>
<ul>
<li><strong>Latest</strong>: This option first processes all the data sent to Site Recovery. It provides the lowest Recovery Point Objective (RPO) because the Azure VM that’s created after failover has all the data that was replicated to Site Recovery when the failover was triggered.</li>
<li><strong>Latest processed</strong>: This option fails the VM over to the latest recovery point processed by Site Recovery. This option provides a low RTO (Recovery Time Objective) because no time is spent processing unprocessed data.</li>
<li><strong>Latest app-consistent</strong>: This option fails the VM over to the latest app-consistent recovery point processed by Site Recovery.</li>
<li><strong>Custom</strong>: This option lets you specify a recovery point.</li>
</ul>
<p>You then select <strong>Shut down machine before beginning failover</strong> to attempt to shut down source VMs before triggering the failover. Failover continues even if the shutdown fails. You can follow the failover progress on the Jobs page.</p>
<p>In some scenarios, failover requires additional processing that takes around 8 to 10 minutes to complete. You might notice longer test failover times for:</p>
<ul>
<li>VMware VMs running a Mobility service version older than 9.8.</li>
<li>Physical servers.</li>
<li>VMware Linux VMs.</li>
<li>Hyper-V VMs protected as physical servers.</li>
<li>VMware VMs that don’t have the DHCP service enabled.</li>
<li>VMware VMs that don’t have the following boot drivers: storvsc, vmbus, storflt, intelide, atapi.</li>
</ul>
<p> Note</p>
<p>Don’t cancel a failover in progress. If you cancel a failover in progress, the VM won’t replicate again.</p>
<p>If you have problems, try the following troubleshooting steps:</p>
<ol>
<li>Monitor process server health. In the Azure portal, monitor the process servers to verify they are connected and working.</li>
<li>Check connectivity between the source server and the process server, and between the process server and Azure.</li>
<li>Check that the source machine is available for replication, specifically:<ul>
<li>Check that two VMs don’t have the same UUID. Refer to <a href="https://social.technet.microsoft.com/wiki/contents/articles/32026.asr-vmware-to-azure-how-to-cleanup-duplicatestale-entries.aspx">Azure Site Recovery VMware-to-Azure: How to clean up duplicate or stale entries</a>.</li>
</ul>
</li>
<li>Ensure the <strong>vCenter credentials</strong> are correct when you set up the configuration server, by using the OVF template or unified setup. To verify the credentials, see <a href="https://learn.microsoft.com/en-us/azure/site-recovery/vmware-azure-manage-configuration-server#modify-credentials-for-automatic-discovery">Modify credentials for automatic discovery</a>.</li>
<li>If insufficient permissions are provided to access vCenter, failure to discover virtual machines might occur. Ensure that the permissions described in <a href="https://learn.microsoft.com/en-us/azure/site-recovery/vmware-azure-tutorial-prepare-on-premises">Prepare an account for automatic discovery</a> are added to the vCenter user account.</li>
<li>Management servers cannot be replicated. If the VM is used as one or more of the following roles—Configuration server &#x2F; scale-out process server &#x2F; Master target server—then you will not be able to choose the virtual machine from the portal.</li>
<li>If the virtual machine is already protected or failed over through Site Recovery, it will not be available to select for protection in the portal. Ensure that the virtual machine isn’t already protected by any other user, or under a different subscription.</li>
<li>Check if vCenter is in connected state. To verify, go to <strong>Recovery Services vault</strong> &gt; <strong>Site Recovery Infrastructure</strong> &gt; <strong>Configuration Servers</strong> &gt; <strong>Click on respective configuration server</strong>. A pane opens on the right with details of associ&#x2F;rvers. Check if vCenter is connected. If it’s in a “Not Connected” state, resolve the issue and then refresh the configuration server on the portal. After this, virtual machine will be listed on the portal.</li>
<li>If the ESXi host under which the VM resides is in powered off state, then virtual machine will not be listed or will not be selectable on the Azure portal. Power on the ESXi host, and refresh the configuration server on the portal. After this, virtual machine will be listed on the portal.</li>
<li>If there is a pending reboot, you will not be able to select the VM on the Azure portal. Complete the pending reboot and refresh the configuration server. They should then be listed on the portal.</li>
<li>If the virtual machine doesn’t have a valid IP address associated with it, you will not be able to select the machine on the Azure portal. Assign a valid IP address to the virtual machine, and refresh the configuration server. This could also be caused by the machine not having a valid IP address associated with one of its NICs. Either assign a valid IP address to all NICs or remove the NIC that’s missing the IP.</li>
</ol>
<h3 id="Troubleshoot-site-recovery-with-SCCM"><a href="#Troubleshoot-site-recovery-with-SCCM" class="headerlink" title="Troubleshoot site recovery with SCCM"></a>Troubleshoot site recovery with SCCM</h3><p>A System Center Configuration Manager (SCCM) site recovery is needed if a site fails, or you lose data in the site database. Site recovery includes repairing and resynchronizing the data.</p>
<p>If you experience problems, try the following troubleshooting issues:</p>
<ol>
<li>Check that previous configurations are not on the site server, as this can cause conflicts. Remove previous configurations before restoring Configuration Manager by using one of the following methods:<ul>
<li>Restoring to a new server.</li>
<li>Formatting the disks and reinstalling the operating system.</li>
<li>Cleaning an existing server, including deleting registry entries starting with SMS from HKLM\System\CurrentControlSet\Services.</li>
</ul>
</li>
<li>For site database recovery only before restoring Configuration Manager:<ul>
<li>Back up the site database, including supporting databases such as WSUS.</li>
<li>Note the SQL Server name and instance name.</li>
<li>Delete the site database from the SQL Server.</li>
<li>Restart the SQL Server.</li>
</ul>
</li>
<li>Clean an existing server for full recovery before restoring Configuration Manager:<ul>
<li>Back up the site database, including supporting databases such as WSUS.</li>
<li>Make a copy of the content library.</li>
<li>Uninstall the Configuration Manager site.</li>
<li>Manually delete the site database from the SQL Server.</li>
<li>Manually delete the Configuration Manager installation folder, and any other Configuration Manager folders.</li>
<li>Restart the server.</li>
<li>Restore the content library and other databases like WSUS.</li>
</ul>
</li>
<li>Use a supported version and the same edition of SQL Server:<ul>
<li>Check that the version of SQL Server is both supported, and the same edition as the original. Restoring to a newer version of SQL Server is supported, providing you don’t change the edition—you can restore Standard to Standard and Enterprise to Enterprise.</li>
<li>Ensure SQL Server is not set to <strong>single-user mode</strong>.</li>
<li>Make sure the MDF and LDF files are valid. When you recover a site, there’s no check for the state of the files.</li>
</ul>
</li>
<li>SQL Server Always On availability groups:&#x2F;<ul>
<li>If you use SQL Server Always On availability groups to host the site database, modify your recovery plans as described in <a href="https://learn.microsoft.com/en-us/mem/configmgr/core/servers/deploy/configure/sql-server-alwayson-for-a-highly-available-site-database">Prepare to use SQL Server Always On</a>.</li>
</ul>
</li>
<li>Database replicas:<ul>
<li>After you restore a site database that you configured for database replicas, reconfigure each replica. Before you can use the database replicas, recreate both the publications and subscriptions.</li>
</ul>
</li>
</ol>
<h2 id="Troubleshoot-site-to-site-recovery"><a href="#Troubleshoot-site-to-site-recovery" class="headerlink" title="Troubleshoot site-to-site recovery"></a>Troubleshoot site-to-site recovery</h2><p>Azure to Azure Site Recovery allows you to replicate Azure virtual machines (VMs) from one region to another. In case of problems, check the following:</p>
<h3 id="High-data-change-rate-on-the-source-virtual-machine"><a href="#High-data-change-rate-on-the-source-virtual-machine" class="headerlink" title="High data change rate on the source virtual machine"></a>High data change rate on the source virtual machine</h3><p>Azure Site Recovery creates an event if the data change rate on the source virtual machine is higher than the supported limits. Go to <strong>Replicated items</strong> &gt; <strong>VM</strong> &gt; <strong>Events</strong> - <strong>last 72 hours</strong>. You should see the event <strong>Data change rate beyond supported limits</strong>:</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/3-backup-center-data-change.png" alt="Screenshot that shows Data change rate beyond supported limits."></p>
<p>Select the event to display disk information:</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/3-disk-information.png" alt="Screenshot that shows disk information."></p>
<h3 id="Azure-Site-Recovery-limits"><a href="#Azure-Site-Recovery-limits" class="headerlink" title="Azure Site Recovery limits"></a>Azure Site Recovery limits</h3><p>Azure Site Recovery limits are data churn per disk and data churn per virtual machine. The actual limits vary according to specific configurations. For example, a single VM Site Recovery can handle 5MB&#x2F;s of churn per disk and a maximum of five disks. Site Recovery has a limit of 54MB&#x2F;s of total churn per VM.</p>
<p>To find out whether this is a recurring problem, check the data change rate of the relevant virtual machine under <strong>Monitoring</strong>. You will need to add the metrics shown in the following screenshot:</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/3-data-change-rate.png" alt="Screenshot that shows O S Disk Writes Bytes per Sec."></p>
<h3 id="Network-connectivity-problems"><a href="#Network-connectivity-problems" class="headerlink" title="Network connectivity problems"></a>Network connectivity problems</h3><p>Site Recovery sends replicated data to the cache storage account. You might experience network errors if uploading the data from a virtual machine to the cache storage account is slower than 4MB in three seconds.</p>
<p>To check for latency problems, use the command-line utility <a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-use-azcopy-v10">AzCopy</a>. This uploads data from the virtual machine to the cache storage account. If the latency is high, check whether you’re using a network virtual appliance (NVA) to control outbound network traffic from VMs. The appliance might get throttled if all the replication traffic passes through the NVA.</p>
<p>Microsoft recommends creating a network service endpoint in your virtual network for “Storage” so that the replication traffic doesn’t go to the NVA.</p>
<h3 id="Network-connectivity"><a href="#Network-connectivity" class="headerlink" title="Network connectivity"></a>Network connectivity</h3><p>Site Recovery needs the VM to provide outbound connectivity to specific URLs or IP ranges. You might have your VM behind a firewall or use network security group (NSG) rules to&#x2F;l outbound connectivity. If so, you might experience issues. Make sure all the URLs are connected. For more information, see <a href="https://learn.microsoft.com/en-us/azure/site-recovery/azure-to-azure-about-networking">Outbound connectivity for URLs</a>.</p>
<p>For an up-to-date list of common issues, see: <a href="https://learn.microsoft.com/en-us/azure/site-recovery/azure-to-azure-troubleshoot-replication">Troubleshoot replication of Azure VMs with Azure Site Recovery - Azure Site Recovery | Microsoft Docs</a>.</p>
<h1 id="Exercise-Troubleshoot-business-continuity-issues"><a href="#Exercise-Troubleshoot-business-continuity-issues" class="headerlink" title="Exercise: Troubleshoot business continuity issues"></a>Exercise: Troubleshoot business continuity issues</h1><p>Completed100 XP</p>
<ul>
<li>7 minutes</li>
</ul>
<p>You’ve been asked to make a backup of a virtual machine. The backup must be application consistent.</p>
<p> Important</p>
<p>You need your own <a href="https://azure.microsoft.com/free/">Azure subscription</a> to complete the exercises in this module. If you don’t have an Azure subscription, you can still view the demonstration video at the bottom of this page.</p>
<h2 id="Create-the-exercise-environment"><a href="#Create-the-exercise-environment" class="headerlink" title="Create the exercise environment"></a>Create the exercise environment</h2><p>Using the Cloud Shell on the right, run these commands to create the example topology. The environment will take approximately 5 minutes to build.</p>
<ol>
<li><p>Clone the setup script from GitHub.</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/MicrosoftDocs/mslearn<span class="literal">-business-continuity</span> networking</span><br></pre></td></tr></table></figure>
</li>
<li><p>Run the setup script.</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">networking/setup.ps1</span><br></pre></td></tr></table></figure>
</li>
<li><p>The script will create all the resources. Wait until it completes, you should see a <strong>Lab Environment Created</strong> message.</p>
</li>
</ol>
<h2 id="Create-a-backup"><a href="#Create-a-backup" class="headerlink" title="Create a backup"></a>Create a backup</h2><ol>
<li><p>Sign in to the <a href="https://portal.azure.com/learn.docs.microsoft.com">Azure portal</a> using your own subscription.</p>
</li>
<li><p>Select the portal menu on the top left, select <strong>Virtual machines</strong>, and then select <strong>labvm</strong>.</p>
</li>
<li><p>If the VM is running, select <strong>Stop</strong>, and wait for the <strong>Status</strong> to show <strong>Stopped (deallocated)</strong>.</p>
</li>
<li><p>In the left navigation pane, under <strong>Operations</strong>, select <strong>Backup</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/4-azure-backup-welcome.png" alt="Screenshot showing the back up welcome screen."></p>
</li>
<li><p>Enter the following settings, and then select <strong>Enable Backup</strong>.</p>
<ul>
<li>Recovery Services vault: <strong>Create new</strong></li>
<li>Backup vault: <strong>labdemo</strong></li>
<li>Choose backup policy: <strong>DefaultPolicy-labdemo</strong></li>
</ul>
</li>
<li><p>This takes you back to the <strong>Virtual machines</strong> page, select <strong>labvm</strong>.</p>
</li>
<li><p>In the left navigation pane, under <strong>Operations</strong>, select <strong>Backup</strong>.</p>
</li>
<li><p>Select <strong>Backup now</strong>, and then select <strong>OK</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/4-machine-backup-screen.png" alt="Screenshot showing the backup screen."></p>
</li>
<li><p>The backup starts, and runs in two phases.</p>
<ul>
<li>In the first phase, it takes a snapshot of the VM. This takes about 10 minutes.</li>
<li>In the second phase, it moves the data into the recovery services vault. This takes about 50 minutes.</li>
</ul>
</li>
</ol>
<h2 id="Monitor-progress-of-the-first-phase"><a href="#Monitor-progress-of-the-first-phase" class="headerlink" title="Monitor progress of the first phase"></a>Monitor progress of the first phase</h2><p>You won’t see anything in the Backup page of the VM until the backup has completed. However, you can monitor it in the Backup center.</p>
<ol>
<li><p>In the Azure portal, search for <strong>backup center</strong>, and then under <strong>Services</strong>, select <strong>Backup center</strong>.</p>
</li>
<li><p>In the left navigation pane, under <strong>Monitoring + reporting</strong>, select <strong>Backup jobs</strong>. You should see your job running.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/4-backup-instances.png" alt="Screenshot showing the backup job running."></p>
</li>
<li><p>Select the backup job to see more info. You can see in the screen picture that the first phase has completed.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/4-single-backup.png" alt="Screenshot showing a single backup instance."></p>
</li>
</ol>
<h2 id="View-results-of-first-phase"><a href="#View-results-of-first-phase" class="headerlink" title="View results of first phase"></a>View results of first phase</h2><p>When the first phase has completed, you can see that it is <strong>Crash Consistent</strong>.</p>
<ol>
<li><p>In the breadcrumb trail, select <strong>Backup center</strong>.</p>
</li>
<li><p>In the left navigation pane, under <strong>Manage</strong>, select <strong>Backup instances</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/4-multiple-backups.png" alt="Screenshot showing multiple backup instances."></p>
</li>
<li><p>Scroll down until you see <strong>labvm</strong> and select <strong>labvm</strong>. This shows that the backup is <strong>Crash Consistent</strong>. This is incorrect, the backup should be <strong>Application Consistent</strong>. You need to find out why and fix the problem.</p>
<p> Note</p>
<p>Only the first phase has completed, and the data will now be transferring to the vault. You can continue with the lab; you don’t have to wait for this to complete.</p>
</li>
</ol>
<h2 id="Resolution"><a href="#Resolution" class="headerlink" title="Resolution"></a>Resolution</h2><p>The VM was in a <strong>Stopped</strong> state. You need to start the VM and wait for it to be in a running state before making another backup.</p>
<ol>
<li><p>Select the portal menu on the top left, select <strong>Virtual machines</strong>, and then select <strong>labvm</strong>.</p>
</li>
<li><p>Select <strong>Start</strong>, and wait for the <strong>Status</strong> to show <strong>Running</strong>.</p>
</li>
<li><p>In the left navigation pane, under <strong>Operations</strong>, select <strong>Backup</strong>.</p>
</li>
<li><p>On the <strong>labvm</strong> page, you should see that there is one <strong>Crash Consistent</strong> restore point.</p>
</li>
<li><p>Select <strong>Backup now</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/4-backup-screen.png" alt="Screenshot of the backup screen."></p>
</li>
<li><p>On the <strong>Backup now</strong> page, select <strong>OK</strong>. The second backup will be an incremental backup and should take less time than the first backup.</p>
</li>
<li><p>You can monitor progress in the <strong>Backup center</strong>.</p>
</li>
<li><p>When the first phase is complete, navigate to the <strong>Backup</strong> page of the VM. The send backup is <strong>Application Consistent</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/business-continuity/media/4-crash-instance-restore-point.png" alt="Screenshot showing the crash consistent restore point."></p>
</li>
</ol>
<p>In this demonstration you will see how to proactively troubleshoot Conditional Access policies using the What if tool in the Azure portal:</p>
<iframe src="https://www.microsoft.com/en-us/videoplayer/embed/RE4Ubfe?postJsllMsg=true" frameborder="0" allowfullscreen="true" data-linktype="external" title="Video Player" style="box-sizing: inherit; outline-color: inherit; margin: 0px; padding: 0px; border: 0px; width: 640px; height: 360px; position: absolute; inset: 0px;"></iframe>



















<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>In this module, you have learned how to troubleshoot common backup and restore issues when working in Azure.</p>
<p>Now that you have completed this module, you’ll be able to:</p>
<ul>
<li>Review the status of a backup job, manage alerts, and review logs.</li>
<li>Troubleshoot backing up and restoring a virtual machine (VM).</li>
<li>Troubleshoot Microsoft Azure Recovery Services backups.</li>
<li>Troubleshoot backing up and restoring servers.</li>
<li>Troubleshoot Azure to Azure Site Recovery.</li>
<li>Troubleshoot site recovery with Hyper-V, SCCM, and VMware.</li>
</ul>
<h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><p>Use these resources to discover more.</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-center-support-matrix">Support matrix for Backup center</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-center-monitor-operate">Monitor and operate backups using Backup Center - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/monitoring-and-alerts-overview">Monitoring and reporting solutions for Azure Backup - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-monitoring-use-azuremonitor">Monitor Azure Backup with Azure Monitor - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-monitoring-built-in-monitor">Monitor Azure Backup protected workloads - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/azure-policy-configure-diagnostics">Configure Vault Diagnostics settings at scale - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-monitoring-built-in-monitor">Monitoring Azure Backup workloads</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-action-rules?tabs=portal">Alert processing rules for Azure Monitor alerts - Azure Monitor | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-mabs-troubleshoot">Troubleshoot Azure Backup Server - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout">Troubleshoot Agent and extension issues - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-mars-troubleshoot">Troubleshoot the Azure Backup agent - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/site-recovery/hyper-v-azure-troubleshoot">Troubleshoot Hyper-V disaster recovery with Azure Site Recovery - Azure Site Recovery | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/site-recovery/azure-to-azure-troubleshoot-replication">Troubleshoot replication of Azure VMs with Azure Site Recovery - Azure Site Recovery | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/site-recovery/vmware-azure-troubleshoot-replication">Troubleshoot replication issues for disaster recovery of VMware VMs and physical servers to Azure by using Azure Site Recovery - Azure Site Recovery | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-vm-file-recovery-troubleshoot">Troubleshoot Azure VM file recovery - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-vms-troubleshoot">Troubleshoot backup errors with Azure VMs - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-troubleshoot-slow-backup-performance-issue">Troubleshoot slow backup of files and folders - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/mem/configmgr/core/servers/manage/recover-sites">Site recovery - Configuration Manager | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/mem/configmgr/core/servers/deploy/configure/sql-server-alwayson-for-a-highly-available-site-database">Prepare to use an availability group - Configuration Manager | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-support-matrix-iaas">Support matrix for Azure VM backup - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/microsoft-azure-backup-server-protection-v3">Azure Backup Server V3 RTM protection matrix</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-mabs-protection-matrix">MABS (Azure Backup Server) V3 UR1 (and later) protection matrix</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/site-recovery/site-recovery-overview">About Azure Site Recovery - Azure Site Recovery | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-vms-introduction">About Azure VM backup - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-file-folder-backup-faq">Microsoft Azure Recovery Services (MARS) Agent – FAQ - Azure Backup | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/site-recovery/vmware-azure-tutorial">Set up VMware VM disaster recovery to Azure with Azure Site Recovery - Classic - Azure Site Recovery | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/site-recovery/hyper-v-azure-support-matrix">Support for disaster recovery of Hyper-V VMs to Azure with Azure Site Recovery - Azure Site Recovery | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/site-recovery/hyper-v-prepare-on-premises-tutorial">Prepare for disaster recovery of Hyper-V VMs to Azure with Azure Site Recovery - Azure Site Recovery | Microsoft Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/site-recovery/azure-to-azure-about-networking">Network virtual appliance configuration</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-arm-vms-prepare">Back up Azure VMs in a Recovery Services vault - Azure Backup | Microsoft Docs</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>AZ-720-Troubleshoot-cloud-and-hybrid-connectivity-in-Microsoft-Azure-3</title>
    <url>/2022/11/14/AZ-720-Troubleshoot-cloud-and-hybrid-connectivity-in-Microsoft-Azure-3/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Completed100 XP</p>
<ul>
<li>2 minutes</li>
</ul>
<p>As a network engineer, you will be called on to manage different network configurations to support your organization’s needs. Microsoft ExpressRoute is a fast connection to Azure that extends an organization’s network to take advantage of Azure’s scale and agility. Azure virtual networks can be connected by peering in the same region, or globally in different regions. Azure Virtual WAN is a networking service that brings many networking, security, and routing functionalities together to provide a single operational interface. Together, they allow you to provide the right level of connectivity and performance for your needs.</p>
<h2 id="Learning-objectives"><a href="#Learning-objectives" class="headerlink" title="Learning objectives"></a>Learning objectives</h2><p>By the end of this module, you will be able to:</p>
<ul>
<li>Troubleshoot ExpressRoute connectivity.</li>
<li>Troubleshoot virtual network connectivity.</li>
<li>Troubleshoot WAN issues.</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Demonstrate an understanding of the OSI model.</li>
<li>Demonstrate an understanding of Azure CLI.</li>
<li>Demonstrate an understanding of PowerShell.</li>
<li>Know how to run Cloud Shell to run commands.</li>
</ul>
<h1 id="Set-up-a-troubleshooting-environment"><a href="#Set-up-a-troubleshooting-environment" class="headerlink" title="Set up a troubleshooting environment"></a>Set up a troubleshooting environment</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p> Important</p>
<p>You need your own <a href="https://azure.microsoft.com/free/">Azure subscription</a> to complete the exercises in this module. If you don’t have an Azure subscription, you can still view the demonstration video in the exercise unit.</p>
<p>You’ll troubleshoot a name resolution problem in a later exercise. Use the following instructions and the Azure Cloud Shell on the right of the screen to create the environment for this exercise.</p>
<p> Note</p>
<p>The resource group [sandbox resource group name] has been created automatically. Use this as your resource group name. You won’t have permission to create additional resource groups in the sandbox.</p>
<p>In the sandbox to the right, follow these steps:</p>
<h2 id="Create-the-exercise-environment"><a href="#Create-the-exercise-environment" class="headerlink" title="Create the exercise environment"></a>Create the exercise environment</h2><p>Using the Cloud Shell on the right, run these commands to create the example topology. The environment will take approximately 13 minutes to build.</p>
<ol>
<li><p>Clone the set up script from GitHub.</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/MicrosoftDocs/mslearn<span class="literal">-cloud-hybrid-connectivity</span> networking</span><br></pre></td></tr></table></figure>
</li>
<li><p>Run the set up script.</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">networking/setup.ps1</span><br></pre></td></tr></table></figure>
</li>
<li><p>The script will create all the resources. Wait until it completes, you should see a Lab Environment Created message.</p>
</li>
<li><p>You can continue to the next unit as this command runs in the background.</p>
</li>
</ol>
<h1 id="Troubleshoot-ExpressRoute-connectivity"><a href="#Troubleshoot-ExpressRoute-connectivity" class="headerlink" title="Troubleshoot ExpressRoute connectivity"></a>Troubleshoot ExpressRoute connectivity</h1><p>Completed100 XP</p>
<ul>
<li>8 minutes</li>
</ul>
<p>ExpressRoute works over a private fiber-optic connection to provide a faster connection to Azure compared to connecting directly over the internet. In this unit, you will learn how to troubleshoot issues you might encounter with ExpressRoute connectivity.</p>
<p>The following diagram shows connectivity between your network (Customer network) and Azure (Microsoft Datacenter):</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-connectivity.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-connectivity.png" alt="Screenshot showing connectivity between your network (Customer network) and Azure (Microsoft Datacenter)."></a></p>
<p>Before you can use ExpressRoute, you must have an active Microsoft Azure account.</p>
<p>If you also want to connect to Microsoft 365 services, you will need at least one Microsoft 365 account. However, Microsoft 365 is optimized for connecting over the internet, so is only recommended for specific cases.</p>
<p>You will also need to work with a service provider to manage the private connection.</p>
<table>
<thead>
<tr>
<th align="left">Subscription required</th>
<th align="left">Microsoft Azure only</th>
<th align="left">Microsoft Azure and Microsoft 365</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Microsoft Azure account</td>
<td align="left">Recommended</td>
<td align="left">Recommended</td>
</tr>
<tr>
<td align="left">Microsoft 365</td>
<td align="left"><strong>Not Recommended</strong></td>
<td align="left">Recommended</td>
</tr>
</tbody></table>
<h2 id="Gateways-and-SKUs"><a href="#Gateways-and-SKUs" class="headerlink" title="Gateways and SKUs"></a>Gateways and SKUs</h2><p>ExpressRoute uses a virtual gateway to connect your Azure virtual network with your on-premises network.</p>
<p>A virtual network gateway is two or more VMs that are a deployed to a <strong>gateway subnet</strong>. The gateway VMs contain routing tables and run specific gateway services.</p>
<p>There are two types of gateway—VPN and ExpressRoute. VPN gateways send encrypted traffic across the internet. ExpressRoute gateways send traffic across a private, unencrypted connection. When configuring the gateway, you need to specify the type as: <strong>ExpressRoute</strong>.</p>
<p>Each virtual network can have one gateway for each type, so you can configure:</p>
<ul>
<li>A virtual network gateway for VPN traffic: type <strong>Vpn</strong>.</li>
<li>A virtual network gateway for ExpressRoute traffic: type <strong>ExpressRoute</strong>.</li>
</ul>
<p>You can also configure the gateway SKU that you want to use. SKUs refer to the bandwidth that is allocated to the gateway. A higher gateway SKU allows more CPUs and network bandwidth throughput. ExpressRoute gateways support the following SKUs:</p>
<ul>
<li>Standard</li>
<li>HighPerformance</li>
<li>UltraPerformance</li>
<li>ErGw1Az</li>
<li>ErGw2Az</li>
<li>ErGw3Az</li>
</ul>
<p>To upgrade a gateway SKU, you can use the following PowerShell cmdlet:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Resize-AzVirtualNetworkGateway</span></span><br></pre></td></tr></table></figure>

<p>Alternatively, change the configuration in the <strong>Azure portal virtual network gateway</strong> configuration pane. The following upgrades are supported:</p>
<ul>
<li>Standard to High Performance</li>
<li>Standard to Ultra Performance</li>
<li>High Performance to Ultra Performance</li>
<li>ErGw1Az to ErGw2Az</li>
<li>ErGw1Az to ErGw3Az</li>
<li>ErGw2Az to ErGw3Az</li>
<li>Default to Standard</li>
</ul>
<p>The following downgrades are supported:</p>
<ul>
<li>High Performance to Standard</li>
<li>ErGw2Az to ErGw1Az</li>
</ul>
<p>If the upgrade or downgrade you require is not supported, delete and recreate the gateway.</p>
<p>Before you can create an ExpressRoute gateway, you must establish a gateway subnet that contains the IP addresses for the subnet.</p>
<p>In the Azure portal, select your virtual network, select <strong>Subnets</strong>, and then select <strong>Create Gateway Subnet</strong>. When you configure the IP address range for your gateway subnet, a configuration with an ExpressRoute gateway and a VPN gateway coexisting will need a large gateway subnet. You should also ensure that the gateway subnet contains enough IP addresses to include future additional configurations. Microsoft recommends a gateway subnet of &#x2F;27 or larger (&#x2F;27, &#x2F;26 and so on).</p>
<ul>
<li>The gateway subnet is used for ExpressRoute only. Do not assign anything else to the gateway subnet.</li>
<li>It must be named <strong>GatewaySubnet</strong>.</li>
<li>User-defined routes with a 0.0.0.0&#x2F;0 destination are not supported.</li>
<li>NSGs on the GatewaySubnet are not supported.</li>
<li>Set the <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview">BGP Route Propagation</a> to <strong>Enabled</strong>. If this is set to <strong>Disabled</strong>, the gateway will not function.</li>
</ul>
<p>When you create your virtual network gateway, gateway VMs are deployed to the gateway subnet and configured with the required ExpressRoute gateway settings.</p>
<p> Note</p>
<p>It can take up to 45 minutes for the gateway to be created and ready for use.</p>
<h2 id="Determine-whether-an-ExpressRoute-circuit-is-operational"><a href="#Determine-whether-an-ExpressRoute-circuit-is-operational" class="headerlink" title="Determine whether an ExpressRoute circuit is operational"></a>Determine whether an ExpressRoute circuit is operational</h2><p>In the Azure portal, view existing ExpressRoute circuits by selecting <strong>All services</strong> &gt; <strong>Networking</strong> &gt; <strong>ExpressRoute</strong> circuits from the left menu.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-expressroute-circuits.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-expressroute-circuits.png" alt="Screenshot of Expressroute circuits settings."></a></p>
<p>All ExpressRoute circuits created in the subscription will appear here.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-expressroute-circuit-list.png" alt="Screenshot of Expressroute circuits list."></p>
<p>To make the circuit operational, you must send the service key to the service provider. Each service key is specific to one circuit. Select the relevant circuit, and on the <strong>Overview</strong> page find the service key field for your provider.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-service-key-field.png" alt="Screenshot of service key field."></p>
<p>The <strong>Provider status</strong> displays the state of provisioning on the service-provider side.</p>
<p><strong>Circuit status</strong> displays the state of provisioning on the Microsoft side.</p>
<p>When you create a new ExpressRoute circuit, the circuit is in the following state:</p>
<p>Provider status: <strong>Not provisioned</strong> Circuit status: <strong>Enabled</strong></p>
<p>The circuit changes when the service provider is provisioning it for you:</p>
<p>Provider status: <strong>Provisioning</strong> Circuit status: <strong>Enabled</strong></p>
<p>The ExpressRoute circuit is operational when it is in the following state:</p>
<p>Provider status: <strong>Provisioned</strong> Circuit status: <strong>Enabled</strong></p>
<p>You can also check the provisioning status using the Azure PowerShell cmdlet:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-AzExpressRouteCircuit</span> <span class="literal">-ResourceGroupName</span> <span class="string">&quot;Test-Resource&quot;</span> <span class="literal">-Name</span> <span class="string">&quot;Test-Circuit&quot;</span></span><br></pre></td></tr></table></figure>

<p>The output shows both the circuit provisioning state, and the service provider provisioning state.</p>
<p>If the <strong>Circuit status</strong> is stuck at <strong>Not Enabled</strong>, contact <a href="https://portal.azure.com/">Microsoft Support</a>.</p>
<p>If the <strong>Provider status</strong> is stuck at <strong>Not Provisioned</strong>, contact your service provider.</p>
<h2 id="Validate-the-peering-configuration-for-the-circuit"><a href="#Validate-the-peering-configuration-for-the-circuit" class="headerlink" title="Validate the peering configuration for the circuit"></a>Validate the peering configuration for the circuit</h2><p>Each ExpressRoute circuit can have Azure private peering, and Microsoft peering. Azure private peering is traffic to private virtual networks in Azure. Microsoft peering is traffic to public endpoints of PaaS and SaaS.</p>
<p>The peerings are configured by your service provider. If the peering in the portal is still blank, try using refresh to pull through the current routing configuration from your circuit.</p>
<p>The status of an ExpressRoute circuit peering can be checked in the Azure portal, on the ExpressRoute Circuit <strong>Overview</strong> page. Any ExpressRoute peerings are displayed under the <strong>Peerings</strong> section.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-peerings.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-peerings.png" alt="Screenshot of Expressroute peerings."></a></p>
<p>In the screenshot above, Azure private peering is provisioned, but Azure public and Microsoft peerings are not. A successfully provisioned peering would also have the primary and secondary point-to-point subnets listed.</p>
<p>If enabling a peering fails, check if the primary and secondary subnets assigned match the configuration on the linked CE&#x2F;PE-MSEE. Also check if the correct VlanId, AzureASN, and PeerASN are used on MSEEs and if these values map to the ones used on the linked CE&#x2F;PE-MSEE. If MD5 hashing is chosen, the shared key should be the same on MSEE and PE-MSEE&#x2F;CE pair. For security reasons, the previously configured shared key would not be displayed.</p>
<p> Note</p>
<p>The <strong>Peering Location</strong> indicates the <a href="https://learn.microsoft.com/en-us/azure/expressroute/expressroute-locations">physical location</a> where you are peering with Microsoft. The Location property indicates where the Azure Network Resource Provider is located. It is good practice to choose a Network Resource Provider geographically close to the Peering Location of the circuit.</p>
<p>You can also test your private peering connectivity by counting packets arriving and leaving the Microsoft Enterprise Edge (MSEE) devices. This tool will allow you to confirm connectivity by answering the questions such as:</p>
<ul>
<li>Are my packets getting to Azure?</li>
<li>Are they getting back to my on-premises network?</li>
</ul>
<p>To access this diagnostic tool from the Azure portal, select your ExpressRoute circuit, and then select <strong>Diagnose and solve problems</strong>.</p>
<h2 id="Validate-that-routes-are-live-and-configured-correctly"><a href="#Validate-that-routes-are-live-and-configured-correctly" class="headerlink" title="Validate that routes are live and configured correctly"></a>Validate that routes are live and configured correctly</h2><p>You can validate that routes are live and configurated correctly by testing peering connectivity. Count the packets arriving and leaving the edge of your ExpressRoute circuit, on the Microsoft Enterprise Edge (MSEE) devices. This diagnostic tool works by applying an Access Control List (ACL) to the MSEE to count the number of packets that hit specific ACL rules. Using this tool will allow you to confirm the connectivity is working as expected.</p>
<ol>
<li><p>To access this diagnostic tool, select <strong>Diagnose and solve problems</strong> from your ExpressRoute circuit in the Azure portal.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-diagnose-solve-problems.png" alt="Screenshot showing the diagnose and solve problems from the ExpressRoute circuit in the Azure portal."></p>
</li>
<li><p>Select the <strong>Connectivity issues</strong>, under <strong>Common Problems</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-connectivity-issues.png" alt="Screenshot of connectivity issues."></p>
</li>
<li><p>In the dropdown for <strong>Tell us more about the problem you’re experiencing</strong>, select <strong>Connectivity to Azure Private, Azure Public, or Dynamics 365 services</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-connectivity-azure.png" alt="Screenshot showing connection to Azure Private, Azure Public, or Dynamics 365 services."></p>
</li>
<li><p>Scroll down to the <strong>Test your private peering connectivity</strong> section and expand it.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-test-private-peering-connectivity.png" alt="Screenshot showing Testing of private peering connectivity."></p>
</li>
<li><p>Execute the <a href="https://learn.microsoft.com/en-us/sysinternals/downloads/psping">PsPing</a> test from your on-premises IP address to your Azure IP address and keep it running during the connectivity test.</p>
</li>
<li><p>Fill out the fields of the form, making sure to enter the same on-premises and Azure IP addresses used previously. Select <strong>Submit</strong> and wait for the results. When your results are ready, review the information for interpreting them below.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-connectivity-test.png" alt="Screenshot of connectivity test."></p>
<p>You’ll have two sets of results for the primary and secondary MSEE devices. Review the number of matches in and out and use the following scenarios to interpret the results:</p>
<ul>
<li><strong>You see packet matches sent and received on both MSEEs</strong>: This indicates healthy traffic inbound to and outbound from the MSEE on your circuit. If loss is occurring either on-premises or in Azure, it’s happening downstream from the MSEE.</li>
<li><strong>If testing PsPing from on-premises to Azure (received) results show matches, but sent results show NO matches</strong>: This indicates that traffic is getting inbound to Azure but isn’t returning to on-premises. Check for return path routing issues. Check whether you are advertising the appropriate prefixes to Azure. Check if there is an UDR overriding prefixes.</li>
<li><strong>If testing PsPing from Azure to on-premises (sent) results show NO matches, but (received) results show matches</strong>: This indicates that traffic is getting to on-premises, but not getting back. You should work with your provider to find out why traffic isn’t being routed to Azure via your ExpressRoute circuit.</li>
<li><strong>One MSEE shows NO matches, while the other shows good matches</strong>: This indicates that one MSEE isn’t receiving or passing any traffic. Check whether it is offline, for example, BGP&#x2F;ARP down.</li>
</ul>
</li>
</ol>
<p>Example:</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">src 10.0.0.0 dst 20.0.0.0 dstport 3389 (received): 120 matches</span><br><span class="line">src 20.0.0.0 srcport 3389 dst 10.0.0.0 (sent): 120 matches</span><br></pre></td></tr></table></figure>

<p>This test result has the following properties:</p>
<ul>
<li>IP Port: <strong>3389</strong></li>
<li>On-premises IP Address CIDR: <strong>10.0.0.0</strong></li>
<li>Azure IP Address CIDR: <strong>20.0.0.0</strong></li>
</ul>
<h2 id="Reset-an-ExpressRoute-circuit"><a href="#Reset-an-ExpressRoute-circuit" class="headerlink" title="Reset an ExpressRoute circuit"></a>Reset an ExpressRoute circuit</h2><p>When an operation on an ExpressRoute circuit doesn’t complete successfully, the circuit might go into a “failed” state. You can reset a failed ExpressRoute circuit using Azure PowerShell. You will need the latest version of the Azure Resource Manager PowerShell cmdlets.</p>
<ol>
<li><p>Open your PowerShell console with elevated privileges and connect to your account. Use the following example to help you connect:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-AzAccount</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>If you’ve multiple Azure subscriptions, check the subscriptions for the account.</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-AzSubscription</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Specify the subscription that you want to use.</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Select-AzSubscription</span> <span class="literal">-SubscriptionName</span> <span class="string">&quot;Replace_with_your_subscription_name&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Run the following commands to reset a circuit that is in a failed state:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ckt</span> = <span class="built_in">Get-AzExpressRouteCircuit</span> <span class="literal">-Name</span> <span class="string">&quot;ExpressRouteARMCircuit&quot;</span> <span class="literal">-ResourceGroupName</span> <span class="string">&quot;ExpressRouteResourceGroup&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Set-AzExpressRouteCircuit</span> <span class="literal">-ExpressRouteCircuit</span> <span class="variable">$ckt</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>The circuit should now be reset.</p>
<h2 id="Troubleshoot-asymmetric-routing-issues"><a href="#Troubleshoot-asymmetric-routing-issues" class="headerlink" title="Troubleshoot asymmetric routing issues"></a>Troubleshoot asymmetric routing issues</h2><p>Asymmetric routing is when the return network traffic takes a different path from the original outgoing flow. For example, if you’ve an internet path and a private path that goes to the same destination. It also happens when you’ve multiple private paths connected to the same destination.</p>
<p>Traceroute is the best way to make sure that your network traffic is traversing the expected path.</p>
<p>When you connect through Azure ExpressRoute, you’ve multiple links to Microsoft. You have your existing internet connection, and the ExpressRoute connection. Traffic destined for Microsoft might go through the internet connection but return through the ExpressRoute connection. Alternatively, traffic could go through ExpressRoute but return over the internet path.</p>
<p>You receive more specific IP addresses from the ExpressRoute circuit. So, when traffic from your network goes to Microsoft for services offered through ExpressRoute, traffic will be routed to the ExpressRoute connection.</p>
<p>There are two options when solving asymmetric routing—using routing, or by using source-based NAT (SNAT).</p>
<p>With the routing option, advertise your public IP addresses to appropriate wide area network (WAN) links. As an example, to use the internet for authentication traffic and ExpressRoute for mail traffic would require that you don’t advertise your Active Directory Federation Services (AD FS) public IP addresses over ExpressRoute. Also, be sure not to expose your on-premises AD FS server to IP addresses that the router receives over ExpressRoute. Routes received over ExpressRoute are more specific, so they make ExpressRoute the preferred path for authentication traffic to Microsoft.</p>
<p>To use ExpressRoute for authentication, advertise AD FS public IP addresses over ExpressRoute without NAT. This sends the traffic that originates from Microsoft through ExpressRoute to your on-premises AD FS server. The return traffic from your network that goes to Microsoft will use ExpressRoute because it’s the preferred route over the internet.</p>
<p>Alternatively, use SNAT to prevent asymmetric routing. For example, if you want to send SMTP traffic over the internet, do not advertise the public IP address of an on-premises SMTP server through ExpressRoute.</p>
<p>A request originating from Microsoft that goes to your on-premises SMTP server traverses the internet. You SNAT the incoming request to an internal IP address. The return traffic from the SMTP server will go to the edge firewall (which you use for NAT) instead of through ExpressRoute, ensuring that the return traffic will take the internet path.</p>
<h2 id="Troubleshoot-route-filtering"><a href="#Troubleshoot-route-filtering" class="headerlink" title="Troubleshoot route filtering"></a>Troubleshoot route filtering</h2><p>When you configure peering on your ExpressRoute circuit, the edge routers establish a pair of Border Gateway Protocol (BGP) sessions with the edge routers through your connectivity provider. At this point, no routes are advertised to your network. To enable route advertisements to your network, you must configure a route filter.</p>
<p>A route filter lets you identify services you want to consume. It’s a list of allowed BGP community values. Once a route filter resource is defined and attached to an ExpressRoute circuit, all prefixes that map to the BGP community values get advertised to your network.</p>
<p>You must have authorization to consume Microsoft 365 services through ExpressRoute to attach route filters with Microsoft 365 services. If you don’t have this authorization, the operation will fail.</p>
<p>BGP community values associated with services accessible through Microsoft peering is available here: <a href="https://learn.microsoft.com/en-us/azure/expressroute/expressroute-routing">ExpressRoute routing requirements</a>.</p>
<p>A route filter can have only one rule, and it must be of type <strong>Allow</strong>. You can associate a list of BGP community values associated with the rule.</p>
<p>Create a filter rule:</p>
<ul>
<li><p>To add and update rules, select the <strong>manage rule</strong> tab for your route filter.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-manage-rule.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-manage-rule.png" alt="Screenshot of Manage rule tab."></a></p>
</li>
<li><p>From the dropdown list, select the allowed service communities you want to connect to. Save the rule when you’ve finished.</p>
</li>
</ul>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-rule-settings.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-rule-settings.png" alt="Screenshot of Rule settings."></a></p>
<h2 id="Troubleshoot-redundant-configurations"><a href="#Troubleshoot-redundant-configurations" class="headerlink" title="Troubleshoot redundant configurations"></a>Troubleshoot redundant configurations</h2><p>Each ExpressRoute circuit has a redundant pair of cross connections to ensure high availability. If one of the cross connections fails, you do not lose connectivity. The redundant connection provides connectivity, and high availability.</p>
<p>Each Azure VPN gateway is made up of two instances, both of which are in an active-standby state. When maintenance or unplanned disruption happens to the active instance, the standby instance would take over (fail over) automatically.</p>
<h2 id="Troubleshoot-route-updates"><a href="#Troubleshoot-route-updates" class="headerlink" title="Troubleshoot route updates"></a>Troubleshoot route updates</h2><p>Network routing is the way that network traffic determines its path to reach a destination. Route tables are used to help determine routing paths by listing network topology information. If your virtual network contains a network virtual appliance (NVA), you must manually configure and update your route tables.</p>
<p>Azure Route Server allows you to configure, maintain, and deploy NVAs in your virtual network. Route Server also keeps virtual network address information up-to-date. Route Server eliminates the administrative overhead of maintaining route tables.</p>
<p>Alternatively, you can define static routes that override Azure’s default routes. Or you can add additional routes to a subnet’s route table. You produce custom routes by either creating <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview">user-defined</a> routes, or by exchanging <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview">border gateway protocol</a> (BGP) routes between your on-premises network gateway and an Azure virtual network gateway.</p>
<p>To troubleshoot route updates, try the following:</p>
<ul>
<li>Do not deploy a virtual appliance in the same subnet as the route table that routes traffic through it. This can result in routing loops, which means that traffic never leaves the subnet.</li>
<li>Ensure a next hop private IP address has direct connectivity without routing through ExpressRoute Gateway or Virtual WAN. Setting the next hop to an IP address without direct connectivity results in an invalid user-defined routing configuration.</li>
</ul>
<h2 id="Identify-the-root-cause-for-ExpressRoute-latency-issues"><a href="#Identify-the-root-cause-for-ExpressRoute-latency-issues" class="headerlink" title="Identify the root cause for ExpressRoute latency issues"></a>Identify the root cause for ExpressRoute latency issues</h2><p>To troubleshoot latency issues with ExpressRoute, the Azure Connectivity Toolkit includes a tool called iPerf.</p>
<p>You use iPerf for basic performance tests, by copying the files to a directory on the host. To test performance, follow these steps:</p>
<ol>
<li><p>Install the PowerShell Module.</p>
<p>ConsoleCopy</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">(new-object Net.WebClient).DownloadString(&quot;https://aka.ms/AzureCT&quot;) | Invoke-Expression</span><br></pre></td></tr></table></figure>

<p>This command downloads the PowerShell module and installs it locally.</p>
</li>
<li><p>Install the supporting applications.</p>
<p>ConsoleCopy</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">Install-LinkPerformance</span><br></pre></td></tr></table></figure>

<p>This AzureCT command installs iPerf and PSPing in a new directory, “C:\ACTTools”. It also opens the Windows Firewall ports to allow ICMP and port 5201 (iPerf) traffic.</p>
</li>
<li><p>Run the performance test.</p>
<p>First, on the remote host, you must install and run iPerf in server mode. Ensure the remote host is listening on either 3389 (RDP for Windows) or 22 (SSH for Linux) and allowing traffic on port 5201 for iPerf. If the remote host is Windows, install the AzureCT and run the Install-LinkPerformance command. The command will set up iPerf and the necessary firewall rules.</p>
<p>When the remote machine is ready, open PowerShell on the local machine and start the test:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-LinkPerformance</span> <span class="literal">-RemoteHost</span> <span class="number">10.0</span>.<span class="number">0.1</span> <span class="literal">-TestSeconds</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>This command runs a series of concurrent load and latency tests to help estimate the bandwidth capacity and latency of your network link.</p>
</li>
<li><p>Review the output of the tests.</p>
</li>
</ol>
<p>The detailed results of iPerf tests are in individual text files in the AzureCT tools directory at “C:\ACTTools.”</p>
<p>The PowerShell output format looks similar to:</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/3-powershell-output.png" alt="Screenshot of PowerShell output of test."></p>
<p>If the performance test doesn’t give the results you expected results, use a step-by-step process to resolve the issue.</p>
<p>First, challenge your assumptions. If you’ve a 1Gbps ExpressRoute circuit and 100ms of latency, it’s not reasonable to expect the full 1Gbps of traffic, given the characteristics of TCP over high latency links.</p>
<p>Second, start at the edges between routing domains to try to isolate the problem to a single major routing domain. You can start at the Corporate Network, the WAN, or the Azure Network. Make sure you’ve reasonable cause to contact your service provider or ISP, as this is outside your control. It could delay a fix that is under your control.</p>
<p>When you’ve identified the major routing domain that appears to contain the problem, create a diagram. Seeing the area in a diagram allows you to work methodically by planning points to test. Divide the network into segments to narrow down the problem and update the diagram as you get results.</p>
<p>Also, don’t forget to look at other layers of the OSI model. It’s easy to focus on the network and layers 1-3 (Physical, Data, and Network) but the problem could be at Layer 7 in the application layer. Keep an open mind and verify assumptions.</p>
<p> Note</p>
<p>Geographic latency between endpoints is the largest component of latency. Equipment latency that has, for example, physical and virtual components, and number of hops, is involved. But geography has been shown to have a greater impact on overall latency when dealing with WAN connections. Remember that the distance of the fiber run is not the straight-line or roadmap distance. Use a city distance calculator which, although inaccurate, is good enough.</p>
<h1 id="Troubleshoot-virtual-network-connectivity-in-Microsoft-Azure"><a href="#Troubleshoot-virtual-network-connectivity-in-Microsoft-Azure" class="headerlink" title="Troubleshoot virtual network connectivity in Microsoft Azure"></a>Troubleshoot virtual network connectivity in Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>7 minutes</li>
</ul>
<h2 id="Determine-whether-traffic-is-allowed-between-peers"><a href="#Determine-whether-traffic-is-allowed-between-peers" class="headerlink" title="Determine whether traffic is allowed between peers"></a>Determine whether traffic is allowed between peers</h2><p>Peering lets you connect two or more virtual networks in Azure. The traffic between the virtual networks is routed through Microsoft’s backbone infrastructure, not through a gateway or over the public internet. There are two types of peering in Azure:</p>
<ul>
<li><strong>Virtual network peering</strong> – connecting virtual networks within the same Azure region.</li>
<li><strong>Global virtual network peering</strong> – connecting virtual networks in different Azure regions.</li>
</ul>
<p>Global virtual network peering has the following constraints:</p>
<ul>
<li>Resources in one virtual network can’t communicate with the front-end IP address of a Basic Internal Load Balancer (ILB) in a globally peered virtual network.</li>
<li>Some services that use a Basic load balancer don’t work over global virtual network peering.</li>
<li>You can’t peer across clouds.</li>
<li>The virtual networks you peer must have non-overlapping IP address spaces.</li>
<li>When two virtual networks are peered, you can’t add or delete address ranges from a virtual network’s address space. To add or remove address ranges, delete the peering, add or remove the address ranges, then recreate the peering.</li>
<li>You can’t peer two virtual networks created through the classic deployment model.</li>
<li>Azure inbuilt name resolution won’t resolve names in peered virtual networks. To resolve names in other virtual networks, you must use Azure private zones, or a custom DNS Server.</li>
<li>A virtual network can be peered to another virtual network, and also be connected to it, with an Azure virtual network gateway. When virtual networks are connected through both peering and a gateway, traffic between the virtual networks flows through the peering configuration, rather than the gateway.</li>
<li>Point-to-site VPN clients must be downloaded again after virtual network peering has been successfully configured, to ensure the new routes are downloaded to the client.</li>
</ul>
<p>To troubleshoot connectivity between peers, do the following:</p>
<ol>
<li>Check the status of the peering connection:<ul>
<li><strong>Initiated</strong> indicates that you do not have a bidirectional link. For example, to peer VNetA to VNetB, two links must be created, one from VNetA to VNetB and another from VNetB to VNetA. Creating both links will change the state to <strong>Connected</strong>.</li>
<li><strong>Disconnected</strong> indicates that one of the links was deleted. To re-establish a peering connection, you will need to delete and recreate both links.</li>
</ul>
</li>
<li>Check that two VNets do not have matching or overlapping address ranges.</li>
</ol>
<h2 id="Troubleshoot-VPN-gateway-transit-issues"><a href="#Troubleshoot-VPN-gateway-transit-issues" class="headerlink" title="Troubleshoot VPN gateway transit issues"></a>Troubleshoot VPN gateway transit issues</h2><p><a href="https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/virtual-network/virtual-network-peering-overview.md">Gateway transit</a> is a peering property that allows a virtual network to use the VPN gateway in the peered virtual network for VNet-to-VNet connectivity. In the following diagram, you can see how gateway transit works with virtual network peering:</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/4-gateway-transit.png" alt="Diagram of gateway transit with virtual network peering."></p>
<p>The following constraints apply when virtual networks are globally peered:</p>
<ul>
<li>Resources in one virtual network can’t communicate with the front-end IP address of a Basic ILB in a globally peered virtual network.</li>
<li>Some services that use a Basic load balancer don’t work over global virtual network peering. For further details, see <a href="https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/virtual-network/virtual-networks-faq.md">What are the constraints related to Global VNet Peering and Load Balancers?</a></li>
</ul>
<p>To troubleshoot VPN gateway transit issues, try the following:</p>
<ul>
<li>If the spoke virtual network already has a VPN gateway, the <strong>Use remote gateway</strong> option isn’t supported on the spoke virtual network due to a peering limitation.</li>
<li>For a hub-spoke network connectivity issue between spoke virtual networks in the same region, the hub network must include an NVA. Configure UDRs in spokes that have an NVA set as the next hop and enable <strong>Allow forwarded traffic</strong> in the hub virtual network.</li>
</ul>
<h2 id="Troubleshoot-transitivity-between-peers"><a href="#Troubleshoot-transitivity-between-peers" class="headerlink" title="Troubleshoot transitivity between peers"></a>Troubleshoot transitivity between peers</h2><p>Transitive peering is when you:</p>
<ul>
<li>Peer VNetA to VNetB.</li>
<li>Peer VNetB to VNetC.</li>
<li>By default, VNetA is not peered with VNetC.</li>
</ul>
<p>To achieve peering between VNetA and VNetC, you must peer them together. Alternatively, use a hub-and-spoke configuration and go through an NVA in the hub.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/4-virtual-network-peering.png" alt="Screenshot showing all v nets peered to each other."></p>
<h2 id="Troubleshoot-hub-and-spoke-VNet-configurations"><a href="#Troubleshoot-hub-and-spoke-VNet-configurations" class="headerlink" title="Troubleshoot hub-and-spoke VNet configurations"></a>Troubleshoot hub-and-spoke VNet configurations</h2><p>With a hub-and-spoke configuration, the hub virtual network acts as a central point of connectivity to many spoke virtual networks. The hub can also be used as the connectivity point to your on-premises networks. The spoke virtual networks peer with the hub and can be used to isolate workloads.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/4-hub-spoke.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/4-hub-spoke.png" alt="Screenshot showing Hub-and-spoke configuration."></a></p>
<p>Here’s how to troubleshoot connectivity between a hub-spoke virtual network and an on-premises resource.</p>
<p>If your network uses a third-party NVA, check for the following:</p>
<ul>
<li>Software updates.</li>
<li>Service Account setup and functionality.</li>
<li>User-defined routes (UDRs) on virtual network subnets that direct traffic to NVA.</li>
<li>UDRs on virtual network subnets that direct traffic from NVA.</li>
<li>Routing tables and rules within the NVA (for example, from NIC1 to NIC2).</li>
<li>Tracing on NVA NICs to verify receiving and sending network traffic.</li>
<li>When using a Standard SKU and Public IPs, there must be an NSG created and an explicit rule to allow the traffic to be routed to the NVA.</li>
<li>The minimum configuration for NVAs on Azure.</li>
</ul>
<p>If your network uses a VPN gateway, check for the following:</p>
<ul>
<li>The gateway must be in the virtual network in the Resource Manager model.</li>
</ul>
<p>If your network does not use a third-party NVA or VPN gateway, does the hub virtual network and the spoke virtual network have a VPN gateway? If the spoke virtual network already has a VPN gateway, the <strong>Use remote gateway</strong> option isn’t supported on the spoke virtual network. This is because of a virtual network peering limitation.</p>
<p>For site-to-site or Azure ExpressRoute connections, check the following causes of connectivity issues to the remote virtual network from on-premises:</p>
<ul>
<li>If the virtual network has a gateway, verify that the <strong>Allow forwarded traffic</strong> check box is selected.</li>
<li>If the virtual network doesn’t have a gateway, verify that the <strong>Use remote gateway</strong> check box is selected.</li>
<li>Ask your network administrator to check your on-premises devices to verify that they all have the remote virtual network address space added.</li>
</ul>
<p>For point-to-site connections:</p>
<ul>
<li>On the virtual network that has a gateway, verify that the <strong>Allow forwarded traffic</strong> check box is selected.</li>
<li>On the virtual network that doesn’t have a gateway, verify that the <strong>Use remote gateway</strong> check box is selected.</li>
<li>Download and reinstall the point-to-site client package. Virtual network routes that are newly peered don’t automatically add routes to point-to-site clients.</li>
</ul>
<h3 id="Troubleshoot-global-peering-connectivity"><a href="#Troubleshoot-global-peering-connectivity" class="headerlink" title="Troubleshoot global peering connectivity"></a>Troubleshoot global peering connectivity</h3><p>To troubleshoot a connectivity issue between peered virtual networks:</p>
<ol>
<li>Sign in to the Azure portal with an account that has the necessary roles and permissions.</li>
<li>Select the virtual network, select <strong>Peering</strong>, and then select the <strong>Status</strong> field.</li>
<li>If the status is <strong>Disconnected</strong>, delete the peering from both virtual networks, and then recreate them.</li>
<li>If the status is <strong>Connected</strong>, check the network traffic flows.</li>
</ol>
<p>Use <a href="https://learn.microsoft.com/en-us/azure/network-watcher/network-watcher-connectivity-overview">Connection Troubleshoot</a> and <a href="https://learn.microsoft.com/en-us/azure/network-watcher/network-watcher-ip-flow-verify-overview">IP flow verify</a> from the source VM to the destination VM to determine whether there is an NSG or UDR that is causing interference in traffic flows.</p>
<p>If you’re using a firewall or NVA:</p>
<ol>
<li>Document the UDR parameters so that you can restore them after this step is complete.</li>
<li>Remove the UDR from the source VM subnet or NIC that points to the NVA as the next hop. Verify connectivity from the source VM directly to the destination that is bypassing the NVA.</li>
<li>Take a network trace:</li>
</ol>
<ul>
<li>Start a network trace on the destination VM. For Windows, you can use <strong>Netsh</strong>. For Linux, use <strong>TCPDump</strong>. - Run <strong>TcpPing</strong> or <strong>PsPing</strong> from the source to the destination IP. This is an example of a <strong>TcpPing</strong> command:</li>
</ul>
<p>ConsoleCopy</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">tcping64.exe -t &lt;destination VM address&gt; 3389</span><br></pre></td></tr></table></figure>

<p>After the <strong>TcpPing</strong> is complete, stop the network trace on the destination. If packets arrive from the source, there is no networking issue. Examine both the VM firewall and the application listening on that port to locate the configuration issue.</p>
<p> Note</p>
<p>You can’t connect to the following resource types over global virtual network peering (virtual networks in different regions):</p>
<ul>
<li>VMs behind Basic ILB SKU</li>
<li>Redis cache (uses Basic ILB SKU)</li>
<li>Application gateway (uses Basic ILB SKU)</li>
<li>Scale sets (uses Basic ILB SKU)</li>
<li>Service Fabric clusters (uses Basic ILB SKU)</li>
<li>SQL Server Always On (uses Basic ILB SKU)</li>
<li>App Service Environment (uses Basic ILB SKU)</li>
<li>API Management (uses Basic ILB SKU)</li>
<li>Azure AD DS (uses Basic ILB SKU)</li>
</ul>
<p>For more information, see the <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview">requirements and constraints</a> of global peering.</p>
<h2 id="Troubleshoot-VNet-to-VNet-connections"><a href="#Troubleshoot-VNet-to-VNet-connections" class="headerlink" title="Troubleshoot VNet to VNet connections"></a>Troubleshoot VNet to VNet connections</h2><p>Do the following:</p>
<ul>
<li>Check that the gateways are configured using Dynamic routing and not Static routing. Static routing is not supported.</li>
<li>Check the number of VPN connections. For basic and standard dynamic routing gateways, the maximum number of VPN connections and VNets to which a particular VNet can connect to is currently 10. It is 30 for high performance gateways.</li>
<li>Check the address prefixes on both VNets to ensure there is no overlapping of address spaces between the two VNets.</li>
</ul>
<h2 id="Troubleshoot-service-chaining"><a href="#Troubleshoot-service-chaining" class="headerlink" title="Troubleshoot service chaining"></a>Troubleshoot service chaining</h2><p>Service chaining is the ability to send traffic from one virtual network to an NVA in a peered network via user-defined routes. In peered virtual networks, you configure user-defined routes that point to virtual machines as the next hop IP address. You will need to set up a route table and associate it to a subnet. For step-by-step instructions for routing network traffic, see <a href="https://learn.microsoft.com/en-us/azure/virtual-network/tutorial-create-route-table-portal">Tutorial: Route network traffic with a route table using the Azure portal</a>.</p>
<p>Using PowerShell, you can test the routing of network traffic using tracert:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">tracert myvmprivate</span><br></pre></td></tr></table></figure>

<p>This will display the tracing route, and you’ll see if the traffic is taking the route you anticipated. Tracert has a response similar to:</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Tracing route to myvmprivate.q04q2hv50taerlrtdyjz5nza1f.bx.internal.cloudapp.net [10.0.1.4] over a maximum of 30 hops:</span><br><span class="line"></span><br><span class="line">1     1 ms     *        2 ms  myvmnva.internal.cloudapp.net [10.0.2.4]</span><br><span class="line"></span><br><span class="line">2     2 ms     1 ms     1 ms  myvmprivate.internal.cloudapp.net [10.0.1.4]</span><br><span class="line"></span><br><span class="line">Trace complete.</span><br></pre></td></tr></table></figure>

<h1 id="Troubleshoot-virtual-WAN-issues-in-Microsoft-Azure"><a href="#Troubleshoot-virtual-WAN-issues-in-Microsoft-Azure" class="headerlink" title="Troubleshoot virtual WAN issues in Microsoft Azure"></a>Troubleshoot virtual WAN issues in Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>6 minutes</li>
</ul>
<p>There are two types of Azure virtual WANs:</p>
<ul>
<li>Basic – site-to-site VPN only.</li>
<li>Standard – can include ExpressRoute, User VPN (P25), VPN (site-to-site), inter-hub and VNet to VNet transiting, Azure Firewall, and NVA in a virtual WAN.</li>
</ul>
<p> Note</p>
<p>You can upgrade from Basic to Standard, but not the other way around.</p>
<h2 id="Monitor-virtual-WANs"><a href="#Monitor-virtual-WANs" class="headerlink" title="Monitor virtual WANs"></a>Monitor virtual WANs</h2><p>To view the status of a virtual WAN, use Azure Monitor Insights for Azure Virtual WAN. This displays the status of the components of your virtual WAN, including for each hub, VPN sites, firewalls, connections, and third-party NVAs. You can see the overall health of the virtual WAN, as well as navigating to specific resources.</p>
<p>Resource-level metrics are displayed in a virtual WAN metrics workbook. This displays metrics for different levels:</p>
<ul>
<li>Virtual WAN</li>
<li>Hub</li>
<li>Gateway</li>
<li>Connection</li>
</ul>
<p>To access Azure Monitor Insights for Azure Virtual WAN:</p>
<ol>
<li>From the Azure portal, select <strong>Virtual WAN</strong>.</li>
<li>Under <strong>Monitoring</strong>, select <strong>Insights (preview)</strong>. The <strong>Insights</strong> view is displayed.</li>
</ol>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/5-insights-view.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/5-insights-view.png" alt="Screenshot of Insights view."></a></p>
<p>The Insights view displays the virtual WAN resources with color-coded symbols to indicate their status. When you select a resource, the Insights view is displayed.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/5-virtual-network-resources.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/5-virtual-network-resources.png" alt="Screenshot virtual WAN resources."></a></p>
<p>The Insights view is diagrammatic, with each resource state color-coded. Metrics are displayed in a mini workbook on the right.</p>
<p>The dependency map displays:</p>
<ul>
<li>Resources in a connected graph with colored status symbols.</li>
<li>Indirectly connected virtual networks that are peered with virtual WAN spoke virtual networks.</li>
</ul>
<p>You can:</p>
<ul>
<li>Hover over each resource to display configuration settings.</li>
<li>Right-click to access the Azure portal page for that resource.</li>
</ul>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/5-dependency-map.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/5-dependency-map.png" alt="Screenshot of dependency map."></a></p>
<p>Select <strong>View detailed metrics</strong> to display information about your virtual WAN resource capacity, performance, and utilization at the virtual WAN level, hub level, and for individual connections.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/5-detailed-metrics.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/5-detailed-metrics.png" alt="Screenshot of detailed metrics."></a></p>
<h2 id="Determine-whether-sites-are-configured-correctly"><a href="#Determine-whether-sites-are-configured-correctly" class="headerlink" title="Determine whether sites are configured correctly"></a>Determine whether sites are configured correctly</h2><p>Connectivity between VNets in a virtual WAN is managed with a virtual hub via a virtual network connection. Transit connectivity between the VNets in Standard Virtual WAN is enabled due to the presence of a router in every virtual hub. This router is instantiated when the virtual hub is first created.</p>
<p>Display the routing status by going to the <strong>Virtual Hub</strong> page in the Azure portal. The router can be in one of four states:</p>
<ul>
<li><strong>Provisioned</strong> – indicates that the virtual hub has been successfully instantiated.</li>
<li><strong>Provisioning</strong> – indicates that the virtual hub is in the process of being provisioned.</li>
<li><strong>None</strong> – indicates that the virtual hub wasn’t able to create the router. This can happen if the virtual WAN is of Basic type, or if the virtual hub was deployed before the service was made available.</li>
<li><strong>Failed</strong> – indicates failure during instantiation. To reset the router, go to the virtual hub <strong>Overview</strong> page locate and select the <strong>Reset Router</strong> option. Resetting is a way to bring failed resources such as route tables, the hub router, or the virtual hub resource back to the provisioning state.</li>
</ul>
<p>Each virtual hub router supports an aggregate throughput up to 50Gbps.</p>
<p>Connectivity between the virtual network connections assumes a maximum total of 2000 VM workload across all VNets connected to a single virtual hub. However, this limit can be increased at additional cost.</p>
<h2 id="Troubleshoot-transit-routing"><a href="#Troubleshoot-transit-routing" class="headerlink" title="Troubleshoot transit routing"></a>Troubleshoot transit routing</h2><p>Connectivity between VNets in a virtual WAN is through a virtual hub, which connects the virtual networks. In a Standard Virtual WAN, each virtual hub has a router that is instantiated when the virtual hub is created.</p>
<p>This router can be in one of four states:</p>
<ul>
<li>Provisioned.</li>
<li>Provisioning.</li>
<li>Failed – the router failed during instantiation. Use the Reset Router option on the virtual hub Overview page in the Azure portal.</li>
<li>None – the router has not been provisioned, for example if the virtual WAN is of Basic type, or if the virtual hub was deployed before the service was available.</li>
</ul>
<p>You can view the Routing status, on the Virtual Hub page, in the Azure portal.</p>
<p>Every virtual hub router supports an aggregate throughput up to 50Gbps.</p>
<h2 id="Troubleshoot-secured-virtual-hubs"><a href="#Troubleshoot-secured-virtual-hubs" class="headerlink" title="Troubleshoot secured virtual hubs"></a>Troubleshoot secured virtual hubs</h2><p>A <strong>secured virtual hub</strong> is different from a virtual hub because it has security and routing policies configured by Azure Firewall Manager. Secured virtual hubs are used to create hub-and-spoke and transitive architectures with inbuilt security.</p>
<p>You use a secured virtual hub to provide automated routing to filter traffic between:</p>
<ul>
<li>Virtual networks (V2V).</li>
<li>Virtual networks and branch offices (B2V).</li>
<li>Traffic to the internet (B2I&#x2F;V2I).</li>
</ul>
<p>You don’t need to configure user-defined routes (UDRs) to route traffic through your firewall.</p>
<p>Secured virtual hubs can either be created as secured virtual hubs or converted from an existing virtual hub.</p>
<p>When you troubleshoot issues with secured virtual hubs, be aware of the following limitations:</p>
<ul>
<li>A secured hub doesn’t support branch-to-branch (B2B) filtering and filtering across multiple hubs.</li>
<li>You cannot configure more than one secured hub per Azure region.</li>
<li>Local policies must be created in the same region as the base policy. However, a policy that was created in one region can be applied to a secured hub in another region.</li>
<li>Communication filtering between secured virtual hubs isn’t supported. However, hub-to-hub communication still works if private traffic filtering via Azure Firewall isn’t enabled.</li>
<li>Secured virtual hubs sharing the same virtual WAN must be in the same resource group.</li>
<li>The secure hub firewall goes into a failed state if you add multiple public IP addresses.</li>
<li>DDoS Protection Standard isn’t supported with secured virtual hubs.</li>
<li>Activity logs are not fully supported.</li>
</ul>
<h1 id="Exercise-Troubleshoot-cloud-and-hybrid-connectivity"><a href="#Exercise-Troubleshoot-cloud-and-hybrid-connectivity" class="headerlink" title="Exercise: Troubleshoot cloud and hybrid connectivity"></a>Exercise: Troubleshoot cloud and hybrid connectivity</h1><p>Completed100 XP</p>
<ul>
<li>10 minutes</li>
</ul>
<p> Important</p>
<p>You need your own <a href="https://azure.microsoft.com/free/">Azure subscription</a> to complete the exercises in this module. If you don’t have an Azure subscription, you can still view the demonstraition video at the bottom of this page.</p>
<p>If you have not already run the script in unit 2, please do so now so you can follow the exercise below.</p>
<p>You have configured your network as shown in the diagram below. You want VM1 and VM2 to communicate via the VnetHub. Users are complaining that VM1 cannot communicate with VM2. You need to investigate to diagnose the problem, and then fix it.</p>
<p>There are three Azure virtual networks (VNets) in a hub and spoke topology.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/6-spoke-hub-topology.png" alt="Screenshot of spoke and hub topology."></p>
<h2 id="Diagnosis"><a href="#Diagnosis" class="headerlink" title="Diagnosis"></a>Diagnosis</h2><h2 id="Verify-the-network-topology"><a href="#Verify-the-network-topology" class="headerlink" title="Verify the network topology"></a>Verify the network topology</h2><ol>
<li>Sign in to the <a href="https://portal.azure.com/learn.docs.microsoft.com">Azure portal</a> using the same account you used to activate the sandbox.</li>
<li>Familiarize yourself with the network topology and check it matches the diagram above.</li>
<li>Check the private IP addresses of the firewall (FW1) and virtual machines (VM1 and VM2). These are allocated automatically. Make a note of the correct IP addresses if they are different from the diagram.</li>
</ol>
<h3 id="Check-OSI-level-3-connectivity"><a href="#Check-OSI-level-3-connectivity" class="headerlink" title="Check OSI level 3 connectivity"></a>Check OSI level 3 connectivity</h3><ol>
<li><p>Connect to each virtual machine (VM1 and VM2) using Remote Desktop. Windows credentials are:</p>
</li>
<li><p>User name: AdminXyz</p>
</li>
<li><p>Password: sfr9jttzrjjeoem7hrf#</p>
</li>
<li><p>On VM1, open a command prompt window and ping the private IP address of VM2.</p>
</li>
<li><p>Ping the private IP address of the Azure firewall (FW1).</p>
</li>
<li><p>On VM2, open a command prompt window and ping the private IP address of VM1.</p>
</li>
<li><p>Ping the private IP address of the Azure firewall (FW1).</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/6-private-address-ping.png" alt="Screenshot showing the command prompt with the ping request results."></p>
</li>
</ol>
<h3 id="Troubleshoot-the-problem"><a href="#Troubleshoot-the-problem" class="headerlink" title="Troubleshoot the problem"></a>Troubleshoot the problem</h3><ol>
<li><p>To understand what is causing the problem, try the following troubleshooting steps:</p>
</li>
<li><p>Examine ipconfig &#x2F;all on both VM1 and VM2.</p>
</li>
<li><p>Examine the Network Security Groups, and routing tables.</p>
</li>
<li><p>Examine the firewall and the firewall rules.</p>
</li>
<li><p>Examine the peering connection properties.</p>
<p>The diagram shows the effective routes on VM1-nic.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/6-effective-routes.png" alt="Screenshot showing the effective routes."></p>
</li>
</ol>
<h2 id="Resolution"><a href="#Resolution" class="headerlink" title="Resolution"></a>Resolution</h2><p>When you examined the peering connections, you would have found that the peering settings are different.</p>
<table>
<thead>
<tr>
<th align="left"><strong>VNet</strong></th>
<th align="left"><strong>Peering name</strong></th>
<th align="left"><strong>Traffic forwarded from remote virtual network</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">VnetHub</td>
<td align="left">Hub-Spoke1</td>
<td align="left">Allow (default)</td>
</tr>
<tr>
<td align="left">VnetHub</td>
<td align="left">Hub-Spoke2</td>
<td align="left">Block traffic that originates from outside this virtual network</td>
</tr>
<tr>
<td align="left">VnetSpoke1</td>
<td align="left">Spoke1-Hub</td>
<td align="left">Allow (default)</td>
</tr>
<tr>
<td align="left">VnetSpoke2</td>
<td align="left">Spoke2-Hub</td>
<td align="left">Block traffic that originates from outside this virtual network</td>
</tr>
</tbody></table>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/6-peerings.png" alt="Screenshot showing peerings."></p>
<p>The settings on <strong>Hub-Spoke2</strong> are incorrect.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/6-incorrect-traffic-forwarding.png" alt="Screenshot showing the incorrect spoke traffic forwarding setting."></p>
<p>To fix the problem, you must change the setting in both sides of the peering between VnetHub and VnetSpoke2.</p>
<ul>
<li>Hub-Spoke2</li>
<li>Spoke2-Hub</li>
</ul>
<p>The <strong>Traffic forwarded from remote virtual network</strong> must be set to <strong>Allow</strong>.</p>
<p>It should now be possible on VM1 to ping VM2.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/cloud-hybrid-connectivity/media/6-private-address-ping-working.png" alt="Screenshot showing the command prompt with the ping request working."></p>
<p>There will be a short delay before the new settings take effect. If the ping fails at first, try again.</p>
<p>In this demonstration you will see how to proactively troubleshoot Conditional Access policies using the What if tool in the Azure portal:</p>
<iframe src="https://www.microsoft.com/en-us/videoplayer/embed/RE4TYMM?postJsllMsg=true" frameborder="0" allowfullscreen="true" data-linktype="external" title="Video Player" style="box-sizing: inherit; outline-color: inherit; margin: 0px; padding: 0px; border: 0px; width: 640px; height: 360px; position: absolute; inset: 0px;"></iframe>



















<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>In this module, you saw how to troubleshoot ExpressRoute connectivity, including whether ExpressRoute is operational. You also learned about virtual network connectivity, including the traffic allowed between peers, and how to troubleshoot global peering. Finally, you learned how to troubleshoot virtual WAN issues, including monitoring, and how to determine whether sites are configured correctly.</p>
<p>Now that you’ve completed this module, you should be able to:</p>
<ul>
<li>Troubleshoot ExpressRoute connectivity.</li>
<li>Troubleshoot virtual network connectivity.</li>
<li>Troubleshoot WAN issues.</li>
</ul>
<h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><p>Follow these links for more information about what you’ve seen in this module:</p>
<h3 id="ExpressRoute"><a href="#ExpressRoute" class="headerlink" title="ExpressRoute"></a>ExpressRoute</h3><p><a href="https://learn.microsoft.com/en-us/azure/expressroute/">ExpressRoute documentation</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/expressroute/expressroute-troubleshooting-expressroute-overview">Verify ExpressRoute connectivity</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/expressroute/reset-circuit">Reset a failed ExpressRoute circuit</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/expressroute/expressroute-asymmetric-routing">Asymmetric routing with multiple network paths</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/expressroute/expressroute-routing">ExpressRoute routing requirements</a></p>
<h3 id="Virtual-network-connectivity"><a href="#Virtual-network-connectivity" class="headerlink" title="Virtual network connectivity"></a>Virtual network connectivity</h3><p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-troubleshoot-peering-issues">Troubleshoot virtual network peering issues</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/expressroute/how-to-routefilter-portal">Tutorial: Configure route filters for Microsoft peering using the Azure portal</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/tutorial-create-route-table-portal">Tutorial: Route network traffic with a route table using the Azure portal</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot">Troubleshoot VPN Gateway</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/troubleshoot-vpn-with-azure-diagnostics">Troubleshoot Azure VPN Gateway using diagnostic logs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview">Virtual network peering</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-troubleshoot-nva">Network virtual appliance issues in Azure</a></p>
<h3 id="Virtual-WANS"><a href="#Virtual-WANS" class="headerlink" title="Virtual WANS"></a>Virtual WANS</h3><p><a href="https://learn.microsoft.com/en-us/azure/virtual-wan/monitor-virtual-wan">Monitoring Azure Virtual WAN</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-wan/azure-monitor-insights">Azure Monitor Insights for Virtual WAN</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-wan/virtual-wan-about">What is Azure Virtual WAN?</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-720-Troubleshoot-connectivity-issues-with-virtual-machines-in-Microsoft-Azure-8</title>
    <url>/2022/11/14/AZ-720-Troubleshoot-connectivity-issues-with-virtual-machines-in-Microsoft-Azure-8/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>You work as a support engineer looking after your company’s virtual machines (VMs). Some of the teams you support would like guidance on when to use Azure Bastion or just-in-time (JIT) to access their VMs. You want to be able to do this and show the teams how to troubleshoot any issues they have.</p>
<p>Azure supports connecting to VMs in multiple ways. Azure Bastion is a service that you deploy into your environment and use it to connect to your VM using only a browser. Just-in-time VM access is a way to restrict who and which services can connect to a VM—and for how long.</p>
<p>In this module, you’ll explore why you might use Azure Bastion instead of just-in-time VM access to connect to your organization’s VMs. Then you’ll review common issues and how to troubleshoot them.</p>
<h2 id="Learning-objectives"><a href="#Learning-objectives" class="headerlink" title="Learning objectives"></a>Learning objectives</h2><p>After completing this module, you’ll be able to:</p>
<ul>
<li>Choose between Azure Bastion or just-in-time VM access.</li>
<li>Troubleshoot issues with Azure Bastion.</li>
<li>Troubleshoot just-in-time VM access.</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Experience using the Azure portal</li>
<li>Experience using Remote Desktop</li>
<li>Knowledge of Azure Bastion</li>
<li>Familiarity with server and client management concepts and tools</li>
<li>Familiarity with Microsoft Azure and cloud concepts</li>
</ul>
<h1 id="Choose-between-Azure-Bastion-or-just-in-time-virtual-machine-access"><a href="#Choose-between-Azure-Bastion-or-just-in-time-virtual-machine-access" class="headerlink" title="Choose between Azure Bastion or just in time virtual machine access"></a>Choose between Azure Bastion or just in time virtual machine access</h1><p>Completed100 XP</p>
<ul>
<li>5 minutes</li>
</ul>
<p>Azure Bastion and just-in-time access technologies allow you to connect securely to your organization’s VMs hosted in Azure.</p>
<p>Here you’ll learn about the use cases and capabilities of two options, Azure Bastion and JIT VM access. You can then help your teams choose the most appropriate one for them.</p>
<h2 id="Capabilities-of-Azure-Bastion"><a href="#Capabilities-of-Azure-Bastion" class="headerlink" title="Capabilities of Azure Bastion"></a>Capabilities of Azure Bastion</h2><p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/bastion-network-diagram.png" alt="A diagram showing how to connect to a VM through a TLS connection to the Azure portal."></p>
<p>The Azure Bastion Service allows you to use a modern HTML5-based web client from directly inside the Azure portal. The service connects securely over TLS and port 443 to any Azure VM in the same virtual network. Azure Bastion is a fully platform-managed PaaS you can choose to provision inside the same virtual network as your organization’s VMs.</p>
<p>There are many benefits to this approach:</p>
<ul>
<li>The web client connects an RDP or SSH session over the industry standard TLS on port 443. The same port browsers are used for HTTPS connections. Using TLS over 443 enables you to traverse your corporate firewalls securely without the need to open any more ports.</li>
<li>You can harden your VMs as they no longer need a public facing IP address. Azure Bastion connects over a private IP address.</li>
<li>You no longer need to add another NSG to allow users to connect to the VMs. You just create a single secure NSG for Azure Bastion to connect over its secure private IP address.</li>
<li>As your VMs no longer have a public facing IP address, they are automatically protected from external port scanning by malicious users outside your virtual network.</li>
</ul>
<h2 id="Capabilities-of-just-in-time-VM-access"><a href="#Capabilities-of-just-in-time-VM-access" class="headerlink" title="Capabilities of just-in-time VM access"></a>Capabilities of just-in-time VM access</h2><p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/just-time-network-diagram.png" alt="A diagram showing how to connect to a VM using just-in-time VM access."></p>
<p>In comparison to Azure Bastion, just-in-time VM access is a feature of Microsoft Defender for Cloud. When enabled in your subscription, you can authorize JIT access to a specific VM for a set amount of time. When that time has passed the access is removed. Microsoft Defender for Cloud allows this access by automatically changing the inbound port rules in the NSG and Azure Firewall.</p>
<p>The benefits to this approach are:</p>
<ul>
<li>You can connect to your VM with the tools of your choice, Remote Desktop or any other app that supports the RDP.</li>
<li>You can easily transfer and manage files directly with the VM.</li>
<li>Your VMs are protected by locking down inbound traffic automatically when access isn’t being used.</li>
</ul>
<h2 id="Choose-between-Azure-Bastion-and-JIT-VM-access"><a href="#Choose-between-Azure-Bastion-and-JIT-VM-access" class="headerlink" title="Choose between Azure Bastion and JIT VM access"></a>Choose between Azure Bastion and JIT VM access</h2><p>Both of your options greatly reduce the attack surface that malicious users might exploit. Here are some use cases where you could choose one over the other.</p>
<table>
<thead>
<tr>
<th align="left">Use Case</th>
<th align="left">Azure Bastion</th>
<th align="left">JIT VM access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Want to reduce costs as VM will be accessed and used 24&#x2F;7</td>
<td align="left"></td>
<td align="left">✔️</td>
</tr>
<tr>
<td align="left">Client machines are locked down and can’t install RDP software</td>
<td align="left">✔️</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">You need to be able to transfer files</td>
<td align="left"></td>
<td align="left">✔️</td>
</tr>
<tr>
<td align="left">Corporate firewall doesn’t have ports 3389 or 22 open</td>
<td align="left">✔️</td>
<td align="left"></td>
</tr>
</tbody></table>
<p>If you want the maximum security, you can combine Azure Bastion and JIT VM access.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/bastion-just-time-together.png" alt="A diagram showing how Azure Bastion and JIT VM access can be combined to get the benefits of both."></p>
<p>You get the benefits of browser-based SSL connection to an Azure VM, with no public IP address or RDP ports open, and the time-based restriction of just-in-time access.</p>
<h1 id="Troubleshoot-issues-with-Azure-Bastion"><a href="#Troubleshoot-issues-with-Azure-Bastion" class="headerlink" title="Troubleshoot issues with Azure Bastion"></a>Troubleshoot issues with Azure Bastion</h1><p>Completed100 XP</p>
<ul>
<li>5 minutes</li>
</ul>
<p>There are three main categories of issues you might see when troubleshooting Azure Bastion.</p>
<h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><p>First, you go to the Azure VM where you’re having trouble deploying Azure Bastion.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/navigate-bastion-connection.png" alt="A screenshot showing how to use Azure Bastion to connect to an Azure VM."></p>
<p>In the Azure portal, on the left navigation pane, select <strong>Virtual machines</strong>, then select the machine you’re troubleshooting. Select <strong>Connect</strong> from the top of the pane, then select <strong>Bastion</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/bastion-screenshot.png" alt="A screenshot that shows the Azure Bastion options"></p>
<p>You should see the options to create an Azure Bastion Service. If you don’t, check that you have met these prerequisites:</p>
<ul>
<li>You have the correct access to the VM—at a minimum, you need reader access to the VM, NIC, private IP address of the VM, and the virtual network.</li>
<li>You have an active Azure subscription with enough credit.</li>
<li>You have enough public IP address left in your subscription’s quota.</li>
</ul>
<p>Step 1 has been completed for you because you’re creating the Azure Bastion Service from a VM.</p>
<p>For step 2, you can accept the defaults and create a new subnet named AzureBastionSubnet. The wizard will create the subnet with these attributes:</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/azure-bastion-subnet-settings.png" alt="A screenshot of the AzureBastionSubnet subnet settings."></p>
<p>Step 3 allows you to select the tier, basic or standard. You can then create or use a public IP address to connect to the Azure Bastion Service. Finally, accept the Microsoft supplied defaults to create the service.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/deploy-bastion.png" alt="A screenshot of the Bastion creation wizard, showing how to select the Standard Tier, public IP address name, and the Create Azure Bastion using the defaults button."></p>
<h2 id="Connectivity"><a href="#Connectivity" class="headerlink" title="Connectivity"></a>Connectivity</h2><p>To begin resolving connection issues between your Azure Bastion Service and a VM, check the VM is running.</p>
<p>The VM doesn’t need to have a public IP address, but it must be in a virtual network that supports IPv4. Currently, IPv6-only environments aren’t supported.</p>
<p>Azure Bastion can’t work with VMs that are in an Azure Private DNS zone with <strong>core.windows.net</strong> or <strong>azure.com</strong> in the suffixes. This isn’t supported because it could allow overlaps with internal endpoints. Azure Private DNS zones in national clouds are also unsupported.</p>
<p>If the connection to the VM is working but you can’t sign in, check if it is domain-joined. If the VM is domain-joined, you’ll need to specify the credentials in the Azure portal using the <strong>username@domain</strong> format, instead of <strong>domain\username</strong>. This won’t resolve the issues if the VM is Azure AD-joined only—this kind of authentication isn’t supported.</p>
<p>In the earlier section you’ll note that, by default, the AzureBastionSubnet isn’t assigned an NSG. If your organization needs an NSG, you should ensure that it’s configured correctly:</p>
<p>Inbound rules</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/inbound.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/inbound.png" alt="A screenshot of inbound rules in the Azure portal showing port 443 over TCP with these sources: Internet, GatewayManager, and AzureLoadBalancer. For port 8080 and 5701 over Any protocol, the source is VirtualNetwork."></a></p>
<p>Outbound rules</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/outbound.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/outbound.png" alt="A screenshot of outbound rules in the Azure portal showing port 22 and 3389 over Any protocol with the destination VirtualNetwork. Port 443 over TCP with the destination AzureCloud. Port 8080 and 5701 over Any protocol with the destination VirtualNetwork. Port 80 over Any protocol—source is Internet."></a></p>
<h2 id="Access"><a href="#Access" class="headerlink" title="Access"></a>Access</h2><p>If your users are having access issues, check that they have roles that grant them read access to all these resources:</p>
<ul>
<li>The virtual machine</li>
<li>The NIC</li>
<li>The Azure Bastion Service and AzureBastionSubnet</li>
<li>If it’s a peered network, the virtual network</li>
</ul>
<p>If all these resources are correct and the user is still seeing a black screen when they try to connect with Azure Bastion, there’s likely a network connectivity issue between the user’s web browser and Azure Bastion.</p>
<h1 id="Troubleshoot-issues-with-just-in-time-virtual-machine-access"><a href="#Troubleshoot-issues-with-just-in-time-virtual-machine-access" class="headerlink" title="Troubleshoot issues with just in time virtual machine access"></a>Troubleshoot issues with just in time virtual machine access</h1><p>Completed100 XP</p>
<ul>
<li>6 minutes</li>
</ul>
<p>Unlike Azure Bastion, there are only two high-level issues you might need to troubleshoot with just-in-time VM access.</p>
<h2 id="Availability"><a href="#Availability" class="headerlink" title="Availability"></a>Availability</h2><p>JIT VM access is one of the enhanced security features of Microsoft Defender for Cloud. Your organization has to have enhanced security enabled at the subscription level. To check, go to the Azure portal, select <strong>Microsoft Defender for Cloud</strong>, and under <strong>Management</strong>, select <strong>Environment settings</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/defender-environment-settings.png" alt="A screenshot of the Azure portal, selecting Microsoft Defender for Cloud, and then Environment settings."></p>
<p>If you haven’t enabled Microsoft Defender for Cloud on your subscription, you’ll see the error below:</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/defender-description-error.png" alt="A screenshot of the error shown if Microsoft Defender for Cloud isn’t enabled on a subscription. It shows there’s an Enable Microsoft Defender for Cloud button to select."></p>
<p>Select <strong>Enable Microsoft Defender for Cloud</strong> to be taken to a page that allows you to select your subscription.</p>
<p>If you have multiple subscriptions, select the one with the resources you’re troubleshooting. Then select the large <strong>Enable all Microsoft Defender for Cloud plans</strong> box.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/enable-enhanced-security.png" alt="A screenshot showing how to enable all Microsoft Defender for Cloud plans."></p>
<p>Choose the services you’d like to protect; at a minimum, you need to select <strong>Server</strong> to enable JIT VM access.</p>
<p>You can enable JIT access from the VM connection pane, from Workload protections inside Microsoft Defender for Cloud, or by using Azure CLI commands. For example, to use Workload protections, follow these steps:</p>
<ol>
<li><p>In the Azure portal, select <strong>Microsoft Defender for Cloud</strong>.</p>
</li>
<li><p>Under Cloud Security, select <strong>Workload protections</strong>.</p>
</li>
<li><p>Select <strong>Just-in-time VM</strong> access.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/select-just-time-access-workload-protections.png" alt="A screenshot showing selecting Workload protections, and then selecting Just-in-time VM access."></p>
</li>
</ol>
<p>You can then select the <strong>Not Configured</strong> tab to show all the VMs in your subscription that don’t have JIT access enabled.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/enable-just-time-access-defender.png" alt="A screenshot showing the Not Configured tab selected, and a check against the VM to protect it. The Enable JIT button on 1 VM is highlighted."></p>
<p>Select the check next to the VM you want to protect.</p>
<p>Select <strong>Enable JIT</strong> on 1 VM.</p>
<p>This page can also help you diagnose your VMs that aren’t supported by JIT VM access. The VMs having problems will likely have been deployed without using the Azure Resource Manager. Only VMs deployed through Azure Resource Manager are supported by JIT access.</p>
<h2 id="Access-1"><a href="#Access-1" class="headerlink" title="Access"></a>Access</h2><p>With JIT VM access enabled on your machines, users might still have issues when they request access to a specific protected VM. You request access to a VM using the Azure portal as follows:</p>
<ul>
<li>From inside the Connect options for a VM.</li>
<li>From inside the Workload protections section of Microsoft Defender for Cloud.</li>
<li>Using Azure CLI commands.</li>
</ul>
<p>If your users are unable to request JIT access, check that their role has these actions, at a minimum:</p>
<ul>
<li>Microsoft.Security&#x2F;locations&#x2F;jitNetworkAccessPolicies&#x2F;*&#x2F;read</li>
<li>Microsoft.Security&#x2F;locations&#x2F;jitNetworkAccessPolicies&#x2F;initiate&#x2F;action</li>
<li>Microsoft.Compute&#x2F;virtualMachines&#x2F;read</li>
<li>Microsoft.Network&#x2F;*&#x2F;read</li>
</ul>
<p>You use Access control (IAM) to check which users have been granted access to a VM. In the Azure portal, select Virtual machine, and then select Access control (IAM).</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/check-virtual-machine-access.png" alt="A screenshot showing a VM’s Access control (IAM) settings. The View button for View access to this resource is highlighted."></p>
<p>You can review the currently enabled and used JIT VM access in the Microsoft Defender for Cloud advanced protection section.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/current-just-time-access.png" alt="A screenshot of the currently configured JIT VM access showing two VMs and their current status of access."></p>
<h1 id="Exercise-–-Troubleshoot-connectivity-issues-with-Azure-Bastion"><a href="#Exercise-–-Troubleshoot-connectivity-issues-with-Azure-Bastion" class="headerlink" title="Exercise – Troubleshoot connectivity issues with Azure Bastion"></a>Exercise – Troubleshoot connectivity issues with Azure Bastion</h1><p>Completed100 XP</p>
<ul>
<li>7 minutes</li>
</ul>
<p>You’ve been contacted by one of the teams you support. The team is having problems connecting to their VM using Bastion. In this exercise you’ll see how to troubleshoot the Azure Bastion Service.</p>
<p>Bastion is not supported in the Learn sandbox environment. Watch the video at the end to view this exercise. If you’d like to follow along in your own subscription, you can use the following steps.</p>
<p> Important</p>
<p>You need your own <a href="https://azure.microsoft.com/free/">Azure subscription</a> to complete the exercises in this module. If you don’t have an Azure subscription, you can still read along.</p>
<h2 id="Check-that-Bastion-has-been-deployed"><a href="#Check-that-Bastion-has-been-deployed" class="headerlink" title="Check that Bastion has been deployed"></a>Check that Bastion has been deployed</h2><ol>
<li><p>In the Azure portal, in the search box, type <strong>Bastions</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/check-bastion-setup.png" alt="A screenshot showing the Bastion service being searched for and then selected."></p>
</li>
<li><p>From the results, under <strong>Services</strong>, click <strong>Bastions</strong>.</p>
</li>
<li><p>You should see the Bastion service listed.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/bastion-list.png" alt="A screenshot showing the list of created Azure Bastions."></p>
<p>If there aren’t any Bastion services listed, create one.</p>
</li>
</ol>
<h2 id="Check-if-there’s-a-private-DNS-zone"><a href="#Check-if-there’s-a-private-DNS-zone" class="headerlink" title="Check if there’s a private DNS zone"></a>Check if there’s a private DNS zone</h2><ol>
<li><p>In the Azure portal, in the search box, type <strong>private dns</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/private-zones.png" alt="A screenshot of the Azure portal, searching for private D N S, and selecting Private D N S zones."></p>
</li>
<li><p>From the results, under <strong>Services</strong>, click <strong>Private DNS zones</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/no-private-zones.png" alt="A screenshot showing that no private D N S zones are being used."></p>
</li>
<li><p>You shouldn’t see any private DNS zones.</p>
</li>
<li><p>If there are any zones listed, check that they don’t end in <strong>azure.com</strong> or <strong>core.windows.net</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/invalid-private-zone.png" alt="Screenshot showing a private D N S zone that will cause connection problems for Azure Bastion."></p>
</li>
</ol>
<h2 id="Check-if-AzureBastionSubnet-is-using-a-Network-Security-Group-correctly"><a href="#Check-if-AzureBastionSubnet-is-using-a-Network-Security-Group-correctly" class="headerlink" title="Check if AzureBastionSubnet is using a Network Security Group correctly"></a>Check if AzureBastionSubnet is using a Network Security Group correctly</h2><ol>
<li><p>In the Azure portal, in the search box, type <strong>Bastions</strong>.</p>
</li>
<li><p>From the results, under <strong>Services</strong>, click <strong>Bastions</strong>.</p>
</li>
<li><p>Select the Bastion you are troubleshooting.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/azure-bastion-subnet-link.png" alt="A screenshot showing the Virtual network/subnet link on the Bastion pane."></p>
</li>
<li><p>In the top right, click the <strong>Virtual network&#x2F;subnet</strong> link.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/virtual-network-subnets.png" alt="A screenshot of the subnets menu highlighted on the virtual network pane, with the AzureBastionSubnet selected."></p>
</li>
<li><p>Under <strong>Settings</strong>, click <strong>Subnets</strong>, and then click <strong>AzureBastionSubnet</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/azure-bastion-subnet-settings-nsg.png" alt="A screenshot showing that the AzureBastionSubnet has no Network Security Group associated with it."></p>
</li>
</ol>
<p> Note</p>
<p>If Azure Bastion has a <strong>Network security group</strong> associated with the subnet, you need to check that it has all the inbound and outbound rules created.</p>
<h2 id="Run-the-Connection-Troubleshoot-tool-to-check-for-issues"><a href="#Run-the-Connection-Troubleshoot-tool-to-check-for-issues" class="headerlink" title="Run the Connection Troubleshoot tool to check for issues"></a>Run the Connection Troubleshoot tool to check for issues</h2><ol>
<li>In the Azure portal, in the search box, type <strong>Bastions</strong>.</li>
<li>From the results, under <strong>Services</strong>, click <strong>Bastions</strong>.</li>
<li>Select the Bastion you are troubleshooting.</li>
<li>Under <strong>Monitoring</strong>, click <strong>Connection Troubleshoot</strong>.</li>
<li>Under <strong>Virtual machine</strong>, select the VM you are trying to connect to.</li>
<li>Select your <strong>Preferred IP Version</strong>.</li>
<li>In the <strong>Destination port</strong>, if you want to use <strong>RDP</strong>, enter <strong>3389</strong>, if you want to use <strong>SSH</strong>, enter <strong>22</strong>.</li>
<li>Click <strong>Check</strong>.</li>
</ol>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/connection-troubleshooting-wizard.png" alt="A screenshot of the Azure Bastion connection troubleshooting wizard."></p>
<p>Copy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">If you’ve resolved all the possible connection issues, the connection troubleshoot wizard should return a status of reachable.</span><br></pre></td></tr></table></figure>

<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-connectivity-issues-virtual-machines-azure/media/troubleshooot-results.png" alt="A screenshot of the connection troubleshoot results, showing the stats as reachable."></p>
<p>You can watch the following video to see all the steps above:</p>
<iframe src="https://www.microsoft.com/en-us/videoplayer/embed/RE4RYRS?postJsllMsg=true" frameborder="0" allowfullscreen="true" data-linktype="external" title="Video Player" style="box-sizing: inherit; outline-color: inherit; margin: 0px; padding: 0px; border: 0px; width: 640px; height: 360px; position: absolute; inset: 0px;"></iframe>



















<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>As your company’s support engineer, you’ve explored the differences between Bastion and JIT VM access. You can now provide guidance to your teams and suggest which access method will support their needs.</p>
<p>You then reviewed common issues with both approaches and how to troubleshoot them.</p>
<p>If Bastion or JIT VM access wasn’t available, organizations would have to make commonly used ports open to the external internet, allowing bad actors to port scan their virtual machines. Using either approach to connect to your VMs greatly reduces the attack surface that can be exploited.</p>
<p>Now that you’ve completed this module, you should be able to:</p>
<ul>
<li>Choose between Azure Bastion or just-in-time VM access.</li>
<li>Troubleshoot issues with Azure Bastion.</li>
<li>Troubleshoot just-in-time VM access.</li>
</ul>
<p>For more information about the topics discussed in this module, see:</p>
<p><a href="https://learn.microsoft.com/en-us/azure/bastion/troubleshoot">Troubleshoot Azure Bastion</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/defender-for-cloud/just-in-time-access-overview">Understanding just-in-time (JIT) VM access</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/bastion/diagnostic-logs">Enable and work with Bastion resource logs</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/bastion/bastion-overview">What is Azure Bastion?</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-720-Troubleshoot-name-resolution-issues-in-Microsoft-Azure-2</title>
    <url>/2022/11/14/AZ-720-Troubleshoot-name-resolution-issues-in-Microsoft-Azure-2/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>As an Azure network support engineer, you are responsible for ensuring that computers and devices on your network stay connected. Name resolution is the process of matching the name of a computer to its network address. If a name cannot be resolved, the computer will not be visible on the network, causing a breakdown in connectivity. Name resolution may be:</p>
<ul>
<li>Public, using public Domain Name System (DNS) servers.</li>
<li>Internal to Azure, using Azure infrastructure.</li>
<li>On-premises, using your own DNS server.</li>
</ul>
<p>You might also adopt a hybrid approach, using a combination of either private and public DNS, or on-premises and Azure DNS servers.</p>
<p>In this unit you will learn how to troubleshoot internal Azure name resolution issues and public DNS issues.</p>
<h2 id="Learning-objectives"><a href="#Learning-objectives" class="headerlink" title="Learning objectives"></a>Learning objectives</h2><p>By completing this module, you’ll learn how to:</p>
<ul>
<li>Troubleshoot built-in Azure name resolution issues</li>
<li>Troubleshoot custom Azure name resolutions issues</li>
<li>Troubleshoot Azure Private Zone DNS</li>
<li>Troubleshoot Public DNS issues</li>
<li>Review the Azure DNS logs</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Demonstrate an understanding of the OSI model</li>
<li>Demonstrate an understanding of Azure CLI</li>
<li>Demonstrate an understanding of PowerShell</li>
<li>Know how to run Cloud Shell to run commands</li>
</ul>
<h1 id="Azure-name-resolution-issues"><a href="#Azure-name-resolution-issues" class="headerlink" title="Azure name resolution issues"></a>Azure name resolution issues</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p> Important</p>
<p>You need your own <a href="https://azure.microsoft.com/free/">Azure subscription</a> to complete the exercises in this module. If you don’t have an Azure subscription, you can still view the demonstration video in the exercise unit.</p>
<ol>
<li>Select <strong>Sign in</strong> to activate sandbox and sign in using your own credentials.</li>
<li>Select <strong>Review permissions</strong>, read and accept to continue.</li>
<li>Azure Cloud Shell will authenticate and build and you are ready to start the exercise.</li>
</ol>
<p>You’ll troubleshoot a name resolution problem in a later exercise. Use the following instructions and the Azure Cloud Shell on the right of the screen to create the environment for this exercise.</p>
<p> Note</p>
<p>The resource group <strong>sandbox-rg</strong> has been created automatically. Use this as your resource group name. You won’t have permission to create additional resource groups in the sandbox.</p>
<p>In the sandbox to the right, follow these steps:</p>
<h2 id="Create-the-exercise-environment"><a href="#Create-the-exercise-environment" class="headerlink" title="Create the exercise environment"></a>Create the exercise environment</h2><p>Using the Cloud Shell on the right, run these commands to create the example topology. The environment will take approximately 13 minutes to build.</p>
<ol>
<li><p>Clone the setup script from GitHub.</p>
<p>ConsoleCopy</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/MicrosoftDocs/mslearn-name-resolution-issues networking</span><br></pre></td></tr></table></figure>
</li>
<li><p>Run the setup script.</p>
<p>ConsoleCopy</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">networking/setup.ps1</span><br></pre></td></tr></table></figure>
</li>
<li><p>The script will create all the resources. Wait until it completes, you should see a Lab Environment Created message.</p>
</li>
<li><p>You can continue to the next unit as this command runs in the background.</p>
</li>
</ol>
<h1 id="Troubleshoot-public-DNS-in-Microsoft-Azure"><a href="#Troubleshoot-public-DNS-in-Microsoft-Azure" class="headerlink" title="Troubleshoot public DNS in Microsoft Azure"></a>Troubleshoot public DNS in Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>7 minutes</li>
</ul>
<h2 id="Troubleshoot-issues-with-Domain-Name-System-records-at-public-providers"><a href="#Troubleshoot-issues-with-Domain-Name-System-records-at-public-providers" class="headerlink" title="Troubleshoot issues with Domain Name System records at public providers"></a>Troubleshoot issues with Domain Name System records at public providers</h2><p>Public DNS servers convert domain names to IP addresses to allow people to find web sites and other addresses on the internet. If your VM has internet connectivity, it will need to resolve names from public DNS servers. If you have problems with resolving names from public DNS servers, try the following:</p>
<ol>
<li><p>Check your VM has internet connectivity.</p>
</li>
<li><p>From a command prompt, ping the IP address of the website you are trying to reach. If ping does not get a response, this tells you that the website is not available.</p>
</li>
<li><p>Check whether the DNS server is the primary server for the zone, or a secondary copied DNS server. Updates are made to the primary DNS server, so this will always include the latest changes and be the most up to date. The primary DNS server is also known as the Authoritative DNS. The secondary DNS server is a read-only copy of the primary DNS server.</p>
</li>
<li><p>From a command prompt, run nslookup:</p>
<p>nslookup <em>name IP address of the DNS server</em>;</p>
<p>For example:</p>
<p>nslookup app1 10.0.0.1</p>
<p>If you get a failure or time-out response, check for recursion problems. Check the server that was used in your original query forwards queries by examining the Forwarders tab in the Server properties in the DNS console. If the Enable forwarders check box is selected, and one or more servers are listed, this server forwards queries.</p>
<p>With recursion, all DNS servers that are used in the path of a recursive query must be able to respond and forward correct data. If they can’t, a recursive query can fail because:</p>
<ul>
<li>The query times out before it can be completed.</li>
<li>A server failed to respond.</li>
<li>A server provides incorrect data.</li>
</ul>
<p>Nslookup will also tell you whether the name has been resolved by an authoritative or non-authoritative server.</p>
</li>
<li><p>Flush the resolver cache by running the dnscmd &#x2F;clearcache command in an Elevated Command Prompt window:</p>
<ul>
<li>Right select Command Prompt and choose ‘Run as administrator’</li>
</ul>
<p>Type dnscmd <em>servername</em> &#x2F;clearcache</p>
<p>The <em>servername</em> is its IP address, FQDN, or hostname. If omitted, the local server is used.</p>
<p>You can also use <strong>ipconfig -flushdns</strong> to clear the DNS cache.</p>
<p>Alternatively, in an Elevated PowerShell window, run the following cmdlet:</p>
<p>Clear-DnsServerCache</p>
<p>Once you have cleared the cache, try again.</p>
</li>
<li><p>Check the DNS server address. If necessary, correct the address.</p>
</li>
<li><p>The <a href="https://phoenixnap.com/kb/linux-dig-command-examples">dig command</a> (domain information groper) gives DNS information which is helpful in troubleshooting problems. It is a free utility which needs to be installed on Windows machines. To get dig information, run the following command:</p>
<p>dig <em>domain name or IP</em></p>
<p>DIG displays the <strong>status</strong> of whether a query was successful.</p>
<p>The <strong>ANSWER SECTION</strong> shows a response to a request sent in the <strong>QUESTION SECTION</strong>.</p>
<p>The <strong>SERVER</strong> displays the address for the public DNS server.</p>
<p>By default, dig looks up the <strong><a href="https://phoenixnap.com/kb/dns-record-types">A record</a></strong> for a domain and shows which IP address the domain points to when resolving the name.</p>
<p>Use <strong>dig</strong> with the <strong>+trace</strong> tag to see the full path to the destination:</p>
<p>dig contoso.com +trace</p>
<p>To check the delegated name servers, use the ns option:</p>
<p>dig contoso.com ns</p>
</li>
<li><p>If a computer cannot be reached, try using the commands IPCONFIG &#x2F; RELEASE and IPCONFIG &#x2F;RENEW from the computer’s command prompt to refresh cached information.</p>
<p> Important</p>
<p>IPCONFIG &#x2F;RELEASE will disconnect the computer from the internet. Run IPCONFIG &#x2F;ALL to check the current information.</p>
</li>
<li><p>To check the IP configuration of a computer, run ipconfig &#x2F;all at a command prompt. Scroll down to verify the IP address, subnet mask, and default gateway. The default gateway will be a router or firewall.</p>
</li>
<li><p>The tracert tools displays the route from source to destination. When troubleshooting DNS issues, it helps to identify where packets stopped on the network. Install the traceroute tool using the <a href="https://phoenixnap.com/kb/how-to-manage-packages-ubuntu-debian-apt-get">apt package manager</a>.</p>
<p>If running on a Windows machine:</p>
<p>tracert <em>domain name or IP</em></p>
</li>
<li><p>If the computer uses the ISP’s DNS, and you cannot resolve the issue, contact the ISP.</p>
</li>
</ol>
<h2 id="Troubleshoot-domain-configuration-issues"><a href="#Troubleshoot-domain-configuration-issues" class="headerlink" title="Troubleshoot domain configuration issues"></a>Troubleshoot domain configuration issues</h2><p>To use a domain name with Microsoft 365 products, you must set up your custom domain names in the Microsoft 365 admin center:</p>
<ol>
<li>From the Microsoft 365 admin center, select <a href="https://go.microsoft.com/fwlink/p/?linkid=2171997">Setup</a>.</li>
<li>Under Get your custom domain set up, select View &gt; Manage &gt; Add domain.</li>
<li>Enter the domain name, and then select Next.</li>
<li>If your domain registrar is available, sign in to your domain registrar, and then select Next.</li>
<li>Choose the services for your new domain.</li>
<li>Select Next &gt; Authorize &gt; Next, and then Finish. Your new domain has been added.</li>
</ol>
<p>You can check for problems with your domain by checking its status. Go to Setup &gt; Domains and view the notifications in the Status column. If you see an issue, select the three dots (more actions), and then select Check health to display any issues occurring with your domain.</p>
<p>There are a couple of common reasons that domain verification doesn’t work as it should:</p>
<ul>
<li>The verification record value is incorrect. Check the value in the TXT verification record at your DNS host. This should include the “MS&#x3D;” part of the record.</li>
<li>The record hasn’t been saved. Some DNS hosts require you to save the zone file where the DNS record is stored. If this has not been saved, it will not be visible by Microsoft 365.</li>
<li>The record hasn’t updated across the Internet. It can take a few minutes or a few hours for a new record to be visible.</li>
</ul>
<h2 id="Troubleshoot-delegation-issues"><a href="#Troubleshoot-delegation-issues" class="headerlink" title="Troubleshoot delegation issues"></a>Troubleshoot delegation issues</h2><p>Azure DNS zones allow you to manage the DNS records for a domain. For domain queries to reach Azure DNS, the parent domain must be delegated to Azure DNS. There are two types of DNS servers:</p>
<ul>
<li>An <strong>authoritative</strong> DNS server hosts DNS zones. It answers DNS queries for records in those zones only.</li>
<li>A <strong>recursive</strong> DNS server doesn’t host DNS zones. It answers all DNS queries by calling authoritative DNS servers to gather the data it needs.</li>
</ul>
<p>Azure DNS provides an authoritative DNS service.</p>
<p>First, you need to know the name servers for your zone. Azure DNS allocates name servers from a pool each time a zone is created.</p>
<p>In the Azure portal, select <strong>All resources</strong>, and then select your DNS zone. Alternatively, enter your domain name in the Filter by name box. Retrieve the name servers from the DNS zone page.</p>
<p>For example, the zone contoso.net might be assigned name servers:</p>
<ul>
<li>ns1-01.azure-dns.com</li>
<li>ns2-01.azure-dns.net</li>
<li>ns3-01.azure-dns.org</li>
<li>ns4-01.azure-dns.info</li>
</ul>
<p>Azure DNS automatically creates authoritative NS records in your zone for the assigned name servers.</p>
<p>Now you have the name servers, you can update the parent domain. Each registrar has its own DNS management tools. From the registrar’s DNS management page, edit the NS records and replace the NS records with the Azure DNS name servers.</p>
<p>The image shows an example DNS query, with contoso.net and partners.contoso.net in Azure DNS zones:</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/3-zones.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/3-zones.png" alt="Diagram of a DNS query in the Azure DN zones."></a></p>
<p>Each delegation has two copies of the NS records - one in the parent zone pointing to the child, and another in the child zone itself. The ‘contoso.net’ zone contains the NS records for ‘contoso.net’, in addition to the NS records in ‘net’. These records are called authoritative NS records and they sit at the apex of the child zone.</p>
<p>To troubleshoot domain delegation, try the following:</p>
<ol>
<li>Check you have updated the domain with the name servers that Azure DNS provides. Use all four name servers, regardless of the name of your domain. Domain delegation doesn’t require a name server to use the same top-level domain as your domain.</li>
<li>Include the trailing period at the end of the name server address. The trailing period indicates the end of a fully qualified domain name. Some registrars append the period if the NS name doesn’t have it. To be compliant with the DNS RFC, always include the trailing period.</li>
<li>Delegations that use name servers in your own zone, sometimes called vanity name servers, are not supported in Azure DNS.</li>
<li>Verify that the delegation is working. Use a tool such as nslookup to query the Start of Authority (SOA) record. The SOA record is automatically created with the zone. Wait at least 10 minutes after delegation has been set up, as it can take a while for changes to propagate through the DNS system.</li>
</ol>
<p>From a command prompt, enter a nslookup command:</p>
<p>nslookup -type&#x3D;SOA contoso.net</p>
<p>The response should look similar to this:</p>
<p>Server: ns1-04.azure-dns.com</p>
<p>Address: 208.76.47.4</p>
<p>contoso.net</p>
<p>primary name server &#x3D; ns1-04.azure-dns.com</p>
<p>responsible mail addr &#x3D; msnhst.microsoft.com</p>
<p>serial &#x3D; 1</p>
<p>refresh &#x3D; 900 (15 mins)</p>
<p>retry &#x3D; 300 (5 mins)</p>
<p>expire &#x3D; 604800 (7 days)</p>
<p>default TTL &#x3D; 300 (5 mins)</p>
<h2 id="Review-Domain-Name-System-audit-logs"><a href="#Review-Domain-Name-System-audit-logs" class="headerlink" title="Review Domain Name System audit logs"></a>Review Domain Name System audit logs</h2><p>Use DNS Analytics to help you to identify:</p>
<ul>
<li>Clients that are trying to resolve malicious domain names.</li>
<li>Identify stale resource records.</li>
<li>Identify frequently queried domain names and talkative DNS clients.</li>
<li>View request load on DNS servers.</li>
<li>View dynamic DNS registration failures.</li>
</ul>
<p>DNS Analytics (Preview) collects, analyzes, and correlates Windows DNS analytic and audit logs and other related data from your DNS servers.</p>
<ul>
<li>You must install the Log Analytics agent on each Windows DNS server you want to monitor.</li>
<li>If you are running Operations Manager, you will need to connect it to Azure Monitor.</li>
</ul>
<p>The solution starts collecting data without the need of further configuration.</p>
<p>You can download DNS Analytics (Preview) from Azure Marketplace. For DNS related insights, the DNS server should be Windows Server 2012 R2 or later.</p>
<p>You can also access DNS Analytics via Azure Monitor and Log Analytics workspaces. In the Azure portal, go to Azure Monitor. On the Insights menu, select Insights Hub, and then select Log Analytics. The Overview page in Azure Monitor displays a tile for each solution installed in a Log Analytics workspace.</p>
<h1 id="Troubleshoot-name-resolution-issues"><a href="#Troubleshoot-name-resolution-issues" class="headerlink" title="Troubleshoot name resolution issues"></a>Troubleshoot name resolution issues</h1><p>Completed100 XP</p>
<ul>
<li>5 minutes</li>
</ul>
<p>Name resolution in Azure is done by one of three methods:</p>
<ul>
<li>Azure built-in name resolution</li>
<li>Azure custom name resolution</li>
<li>Azure DNS private zones</li>
</ul>
<p>In this unit you will learn how to troubleshoot each of these methods.</p>
<h2 id="2-1-Troubleshoot-built-in-Azure-name-resolution"><a href="#2-1-Troubleshoot-built-in-Azure-name-resolution" class="headerlink" title="2.1 Troubleshoot built-in Azure name resolution"></a>2.1 Troubleshoot built-in Azure name resolution</h2><p>Built-in Azure name resolution provides basic authoritative Domain Name System (DNS) capabilities. DNS names and records are managed by Azure. Built-in Azure name resolution does not allow you to control the DNS names or the life cycle of DNS records.</p>
<p>Azure built-in name resolution works with public DNS names and provides internal name resolution for VMs and role instances within the same virtual network or cloud service.</p>
<p>Built-in Azure name resolution has some limitations:</p>
<ul>
<li>The Azure-created DNS suffix cannot be modified.</li>
<li>DNS lookup is scoped to a virtual network. DNS names created for one virtual network can’t be resolved from other virtual networks.</li>
<li>You cannot manually register your own records.</li>
<li>WINS and NetBIOS are not supported. You cannot see your VMs in Windows Explorer.</li>
<li>Host names must be DNS-compatible. Names must use only 0-9, a-z, and ‘-‘, and cannot start or end with a ‘-‘.</li>
<li>DNS query traffic is throttled for each virtual machine (VM). Throttling shouldn’t impact most applications. If request throttling is observed, ensure that client-side caching is enabled.</li>
<li>Only VMs in the first 180 cloud services are registered for each virtual network in a classic deployment model. This limit does not apply to virtual networks in Azure Resource Manager.</li>
<li>The Azure DNS IP address is 168.63.129.16. This is a static IP address, is used in all regions and all national clouds and will not change.</li>
<li>Azure Dynamic Host Configuration Protocol (DHCP) provides an internal DNS suffix (.internal.cloudapp.net) to each VM. This suffix enables host name resolution because the host name records are in the internal.cloudapp.net zone.</li>
</ul>
<p> </p>
<h2 id="2-2-Troubleshoot-Domain-Name-System-private-zones"><a href="#2-2-Troubleshoot-Domain-Name-System-private-zones" class="headerlink" title="2.2 Troubleshoot Domain Name System private zones"></a>2.2 Troubleshoot Domain Name System private zones</h2><p>Azure Private DNS allows you to manage and resolve domain names in a virtual network without the need to add a custom DNS solution. You can use custom domain names, rather than the Azure-provided names.</p>
<p>DNS resolution using a private DNS zone works only from virtual networks that are linked to it. These private DNS zones records can be resolved from the internet, but the private IP address is not routable via the Internet.</p>
<p>You can link a private DNS zone to one or more virtual networks by creating <a href="https://learn.microsoft.com/en-us/azure/dns/private-dns-virtual-network-links">virtual network links</a>. You can also enable the <a href="https://learn.microsoft.com/en-us/azure/dns/private-dns-autoregistration">autoregistration</a> feature to automatically manage the life cycle of the DNS records for the virtual machines that get deployed in a virtual network. With autoregistration enabled, Azure DNS will update the zone record whenever a virtual machine gets created, changes its’ IP address, or gets deleted.</p>
<p> Note</p>
<p>A Virtual Network can only have autoregistration enabled on one Private DNS Zone link. If you try to link two private DNS zones to the same VNet, only one of the links will be enabled for autoregistration.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/4-link-zones.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/4-link-zones.png" alt="Diagram of private DNS zones on the same Vnet."></a></p>
<p>There are limits on how many private DNS zones you can create, how many records sets, and records per record set.</p>
<p>Single-labelled private DNS zones aren’t supported. Your private DNS zone must have two or more labels. For example, contoso.com has two labels separated by a dot. A private DNS zone can have a maximum of 34 labels.</p>
<p>You can’t create zone delegations (NS records) in a private DNS zone. If you intend to use a child domain, you can directly create the domain as a private DNS zone. Then you can link it to the virtual network without setting up a nameserver delegation from the parent zone.</p>
<p>To create a Private DNS zone:</p>
<ol>
<li>In the Azure portal, <strong>type private dns zones</strong> in the search text box and press <strong>Enter</strong>. The <strong>Private DNS zones</strong> blade is displayed.</li>
<li>Select <strong>Create</strong>. The <strong>Create Private DNS</strong> zone blade is displayed.</li>
<li>Type or select the following:<ol>
<li>Subscription</li>
<li>Resource group</li>
<li>Name – this must be unique within the Resource group.</li>
<li>Resource group location</li>
</ol>
</li>
<li>Select <strong>Review + Create</strong>.</li>
<li>Select <strong>Create</strong>.</li>
</ol>
<p>To troubleshoot issues relating to DNS zones:</p>
<ol>
<li>Review the Azure DNS audit logs.</li>
<li>Check that each DNS zone name is unique within its resource group.</li>
<li>Do not create zone names that could affect the DNS resolution of Microsoft services, such as azure.com, and the like.</li>
<li>Do not use a .local domain for your private DNS zone. Not all operating systems support this.</li>
<li>Check you have not reached the maximum number of zones for your subscription. If so, you will see the error message “You have reached or exceeded the maximum number of zones in subscription {subscription ID}.” Either use a different Azure subscription, delete some zones, or contact Azure Support to raise your subscription limit.</li>
<li>“The zone ‘{zone name}’ is not available” indicates that Azure DNS is unable to allocate name servers for this DNS zone. Rename the zone or contact Azure support to allocate name servers for you.</li>
</ol>
<p>To troubleshoot issues related to DNS records:</p>
<ol>
<li>The record set already exists. Record set names must be unique within the zone.</li>
<li>CNAME records must not be created at the apex.</li>
<li>CNAME record sets cannot have the same name as other record sets.</li>
<li>Apex records consist of the ‘@’ character.</li>
<li>The maximum number of records that can be created is shown in the Azure portal, under the ‘Properties’ for the zone. If you’ve reached this limit, then either delete some record sets or contact Azure Support to raise your record limit for this zone.</li>
</ol>
<p> Note</p>
<p>Apex records are records added at the root of the zone.</p>
<p>To troubleshoot resolving DNS records:</p>
<ol>
<li>Check that the fully qualified name, zone name, and record type are correct.</li>
<li>Check that no DNS records have the same name, even if they are of different types.</li>
<li>Check that the DNS records resolve correctly on the Azure DNS name servers.</li>
<li>Check name resolution with a service such as <strong><a href="https://digwebinterface.com/">digwebinterface</a></strong>. This tests the current state of the name servers by removing proxy servers and cached results.</li>
<li>Check that the name servers are correct for your DNS zone, as shown in the Azure portal.</li>
<li>Check that the DNS domain name has been correctly <a href="https://learn.microsoft.com/en-us/azure/dns/dns-domain-delegation">delegated to Azure DNS</a>. Use nslookup to validate that the zone is delegated to in-built Azure DNS.</li>
</ol>
<p> Note</p>
<p>If your environment uses a hybrid approach and uses both private zone DNS and public zone, records in private zone DNS will be resolved first.</p>
<p>To troubleshoot resolving DNS records:</p>
<ol>
<li>Check that the fully qualified name, zone name, and record type is correct.</li>
<li>Check that no DNS records have the same name, even if they are of different types.</li>
<li>Check that the DNS records resolve correctly on the Azure DNS name servers.</li>
<li>Check name resolution with a service such as <a href="https://digwebinterface.com/">digwebinterface</a>. This removes proxy servers and cached results, and only tests the current state of the name servers.</li>
<li>Check that the name servers are correct for your DNS zone, as shown in the Azure portal.</li>
</ol>
<p>Azure Private DNS zones have the following limitations:</p>
<ul>
<li>If automatic registration of VM DNS is enabled, only one private zone can be linked to a virtual network. You can however link multiple virtual networks to a single DNS zone.</li>
<li>Reverse DNS works only for private IP space in the linked virtual network.</li>
<li>Reverse DNS for a private IP address in linked virtual network will return internal.cloudapp.net as the default suffix for the virtual machine. For virtual networks that are linked to a private zone with autoregistration enabled, reverse DNS for a private IP address returns two fully qualified domain names (FQDNs): one with default the suffix internal.cloudapp.net and another with the private zone suffix.</li>
<li>Conditional forwarding isn’t currently natively supported. To enable resolution between Azure and on-premises networks, see <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances">Name resolution for VMs and role instances.</a></li>
</ul>
<h2 id="2-3-Troubleshoot-custom-Domain-Name-System-configuration-issues"><a href="#2-3-Troubleshoot-custom-Domain-Name-System-configuration-issues" class="headerlink" title="2.3 Troubleshoot custom Domain Name System configuration issues"></a>2.3 Troubleshoot custom Domain Name System configuration issues</h2><p>As well as Azure in-built DNS, you also have the option to configure a custom DNS server. For example, you might want to integrate with on-premises Active Directory or resolve names between VNets.</p>
<p>To use Azure custom DNS, you must add a list of IP addresses that point to DNS servers. This list will be distributed to any devices in the virtual network that were using the Azure DNS server.</p>
<p>There are some limitations with Azure custom DNS:</p>
<ul>
<li>You cannot register a public domain name using Azure custom DNS.</li>
<li>DNSSEC is not enabled.</li>
<li>You cannot do zone transfers.</li>
</ul>
<p> Note</p>
<p>Updating from in-built DNS (Inherit from virtual network) to custom DNS will restart all affected VMs.</p>
<p>In DNS settings, you can choose whether to inherit DNS settings from the virtual network or use custom DNS. Check that you have saved any change from Azure in-built DNS to custom DNS, otherwise, the changes will not persist.</p>
<p>To test whether custom DNS is working, use the PowerShell command:</p>
<p>Copy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">test-netconnection -computername -port  </span><br></pre></td></tr></table></figure>

<p>To check your custom DNS is using the correct DNS server, from a command prompt type:</p>
<p>Copy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Ipconfig /all</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Exercise-Name-resolution-issues"><a href="#Exercise-Name-resolution-issues" class="headerlink" title="Exercise: Name resolution issues"></a>Exercise: Name resolution issues</h1><p>Completed100 XP</p>
<ul>
<li>10 minutes</li>
</ul>
<p> Important</p>
<p>You need your own <a href="https://azure.microsoft.com/free/">Azure subscription</a> to complete the exercises in this module. If you don’t have an Azure subscription, you can still view the demonstration video at the bottom of this page.</p>
<p>Sign in to the <a href="https://portal.azure.com/learn.docs.microsoft.com">Azure portal</a> using the same account you used to activate the sandbox.</p>
<p>If you have not already run the script in unit 2, please do so now so you can follow the exercise below.</p>
<p>You work for Contoso as a network engineer, and users are complaining that they cannot access VM1 or VM2. You have configured two Azure virtual networks: VNet1 and VNet2. They are connected with peering.</p>
<table>
<thead>
<tr>
<th align="left"><strong>Virtual network</strong></th>
<th align="left"><strong>IPv4 network address</strong></th>
<th align="left"><strong>Subnet</strong></th>
<th align="left"><strong>IPv4 network address</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">VNet1</td>
<td align="left">10.1.0.0&#x2F;16</td>
<td align="left">Subnet1</td>
<td align="left">10.1.1.0&#x2F;24</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">Subnet2</td>
<td align="left">10.1.2.0&#x2F;24</td>
</tr>
<tr>
<td align="left">VNet2</td>
<td align="left">10.2.0.0&#x2F;16</td>
<td align="left">Default</td>
<td align="left">10.2.0.0&#x2F;24</td>
</tr>
</tbody></table>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-network-1.png" alt="Screenshot showing the topology of v net 1."></p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-network-2.png" alt="Screenshot showing the topology of v net 2."></p>
<table>
<thead>
<tr>
<th align="left"><strong>Virtual machine</strong></th>
<th align="left"><strong>Operating system</strong></th>
<th align="left"><strong>VNet and subnet</strong></th>
<th align="left"><strong>DNS domain</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">VM1</td>
<td align="left">Windows Server 2019</td>
<td align="left">VNet1, Subnet1</td>
<td align="left">contoso.com</td>
</tr>
<tr>
<td align="left">VM2</td>
<td align="left">Windows Server 2019</td>
<td align="left">VNet1, Subnet2</td>
<td align="left">contoso.com</td>
</tr>
<tr>
<td align="left">VM3</td>
<td align="left">Windows Server 2019</td>
<td align="left">VNet2, default</td>
<td align="left">contoso.com</td>
</tr>
</tbody></table>
<h2 id="Diagnosis"><a href="#Diagnosis" class="headerlink" title="Diagnosis"></a>Diagnosis</h2><p>Use Nslookup on VM1 and VM2 and check you get the following results:</p>
<ul>
<li>vm1.contoso.com – success</li>
<li>vm2.contoso.com – success</li>
<li>vm3.contoso.com – can’t find</li>
</ul>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-nslookup.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-nslookup.png" alt="Screenshot showing the results of n s lookup in the command prompt."></a></p>
<p>Nslookup on VM3 gives these results:</p>
<ul>
<li>vm1.contoso.com – can’t find</li>
<li>vm2.contoso.com – can’t find</li>
<li>vm3.contoso.com – can’t find</li>
</ul>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-nslookup-3.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-nslookup-3.png" alt="Screenshot of results of running n s lookup in the command prompt on vm3."></a></p>
<h2 id="Diagnosis-1"><a href="#Diagnosis-1" class="headerlink" title="Diagnosis"></a>Diagnosis</h2><h3 id="Examine-the-Internet-Protocol-configuration-of-the-Virtual-Machines"><a href="#Examine-the-Internet-Protocol-configuration-of-the-Virtual-Machines" class="headerlink" title="Examine the Internet Protocol configuration of the Virtual Machines"></a>Examine the Internet Protocol configuration of the Virtual Machines</h3><p>Connect to each VM using Remote Desktop. Open a command prompt window and type: ipconfig &#x2F;all</p>
<p>The IP addresses are:</p>
<ul>
<li>VM1 &#x3D; 10.1.1.4</li>
<li>VM2 &#x3D; 10.1.2.4</li>
<li>VM3 &#x3D; 10.2.0.4</li>
</ul>
<p>The DNS server address is 168.63.129.16, which is the wire server.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-network-configure.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-network-configure.png" alt="Screenshot of command prompt results after running i p config / all."></a></p>
<h3 id="Test-network-connectivity"><a href="#Test-network-connectivity" class="headerlink" title="Test network connectivity"></a>Test network connectivity</h3><p>Use <strong>ping</strong> to test network connectivity between the three virtual machines.</p>
<p>All three VMs are able to ping each other, so network connectivity is good at the IP level (OSI Layer 3).</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-ping-connectivity.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-ping-connectivity.png" alt="Screenshot of command screen after pinging for network connectivity."></a></p>
<h3 id="Examine-the-Azure-resource-group"><a href="#Examine-the-Azure-resource-group" class="headerlink" title="Examine the Azure resource group"></a>Examine the Azure resource group</h3><p>There are two virtual networks (VNets) called VNet1 and VNet2.</p>
<p>There is a private DNS zone, which is contoso.com.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-resource-group.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-resource-group.png" alt="Screenshot showing the resources within the resource group."></a></p>
<p>The private DNS zone has vm1 and vm2 automatically registered, but vm3 does not appear.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-no-machine-3.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-no-machine-3.png" alt="Screenshot showing that that vm 3 is not appearing."></a></p>
<p>Go to <strong>Settings</strong> &gt; <strong>Virtual network links</strong>. We see that the private DNS zone is linked to VNet1, but not to VNet2.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-virtual-network.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-virtual-network.png" alt="Screenshot showing the virtual links."></a></p>
<h2 id="Resolution"><a href="#Resolution" class="headerlink" title="Resolution"></a>Resolution</h2><h3 id="Link-the-private-Domain-Name-System-zone-to-Virtual-Network-2"><a href="#Link-the-private-Domain-Name-System-zone-to-Virtual-Network-2" class="headerlink" title="Link the private Domain Name System zone to Virtual Network 2"></a>Link the private Domain Name System zone to Virtual Network 2</h3><p>Navigate to the private DNS zone (contoso.com) and select the Virtual network links page. Add a new link.</p>
<ul>
<li>Link name: vnet2_dns</li>
<li><input disabled type="checkbox"> I know the resource ID of virtual network – leave unchecked</li>
<li>Subscription: <the name of your subscription></the></li>
<li>Virtual network: VNet2</li>
<li>Configuration: [X] Enable auto registration</li>
</ul>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-add-virtual-network.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-add-virtual-network.png" alt="Screenshot showing the add virtual network link screen."></a></p>
<p>After you select OK, it may take a few minutes for the link to be created. Select Refresh occasionally to see the latest status. Wait until the link status says Completed.</p>
<h3 id="Inspect-the-Domain-Name-System-name-table"><a href="#Inspect-the-Domain-Name-System-name-table" class="headerlink" title="Inspect the Domain Name System name table"></a>Inspect the Domain Name System name table</h3><p>Navigate to the Overview page and inspect the DNS name table.</p>
<p>VM1, VM2, and VM3 should appear. You may need to wait a short while for VM3 to appear. Select Refresh if necessary.</p>
<p>Nslookup on VM1 and VM2 should resolve vm3.contoso.com.</p>
<p> Tip</p>
<p>If VM3 does not appear after several minutes, try restarting the VM.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-table.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-table.png" alt="Screenshot showing the d n s table."></a></p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-command-prompt-machine.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-command-prompt-machine.png" alt="Screenshot showing the results of running the n s lookup commands."></a></p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-command-prompt-lookup.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/name-resolution-issues/media/5-command-prompt-lookup.png" alt="Screenshot of the command prompt showing the results of n s lookup."></a></p>
<p>Optionally, you can test pinging the VMs, using their DNS names.</p>
<ul>
<li>vm1.contoso.com</li>
<li>vm2.contoso.com</li>
<li>vm3.contoso.com</li>
</ul>
<p>In this demonstration you will see how to proactively troubleshoot Conditional Access policies using the What if tool in the Azure portal:</p>
<iframe src="https://www.microsoft.com/en-us/videoplayer/embed/RE4TYML?postJsllMsg=true" frameborder="0" allowfullscreen="true" data-linktype="external" title="Video Player" style="box-sizing: inherit; outline-color: inherit; margin: 0px; padding: 0px; border: 0px; width: 640px; height: 360px; position: absolute; inset: 0px;"></iframe>



















<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>In this module you have learned how to troubleshoot Azure in-built name resolution, custom name resolution, and Azure private zone. You have learned how to troubleshoot public DNS, and domain delegation.</p>
<p>Now that you have completed this module you know how to troubleshoot:</p>
<ul>
<li>Troubleshoot built-in Azure name resolution issues</li>
<li>Troubleshoot custom Azure name resolutions issues</li>
<li>Troubleshoot Azure Private Zone DNS</li>
<li>Public DNS issues</li>
<li>Reviewing the Azure DNS logs</li>
</ul>
<h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><p>For more information about the articles discussed in this module, see:</p>
<h3 id="Azure-Built-in-Name-resolution"><a href="#Azure-Built-in-Name-resolution" class="headerlink" title="Azure Built-in Name resolution"></a>Azure Built-in Name resolution</h3><p><a href="https://learn.microsoft.com/en-us/azure/dns/dns-troubleshoot">Azure DNS troubleshooting guide</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances">Name resolution for resources in Azure virtual networks</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/dns/dns-delegate-domain-azure-dns">Tutorial: Host your domain in Azure DNS</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/dns/dns-getstarted-powershell">Create a DNS zone</a></p>
<h3 id="Azure-DNS-Private-Zones"><a href="#Azure-DNS-Private-Zones" class="headerlink" title="Azure DNS Private Zones"></a>Azure DNS Private Zones</h3><p><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/insights/dns-analytics">DNS Analytics solution in Azure Monitor</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/dns/private-dns-getstarted-portal">Quickstart: Create an Azure private DNS zone using the Azure portal</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/dns/dns-getstarted-powershell">Quickstart: Create an Azure DNS zone and record using Azure PowerShell</a></p>
<p><a href="https://learn.microsoft.com/en-us/windows-server/networking/dns/troubleshoot/troubleshoot-dns-server">Troubleshooting DNS Servers</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/dns/dns-domain-delegation">Azure DNS delegation overview</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/azure-subscription-service-limits">Azure subscription limits and quotas</a></p>
<h3 id="Custom-DNS"><a href="#Custom-DNS" class="headerlink" title="Custom DNS"></a>Custom DNS</h3><p><a href="https://learn.microsoft.com/en-us/azure/dns/dns-web-sites-custom-domain">Tutorial - Create custom Azure DNS records for a web app</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-name-resolution-ddns">Using dynamic DNS to register hostnames in Azure</a></p>
<h3 id="Log-Analytics"><a href="#Log-Analytics" class="headerlink" title="Log Analytics"></a>Log Analytics</h3><p><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/agents/agent-windows">Install Log Analytics agent on Windows computers</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/agents/om-agents">Connect Operations Manager to Azure Monitor</a></p>
<p><a href="https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.DnsAnalyticsOMS?tab=Overview">Microsoft Azure Marketplace</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/insights/solutions?tabs=portal">Monitoring solutions in Azure Monitor</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/insights/dns-analytics">Gather insights about your DNS infrastructure with the DNS Analytics Preview solution</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-720-Troubleshoot-platform-as-a-service-issues-in-Microsoft-Azure-4</title>
    <url>/2022/11/14/AZ-720-Troubleshoot-platform-as-a-service-issues-in-Microsoft-Azure-4/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>You work as a support engineer supporting Azure Platform as a service (PaaS). If there are connectivity issues, you need to be able to identify the cause of the issue quickly and accurately. Furthermore, where possible, you need to resolve the issue and re-establish connectivity.</p>
<p>Azure PaaS services, such as Azure virtual machines, supply scalable, on-demand resources without the costs of buying and managing computer hardware. To benefit from Azure PaaS services, you must be able to troubleshoot connectivity issues quickly and effectively both from on-premises user to an Azure PaaS service and between PaaS services.</p>
<p>In this module we will look at how to monitor and troubleshoot PaaS services, together with PaaS integration issues.</p>
<h2 id="Learning-objectives"><a href="#Learning-objectives" class="headerlink" title="Learning objectives"></a>Learning objectives</h2><p>After completing this module, you’ll be able to:</p>
<ul>
<li>Troubleshoot Azure Storage.</li>
<li>Troubleshoot Azure Private Link connectivity problems and Firewalls for PaaS services.</li>
<li>Troubleshoot Content Delivery Network issues.</li>
<li>Troubleshoot connections between a VM and a PaaS service.</li>
<li>Troubleshoot integration of PaaS services with virtual networks</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Demonstrate an understanding of the OSI model</li>
<li>Demonstrate an understanding of PowerShell</li>
<li>Demonstrate an understanding of Azure CLI</li>
</ul>
<h1 id="Troubleshoot-Azure-Storage"><a href="#Troubleshoot-Azure-Storage" class="headerlink" title="Troubleshoot Azure Storage"></a>Troubleshoot Azure Storage</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>Troubleshooting Azure Storage issues is complex, and it’s advisable to proactively monitor and log Azure Storage to detect any unexpected changes.</p>
<p>Your application might use one or more storage systems including Microsoft Azure Storage Tables, Blobs, Queues, or Files. Furthermore, data might be stored in relational or non-relational databases.</p>
<p>You should aim to remove the need for retrospectively troubleshooting problems with Azure Storage by proactively monitoring and reviewing logs for Storage services. Metrics such as slow response times would lead to a review of logs which can then determine the nature of the issue and allow for focused troubleshooting.</p>
<p>To monitor your Storage services, you can use Azure Monitor for Storage accounts to view key Storage metrics for performance, capacity, and availability without any further configuration. Azure Monitor for Storage accounts provides a selection of dashboards and charts to give you detailed monitoring data for your Storage services. You can also enable storage metrics. The counters for storage metrics can be aggregated by hour or by minute and you can choose to display key metrics in the Azure portal. Storage metrics aren’t in preview, but it does require configuration.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/2-storage-accounts.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/2-storage-accounts.png" alt="Screenshot of Azure Monitor Storage account."></a></p>
<p>For more information on troubleshooting Azure Storage, see <a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-monitoring-diagnosing-troubleshooting?tabs=dotnet">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</a>.</p>
<h1 id="Troubleshoot-Azure-Private-Link-connectivity-problems-and-firewalls-for-virtual-machines"><a href="#Troubleshoot-Azure-Private-Link-connectivity-problems-and-firewalls-for-virtual-machines" class="headerlink" title="Troubleshoot Azure Private Link connectivity problems and firewalls for virtual machines"></a>Troubleshoot Azure Private Link connectivity problems and firewalls for virtual machines</h1><p>Completed100 XP</p>
<ul>
<li>4 minutes</li>
</ul>
<p>Connectivity between your private network and an Azure Platform as a Service (PaaS) could be blocked by a misconfigured private link or misconfigured firewall.</p>
<h2 id="Troubleshoot-Azure-Private-Link-connectivity-problems"><a href="#Troubleshoot-Azure-Private-Link-connectivity-problems" class="headerlink" title="Troubleshoot Azure Private Link connectivity problems"></a>Troubleshoot Azure Private Link connectivity problems</h2><p>Azure Private Link provides a link from your virtual network to the Azure PaaS services over the Microsoft backbone network rather than over the public Internet.</p>
<h2 id="Deployment-troubleshooting"><a href="#Deployment-troubleshooting" class="headerlink" title="Deployment troubleshooting"></a>Deployment troubleshooting</h2><p>To choose the source IP address for the Private Link service, you must first disable private link service network policies.</p>
<p>When creating a Private Link service using the Azure portal the privateLinkServiceNetworkPolicies setting is automatically disabled. If this is manually enabled, you should disable it using Azure PowerShell or Azure CLI before selecting the source IP address.</p>
<p>Azure CLICopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">az network vnet subnet update \</span><br><span class="line"></span><br><span class="line">  --name default \</span><br><span class="line"></span><br><span class="line">  --resource-group demoResourceGroup \</span><br><span class="line"></span><br><span class="line">  --vnet-name demoVirtualNetwork \</span><br><span class="line"></span><br><span class="line">  --disable-private-link-service-network-policies true</span><br></pre></td></tr></table></figure>

<h3 id="Connectivity-troubleshooting"><a href="#Connectivity-troubleshooting" class="headerlink" title="Connectivity troubleshooting"></a>Connectivity troubleshooting</h3><p>In your browser navigate to the <a href="https://portal.azure.com/">Private Link Center</a> in the Azure portal.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/3-private-endpoints.png" alt="Screenshot of Private endpoints."></p>
<ul>
<li>Verify that the <strong>Alias</strong> and <strong>Resource ID</strong> for the private link service are correct.</li>
<li>Verify that the <strong>Visibility</strong> of the private link service is correct.</li>
<li>Verify that the <strong>Load balancer</strong> for the private link service is correct, select the load balance, and verify the <strong>Frontend IP configuration</strong>, the <strong>Backend pools</strong>, and the <strong>Load balancing rules</strong> are correct.</li>
<li>In the private link service, select <strong>Metrics</strong> and verify that data is moving when you attempt to connect to the private link service.</li>
</ul>
<p>For more information on troubleshooting Azure Private Link connectivity problems, see <a href="https://learn.microsoft.com/en-us/azure/private-link/troubleshoot-private-link-connectivity">Troubleshoot Azure Private Link connectivity problems</a>.</p>
<h2 id="Troubleshoot-firewalls-for-Platform-as-a-Service-PaaS"><a href="#Troubleshoot-firewalls-for-Platform-as-a-Service-PaaS" class="headerlink" title="Troubleshoot firewalls for Platform as a Service (PaaS)"></a>Troubleshoot firewalls for Platform as a Service (PaaS)</h2><p>Azure firewall is intended to filter network traffic to protect your resources. A misconfigured firewall can lead to legitimate traffic also being blocked.</p>
<p>When troubleshooting firewall issues ensure that you include the following steps:</p>
<ul>
<li>Review the <a href="https://learn.microsoft.com/en-us/azure/firewall/firewall-faq">Azure firewall</a> FAQ and ensure that firewalls are correctly configured.</li>
<li>For Azure storage firewalls review any error messages and also download and review the storage diagnostics logs and resolve any issues.</li>
</ul>
<h1 id="Troubleshoot-Content-Delivery-Network-issues-with-Microsoft-Azure"><a href="#Troubleshoot-Content-Delivery-Network-issues-with-Microsoft-Azure" class="headerlink" title="Troubleshoot Content Delivery Network issues with Microsoft Azure"></a>Troubleshoot Content Delivery Network issues with Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>4 minutes</li>
</ul>
<p>Content Delivery Networks (CDNs) have particular troubleshooting steps as well as connectivity issues. It is important to consider specific CDN issues, such as the amount of time it takes to create some CDN services and compression issues.</p>
<h2 id="404-status"><a href="#404-status" class="headerlink" title="404 status"></a>404 status</h2><p>If an HTTP 404 error is returned, you should complete the following troubleshooting steps:</p>
<ul>
<li>Wait 90 minutes after CDN creation.<ul>
<li>Depending on the type of CDN, it can take up to 90 minutes to be available.</li>
</ul>
</li>
<li>Verify that the origin file is available.<ul>
<li>Open a private or incognito browsing session and browse directly to the file to ensure that it is available.</li>
</ul>
</li>
<li>Check endpoint settings.<ul>
<li>Browse to the CDN profile in the Azure portal, select the relevant endpoint, and select the origin.</li>
<li>Verify the origin type, hostname, HTTP port, and HTTPS port.</li>
<li>For the endpoint page, select <strong>Configure</strong>, and verify the <strong>Origin host header</strong> and <strong>Origin path</strong>.</li>
</ul>
</li>
</ul>
<h2 id="Compression-errors"><a href="#Compression-errors" class="headerlink" title="Compression errors"></a>Compression errors</h2><p>If compression is enabled for the endpoint, but files are returned uncompressed, perform the following troubleshooting steps:</p>
<ul>
<li>In the browser’s developer tools, verify that the request is being sent to the endpoint URL and the request contains an <strong>Accept-Encoding</strong> header which contains <strong>gzip</strong>, <strong>deflate</strong>, or <strong>bzip2</strong>.</li>
<li>Verify that compression is enabled and the relevant file types are included.</li>
<li>For Verizon CDN profiles, use your browser’s developer tools to verify that the file is cached in the same region as the request.</li>
<li>For Verizon CDN profiles, verify that the file is between 128 bytes and 3 MB.</li>
<li>Check for a <strong>Via</strong> header in the request at the origin server. A <strong>Via</strong> HTTP header signifies that the request is going through a proxy server. By default, Microsoft IIS servers do not compress responses that contain a <strong>Via</strong> header. To override this, you would need to reconfigure your IIS server.</li>
</ul>
<h2 id="CA-certificates"><a href="#CA-certificates" class="headerlink" title="CA certificates"></a>CA certificates</h2><p>Verify that the CA certificate is in the <strong>Included CA Certificate list</strong> at the <strong>Common CA Database</strong> (CCADB).</p>
<h2 id="Subscription-type"><a href="#Subscription-type" class="headerlink" title="Subscription type"></a>Subscription type</h2><p>Check the subscription type because <strong>Free</strong>, <strong>Trial</strong>, and <strong>Pay-as-you-go</strong> subscriptions will limit the CDN services available and might apply bandwidth throttling.</p>
<h1 id="Troubleshoot-connections-between-virtual-machines-in-Microsoft-Azure"><a href="#Troubleshoot-connections-between-virtual-machines-in-Microsoft-Azure" class="headerlink" title="Troubleshoot connections between virtual machines in Microsoft Azure"></a>Troubleshoot connections between virtual machines in Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>5 minutes</li>
</ul>
<p>When troubleshooting connections between a virtual machine (VM) and a Platform as a Service (PaaS), it is important to assess whether a problem is due to the VM, the PaaS service, a network issue, or an issue with a specific service, such as email or Microsoft Graph.</p>
<h2 id="Connecting-to-an-application-running-on-an-Azure-virtual-machine"><a href="#Connecting-to-an-application-running-on-an-Azure-virtual-machine" class="headerlink" title="Connecting to an application running on an Azure virtual machine"></a>Connecting to an application running on an Azure virtual machine</h2><p>To troubleshoot connectivity to an application running in an Azure VM, perform the following steps:</p>
<ul>
<li>Access the application on the target VM.<ul>
<li>If you cannot access the application check that it is running and listening on the correct TCP and UDP ports.</li>
</ul>
</li>
<li>Access the application from another VM in the same virtual network.<ul>
<li>If this fails, check anything that could be filtering traffic such as a firewall, a load balancer, network monitoring, or intrusion detection.</li>
</ul>
</li>
<li>Access the application from another VM on another virtual network.<ul>
<li>If you have implemented load-balancing, verify that the probe protocol and port number are correct and are not being blocked by firewalls.</li>
<li>If you cannot access the application verify that incoming traffic is allowed by endpoint configuration, Access Control Lists (ACLs), inbound NAT rules, and Network Security Groups (NSGs).</li>
<li>If you can access the application, verify that your Internet edge device allows traffic from the Azure VM and to the client computer.</li>
</ul>
</li>
</ul>
<h2 id="Sending-outbound-email-messages"><a href="#Sending-outbound-email-messages" class="headerlink" title="Sending outbound email messages"></a>Sending outbound email messages</h2><p>Outbound email messages on TCP port 25 are blocked by Azure platform for the following subscriptions:</p>
<ul>
<li>Pay-as-you go</li>
<li>MSDN</li>
<li>Azure Pass</li>
<li>Azure in Open</li>
<li>Education</li>
<li>Azure for Students</li>
<li>Free Trial</li>
<li>Any Visual Studio subscription</li>
<li>Cloud Solution Provider</li>
<li>Microsoft Partner Network (MPN)</li>
<li>BizSpark Plus</li>
<li>Azure Sponsorship</li>
</ul>
<p>VMs using Enterprise Agreement subscriptions do not have outgoing port 25 email messages blocked by the Azure Service but might be blocked by the external domain.</p>
<p>It is recommended that you use authenticated SMTP relay services in your VM which will minimize the likelihood of your messages being blocked or moved to a SPAM folder regardless of the type of subscription.</p>
<h2 id="Azure-cloud-service"><a href="#Azure-cloud-service" class="headerlink" title="Azure cloud service"></a>Azure cloud service</h2><p>Cloud service applications can have a wide range of connectivity problems. To resolve Azure cloud services, you should use the relevant scenario in the <a href="https://learn.microsoft.com/en-us/troubleshoot/azure/cloud-services/dev-troubleshoot-series">Azure Cloud Service Troubleshooting Series</a>.</p>
<h2 id="Determine-root-cause-for-throttling-at-service-level"><a href="#Determine-root-cause-for-throttling-at-service-level" class="headerlink" title="Determine root cause for throttling at service level"></a>Determine root cause for throttling at service level</h2><p>Microsoft Graph has a limit of 2000 requests per second. Furthermore, Azure Active Directory (Azure AD) has a limit of requests against resource units after which traffic is throttle. For more information, see Throttling and service limits to consider for testing.</p>
<h1 id="Troubleshoot-integration-of-virtual-machines-with-virtual-networks-in-Microsoft-Azure"><a href="#Troubleshoot-integration-of-virtual-machines-with-virtual-networks-in-Microsoft-Azure" class="headerlink" title="Troubleshoot integration of virtual machines with virtual networks in Microsoft Azure"></a>Troubleshoot integration of virtual machines with virtual networks in Microsoft Azure</h1><p>Completed100 XP</p>
<ul>
<li>6 minutes</li>
</ul>
<h2 id="Troubleshoot-subnet-delegation-issues"><a href="#Troubleshoot-subnet-delegation-issues" class="headerlink" title="Troubleshoot subnet delegation issues"></a>Troubleshoot subnet delegation issues</h2><p>When you delegate a subnet to an Azure service, you allow that service to perform basic configuration of the subnet. This would allow a customer to integrate your Azure service into their virtual network.</p>
<p>If a customer cannot configure a particular property, it is likely that the deployment model for that Azure service has been defined to not support changes to that property.</p>
<h2 id="Integration-of-platform-as-a-service-services-with-virtual-networks"><a href="#Integration-of-platform-as-a-service-services-with-virtual-networks" class="headerlink" title="Integration of platform-as-a-service services with virtual networks"></a>Integration of platform-as-a-service services with virtual networks</h2><p>Azure services can have their network access limited to your virtual network infrastructure including peered virtual networks and on-premises networks. This is defined per Azure service.</p>
<p>If the Azure service is not accessible, consider the following points:</p>
<ul>
<li><p>If the instance of the service is deployed inside the virtual network, it can only be accessed from the virtual network or from on-premises networks.</p>
</li>
<li><p>If you are using a private endpoint, the instance of the service is effectively part of your virtual network and only accessible to the virtual network.</p>
</li>
<li><p>Virtual network service tags allow you to deny traffic to your Azure service to or from public endpoints. In the following diagram all traffic to Azure Storage and Azure SQL Database is allowed, but any other outbound traffic is denied.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/6-deny-outbound-traffic.png" alt="Diagram showing the deny outbound traffic settings."></p>
</li>
</ul>
<h2 id="Troubleshoot-Azure-Private-Endpoint-connectivity-problems"><a href="#Troubleshoot-Azure-Private-Endpoint-connectivity-problems" class="headerlink" title="Troubleshoot Azure Private Endpoint connectivity problems"></a>Troubleshoot Azure Private Endpoint connectivity problems</h2><p>Perform the following steps to Troubleshoot Azure Private Endpoint connectivity problems:</p>
<ul>
<li><p>In <a href="https://portal.azure.com/">Private Link Center</a>, select <strong>Private endpoints</strong>, and select the endpoint that you want to troubleshoot.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/6-private-link-center.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/6-private-link-center.png" alt="Screenshot of the private Link Center."></a></p>
</li>
<li><p>Verify that the connection is approved and that the IP address and DNS settings are correct.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/6-private-endpoint-metrics.png" alt="Screenshot showing the private endpoint metrics."></p>
</li>
<li><p>Select <strong>Metrics</strong> and verify that data is moving in and out.</p>
</li>
<li><p>Select the client VM, select <strong>Connection troubleshoot</strong>, select the <strong>Outbound connections</strong> tab, and select <strong>Test by FQDN</strong>.</p>
</li>
<li><p>In the test results, verify the DNS settings and the network security group (NSG) outbound rules.</p>
</li>
<li><p>If the Private Endpoint and source VM are on different, non-peered, VNETs, check connectivity between the VNETs.</p>
</li>
<li><p>Check the configuration of the private link and, if necessary, run through the steps in <a href="https://learn.microsoft.com/en-us/azure/private-link/troubleshoot-private-link-connectivity">Troubleshoot Azure Private Link connectivity problems</a>.</p>
</li>
<li><p>Try to find the specific issue by trying to connect from inside and outside the VNET with different virtual machines and connecting to different services.</p>
</li>
<li><p>If using a load balancer, check if the backend pool is healthy.</p>
</li>
<li><p>If the connection is unresolved, contact <a href="https://portal.azure.com/">Azure Support</a>.</p>
</li>
</ul>
<h1 id="Exercise-Troubleshoot-virtual-machine-connection"><a href="#Exercise-Troubleshoot-virtual-machine-connection" class="headerlink" title="Exercise: Troubleshoot virtual machine connection"></a>Exercise: Troubleshoot virtual machine connection</h1><p>Completed100 XP</p>
<ul>
<li>9 minutes</li>
</ul>
<p>This module requires a sandbox to complete.</p>
<p>A <a href="https://learn.microsoft.com/en-us/training/support/faq?pivots=sandbox">sandbox</a> gives you access to free resources. Your personal subscription will not be charged. The sandbox may only be used to complete training on Microsoft Learn. Use for any other reason is prohibited, and may result in permanent loss of access to the sandbox.</p>
<p>Microsoft provides this lab experience and related content for educational purposes. All presented information is owned by Microsoft and intended solely for learning about the covered products and services in this Microsoft Learn module.</p>
<p>Activate sandbox</p>
<p>In this exercise you’ll troubleshoot connection issues between virtual machines running in Azure.</p>
<h2 id="Create-the-exercise-environment"><a href="#Create-the-exercise-environment" class="headerlink" title="Create the exercise environment"></a>Create the exercise environment</h2><p>Using the Cloud Shell on the right, run these commands to create the example topology. The environment will take approximately 5 minutes to build.</p>
<ol>
<li><p>Clone the setup script from GitHub.</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/MicrosoftDocs/mslearn-troubleshoot-platform-as-service-issues networking</span><br></pre></td></tr></table></figure>
</li>
<li><p>Run the setup script.</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash networking/setup.sh</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h2><p>You need to find the causes of connectivity problems to an Azure virtual machine using SSH.</p>
<p>Sign in to the <a href="https://portal.azure.com/learn.docs.microsoft.com">Azure portal</a> with the same credentials you used to start the sandbox.</p>
<ol>
<li><p>In the resource menu, select All <strong>Resources</strong>.</p>
</li>
<li><p>Select <strong>LabClientVM</strong>.</p>
</li>
<li><p>On the top row of the <strong>LabClientVM Overview</strong> page, select <strong>Connect</strong> and select <strong>SSH</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/7-exercise-1-connect.png" alt="screen shot showing the connect option for a virtual machine."></p>
</li>
<li><p>Notice that there is a <strong>Test your connection</strong> link. This provides a troubleshooter to test connections between resources, but this functionality is not available in this sandbox and we will view the settings manually.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/7-exercise-1-test-connection.png" alt="Screen shot showing the test your connection option."></p>
</li>
<li><p>Select <strong>Networking</strong>.</p>
</li>
<li><p>In the <strong>Network security group</strong> section, notice that there is a rule at the top of the priority list that will allow TCP connections on port 22.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/7-exercise-1-network-rule-allow.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/7-exercise-1-network-rule-allow.png" alt="Screenshot of rule to allow SSH"></a></p>
</li>
<li><p>At the top of the screen, select <strong>All resources</strong>.</p>
</li>
<li><p>Select <strong>LabVM</strong>.</p>
</li>
<li><p>Select <strong>Networking</strong>.</p>
</li>
<li><p>In the <strong>Network security group</strong> section, notice that there is not a rule at the top of the priority list that will allow TCP connections on port 22.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/7-exercise-1-network-rule-deny.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/7-exercise-1-network-rule-deny.png" alt="Screenshot showing that there is no rule to allow SSH connections."></a></p>
</li>
<li><p>Notice that, except for load balancers and virtual networks, the highest priority rule will deny all inbound traffic. This will cause connectivity problems.</p>
</li>
<li><p>Keep the tab open to the Azure portal for the next exercise.</p>
</li>
</ol>
<h1 id="Exercise-Resolve-virtual-machine-connection"><a href="#Exercise-Resolve-virtual-machine-connection" class="headerlink" title="Exercise: Resolve virtual machine connection"></a>Exercise: Resolve virtual machine connection</h1><p>Completed100 XP</p>
<ul>
<li>8 minutes</li>
</ul>
<p>This module requires a sandbox to complete.</p>
<p>A <a href="https://learn.microsoft.com/en-us/training/support/faq?pivots=sandbox">sandbox</a> gives you access to free resources. Your personal subscription will not be charged. The sandbox may only be used to complete training on Microsoft Learn. Use for any other reason is prohibited, and may result in permanent loss of access to the sandbox.</p>
<p>Microsoft provides this lab experience and related content for educational purposes. All presented information is owned by Microsoft and intended solely for learning about the covered products and services in this Microsoft Learn module.</p>
<p>Activate sandbox</p>
<p>After going through the troubleshooting exercise you now know how to resolve the issues. Follow these steps in the Azure portal:</p>
<ol>
<li><p>Select <strong>Home</strong> to return to the Azure portal home screen.</p>
</li>
<li><p>In the resource menu, select All <strong>Resources</strong>.</p>
</li>
<li><p>Select <strong>LabVM</strong>.</p>
</li>
<li><p>In Settings, <strong>select Networking</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/8-exercise-1-settings-networking.png" alt="Screen shot showing the networking option."></p>
</li>
<li><p>Select <strong>Add inbound port rule</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/8-exercise-1-add-inbound-port-rule.png" alt="Screen shot showing the add inbound rule button."></p>
</li>
<li><p>On the Add inbound security rule tab, type or select the following values:</p>
<ol>
<li><strong>Destination port ranges: 22</strong></li>
<li><strong>Action: Allow</strong></li>
<li><strong>Priority: 100</strong></li>
<li><strong>Name: SSH_port_22</strong></li>
</ol>
</li>
<li><p>Select <strong>Add</strong>.</p>
</li>
<li><p>Wait until the security rule has been deployed.</p>
</li>
<li><p>In <strong>Settings</strong>, select <strong>Connect</strong>.</p>
</li>
<li><p>Select <strong>Test your connection</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/8-exercise-1-test-connection-button.png" alt="screen shot showing the test connection button."></p>
</li>
<li><p>Select <strong>Test connection</strong>.</p>
</li>
<li><p>Notice that connectivity is now allowed and you’ve resolved the connectivity issue.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-platform-service-issues/media/8-exercise-1-network-connectivity-allowed.png" alt="Screen shot showing that connectivity is now allowed."></p>
</li>
</ol>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>You work as a support engineer supporting Azure Platform as a Service (PaaS). If there are connectivity issues, you should now be able to identify the cause of the issue quickly and accurately. Furthermore, where possible, you should be able to resolve the issue and re-establish connectivity.</p>
<p>Now that you’ve completed this module, you should be able to:</p>
<ul>
<li>Troubleshoot Azure Storage.</li>
<li>Troubleshoot Azure Private Link connectivity problems and Firewalls for PaaS services.</li>
<li>Troubleshoot Content Delivery Network issues.</li>
<li>Troubleshoot connections between a virtual machine (VM) and a PaaS service.</li>
<li>Troubleshoot integration of PaaS services with virtual networks.</li>
</ul>
<h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><p>Use these resources to discover more.</p>
<p><a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-monitoring-diagnosing-troubleshooting?tabs=dotnet">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/private-link/troubleshoot-private-link-connectivity">Troubleshoot Azure Private Link connectivity problems</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/firewall/firewall-faq">Azure Firewall</a> FAQ</p>
<p><a href="https://learn.microsoft.com/en-us/azure/cdn/">Azure CDN Documentation</a></p>
<p><a href="https://learn.microsoft.com/en-us/troubleshoot/azure/cloud-services/dev-troubleshoot-series">Azure Cloud Service Troubleshooting Series</a></p>
<p><a href="https://learn.microsoft.com/en-us/troubleshoot/azure/virtual-machines/troubleshoot-app-connection">Troubleshoot application connectivity issues on virtual machines in Azure</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/troubleshoot-outbound-smtp-connectivity">Troubleshoot outbound SMTP connectivity problems in Azure</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/vnet-integration-for-azure-services">Integrate Azure services with virtual networks for network isolation</a></p>
]]></content>
  </entry>
  <entry>
    <title>AZ-720-Troubleshoot-routing-traffic-control-and-load-balancing-in-Microsoft-Azure-7</title>
    <url>/2022/11/14/AZ-720-Troubleshoot-routing-traffic-control-and-load-balancing-in-Microsoft-Azure-7/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>You work for an enterprise level organization that has different locations and many users working remotely. You need to ensure that the infrastructure is robust and stable as you’re responsible for troubleshooting load balancing, routing, and traffic control.</p>
<p>In this module, we will look at troubleshooting routing, traffic control, and load balancing problems.</p>
<h2 id="Learning-objectives"><a href="#Learning-objectives" class="headerlink" title="Learning objectives"></a>Learning objectives</h2><p>After completing this module, you’ll be able to:</p>
<ul>
<li>Understand how user-defined routes interact with the network.</li>
<li>Apply different techniques to determine packet loss.</li>
<li>Choose the most effective load-balancer tool to troubleshoot issues.</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Experience with the OSI model</li>
<li>Experience with PowerShell and Azure CLI</li>
<li>Know how to get to Cloud Shell to run commands</li>
<li>Experience with Visual Studio Code</li>
<li>Demonstrate an understanding of JSON</li>
</ul>
<h1 id="Set-up-troubleshooting-environment"><a href="#Set-up-troubleshooting-environment" class="headerlink" title="Set up troubleshooting environment"></a>Set up troubleshooting environment</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>This module requires a sandbox to complete.</p>
<p>A <a href="https://learn.microsoft.com/en-us/training/support/faq?pivots=sandbox">sandbox</a> gives you access to free resources. Your personal subscription will not be charged. The sandbox may only be used to complete training on Microsoft Learn. Use for any other reason is prohibited, and may result in permanent loss of access to the sandbox.</p>
<p>Microsoft provides this lab experience and related content for educational purposes. All presented information is owned by Microsoft and intended solely for learning about the covered products and services in this Microsoft Learn module.</p>
<p>Activate sandbox</p>
<p>You’ll troubleshoot a load balancing problem in a later exercise. Use the following instructions and the Azure Cloud Shell on the right of the screen to create the environment.</p>
<h2 id="Create-the-exercise-environment"><a href="#Create-the-exercise-environment" class="headerlink" title="Create the exercise environment"></a>Create the exercise environment</h2><p>Use the Cloud Shell on the right run these commands to create the example topology.</p>
<ol>
<li><p>Copy and paste this command on the right to clone the setup script from GitHub.</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/MicrosoftDocs/mslearn-troubleshoot-connectivity-issues-virtual-machines networking</span><br></pre></td></tr></table></figure>
</li>
<li><p>Run the setup script with this command.</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash networking/setup.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>You can continue to the next unit as this command runs in the background.</p>
</li>
</ol>
<h1 id="Troubleshoot-routing-and-traffic-control"><a href="#Troubleshoot-routing-and-traffic-control" class="headerlink" title="Troubleshoot routing and traffic control"></a>Troubleshoot routing and traffic control</h1><p>Completed100 XP</p>
<ul>
<li>7 minutes</li>
</ul>
<p>Routing errors can occur anywhere along the virtual network and the setting to control inbound and outbound traffic will cause problems with traffic control. This unit will examine the different tools available to troubleshoot typical problems.</p>
<h2 id="Troubleshoot-user-defined-routing-issues"><a href="#Troubleshoot-user-defined-routing-issues" class="headerlink" title="Troubleshoot user-defined routing issues"></a>Troubleshoot user-defined routing issues</h2><p>A user-defined route overrides Azure’s default routing and is used to route traffic through a network virtual appliance (NVA). The main advantage is to help with routing and firewall optimization.</p>
<p>The key steps to set up a user-defined route are:</p>
<ol>
<li>Create an NVA that routes traffic.</li>
<li>Create a route table and a route.</li>
<li>Associate the route table to a subnet.</li>
<li>Deploy virtual machines into different subnets.</li>
<li>Route traffic from one subnet to another via the NVA.</li>
</ol>
<p>The main problems that occur when setting up a user-defined route are:</p>
<ul>
<li><p>Have you set up three subnets for the public, private and the perimeter network demilitarized zone (DMZ)? The DMZ subnet gives an added layer of protection to a local area network (LAN).</p>
</li>
<li><p>Have you set up the subnets with unique non-overlapping address ranges?</p>
</li>
<li><p>Do you have a non-overlapping address space for the Bastion subnet address space?</p>
</li>
<li><p>Have you connected the route table to the public subnet?</p>
</li>
<li><p>Have you added the DMZ subnet name as the subnet in Settings, in the NVA?</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/3-propagate-gateway-routes.png" alt="Screenshot of Propagate gateway routes dialog box."></p>
</li>
<li><p>The route table overrides any default routing in the network. Have you allowed the gateway route to propagate?</p>
</li>
<li><p>Have you assigned the correct subnet ranges to the route?</p>
</li>
<li><p>The address prefix is the private subnet address range.</p>
</li>
<li><p>The next hop address is the DMZ subnet address range.</p>
</li>
<li><p>Have you added the route table to the public virtual network?</p>
</li>
<li><p>Have you enabled the IP forwarding on the NVA?</p>
</li>
</ul>
<h2 id="Review-route-tables"><a href="#Review-route-tables" class="headerlink" title="Review route tables"></a>Review route tables</h2><p>To route traffic between Azure, on-premises, and internet resources, a route table is created for each subnet within the Azure virtual network. It automatically creates system default routes to the route table.</p>
<p>Important points to note:</p>
<ul>
<li>You cannot create or remove system routes, only override them with custom user-defined routes.</li>
<li>Each subnet must be associated with a route table. You can assign a user-defined route table, or the system will allocate a default table.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/3-route-table.png" alt="Screenshot showing a typical route table."></p>
<p>A typical route table holds an address prefix and the next hop type.</p>
<h2 id="Determine-whether-subnets-are-associated-with-route-tables"><a href="#Determine-whether-subnets-are-associated-with-route-tables" class="headerlink" title="Determine whether subnets are associated with route tables"></a>Determine whether subnets are associated with route tables</h2><p>When you deploy a virtual machine, several default routes are automatically created, or you can associate your own route table.</p>
<p>To diagnose any connection problems, you can use:</p>
<ul>
<li>The Azure portal</li>
<li>PowerShell</li>
<li>Azure CLI</li>
</ul>
<h3 id="Azure-portal"><a href="#Azure-portal" class="headerlink" title="Azure portal"></a>Azure portal</h3><p>Log in to the Azure portal then search for and select the virtual machine you want to check:</p>
<ol>
<li>Select <strong>Settings</strong> &gt; <strong>Networking</strong> and select the <strong>network interface resource</strong>.</li>
<li>Select <strong>Effective Routes</strong> and the route table will be displayed.</li>
</ol>
<h3 id="Diagnose-routes-using-PowerShell"><a href="#Diagnose-routes-using-PowerShell" class="headerlink" title="Diagnose routes using PowerShell"></a>Diagnose routes using PowerShell</h3><p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-AzEffectiveRouteTable</span> `</span><br><span class="line"></span><br><span class="line">  <span class="literal">-NetworkInterfaceName</span> myVMNic1 `</span><br><span class="line"></span><br><span class="line">  <span class="literal">-ResourceGroupName</span> myResourceGroup `</span><br><span class="line"></span><br><span class="line">  | <span class="built_in">Format-Table</span></span><br></pre></td></tr></table></figure>

<h3 id="Diagnose-routes-using-Azure-CLI"><a href="#Diagnose-routes-using-Azure-CLI" class="headerlink" title="Diagnose routes using Azure CLI"></a>Diagnose routes using Azure CLI</h3><p>Azure CLICopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">az network nic show-effective-route-table \</span><br><span class="line"></span><br><span class="line">  --name myVMNic1 \</span><br><span class="line"></span><br><span class="line">  --resource-group myResourceGroup</span><br></pre></td></tr></table></figure>

<h2 id="Resolving-routing-problems"><a href="#Resolving-routing-problems" class="headerlink" title="Resolving routing problems"></a>Resolving routing problems</h2><p>To resolve a route problem, try the following actions:</p>
<ul>
<li>Add a custom route to override a default route and test.</li>
<li>Delete an existing custom route and set up a new custom route.</li>
<li>Check that any custom routes in the route table are associated with the correct subnet.</li>
<li>Use VPN diagnostics to check that any gateways or NVAs are operable.</li>
<li>Use the next hop feature in Azure Network Watcher.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/3-next-hop.png" alt="Screenshot of the next hop option."></p>
<h2 id="Troubleshoot-asymmetric-routing"><a href="#Troubleshoot-asymmetric-routing" class="headerlink" title="Troubleshoot asymmetric routing"></a>Troubleshoot asymmetric routing</h2><p>Asymmetric routing is when a packet takes one path to the destination and follows another path when it returns to the source. This often happens when multiple circuits are used to improve network uptime and the router finds the best path. If your system is not set up correctly, packets can be dropped.</p>
<p>Solutions to prevent packet loss can be found through routing and by using source network address translation (SNAT).</p>
<h3 id="Routing"><a href="#Routing" class="headerlink" title="Routing"></a>Routing</h3><p>Check the following:</p>
<ul>
<li>Are your public IP addresses advertised to the correct wide area network (WAN) links?</li>
<li>If you want to use the internet for authentication traffic, don’t advertise your Active Directory Federation Services (AD FS) public IP address over ExpressRoute.</li>
</ul>
<h3 id="Source-based-NAT"><a href="#Source-based-NAT" class="headerlink" title="Source-based NAT"></a>Source-based NAT</h3><p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/3-source-based-network-address-translation.png" alt="Diagram of a network with SNAT incorporated."></p>
<p>If you experience dropped packets, SNAT can help to direct them via the same route. In the above example, instead of using ExpressRoute to advertise the public IP address of an on-premises Simple Mail Transfer Protocol (SMTP) server, you could choose to use the internet path. The process will work effectively if:</p>
<ul>
<li>The request from Microsoft travels the internet route.</li>
<li>You use SNAT for the incoming IP address.</li>
<li>Return traffic goes to the edge firewall which you use for NAT—this will then direct the return traffic via the internet path rather than ExpressRoute.</li>
</ul>
<h2 id="Tracking-asymmetric-routing"><a href="#Tracking-asymmetric-routing" class="headerlink" title="Tracking asymmetric routing"></a>Tracking asymmetric routing</h2><p>Use Tracert to check the path your traffic is traveling along.</p>
<ul>
<li><p>Open the command prompt and type pathping. The full path is shown below:</p>
<p>ConsoleCopy</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">pathping [/n] [/h &lt;maximumhops&gt;] [/g &lt;hostlist&gt;] [/p &lt;Period&gt;] [/q &lt;numqueries&gt; [/w &lt;timeout&gt;] [/i &lt;IPaddress&gt;] [/4 &lt;IPv4&gt;] [/6 &lt;IPv6&gt;][&lt;targetname&gt;]</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Troubleshoot-forced-tunneling-issues"><a href="#Troubleshoot-forced-tunneling-issues" class="headerlink" title="Troubleshoot forced tunneling issues"></a>Troubleshoot forced tunneling issues</h2><p>Forced tunneling lets you direct all internet-bound traffic back to your on-premises location via a site-to-site VPN tunnel for inspection and auditing.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/3-forced-tunnelling.png" alt="Diagram of a network with forced tunneling."></p>
<p>Check the following points to resolve routing problems:</p>
<ul>
<li>If you cannot connect to the internet, check that the routing you have configured for the device routes traffic to a public or private IP address for the virtual machine.</li>
<li>If users with virtual machines cannot activate Windows, it is because the activation request is coming from your on-premises network. Ensure the activation request comes from an Azure public IP address.</li>
</ul>
<h2 id="Troubleshoot-Border-Gateway-Protocol-BGP-issues"><a href="#Troubleshoot-Border-Gateway-Protocol-BGP-issues" class="headerlink" title="Troubleshoot Border Gateway Protocol (BGP) issues"></a>Troubleshoot Border Gateway Protocol (BGP) issues</h2><p>Within the Azure portal, you can view metrics for learned routes, BGP peers and advertised routes then download the data via csv for further analysis.</p>
<p>Follow the steps below to access the BGP metrics within Azure:</p>
<ol>
<li>Open the gateway.</li>
<li>Navigate to BGP peers.</li>
</ol>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/3-border-gateway-protocol-peers.png" alt="Screenshot of the BGP peers screen."></p>
<h2 id="Troubleshoot-multi-VNet-configuration"><a href="#Troubleshoot-multi-VNet-configuration" class="headerlink" title="Troubleshoot multi-VNet configuration"></a>Troubleshoot multi-VNet configuration</h2><p>Read through the list to troubleshoot configuration problems:</p>
<ul>
<li><p>If the peering status shows as Connected, use the Connection Troubleshooter and IP Flow in Azure to verify from the source VM to the destination VM, to see if a network security group (NSG) or user-defined route is the issue. You can then run a network trace from the source to the destination IP.</p>
<p>ConsoleCopy</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">tcping64.exe -t &lt;destination VM address&gt; 3389</span><br></pre></td></tr></table></figure>
</li>
<li><p>If the peering status is Disconnected, delete the peering from both networks and recreate it.</p>
</li>
<li><p>If you are using a third-party NVA, contact the vendor to double check the setting.</p>
</li>
<li><p>Have you used a remote gateway on a spoke network? This is not supported.</p>
</li>
<li><p>Have you set Allow forwarded traffic or Use remote gateway, depending on your setup?</p>
</li>
<li><p>If you transit over a global virtual network peering, check you are aware of the <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview">requirements and constraints</a>.</p>
</li>
</ul>
<h2 id="Troubleshoot-service-chaining"><a href="#Troubleshoot-service-chaining" class="headerlink" title="Troubleshoot service chaining"></a>Troubleshoot service chaining</h2><p>Service chaining helps to automate traffic flow between services in a virtual network because the best routing path should be selected. However, if you are experiencing slow internet connections, it could be due to the additional hops that chaining has added to the process.</p>
<p>Points to remember:</p>
<ul>
<li>Have you configured the user-defined route as the next hop IP address?</li>
<li>User-defined routes can point to virtual network gateways.</li>
<li>Consider building a hub and spoke network topology so the hub virtual network hosts the infrastructure. The spoke networks then peer with the hub, with traffic flowing through the network virtual applicant or VPN gateway on the hub.</li>
</ul>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/3-service-chaining.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/3-service-chaining.png" alt="Screenshot of spoke and hub network."></a></p>
<h3 id="Troubleshoot-routing-configuration-of-Azure-VMs-that-function-as-routers"><a href="#Troubleshoot-routing-configuration-of-Azure-VMs-that-function-as-routers" class="headerlink" title="Troubleshoot routing configuration of Azure VMs that function as routers"></a>Troubleshoot routing configuration of Azure VMs that function as routers</h3><p>You need to contact the vendor of the network virtual appliance if you have any connectivity or routing problems when you connect to Azure.</p>
<p>When you set up a virtual appliance that will function as a router there are two main areas to investigate:</p>
<ul>
<li>Ensure you have the correct up-to-date information from the vendor.</li>
<li>Troubleshoot the in-house elements.</li>
</ul>
<h3 id="Network-Virtual-Appliance-vendors"><a href="#Network-Virtual-Appliance-vendors" class="headerlink" title="Network Virtual Appliance vendors"></a>Network Virtual Appliance vendors</h3><p>Check the following with the NVA vendor:</p>
<ul>
<li>Is the software up-to-date?</li>
<li>Is the service account with the vendor set up correctly and fully functional?</li>
<li>Check all user-defined routes.</li>
<li>Are the routing tables set up correctly?</li>
<li>Run tracing on the NVA network interfaces to check you can receive and send traffic.</li>
</ul>
<h3 id="Other-troubleshooting-steps"><a href="#Other-troubleshooting-steps" class="headerlink" title="Other troubleshooting steps"></a>Other troubleshooting steps</h3><p>It is also important to check your in-house setup:</p>
<ul>
<li>Do you meet the minimum configuration requirements?</li>
<li>If you experience packet loss:</li>
<li>Check CPU usage for capacity and spikes.</li>
<li>Use network traces to check packet traffic.</li>
<li>Check firewalls.</li>
<li>Are NSGs or UDRs interfering with the trace?</li>
<li>Is the routing table incorrect?</li>
</ul>
<h1 id="Troubleshoot-load-balancing-issues"><a href="#Troubleshoot-load-balancing-issues" class="headerlink" title="Troubleshoot load-balancing issues"></a>Troubleshoot load-balancing issues</h1><p>Completed100 XP</p>
<ul>
<li>6 minutes</li>
</ul>
<p>Azure offers a range of load-balancing solutions. Traffic Manager provides high availability and quick response times by using DNS to redirect client requests to the most appropriate endpoint for any protocol. Front Door provides high availability and quick response times by using proxies for HTTP requests. Traffic Manager and Front Door load balance at the Network and Transport layers.</p>
<p>Application Gateway loads balances at the Application layer rather than the Network and Transport layers. This means you can route traffic based on the incoming URL. For example, you could route traffic for a URL containing &#x2F;media to a specific set of servers.</p>
<p>Load Balancer works at the Network and Transport layers to provide internal and external load balancing for both inbound and outbound traffic using any protocol.</p>
<p>Each load-balancing solution requires different troubleshooting steps.</p>
<h2 id="Determine-the-status-of-Azure-Traffic-Manager"><a href="#Determine-the-status-of-Azure-Traffic-Manager" class="headerlink" title="Determine the status of Azure Traffic Manager"></a>Determine the status of Azure Traffic Manager</h2><p>To test whether your Traffic Manager settings are correct, you need to have multiple clients in multiple locations. You can then verify DNS resolution for failover using the following steps:</p>
<ol>
<li>Flush your DNS cache by running ipconfig &#x2F;flushdns.</li>
<li>Run nslookup for your company’s domain to verify that it resolves to your primary endpoint.</li>
<li>Take down your primary endpoint, wait for the Time-to-Live (TTL) time of your Traffic Manager profile, plus an additional two minutes.</li>
<li>Flush your DNS cache by running ipconfig &#x2F;flushdns.</li>
<li>Repeat the nslookup request and verify that it resolves to your secondary endpoint.</li>
<li>Repeat these steps for each endpoint.</li>
</ol>
<p>You can also test for weighted traffic routing by leaving all endpoints up and repeatedly flushing the cache and running nslookup to verify that traffic is cycling through each endpoint.</p>
<p>You can test for performance routing by connecting from different geographic locations and testing whether the appropriate endpoint is returned by nslookup.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/traffic-manager/traffic-manager-overview">What is Traffic Manager?</a></p>
<h2 id="Determine-whether-virtual-machines-in-a-load-balanced-cluster-are-healthy"><a href="#Determine-whether-virtual-machines-in-a-load-balanced-cluster-are-healthy" class="headerlink" title="Determine whether virtual machines in a load-balanced cluster are healthy"></a>Determine whether virtual machines in a load-balanced cluster are healthy</h2><p>Azure Load Balancer uses health probes to detect if an instance is healthy. If the health probe cannot make a connection, the load balancer will stop sending connections to that instance.</p>
<p>What if virtual machines (VMs) in a load balancer set are not responding to health probes? There are a number of possible reasons:</p>
<ul>
<li>The back-end pool VM is not in a healthy state.<ul>
<li>To test this, try sending a Ping request from another VM in the pool. The VM must be able to respond to requests to be part of the pool.</li>
</ul>
</li>
<li>The back-end pool VM does not allow connections from the probe port.<ul>
<li>From the back-end VM, run netstat -an and check that the correct port is listed as LISTENING. You must configure the back-end VM and&#x2F;or the load balancer to use the same port.</li>
</ul>
</li>
<li>A firewall or NSG does not allow connections from the probe port.<ul>
<li>If the back-end VM and load balancer are using the same port, verify that this is not blocked by a firewall or NSG.</li>
</ul>
</li>
<li>The load balancer is misconfigured.<ul>
<li>If the previous tests all succeeded, analyze the network for incoming and outgoing packets from multiple VMs in the load balancer set, to try to isolate the issue.</li>
</ul>
</li>
</ul>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-troubleshoot-health-probe-status">Troubleshoot Azure Load Balancer health probe status</a>.</p>
<h2 id="Examine-load-balancer-rules"><a href="#Examine-load-balancer-rules" class="headerlink" title="Examine load balancer rules"></a>Examine load balancer rules</h2><p>Load balancer rules define how traffic is distributed to the load balancer set. This could mean that a specific VM only receives certain traffic based on its incoming IP address, for example.</p>
<p>Review load balancer rules if traffic is not behaving as expected.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/load-balancer/manage-rules-how-to">Manage rules for Azure Load Balancer using the Azure portal</a>.</p>
<h2 id="Determine-how-resources-are-being-allocated-based-on-the-load-balancer-configuration"><a href="#Determine-how-resources-are-being-allocated-based-on-the-load-balancer-configuration" class="headerlink" title="Determine how resources are being allocated based on the load balancer configuration"></a>Determine how resources are being allocated based on the load balancer configuration</h2><p>Load balancers are typically used to evenly distribute traffic. Here are two reasons why the distribution of traffic from the load balancer is uneven:</p>
<ul>
<li>Session persistence is turned on.<ul>
<li>Session persistence will cause each client and server pair to be persisted so load balancing won’t perform as expected.</li>
</ul>
</li>
<li>Clients are behind a proxy server.<ul>
<li>A proxy server can cause multiple clients to appear as a single client, so load balancing won’t perform as expected.</li>
</ul>
</li>
</ul>
<p>If a VM in the load-balanced pool appears healthy, but is not responding to requests, there could be a number of reasons:</p>
<ul>
<li>The back-end VM might not be listening on the correct port, or the port may not be open.</li>
<li>A network security group might be blocking the port.</li>
<li>An application on the back-end VM is trying to access another application on the same network interface. This is unsupported.</li>
<li>A back-end VM is trying to access resources through the load balancer. This is unsupported.</li>
</ul>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-troubleshoot-backend-traffic">Troubleshoot Azure Load Balancer back-end traffic responses</a>.</p>
<h2 id="Troubleshoot-port-exhaustion-issues"><a href="#Troubleshoot-port-exhaustion-issues" class="headerlink" title="Troubleshoot port exhaustion issues"></a>Troubleshoot port exhaustion issues</h2><p>When a load balancer is used for external connections, you should be aware of port exhaustion. There are 64,000 ports available, but each connection uses eight ports when a load balancer is in use. Therefore, if there are many back-end instances, it is possible to exhaust the available ports.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/load-balancer/troubleshoot-outbound-connection">Troubleshooting outbound connections failures</a>.</p>
<h2 id="Troubleshoot-Azure-Front-Door"><a href="#Troubleshoot-Azure-Front-Door" class="headerlink" title="Troubleshoot Azure Front Door"></a>Troubleshoot Azure Front Door</h2><p>If you’re using Azure Front Door for load balancing and wish to troubleshoot common routing problems, you should first request that Front Door returns additional debugging HTTP response headers.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/frontdoor/front-door-http-headers-protocol">Protocol support for HTTP headers in Azure Front Door</a>.</p>
<p>When you have the HTTP group response headers, there are a number of responses from Azure Front Door you could use for debugging:</p>
<ul>
<li>A 503 response after a few seconds means that regular requests go to your back end without going through Azure Front Door. To resolve this issue, configure the origin response timeouts for the endpoint and extend the default timeout.<ul>
<li>You’re receiving 503 responses from the Azure Front Door, but only for HTTPS requests. Reasons for this could be:</li>
<li>The back-end pool is an IP address.</li>
<li>The back-end server is returning a certificate that doesn’t match the fully qualified domain name of the Azure Front Door back-end pool.</li>
<li>The back-end pool is an Azure Web app server.</li>
</ul>
</li>
<li>You’re receiving 400 status codes when requests are sent to a custom domain.<ul>
<li>The problem occurs because you haven’t created a routing rule for the custom domain when it was added as the front-end host.</li>
</ul>
</li>
<li>You’re receiving 411 status codes from the front-end host.<ul>
<li>These status codes are generated when your HTTP request is not fully RFC compliant.</li>
</ul>
</li>
</ul>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/frontdoor/troubleshoot-issues">Troubleshoot Azure Front Door common issues</a>.</p>
<h2 id="Troubleshoot-Azure-Application-Gateway"><a href="#Troubleshoot-Azure-Application-Gateway" class="headerlink" title="Troubleshoot Azure Application Gateway"></a>Troubleshoot Azure Application Gateway</h2><p>Application Gateway probes back-end servers to check their health status. If these servers do not successfully respond, Application Gateway marks them as unresponsive and stops sending requests to them. Application Gateway resumes sending requests when the server starts responding successfully.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/application-gateway/application-gateway-backend-health-troubleshooting">Troubleshoot back-end health issues in Application Gateway</a>.</p>
<h2 id="Troubleshoot-Azure-Load-Balancer"><a href="#Troubleshoot-Azure-Load-Balancer" class="headerlink" title="Troubleshoot Azure Load Balancer"></a>Troubleshoot Azure Load Balancer</h2><p>There are several troubleshooting steps to consider when you use Azure Load Balancer:</p>
<ul>
<li>Standard internal load balancers are secured by default, but basic internal load balancers allow connections to the internet through hidden IP addresses. This is not recommended for production workloads—Network Gateway is the recommended solution for outbound traffic.</li>
<li>When you have a health probe, the back-end port can’t be modified for load balancing. To resolve this issue, remove the health probe, reconfigure the port, and then add the health probe again.</li>
<li>If a VM is removed from a back-end pool but is still receiving network traffic, this could be due to storage, DNS, or other Azure functions.</li>
</ul>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-troubleshoot-backend-traffic">Troubleshoot Azure Load Balancer</a>.</p>
<h2 id="Troubleshoot-Traffic-Manager-profile-issues"><a href="#Troubleshoot-Traffic-Manager-profile-issues" class="headerlink" title="Troubleshoot Traffic Manager profile issues"></a>Troubleshoot Traffic Manager profile issues</h2><p>Azure Traffic Manager uses six traffic routing methods. These are Priority, Weighted, Performance, Geographic, Multivalue, and Subnet. If you select the incorrect traffic routing method, the expected behavior might not be achieved. Traffic may be going towards a primary service endpoint for all traffic because you are using Priority, but you want it to go to the closest endpoint—for example, by using Performance.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/traffic-manager/traffic-manager-routing-methods">Traffic Manager routing methods</a>.</p>
<h2 id="Troubleshoot-latency-issues"><a href="#Troubleshoot-latency-issues" class="headerlink" title="Troubleshoot latency issues"></a>Troubleshoot latency issues</h2><p>For latency issues in your load-balanced network, you should test in the same way you would for any virtual machine network latency. You can use common connectivity tools such as Ping, but more specialist third-party tools are available to provide more information. To test latency issues, it’s a good idea to use two virtual machines, one as the sender and the other as the receiver. This allows you to test two-way communication between the virtual machines and through the load balancer.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-test-latency">Test VM network latency</a>.</p>
<h1 id="Exercise-Troubleshoot-routing-traffic-control-and-load-balancing-issues"><a href="#Exercise-Troubleshoot-routing-traffic-control-and-load-balancing-issues" class="headerlink" title="Exercise: Troubleshoot routing, traffic control and load balancing issues"></a>Exercise: Troubleshoot routing, traffic control and load balancing issues</h1><p>Completed100 XP</p>
<ul>
<li>6 minutes</li>
</ul>
<p>This module requires a sandbox to complete.</p>
<p>A <a href="https://learn.microsoft.com/en-us/training/support/faq?pivots=sandbox">sandbox</a> gives you access to free resources. Your personal subscription will not be charged. The sandbox may only be used to complete training on Microsoft Learn. Use for any other reason is prohibited, and may result in permanent loss of access to the sandbox.</p>
<p>Microsoft provides this lab experience and related content for educational purposes. All presented information is owned by Microsoft and intended solely for learning about the covered products and services in this Microsoft Learn module.</p>
<p>Activate sandbox</p>
<p>You work as a support engineer supporting Azure infrastructure. You’ve been contacted by your web team about an issue with website performance. The web team has a pool of webservers behind a load balancer and public IP address.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-network-topology-diagram.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-network-topology-diagram.png" alt="Screenshot of a network topology diagram showing a pool of webservers behind a load balancer and public IP address."></a></p>
<p>The web team thinks that the internet traffic isn’t being distributed equally between all the webservers.</p>
<p>In this exercise, you’ll use what you’ve learned to go through steps to troubleshoot the performance issues with your organizations website.</p>
<h2 id="Check-that-the-issue-still-exists"><a href="#Check-that-the-issue-still-exists" class="headerlink" title="Check that the issue still exists"></a>Check that the issue still exists</h2><ol>
<li><p>Using the Cloud Shell to the right, run this command.</p>
<p>Azure CLICopy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">az network public-ip show \</span><br><span class="line">--resource-group [sandbox resource group name] \</span><br><span class="line">--name webPublicIP \</span><br><span class="line">--query &#x27;[ipAddress]&#x27; \</span><br><span class="line">--output tsv</span><br></pre></td></tr></table></figure>
</li>
<li><p>Paste the IP address returned into a new browser tab.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-web-working.png" alt="Screenshot of the web responding."></p>
<p> Note</p>
<p>Your IP address will be different to the one shown in the screenshot.</p>
</li>
<li><p>Hit refresh in your browser, or on Windows press the <strong>F5</strong> ten or twenty times. Notice that you are getting a response from the same webserver every single time.</p>
</li>
<li><p>Leave this tab open to check you resolve the issue in the next exercise.</p>
</li>
</ol>
<h2 id="Check-all-the-virtual-machines-are-responding-on-port-80"><a href="#Check-all-the-virtual-machines-are-responding-on-port-80" class="headerlink" title="Check all the virtual machines are responding on port 80"></a>Check all the virtual machines are responding on port 80</h2><ol>
<li><p>Navigate to the <a href="https://portal.azure.com/learn.docs.microsoft.com">Azure portal</a> in another browser tab.</p>
</li>
<li><p>Select <strong>Virtual machines</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-portal-select-virtual-machines.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-portal-select-virtual-machines.png" alt="Screenshot of the virtual machines."></a></p>
</li>
<li><p>Select <strong>webVirtualMachine1</strong>.</p>
</li>
<li><p>Under <strong>Settings</strong>, select <strong>Networking</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-virtual-machine-network-settings.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-virtual-machine-network-settings.png" alt="Screenshot of the networking settings for the virtual machine."></a></p>
</li>
<li><p>Check that inbound traffic is allowed on port <strong>80</strong>.</p>
</li>
<li><p>Repeat the above for <strong>webVirtualMachine2</strong>.</p>
</li>
</ol>
<p>The current settings appear to be correct.</p>
<h2 id="Check-the-Load-Balancer-settings"><a href="#Check-the-Load-Balancer-settings" class="headerlink" title="Check the Load Balancer settings"></a>Check the Load Balancer settings</h2><ol>
<li><p>Select <strong>Home</strong>.</p>
</li>
<li><p>Search for <strong>Load balancers</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-load-balancers.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-load-balancers.png" alt="A screenshot of the Azure portal showing Load balancers being selected."></a></p>
</li>
<li><p>Under <strong>Services</strong>, select <strong>Load balancers</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-list-of-load-balancers.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-list-of-load-balancers.png" alt="A screenshot showing the load balancers."></a></p>
</li>
<li><p>Select <strong>webLoadBalancer</strong>.</p>
</li>
<li><p>Under <strong>Settings</strong>, Select the <strong>Frontend IP configuration</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-load-balancer-frontend.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-load-balancer-frontend.png" alt="Screenshot of the frontend IP settings of the load balancer."></a></p>
<p> Note</p>
<p>There is a correctly configured frontend IP address. Check that it matches the IP address you have in your other tab.</p>
</li>
<li><p>Under <strong>Settings</strong>, select <strong>Backend pools</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-load-balancer-backend-pools.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-load-balancer-backend-pools.png" alt="Screenshot of the load balancer backend pool."></a></p>
<p> Note</p>
<p>The virtual machines are both running.</p>
</li>
<li><p>Under <strong>Settings</strong>, select <strong>Load balancing rules</strong>, then select <strong>webLoadBalancerRule</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-load-balancer-rules.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-load-balancer-rules.png" alt="Screenshot showing the webLoadBalancerRule to select."></a></p>
</li>
<li><p>Check all the settings for the load balancer rule.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-web-load-balancer-rule-settings.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-web-load-balancer-rule-settings.png" alt="Screenshot of the webLoadBalancerRule settings."></a></p>
</li>
</ol>
<p>You think you have identified the issue. At the moment once a user visits the website they are routed to one virtual machine. This will persist because of the <strong>Session persistence</strong> setting.</p>
<p>You’ll resolve the issue in the next exercise.</p>
<h1 id="Exercise-Resolve-issue-with-load-balancer"><a href="#Exercise-Resolve-issue-with-load-balancer" class="headerlink" title="Exercise: Resolve issue with load balancer"></a>Exercise: Resolve issue with load balancer</h1><p>Completed100 XP</p>
<ul>
<li>7 minutes</li>
</ul>
<p>After investigating the performance issues, you’ve found an issue with the load balancers session persistence settings.</p>
<p>In this exercise, you’ll resolve the issue.</p>
<h2 id="Update-load-balancer-rules"><a href="#Update-load-balancer-rules" class="headerlink" title="Update load balancer rules"></a>Update load balancer rules</h2><ol>
<li><p>Open the <a href="https://portal.azure.com/learn.docs.microsoft.com">Azure portal</a> in a new tab, select <strong>Load balancers</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/5-load-balancer-search.png" alt="A screenshot showing searching for load balancers."></p>
</li>
<li><p>Select the <strong>webLoadBalancer</strong> load balancer.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-list-of-load-balancers.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-list-of-load-balancers.png" alt="Screenshot showing webLoadBalancer selected."></a></p>
</li>
<li><p>Under <strong>Settings</strong>, select <strong>Load balancing rules</strong>, then select <strong>webLoadBalancerRule</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/4-load-balancer-rules.png" alt="A screenshot showing the load balancer rule highlighted."></p>
</li>
<li><p>To resolve the backend issue, change the <strong>Session persistence</strong> from <strong>Client IP and protocol</strong> to <strong>None</strong>, and then select <strong>Save</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/5-load-balancer-fix.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/5-load-balancer-fix.png" alt="Screenshot showing the rule fixed."></a></p>
<p> Note</p>
<p>By setting <strong>Session persistence</strong> to <strong>None</strong>, successive request from clients can be handled by different virtual machines.</p>
</li>
<li><p>Wait until the rule has been deployed successfully.</p>
</li>
</ol>
<h2 id="Test-that-the-issue-has-been-resolved"><a href="#Test-that-the-issue-has-been-resolved" class="headerlink" title="Test that the issue has been resolved"></a>Test that the issue has been resolved</h2><p>Switch back to the tab where you pasted the public IP address. If you have closed the tab select the load balancer rule and the public IP address is listed there.</p>
<ol>
<li><p>Refresh the browser 20 or 30 times, you should see the message switch between <strong>webVirtualMachine1</strong> and <strong>webVirtualMachine2</strong>.</p>
</li>
<li><p>The traffic is now being shared correctly between all the machines in the backend pool.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-routing-traffic-control-load-balancing/media/issue-resolved.gif" alt="Animated gif showing the different webservers responding."></p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>Having completed this module, you now have a better understanding of how user-defined routes interact with the network. You can apply different troubleshooting techniques to determine where packet loss is occurring and know when to use the different load-balancing tools.</p>
<p>Now that you have reviewed this module, you should be able to:</p>
<ul>
<li>Understand how user-defined routes interact with the network.</li>
<li>Apply different techniques to determine packet loss.</li>
<li>Choose the most effective load-balancer tool to troubleshoot issues.</li>
</ul>
<h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><p>Use these resources to discover more.</p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/diagnose-network-routing-problem">Diagnose a virtual machine routing problem</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-troubleshoot-backend-traffic">Troubleshoot Azure Load Balancer backend traffic responses</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/frontdoor/troubleshoot-issues">Troubleshoot Azure Front Door common issues</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-test-latency">Test VM network latency</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview">Virtual network peering</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/bgp-diagnostics">View BGP metrics and status</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-manage-peering">Create, change, or delete a virtual network peering</a></p>
</li>
</ol>
]]></content>
  </entry>
  <entry>
    <title>BGP</title>
    <url>/2022/11/17/BGP/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>BGP设计与实现</title>
    <url>/2022/11/17/BGP%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Building-Data-Centers-with-VXLAN-BGP-EVPN-A-Cisco-NX-OS-Perspective</title>
    <url>/2022/11/17/Building-Data-Centers-with-VXLAN-BGP-EVPN-A-Cisco-NX-OS-Perspective/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>AZ-720-Troubleshoot-network-security-issues-with-Microsoft-Azure-6</title>
    <url>/2022/11/14/AZ-720-Troubleshoot-network-security-issues-with-Microsoft-Azure-6/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>You work as an engineer who supports Azure infrastructure. Users within and outside your organization access various web services and applications hosted on your virtual network. They sometimes come across various network issues. Also, from a security point of view, you need to ensure the optimum health of your virtual network.</p>
<p>Within the Azure portal, resources such as Azure Firewall, Network Watcher, Azure Web Application Firewall, and Azure DDoS Protection, help you manage and monitor virtual network security.</p>
<p>In this module, you’ll learn how to troubleshoot network security, configuration, latency, bandwidth, and Azure Firewall issues.</p>
<h2 id="Learning-objectives"><a href="#Learning-objectives" class="headerlink" title="Learning objectives"></a>Learning objectives</h2><p>After completing this module, you’ll be able to:</p>
<ul>
<li>Troubleshoot network security issues.</li>
<li>Troubleshoot network security group (NSG).</li>
<li>Troubleshoot Azure Firewall.</li>
<li>Troubleshoot latency issues within a virtual network.</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Experience with the OSI model.</li>
<li>Demonstrate an awareness of Azure Bastion.</li>
<li>Experience with PowerShell and Azure CLI.</li>
<li>Know how to get to Cloud Shell to run commands.</li>
<li>Experience with Visual Studio Code.</li>
<li>Demonstrate an understanding of JSON.</li>
</ul>
<h1 id="Setup-troubleshooting-environment"><a href="#Setup-troubleshooting-environment" class="headerlink" title="Setup troubleshooting environment"></a>Setup troubleshooting environment</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>This module requires a sandbox to complete.</p>
<p>A <a href="https://learn.microsoft.com/en-us/training/support/faq?pivots=sandbox">sandbox</a> gives you access to free resources. Your personal subscription will not be charged. The sandbox may only be used to complete training on Microsoft Learn. Use for any other reason is prohibited, and may result in permanent loss of access to the sandbox.</p>
<p>Microsoft provides this lab experience and related content for educational purposes. All presented information is owned by Microsoft and intended solely for learning about the covered products and services in this Microsoft Learn module.</p>
<p>Activate sandbox</p>
<p>You’ll troubleshoot a virtual machine connection problem in a later exercise. Use the following instructions and the Azure Cloud Shell on the right of the screen to create the environment.</p>
<h2 id="Create-the-exercise-environment"><a href="#Create-the-exercise-environment" class="headerlink" title="Create the exercise environment"></a>Create the exercise environment</h2><p>Use the Cloud Shell on the right run these commands to create the example topology.</p>
<ol>
<li><p>Copy and paste this command on the right to clone the setup script from GitHub.</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/MicrosoftDocs/mslearn-troubleshoot-network-security-issues networking</span><br></pre></td></tr></table></figure>
</li>
<li><p>Run the setup script with this command.</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash networking/setup.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>You can continue to the next unit as this command runs in the background.</p>
</li>
</ol>
<h1 id="Troubleshoot-network-security-issues"><a href="#Troubleshoot-network-security-issues" class="headerlink" title="Troubleshoot network security issues"></a>Troubleshoot network security issues</h1><p>Completed100 XP</p>
<ul>
<li>9 minutes</li>
</ul>
<h2 id="Determine-why-Web-Application-Firewall-WAF-is-blocking-wanted-traffic"><a href="#Determine-why-Web-Application-Firewall-WAF-is-blocking-wanted-traffic" class="headerlink" title="Determine why Web Application Firewall (WAF) is blocking wanted traffic"></a>Determine why Web Application Firewall (WAF) is blocking wanted traffic</h2><p>Occasionally, requests that should pass through your Web Application Firewall (WAF) are blocked.</p>
<p>To tune the strict Open Web Application Security Project (OWASP) regulations for the needs of an application or organization, WAF helps you to customize, or disable the rules, or create exclusions, that may be causing issues or false positives. This is done on a per-site and per-URI basis. That is, changes to the policies will only affect specific sites&#x2F;URIs and wouldn’t concern other sites that might not have the same issues.</p>
<p>The following articles will help you understand how the WAF functions and how its rule and logs work:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/ag-overview">WAF overview</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/application-gateway-waf-configuration">WAF configuration</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/application-gateway/application-gateway-diagnostics">WAF monitoring</a></li>
</ul>
<h2 id="Understanding-WAF-logs"><a href="#Understanding-WAF-logs" class="headerlink" title="Understanding WAF logs"></a>Understanding WAF logs</h2><p>WAF logs work as a statement of all evaluated requests that are matched or blocked. If you notice a false positive, when the WAF blocks a request that it shouldn’t, you can do the following steps:</p>
<ol>
<li>Find the specific request.</li>
<li>Examine the logs to find the specific URI, timestamp, or transaction ID of the request.</li>
<li>Fix the false positives.</li>
</ol>
<h2 id="Viewing-WAF-logs"><a href="#Viewing-WAF-logs" class="headerlink" title="Viewing WAF logs"></a>Viewing WAF logs</h2><p>To view WAF logs, complete the following steps:</p>
<ol>
<li>In the Azure portal, select <strong>All resources</strong>, and select the <strong>Application Gateway WAF policy</strong>.</li>
<li>Select <strong>Activity log</strong>.</li>
<li>Select individual operations for more information.</li>
<li>You can download the Activity log by selecting <strong>Download as CSV</strong>.</li>
<li>To stream the Activity log events to another service, select <strong>Export Activity Logs</strong>.</li>
</ol>
<p>In Export Activity Logs:</p>
<ol>
<li>Select <strong>Add diagnostic setting</strong>.</li>
<li>Type a <strong>Diagnostic setting name</strong>.</li>
<li>Select the relevant log categories to stream in <strong>Categories</strong>. For example, select <strong>Security</strong>, <strong>Policy</strong>, and <strong>Alert</strong>.</li>
<li>Select the streaming destination in <strong>Destination details</strong>. For example, select <strong>Send to Log Analytics workspace</strong>.</li>
<li>Enter additional destination details. For example, the relevant <strong>Subscription</strong> and <strong>Log Analytics workspace</strong>.</li>
<li>Select <strong>Save</strong>.</li>
</ol>
<h2 id="Anomaly-Scoring-mode"><a href="#Anomaly-Scoring-mode" class="headerlink" title="Anomaly Scoring mode"></a>Anomaly Scoring mode</h2><p>Anomaly Scoring mode is used by OWASP to decide whether to block traffic. In Anomaly Scoring mode, traffic that matches any rule isn’t instantly blocked when the firewall is in Prevention mode. Rules have a certain criterion: Critical, Error, Warning, or Notice. Each of these has a numeric value associated with it, called Anomaly Score. The numeric value indicates the severity of a request.</p>
<p>For more information, see <a href="https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/ag-overview">Anomaly Scoring mode</a>.</p>
<h2 id="Fixing-false-positives"><a href="#Fixing-false-positives" class="headerlink" title="Fixing false positives"></a>Fixing false positives</h2><p>To fix false positives and avoid the issues of blocked traffic, you can use an exclusion list. Using an exclusion list is only applicable to a specific part of a request, or a rule set that is being disabled. You can decide to exclude either body, headers, or cookies for a certain condition instead of excluding the whole request. In a global setting environment, the specific exclusion applies to all traffic passing through your WAF.</p>
<p>Refer to <a href="https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/application-gateway-waf-configuration">WAF configuration</a> for more information about exclusion lists.</p>
<h3 id="To-configure-exclusion-lists-using-the-Azure-portal"><a href="#To-configure-exclusion-lists-using-the-Azure-portal" class="headerlink" title="To configure exclusion lists using the Azure portal"></a>To configure exclusion lists using the Azure portal</h3><ol>
<li>Go to the WAF portal.</li>
<li>Select <strong>Manage exclusions</strong> under <strong>Managed rules</strong>.</li>
</ol>
<p>An example exclusion list:</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/2-rule-exclusion.png" alt="Screenshot displaying an example exclusion list."></p>
<ul>
<li><strong>Disable the rule</strong>: Disabling a rule allows you to treat a certain condition as a non-threat that would otherwise be flagged as malicious and be blocked. In a global setting environment, disabling a rule for the entire WAF is a risk and can weaken your security.</li>
</ul>
<h3 id="To-disable-rule-groups-or-specific-rules"><a href="#To-disable-rule-groups-or-specific-rules" class="headerlink" title="To disable rule groups or specific rules"></a>To disable rule groups or specific rules</h3><ol>
<li><p>Browse to the application gateway, and then select <strong>Web application firewall</strong>.</p>
</li>
<li><p>Select your <strong>WAF Policy</strong>.</p>
</li>
<li><p>Select <strong>Managed Rules</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/2-firewall-gateway.png" alt="Screenshot showing Web application firewall gateway."></p>
</li>
<li><p>Search for the rules or rule groups that you want to disable.</p>
</li>
<li><p>Select the check boxes for the rules that you want to disable.</p>
</li>
<li><p>Select the action at the top of the page (<strong>Enable</strong>&#x2F;<strong>Disable</strong>) for the selected rules.</p>
</li>
<li><p>Select <strong>Save</strong>.</p>
</li>
</ol>
<p>A third-party tool called Fiddler can provide additional information. Fiddler will help you to:</p>
<ul>
<li><strong>Find request attribute names</strong>: Review individual requests and determine what specific fields of a webpage are called. It also helps to exclude certain fields from inspection using exclusion lists.</li>
<li><strong>Find request header names</strong>: View request and response headers inside the developer tools of Chrome, or see the headers for the GET request.</li>
<li><strong>Find request cookie names</strong>: View cookies by selecting the Cookies tab in Fiddler.</li>
</ul>
<h2 id="Restrict-global-parameters-to-eliminate-false-positives"><a href="#Restrict-global-parameters-to-eliminate-false-positives" class="headerlink" title="Restrict global parameters to eliminate false positives"></a>Restrict global parameters to eliminate false positives</h2><ul>
<li><p><strong>Disable request body inspection</strong>: Certain bodies that are not a threat to your application can be prevented from being evaluated by your WAF by setting <strong>Inspect request body</strong> to off. This way, only the request body is not inspected. The headers and cookies will still be inspected, unless they’re on the exclusion list.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/2-web-application-firewall-policy.png" alt="Screenshot showing WAF policy. The option of Inspect request body to off."></p>
</li>
<li><p><strong>File size limits</strong>: The possibility of an attack to web servers and applications can be reduced by limiting the file size for your WAF. Permitting large files increases the risk of your back end being exhausted. To prevent attacks, it is advisable to limit the file size to a typical case for your application.</p>
</li>
</ul>
<p> Note</p>
<p>Firewall Metrics (WAF_v1 only) For v1 Web Application Firewalls, the following metrics are now available in the portal:</p>
<ul>
<li><strong>Web Application Firewall Blocked Request Count</strong> - the number of requests that were blocked.</li>
<li><strong>Web Application Firewall Blocked Rule Count</strong> - all rules that were matched and the request was blocked.</li>
<li><strong>Web Application Firewall Total Rule Distribution</strong> - all rules that were matched during evaluation</li>
</ul>
<p>To enable metrics, select the <strong>Metrics</strong> tab in the portal, and select one of the three metrics.</p>
<h2 id="Determine-which-version-of-TLS-a-customer-is-running"><a href="#Determine-which-version-of-TLS-a-customer-is-running" class="headerlink" title="Determine which version of TLS a customer is running"></a>Determine which version of TLS a customer is running</h2><p>If the client is using a version of Transport Layer Security (TLS) that is lower than the minimum required version, all calls to Azure Storage will fail. Therefore, from the security point of view, an Azure Storage account might require that clients use a minimum version of TLS to send requests. For example, a request sent by a client who is using TLS 1.1 will fail, if a storage account requires TLS 1.2.</p>
<p>The article <a href="https://learn.microsoft.com/en-us/azure/storage/common/transport-layer-security-configure-minimum-version?tabs=portal">Configure minimum required version of Transport Layer Security (TLS) for a storage account</a> explains how to configure the minimum TLS version for an Azure Storage account that might affect client applications.</p>
<h2 id="Configure-the-client-TLS-version"><a href="#Configure-the-client-TLS-version" class="headerlink" title="Configure the client TLS version"></a>Configure the client TLS version</h2><p>For the client, sending a request with a particular version of TLS is only possible if the operating system and the .NET Framework used by the client supports that version.</p>
<p>To enable TLS 1.2 in a PowerShell client:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Set the TLS version used by the PowerShell client to TLS 1.2.</span></span><br><span class="line"></span><br><span class="line">[<span class="type">System.Net.ServicePointManager</span>]::SecurityProtocol = [<span class="type">System.Net.SecurityProtocolType</span>]::Tls12;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a new container.</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$storageAccount</span> = <span class="built_in">Get-AzStorageAccount</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$rgName</span> <span class="literal">-Name</span> <span class="variable">$accountName</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$ctx</span> = <span class="variable">$storageAccount</span>.Context</span><br><span class="line"></span><br><span class="line"><span class="built_in">New-AzStorageContainer</span> <span class="literal">-Name</span> <span class="string">&quot;sample-container&quot;</span> <span class="literal">-Context</span> <span class="variable">$ctx</span></span><br></pre></td></tr></table></figure>

<p>To enable TLS 1.2 in a .NET client using version 12 of the Azure Storage client library:</p>
<p>C#Copy</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">async</span> Task <span class="title">ConfigureTls12</span>()</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Enable TLS 1.2 before connecting to Azure Storage</span></span><br><span class="line"></span><br><span class="line">    System.Net.ServicePointManager.SecurityProtocol = System.Net.SecurityProtocolType.Tls12;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add your connection string here.</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> connectionString = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create a new container with Shared Key authorization.</span></span><br><span class="line"></span><br><span class="line">    BlobContainerClient containerClient = <span class="keyword">new</span> BlobContainerClient(connectionString, <span class="string">&quot;sample-container&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> containerClient.CreateIfNotExistsAsync();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>To enable TLS 1.2 in a .NET client using version 11 of the Azure Storage client library:</p>
<p>C#Copy</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">EnableTls12</span>()</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Enable TLS 1.2 before connecting to Azure Storage</span></span><br><span class="line"></span><br><span class="line">    System.Net.ServicePointManager.SecurityProtocol = System.Net.SecurityProtocolType.Tls12;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add your connection string here.</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> connectionString = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Connect to Azure Storage and create a new container.</span></span><br><span class="line"></span><br><span class="line">    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connectionString);</span><br><span class="line"></span><br><span class="line">    CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();</span><br><span class="line"></span><br><span class="line">    CloudBlobContainer container = blobClient.GetContainerReference(<span class="string">&quot;sample-container&quot;</span>);</span><br><span class="line"></span><br><span class="line">    container.CreateIfNotExists();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>For more information, refer to <a href="https://learn.microsoft.com/en-us/dotnet/framework/network-programming/tls">Support for TLS 1.2</a>.</p>
<p> Note</p>
<p>Fiddler or a similar tool can help you verify that the specified version of TLS was used by the client to send a request.</p>
<h2 id="Troubleshoot-encryption-x2F-certificate-related-issues-for-point-to-site-scenarios"><a href="#Troubleshoot-encryption-x2F-certificate-related-issues-for-point-to-site-scenarios" class="headerlink" title="Troubleshoot encryption&#x2F;certificate-related issues for point-to-site scenarios"></a>Troubleshoot encryption&#x2F;certificate-related issues for point-to-site scenarios</h2><p>A point-to-site (P2S) VPN connection is initiated by a single endpoint and is useful when you want to connect to your VNet from a remote location. Point-to-site is a better option when you have only a few clients that need to connect to a VNet. P2S connections do not require a VPN device, or a public network or IP address.</p>
<p>P2S VPN supports Secure Socket Tunneling Protocol (SSTP), and IKEv2. You can securely connect different clients running Windows, Linux, or macOS to an Azure VNet through point-to-site connection.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/2-point-to-site.png" alt="Diagram showing point-to-site VPN connection."></p>
<h2 id="Generate-certificates"><a href="#Generate-certificates" class="headerlink" title="Generate certificates"></a>Generate certificates</h2><ul>
<li><p>Generate a root certificate</p>
<p>First, obtain the public key (.cer file) for a root certificate. After creating the root certificate, export the public certificate (not the private key). Then this file is uploaded to Azure. The root certificate acts as a trusted source by Azure for connection over P2S to the virtual network. There are two ways to generate a root certificate, enterprise certificate, or self-signed certificate. To create a self-signed root certificate, consider the following steps:</p>
</li>
</ul>
<ol>
<li><p>Open a Windows PowerShell console.</p>
</li>
<li><p>The following example creates a self-signed root certificate named “P2SRootCert” that is automatically installed in “Certificates-Current User\Personal\Certificates”. You can view the certificate by opening <strong>certmgr.msc</strong>, or <strong>Manage User Certificates</strong>.</p>
<p>You can modify and run the following command:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$cert</span> = <span class="built_in">New-SelfSignedCertificate</span> <span class="literal">-Type</span> Custom <span class="literal">-KeySpec</span> Signature `</span><br><span class="line"></span><br><span class="line"><span class="literal">-Subject</span> <span class="string">&quot;CN=P2SRootCert&quot;</span> <span class="literal">-KeyExportPolicy</span> Exportable `</span><br><span class="line"></span><br><span class="line"><span class="literal">-HashAlgorithm</span> sha256 <span class="literal">-KeyLength</span> <span class="number">2048</span> `</span><br><span class="line"></span><br><span class="line"><span class="literal">-CertStoreLocation</span> <span class="string">&quot;Cert:\CurrentUser\My&quot;</span> <span class="literal">-KeyUsageProperty</span> Sign <span class="literal">-KeyUsage</span> CertSign</span><br></pre></td></tr></table></figure>
</li>
<li><p>Leave the PowerShell console open and proceed with the next steps to generate a client certificate.</p>
<ul>
<li><p>Generate client certificates</p>
<p>A client certificate is automatically installed on the computer where it is generated from a self-signed root certificate. For installing a client certificate on another client computer, you need to export it as a .pfx file, along with the entire certificate chain. The .pfx file will contain the root certificate information required for client authentication. There are two methods to create client certificates, enterprise certificate, or self-signed root certificate.</p>
<p>It is recommended to generate a unique certificate for each client instead of using the same certificate. This is because, if you want to revoke a particular client certificate, you don’t need to generate and install a new one for every client that uses the same certificate. To generate client certificate, consider the following steps:</p>
</li>
</ul>
</li>
<li><p>Use the following example if the PowerShell console session is still open:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">New-SelfSignedCertificate</span> <span class="literal">-Type</span> Custom <span class="literal">-DnsName</span> P2SChildCert <span class="literal">-KeySpec</span> Signature `</span><br><span class="line"></span><br><span class="line"><span class="literal">-Subject</span> <span class="string">&quot;CN=P2SChildCert&quot;</span> <span class="literal">-KeyExportPolicy</span> Exportable `</span><br><span class="line"></span><br><span class="line"><span class="literal">-HashAlgorithm</span> sha256 <span class="literal">-KeyLength</span> <span class="number">2048</span> `</span><br><span class="line"></span><br><span class="line"><span class="literal">-CertStoreLocation</span> <span class="string">&quot;Cert:\CurrentUser\My&quot;</span> `</span><br><span class="line"></span><br><span class="line"><span class="literal">-Signer</span> <span class="variable">$cert</span> <span class="literal">-TextExtension</span> <span class="selector-tag">@</span>(<span class="string">&quot;2.5.29.37=&#123;text&#125;1.3.6.1.5.5.7.3.2&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>If it’s a new PowerShell console session, consider the following steps:</p>
<ul>
<li>Identify the self-signed root certificate that is installed on the computer. This cmdlet returns a list of certificates that are installed on your computer.</li>
</ul>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-ChildItem</span> <span class="literal">-Path</span> <span class="string">&quot;Cert:\CurrentUser\My&quot;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>Locate the subject name from the returned list, then copy the thumbprint that is located next to it to a text file. In this case “P2SRootCert”.</p>
<p>ConsoleCopy</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">Thumbprint                                Subject</span><br><span class="line"></span><br><span class="line">----------                                -------</span><br><span class="line"></span><br><span class="line">7181AA8C1B4D34EEDB2F3D3BEC5839F3FE52D655  CN=P2SRootCert</span><br></pre></td></tr></table></figure>
</li>
<li><p>Declare a variable for the root certificate using the thumbprint from the previous step.</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$cert</span> = <span class="built_in">Get-ChildItem</span> <span class="literal">-Path</span> <span class="string">&quot;Cert:\CurrentUser\My\&lt;THUMBPRINT&gt;&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Replace THUMBPRINT with the thumbprint of the root certificate from which you want to generate a child certificate.</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$cert</span> = <span class="built_in">Get-ChildItem</span> <span class="literal">-Path</span> <span class="string">&quot;Cert:\CurrentUser\My\7181AA8C1B4D34EEDB2F3D3BEC5839F3FE52D655&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>In this example, a client certificate named “P2SChildCert” is generated. The client certificate that you generate is automatically installed in “Certificates - Current User\Personal\Certificates” on your computer.</p>
</li>
</ol>
</li>
</ol>
<p>You can modify and run the following command to generate a client certificate:</p>
<p>PowerShellCopy</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">New-SelfSignedCertificate</span> <span class="literal">-Type</span> Custom <span class="literal">-DnsName</span> P2SChildCert <span class="literal">-KeySpec</span> Signature `</span><br><span class="line"></span><br><span class="line"><span class="literal">-Subject</span> <span class="string">&quot;CN=P2SChildCert&quot;</span> <span class="literal">-KeyExportPolicy</span> Exportable `</span><br><span class="line"></span><br><span class="line"><span class="literal">-HashAlgorithm</span> sha256 <span class="literal">-KeyLength</span> <span class="number">2048</span> `</span><br><span class="line"></span><br><span class="line"><span class="literal">-CertStoreLocation</span> <span class="string">&quot;Cert:\CurrentUser\My&quot;</span> `</span><br><span class="line"></span><br><span class="line"><span class="literal">-Signer</span> <span class="variable">$cert</span> <span class="literal">-TextExtension</span> <span class="selector-tag">@</span>(<span class="string">&quot;2.5.29.37=&#123;text&#125;1.3.6.1.5.5.7.3.2&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>To learn about exporting the root certificate and the client certificate, see <a href="https://learn.microsoft.com/en-us/azure/virtual-wan/certificates-point-to-site">Generate and export certificates for User VPN connections</a>.</p>
<p>To configure a point-to-site connection using Azure certificate, you need to:</p>
<ol>
<li>Add the VPN client address pool.</li>
<li>Specify tunnel type and authentication type.</li>
<li>Upload root certificate public key information.</li>
<li>Install exported client certificate.</li>
<li>Configure settings for VPN clients.</li>
<li>Connect to Azure.</li>
</ol>
<p>For detailed steps to configure a point-to-site connection using Azure certificate, refer to <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal">Connect to a VNet using P2S VPN &amp; certificate authentication: portal - Azure VPN Gateway</a>.</p>
<p>To verify your VPN connection is active (Windows clients), open an elevated command prompt, and run <strong>ipconfig&#x2F;all</strong>.</p>
<p>To connect to a virtual machine (Windows clients):</p>
<ol>
<li>Locate the private IP address.</li>
<li>Verify that you’re connected to your VNet.</li>
<li>Open Remote Desktop Connection by typing “RDP” or “Remote Desktop Connection” in the search box on the taskbar, then select <strong>Remote Desktop Connection</strong>. You can also open Remote Desktop Connection using the “mstsc” command in PowerShell.</li>
<li>In Remote Desktop Connection, enter the private IP address of the VM. Select <strong>Show Options</strong> to adjust additional settings, then connect.</li>
</ol>
<h2 id="Troubleshoot-a-connection"><a href="#Troubleshoot-a-connection" class="headerlink" title="Troubleshoot a connection"></a>Troubleshoot a connection</h2><p>If you’re having trouble connecting to a virtual machine over your VPN connection, read the following:</p>
<ul>
<li>Check that your VPN connection is successful.</li>
<li>Ensure that you’re connecting to the private IP address for the VM.</li>
<li>If you can connect to the VM using the private IP address, but not the computer name, check DNS configuration.</li>
<li>For more information about RDP connections, see <a href="https://learn.microsoft.com/en-us/troubleshoot/azure/virtual-machines/troubleshoot-rdp-connection">Troubleshoot Remote Desktop connections to a VM</a>.</li>
<li>Verify that the VPN client configuration package was generated after the DNS server IP addresses were specified for the VNet. If you updated the DNS server IP addresses, generate and install a new VPN client configuration package.</li>
<li>Ensure that there is no overlapping address space. For example, if the IP address is within the address range of the VNet that you are connecting to, or within the address range of your VPNClientAddressPool. Use “ipconfig” to check the IPv4 address assigned to the Ethernet adapter on the computer from which you are connecting.</li>
</ul>
<p>To add a trusted root certificate, refer to <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal">Upload a trusted root certificate</a>.</p>
<p>To remove a trusted root certificate:</p>
<ol>
<li>Go to the point-to-site configuration page for your virtual network gateway.</li>
<li>In the root certificate section of the page, locate the certificate that you want to remove.</li>
<li>Select the ellipsis next to the certificate, and then select <strong>Remove</strong>.</li>
</ol>
<h2 id="Revoke-a-client-certificate"><a href="#Revoke-a-client-certificate" class="headerlink" title="Revoke a client certificate"></a>Revoke a client certificate</h2><p>Revoking a client certificate is different from removing a trusted root certificate. Removing a trusted root certificate .cer file from Azure revokes all the client certificates generated&#x2F;authenticated by the root certificate. Revoking a client certificate allows other certificates associated with the same root certificate to continue working.</p>
<p>To revoke a client certificate, add the thumbprint to the revocation list.</p>
<ul>
<li>Retrieve the client certificate thumbprint. See <a href="https://learn.microsoft.com/en-us/dotnet/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate">How to retrieve the Thumbprint of a Certificate</a>.</li>
<li>Copy the information to a text editor and remove all spaces so that it is a continuous string.</li>
<li>Go to the virtual network gateway point-to-site-configuration page. This is the same page that you used to upload a trusted root certificate.</li>
<li>In the <strong>Revoked certificates</strong> section, input a friendly name for the certificate.</li>
<li>Copy and paste the thumbprint string to the <strong>Thumbprint</strong> field.</li>
<li>The thumbprint validates and is automatically added to the revocation list. A message appears on the screen that the list is updating.</li>
<li>After updating has completed, the certificate can no longer be used to connect. Clients that try to connect using this certificate receive a message saying that the certificate is no longer valid.</li>
</ul>
<h2 id="Troubleshoot-connectivity-to-secure-endpoints"><a href="#Troubleshoot-connectivity-to-secure-endpoints" class="headerlink" title="Troubleshoot connectivity to secure endpoints"></a>Troubleshoot connectivity to secure endpoints</h2><p>Azure Private Endpoint is a network interface that uses a private IP address from a virtual network and connects you privately and securely to a private link service.</p>
<p>The following are the connectivity scenarios available with Private Endpoint:</p>
<ul>
<li>Virtual network from the same region.</li>
<li>Regionally peered virtual networks.</li>
<li>Globally peered virtual networks.</li>
<li>Customer on-premises over VPN or Azure ExpressRoute circuits.</li>
</ul>
<h2 id="Diagnose-connectivity-problems"><a href="#Diagnose-connectivity-problems" class="headerlink" title="Diagnose connectivity problems"></a>Diagnose connectivity problems</h2><p>The following steps will guide you to ensure that all the required configurations are in place, to resolve connectivity problems with your private endpoint setup. For detailed steps, see <a href="https://learn.microsoft.com/en-us/azure/private-link/troubleshoot-private-endpoint-connectivity">Diagnose connectivity problems</a>.</p>
<ol>
<li>Review Private Endpoint configuration by browsing the resource.</li>
<li>Use Azure Monitor to see if data is flowing.</li>
<li>Use VM Connection troubleshoot from Azure Network Watcher.</li>
<li>DNS resolution from the test results must have the same private IP address assigned to the private endpoint.</li>
<li>Source virtual machine should have the route to Private Endpoint IP next hop as InterfaceEndpoints in the NIC Effective Routes.</li>
<li>If the connection has validated results, the connectivity problem might be related to other aspects like secrets, tokens, and passwords at the application layer.</li>
<li>Narrow down before raising the support ticket.</li>
<li>If the Private Endpoint is linked to a Private Link Service which is linked to a load balancer, check if the backend pool is reporting healthy. Fixing the load balancer health will resolve the issue with connecting to the Private Endpoint.</li>
<li>Contact the Azure Support team if your problem is unresolved and a connectivity problem still exists.</li>
</ol>
<h2 id="Troubleshoot-encryption-x2F-certificate-related-issues-for-site-to-site-scenarios"><a href="#Troubleshoot-encryption-x2F-certificate-related-issues-for-site-to-site-scenarios" class="headerlink" title="Troubleshoot encryption&#x2F;certificate-related issues for site-to-site scenarios"></a>Troubleshoot encryption&#x2F;certificate-related issues for site-to-site scenarios</h2><h3 id="IPsec-and-IKE-policy-parameters-for-VPN-gateways"><a href="#IPsec-and-IKE-policy-parameters-for-VPN-gateways" class="headerlink" title="IPsec and IKE policy parameters for VPN gateways"></a>IPsec and IKE policy parameters for VPN gateways</h3><p>The IPsec and IKE protocol standard supports a wide range of cryptographic algorithms in various combinations. The article <a href="https://learn.microsoft.com/en-us/azure-stack/user/azure-stack-vpn-gateway-settings">IPsec&#x2F;IKE parameters</a> explains which parameters are supported in Azure Stack Hub to meet your compliance or security requirements.</p>
<p>Note the following important considerations when using these policies:</p>
<ul>
<li>The IPsec&#x2F;IKE policy only works on the Standard and HighPerformance (route-based) gateway SKUs.</li>
<li>You can only specify one policy combination for a given connection.</li>
<li>You must specify all algorithms and parameters for both IKE (Main Mode) and IPsec (Quick Mode). Partial policy specification is not allowed.</li>
<li>Check with your VPN device vendor specifications if the policy is supported on your on-premises VPN devices.</li>
</ul>
<p>The following steps show how to create and configure an IPsec&#x2F;IKE policy, and apply it to a new or existing connection. For detailed step-by-step instructions, follow <a href="https://learn.microsoft.com/en-us/azure-stack/user/azure-stack-vpn-s2s">Steps to configure an IPsec&#x2F;IKE policy for site-to-site (S2S) VPN connections in Azure Stack Hub</a>.</p>
<ol>
<li>Create and set IPsec&#x2F;IKE policy.</li>
<li>Create a new site-to-site VPN connection with IPsec&#x2F;IKE policy:<ol>
<li>Step 1 - Create the virtual network, VPN gateway, and local network gateway.</li>
<li>Step 2 - Create a site-to-site VPN connection with an IPsec&#x2F;IKE policy.</li>
</ol>
</li>
<li>Update IPsec&#x2F;IKE policy for a connection.</li>
</ol>
<h1 id="Troubleshoot-NSGs"><a href="#Troubleshoot-NSGs" class="headerlink" title="Troubleshoot NSGs"></a>Troubleshoot NSGs</h1><p>Completed100 XP</p>
<ul>
<li>8 minutes</li>
</ul>
<h2 id="Demonstrate-an-understanding-of-network-security-group-NSG-configuration-data-including-ports-service-tags-and-priority-numbers"><a href="#Demonstrate-an-understanding-of-network-security-group-NSG-configuration-data-including-ports-service-tags-and-priority-numbers" class="headerlink" title="Demonstrate an understanding of network security group (NSG) configuration data including ports, service tags, and priority numbers"></a>Demonstrate an understanding of network security group (NSG) configuration data including ports, service tags, and priority numbers</h2><h3 id="Network-security-groups"><a href="#Network-security-groups" class="headerlink" title="Network security groups"></a>Network security groups</h3><p>An Azure network security group filters network traffic to and from resources in an Azure virtual network. A network security group comprises of security rules that allow or deny inbound and outbound network traffic, to and from, several types of Azure resource. For each rule, you can specify source and destination, port, and protocol.</p>
<p>In this unit, you will learn about:</p>
<ul>
<li>Properties of a network security group rule, and the default security rules that are applied.</li>
<li>The rule properties that you can modify to create an augmented security rule.</li>
</ul>
<h3 id="Security-rules"><a href="#Security-rules" class="headerlink" title="Security rules"></a>Security rules</h3><p>A network security group can contain rules from zero, or as many as required, within Azure subscription limits. Each rule specifies the following properties:</p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Explanation</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Name</td>
<td align="left">A unique name within the network security group.</td>
</tr>
<tr>
<td align="left">Priority</td>
<td align="left">Rules with lower numbers are processed before higher numbers because lower numbers have higher priority. A number can be between 100 and 4096.</td>
</tr>
<tr>
<td align="left">Source or destination</td>
<td align="left">If you specify an address for an Azure resource, you must specify the private IP address, a range, a service tag, or application security group assigned to the resource.</td>
</tr>
<tr>
<td align="left">Protocol</td>
<td align="left">TCP, UDP, ICMP, ESP, AH, or Any.</td>
</tr>
<tr>
<td align="left">Direction</td>
<td align="left">Whether the rule applies to inbound, or outbound traffic.</td>
</tr>
<tr>
<td align="left">Port range</td>
<td align="left">Specifying ranges enables you to create fewer security rules. You can specify an individual or range of ports. For example, 80 or 10000-10005.</td>
</tr>
<tr>
<td align="left">Action</td>
<td align="left">Allow or deny.</td>
</tr>
</tbody></table>
<p>There are limits to the number of security rules you can create in a network security group. For details, see <a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/azure-subscription-service-limits?toc=/azure/virtual-network/toc.json">Azure limits</a>.</p>
<h3 id="Default-security-rules"><a href="#Default-security-rules" class="headerlink" title="Default security rules"></a>Default security rules</h3><p>Azure creates the following default rules in each of your network security groups:</p>
<p><strong>Inbound</strong></p>
<p>AllowVNetInBound</p>
<table>
<thead>
<tr>
<th align="left">Priority</th>
<th align="left">Source</th>
<th align="left">Source ports</th>
<th align="left">Destination</th>
<th align="left">Destination ports</th>
<th align="left">Protocol</th>
<th align="left">Access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">65000</td>
<td align="left">VirtualNetwork</td>
<td align="left">0-65535</td>
<td align="left">VirtualNetwork</td>
<td align="left">0-65535</td>
<td align="left">Any</td>
<td align="left">Allow</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>AllowAzureLoadBalancerInBound</p>
<table>
<thead>
<tr>
<th align="left">Priority</th>
<th align="left">Source</th>
<th align="left">Source ports</th>
<th align="left">Destination</th>
<th align="left">Destination ports</th>
<th align="left">Protocol</th>
<th align="left">Access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">65001</td>
<td align="left">AzureLoadBalancer</td>
<td align="left">0-65535</td>
<td align="left">0.0.0.0&#x2F;0</td>
<td align="left">0-65535</td>
<td align="left">Any</td>
<td align="left">Allow</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>DenyAllInbound</p>
<table>
<thead>
<tr>
<th align="left">Priority</th>
<th align="left">Source</th>
<th align="left">Source ports</th>
<th align="left">Destination</th>
<th align="left">Destination ports</th>
<th align="left">Protocol</th>
<th align="left">Access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">65500</td>
<td align="left">0.0.0.0&#x2F;0</td>
<td align="left">0-65535</td>
<td align="left">0.0.0.0&#x2F;0</td>
<td align="left">0-65535</td>
<td align="left">Any</td>
<td align="left">Allow</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>Outbound</strong></p>
<p>AllowVnetOutBound</p>
<table>
<thead>
<tr>
<th align="left">Priority</th>
<th align="left">Source</th>
<th align="left">Source ports</th>
<th align="left">Destination</th>
<th align="left">Destination ports</th>
<th align="left">Protocol</th>
<th align="left">Access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">65000</td>
<td align="left">VirtualNetwork</td>
<td align="left">0-65535</td>
<td align="left">VirtualNetwork</td>
<td align="left">0-65535</td>
<td align="left">Any</td>
<td align="left">Allow</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>AllowInternetOutBound</p>
<table>
<thead>
<tr>
<th align="left">Priority</th>
<th align="left">Source</th>
<th align="left">Source ports</th>
<th align="left">Destination</th>
<th align="left">Destination ports</th>
<th align="left">Protocol</th>
<th align="left">Access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">65001</td>
<td align="left">0.0.0.0&#x2F;0</td>
<td align="left">0-65535</td>
<td align="left">Internet</td>
<td align="left">0-65535</td>
<td align="left">Any</td>
<td align="left">Allow</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>DenyAllOutBound</p>
<table>
<thead>
<tr>
<th align="left">Priority</th>
<th align="left">Source</th>
<th align="left">Source ports</th>
<th align="left">Destination</th>
<th align="left">Destination ports</th>
<th align="left">Protocol</th>
<th align="left">Access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">65001</td>
<td align="left">0.0.0.0&#x2F;0</td>
<td align="left">0-65535</td>
<td align="left">0.0.0.0&#x2F;0</td>
<td align="left">0-65535</td>
<td align="left">Any</td>
<td align="left">Allow</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>In the <strong>Source</strong> and <strong>Destination</strong> columns, <em>VirtualNetwork</em>, <em>AzureLoadBalancer</em>, and <em>Internet</em> are service tags, rather than IP addresses. In the protocol column, <strong>Any</strong> encompasses TCP, UDP, and ICMP. When creating a rule, you can specify TCP, UDP, ICMP or Any. 0.0.0.0&#x2F;0 in the <strong>Source</strong> and <strong>Destination</strong> columns represents all addresses. Clients like Azure portal, Azure CLI, or PowerShell can use ***** or Any for this expression.</p>
<p>You cannot remove the default rules, but you can override them by creating rules with higher priorities.</p>
<h3 id="Augmented-security-rules"><a href="#Augmented-security-rules" class="headerlink" title="Augmented security rules"></a>Augmented security rules</h3><p>With augmented security rules, you can combine multiple ports and multiple explicit IP addresses and ranges into a single security rule. In other words, augmented security rules simplify security definition for virtual networks. This allows you to break larger and complex network security policies into fewer, and simpler rules. Augmented rules are generally used in the source, destination, and port fields of a rule.</p>
<p>Combining augmented security rules with service tags or application security groups, helps streamline your security rule definition. However, there are limits to the number of addresses, ranges, and ports that you can specify in a rule.</p>
<ul>
<li><strong>Service tags</strong>: A service tag represents a group of IP address prefixes from a given Azure service. It helps to minimize the complexity of frequent updates on network security rules. Refer to <a href="https://learn.microsoft.com/en-us/azure/virtual-network/service-tags-overview">Azure service tags</a>.</li>
<li>For an example of how to use the Storage service tag to restrict network access, go to <a href="https://learn.microsoft.com/en-us/azure/virtual-network/tutorial-restrict-network-access-to-resources">Restrict network access to PaaS resources with virtual network service endpoints using the Azure portal</a>.</li>
<li><strong><a href="https://learn.microsoft.com/en-us/azure/virtual-network/application-security-groups">Application security groups</a></strong>: Application security groups enable you to configure network security as a natural extension of an application’s structure. This allows you to group virtual machines and define network security policies based on those groups. You can reuse your security policy at scale without manual maintenance of explicit IP addresses. To learn more, see Application security groups.</li>
</ul>
<h2 id="Troubleshoot-NSG-configuration-issues"><a href="#Troubleshoot-NSG-configuration-issues" class="headerlink" title="Troubleshoot NSG configuration issues"></a>Troubleshoot NSG configuration issues</h2><p>Network security groups (NSGs) enable you to control the inbound and outbound flow of traffic of a virtual machine (VM). You can associate an NSG to a subnet in an Azure virtual network, a network interface connected to a VM, or both. Any security rules applied to a network interface are a combination of rules present in the NSG associated to a network interface, and the subnet the network it is in. You can examine the conflict between rules in different NSGs that are applied on your VM’s network interfaces.</p>
<p>The following articles help gain understanding of:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview">Virtual network overview</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-network-interface">Network interface</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview">Network security groups overview</a></li>
</ul>
<p>In this unit, you’ll learn how to diagnose a network traffic filter problem by viewing the NSG security rules that are effective for a VM.</p>
<h3 id="Diagnose-using-Azure-portal"><a href="#Diagnose-using-Azure-portal" class="headerlink" title="Diagnose using Azure portal"></a>Diagnose using Azure portal</h3><p><strong>Scenario</strong></p>
<p>When you try to connect to a VM over port 80 from the internet, the connection fails. To understand why this happens, you can examine the effective security rules for a network interface using the Azure portal, PowerShell, or the Azure CLI.</p>
<p>If you don’t have an existing VM to view the effective security rules, you need to first deploy a Linux or Windows VM to complete the task.</p>
<p>In the following task, the examples are for a VM named <strong>myVM</strong> with a network interface named <strong>myVMVMNic</strong>. The VM and network interface are in a resource group named <strong>myResourceGroup</strong> and are in the East US region. To diagnose the problem, Change the values in the steps, as appropriate, for the VM.</p>
<ol>
<li><p>Log into the Azure portal.</p>
</li>
<li><p>At the top of the Azure portal, enter the name of the VM in the search box. When the name of the VM appears in the search results, select it.</p>
</li>
<li><p>Under <strong>SETTINGS</strong>, select <strong>Networking</strong>.</p>
<p>The rules you see listed in the following picture are for a network interface named <strong>myVMVMNic</strong>. There are <strong>INBOUND PORT RULES</strong> for the network interface from two different network security groups:</p>
<ul>
<li><strong>mySubnetNSG</strong>: Associated to the subnet that the network interface is in.</li>
<li><strong>myVMNSG</strong>: Associated to the network interface in the VM named <strong>myVMVMNic</strong>.</li>
</ul>
<p>As you can see in the previous image, the rule named <strong>DenyAllInBound</strong> is preventing inbound communication from the internet to the VM over port 80. The rule lists 0.0.0.0&#x2F;0 for SOURCE, which includes the internet. No other rule with a higher priority (lower number) allows port 80 inbound. To allow port 80 inbound to the VM from the internet, see <a href="https://learn.microsoft.com/en-us/azure/virtual-network/diagnose-network-traffic-filter-problem">Resolve a problem</a>.</p>
<p>Under <strong>OUTBOUND PORT RULES</strong>, at the bottom, there are outbound port rules for the network interface. <strong>VirtualNetwork</strong> and <strong>AzureLoadBalancer</strong> are service tags. Service tags represent a group of IP address prefixes to help minimize complexity for security rule creation.</p>
</li>
<li><p>Ensure that the VM is in the running state, and then select <strong>Effective security rules</strong>, as shown in the following image:</p>
<p>You can see that there are different tabs for the NSG associated to the network interface and the subnet. The rules listed are the same as in step 3 although, as shown in the picture, only the first 50 rules are displayed. To download a .csv file that contains all the rules, select <strong>Download</strong>.</p>
<p>To see which prefixes each service tag represents, select a rule, such as <strong>AllowAzureLoadBalancerInbound</strong>. The picture below shows the prefixes for the <strong>AzureLoadBalancer</strong> service tag:</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/3-azure-load-balancer.png" alt="Screenshot showing prefixes for the AzureLoadBalancer service tag."></p>
</li>
<li><p>The VM in this example has two network interfaces, <strong>myVMVMNic</strong> and <strong>myVMVMNic2</strong> attached to it. The effective security rules can be different for each network interface. Select <strong>myVMVMNic2</strong> to view the rules for this network interface.</p>
</li>
</ol>
<p>The <strong>myVMVMNic2</strong> network interface does not have a network security group associated to it, as the <strong>myVMVMNic</strong> network interface does. Each network interface and subnet can have zero, or one, NSG associated to it. The NSG associated to each network interface or subnet can be the same, or different. You can associate the same NSG to as many network interfaces and subnets as you choose.</p>
<p> Note</p>
<p>Though effective security rules were viewed through the VM, you can also look at them through an individual:</p>
<ul>
<li>Network interface: Learn how to <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-network-interface">view a network interface</a>.</li>
<li>NSG: Learn how to <a href="https://learn.microsoft.com/en-us/azure/virtual-network/manage-network-security-group">view an NSG</a>.</li>
</ul>
<p>To run the commands using PowerShell, refer to <a href="https://learn.microsoft.com/en-us/azure/virtual-network/diagnose-network-traffic-filter-problem">Diagnose using PowerShell</a>.</p>
<p>To run the commands using Azure CLI, refer to <a href="https://learn.microsoft.com/en-us/azure/virtual-network/diagnose-network-traffic-filter-problem">Diagnose using Azure CLI</a>.</p>
<p>To troubleshoot connectivity problems:</p>
<ul>
<li>To allow inbound traffic from the internet, add security rules with a higher priority than default rules.</li>
<li>To troubleshoot any issues related to virtual network peering, you can view the prefixes in the ExpandedAddressPrefix list.</li>
<li>Ensure that there is an NSG associated with the VM’s network interface and&#x2F;or subnet. Also, check that the VM is in the running state.</li>
<li>If the VM has a public IP address, it’s recommended to apply an NSG to the subnet of the network interface.</li>
</ul>
<h3 id="Additional-diagnosis"><a href="#Additional-diagnosis" class="headerlink" title="Additional diagnosis"></a>Additional diagnosis</h3><ul>
<li>Use the <a href="https://learn.microsoft.com/en-us/azure/network-watcher/diagnose-vm-network-traffic-filtering-problem">IP flow verify</a> capability of Azure Network Watcher to determine if traffic is allowed to or from a VM.</li>
<li>If there are no security rules causing a VM’s network connectivity to fail, the problem may be due to:<ul>
<li>Firewall software running within the VM’s operating system.</li>
<li>Routes configured for virtual appliances or on-premises traffic—refer to <a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-forced-tunneling-rm?toc=/azure/virtual-network/toc.json">forced-tunneling</a>. Also, to learn how to diagnose route problems that may impede the flow of traffic out of the VM, see <a href="https://learn.microsoft.com/en-us/azure/virtual-network/diagnose-network-routing-problem">Diagnose a virtual machine network traffic routing problem</a>.</li>
</ul>
</li>
</ul>
<h2 id="Review-and-interpret-NSG-flow-logs"><a href="#Review-and-interpret-NSG-flow-logs" class="headerlink" title="Review and interpret NSG flow logs"></a>Review and interpret NSG flow logs</h2><h3 id="Introduction-1"><a href="#Introduction-1" class="headerlink" title="Introduction"></a>Introduction</h3><p>The NSG flow logs feature in Azure Network Watcher allows you to log information about IP traffic flowing through an NSG. The flow data is sent to Azure Storage accounts and from there you can export it to any visualization tool, SIEM, or IDS.</p>
<h2 id="Why-use-flow-logs"><a href="#Why-use-flow-logs" class="headerlink" title="Why use flow logs?"></a>Why use flow logs?</h2><p>Flow logs are crucial when it comes to managing and monitoring all the network activity in your cloud environment. You can use it for optimizing network flows, monitoring data, verifying compliance, detecting intrusions and more.</p>
<p>Some common use cases are:</p>
<p><strong>Network monitoring</strong>:</p>
<ul>
<li>Identify unknown or undesired traffic.</li>
<li>Monitor traffic levels and bandwidth consumption.</li>
<li>Filter flow logs by IP and port to understand application behavior.</li>
<li>Export flow logs to the analytics and visualization tools you choose, to set up monitoring dashboards.</li>
</ul>
<p><strong>Usage monitoring and optimization</strong>:</p>
<ul>
<li>Identify top talkers in your network.</li>
<li>Combine with GeoIP data to identify cross-region traffic.</li>
<li>Understand traffic growth for capacity forecasting.</li>
<li>Use data to remove overtly restrictive traffic rules.</li>
</ul>
<p><strong>Compliance</strong>:</p>
<ul>
<li>Use flow data to verify network isolation and compliance with enterprise access rules.</li>
</ul>
<p><strong>Network forensics and security analysis</strong>:</p>
<ul>
<li>Analyze network flows from compromised IPs and network interfaces.</li>
<li>Export flow logs to any SIEM or IDS tool of your choice.</li>
</ul>
<h2 id="How-logging-works"><a href="#How-logging-works" class="headerlink" title="How logging works"></a>How logging works</h2><ul>
<li>Flow logs operate at Layer 4 (transport layer). It records all IP flows going in and out of an NSG.</li>
<li>Logs are collected at one-minute intervals through the Azure platform without affecting customer resources, or network performance.</li>
<li>Logs are written in the JSON format. It shows outbound and inbound flows on a per NSG rule basis.</li>
<li>Each log record contains the network interface (NIC). The flow applies to five-tuple information, the traffic decision and (version 2 only) throughput information. Refer to <a href="https://learn.microsoft.com/en-us/azure/network-watcher/network-watcher-nsg-flow-logging-overview">Log format</a>.</li>
<li>Flow logs delete the logs up to a year after creation.</li>
</ul>
<p>To enable the flow logs, refer to <a href="https://learn.microsoft.com/en-us/azure/network-watcher/network-watcher-nsg-flow-logging-overview">Enabling NSG Flow Logs</a>.</p>
<h3 id="IP-flow-verify"><a href="#IP-flow-verify" class="headerlink" title="IP flow verify"></a>IP flow verify</h3><p>IP flow verify confirms if a packet is allowed or denied to or from a virtual machine. You can use IP flow verify to diagnose connectivity issues from or to the internet and from or to the on-premises environment. It provides the information regarding direction, protocol, local IP, remote IP, local port, and remote port. If a security group denies the packet, the name of the rule used is returned.</p>
<p>IP flow verify considers the rules for all NSGs applied to the network interface, such as a subnet or virtual machine NIC. It then verifies the traffic flow based on the configured settings to or from that network interface.</p>
<p>IP flow verify validates if a rule in an NSG is blocking ingress or egress traffic to or from a virtual machine. It also evaluates the Azure Virtual Network Manager rules and NSG rules.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/3-ip-flow-verify.png" alt="Screenshot displaying IP flow verify window."></p>
<p>To learn more about troubleshooting NSG flow logs, see <a href="https://learn.microsoft.com/en-us/azure/network-watcher/network-watcher-nsg-flow-logging-overview">Troubleshooting common issues</a>.</p>
<h2 id="Determine-whether-a-VM-or-group-of-VMs-is-associated-with-an-application-security-group-ASG"><a href="#Determine-whether-a-VM-or-group-of-VMs-is-associated-with-an-application-security-group-ASG" class="headerlink" title="Determine whether a VM or group of VMs is associated with an application security group (ASG)"></a>Determine whether a VM or group of VMs is associated with an application security group (ASG)</h2><p>Application security groups allow you to group virtual machines located in Azure virtual network, and define network security policies based on those groups. This helps in reducing the maintenance effort of explicit IP addresses. Consider the following picture for a better understanding of ASGs:</p>
<table>
<thead>
<tr>
<th align="center">Application security groups</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/3-application-security-groups.png" alt="Diagram demonstration Application security groups."></td>
</tr>
</tbody></table>
<p>In the previous picture, NIC1 and NIC2 are members of the AsgWeb ASG. NIC3 is a member of the AsgLogic ASG, and NIC4 a member of the AsgDb ASG. In this example, each network interface is a member of only one network security group. However, a network interface can be a member of multiple ASGs, up to the Azure limits.</p>
<p>None of the network interfaces have an associated network security group. NSG1 is associated to both subnets and contains the following rules:</p>
<h3 id="Allow-HTTP-Inbound-Internet"><a href="#Allow-HTTP-Inbound-Internet" class="headerlink" title="Allow-HTTP-Inbound-Internet"></a>Allow-HTTP-Inbound-Internet</h3><p>This rule is needed to allow traffic from the internet to the web servers. Because inbound traffic from the internet is denied by the DenyAllInbound default security rule, no additional rule is needed for the AsgLogic or AsgDb application security groups.</p>
<table>
<thead>
<tr>
<th align="left">Priority</th>
<th align="left">Source</th>
<th align="left">Source ports</th>
<th align="left">Destination</th>
<th align="left">Destination ports</th>
<th align="left">Protocol</th>
<th align="left">Access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">100</td>
<td align="left">Internet</td>
<td align="left">*</td>
<td align="left">AsgWeb</td>
<td align="left">80</td>
<td align="left">TCP</td>
<td align="left">Allow</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="Deny-Database-All"><a href="#Deny-Database-All" class="headerlink" title="Deny-Database-All"></a>Deny-Database-All</h3><p>Because the <strong>AllowVNetInBound</strong> default security rule allows all communication between resources in the same virtual network, this rule is needed to deny traffic from all resources.</p>
<table>
<thead>
<tr>
<th align="left">Priority</th>
<th align="left">Source</th>
<th align="left">Source ports</th>
<th align="left">Destination</th>
<th align="left">Destination ports</th>
<th align="left">Protocol</th>
<th align="left">Access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">120</td>
<td align="left">*</td>
<td align="left">*</td>
<td align="left">AsgWeb</td>
<td align="left">1433</td>
<td align="left">Any</td>
<td align="left">Deny</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="Allow-Database-BusinessLogic"><a href="#Allow-Database-BusinessLogic" class="headerlink" title="Allow-Database-BusinessLogic"></a>Allow-Database-BusinessLogic</h3><p>This rule allows traffic from the AsgLogic ASG to the AsgDb ASG. The priority for this rule is higher than that for the Deny-Database-All rule. As a result, this rule is processed before the Deny-Database-All rule, so traffic from the AsgLogic application security group is allowed, whereas all other traffic is blocked.</p>
<table>
<thead>
<tr>
<th align="left">Priority</th>
<th align="left">Source</th>
<th align="left">Source ports</th>
<th align="left">Destination</th>
<th align="left">Destination ports</th>
<th align="left">Protocol</th>
<th align="left">Access</th>
</tr>
</thead>
<tbody><tr>
<td align="left">110</td>
<td align="left">AsgLogic</td>
<td align="left">*</td>
<td align="left">AsgDb</td>
<td align="left">1433</td>
<td align="left">TCP</td>
<td align="left">Allow</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>The rules that specify an ASG as the source or destination are only applied to the network interfaces that are members of the ASG. If the network interface is not a member of an ASG, the rule is not applied to the network interface, even though the network security group is associated to the subnet.</p>
<p>Application security groups have the following constraints:</p>
<ul>
<li>There are several limits related to ASGs. One of these is the number of ASGs you can have in a subscription.</li>
<li>You cannot add network interfaces from different virtual networks to the same ASG. For example, if the first network interface assigned to an ASG named AsgWeb is in the virtual network named VNet1, then all subsequent network interfaces assigned to ASGWeb must exist in VNet1.</li>
<li>All network interfaces for both the source and destination ASGs need to exist in the same virtual network. For example, if AsgLogic contained network interfaces from VNet1, and AsgDb contained network interfaces from VNet2, you could not assign AsgLogic as the source and AsgDb as the destination in a rule.</li>
</ul>
<h1 id="Troubleshoot-Azure-Firewall"><a href="#Troubleshoot-Azure-Firewall" class="headerlink" title="Troubleshoot Azure Firewall"></a>Troubleshoot Azure Firewall</h1><p>Completed100 XP</p>
<ul>
<li>8 minutes</li>
</ul>
<h2 id="Troubleshoot-Azure-Firewall-application-rules"><a href="#Troubleshoot-Azure-Firewall-application-rules" class="headerlink" title="Troubleshoot Azure Firewall application rules"></a>Troubleshoot Azure Firewall application rules</h2><p>Azure Firewall helps you to control outbound network access from an Azure subnet. With Azure Firewall, you can configure:</p>
<ul>
<li>Application rules that define fully qualified domain names (FQDNs) that can be accessed from a subnet.</li>
<li>Network rules that define source address, protocol, destination port, and destination address.</li>
</ul>
<p>A <a href="https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?tabs=cli">hub-and-spoke model</a> is recommended for production deployments, where the firewall is in its own VNet. The workload servers are in peered VNets in the same region, with one or more subnets.</p>
<ul>
<li><strong>AzureFirewallSubnet</strong> ‒ the firewall is in this subnet.</li>
<li><strong>Workload-SN</strong> ‒ the workload server is in this subnet. This subnet’s network traffic goes through the firewall.</li>
</ul>
<p>The following <a href="https://learn.microsoft.com/en-us/azure/firewall/tutorial-firewall-deploy-portal">Deploy and configure Azure Firewall using the Azure portal</a> can help you learn how to:</p>
<ul>
<li>Set up a test network environment.</li>
<li>Deploy a firewall.</li>
<li>Create a default route.</li>
<li>Configure an application rule to allow access to <a href="https://www.google.com/">www.google.com</a>.</li>
<li>Configure a network rule to allow access to external DNS servers.</li>
<li>Configure a NAT rule to allow a remote desktop to the test server.</li>
<li>Test the firewall.</li>
</ul>
<h3 id="Monitor-Azure-Firewall-logs-and-metrics"><a href="#Monitor-Azure-Firewall-logs-and-metrics" class="headerlink" title="Monitor Azure Firewall logs and metrics"></a>Monitor Azure Firewall logs and metrics</h3><p>Firewall logs allow you to monitor Azure Firewall. You can also consider using activity logs to audit Azure Firewall resources. To view performance counters in the portal, use metrics.</p>
<p>Logs can be sent to Azure Monitor logs, Storage, and Event Hubs. They can be analyzed in Azure Monitor logs or by using Excel and Power BI.</p>
<h3 id="View-and-analyze-the-activity-log"><a href="#View-and-analyze-the-activity-log" class="headerlink" title="View and analyze the activity log"></a>View and analyze the activity log</h3><p>You can view and analyze activity log data by using any of the following methods:</p>
<ul>
<li><strong>Azure tools</strong>: Through Azure PowerShell, the Azure CLI, the Azure REST API, or the Azure portal, you can retrieve information from the activity log.</li>
<li><strong>Power BI</strong>: By using the <a href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-connect-to-services">Azure Activity Logs content pack for Power BI</a>, you can analyze your data with preconfigured dashboards that you can use as is, or customize.</li>
<li><strong>Microsoft Sentinel</strong>: By connecting Azure Firewall logs to Microsoft Sentinel, you can view log data in workbooks, use it to create custom alerts, and incorporate it to improve your investigation.</li>
</ul>
<p>Watch this video to learn more about the monitoring abilities of Azure Firewall:</p>
<iframe src="https://www.microsoft.com/en-us/videoplayer/embed/RWI4nn?postJsllMsg=true" frameborder="0" allowfullscreen="true" data-linktype="external" title="Video Player" style="box-sizing: inherit; outline-color: inherit; margin: 0px; padding: 0px; border: 0px; width: 640px; height: 360px; position: absolute; inset: 0px;"></iframe>

<h3 id="View-and-analyze-the-network-and-application-rule-logs"><a href="#View-and-analyze-the-network-and-application-rule-logs" class="headerlink" title="View and analyze the network and application rule logs"></a>View and analyze the network and application rule logs</h3><p>Azure Firewall Workbook within the Azure portal is a platform where you can use Azure Firewall data analysis in an interactive way. For example, to create visual reports, combine multiple firewalls deployed across Azure, and so on.</p>
<p>For access and performance logs, you can connect to your storage account and retrieve the JSON log entries. After you download the JSON files, you can convert them to CSV and view them in Excel, Power BI, or any other data visualization tool.</p>
<p>To learn more, see <a href="https://learn.microsoft.com/en-us/azure/firewall/firewall-workbook">Monitor logs using Azure Firewall Workbook</a>.</p>
<h2 id="Troubleshoot-Azure-Firewall-network-rules"><a href="#Troubleshoot-Azure-Firewall-network-rules" class="headerlink" title="Troubleshoot Azure Firewall network rules"></a>Troubleshoot Azure Firewall network rules</h2><p>Azure Firewall denies all traffic by default. You need to manually configure the rules to allow traffic. You can configure NAT rules, network rules, and applications rules on Azure Firewall using either classic rules or Firewall Policy.</p>
<h3 id="Rule-processing-using-classic-rules"><a href="#Rule-processing-using-classic-rules" class="headerlink" title="Rule processing using classic rules"></a>Rule processing using classic rules</h3><p>Rule collections are processed according to the priority order of a rule type, lower numbers to higher numbers, from 100 to 65,000. A rule collection name can have only letters, numbers, underscores, periods, or hyphens. It must begin with a letter or number, and end with a letter, number, or underscore. The maximum name length is 80 characters.</p>
<p>To have room to add more rule collections if required, it’s recommended to initially space your rule collection priority numbers in increments of 100 (100, 200, 300, and so on).</p>
<h3 id="Rule-processing-using-Firewall-Policy"><a href="#Rule-processing-using-Firewall-Policy" class="headerlink" title="Rule processing using Firewall Policy"></a>Rule processing using Firewall Policy</h3><p>Rules are organized inside Rule Collections and Rule Collection Groups when using Firewall Policy. Rule Collection Groups contain zero or more Rule Collections. Rule Collections are of NAT, Network, or Applications types. You can define multiple Rule Collection types within a single Rule Group. You can specify zero or more Rules in a Rule Collection. Rules in a Rule Collection must be of the same type (NAT, Network, or Application).</p>
<p>Rules are processed based on Rule Collection Group and Rule Collection priority. They can be any number between 100 (highest priority) to 65,000 (lowest priority).</p>
<p>If a Firewall Policy is inherited from a parent policy, Rule Collection Groups in the parent policy always take precedence regardless of the priority of a child policy.</p>
<p>Here is an example of a Firewall Policy:</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Priority</th>
<th align="left">Rules</th>
<th align="left">Inherited from</th>
</tr>
</thead>
<tbody><tr>
<td align="left">BaseRCG1</td>
<td align="left">Rule Collection Group</td>
<td align="left">200</td>
<td align="left">8</td>
<td align="left">Parent policy</td>
</tr>
<tr>
<td align="left">DNATRC1</td>
<td align="left">DNAT Rule Collection</td>
<td align="left">600</td>
<td align="left">7</td>
<td align="left">Parent policy</td>
</tr>
<tr>
<td align="left">DNATRC3</td>
<td align="left">DNAT Rule Collection</td>
<td align="left">600</td>
<td align="left">7</td>
<td align="left">Parent policy</td>
</tr>
<tr>
<td align="left">NetworkRc1</td>
<td align="left">Network Rule Collection</td>
<td align="left">800</td>
<td align="left">1</td>
<td align="left">Parent policy</td>
</tr>
<tr>
<td align="left">BaseRCG2</td>
<td align="left">Rule Collection Group</td>
<td align="left">300</td>
<td align="left">3</td>
<td align="left">Parent policy</td>
</tr>
<tr>
<td align="left">AppRCG2</td>
<td align="left">Application Rule Collection</td>
<td align="left">1200</td>
<td align="left">2</td>
<td align="left">Parent policy</td>
</tr>
<tr>
<td align="left">NetworkRC2</td>
<td align="left">Network Rule Collection</td>
<td align="left">1300</td>
<td align="left">1</td>
<td align="left">Parent policy</td>
</tr>
<tr>
<td align="left">ChildRCG1</td>
<td align="left">Rule Collection Group</td>
<td align="left">300</td>
<td align="left">5</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">ChAppRC1</td>
<td align="left">Application Rule Collection</td>
<td align="left">700</td>
<td align="left">3</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">ChNetRC1</td>
<td align="left">Network Rule Collection</td>
<td align="left">900</td>
<td align="left">2</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">ChildRCG2</td>
<td align="left">Rule Collection Group</td>
<td align="left">650</td>
<td align="left">9</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">ChNetRC2</td>
<td align="left">Network Rule Collection</td>
<td align="left">1100</td>
<td align="left">2</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">ChAppRC2</td>
<td align="left">Application Rule Collection</td>
<td align="left">2000</td>
<td align="left">7</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">ChDNATRC3</td>
<td align="left">DNAT Rule Collection</td>
<td align="left">3000</td>
<td align="left">2</td>
<td align="left">-</td>
</tr>
</tbody></table>
<p>The rule processing will be in the following order: DNATRC1, DNATRC3, ChDNATRC3, NetworkRC1, NetworkRC2, ChNetRC1, ChNetRC2, AppRC2, ChAppRC1, ChAppRC2.</p>
<p>For more information about Firewall Policy rule sets, refer to <a href="https://learn.microsoft.com/en-us/azure/firewall/policy-rule-sets">Azure Firewall Policy rule sets</a>.</p>
<p> Note</p>
<p>Application rules are always processed after Network rules, which are processed after DNAT rules, regardless of Rule Collection Group or Rule Collection priority and policy inheritance.</p>
<p>If you enable threat intelligence-based filtering, those rules are highest priority and are always processed first. For more information, see <a href="https://learn.microsoft.com/en-us/azure/firewall/threat-intel">Azure Firewall threat intelligence-based filtering</a>.</p>
<h3 id="IDPS"><a href="#IDPS" class="headerlink" title="IDPS"></a>IDPS</h3><p>When IDPS is configured in Alert mode, it generates alerts on matching signatures for inbound and outbound flows. For an IDPS signature match, an alert is logged in firewall logs. However, there might still be another log entry generated for traffic that is denied&#x2F;allowed by application&#x2F;network rules. This is because the IDPS engine works in parallel to the rule processing engine.</p>
<h2 id="Troubleshoot-Azure-Firewall-infrastructure-rules"><a href="#Troubleshoot-Azure-Firewall-infrastructure-rules" class="headerlink" title="Troubleshoot Azure Firewall infrastructure rules"></a>Troubleshoot Azure Firewall infrastructure rules</h2><p>There is a built-in rule collection for infrastructure Fully Qualified Domain Names (FQDNs) by default in Azure Firewall. Specific FQDNs used for the platform can’t be used for other purposes.</p>
<p>The built-in rule collection comprises of the following services:</p>
<ul>
<li>Compute access to storage Platform Image Repository (PIR).</li>
<li>Managed disks status storage access.</li>
<li>Azure Diagnostics and Logging (MDS).</li>
</ul>
<h3 id="Overriding"><a href="#Overriding" class="headerlink" title="Overriding"></a>Overriding</h3><p>With the override feature, you can create a deny all application rule collection that is processed last. This will override the built-in infrastructure rule collection and will always be processed before it. Anything not in the infrastructure rule collection is denied by default.</p>
<h2 id="Troubleshoot-Azure-Firewall-network-address-translation-NAT-rules"><a href="#Troubleshoot-Azure-Firewall-network-address-translation-NAT-rules" class="headerlink" title="Troubleshoot Azure Firewall network address translation (NAT) rules"></a>Troubleshoot Azure Firewall network address translation (NAT) rules</h2><p>Network rules allow or deny inbound, outbound, and east-west traffic based on the network layer (L3) and transport layer (L4). A network rule facilitates traffic filtering based on IP addresses, any ports, and any protocols.</p>
<p>When you configure DNAT, the NAT rule collection action is set to Dnat. Each rule in the NAT rule collection can then be used to translate your firewall public IP address and port to a private IP address and port.</p>
<p>The following <a href="https://learn.microsoft.com/en-us/azure/firewall/tutorial-firewall-dnat-policy">Tutorial: Filter inbound Internet traffic with Azure Firewall DNAT policy using the portal</a> can help you learn how to:</p>
<ul>
<li>Set up a test network environment.</li>
<li>Deploy a firewall.</li>
<li>Create a default route.</li>
<li>Configure a DNAT rule.</li>
<li>Test the firewall.</li>
</ul>
<h2 id="Troubleshoot-Azure-Firewall-distributed-network-address-translation-DNAT-rules"><a href="#Troubleshoot-Azure-Firewall-distributed-network-address-translation-DNAT-rules" class="headerlink" title="Troubleshoot Azure Firewall distributed network address translation (DNAT) rules"></a>Troubleshoot Azure Firewall distributed network address translation (DNAT) rules</h2><p>Azure Firewall Destination Network Address Translation (DNAT) translates and filters inbound internet traffic to your subnets. It allows or denies inbound traffic through the firewall public IP address(es). A DNAT rule translates a public IP address into a private IP address.</p>
<p>It’s recommended to add a specific internet source to allow DNAT access to the network and avoid using wildcards for security reasons.</p>
<h2 id="Troubleshoot-network-level-protection-issues-including-firewalls"><a href="#Troubleshoot-network-level-protection-issues-including-firewalls" class="headerlink" title="Troubleshoot network-level protection issues including firewalls"></a>Troubleshoot network-level protection issues including firewalls</h2><p>Adding security layers to the virtual machine (VM) networks protects inbound and outbound flows, to and from the users. You can use Firewall Policy to manage rule sets that the Azure Firewall uses to filter traffic.</p>
<h3 id="Outbound-connectivity"><a href="#Outbound-connectivity" class="headerlink" title="Outbound connectivity"></a>Outbound connectivity</h3><h3 id="Network-rules-and-applications-rules"><a href="#Network-rules-and-applications-rules" class="headerlink" title="Network rules and applications rules"></a>Network rules and applications rules</h3><p>Network rules are applied in priority order before application rules. This means if a match is found in a network rule, no other rules are processed. IDPS may alert and&#x2F;or block suspicious traffic.</p>
<p>In case there’s no network rule match, and if the protocol is HTTP, HTTPS, or MSSQL, the packet is then evaluated by the application rules in priority order.</p>
<p>For HTTP, Azure Firewall looks for an application rule match according to the host header. For HTTPS, Azure Firewall looks for an application rule match according to SNI only.</p>
<p>In both HTTP and TLS-inspected HTTPS cases, the firewall uses the DNS resolved IP address from the Host header instead of the packet’s destination IP address. If the firewall does not get the port number in the host header, it assumes it to be the standard port 80. In case of a port mismatch between the actual TCP port and the port in the host header, the traffic is dropped. DNS resolution is done by Azure DNS or by a custom DNS if configured on the firewall. </p>
<h3 id="Inbound-connectivity"><a href="#Inbound-connectivity" class="headerlink" title="Inbound connectivity"></a>Inbound connectivity</h3><h3 id="DNAT-rules-and-network-rules"><a href="#DNAT-rules-and-network-rules" class="headerlink" title="DNAT rules and network rules"></a>DNAT rules and network rules</h3><p>Inbound internet connectivity is enabled by configuring Destination Network Address Translation (DNAT). NAT rules are applied in priority before network rules.</p>
<p>If a match is found, a corresponding network rule to allow the translated traffic is added.</p>
<p>To filter inbound HTTP&#x2F;S traffic, you should use Web Application Firewall (WAF) as Application rules aren’t applied for inbound connections.</p>
<p>To view the results of some of the rule combinations, refer to <a href="https://learn.microsoft.com/en-us/azure/firewall/rule-processing">Azure Firewall rule processing logic</a>.</p>
<h2 id="Troubleshoot-Azure-Firewall-Manager-misconfiguration-issues"><a href="#Troubleshoot-Azure-Firewall-Manager-misconfiguration-issues" class="headerlink" title="Troubleshoot Azure Firewall Manager misconfiguration issues"></a>Troubleshoot Azure Firewall Manager misconfiguration issues</h2><p>Azure Firewall Manager is a security management service. You can use it to create secured virtual hubs to secure cloud network traffic destined for private IP addresses, Azure PaaS, and the internet.</p>
<table>
<thead>
<tr>
<th align="center">Secured virtual hub</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/4-azure-firewall-manager.png" alt="Diagram showing secured virtual hub using Azure Firewall Manager."></td>
</tr>
</tbody></table>
<p>The following <a href="https://learn.microsoft.com/en-us/azure/firewall-manager/secure-cloud-network">Tutorial: Secure your virtual hub using Azure Firewall Manager</a> can help you learn how to:</p>
<ul>
<li>Create the spoke virtual network.</li>
<li>Create a secured virtual hub.</li>
<li>Connect the hub-and-spoke virtual networks.</li>
<li>Route traffic to your hub.</li>
<li>Deploy the servers.</li>
<li>Create a firewall policy and secure your hub.</li>
<li>Test the firewall.</li>
</ul>
<h1 id="Troubleshoot-latency-issues-within-a-virtual-network"><a href="#Troubleshoot-latency-issues-within-a-virtual-network" class="headerlink" title="Troubleshoot latency issues within a virtual network"></a>Troubleshoot latency issues within a virtual network</h1><p>Completed100 XP</p>
<ul>
<li>8 minutes</li>
</ul>
<p>You work as a support engineer supporting Azure infrastructure. You’ve been contacted by your web team about an issue with the website not responding. The web team have a pool of webservers behind a load balancer and public IP address.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-topology-zoom.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-topology.png" alt="Screenshot of a network topology diagram showing a pool of webservers behind a load balancer."></a></p>
<p>In this exercise, you’ll use what you’ve learned to go through steps to troubleshoot the connection issues to the virtual machines.</p>
<h2 id="Verify-that-the-website-can’t-be-reached"><a href="#Verify-that-the-website-can’t-be-reached" class="headerlink" title="Verify that the website can’t be reached"></a>Verify that the website can’t be reached</h2><p>Use the Cloud Shell on the right.</p>
<ol>
<li><p>Use this Azure CLI command to get the public IP address of the scale set.</p>
<p>BashCopy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">az network public-ip show \</span><br><span class="line">--resource-group cloud-shell-storage-westeurope \</span><br><span class="line">--name myScaleSetLBPublicIP \</span><br><span class="line">--query <span class="string">&#x27;[ipAddress]&#x27;</span> \</span><br><span class="line">--output tsv</span><br></pre></td></tr></table></figure>
</li>
<li><p>Copy the IP address, in a new tab in your browser, try to navigate to it.</p>
</li>
</ol>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-website-not-responding.png" alt="Screenshot of the website not responding."></p>
<h2 id="Check-that-Network-Security-Groups-are-configured-correctly"><a href="#Check-that-Network-Security-Groups-are-configured-correctly" class="headerlink" title="Check that Network Security Groups are configured correctly"></a>Check that Network Security Groups are configured correctly</h2><ol>
<li><p>In another browser tab, navigate to the Azure portal.</p>
</li>
<li><p>Search for <strong>Network security groups</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-search-nsg.png" alt="A screenshot showing the virtual machine scale set is shown on screen."></p>
</li>
<li><p>Under <strong>Services</strong>, select <strong>Network Security Groups</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-no-network-security-groups.png" alt="A screenshot showing that in this environment there are no NSGs created."></p>
</li>
</ol>
<h2 id="Check-the-port-rules-for-the-scale-set"><a href="#Check-the-port-rules-for-the-scale-set" class="headerlink" title="Check the port rules for the scale set"></a>Check the port rules for the scale set</h2><ol>
<li><p>In the Azure portal, search for <strong>scale set</strong>, and then under <strong>Services</strong>, select <strong>Virtual machine scale sets</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-search-virtual-machine-scale-sets.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-search-virtual-machine-scale-sets.png" alt="A screenshot showing the virtual machine scale set is highlighted."></a></p>
</li>
<li><p>In the list, select <strong>myScaleSet</strong> to view the details.</p>
</li>
<li><p>On the left, under <strong>Settings</strong>, select <strong>Networking</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-inbound-outbound-port-rules.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-inbound-outbound-port-rules.png" alt="A screenshot of Networking selected, with inbound and outbound port rules highlighted."></a></p>
</li>
<li><p>Select the <strong>Inbound port rules</strong> tab, and then select the <strong>Outbound port rules</strong> tab.</p>
</li>
</ol>
<p> Note</p>
<p>There are no network security groups (NSG) on this network interface.</p>
<h2 id="Check-the-network-settings-for-the-pool-instances"><a href="#Check-the-network-settings-for-the-pool-instances" class="headerlink" title="Check the network settings for the pool instances"></a>Check the network settings for the pool instances</h2><ol>
<li><p>On the left, under <strong>Settings</strong>, select <strong>Instances</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-instances.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-instances.png" alt="A screenshot showing an instance in the scale set highlighted."></a></p>
</li>
<li><p>Select the first instance listed, in the above example this is <strong>myScaleSet_2</strong>. In your environment this could be different.</p>
</li>
<li><p>On the left, under <strong>Settings</strong>, select <strong>Networking</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-network.png" alt="A screenshot showing the instances without NSG setup."></p>
</li>
<li><p>There isn’t an NSG being used by this instance.</p>
</li>
<li><p>In the breadcrumb trail, select <strong>myScaleSet</strong>, and then repeat steps 2 to 4 to see that there isn’t an NSG on the other instance.</p>
</li>
</ol>
<h2 id="Check-the-load-balancer-for-a-scale-set"><a href="#Check-the-load-balancer-for-a-scale-set" class="headerlink" title="Check the load balancer for a scale set"></a>Check the load balancer for a scale set</h2><ol>
<li><p>Select the <strong>Load balancing</strong> tab, and then select the <strong>myScaleSetLB</strong> load balancer.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-load-balancer.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-load-balancer.png" alt="A screenshot showing the myScaleSetLB highlighted."></a></p>
</li>
<li><p>On the left, under <strong>Settings</strong>, select <strong>Frontend IP configuration</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-front-end-ip-configuration.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-front-end-ip-configuration.png" alt="A screenshot showing  the frontend IP address highlighted."></a></p>
</li>
<li><p>Check that there is a frontend IP address, and that this is the IP you tested at the beginning of this exercise.</p>
</li>
<li><p>On the left, under <strong>Settings</strong>, select <strong>Load balancing rules</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-load-balancing-rules.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-load-balancing-rules.png" alt="Screen shot showing the load balancing rules."></a></p>
<p> Note</p>
<p>There is a rule for port <strong>80</strong> and port <strong>443</strong>.</p>
</li>
<li><p>On the left, select <strong>Diagnose and solve problems</strong>.</p>
</li>
</ol>
<h2 id="Use-the-Diagnose-and-solve-problems-troubleshooter"><a href="#Use-the-Diagnose-and-solve-problems-troubleshooter" class="headerlink" title="Use the Diagnose and solve problems troubleshooter"></a>Use the Diagnose and solve problems troubleshooter</h2><ol>
<li><p>Select the <strong>No connectivity to the backend pool</strong> troubleshooter.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-no-connectivity.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-no-connectivity.png" alt="A screenshot showing the No connectivity to backend pool troubleshooter."></a></p>
</li>
<li><p>In the <strong>Tell us more about the problem you are experiencing</strong> drop-down box, select <strong>Intermittent connectivity</strong>.</p>
</li>
<li><p>Scroll down and read the insight found.</p>
</li>
</ol>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-no-connectivity-back-end-pool.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-no-connectivity-back-end-pool.png" alt="Screen shot of the connectivity results showing the backend pool can&#39;t be connected to over port 443."></a></p>
<p>The insight points to the fact that the backend instances in the pool aren’t listening for port <strong>443</strong>. The website instances should be listening to port <strong>80</strong>. This insight points to a problem in the load balancer rule.</p>
<h1 id="Exercise-Troubleshoot-issue-connecting-virtual-machine-scale-set"><a href="#Exercise-Troubleshoot-issue-connecting-virtual-machine-scale-set" class="headerlink" title="Exercise: Troubleshoot issue connecting virtual machine scale set"></a>Exercise: Troubleshoot issue connecting virtual machine scale set</h1><p>Completed100 XP</p>
<ul>
<li>7 minutes</li>
</ul>
<p>This module requires a sandbox to complete.</p>
<p>A <a href="https://learn.microsoft.com/en-us/training/support/faq?pivots=sandbox">sandbox</a> gives you access to free resources. Your personal subscription will not be charged. The sandbox may only be used to complete training on Microsoft Learn. Use for any other reason is prohibited, and may result in permanent loss of access to the sandbox.</p>
<p>Microsoft provides this lab experience and related content for educational purposes. All presented information is owned by Microsoft and intended solely for learning about the covered products and services in this Microsoft Learn module.</p>
<p>Activate sandbox</p>
<p>You work as a support engineer supporting Azure infrastructure. You’ve been contacted by your web team about an issue with the website not responding. The web team have a pool of webservers behind a load balancer and public IP address.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-topology.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-topology.png" alt="Screenshot of a network topology diagram showing a pool of webservers behind a load balancer."></a></p>
<p>In this exercise, you’ll use what you’ve learned to go through steps to troubleshoot the connection issues to the virtual machines.</p>
<h2 id="Verify-that-the-website-can’t-be-reached-1"><a href="#Verify-that-the-website-can’t-be-reached-1" class="headerlink" title="Verify that the website can’t be reached"></a>Verify that the website can’t be reached</h2><p>Use the Cloud Shell on the right.</p>
<ol>
<li><p>Use this Azure CLI command to get the public IP address of the scale set.</p>
<p>Copy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">az network public-ip show \</span><br><span class="line">--resource-group [sandbox resource group name] \</span><br><span class="line">--name webPublicIP \</span><br><span class="line">--query &#x27;[ipAddress]&#x27; \</span><br><span class="line">--output tsv</span><br></pre></td></tr></table></figure>
</li>
<li><p>Copy the IP address, in a new tab in your browser, try to navigate to it.</p>
</li>
</ol>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-website-not-responding.png" alt="Screenshot of the website not responding."></p>
<h2 id="Check-that-Network-Security-Groups-are-configured-correctly-1"><a href="#Check-that-Network-Security-Groups-are-configured-correctly-1" class="headerlink" title="Check that Network Security Groups are configured correctly"></a>Check that Network Security Groups are configured correctly</h2><ol>
<li><p>In another browser tab, navigate to the <a href="https://portal.azure.com/learn.docs.microsoft.com">Azure portal</a>.</p>
</li>
<li><p>Search for <strong>Network security groups</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-search-nsg.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-search-nsg.png" alt="A screenshot showing the virtual machine scale set is detailed."></a></p>
</li>
<li><p>Under <strong>Services</strong>, select <strong>Network Security Groups</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-no-network-security-groups.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-no-network-security-groups.png" alt="A screenshot showing that in this environment there are no NSGs created."></a></p>
</li>
<li><p>Select <strong>webNetworkSecurityGroup</strong>.</p>
</li>
<li><p>Check that internet traffic over port <strong>80</strong> is allowed by the Network Security Group.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-check-inbound-traffic-allowed.png" alt="Screenshot of the Network Security Group inbound rules are correct."></p>
</li>
</ol>
<h2 id="Check-the-network-settings-for-the-virtual-machines"><a href="#Check-the-network-settings-for-the-virtual-machines" class="headerlink" title="Check the network settings for the virtual machines"></a>Check the network settings for the virtual machines</h2><ol>
<li><p>On the left, select <strong>Virtual Machines</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-check-virtual-machine-networking.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-check-virtual-machine-networking.png" alt="A screenshot showing an instance in the scale set highlighted."></a></p>
</li>
<li><p>Select the first virtual machine listed, in the above example this is <strong>webVirtualMachine1</strong>. In your environment this could be different.</p>
</li>
<li><p>On the left, under <strong>Settings</strong>, select <strong>Networking</strong>.</p>
</li>
<li><p>Note that port 80 is allowed.</p>
</li>
<li><p>Repeat these steps for <strong>webVirtualMachine2</strong>.</p>
</li>
</ol>
<h2 id="Check-the-load-balancer"><a href="#Check-the-load-balancer" class="headerlink" title="Check the load balancer"></a>Check the load balancer</h2><ol>
<li><p>In the Azure portal, search for <strong>Load balancers</strong>, then under <strong>Services</strong>, select <strong>Load balancers</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-search-load-balancers.png" alt="Screenshot showing searching for load balancers."></p>
</li>
<li><p>Select the <strong>webLoadBalancer</strong>.</p>
</li>
<li><p>On the left, under <strong>Settings</strong>, select <strong>Frontend IP configuration</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-front-end-ip-configuration.png" alt="A screenshot showing  the frontend IP address highlighted."></p>
</li>
<li><p>Check that there is a frontend IP address, and that this is the IP you tested at the beginning of this exercise.</p>
</li>
<li><p>On the left, under <strong>Settings</strong>, select <strong>Load balancing rules</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-load-balancing-rules.png" alt="Screen shot showing the load balancing rules."></p>
<p> Note</p>
<p>There is a rule for port <strong>80</strong> and port <strong>443</strong>.</p>
</li>
<li><p>On the left, select <strong>Diagnose and solve problems</strong>.</p>
</li>
</ol>
<h2 id="Use-the-Diagnose-and-solve-problems-troubleshooter-1"><a href="#Use-the-Diagnose-and-solve-problems-troubleshooter-1" class="headerlink" title="Use the Diagnose and solve problems troubleshooter"></a>Use the Diagnose and solve problems troubleshooter</h2><ol>
<li><p>Select the <strong>No connectivity to the backend pool</strong> troubleshooter.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-no-connectivity.png" alt="A screenshot showing the No connectivity to backend pool troubleshooter."></p>
</li>
<li><p>In the <strong>Tell us more about the problem you are experiencing</strong> drop-down box, select <strong>Intermittent connectivity</strong>.</p>
</li>
<li><p>Scroll down and read the insight found.</p>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-no-connectivity-back-end-pool.png" alt="Screen shot of the connectivity results showing the backend pool can&#39;t be connected to over port 443."></p>
<p>The insight points to the fact that the backend instances in the pool aren’t listening for port <strong>443</strong>. The website instances should be listening to port <strong>80</strong>. This insight points to a problem in the load balancer rule.</p>
</li>
</ol>
<hr>
<h1 id="Exercise-Resolve-issue-connecting-virtual-machine-scale-set"><a href="#Exercise-Resolve-issue-connecting-virtual-machine-scale-set" class="headerlink" title="Exercise: Resolve issue connecting virtual machine scale set"></a>Exercise: Resolve issue connecting virtual machine scale set</h1><p>Completed100 XP</p>
<ul>
<li>7 minutes</li>
</ul>
<p>This module requires a sandbox to complete.</p>
<p>A <a href="https://learn.microsoft.com/en-us/training/support/faq?pivots=sandbox">sandbox</a> gives you access to free resources. Your personal subscription will not be charged. The sandbox may only be used to complete training on Microsoft Learn. Use for any other reason is prohibited, and may result in permanent loss of access to the sandbox.</p>
<p>Microsoft provides this lab experience and related content for educational purposes. All presented information is owned by Microsoft and intended solely for learning about the covered products and services in this Microsoft Learn module.</p>
<p>Activate sandbox</p>
<p>After investigating the connection issues to your website, you’ve found an issue with the load balancer rule user by the virtual machine scale set.</p>
<p>In this exercise, you’ll resolve the issue and check that the website can now be accessed.</p>
<h2 id="Validate-load-balancer-rules"><a href="#Validate-load-balancer-rules" class="headerlink" title="Validate load balancer rules"></a>Validate load balancer rules</h2><ol>
<li><p>In the Azure portal, search for <strong>load balancers</strong>, and then under <strong>Services</strong>, select <strong>Load balancers</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/7-load-balancers.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/7-load-balancers.png" alt="A screenshot showing searching for load balancers."></a></p>
</li>
<li><p>Select the <strong>webLoadBalancer</strong> load balancer.</p>
</li>
<li><p>Under <strong>Settings</strong>, select <strong>Load balancing rules</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-load-balancing-rules.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/6-load-balancing-rules.png" alt="A screenshot showing the load balancer rule highlighted."></a></p>
</li>
<li><p>From the list of rules, select <strong>webLoadBalancerRule</strong>.</p>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/7-my-load-balancer-rule-web.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/7-my-load-balancer-rule-web.png" alt="A screenshot of the load balancer rule, showing the port set to 80 and backend port set to 443. This is the error."></a></p>
</li>
<li><p>To resolve the backend issue, change the <strong>Backend port</strong> from <strong>443</strong> to <strong>80</strong>, and then select <strong>Save</strong>.</p>
<p>Note</p>
<p>The front and backend in this environment need to be the same to get a response from the webserver to http requests.</p>
</li>
<li><p>Wait until the rule has been deployed successfully.</p>
</li>
</ol>
<p><a href="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/7-successful-rule.png#lightbox"><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/7-successful-rule.png" alt="A screenshot showing the successful deployment of the updated load balancer rule."></a></p>
<h2 id="Verify-that-the-website-can-now-be-reached"><a href="#Verify-that-the-website-can-now-be-reached" class="headerlink" title="Verify that the website can now be reached"></a>Verify that the website can now be reached</h2><ol>
<li><p>Refresh the tab you opened to test the public IP address.</p>
<p>Note</p>
<p>If you have closed the previous browser tab, run this command to get the public IP address:</p>
<p>Copy</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">az network public-ip show \</span><br><span class="line">--resource-group [sandbox resource group name] \</span><br><span class="line">--name webPublicIP \</span><br><span class="line">--query &#x27;[ipAddress]&#x27; \</span><br><span class="line">--output tsv</span><br></pre></td></tr></table></figure>

<p>If the website is online, you’ll see a page with a <strong>Hello World</strong> message from the backend instance.</p>
</li>
</ol>
<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/troubleshoot-network-security-issues/media/7-hello-world.png" alt="A screenshot of the website showing it&#39;s online."></p>
<h1 id="Summary-and-resources"><a href="#Summary-and-resources" class="headerlink" title="Summary and resources"></a>Summary and resources</h1><p>Completed100 XP</p>
<ul>
<li>3 minutes</li>
</ul>
<p>As a support engineer, you have investigated various network security issues. Having completed this module, you can troubleshoot issues arising in the security infrastructure using the Azure portal and other tools.</p>
<p>You now understand how to protect your Azure Virtual Network through network security policies and resources.</p>
<p>Now that you’ve completed this module, you should be able to:</p>
<ul>
<li>Troubleshoot network security issues.</li>
<li>Troubleshoot Network Security Group (NSG).</li>
<li>Troubleshoot Azure Firewall.</li>
<li>Troubleshoot latency issues within a virtual network.</li>
</ul>
<h2 id="Learn-more"><a href="#Learn-more" class="headerlink" title="Learn more"></a>Learn more</h2><p>Use these resources to discover more:</p>
<p><a href="https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/ag-overview">WAF overview</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/application-gateway-waf-configuration">WAF configuration</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/application-gateway/application-gateway-diagnostics">WAF monitoring</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/ag-overview">Anomaly scoring mode</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/storage/common/transport-layer-security-configure-minimum-version?tabs=portal">Configure minimum required version of Transport Layer Security (TLS) for a storage account</a></p>
<p><a href="https://learn.microsoft.com/en-us/dotnet/framework/network-programming/tls">Support for TLS 1.2</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-wan/certificates-point-to-site">Generate and export certificates for User VPN connections</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal">Connect to a VNet using P2S VPN &amp; certificate authentication: portal - Azure VPN Gateway</a></p>
<p><a href="https://learn.microsoft.com/en-us/troubleshoot/azure/virtual-machines/troubleshoot-rdp-connection">Troubleshoot Remote Desktop connections to a VM</a></p>
<p><a href="https://learn.microsoft.com/en-us/dotnet/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate">How to retrieve the Thumbprint of a Certificate</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/private-link/troubleshoot-private-endpoint-connectivity">Diagnose connectivity problems</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure-stack/user/azure-stack-vpn-gateway-settings">IPsec&#x2F;IKE parameters</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure-stack/user/azure-stack-vpn-s2s">Steps to configure an IPsec&#x2F;IKE policy for site-to-site (S2S) VPN connections in Azure Stack Hub</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/azure-subscription-service-limits?toc=/azure/virtual-network/toc.json">Azure limits</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/service-tags-overview">Azure service tags</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/tutorial-restrict-network-access-to-resources">Tutorial - Restrict network access to PaaS resources with virtual network service endpoints using the Azure portal</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/application-security-groups">Application security groups</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview">Virtual network overview</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-network-interface">Create, change, or delete an Azure network interface</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview">Azure network security groups overview</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/manage-network-security-group">Create, change, or delete an Azure network security group</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-forced-tunneling-rm?toc=/azure/virtual-network/toc.json">Forced-tunneling</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/diagnose-network-routing-problem">Diagnose a virtual machine network traffic routing problem</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/network-watcher/network-watcher-nsg-flow-logging-overview">Introduction to flow logging for NSGs - Azure Network Watcher</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/firewall/tutorial-firewall-deploy-portal">Deploy and configure Azure Firewall using the Azure portal</a></p>
<p><a href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-connect-to-services">Azure Activity Logs content pack for Power BI</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/firewall/firewall-workbook">Monitor logs using Azure Firewall Workbook</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/firewall/policy-rule-sets">Azure Firewall Policy rule sets</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/firewall/threat-intel">Azure Firewall threat intelligence-based filtering</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/firewall/tutorial-firewall-dnat-policy">Tutorial: Filter inbound Internet traffic with Azure Firewall DNAT policy using the portal</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/firewall/rule-processing">Azure Firewall rule processing logic</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/firewall-manager/secure-cloud-network">Tutorial: Secure your virtual hub using Azure Firewall Manager</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/network-watcher/diagnose-vm-network-traffic-filtering-problem">Tutorial: Diagnose a VM network traffic filter problem - Azure portal - Azure Network Watcher</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-test-latency">Test VM network latency</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-bandwidth-testing">Bandwidth&#x2F;Throughput testing (NTTTCP)</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/sizes?toc=/azure/virtual-network/toc.json">VM sizes - Azure Virtual Machines</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpngateways">About VPN Gateway</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/resize-vm?tabs=portal">Resize a VM</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-validate-throughput-to-vnet">Validate VPN throughput to a virtual network - Azure VPN Gateway</a></p>
<hr>
]]></content>
  </entry>
  <entry>
    <title>CCDA-200-310-Official-Cert-Guide</title>
    <url>/2022/11/17/CCDA-200-310-Official-Cert-Guide/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCIE-CCNP_Security_SNCF_300-710</title>
    <url>/2022/11/17/CCIE-CCNP-Security-SNCF-300-710/</url>
    <content><![CDATA[<p><object data="CCIE-CCNP_Security_SNCF_300-710.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCDP-Designing-Cisco-Network-Service-Architectures-ARCH-300-320-Official-Cert-Guide</title>
    <url>/2022/11/17/CCDP-Designing-Cisco-Network-Service-Architectures-ARCH-300-320-Official-Cert-Guide/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Ansible自动化运维平台</title>
    <url>/2022/11/12/Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B9%B3%E5%8F%B0/</url>
    <content><![CDATA[<h1 id="ansible-command与shell模块"><a href="#ansible-command与shell模块" class="headerlink" title="ansible command与shell模块"></a>ansible command与shell模块</h1><p>两个模块都是用于执行linux命令的,这对于命令熟悉的工程师来说，用起来非常high。</p>
<p>shell模块与command模块差不多（command模块不能执行一些类似$HOME,&gt;,&lt;,|等符号，但shell可以)</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/command_module.html">https://docs.ansible.com/ansible/latest/modules/command_module.html</a></p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/shell_module.html">https://docs.ansible.com/ansible/latest/modules/shell_module.html</a></p>
<h2 id="一、shell模块"><a href="#一、shell模块" class="headerlink" title="一、shell模块"></a>一、shell模块</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m shell 192.168.98.201 -a &quot;ls /root&quot;</span><br><span class="line">192.168.98.201 | CHANGED | rc=0 &gt;&gt;</span><br><span class="line">公共</span><br><span class="line">模板</span><br><span class="line">视频</span><br><span class="line">图片</span><br><span class="line">文档</span><br><span class="line">下载</span><br><span class="line">音乐</span><br><span class="line">桌面</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">initial-setup-ks.cfg</span><br><span class="line">nginx.service</span><br><span class="line">nginx_study</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@manage01 ~]# ansible -m shell 192.168.98.201 -a &quot;echo &#x27;hello world&#x27; &gt; /tmp/baishuming&quot;</span><br><span class="line">192.168.98.201 | CHANGED | rc=0 &gt;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@manage01 ~]# ansible -m shell 192.168.98.201 -a &quot;cat /tmp/baishuming&quot;</span><br><span class="line">192.168.98.201 | CHANGED | rc=0 &gt;&gt;</span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注意shell模块不是什么命令都能使用，比如vim这样的交互命令,不建议大家去记忆哪些命令不可以，大家只要养成任何在生产环境里的命令都要先在测试环境里测试一下的习惯就好。</span><br></pre></td></tr></table></figure>

<h2 id="二、command模块"><a href="#二、command模块" class="headerlink" title="二、command模块"></a>二、command模块</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m command 192.168.98.201 -a &quot;ls /root&quot;</span><br><span class="line">192.168.98.201 | CHANGED | rc=0 &gt;&gt;</span><br><span class="line">公共</span><br><span class="line">模板</span><br><span class="line">视频</span><br><span class="line">图片</span><br><span class="line">文档</span><br><span class="line">下载</span><br><span class="line">音乐</span><br><span class="line">桌面</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">initial-setup-ks.cfg</span><br><span class="line">nginx.service</span><br><span class="line">nginx_study</span><br><span class="line"></span><br><span class="line">[root@manage01 ~]# ansible -m command 192.168.98.201 -a &quot;echo &#x27;baism hello&#x27; &gt; /tmp/baism_123&quot;</span><br><span class="line">192.168.98.201 | CHANGED | rc=0 &gt;&gt;</span><br><span class="line">baism hello &gt; /tmp/baism_123</span><br><span class="line"></span><br><span class="line">[root@manage01 ~]# ansible -m command 192.168.98.201 -a &quot;cat /tmp/baism_123&quot;</span><br><span class="line">192.168.98.201 | FAILED | rc=1 &gt;&gt;</span><br><span class="line">cat: /tmp/baism_123: 没有那个文件或目录non-zero return code</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">发现没有/tmp/baism_123 证明上一条命令未能执行成功</span><br></pre></td></tr></table></figure>

<h2 id="三、学习视频"><a href="#三、学习视频" class="headerlink" title="三、学习视频"></a>三、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=23">视频： command与shell模块</a></p>
<h1 id="copy模块"><a href="#copy模块" class="headerlink" title="copy模块"></a>copy模块</h1><h2 id="一、copy模块-重点"><a href="#一、copy模块-重点" class="headerlink" title="一、copy模块(重点)"></a>一、copy模块(重点)</h2><p>copy模块用于对文件的远程拷贝操作（如把本地的文件拷贝到远程的机器上)</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/copy_module.html#copy-module">https://docs.ansible.com/ansible/latest/modules/copy_module.html#copy-module</a></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>src</td>
<td>文件源路径</td>
</tr>
<tr>
<td>dest</td>
<td>目标路径</td>
</tr>
<tr>
<td>content</td>
<td>往目标文件输入内容</td>
</tr>
<tr>
<td>force</td>
<td>强制 yes or no</td>
</tr>
<tr>
<td>backup</td>
<td>是否备份有冲突的源文件[文件名相同，内容不同] yes or no</td>
</tr>
<tr>
<td>checksum</td>
<td>拷贝完整性校验，使用sha1sum生成校验码</td>
</tr>
<tr>
<td>owner</td>
<td>目标文件所有者</td>
</tr>
<tr>
<td>group</td>
<td>目标文件所属组</td>
</tr>
<tr>
<td>mode</td>
<td>目标文件权限</td>
</tr>
</tbody></table>
<p><strong>拷贝manage01机器&#x2F;root&#x2F;readme文件到group1组的机器。</strong></p>
<ol>
<li>要求校验完整性，注意[checksum 是根据sha1算法做校验的]</li>
<li>所有者、所属组都是sko</li>
<li>权限0400</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# sha1sum readme </span><br><span class="line">f8182e9ccdbe6efd13eb36a056a7db203fe66e40  readme</span><br><span class="line">[root@manage01 ~]# ansible -m copy group1 -a &quot;src=/root/readme dest=/opt checksum=f8182e9ccdbe6efd13eb36a056a7db203fe66e40 owner=sko group=sko mode=0400&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;checksum&quot;: &quot;f8182e9ccdbe6efd13eb36a056a7db203fe66e40&quot;,</span><br><span class="line">    &quot;dest&quot;: &quot;/opt/readme&quot;,</span><br><span class="line">    &quot;gid&quot;: 1000,</span><br><span class="line">    &quot;group&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;md5sum&quot;: &quot;f8c2686842f9fa79361e8928867a1983&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0400&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;size&quot;: 1214,</span><br><span class="line">    &quot;src&quot;: &quot;/root/.ansible/tmp/ansible-tmp-1571366236.6664524-201027506158575/source&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;file&quot;,</span><br><span class="line">    &quot;uid&quot;: 1000</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;checksum&quot;: &quot;f8182e9ccdbe6efd13eb36a056a7db203fe66e40&quot;,</span><br><span class="line">    &quot;dest&quot;: &quot;/opt/readme&quot;,</span><br><span class="line">    &quot;gid&quot;: 1001,</span><br><span class="line">    &quot;group&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;md5sum&quot;: &quot;f8c2686842f9fa79361e8928867a1983&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0400&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;size&quot;: 1214,</span><br><span class="line">    &quot;src&quot;: &quot;/root/.ansible/tmp/ansible-tmp-1571366236.6522918-97522631781022/source&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;file&quot;,</span><br><span class="line">    &quot;uid&quot;: 1001</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;checksum&quot;: &quot;f8182e9ccdbe6efd13eb36a056a7db203fe66e40&quot;,</span><br><span class="line">    &quot;dest&quot;: &quot;/opt/readme&quot;,</span><br><span class="line">    &quot;gid&quot;: 1001,</span><br><span class="line">    &quot;group&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;md5sum&quot;: &quot;f8c2686842f9fa79361e8928867a1983&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0400&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;size&quot;: 1214,</span><br><span class="line">    &quot;src&quot;: &quot;/root/.ansible/tmp/ansible-tmp-1571366236.6274443-88161541412737/source&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;file&quot;,</span><br><span class="line">    &quot;uid&quot;: 1001</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>copy模块拷贝时要注意拷贝目录后面是否带”&#x2F;“符号</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/etc/yum.repos.d后面不带/符号，则表示把/etc/yum.repos.d整个目录拷贝到/tmp/目录下</span><br><span class="line">[root@manage01 ~]# ansible group1 -m copy -a &#x27;src=/etc/yum.repos.d dest=/tmp/&#x27;</span><br><span class="line">/etc/yum.repos.d/后面带/符号，则表示把/etc/yum.repos.d/目录里的所有文件拷贝到/tmp/目录下</span><br><span class="line">[root@manage01 ~]# ansible group1 -m copy -a &#x27;src=/etc/yum.repos.d/ dest=/tmp/&#x27;</span><br></pre></td></tr></table></figure>

<p>使用content参数直接往远程文件里写内容（会覆盖原内容）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m file group1 -a &quot;path=/tmp/zutuanxue_333 state=touch&quot;</span><br><span class="line">[root@manage01 ~]# ansible -m copy group1 -a &quot;content=&#x27;baism\nhello world\n&#x27; dest=/tmp/zutuanxue_333&quot;</span><br><span class="line">注意:ansible中-a后面的参数里也有引号时，记得要单引双引交叉使用，如果都为双引会出现问题</span><br></pre></td></tr></table></figure>

<p>使用force参数控制是否强制覆盖</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如果目标文件已经存在，则不覆盖</span><br><span class="line">[root@manage01 ~]# ansible group1 -m copy -a &quot;src=/tmp/zutuanxue_222 dest=/tmp/zutuanxue_333 force=no&quot;</span><br><span class="line">如果目标文件已经存在，则会强制覆盖</span><br><span class="line">[root@manage01 ~]# ansible group1 -m copy -a &quot;src=/tmp/zutuanxue_222 dest=/tmp/zutuanxue_333 force=yes&quot;</span><br></pre></td></tr></table></figure>

<p>使用backup参数控制是否备份文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">backup=yes表示如果拷贝的文件内容与原内容不一样，则会备份一份</span><br><span class="line"></span><br><span class="line">如果拷贝过来的文件本机存在，group1的机器上会将/tmp/333备份一份（备份文件命名加上时间），再远程拷贝新的文件为/tmp/333</span><br><span class="line">[root@manage01 ~]# ansible group1 -m copy -a &quot;src=/etc/fstab dest=/tmp/zutuanxue_333 backup=yes&quot;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频"><a href="#二、学习视频" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=14">视频：copy模块</a></p>
<h1 id="cron模块"><a href="#cron模块" class="headerlink" title="cron模块"></a>cron模块</h1><h2 id="一、cron模块"><a href="#一、cron模块" class="headerlink" title="一、cron模块"></a>一、cron模块</h2><p>cron模块用于管理周期性时间任务。</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/cron_module.html#cron-module">https://docs.ansible.com/ansible/latest/modules/cron_module.html#cron-module</a></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>计划任务的名称</td>
</tr>
<tr>
<td>user</td>
<td>执行计划任务的用户</td>
</tr>
<tr>
<td>job</td>
<td>计划任务命令</td>
</tr>
<tr>
<td>minute</td>
<td>执行计划任务的分 默认为*</td>
</tr>
<tr>
<td>hour</td>
<td>执行计划任务的时 默认为*</td>
</tr>
<tr>
<td>day</td>
<td>执行计划任务的日 默认为*</td>
</tr>
<tr>
<td>month</td>
<td>执行计划任务的月 默认为*</td>
</tr>
<tr>
<td>week</td>
<td>执行计划任务的周 默认为*</td>
</tr>
<tr>
<td>state absent</td>
<td>删除计划任务</td>
</tr>
</tbody></table>
<p>创建一个cron任务,不指定user的话,默认就是root（因为我这里是用root操作的)。<br>如果minute,hour,day,month,week不指定的话，默认都为*</p>
<p>每天14:23 执行echo “haha”&gt;&#x2F;tmp&#x2F;test</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m cron group1 -a &#x27;name=&quot;cron test&quot; user=root job=&quot;echo haha &gt; /tmp/test&quot; minute=23 hour=12&#x27;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;envs&quot;: [],</span><br><span class="line">    &quot;jobs&quot;: [</span><br><span class="line">        &quot;cron test&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;envs&quot;: [],</span><br><span class="line">    &quot;jobs&quot;: [</span><br><span class="line">        &quot;cron test&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;envs&quot;: [],</span><br><span class="line">    &quot;jobs&quot;: [</span><br><span class="line">        &quot;cron test&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>删除cron任务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m cron group1 -a &#x27;name=&quot;cron test&quot; state=absent&#x27;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;envs&quot;: [],</span><br><span class="line">    &quot;jobs&quot;: []</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;envs&quot;: [],</span><br><span class="line">    &quot;jobs&quot;: []</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;envs&quot;: [],</span><br><span class="line">    &quot;jobs&quot;: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-1"><a href="#二、学习视频-1" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=18">视频：cron模块</a></p>
<h1 id="fetch模块"><a href="#fetch模块" class="headerlink" title="fetch模块"></a>fetch模块</h1><h2 id="一、fetch模块"><a href="#一、fetch模块" class="headerlink" title="一、fetch模块"></a>一、fetch模块</h2><p>fetch模块与copy模块类似，但作用相反。用于把远程机器的文件拷贝到本地。</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/fetch_module.html#fetch-module">https://docs.ansible.com/ansible/latest/modules/fetch_module.html#fetch-module</a></p>
<p>将group1组机器的&#x2F;opt&#x2F;readme 拷贝到manage01的&#x2F;opt目录</p>
<p>注意:不管是拷贝多个机器还是一个机器的文件，在管理机本地目录都会按照</p>
<p> IP&#x2F;路径&#x2F;文件名</p>
<p>的方式命名，防止冲突</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]#  ansible -m fetch group1 -a &quot;src=/opt/readme dest=/opt&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;checksum&quot;: &quot;f8182e9ccdbe6efd13eb36a056a7db203fe66e40&quot;,</span><br><span class="line">    &quot;dest&quot;: &quot;/opt/192.168.98.203/opt/readme&quot;,</span><br><span class="line">    &quot;md5sum&quot;: &quot;f8c2686842f9fa79361e8928867a1983&quot;,</span><br><span class="line">    &quot;remote_checksum&quot;: &quot;f8182e9ccdbe6efd13eb36a056a7db203fe66e40&quot;,</span><br><span class="line">    &quot;remote_md5sum&quot;: null</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;checksum&quot;: &quot;f8182e9ccdbe6efd13eb36a056a7db203fe66e40&quot;,</span><br><span class="line">    &quot;dest&quot;: &quot;/opt/192.168.98.202/opt/readme&quot;,</span><br><span class="line">    &quot;md5sum&quot;: &quot;f8c2686842f9fa79361e8928867a1983&quot;,</span><br><span class="line">    &quot;remote_checksum&quot;: &quot;f8182e9ccdbe6efd13eb36a056a7db203fe66e40&quot;,</span><br><span class="line">    &quot;remote_md5sum&quot;: null</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;checksum&quot;: &quot;f8182e9ccdbe6efd13eb36a056a7db203fe66e40&quot;,</span><br><span class="line">    &quot;dest&quot;: &quot;/opt/192.168.98.201/opt/readme&quot;,</span><br><span class="line">    &quot;md5sum&quot;: &quot;f8c2686842f9fa79361e8928867a1983&quot;,</span><br><span class="line">    &quot;remote_checksum&quot;: &quot;f8182e9ccdbe6efd13eb36a056a7db203fe66e40&quot;,</span><br><span class="line">    &quot;remote_md5sum&quot;: null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-2"><a href="#二、学习视频-2" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=15">视频：fetch模块</a></p>
<h1 id="file模块"><a href="#file模块" class="headerlink" title="file模块"></a>file模块</h1><h2 id="一、file模块-重点"><a href="#一、file模块-重点" class="headerlink" title="一、file模块(重点)"></a>一、file模块(重点)</h2><p>file模块用于对文件或文件夹相关的操作，主要用来设置文件、链接、目录的属性，或者移除文件、链接、目录，很多其他的模块也会包含这种作用，例如copy，assemble和template。</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/file_module.html#file-module">https://docs.ansible.com/ansible/latest/modules/file_module.html#file-module</a></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>path</td>
<td>文件绝对路径</td>
</tr>
<tr>
<td>state</td>
<td>操作(touch文件新建、absent删除、link软连接、hard硬链接、directory目录创建)</td>
</tr>
<tr>
<td>owner</td>
<td>设置所有者</td>
</tr>
<tr>
<td>group</td>
<td>设置所属的组</td>
</tr>
<tr>
<td>mode</td>
<td>权限 0000</td>
</tr>
<tr>
<td>recurse</td>
<td>递归 yes or no</td>
</tr>
</tbody></table>
<p><strong>文件的创建</strong></p>
<p>在所有的业务机器的&#x2F;tmp下创建一个文件：zutuanxue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m file group1 -a &quot;path=/tmp/zutuanxue state=touch&quot;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;dest&quot;: &quot;/tmp/zutuanxue&quot;,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0644&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;size&quot;: 0,</span><br><span class="line">    &quot;state&quot;: &quot;file&quot;,</span><br><span class="line">    &quot;uid&quot;: 0</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;dest&quot;: &quot;/tmp/zutuanxue&quot;,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0644&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;size&quot;: 0,</span><br><span class="line">    &quot;state&quot;: &quot;file&quot;,</span><br><span class="line">    &quot;uid&quot;: 0</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;dest&quot;: &quot;/tmp/zutuanxue&quot;,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0644&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;size&quot;: 0,</span><br><span class="line">    &quot;state&quot;: &quot;file&quot;,</span><br><span class="line">    &quot;uid&quot;: 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>文件的删除</strong></p>
<p>将node1(192.168.98.201)机器的&#x2F;tmp&#x2F;zutuanxue文件删除</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m file 192.168.98.201 -a &quot;path=/tmp/zutuanxue state=absent&quot;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>文件权限</strong></p>
<p>修改node2机器文件&#x2F;tmp&#x2F;zutuanxue:</p>
<p>所有者:sko</p>
<p>所属组:nobody</p>
<p>权限:600</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m file 192.168.98.202 -a &quot;path=/tmp/zutuanxue owner=sko group=nobody mode=0600&quot;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 65534,</span><br><span class="line">    &quot;group&quot;: &quot;nobody&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0600&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue&quot;,</span><br><span class="line">    &quot;size&quot;: 0,</span><br><span class="line">    &quot;state&quot;: &quot;file&quot;,</span><br><span class="line">    &quot;uid&quot;: 1001</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">###执行前提:192.168.98.202 有sko用户</span><br></pre></td></tr></table></figure>

<p><strong>创建链接文件[软连接、硬链接]</strong></p>
<p>为node2机器的&#x2F;tmp&#x2F;zutuanxue文件创建以下链接</p>
<p>软连接 &#x2F;tmp&#x2F;zutuanxue_com</p>
<p>硬链接 &#x2F;tmp&#x2F;zutuanxue_com_cn</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#软连接</span><br><span class="line">[root@manage01 ~]# ansible -m file 192.168.98.202 -a &quot;src=/tmp/zutuanxue path=/tmp/zutuanxue_com state=link&quot;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;dest&quot;: &quot;/tmp/zutuanxue_com&quot;,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0777&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;size&quot;: 13,</span><br><span class="line">    &quot;src&quot;: &quot;/tmp/zutuanxue&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;link&quot;,</span><br><span class="line">    &quot;uid&quot;: 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#硬链接</span><br><span class="line">[root@manage01 ~]# ansible -m file 192.168.98.202 -a &quot;src=/tmp/zutuanxue path=/tmp/zutuanxue_com_cn state=hard&quot;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;dest&quot;: &quot;/tmp/zutuanxue_com_cn&quot;,</span><br><span class="line">    &quot;gid&quot;: 65534,</span><br><span class="line">    &quot;group&quot;: &quot;nobody&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0600&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;size&quot;: 0,</span><br><span class="line">    &quot;src&quot;: &quot;/tmp/zutuanxue&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;hard&quot;,</span><br><span class="line">    &quot;uid&quot;: 1001</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>创建一个目录</strong></p>
<p>为所有的业务机器创建一个目录: &#x2F;tmp&#x2F;zutuanxue123</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m file group1 -a &quot;path=/tmp/zutuanxue123 state=directory&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0755&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue123&quot;,</span><br><span class="line">    &quot;size&quot;: 6,</span><br><span class="line">    &quot;state&quot;: &quot;directory&quot;,</span><br><span class="line">    &quot;uid&quot;: 0</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0755&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue123&quot;,</span><br><span class="line">    &quot;size&quot;: 6,</span><br><span class="line">    &quot;state&quot;: &quot;directory&quot;,</span><br><span class="line">    &quot;uid&quot;: 0</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;0755&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue123&quot;,</span><br><span class="line">    &quot;size&quot;: 6,</span><br><span class="line">    &quot;state&quot;: &quot;directory&quot;,</span><br><span class="line">    &quot;uid&quot;: 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>修改目录及子文件权限</strong></p>
<p>设置业务机器的&#x2F;tmp&#x2F;zutuanxue123目录及子文件的权限</p>
<p>所有者设置为sko</p>
<p>权限为2775</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m file group1 -a &quot;path=/tmp/zutuanxue123 owner=sko mode=2755 recurse=yes&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;02755&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue123&quot;,</span><br><span class="line">    &quot;size&quot;: 19,</span><br><span class="line">    &quot;state&quot;: &quot;directory&quot;,</span><br><span class="line">    &quot;uid&quot;: 1000</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;02755&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue123&quot;,</span><br><span class="line">    &quot;size&quot;: 19,</span><br><span class="line">    &quot;state&quot;: &quot;directory&quot;,</span><br><span class="line">    &quot;uid&quot;: 1001</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 0,</span><br><span class="line">    &quot;group&quot;: &quot;root&quot;,</span><br><span class="line">    &quot;mode&quot;: &quot;02755&quot;,</span><br><span class="line">    &quot;owner&quot;: &quot;sko&quot;,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue123&quot;,</span><br><span class="line">    &quot;size&quot;: 19,</span><br><span class="line">    &quot;state&quot;: &quot;directory&quot;,</span><br><span class="line">    &quot;uid&quot;: 1001</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>删除一个目录[包括子文件全部删除]</strong></p>
<p>删除所有业务机器的&#x2F;tmp&#x2F;zutuanxue123目录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m file group1 -a &quot;path=/tmp/zutuanxue123 state=absent&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue123&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue123&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;path&quot;: &quot;/tmp/zutuanxue123&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-3"><a href="#二、学习视频-3" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=13">视频：file模块</a></p>
<h1 id="group模块"><a href="#group模块" class="headerlink" title="group模块"></a>group模块</h1><h2 id="一、group模块"><a href="#一、group模块" class="headerlink" title="一、group模块"></a>一、group模块</h2><p>group模块用于管理用户组和用户组属性。</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/group_module.html#group-module">https://docs.ansible.com/ansible/latest/modules/group_module.html#group-module</a></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name&#x3D;</td>
<td>组名</td>
</tr>
<tr>
<td>state&#x3D; persent|absent</td>
<td>创建|删除</td>
</tr>
<tr>
<td>system&#x3D; yes|no</td>
<td>是否为系统组</td>
</tr>
<tr>
<td>gid</td>
<td>gid</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#组创建</span><br><span class="line">[root@manage01 ~]# ansible -m group group1 -a &quot;name=admin gid=4444 state=present&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 4444,</span><br><span class="line">    &quot;name&quot;: &quot;admin&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;present&quot;,</span><br><span class="line">    &quot;system&quot;: false</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 4444,</span><br><span class="line">    &quot;name&quot;: &quot;admin&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;present&quot;,</span><br><span class="line">    &quot;system&quot;: false</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;gid&quot;: 4444,</span><br><span class="line">    &quot;name&quot;: &quot;admin&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;present&quot;,</span><br><span class="line">    &quot;system&quot;: false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#删除组</span><br><span class="line">[root@manage01 ~]# ansible -m group group1 -a &quot;name=admin state=absent&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;name&quot;: &quot;admin&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;name&quot;: &quot;admin&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;name&quot;: &quot;admin&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-4"><a href="#二、学习视频-4" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=17">视频：group模块</a></p>
<h1 id="hostname模块"><a href="#hostname模块" class="headerlink" title="hostname模块"></a>hostname模块</h1><h2 id="一、hostname模块"><a href="#一、hostname模块" class="headerlink" title="一、hostname模块"></a>一、hostname模块</h2><p>hostname模块用于修改主机名（<strong>注意</strong>: 它不能修改&#x2F;etc&#x2F;hosts文件)</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/hostname_module.html#hostname-module">https://docs.ansible.com/ansible/latest/modules/hostname_module.html#hostname-module</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">将192.168.98.203机器的主机名修改为zutuanxue_node3</span><br><span class="line"></span><br><span class="line">[root@manage01 ~]# ansible -m hostname -a &quot;name=zutuanxue_node3&quot; 192.168.98.203</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;ansible_domain&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ansible_fqdn&quot;: &quot;zutuanxue_node3&quot;,</span><br><span class="line">        &quot;ansible_hostname&quot;: &quot;zutuanxue_node3&quot;,</span><br><span class="line">        &quot;ansible_nodename&quot;: &quot;zutuanxue_node3&quot;,</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;name&quot;: &quot;zutuanxue_node3&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">备注：批量修改需要使用playbook剧本</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-5"><a href="#二、学习视频-5" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=12">视频：hostname模块</a></p>
<h1 id="playbook剧本"><a href="#playbook剧本" class="headerlink" title="playbook剧本"></a>playbook剧本</h1><h2 id="一、playbook介绍"><a href="#一、playbook介绍" class="headerlink" title="一、playbook介绍"></a>一、playbook介绍</h2><p>playbook(剧本): 是ansible用于配置,部署,和管理被控节点的剧本。</p>
<p>参考:<a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_intro.html">https://docs.ansible.com/ansible/latest/user_guide/playbooks_intro.html</a></p>
<p>使用的格式为<strong>yaml</strong>格式（saltstack,elk,docker等也都会用到yaml格式)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">树明的理解：</span><br><span class="line">playbook：ansible格式的脚本。将所有需要执行的操作按照ansible的编程语法，放到文件中执行。</span><br><span class="line"></span><br><span class="line">playbook替代方案</span><br><span class="line">1)、完全可以用shell脚本来替代playbook</span><br><span class="line">    将所有的ansible命令放入脚本    shell脚本中写的是ansible指令</span><br><span class="line">#!/bin/bash</span><br><span class="line">for IP in  `seq 201 203`</span><br><span class="line">   do</span><br><span class="line">       ansible -m hostname 192.168.98.$IP -a &quot;name=node$&#123;IP&#125;&quot;</span><br><span class="line">done</span><br><span class="line">    </span><br><span class="line">2)、ansible+shell脚本  使用script模块</span><br><span class="line">ansible -m script group2 &#x27;/etc/ansible/srcipts/nginx_install.sh&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="1-1、YAML格式规则"><a href="#1-1、YAML格式规则" class="headerlink" title="1.1、YAML格式规则"></a>1.1、YAML格式规则</h3><ul>
<li>文件的第一行以 “—“开始，表明YMAL文件的开始.</li>
<li>以#号开头为注释</li>
<li>列表中的所有成员都开始于相同的缩进级别, 并且使用一个 <code>&quot;- &quot;</code> 作为开头(一个横杠和一个空格)</li>
<li>一个字典是由一个简单的 <code>键: 值</code> 的形式组成(这个冒号后面必须是一个空格)</li>
<li><strong>注意: 写这种文件不要使用tab键，都使用空格</strong></li>
</ul>
<p>参考: <a href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html#yaml-syntax">https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html#yaml-syntax</a></p>
<p>下面看一个官方的示例感受一下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line"># 一位职工记录</span><br><span class="line">name: Example Developer</span><br><span class="line">job: Developer</span><br><span class="line">skill: Elite</span><br><span class="line">employed: True</span><br><span class="line">foods:</span><br><span class="line">  - Apple</span><br><span class="line">  - Orange</span><br><span class="line">  - Strawberry</span><br><span class="line">  - Mango</span><br><span class="line">languages:</span><br><span class="line">    ruby: Elite</span><br><span class="line">    python: Elite</span><br><span class="line">    dotnet: Lame</span><br></pre></td></tr></table></figure>

<h3 id="playbook实例"><a href="#playbook实例" class="headerlink" title="playbook实例"></a>playbook实例</h3><p>先直接来看一个实例 apache安装及业务初始化</p>
<p><strong>第1步: 创建一个存放playbook的目录(路径自定义)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# mkdir -p /etc/ansible/playbook/web</span><br></pre></td></tr></table></figure>

<p><strong>第2步: 准备httpd配置文件,并修改成你想要的配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]#  yum install httpd -y</span><br><span class="line"></span><br><span class="line">按需要修改你想要的配置(为了测试可以随意改动标记一下)</span><br><span class="line">[root@manage01 ~]#  vim /etc/httpd/conf/httpd.conf</span><br></pre></td></tr></table></figure>

<p><strong>第3步: 写一个playbook文件(后缀为.yml或.yaml)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 web]# cat apache.yaml </span><br><span class="line">---</span><br><span class="line">- hosts: group1</span><br><span class="line">  remote_user: root</span><br><span class="line">  vars:</span><br><span class="line">    - user: zutuanxue</span><br><span class="line">  tasks:</span><br><span class="line">    - name: create user use variable</span><br><span class="line">      user: user=zutuanxue state=present</span><br><span class="line"></span><br><span class="line">    - name: install httpd server</span><br><span class="line">      yum: name=&#123;&#123;item&#125;&#125; state=latest</span><br><span class="line">      with_items:</span><br><span class="line">        - httpd</span><br><span class="line">        - httpd-devel</span><br><span class="line"></span><br><span class="line">    - name: start httpd service</span><br><span class="line">      service: name=httpd state=started enabled=yes</span><br><span class="line"></span><br><span class="line">    - name: copy httpd.conf to group1:/etc/httpd/conf/</span><br><span class="line">      copy: src=/etc/ansible/playbook/web/httpd.conf dest=/etc/httpd/conf</span><br><span class="line">      notify:</span><br><span class="line">        - restart httpd service</span><br><span class="line"></span><br><span class="line">  handlers:</span><br><span class="line">       - name: restart httpd service</span><br><span class="line">         service: name=httpd state=restarted</span><br><span class="line">         </span><br><span class="line">         </span><br><span class="line">         </span><br><span class="line">#tasks</span><br><span class="line">#1、创建apache管理用户</span><br><span class="line">#2、安装httpd</span><br><span class="line">#3、服务启动管理</span><br><span class="line">#4、拷贝配置文件，业务初始化</span><br><span class="line">   #5、触发重启服务httpd</span><br></pre></td></tr></table></figure>

<p>第4步: 执行写好的palybook</p>
<ul>
<li>会显示出执行的过程，并且执行的每一步都有ok,changed,failed等标识</li>
<li>执行如果有错误(failed)会回滚，解决问题后，直接再执行这条命令即可,并会把failed改为changed（幂等性)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 web]# ansible-playbook /etc/ansible/playbook/web/apache.yaml</span><br></pre></td></tr></table></figure>

<h3 id="1-2、Playbook常见语法"><a href="#1-2、Playbook常见语法" class="headerlink" title="1.2、Playbook常见语法"></a>1.2、Playbook常见语法</h3><p><strong>hosts:</strong> 用于指定要执行任务的主机，其可以是一个或多个由冒号分隔主机组.</p>
<p><strong>remote_user:</strong> 用于指定远程主机上的执行任务的用户.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- hosts: group1			</span><br><span class="line">  remote_user: root	</span><br></pre></td></tr></table></figure>

<p><strong>tasks:</strong> 任务列表, 按顺序执行任务.</p>
<ul>
<li>如果一个host执行task失败, 整个tasks都会回滚, 修正playbook 中的错误, 然后重新执行即可.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tasks:</span><br><span class="line">  - name: create user use variable</span><br><span class="line">    user: name=&#123;&#123;user&#125;&#125; state=present</span><br><span class="line"></span><br><span class="line">  - name: install httpd server</span><br><span class="line">    yum: name=httpd state=latest name=httpd-devel state=latest</span><br><span class="line"></span><br><span class="line">  - name: start httpd service</span><br><span class="line">    service: name=httpd state=started enabled=yes</span><br><span class="line"></span><br><span class="line">  - name: copy httpd.conf to group1:/etc/httpd/conf/</span><br><span class="line">    copy: src=/opt/httpd.conf dest=/etc/httpd/conf/</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p><strong>handlers:</strong> 类似task，但需要使用notify通知调用，实现按需调用。</p>
<ul>
<li>不管有多少个通知者进行了notify，等到play中的所有task执行完成之后，handlers也只会被执行一次.</li>
<li>handlers最佳的应用场景是用来重启服务,或者触发系统重启操作.除此以外很少用到了.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  notify:</span><br><span class="line">  - restart httpd service</span><br><span class="line">  </span><br><span class="line">handlers:</span><br><span class="line">  - name: restart httpd service</span><br><span class="line">    service: name=httpd state=restarted</span><br><span class="line">    </span><br><span class="line">#注意: handlers 需要notify调用，他和tasks不同的是  tasks每次都会调用，heandlers触发才调用，比如配置文件修改了，在执行playbook的时候，就会将管理机上的新改的copy到被管理机，那么就会触发headlers重启服务，否则不会执行heanlers</span><br></pre></td></tr></table></figure>

<p><strong>练习:</strong> 修改httpd的端口为8080,再执行playbook测试</p>
<p><strong>variables:</strong> 变量</p>
<ul>
<li>定义变量可以被多次方便调用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vars:</span><br><span class="line">    - user: zutuanxue</span><br></pre></td></tr></table></figure>

<p><strong>with_items</strong>: 迭代列表</p>
<ul>
<li>其使用格式为将需要迭代的内容定义为item变量引用，并通过with_items语句指明迭代的元素列表即可。</li>
</ul>
<p>例如安装多个软件包</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum: name=&#123;&#123;item&#125;&#125; state=latest</span><br><span class="line">with_items:</span><br><span class="line">  - httpd</span><br><span class="line">  - httpd-devel</span><br></pre></td></tr></table></figure>

<p>执行后有如下警告</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/6/1601969382005.png" alt="警告.png"></p>
<p>解决方法:</p>
<p>在&#x2F;etc&#x2F;ansible&#x2F;ansible.cfg配置文件里的[default]配置段下面加上deprecation_warnings&#x3D;False参数即可</p>
<h2 id="二、练习案例"><a href="#二、练习案例" class="headerlink" title="二、练习案例"></a>二、练习案例</h2><p>写一个playbook实现</p>
<ol>
<li>配置yum</li>
<li>安装vsftpd包</li>
<li>修改配置文件(要求拒绝匿名用户登录)</li>
<li>启动服务并实现vsftpd服务开机自动启动</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">- hosts: group1                 </span><br><span class="line">  remote_user: root                     </span><br><span class="line">  tasks:                                </span><br><span class="line">  - name: rm yum repository      </span><br><span class="line">    file: path=/etc/yum.repos.d/ state=absent</span><br><span class="line">    </span><br><span class="line">  - name: 同步master上的yum源到group1</span><br><span class="line">    copy: src=/etc/yum.repos.d dest=/etc/</span><br><span class="line">    </span><br><span class="line">  - name: ensure vsftpd is at the latest version        </span><br><span class="line">    yum: name=vsftpd state=latest</span><br><span class="line">    </span><br><span class="line">  - name: write the apache config file          </span><br><span class="line">    copy: src=/etc/vsftpd/vsftpd.conf dest=/etc/vsftpd/vsftpd.conf </span><br><span class="line">    </span><br><span class="line">    notify:                             </span><br><span class="line">    - restart vsftpd</span><br><span class="line">    </span><br><span class="line">  - name: ensure vsftpd is running (and enable it at boot)</span><br><span class="line">    service: name=vsftpd state=started enabled=yes</span><br><span class="line">    </span><br><span class="line">  handlers:                     </span><br><span class="line">    - name: restart vsftpd              </span><br><span class="line">      service: name=vsftpd state=restarted</span><br></pre></td></tr></table></figure>

<h1 id="Ansible-role"><a href="#Ansible-role" class="headerlink" title="Ansible-role"></a>Ansible-role</h1><p>假设我们要写一个playbook来安装管理lamp环境，那么这个playbook就会写很长。所以我们希望把这个很大的文件分成多个功能拆分, 分成apache管理,php管理,mysql管理，然后在需要使用的时候直接调用就可以了，以免重复写。就类似编程里的模块化的概念，以达到代码复用的效果。</p>
<h2 id="一、roles介绍"><a href="#一、roles介绍" class="headerlink" title="一、roles介绍"></a>一、roles介绍</h2><p><strong>roles：</strong> ansible模块，类似于函数，完成一个任务的指令。每一个roles都有自己特定的目录结构，就是通过分别将variables, tasks及handlers等放置于单独的目录中,并可以便捷地调用它们的一种机制。</p>
<p><strong>roles优点：</strong></p>
<p> 1）模块中指令较少，方便编写</p>
<p> 2）重复调用方便</p>
<p>3）排错方便</p>
<h2 id="二、创建roles的目录结构"><a href="#二、创建roles的目录结构" class="headerlink" title="二、创建roles的目录结构"></a>二、创建roles的目录结构</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">files：用来存放由copy模块或script模块调用的文件。</span><br><span class="line">tasks：至少有一个main.yml文件，定义各tasks。</span><br><span class="line">handlers:有一个main.yml文件，定义各handlers。</span><br><span class="line">templates：用来存放jinjia2模板。</span><br><span class="line">vars：有一个main.yml文件，定义变量。</span><br><span class="line">meta：有一个main.yml文件，定义此角色的特殊设定及其依赖关系。</span><br></pre></td></tr></table></figure>

<p><strong>注意:</strong> 在每个角色的目录中分别创建files, tasks,handlers,templates,vars和meta目录，用不到的目录可以创建为空目录.</p>
<h2 id="三、案例：通过roles实现lamp"><a href="#三、案例：通过roles实现lamp" class="headerlink" title="三、案例：通过roles实现lamp"></a>三、案例：通过roles实现lamp</h2><p>分析：需定制三个角色: httpd,mysql,php</p>
<h3 id="3-1）-创建roles目录及文件-并确认目录结构"><a href="#3-1）-创建roles目录及文件-并确认目录结构" class="headerlink" title="3.1） 创建roles目录及文件,并确认目录结构"></a>3.1） 创建roles目录及文件,并确认目录结构</h3><p>roles&#x2F;<br>├── httpd<br>│ ├── files<br>│ ├── handlers<br>│ │ └── main.yml<br>│ ├── meta<br>│ │ └── main.yml<br>│ ├── tasks<br>│ │ └── main.yml<br>│ ├── templates<br>│ └── vars<br>│ └── main.yml<br>├── mysql<br>│ ├── files<br>│ ├── handlers<br>│ │ └── main.yml<br>│ ├── meta<br>│ │ └── main.yml<br>│ ├── tasks<br>│ │ └── main.yml<br>│ ├── templates<br>│ └── vars<br>│ └── main.yml<br>└── php<br>├── files<br>├── handlers<br>│ └── main.yml<br>├── meta<br>│ └── main.yml<br>├── tasks<br>│ └── main.yml<br>├── templates<br>└── vars<br>└── main.yml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ansible]# mkdir -p roles/&#123;httpd,mysql,php&#125;/&#123;files,tasks,handlers,templates,vars,meta&#125;</span><br><span class="line">[root@manage01 ansible]# touch roles/&#123;httpd,mysql,php&#125;/&#123;tasks,handlers,vars,meta&#125;/main.yml</span><br><span class="line">[root@manage01 ansible]# tree roles/</span><br><span class="line">roles/</span><br><span class="line">├── httpd</span><br><span class="line">│   ├── files</span><br><span class="line">│   ├── handlers</span><br><span class="line">│   │   └── main.yml</span><br><span class="line">│   ├── meta</span><br><span class="line">│   │   └── main.yml</span><br><span class="line">│   ├── tasks</span><br><span class="line">│   │   └── main.yml</span><br><span class="line">│   ├── templates</span><br><span class="line">│   └── vars</span><br><span class="line">│       └── main.yml</span><br><span class="line">├── mysql</span><br><span class="line">│   ├── files</span><br><span class="line">│   ├── handlers</span><br><span class="line">│   │   └── main.yml</span><br><span class="line">│   ├── meta</span><br><span class="line">│   │   └── main.yml</span><br><span class="line">│   ├── tasks</span><br><span class="line">│   │   └── main.yml</span><br><span class="line">│   ├── templates</span><br><span class="line">│   └── vars</span><br><span class="line">│       └── main.yml</span><br><span class="line">└── php</span><br><span class="line">    ├── files</span><br><span class="line">    ├── handlers</span><br><span class="line">    │   └── main.yml</span><br><span class="line">    ├── meta</span><br><span class="line">    │   └── main.yml</span><br><span class="line">    ├── tasks</span><br><span class="line">    │   └── main.yml</span><br><span class="line">    ├── templates</span><br><span class="line">    └── vars</span><br><span class="line">        └── main.yml</span><br><span class="line"></span><br><span class="line">21 directories, 12 files</span><br></pre></td></tr></table></figure>

<h3 id="3-2）准备httpd服务器的主页文件-php测试页和配置文件等"><a href="#3-2）准备httpd服务器的主页文件-php测试页和配置文件等" class="headerlink" title="3.2）准备httpd服务器的主页文件,php测试页和配置文件等"></a>3.2）准备httpd服务器的主页文件,php测试页和配置文件等</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 files]# ls</span><br><span class="line">httpd.conf  phpinfo.php</span><br></pre></td></tr></table></figure>

<h3 id="3-3）编写httpd角色的main-yml文件"><a href="#3-3）编写httpd角色的main-yml文件" class="headerlink" title="3.3）编写httpd角色的main.yml文件"></a>3.3）编写httpd角色的main.yml文件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 roles]# cat httpd/tasks/main.yml </span><br><span class="line">- name: httpd httpd-devel httpd-manual软件包安装</span><br><span class="line">  yum: name=&#123;&#123;item&#125;&#125; state=latest</span><br><span class="line">  with_items:</span><br><span class="line">    - httpd</span><br><span class="line">    - httpd-devel</span><br><span class="line">    - httpd-manual</span><br><span class="line"></span><br><span class="line">- name: 创建apache管理用户 www</span><br><span class="line">  user: name=&#123;&#123;user&#125;&#125; state=present</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- name: 设置apache开机启动，并启动服务</span><br><span class="line">  service: name=httpd enabled=yes state=started</span><br><span class="line"></span><br><span class="line">- name: 拷贝配置文件，初始化业务</span><br><span class="line">  copy: src=/etc/ansible/roles/httpd/files/httpd.conf dest=/etc/httpd/conf/httpd.conf</span><br><span class="line">  #定义通知调用，当配置文件更新,需要重启服务</span><br><span class="line">  notify: </span><br><span class="line">    - restart apache</span><br><span class="line"></span><br><span class="line">- name: 拷贝php测试页面</span><br><span class="line">  copy: src=/etc/ansible/roles/httpd/files/phpinfo.php dest=/var/www/html/</span><br><span class="line"></span><br><span class="line">[root@manage01 roles]# cat httpd/vars/main.yml</span><br><span class="line">user: www</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@manage01 roles]# cat httpd/handlers/main.yml </span><br><span class="line">- name: restart apache</span><br><span class="line">  service: name=httpd state=restarted</span><br></pre></td></tr></table></figure>

<h3 id="3-4）编写mysql角色的main-yml文件"><a href="#3-4）编写mysql角色的main-yml文件" class="headerlink" title="3.4）编写mysql角色的main.yml文件"></a>3.4）编写mysql角色的main.yml文件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ansible]# ls roles/php/files/</span><br><span class="line">www.conf</span><br><span class="line"></span><br><span class="line">[root@manage01 roles]# cat mysql/tasks/main.yml </span><br><span class="line">- name: mysql 用户创建</span><br><span class="line">  user: name=&#123;&#123;user&#125;&#125; state=present</span><br><span class="line"></span><br><span class="line">- name: mysql 软件安装</span><br><span class="line">  yum: name=&#123;&#123;item&#125;&#125; state=latest</span><br><span class="line">  with_items:</span><br><span class="line">    - mariadb</span><br><span class="line">    - mariadb-server</span><br><span class="line"></span><br><span class="line">- name: 启动服务，并设置开机启动</span><br><span class="line">  service: name=mariadb enabled=yes state=started</span><br><span class="line"></span><br><span class="line">- name: 改变mysql文件的所有者为mysql</span><br><span class="line">  file: path=&#x27;/usr/lib/mysql&#x27; owner=&#123;&#123;user&#125;&#125; group=&#123;&#123;user&#125;&#125; recurse=yes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@manage01 roles]# cat mysql/vars/main.yml </span><br><span class="line">user: mysql</span><br></pre></td></tr></table></figure>

<h3 id="3-5）-编写php角色的main-yml文件"><a href="#3-5）-编写php角色的main-yml文件" class="headerlink" title="3.5）:编写php角色的main.yml文件"></a>3.5）:编写php角色的main.yml文件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ansible]# cat roles/php/tasks/main.yml </span><br><span class="line">- name: 安装php</span><br><span class="line">  yum: name=&#123;&#123;item&#125;&#125; state=latest</span><br><span class="line">  with_items:</span><br><span class="line">    - php</span><br><span class="line">    - php-mysqlnd</span><br><span class="line">    - php-gd</span><br><span class="line">    - php-ldap</span><br><span class="line">    - php-odbc</span><br><span class="line">    - php-pear</span><br><span class="line">    - php-xml</span><br><span class="line">    - php-xmlrpc</span><br><span class="line">    - php-mbstring</span><br><span class="line">    - php-snmp</span><br><span class="line">    - php-soap</span><br><span class="line">    - curl</span><br><span class="line">    - curl-devel </span><br><span class="line">    - php-bcmath</span><br><span class="line">    - php-fpm</span><br><span class="line"></span><br><span class="line">- name: copy www.conf to /etc/php-fpm.d</span><br><span class="line">  copy: src=/etc/ansible/roles/php/files/www.conf dest=/etc/php-fpm.d force=yes</span><br><span class="line">  notify:</span><br><span class="line">    - restart php-fpm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@manage01 ansible]# cat roles/php/handlers/main.yml </span><br><span class="line">- name: restart php-fpm</span><br><span class="line">  service: name=php-fpm state=restarted</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h3 id="3-6）编写lamp的playbook文件调用前面定义好的三个角色"><a href="#3-6）编写lamp的playbook文件调用前面定义好的三个角色" class="headerlink" title="3.6）编写lamp的playbook文件调用前面定义好的三个角色"></a>3.6）编写lamp的playbook文件调用前面定义好的三个角色</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 yaml]# cat lamp.yml </span><br><span class="line">---</span><br><span class="line">- hosts: group1</span><br><span class="line">  remote_user: root</span><br><span class="line">  roles:</span><br><span class="line">  - httpd</span><br><span class="line">  - mysql</span><br><span class="line">  - php</span><br></pre></td></tr></table></figure>

<h3 id="3-7）-执行lamp的playbook文件"><a href="#3-7）-执行lamp的playbook文件" class="headerlink" title="3.7） 执行lamp的playbook文件"></a>3.7） 执行lamp的playbook文件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 yaml]# ansible-playbook -C lamp.yml</span><br><span class="line">[root@manage01 yaml]# ansible-playbook lamp.yml</span><br></pre></td></tr></table></figure>

<h3 id="3-8）-测试业务机器"><a href="#3-8）-测试业务机器" class="headerlink" title="3.8） 测试业务机器"></a>3.8） 测试业务机器</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/6/1601969569380.png" alt="lamp_test.png"></p>
<h1 id="Ansible-script模块"><a href="#Ansible-script模块" class="headerlink" title="Ansible-script模块"></a>Ansible-script模块</h1><h2 id="一、script模块"><a href="#一、script模块" class="headerlink" title="一、script模块"></a>一、script模块</h2><p><strong>如何通过ansible执行一个脚本：lamp安装脚本</strong></p>
<p>script模块：用于在远程机器上执行<strong>本地</strong>脚本。</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/script_module.html#script-module">https://docs.ansible.com/ansible/latest/modules/script_module.html#script-module</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在manage01上创建脚本，通过ansible将脚本分发到被管理端</span><br><span class="line">[root@manage01 ~]# cat ansible_test.sh </span><br><span class="line">#!/bin/bash</span><br><span class="line">#ansible script module test script</span><br><span class="line">mkdir /opt/log</span><br><span class="line">find / -name &quot;*.log&quot; -exec cp -rpf &#123;&#125; /opt/log \;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#脚本不用给执行权限</span><br><span class="line">[root@manage01 ~]# ansible -m script group1 -a &quot;/root/ansible_test.sh&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;rc&quot;: 0,</span><br><span class="line">    &quot;stderr&quot;: &quot;Shared connection to 192.168.98.203 closed.\r\n&quot;,</span><br><span class="line">    &quot;stderr_lines&quot;: [</span><br><span class="line">        &quot;Shared connection to 192.168.98.203 closed.&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;stdout&quot;: &quot;cp: &#x27;/opt/log/sssd.log&#x27; 与&#x27;/opt/log/sssd.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd_implicit_files.log&#x27; 与&#x27;/opt/log/sssd_implicit_files.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd_nss.log&#x27; 与&#x27;/opt/log/sssd_nss.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/tuned.log&#x27; 与&#x27;/opt/log/tuned.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/audit.log&#x27; 与&#x27;/opt/log/audit.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/anaconda.log&#x27; 与&#x27;/opt/log/anaconda.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/X.log&#x27; 与&#x27;/opt/log/X.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/program.log&#x27; 与&#x27;/opt/log/program.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/packaging.log&#x27; 与&#x27;/opt/log/packaging.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/storage.log&#x27; 与&#x27;/opt/log/storage.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/ifcfg.log&#x27; 与&#x27;/opt/log/ifcfg.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/lvm.log&#x27; 与&#x27;/opt/log/lvm.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dnf.librepo.log&#x27; 与&#x27;/opt/log/dnf.librepo.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/hawkey.log&#x27; 与&#x27;/opt/log/hawkey.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dbus.log&#x27; 与&#x27;/opt/log/dbus.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/ks-script-5r3m4old.log&#x27; 与&#x27;/opt/log/ks-script-5r3m4old.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/ks-script-h97m_bc_.log&#x27; 与&#x27;/opt/log/ks-script-h97m_bc_.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/journal.log&#x27; 与&#x27;/opt/log/journal.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/boot.log&#x27; 与&#x27;/opt/log/boot.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-vmsvc.log&#x27; 与&#x27;/opt/log/vmware-vmsvc.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dnf.log&#x27; 与&#x27;/opt/log/dnf.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dnf.rpm.log&#x27; 与&#x27;/opt/log/dnf.rpm.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.3.log&#x27; 与&#x27;/opt/log/vmware-network.3.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.2.log&#x27; 与&#x27;/opt/log/vmware-network.2.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.1.log&#x27; 与&#x27;/opt/log/vmware-network.1.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.log&#x27; 与&#x27;/opt/log/vmware-network.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/rpm.log&#x27; 与&#x27;/opt/log/rpm.log&#x27; 为同一文件\r\n&quot;,</span><br><span class="line">    &quot;stdout_lines&quot;: [</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd.log&#x27; 与&#x27;/opt/log/sssd.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd_implicit_files.log&#x27; 与&#x27;/opt/log/sssd_implicit_files.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd_nss.log&#x27; 与&#x27;/opt/log/sssd_nss.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/tuned.log&#x27; 与&#x27;/opt/log/tuned.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/audit.log&#x27; 与&#x27;/opt/log/audit.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/anaconda.log&#x27; 与&#x27;/opt/log/anaconda.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/X.log&#x27; 与&#x27;/opt/log/X.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/program.log&#x27; 与&#x27;/opt/log/program.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/packaging.log&#x27; 与&#x27;/opt/log/packaging.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/storage.log&#x27; 与&#x27;/opt/log/storage.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/ifcfg.log&#x27; 与&#x27;/opt/log/ifcfg.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/lvm.log&#x27; 与&#x27;/opt/log/lvm.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dnf.librepo.log&#x27; 与&#x27;/opt/log/dnf.librepo.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/hawkey.log&#x27; 与&#x27;/opt/log/hawkey.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dbus.log&#x27; 与&#x27;/opt/log/dbus.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/ks-script-5r3m4old.log&#x27; 与&#x27;/opt/log/ks-script-5r3m4old.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/ks-script-h97m_bc_.log&#x27; 与&#x27;/opt/log/ks-script-h97m_bc_.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/journal.log&#x27; 与&#x27;/opt/log/journal.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/boot.log&#x27; 与&#x27;/opt/log/boot.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-vmsvc.log&#x27; 与&#x27;/opt/log/vmware-vmsvc.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dnf.log&#x27; 与&#x27;/opt/log/dnf.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dnf.rpm.log&#x27; 与&#x27;/opt/log/dnf.rpm.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.3.log&#x27; 与&#x27;/opt/log/vmware-network.3.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.2.log&#x27; 与&#x27;/opt/log/vmware-network.2.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.1.log&#x27; 与&#x27;/opt/log/vmware-network.1.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.log&#x27; 与&#x27;/opt/log/vmware-network.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/rpm.log&#x27; 与&#x27;/opt/log/rpm.log&#x27; 为同一文件&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;rc&quot;: 0,</span><br><span class="line">    &quot;stderr&quot;: &quot;Shared connection to 192.168.98.202 closed.\r\n&quot;,</span><br><span class="line">    &quot;stderr_lines&quot;: [</span><br><span class="line">        &quot;Shared connection to 192.168.98.202 closed.&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;stdout&quot;: &quot;cp: &#x27;/opt/log/home-75a175cb.log&#x27; 与&#x27;/opt/log/home-75a175cb.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/root-648d48b0.log&#x27; 与&#x27;/opt/log/root-648d48b0.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/audit.log&#x27; 与&#x27;/opt/log/audit.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd.log&#x27; 与&#x27;/opt/log/sssd.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd_implicit_files.log&#x27; 与&#x27;/opt/log/sssd_implicit_files.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd_nss.log&#x27; 与&#x27;/opt/log/sssd_nss.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd_kcm.log&#x27; 与&#x27;/opt/log/sssd_kcm.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/tuned.log&#x27; 与&#x27;/opt/log/tuned.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/anaconda.log&#x27; 与&#x27;/opt/log/anaconda.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/X.log&#x27; 与&#x27;/opt/log/X.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/program.log&#x27; 与&#x27;/opt/log/program.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/packaging.log&#x27; 与&#x27;/opt/log/packaging.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/storage.log&#x27; 与&#x27;/opt/log/storage.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/ifcfg.log&#x27; 与&#x27;/opt/log/ifcfg.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/lvm.log&#x27; 与&#x27;/opt/log/lvm.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dnf.librepo.log&#x27; 与&#x27;/opt/log/dnf.librepo.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/hawkey.log&#x27; 与&#x27;/opt/log/hawkey.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dbus.log&#x27; 与&#x27;/opt/log/dbus.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/ks-script-fx6j2w7d.log&#x27; 与&#x27;/opt/log/ks-script-fx6j2w7d.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/ks-script-igqtd8i1.log&#x27; 与&#x27;/opt/log/ks-script-igqtd8i1.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/journal.log&#x27; 与&#x27;/opt/log/journal.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/boot.log&#x27; 与&#x27;/opt/log/boot.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-vmsvc.log&#x27; 与&#x27;/opt/log/vmware-vmsvc.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/Xorg.9.log&#x27; 与&#x27;/opt/log/Xorg.9.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-vmusr.log&#x27; 与&#x27;/opt/log/vmware-vmusr.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dnf.log&#x27; 与&#x27;/opt/log/dnf.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dnf.rpm.log&#x27; 与&#x27;/opt/log/dnf.rpm.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.3.log&#x27; 与&#x27;/opt/log/vmware-network.3.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.2.log&#x27; 与&#x27;/opt/log/vmware-network.2.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.1.log&#x27; 与&#x27;/opt/log/vmware-network.1.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.log&#x27; 与&#x27;/opt/log/vmware-network.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/rpm.log&#x27; 与&#x27;/opt/log/rpm.log&#x27; 为同一文件\r\n&quot;,</span><br><span class="line">    &quot;stdout_lines&quot;: [</span><br><span class="line">        &quot;cp: &#x27;/opt/log/home-75a175cb.log&#x27; 与&#x27;/opt/log/home-75a175cb.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/root-648d48b0.log&#x27; 与&#x27;/opt/log/root-648d48b0.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/audit.log&#x27; 与&#x27;/opt/log/audit.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd.log&#x27; 与&#x27;/opt/log/sssd.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd_implicit_files.log&#x27; 与&#x27;/opt/log/sssd_implicit_files.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd_nss.log&#x27; 与&#x27;/opt/log/sssd_nss.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd_kcm.log&#x27; 与&#x27;/opt/log/sssd_kcm.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/tuned.log&#x27; 与&#x27;/opt/log/tuned.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/anaconda.log&#x27; 与&#x27;/opt/log/anaconda.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/X.log&#x27; 与&#x27;/opt/log/X.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/program.log&#x27; 与&#x27;/opt/log/program.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/packaging.log&#x27; 与&#x27;/opt/log/packaging.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/storage.log&#x27; 与&#x27;/opt/log/storage.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/ifcfg.log&#x27; 与&#x27;/opt/log/ifcfg.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/lvm.log&#x27; 与&#x27;/opt/log/lvm.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dnf.librepo.log&#x27; 与&#x27;/opt/log/dnf.librepo.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/hawkey.log&#x27; 与&#x27;/opt/log/hawkey.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dbus.log&#x27; 与&#x27;/opt/log/dbus.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/ks-script-fx6j2w7d.log&#x27; 与&#x27;/opt/log/ks-script-fx6j2w7d.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/ks-script-igqtd8i1.log&#x27; 与&#x27;/opt/log/ks-script-igqtd8i1.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/journal.log&#x27; 与&#x27;/opt/log/journal.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/boot.log&#x27; 与&#x27;/opt/log/boot.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-vmsvc.log&#x27; 与&#x27;/opt/log/vmware-vmsvc.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/Xorg.9.log&#x27; 与&#x27;/opt/log/Xorg.9.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-vmusr.log&#x27; 与&#x27;/opt/log/vmware-vmusr.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dnf.log&#x27; 与&#x27;/opt/log/dnf.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dnf.rpm.log&#x27; 与&#x27;/opt/log/dnf.rpm.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.3.log&#x27; 与&#x27;/opt/log/vmware-network.3.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.2.log&#x27; 与&#x27;/opt/log/vmware-network.2.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.1.log&#x27; 与&#x27;/opt/log/vmware-network.1.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.log&#x27; 与&#x27;/opt/log/vmware-network.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/rpm.log&#x27; 与&#x27;/opt/log/rpm.log&#x27; 为同一文件&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;rc&quot;: 0,</span><br><span class="line">    &quot;stderr&quot;: &quot;Shared connection to 192.168.98.201 closed.\r\n&quot;,</span><br><span class="line">    &quot;stderr_lines&quot;: [</span><br><span class="line">        &quot;Shared connection to 192.168.98.201 closed.&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;stdout&quot;: &quot;cp: &#x27;/opt/log/home-2b167fc1.log&#x27; 与&#x27;/opt/log/home-2b167fc1.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/root-836d3cf3.log&#x27; 与&#x27;/opt/log/root-836d3cf3.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/audit.log&#x27; 与&#x27;/opt/log/audit.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd_implicit_files.log&#x27; 与&#x27;/opt/log/sssd_implicit_files.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd_kcm.log&#x27; 与&#x27;/opt/log/sssd_kcm.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd_nss.log&#x27; 与&#x27;/opt/log/sssd_nss.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/sssd.log&#x27; 与&#x27;/opt/log/sssd.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/tuned.log&#x27; 与&#x27;/opt/log/tuned.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/anaconda.log&#x27; 与&#x27;/opt/log/anaconda.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/X.log&#x27; 与&#x27;/opt/log/X.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/program.log&#x27; 与&#x27;/opt/log/program.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/packaging.log&#x27; 与&#x27;/opt/log/packaging.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/storage.log&#x27; 与&#x27;/opt/log/storage.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/ifcfg.log&#x27; 与&#x27;/opt/log/ifcfg.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/lvm.log&#x27; 与&#x27;/opt/log/lvm.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dnf.librepo.log&#x27; 与&#x27;/opt/log/dnf.librepo.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/hawkey.log&#x27; 与&#x27;/opt/log/hawkey.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dbus.log&#x27; 与&#x27;/opt/log/dbus.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/ks-script-ai28ecf4.log&#x27; 与&#x27;/opt/log/ks-script-ai28ecf4.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/ks-script-k4vgo8wr.log&#x27; 与&#x27;/opt/log/ks-script-k4vgo8wr.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/journal.log&#x27; 与&#x27;/opt/log/journal.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/boot.log&#x27; 与&#x27;/opt/log/boot.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-vmsvc.log&#x27; 与&#x27;/opt/log/vmware-vmsvc.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/Xorg.9.log&#x27; 与&#x27;/opt/log/Xorg.9.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-vmusr.log&#x27; 与&#x27;/opt/log/vmware-vmusr.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dnf.log&#x27; 与&#x27;/opt/log/dnf.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/dnf.rpm.log&#x27; 与&#x27;/opt/log/dnf.rpm.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.6.log&#x27; 与&#x27;/opt/log/vmware-network.6.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.5.log&#x27; 与&#x27;/opt/log/vmware-network.5.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.4.log&#x27; 与&#x27;/opt/log/vmware-network.4.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.3.log&#x27; 与&#x27;/opt/log/vmware-network.3.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.2.log&#x27; 与&#x27;/opt/log/vmware-network.2.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.1.log&#x27; 与&#x27;/opt/log/vmware-network.1.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/vmware-network.log&#x27; 与&#x27;/opt/log/vmware-network.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/rpm.log&#x27; 与&#x27;/opt/log/rpm.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/error.log&#x27; 与&#x27;/opt/log/error.log&#x27; 为同一文件\r\ncp: &#x27;/opt/log/access.log&#x27; 与&#x27;/opt/log/access.log&#x27; 为同一文件\r\n&quot;,</span><br><span class="line">    &quot;stdout_lines&quot;: [</span><br><span class="line">        &quot;cp: &#x27;/opt/log/home-2b167fc1.log&#x27; 与&#x27;/opt/log/home-2b167fc1.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/root-836d3cf3.log&#x27; 与&#x27;/opt/log/root-836d3cf3.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/audit.log&#x27; 与&#x27;/opt/log/audit.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd_implicit_files.log&#x27; 与&#x27;/opt/log/sssd_implicit_files.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd_kcm.log&#x27; 与&#x27;/opt/log/sssd_kcm.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd_nss.log&#x27; 与&#x27;/opt/log/sssd_nss.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/sssd.log&#x27; 与&#x27;/opt/log/sssd.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/tuned.log&#x27; 与&#x27;/opt/log/tuned.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/anaconda.log&#x27; 与&#x27;/opt/log/anaconda.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/X.log&#x27; 与&#x27;/opt/log/X.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/program.log&#x27; 与&#x27;/opt/log/program.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/packaging.log&#x27; 与&#x27;/opt/log/packaging.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/storage.log&#x27; 与&#x27;/opt/log/storage.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/ifcfg.log&#x27; 与&#x27;/opt/log/ifcfg.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/lvm.log&#x27; 与&#x27;/opt/log/lvm.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dnf.librepo.log&#x27; 与&#x27;/opt/log/dnf.librepo.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/hawkey.log&#x27; 与&#x27;/opt/log/hawkey.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dbus.log&#x27; 与&#x27;/opt/log/dbus.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/ks-script-ai28ecf4.log&#x27; 与&#x27;/opt/log/ks-script-ai28ecf4.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/ks-script-k4vgo8wr.log&#x27; 与&#x27;/opt/log/ks-script-k4vgo8wr.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/journal.log&#x27; 与&#x27;/opt/log/journal.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/boot.log&#x27; 与&#x27;/opt/log/boot.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-vmsvc.log&#x27; 与&#x27;/opt/log/vmware-vmsvc.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/Xorg.9.log&#x27; 与&#x27;/opt/log/Xorg.9.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-vmusr.log&#x27; 与&#x27;/opt/log/vmware-vmusr.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dnf.log&#x27; 与&#x27;/opt/log/dnf.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/dnf.rpm.log&#x27; 与&#x27;/opt/log/dnf.rpm.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.6.log&#x27; 与&#x27;/opt/log/vmware-network.6.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.5.log&#x27; 与&#x27;/opt/log/vmware-network.5.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.4.log&#x27; 与&#x27;/opt/log/vmware-network.4.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.3.log&#x27; 与&#x27;/opt/log/vmware-network.3.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.2.log&#x27; 与&#x27;/opt/log/vmware-network.2.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.1.log&#x27; 与&#x27;/opt/log/vmware-network.1.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/vmware-network.log&#x27; 与&#x27;/opt/log/vmware-network.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/rpm.log&#x27; 与&#x27;/opt/log/rpm.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/error.log&#x27; 与&#x27;/opt/log/error.log&#x27; 为同一文件&quot;,</span><br><span class="line">        &quot;cp: &#x27;/opt/log/access.log&#x27; 与&#x27;/opt/log/access.log&#x27; 为同一文件&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-6"><a href="#二、学习视频-6" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=22">视频：script模块</a></p>
<h1 id="Ansible-service模块"><a href="#Ansible-service模块" class="headerlink" title="Ansible-service模块"></a>Ansible-service模块</h1><h2 id="一、service模块"><a href="#一、service模块" class="headerlink" title="一、service模块"></a>一、service模块</h2><p>service模块：用于控制服务的启动,关闭,开机自启动等。</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/service_module.html#service-module">https://docs.ansible.com/ansible/latest/modules/service_module.html#service-module</a></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>服务名称</td>
</tr>
<tr>
<td>state reloaded, restarted, started, stopped</td>
<td>服务管理</td>
</tr>
<tr>
<td>enabled yes|no</td>
<td>开启是否启动</td>
</tr>
</tbody></table>
<p>启动vsftpd服务，并设为开机自动启动</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m service 192.168.98.202 -a &quot;name=vsftpd state=started enabled=on&quot;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;enabled&quot;: true,</span><br><span class="line">    &quot;name&quot;: &quot;vsftpd&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;started&quot;,</span><br><span class="line">    &quot;status&quot;: &#123;</span><br><span class="line">        &quot;ActiveEnterTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ActiveExitTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ActiveState&quot;: &quot;inactive&quot;,</span><br><span class="line">        &quot;After&quot;: &quot;network.target systemd-journald.socket system.slice basic.target sysinit.target&quot;,</span><br><span class="line">        &quot;AllowIsolate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;AmbientCapabilities&quot;: &quot;&quot;,</span><br><span class="line">        &quot;AssertResult&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;AssertTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;Before&quot;: &quot;shutdown.target&quot;,</span><br><span class="line">        &quot;BlockIOAccounting&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;BlockIOWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;CPUAccounting&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;CPUQuotaPerSecUSec&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;CPUSchedulingPolicy&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;CPUSchedulingPriority&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;CPUSchedulingResetOnFork&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;CPUShares&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;CPUUsageNSec&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;CPUWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;CacheDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;CanIsolate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;CanReload&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;CanStart&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;CanStop&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;CapabilityBoundingSet&quot;: &quot;cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend&quot;,</span><br><span class="line">        &quot;CollectMode&quot;: &quot;inactive&quot;,</span><br><span class="line">        &quot;ConditionResult&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ConditionTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ConfigurationDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;Conflicts&quot;: &quot;shutdown.target&quot;,</span><br><span class="line">        &quot;ControlPID&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;DefaultDependencies&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;Delegate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Description&quot;: &quot;Vsftpd ftp daemon&quot;,</span><br><span class="line">        &quot;DevicePolicy&quot;: &quot;auto&quot;,</span><br><span class="line">        &quot;DynamicUser&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ExecMainCode&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ExecMainExitTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ExecMainPID&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ExecMainStartTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ExecMainStatus&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ExecStart&quot;: &quot;&#123; path=/usr/sbin/vsftpd ; argv[]=/usr/sbin/vsftpd /etc/vsftpd/vsftpd.conf ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 &#125;&quot;,</span><br><span class="line">        &quot;FailureAction&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;FileDescriptorStoreMax&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;FragmentPath&quot;: &quot;/usr/lib/systemd/system/vsftpd.service&quot;,</span><br><span class="line">        &quot;GID&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;GuessMainPID&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;IOAccounting&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;IOSchedulingClass&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;IOSchedulingPriority&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;IOWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;IPAccounting&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;IPEgressBytes&quot;: &quot;18446744073709551615&quot;,</span><br><span class="line">        &quot;IPEgressPackets&quot;: &quot;18446744073709551615&quot;,</span><br><span class="line">        &quot;IPIngressBytes&quot;: &quot;18446744073709551615&quot;,</span><br><span class="line">        &quot;IPIngressPackets&quot;: &quot;18446744073709551615&quot;,</span><br><span class="line">        &quot;Id&quot;: &quot;vsftpd.service&quot;,</span><br><span class="line">        &quot;IgnoreOnIsolate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;IgnoreSIGPIPE&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;InactiveEnterTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;InactiveExitTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;JobRunningTimeoutUSec&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;JobTimeoutAction&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;JobTimeoutUSec&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;KeyringMode&quot;: &quot;private&quot;,</span><br><span class="line">        &quot;KillMode&quot;: &quot;control-group&quot;,</span><br><span class="line">        &quot;KillSignal&quot;: &quot;15&quot;,</span><br><span class="line">        &quot;LimitAS&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitASSoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitCORE&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitCORESoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitCPU&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitCPUSoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitDATA&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitDATASoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitFSIZE&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitFSIZESoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitLOCKS&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitLOCKSSoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitMEMLOCK&quot;: &quot;16777216&quot;,</span><br><span class="line">        &quot;LimitMEMLOCKSoft&quot;: &quot;16777216&quot;,</span><br><span class="line">        &quot;LimitMSGQUEUE&quot;: &quot;819200&quot;,</span><br><span class="line">        &quot;LimitMSGQUEUESoft&quot;: &quot;819200&quot;,</span><br><span class="line">        &quot;LimitNICE&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;LimitNICESoft&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;LimitNOFILE&quot;: &quot;4096&quot;,</span><br><span class="line">        &quot;LimitNOFILESoft&quot;: &quot;1024&quot;,</span><br><span class="line">        &quot;LimitNPROC&quot;: &quot;7741&quot;,</span><br><span class="line">        &quot;LimitNPROCSoft&quot;: &quot;7741&quot;,</span><br><span class="line">        &quot;LimitRSS&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitRSSSoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitRTPRIO&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;LimitRTPRIOSoft&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;LimitRTTIME&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitRTTIMESoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitSIGPENDING&quot;: &quot;7741&quot;,</span><br><span class="line">        &quot;LimitSIGPENDINGSoft&quot;: &quot;7741&quot;,</span><br><span class="line">        &quot;LimitSTACK&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitSTACKSoft&quot;: &quot;8388608&quot;,</span><br><span class="line">        &quot;LoadState&quot;: &quot;loaded&quot;,</span><br><span class="line">        &quot;LockPersonality&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;LogLevelMax&quot;: &quot;-1&quot;,</span><br><span class="line">        &quot;LogsDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;MainPID&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;MemoryAccounting&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;MemoryCurrent&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;MemoryDenyWriteExecute&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;MemoryHigh&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;MemoryLimit&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;MemoryLow&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;MemoryMax&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;MemorySwapMax&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;MountAPIVFS&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;MountFlags&quot;: &quot;&quot;,</span><br><span class="line">        &quot;NFileDescriptorStore&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;NRestarts&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;Names&quot;: &quot;vsftpd.service&quot;,</span><br><span class="line">        &quot;NeedDaemonReload&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Nice&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;NoNewPrivileges&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;NonBlocking&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;NotifyAccess&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;OOMScoreAdjust&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;OnFailureJobMode&quot;: &quot;replace&quot;,</span><br><span class="line">        &quot;PermissionsStartOnly&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Perpetual&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateDevices&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateMounts&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateNetwork&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateTmp&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateUsers&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectControlGroups&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectHome&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectKernelModules&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectKernelTunables&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectSystem&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RefuseManualStart&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RefuseManualStop&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RemainAfterExit&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RemoveIPC&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Requires&quot;: &quot;sysinit.target system.slice&quot;,</span><br><span class="line">        &quot;Restart&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RestartUSec&quot;: &quot;100ms&quot;,</span><br><span class="line">        &quot;RestrictNamespaces&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RestrictRealtime&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Result&quot;: &quot;success&quot;,</span><br><span class="line">        &quot;RootDirectoryStartOnly&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RuntimeDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;RuntimeDirectoryPreserve&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RuntimeMaxUSec&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;SameProcessGroup&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;SecureBits&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;SendSIGHUP&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;SendSIGKILL&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;Slice&quot;: &quot;system.slice&quot;,</span><br><span class="line">        &quot;StandardError&quot;: &quot;inherit&quot;,</span><br><span class="line">        &quot;StandardInput&quot;: &quot;null&quot;,</span><br><span class="line">        &quot;StandardInputData&quot;: &quot;&quot;,</span><br><span class="line">        &quot;StandardOutput&quot;: &quot;journal&quot;,</span><br><span class="line">        &quot;StartLimitAction&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;StartLimitBurst&quot;: &quot;5&quot;,</span><br><span class="line">        &quot;StartLimitIntervalUSec&quot;: &quot;10s&quot;,</span><br><span class="line">        &quot;StartupBlockIOWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;StartupCPUShares&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;StartupCPUWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;StartupIOWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;StateChangeTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;StateDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;StatusErrno&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;StopWhenUnneeded&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;SubState&quot;: &quot;dead&quot;,</span><br><span class="line">        &quot;SuccessAction&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;SyslogFacility&quot;: &quot;3&quot;,</span><br><span class="line">        &quot;SyslogLevel&quot;: &quot;6&quot;,</span><br><span class="line">        &quot;SyslogLevelPrefix&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;SyslogPriority&quot;: &quot;30&quot;,</span><br><span class="line">        &quot;SystemCallErrorNumber&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;TTYReset&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;TTYVHangup&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;TTYVTDisallocate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;TasksAccounting&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;TasksCurrent&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;TasksMax&quot;: &quot;12386&quot;,</span><br><span class="line">        &quot;TimeoutStartUSec&quot;: &quot;1min 30s&quot;,</span><br><span class="line">        &quot;TimeoutStopUSec&quot;: &quot;1min 30s&quot;,</span><br><span class="line">        &quot;TimerSlackNSec&quot;: &quot;50000&quot;,</span><br><span class="line">        &quot;Transient&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Type&quot;: &quot;forking&quot;,</span><br><span class="line">        &quot;UID&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;UMask&quot;: &quot;0022&quot;,</span><br><span class="line">        &quot;UnitFilePreset&quot;: &quot;disabled&quot;,</span><br><span class="line">        &quot;UnitFileState&quot;: &quot;disabled&quot;,</span><br><span class="line">        &quot;UtmpMode&quot;: &quot;init&quot;,</span><br><span class="line">        &quot;WatchdogTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;WatchdogUSec&quot;: &quot;0&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关闭vsftpd服务，并设为开机不自动启动</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m service 192.168.98.202 -a &quot;name=vsftpd state=stopped enabled=false&quot;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;enabled&quot;: false,</span><br><span class="line">    &quot;name&quot;: &quot;vsftpd&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;stopped&quot;,</span><br><span class="line">    &quot;status&quot;: &#123;</span><br><span class="line">        &quot;ActiveEnterTimestamp&quot;: &quot;Fri 2019-10-18 04:13:19 EDT&quot;,</span><br><span class="line">        &quot;ActiveEnterTimestampMonotonic&quot;: &quot;89286681247&quot;,</span><br><span class="line">        &quot;ActiveExitTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ActiveState&quot;: &quot;active&quot;,</span><br><span class="line">        &quot;After&quot;: &quot;systemd-journald.socket sysinit.target basic.target system.slice network.target&quot;,</span><br><span class="line">        &quot;AllowIsolate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;AmbientCapabilities&quot;: &quot;&quot;,</span><br><span class="line">        &quot;AssertResult&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;AssertTimestamp&quot;: &quot;Fri 2019-10-18 04:13:19 EDT&quot;,</span><br><span class="line">        &quot;AssertTimestampMonotonic&quot;: &quot;89286676375&quot;,</span><br><span class="line">        &quot;Before&quot;: &quot;multi-user.target shutdown.target&quot;,</span><br><span class="line">        &quot;BlockIOAccounting&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;BlockIOWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;CPUAccounting&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;CPUQuotaPerSecUSec&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;CPUSchedulingPolicy&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;CPUSchedulingPriority&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;CPUSchedulingResetOnFork&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;CPUShares&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;CPUUsageNSec&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;CPUWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;CacheDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;CanIsolate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;CanReload&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;CanStart&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;CanStop&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;CapabilityBoundingSet&quot;: &quot;cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend&quot;,</span><br><span class="line">        &quot;CollectMode&quot;: &quot;inactive&quot;,</span><br><span class="line">        &quot;ConditionResult&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;ConditionTimestamp&quot;: &quot;Fri 2019-10-18 04:13:19 EDT&quot;,</span><br><span class="line">        &quot;ConditionTimestampMonotonic&quot;: &quot;89286676375&quot;,</span><br><span class="line">        &quot;ConfigurationDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;Conflicts&quot;: &quot;shutdown.target&quot;,</span><br><span class="line">        &quot;ControlGroup&quot;: &quot;/system.slice/vsftpd.service&quot;,</span><br><span class="line">        &quot;ControlPID&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;DefaultDependencies&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;Delegate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Description&quot;: &quot;Vsftpd ftp daemon&quot;,</span><br><span class="line">        &quot;DevicePolicy&quot;: &quot;auto&quot;,</span><br><span class="line">        &quot;DynamicUser&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ExecMainCode&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ExecMainExitTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ExecMainPID&quot;: &quot;51752&quot;,</span><br><span class="line">        &quot;ExecMainStartTimestamp&quot;: &quot;Fri 2019-10-18 04:13:19 EDT&quot;,</span><br><span class="line">        &quot;ExecMainStartTimestampMonotonic&quot;: &quot;89286681239&quot;,</span><br><span class="line">        &quot;ExecMainStatus&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;ExecStart&quot;: &quot;&#123; path=/usr/sbin/vsftpd ; argv[]=/usr/sbin/vsftpd /etc/vsftpd/vsftpd.conf ; ignore_errors=no ; start_time=[Fri 2019-10-18 04:13:19 EDT] ; stop_time=[Fri 2019-10-18 04:13:19 EDT] ; pid=51751 ; code=exited ; status=0 &#125;&quot;,</span><br><span class="line">        &quot;FailureAction&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;FileDescriptorStoreMax&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;FragmentPath&quot;: &quot;/usr/lib/systemd/system/vsftpd.service&quot;,</span><br><span class="line">        &quot;GID&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;GuessMainPID&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;IOAccounting&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;IOSchedulingClass&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;IOSchedulingPriority&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;IOWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;IPAccounting&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;IPEgressBytes&quot;: &quot;18446744073709551615&quot;,</span><br><span class="line">        &quot;IPEgressPackets&quot;: &quot;18446744073709551615&quot;,</span><br><span class="line">        &quot;IPIngressBytes&quot;: &quot;18446744073709551615&quot;,</span><br><span class="line">        &quot;IPIngressPackets&quot;: &quot;18446744073709551615&quot;,</span><br><span class="line">        &quot;Id&quot;: &quot;vsftpd.service&quot;,</span><br><span class="line">        &quot;IgnoreOnIsolate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;IgnoreSIGPIPE&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;InactiveEnterTimestampMonotonic&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;InactiveExitTimestamp&quot;: &quot;Fri 2019-10-18 04:13:19 EDT&quot;,</span><br><span class="line">        &quot;InactiveExitTimestampMonotonic&quot;: &quot;89286677130&quot;,</span><br><span class="line">        &quot;InvocationID&quot;: &quot;e326c69c138b430880f883b0bdb05f83&quot;,</span><br><span class="line">        &quot;JobRunningTimeoutUSec&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;JobTimeoutAction&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;JobTimeoutUSec&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;KeyringMode&quot;: &quot;private&quot;,</span><br><span class="line">        &quot;KillMode&quot;: &quot;control-group&quot;,</span><br><span class="line">        &quot;KillSignal&quot;: &quot;15&quot;,</span><br><span class="line">        &quot;LimitAS&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitASSoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitCORE&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitCORESoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitCPU&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitCPUSoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitDATA&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitDATASoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitFSIZE&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitFSIZESoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitLOCKS&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitLOCKSSoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitMEMLOCK&quot;: &quot;16777216&quot;,</span><br><span class="line">        &quot;LimitMEMLOCKSoft&quot;: &quot;16777216&quot;,</span><br><span class="line">        &quot;LimitMSGQUEUE&quot;: &quot;819200&quot;,</span><br><span class="line">        &quot;LimitMSGQUEUESoft&quot;: &quot;819200&quot;,</span><br><span class="line">        &quot;LimitNICE&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;LimitNICESoft&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;LimitNOFILE&quot;: &quot;4096&quot;,</span><br><span class="line">        &quot;LimitNOFILESoft&quot;: &quot;1024&quot;,</span><br><span class="line">        &quot;LimitNPROC&quot;: &quot;7741&quot;,</span><br><span class="line">        &quot;LimitNPROCSoft&quot;: &quot;7741&quot;,</span><br><span class="line">        &quot;LimitRSS&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitRSSSoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitRTPRIO&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;LimitRTPRIOSoft&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;LimitRTTIME&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitRTTIMESoft&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitSIGPENDING&quot;: &quot;7741&quot;,</span><br><span class="line">        &quot;LimitSIGPENDINGSoft&quot;: &quot;7741&quot;,</span><br><span class="line">        &quot;LimitSTACK&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;LimitSTACKSoft&quot;: &quot;8388608&quot;,</span><br><span class="line">        &quot;LoadState&quot;: &quot;loaded&quot;,</span><br><span class="line">        &quot;LockPersonality&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;LogLevelMax&quot;: &quot;-1&quot;,</span><br><span class="line">        &quot;LogsDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;MainPID&quot;: &quot;51752&quot;,</span><br><span class="line">        &quot;MemoryAccounting&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;MemoryCurrent&quot;: &quot;577536&quot;,</span><br><span class="line">        &quot;MemoryDenyWriteExecute&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;MemoryHigh&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;MemoryLimit&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;MemoryLow&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;MemoryMax&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;MemorySwapMax&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;MountAPIVFS&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;MountFlags&quot;: &quot;&quot;,</span><br><span class="line">        &quot;NFileDescriptorStore&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;NRestarts&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;Names&quot;: &quot;vsftpd.service&quot;,</span><br><span class="line">        &quot;NeedDaemonReload&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Nice&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;NoNewPrivileges&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;NonBlocking&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;NotifyAccess&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;OOMScoreAdjust&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;OnFailureJobMode&quot;: &quot;replace&quot;,</span><br><span class="line">        &quot;PermissionsStartOnly&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Perpetual&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateDevices&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateMounts&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateNetwork&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateTmp&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;PrivateUsers&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectControlGroups&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectHome&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectKernelModules&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectKernelTunables&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;ProtectSystem&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RefuseManualStart&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RefuseManualStop&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RemainAfterExit&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RemoveIPC&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Requires&quot;: &quot;system.slice sysinit.target&quot;,</span><br><span class="line">        &quot;Restart&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RestartUSec&quot;: &quot;100ms&quot;,</span><br><span class="line">        &quot;RestrictNamespaces&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RestrictRealtime&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Result&quot;: &quot;success&quot;,</span><br><span class="line">        &quot;RootDirectoryStartOnly&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RuntimeDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;RuntimeDirectoryPreserve&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;RuntimeMaxUSec&quot;: &quot;infinity&quot;,</span><br><span class="line">        &quot;SameProcessGroup&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;SecureBits&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;SendSIGHUP&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;SendSIGKILL&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;Slice&quot;: &quot;system.slice&quot;,</span><br><span class="line">        &quot;StandardError&quot;: &quot;inherit&quot;,</span><br><span class="line">        &quot;StandardInput&quot;: &quot;null&quot;,</span><br><span class="line">        &quot;StandardInputData&quot;: &quot;&quot;,</span><br><span class="line">        &quot;StandardOutput&quot;: &quot;journal&quot;,</span><br><span class="line">        &quot;StartLimitAction&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;StartLimitBurst&quot;: &quot;5&quot;,</span><br><span class="line">        &quot;StartLimitIntervalUSec&quot;: &quot;10s&quot;,</span><br><span class="line">        &quot;StartupBlockIOWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;StartupCPUShares&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;StartupCPUWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;StartupIOWeight&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;StateChangeTimestamp&quot;: &quot;Fri 2019-10-18 04:13:19 EDT&quot;,</span><br><span class="line">        &quot;StateChangeTimestampMonotonic&quot;: &quot;89286681247&quot;,</span><br><span class="line">        &quot;StateDirectoryMode&quot;: &quot;0755&quot;,</span><br><span class="line">        &quot;StatusErrno&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;StopWhenUnneeded&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;SubState&quot;: &quot;running&quot;,</span><br><span class="line">        &quot;SuccessAction&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;SyslogFacility&quot;: &quot;3&quot;,</span><br><span class="line">        &quot;SyslogLevel&quot;: &quot;6&quot;,</span><br><span class="line">        &quot;SyslogLevelPrefix&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;SyslogPriority&quot;: &quot;30&quot;,</span><br><span class="line">        &quot;SystemCallErrorNumber&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;TTYReset&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;TTYVHangup&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;TTYVTDisallocate&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;TasksAccounting&quot;: &quot;yes&quot;,</span><br><span class="line">        &quot;TasksCurrent&quot;: &quot;1&quot;,</span><br><span class="line">        &quot;TasksMax&quot;: &quot;12386&quot;,</span><br><span class="line">        &quot;TimeoutStartUSec&quot;: &quot;1min 30s&quot;,</span><br><span class="line">        &quot;TimeoutStopUSec&quot;: &quot;1min 30s&quot;,</span><br><span class="line">        &quot;TimerSlackNSec&quot;: &quot;50000&quot;,</span><br><span class="line">        &quot;Transient&quot;: &quot;no&quot;,</span><br><span class="line">        &quot;Type&quot;: &quot;forking&quot;,</span><br><span class="line">        &quot;UID&quot;: &quot;[not set]&quot;,</span><br><span class="line">        &quot;UMask&quot;: &quot;0022&quot;,</span><br><span class="line">        &quot;UnitFilePreset&quot;: &quot;disabled&quot;,</span><br><span class="line">        &quot;UnitFileState&quot;: &quot;enabled&quot;,</span><br><span class="line">        &quot;UtmpMode&quot;: &quot;init&quot;,</span><br><span class="line">        &quot;WantedBy&quot;: &quot;multi-user.target&quot;,</span><br><span class="line">        &quot;WatchdogTimestamp&quot;: &quot;Fri 2019-10-18 04:13:19 EDT&quot;,</span><br><span class="line">        &quot;WatchdogTimestampMonotonic&quot;: &quot;89286681246&quot;,</span><br><span class="line">        &quot;WatchdogUSec&quot;: &quot;0&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-7"><a href="#二、学习视频-7" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=21">视频：service模块</a></p>
<h1 id="Ansible-setup模块"><a href="#Ansible-setup模块" class="headerlink" title="Ansible-setup模块"></a>Ansible-setup模块</h1><h2 id="一、setup模块"><a href="#一、setup模块" class="headerlink" title="一、setup模块"></a>一、setup模块</h2><p>setup模块用于收集远程主机的基本信息（如操作系统类型,主机名,ip,cpu信息,内存信息等）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#打印192.168.98.201机器的所有信息</span><br><span class="line">[root@manage01 ~]# ansible -m setup 192.168.98.201</span><br><span class="line"></span><br><span class="line">#使用filter过滤输出</span><br><span class="line">#打印192.168.98.201机器的CPU信息</span><br><span class="line">[root@manage01 ~]# ansible -m setup 192.168.98.201 -a &quot;filter=&#x27;ansible_processor&#x27;&quot;</span><br><span class="line">192.168.98.201 | SUCCESS =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;ansible_processor&quot;: [</span><br><span class="line">            &quot;0&quot;,</span><br><span class="line">            &quot;GenuineIntel&quot;,</span><br><span class="line">            &quot;Intel(R) Core(TM) i7-4870HQ CPU @ 2.50GHz&quot;,</span><br><span class="line">            &quot;1&quot;,</span><br><span class="line">            &quot;GenuineIntel&quot;,</span><br><span class="line">            &quot;Intel(R) Core(TM) i7-4870HQ CPU @ 2.50GHz&quot;,</span><br><span class="line">            &quot;2&quot;,</span><br><span class="line">            &quot;GenuineIntel&quot;,</span><br><span class="line">            &quot;Intel(R) Core(TM) i7-4870HQ CPU @ 2.50GHz&quot;,</span><br><span class="line">            &quot;3&quot;,</span><br><span class="line">            &quot;GenuineIntel&quot;,</span><br><span class="line">            &quot;Intel(R) Core(TM) i7-4870HQ CPU @ 2.50GHz&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: false</span><br><span class="line">&#125;</span><br><span class="line">#打印192.168.98.201机器的内核信息</span><br><span class="line">[root@manage01 ~]# ansible -m setup 192.168.98.201 -a &quot;filter=&#x27;ansible_kernel&#x27;&quot;</span><br><span class="line">192.168.98.201 | SUCCESS =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;ansible_kernel&quot;: &quot;4.18.0-80.el8.x86_64&quot;,</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: false</span><br><span class="line">&#125;</span><br><span class="line">#打印192.168.98.201机器的主机名</span><br><span class="line">[root@manage01 ~]#  ansible -m setup 192.168.98.201 -a &quot;filter=&#x27;ansible_hostname&#x27;&quot;</span><br><span class="line">192.168.98.201 | SUCCESS =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;ansible_hostname&quot;: &quot;node1&quot;,</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: false</span><br><span class="line">&#125;</span><br><span class="line">#打印192.168.98.201机器的网卡信息</span><br><span class="line">[root@manage01 ~]# ansible -m setup 192.168.98.201 -a &quot;filter=&#x27;ansible_ens*&#x27;&quot;</span><br><span class="line">192.168.98.201 | SUCCESS =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;ansible_ens33&quot;: &#123;</span><br><span class="line">            &quot;active&quot;: true,</span><br><span class="line">            &quot;device&quot;: &quot;ens33&quot;,</span><br><span class="line">            &quot;features&quot;: &#123;</span><br><span class="line">                &quot;esp_hw_offload&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;esp_tx_csum_hw_offload&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;fcoe_mtu&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;generic_receive_offload&quot;: &quot;on&quot;,</span><br><span class="line">                &quot;generic_segmentation_offload&quot;: &quot;on&quot;,</span><br><span class="line">                &quot;highdma&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;hw_tc_offload&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;l2_fwd_offload&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;large_receive_offload&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;loopback&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;netns_local&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;ntuple_filters&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;receive_hashing&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;rx_all&quot;: &quot;off&quot;,</span><br><span class="line">                &quot;rx_checksumming&quot;: &quot;off&quot;,</span><br><span class="line">                &quot;rx_fcs&quot;: &quot;off&quot;,</span><br><span class="line">                &quot;rx_gro_hw&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;rx_udp_tunnel_port_offload&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;rx_vlan_filter&quot;: &quot;on [fixed]&quot;,</span><br><span class="line">                &quot;rx_vlan_offload&quot;: &quot;on&quot;,</span><br><span class="line">                &quot;rx_vlan_stag_filter&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;rx_vlan_stag_hw_parse&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;scatter_gather&quot;: &quot;on&quot;,</span><br><span class="line">                &quot;tcp_segmentation_offload&quot;: &quot;on&quot;,</span><br><span class="line">                &quot;tls_hw_record&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tls_hw_tx_offload&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_checksum_fcoe_crc&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_checksum_ip_generic&quot;: &quot;on&quot;,</span><br><span class="line">                &quot;tx_checksum_ipv4&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_checksum_ipv6&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_checksum_sctp&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_checksumming&quot;: &quot;on&quot;,</span><br><span class="line">                &quot;tx_esp_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_fcoe_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_gre_csum_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_gre_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_gso_partial&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_gso_robust&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_ipxip4_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_ipxip6_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_lockless&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_nocache_copy&quot;: &quot;off&quot;,</span><br><span class="line">                &quot;tx_scatter_gather&quot;: &quot;on&quot;,</span><br><span class="line">                &quot;tx_scatter_gather_fraglist&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_sctp_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_tcp6_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_tcp_ecn_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_tcp_mangleid_segmentation&quot;: &quot;off&quot;,</span><br><span class="line">                &quot;tx_tcp_segmentation&quot;: &quot;on&quot;,</span><br><span class="line">                &quot;tx_udp_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_udp_tnl_csum_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_udp_tnl_segmentation&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;tx_vlan_offload&quot;: &quot;on [fixed]&quot;,</span><br><span class="line">                &quot;tx_vlan_stag_hw_insert&quot;: &quot;off [fixed]&quot;,</span><br><span class="line">                &quot;udp_fragmentation_offload&quot;: &quot;off&quot;,</span><br><span class="line">                &quot;vlan_challenged&quot;: &quot;off [fixed]&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;hw_timestamp_filters&quot;: [],</span><br><span class="line">            &quot;ipv4&quot;: &#123;</span><br><span class="line">                &quot;address&quot;: &quot;192.168.98.201&quot;,</span><br><span class="line">                &quot;broadcast&quot;: &quot;192.168.98.255&quot;,</span><br><span class="line">                &quot;netmask&quot;: &quot;255.255.255.0&quot;,</span><br><span class="line">                &quot;network&quot;: &quot;192.168.98.0&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;ipv6&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;address&quot;: &quot;fe80::357b:9443:2232:f0c0&quot;,</span><br><span class="line">                    &quot;prefix&quot;: &quot;64&quot;,</span><br><span class="line">                    &quot;scope&quot;: &quot;link&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            &quot;macaddress&quot;: &quot;00:0c:29:b8:d0:45&quot;,</span><br><span class="line">            &quot;module&quot;: &quot;e1000&quot;,</span><br><span class="line">            &quot;mtu&quot;: 1500,</span><br><span class="line">            &quot;pciid&quot;: &quot;0000:02:01.0&quot;,</span><br><span class="line">            &quot;promisc&quot;: false,</span><br><span class="line">            &quot;speed&quot;: 1000,</span><br><span class="line">            &quot;timestamping&quot;: [</span><br><span class="line">                &quot;tx_software&quot;,</span><br><span class="line">                &quot;rx_software&quot;,</span><br><span class="line">                &quot;software&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;type&quot;: &quot;ether&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">其它常见的过滤条件</span><br><span class="line">ansible_all_ipv4_addresses：显示ipv4的信息。</span><br><span class="line">ansible_devices：显示磁盘设备信息。</span><br><span class="line">ansible_distribution_major_version：显示是系统主版本。</span><br><span class="line">ansible_distribution_version：仅显示系统版本。</span><br><span class="line">ansible_machine：显示系统类型，例：32位，还是64位。</span><br><span class="line">ansible_lvm：显示lvm相关信息。</span><br><span class="line">ansible_memtotal_mb：显示系统总内存。</span><br><span class="line">ansible_memfree_mb：显示可用系统内存。</span><br><span class="line">ansible_memory_mb：详细显示内存情况。</span><br><span class="line">ansible_swaptotal_mb：显示总的swap内存。</span><br><span class="line">ansible_swapfree_mb：显示swap内存的可用内存。</span><br><span class="line">ansible_mounts：显示系统磁盘挂载情况。</span><br><span class="line">ansible_processor：显示cpu个数(具体显示每个cpu的型号)。</span><br><span class="line">ansible_processor_vcpus：显示cpu个数(只显示总的个数)。</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-8"><a href="#二、学习视频-8" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=24">视频：setup模块</a></p>
<h1 id="Ansible-stat模块"><a href="#Ansible-stat模块" class="headerlink" title="Ansible-stat模块"></a>Ansible-stat模块</h1><h2 id="一、stat模块"><a href="#一、stat模块" class="headerlink" title="一、stat模块"></a>一、stat模块</h2><p>stat模块类似linux的stat命令，用于获取文件的状态信息。</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/stat_module.html#stat-module">https://docs.ansible.com/ansible/latest/modules/stat_module.html#stat-module</a></p>
<p>获取&#x2F;etc&#x2F;fstab文件的状态信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]#  ansible -m stat 192.168.98.201 -a &quot;path=/etc/fstab&quot;</span><br><span class="line">192.168.98.201 | SUCCESS =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: false,</span><br><span class="line">    &quot;stat&quot;: &#123;</span><br><span class="line">        &quot;atime&quot;: 1571386074.1020715,</span><br><span class="line">        &quot;attr_flags&quot;: &quot;&quot;,</span><br><span class="line">        &quot;attributes&quot;: [],</span><br><span class="line">        &quot;block_size&quot;: 4096,</span><br><span class="line">        &quot;blocks&quot;: 8,</span><br><span class="line">        &quot;charset&quot;: &quot;us-ascii&quot;,</span><br><span class="line">        &quot;checksum&quot;: &quot;554e387b5bde93c05baa689312e9a8db5579629e&quot;,</span><br><span class="line">        &quot;ctime&quot;: 1570636725.1020045,</span><br><span class="line">        &quot;dev&quot;: 64768,</span><br><span class="line">        &quot;device_type&quot;: 0,</span><br><span class="line">        &quot;executable&quot;: false,</span><br><span class="line">        &quot;exists&quot;: true,</span><br><span class="line">        &quot;gid&quot;: 0,</span><br><span class="line">        &quot;gr_name&quot;: &quot;root&quot;,</span><br><span class="line">        &quot;inode&quot;: 16777347,</span><br><span class="line">        &quot;isblk&quot;: false,</span><br><span class="line">        &quot;ischr&quot;: false,</span><br><span class="line">        &quot;isdir&quot;: false,</span><br><span class="line">        &quot;isfifo&quot;: false,</span><br><span class="line">        &quot;isgid&quot;: false,</span><br><span class="line">        &quot;islnk&quot;: false,</span><br><span class="line">        &quot;isreg&quot;: true,</span><br><span class="line">        &quot;issock&quot;: false,</span><br><span class="line">        &quot;isuid&quot;: false,</span><br><span class="line">        &quot;mimetype&quot;: &quot;text/plain&quot;,</span><br><span class="line">        &quot;mode&quot;: &quot;0644&quot;,</span><br><span class="line">        &quot;mtime&quot;: 1570636308.3990006,</span><br><span class="line">        &quot;nlink&quot;: 1,</span><br><span class="line">        &quot;path&quot;: &quot;/etc/fstab&quot;,</span><br><span class="line">        &quot;pw_name&quot;: &quot;root&quot;,</span><br><span class="line">        &quot;readable&quot;: true,</span><br><span class="line">        &quot;rgrp&quot;: true,</span><br><span class="line">        &quot;roth&quot;: true,</span><br><span class="line">        &quot;rusr&quot;: true,</span><br><span class="line">        &quot;size&quot;: 579,</span><br><span class="line">        &quot;uid&quot;: 0,</span><br><span class="line">        &quot;version&quot;: &quot;1364475400&quot;,</span><br><span class="line">        &quot;wgrp&quot;: false,</span><br><span class="line">        &quot;woth&quot;: false,</span><br><span class="line">        &quot;writeable&quot;: true,</span><br><span class="line">        &quot;wusr&quot;: true,</span><br><span class="line">        &quot;xgrp&quot;: false,</span><br><span class="line">        &quot;xoth&quot;: false,</span><br><span class="line">        &quot;xusr&quot;: false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-9"><a href="#二、学习视频-9" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=25">视频：ansible常用模块知识图谱</a></p>
<h1 id="Ansible-user模块"><a href="#Ansible-user模块" class="headerlink" title="Ansible-user模块"></a>Ansible-user模块</h1><h2 id="一、user模块"><a href="#一、user模块" class="headerlink" title="一、user模块"></a>一、user模块</h2><p>user模块用于管理用户账号和用户属性</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/user_module.html#user-module">https://docs.ansible.com/ansible/latest/modules/user_module.html#user-module</a></p>
<table>
<thead>
<tr>
<th>常用参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name&#x3D;””</td>
<td>指定用户名</td>
</tr>
<tr>
<td>password&#x3D;””</td>
<td>指定密码,必须是密文</td>
</tr>
<tr>
<td>state&#x3D; absent|present</td>
<td>删除|创建</td>
</tr>
<tr>
<td>system&#x3D; yes|no</td>
<td>是否为系统用户</td>
</tr>
<tr>
<td>shell&#x3D;””</td>
<td>指定登陆shell</td>
</tr>
<tr>
<td>generate_ssh_key&#x3D; yes|no</td>
<td>是否创建秘钥对</td>
</tr>
<tr>
<td>uid&#x3D;</td>
<td>指定用户的uid</td>
</tr>
<tr>
<td>append&#x3D; yes|no</td>
<td>用户是否追加到其他组</td>
</tr>
<tr>
<td>group&#x3D;</td>
<td>用户属组</td>
</tr>
<tr>
<td>groups&#x3D;</td>
<td>将现有用户加入到某个组，空值就会把该用户从所有所属组中删除</td>
</tr>
<tr>
<td>create_home&#x3D; yes|no</td>
<td>是否建立家目录</td>
</tr>
<tr>
<td>remove&#x3D; yes|no</td>
<td>删除家目录</td>
</tr>
</tbody></table>
<p><strong>创建一个用户sky，密码是123</strong></p>
<p><strong>要求是系统用户</strong></p>
<p><strong>非交互式登陆</strong></p>
<p><strong>要求生成自己的秘钥对</strong></p>
<p><strong>不创建家目录</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#密码必须是密文，所以先要把明文转换一下，生成md5密文</span><br><span class="line">[root@manage01 ~]# echo 123|openssl passwd -1 -stdin</span><br><span class="line">$1$5V.qzSEd$Yr08MU8K.vXeBZcmavypk1</span><br><span class="line">[root@manage01 ~]# ansible -m user group1 -a &#x27;name=sky password=&quot;$1$5V.qzSEd$Yr08MU8K.vXeBZcmavypk1&quot; state=present system=yes shell=/sbin/nologin generate_ssh_key=yes&#x27;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;comment&quot;: &quot;&quot;,</span><br><span class="line">    &quot;create_home&quot;: true,</span><br><span class="line">    &quot;group&quot;: 991,</span><br><span class="line">    &quot;home&quot;: &quot;/home/sky&quot;,</span><br><span class="line">    &quot;name&quot;: &quot;sky&quot;,</span><br><span class="line">    &quot;password&quot;: &quot;NOT_LOGGING_PASSWORD&quot;,</span><br><span class="line">    &quot;shell&quot;: &quot;/sbin/nologin&quot;,</span><br><span class="line">    &quot;ssh_fingerprint&quot;: &quot;2048 SHA256:b2umG0XfPW0cGAFBFDBNBNbtgaY+s1X4cM334JCGGOo ansible-generated on node3 (RSA)&quot;,</span><br><span class="line">    &quot;ssh_key_file&quot;: &quot;/home/sky/.ssh/id_rsa&quot;,</span><br><span class="line">    &quot;ssh_public_key&quot;: &quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDIvVcTDxT4GotFYolpPPJUS2XYEmgaxCj/YLXfW2vllXJSfa3TwBLN6kJnPBabVFSYCiGRzci28f/rx4chm9TuVsNx6TozzUpolD+T3vzO/rcLdaIEzw+JYXGtqpaTapuuhm6pdQBx04TLmO3pVWBCdbJum0paMIXwPDcGPGz6JwGXWTdA5AXfvWmOZ5ChwwLDUau84R47FHfj9EisclYM3Yt3WfcVp+waSd23BBRj86jh+veL9BR7OnDmmj7YZkOxAqnU/TjuOW1uiGCB91Flgku7fPR3jmbXXrd+Ql9vWlGe22+xgYYjT4KVzlHAr3lE/HZQu49Vz/N78ZnJ1rX3 ansible-generated on node3&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;present&quot;,</span><br><span class="line">    &quot;system&quot;: true,</span><br><span class="line">    &quot;uid&quot;: 994</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;comment&quot;: &quot;&quot;,</span><br><span class="line">    &quot;create_home&quot;: true,</span><br><span class="line">    &quot;group&quot;: 974,</span><br><span class="line">    &quot;home&quot;: &quot;/home/sky&quot;,</span><br><span class="line">    &quot;name&quot;: &quot;sky&quot;,</span><br><span class="line">    &quot;password&quot;: &quot;NOT_LOGGING_PASSWORD&quot;,</span><br><span class="line">    &quot;shell&quot;: &quot;/sbin/nologin&quot;,</span><br><span class="line">    &quot;ssh_fingerprint&quot;: &quot;2048 SHA256:D2ZhPJV9bdFMtf7EBo3Y5w023xqxDppZxqoe5Z3NVus ansible-generated on node1 (RSA)&quot;,</span><br><span class="line">    &quot;ssh_key_file&quot;: &quot;/home/sky/.ssh/id_rsa&quot;,</span><br><span class="line">    &quot;ssh_public_key&quot;: &quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQD1swS5MAox4o2f3rxe9TPz+AFDnB5Jt+X6Yygpphfetfds37SHSP5K4QcAd1SO6OlHopB3x9FQklS3z6C4bfz5trbK/PR9RCzkkzLamC5BKhNXEV2ozj1m2J/F10umZLSvd3ElEJubkyzV383x7sVi5VtQycemoDLiJiWjHTEcKu/I0bSCliODe57nqgM9+5V+nfeih56Vs+vhTGIxqZ/6FZXKGM9iDiI8VokUlMjhOJz5MuFRr4XsgBvtGNyu/bCbjr8QPdDNX/Wl8IZDjLJNHDno8ixc7Bp6ME2hEr9pnpe+DuKJmsAwl+A52E7eAlm/0pp573mZ4ObHRTQwdgQT ansible-generated on node1&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;present&quot;,</span><br><span class="line">    &quot;system&quot;: true,</span><br><span class="line">    &quot;uid&quot;: 976</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;comment&quot;: &quot;&quot;,</span><br><span class="line">    &quot;create_home&quot;: true,</span><br><span class="line">    &quot;group&quot;: 975,</span><br><span class="line">    &quot;home&quot;: &quot;/home/sky&quot;,</span><br><span class="line">    &quot;name&quot;: &quot;sky&quot;,</span><br><span class="line">    &quot;password&quot;: &quot;NOT_LOGGING_PASSWORD&quot;,</span><br><span class="line">    &quot;shell&quot;: &quot;/sbin/nologin&quot;,</span><br><span class="line">    &quot;ssh_fingerprint&quot;: &quot;2048 SHA256:/VBzZUWcHnLOpMNxq9OXIwD/5IkI9r7smp50s6lByZs ansible-generated on node2 (RSA)&quot;,</span><br><span class="line">    &quot;ssh_key_file&quot;: &quot;/home/sky/.ssh/id_rsa&quot;,</span><br><span class="line">    &quot;ssh_public_key&quot;: &quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDT/+8y3omHiWSOS9dX1AYcADRp7ZUszOBqZV0/77TZ7mV5X1/T+cdZrsnwAiNbXosjDQjKj0qtIJQR3rLuCv08DV6gjlP4bzDodSekfh1mbGu9EkDu0HD+qmW0/y5Mb4lJbBCMHCVJFrwBnH2+AfVezTVgcf4NHh4zJvASnSfmecmyfFEDEVZIozd0z8hw8NcgcYn8MeDrMhVN+y3xj0IXKwg6E0NindBuxkMYbwehcQo6Sscx9YdCv05SXVU+FjyPOQNzZZUQkmp+5GDy1dib1m5GJ5yIf8IzOh1FISoKz8/FqORRIEp55NRgrGw3ZU/weK0RL9SkXhUc29gcN1ON ansible-generated on node2&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;present&quot;,</span><br><span class="line">    &quot;system&quot;: true,</span><br><span class="line">    &quot;uid&quot;: 977</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">创建用户baishuming  密码为123456</span><br><span class="line">[root@manage01 ~]# echo &quot;123456&quot;|openssl passwd -1 -stdin</span><br><span class="line">$1$BMPgiHeV$GskMFnvqBL17gTe/us5yK.</span><br><span class="line">[root@manage01 ~]# ansible -m user group1 -a &#x27;name=baishuming password=&quot;$1$BMPgiHeV$GskMFnvqBL17gTe/us5yK.&quot; uid=4423&#x27;</span><br><span class="line"></span><br><span class="line">不创建家目录</span><br><span class="line">[root@manage01 ~]# ansible -m user 192.168.98.201 -a &quot;name=baism create_home=no&quot;</span><br><span class="line"></span><br><span class="line">要求属组为root</span><br><span class="line">附加组为sko</span><br></pre></td></tr></table></figure>

<p>用户删除</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m user 192.168.98.201 -a &quot;name=baishuming1 state=absent remove=yes&quot;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/bin/python&quot;</span><br><span class="line">    &#125;, </span><br><span class="line">    &quot;changed&quot;: true, </span><br><span class="line">    &quot;force&quot;: false, </span><br><span class="line">    &quot;name&quot;: &quot;baishuming1&quot;, </span><br><span class="line">    &quot;remove&quot;: true, </span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-10"><a href="#二、学习视频-10" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=16">视频：user模块</a></p>
<h1 id="Ansible-yum-repository模块"><a href="#Ansible-yum-repository模块" class="headerlink" title="Ansible-yum_repository模块"></a>Ansible-yum_repository模块</h1><h2 id="一、yum-repository模块"><a href="#一、yum-repository模块" class="headerlink" title="一、yum_repository模块"></a>一、yum_repository模块</h2><p>yum_repository模块用于配置yum仓库。</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/yum_repository_module.html">https://docs.ansible.com/ansible/latest/modules/yum_repository_module.html</a></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>仓库名 name.repo 源的名称 [name]</td>
</tr>
<tr>
<td>description</td>
<td>描述</td>
</tr>
<tr>
<td>baseurl</td>
<td>包下载路径</td>
</tr>
<tr>
<td>gpgcheck&#x3D; 1 or 0</td>
<td>包gpg验证</td>
</tr>
<tr>
<td>enabled &#x3D; yes|no</td>
<td>是否开启本源</td>
</tr>
<tr>
<td>state&#x3D; absent</td>
<td>删除源</td>
</tr>
</tbody></table>
<p>增加一个&#x2F;etc&#x2F;yum.repos.d&#x2F;dvd.repo配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m yum_repository group1 -a &quot;name=dvd description=BaseOS baseurl=file:///mnt/BaseOS gpgcheck=0 enabled=yes&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;repo&quot;: &quot;dvd&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;present&quot;</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;repo&quot;: &quot;dvd&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;present&quot;</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;repo&quot;: &quot;dvd&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;present&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>删除某个yum源</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m yum_repository group1 -a &quot;name=dvd state=absent&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;repo&quot;: &quot;dvd&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;repo&quot;: &quot;dvd&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;repo&quot;: &quot;dvd&quot;,</span><br><span class="line">    &quot;state&quot;: &quot;absent&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-11"><a href="#二、学习视频-11" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=19">视频：yum_repository模块</a></p>
<h1 id="Ansible-yum模块"><a href="#Ansible-yum模块" class="headerlink" title="Ansible-yum模块"></a>Ansible-yum模块</h1><h2 id="一、yum模块"><a href="#一、yum模块" class="headerlink" title="一、yum模块"></a>一、yum模块</h2><p>yum模块用于使用yum命令来实现软件包的安装与卸载。</p>
<p><a href="https://docs.ansible.com/ansible/latest/modules/yum_module.html#yum-module">https://docs.ansible.com/ansible/latest/modules/yum_module.html#yum-module</a></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>需要安装软件包的名称</td>
</tr>
<tr>
<td>list&#x3D; installed, updates, available and repos</td>
<td>列出已安装 需要更新 可获得的 和 yum源</td>
</tr>
<tr>
<td>state&#x3D; absent removed installed present latest</td>
<td>删除、删除、安装确认、安装确认、安装最新版本</td>
</tr>
</tbody></table>
<p>list:列出包信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m yum group1 -a &quot;list=repos&quot;</span><br><span class="line">192.168.98.201 | FAILED! =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: false,</span><br><span class="line">    &quot;msg&quot;: &quot;同步仓库 &#x27;dvd&#x27; 缓存失败&quot;,</span><br><span class="line">    &quot;rc&quot;: 1,</span><br><span class="line">    &quot;results&quot;: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">原因就是源不好用，这里是cdrom没有挂载光盘</span><br></pre></td></tr></table></figure>

<p>使用yum安装一个软件（前提:group1的机器上的yum配置都已经OK）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# ansible -m yum group1 -a &quot;name=vsftpd&quot;</span><br><span class="line">192.168.98.203 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;msg&quot;: &quot;&quot;,</span><br><span class="line">    &quot;rc&quot;: 0,</span><br><span class="line">    &quot;results&quot;: [</span><br><span class="line">        &quot;Installed: vsftpd&quot;,</span><br><span class="line">        &quot;Installed: vsftpd-3.0.3-28.el8.x86_64&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.202 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;msg&quot;: &quot;&quot;,</span><br><span class="line">    &quot;rc&quot;: 0,</span><br><span class="line">    &quot;results&quot;: [</span><br><span class="line">        &quot;Installed: vsftpd&quot;,</span><br><span class="line">        &quot;Installed: vsftpd-3.0.3-28.el8.x86_64&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;msg&quot;: &quot;&quot;,</span><br><span class="line">    &quot;rc&quot;: 0,</span><br><span class="line">    &quot;results&quot;: [</span><br><span class="line">        &quot;Installed: vsftpd&quot;,</span><br><span class="line">        &quot;Installed: vsftpd-3.0.3-28.el8.x86_64&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>删除软件包</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]#  ansible -m yum 192.168.98.201 -a &quot;state=absent name=vsftpd&quot;</span><br><span class="line">192.168.98.201 | CHANGED =&gt; &#123;</span><br><span class="line">    &quot;ansible_facts&quot;: &#123;</span><br><span class="line">        &quot;discovered_interpreter_python&quot;: &quot;/usr/libexec/platform-python&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;changed&quot;: true,</span><br><span class="line">    &quot;msg&quot;: &quot;&quot;,</span><br><span class="line">    &quot;rc&quot;: 0,</span><br><span class="line">    &quot;results&quot;: [</span><br><span class="line">        &quot;Removed: vsftpd-3.0.3-28.el8.x86_64&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、学习视频-12"><a href="#二、学习视频-12" class="headerlink" title="二、学习视频"></a>二、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=20">视频：yum模块</a></p>
<h1 id="Ansible命令用法"><a href="#Ansible命令用法" class="headerlink" title="Ansible命令用法"></a>Ansible命令用法</h1><p>ansible是基于模块工作的，本身没有批量部署的能力。真正具有批量部署的是ansible所运行的模块，ansible只是提供一种框架。</p>
<p>ansible支持的模块非常的多，我们并不需要把每个模块都记住，而只需要熟悉一些常见的模块，其它的模块在需要用到时再查询即可。</p>
<h2 id="一、ansible命令用法"><a href="#一、ansible命令用法" class="headerlink" title="一、ansible命令用法"></a>一、ansible命令用法</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ansible 机器  -m 模块名称 -a &#x27;模块参数&#x27;</span><br><span class="line">基本格式为: ansible 操作的机器名或组名 -m 模块名 -a &quot;参数1=值1 参数2=值2&quot;</span><br></pre></td></tr></table></figure>

<p><strong>查看所有支持的模块</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ansible-doc -l		</span><br><span class="line">a10_server                                           Manage A10 Networks AX/SoftAX...</span><br><span class="line">a10_server_axapi3                                    Manage A10 Networks AX/SoftAX...</span><br><span class="line">a10_service_group                                    Manage A10 Networks AX/SoftAX...</span><br><span class="line">a10_virtual_server                                   Manage A10 Networks AX/SoftAX...</span><br><span class="line">aci_aaa_user                                         Manage AAA users (aaa:User)</span><br><span class="line">.......</span><br><span class="line"></span><br><span class="line">如果要查看ping模块的用法，使用下面命令（其它模块以此类推)</span><br><span class="line"># ansible-doc ping</span><br></pre></td></tr></table></figure>

<p>官网模块文档地址: <a href="https://docs.ansible.com/ansible/latest/modules/list_of_all_modules.html">https://docs.ansible.com/ansible/latest/modules/list_of_all_modules.html</a></p>
<h2 id="二、ansible常见模块"><a href="#二、ansible常见模块" class="headerlink" title="二、ansible常见模块"></a>二、ansible常见模块</h2><ul>
<li>hostname模块</li>
<li>file模块</li>
<li>copy模块</li>
<li>fetch模块</li>
<li>user模块</li>
<li>group模块</li>
<li>cron模块</li>
<li>yum_repository模块</li>
<li>yum模块</li>
<li>service模块</li>
<li>script模块</li>
<li>command模块</li>
<li>shell模块</li>
<li>setup模块</li>
<li>stat模块</li>
</ul>
<h2 id="三、学习视频-1"><a href="#三、学习视频-1" class="headerlink" title="三、学习视频"></a>三、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM?p=11">视频：ansible 命令语法与常见模块介绍</a></p>
<h1 id="Ansible运维自动化平台初识"><a href="#Ansible运维自动化平台初识" class="headerlink" title="Ansible运维自动化平台初识"></a>Ansible运维自动化平台初识</h1><h2 id="一、运维自动化平台介绍"><a href="#一、运维自动化平台介绍" class="headerlink" title="一、运维自动化平台介绍"></a>一、运维自动化平台介绍</h2><h3 id="1-1、自动化运维平台介绍"><a href="#1-1、自动化运维平台介绍" class="headerlink" title="1.1、自动化运维平台介绍"></a>1.1、自动化运维平台介绍</h3><p>运维自动化平台是由管理机器[S]和业务机器[C]组成的,C&#x2F;S。</p>
<p>管理机器：任务定制及发布；</p>
<p>业务机器：接收任务并执行任务。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/6/1601965978453.png" alt="运维自动化平台组成.png"></p>
<h3 id="1-2、运维自动化平台的优势："><a href="#1-2、运维自动化平台的优势：" class="headerlink" title="1.2、运维自动化平台的优势："></a>1.2、运维自动化平台的优势：</h3><ul>
<li>一次性任务定制：任务一次性发布给所有机器</li>
<li>节省任务执行时间：任务主机并发完成任务，节省部署时间</li>
<li>错误率低：避免重复，保证一次任务定制准确即可</li>
</ul>
<h2 id="二、常见的自动化运维工具"><a href="#二、常见的自动化运维工具" class="headerlink" title="二、常见的自动化运维工具"></a>二、常见的自动化运维工具</h2><h3 id="2-1、常见的运维自动化工具"><a href="#2-1、常见的运维自动化工具" class="headerlink" title="2.1、常见的运维自动化工具"></a>2.1、常见的运维自动化工具</h3><ul>
<li><strong>Puppet</strong></li>
<li><strong>Ansible</strong></li>
<li><strong>SaltStack</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">puppet：</span><br><span class="line">基于Ruby开发，有产品线已经在用，优点是历史悠久，比较成熟，在可远程可本地，功能强劲，批量执行需要写专门的配置文件，费力费时。而且有客户端在，和授权系统结合比较麻烦。</span><br><span class="line"></span><br><span class="line">saltstack:</span><br><span class="line">saltstack和ansible都是python流的，而且就功能上来讲，两者也极为相似，不同之处是salt stack是有客户端的，并且execution模块还用0MQ实现了pub-sub，命令和执行结果因此可以高效并行传输，不过成也萧何败也萧何，第一个sub阶段（将querystring下发到所有机器，然后收集机器响应的阶段）太依赖与客户端返回了，如果客户端未能及时返回或未响应的话，playbook执行阶段可能会直接漏掉这部分机器而没有任何提示，这对于运维来说是不可接受的。</span><br><span class="line"></span><br><span class="line">ansible:</span><br><span class="line">与前两者比起来，在特性上似乎并不抢眼，配置管理方面（playbook）绝对比不过老大哥puppet，批量执行方面也只是多线程，不像saltstack那么高大上，不过ansible搜索热度高出saltstack三倍多，显然靠的不是吹牛，至少，ansible至少不会悄悄的丢机器，这给了我们一个定心丸，而且仅依赖ssh，与登录授权管理系统天然集成，简单即有效，没有比这更美妙的事情了。</span><br></pre></td></tr></table></figure>

<h3 id="2-2、ansible介绍"><a href="#2-2、ansible介绍" class="headerlink" title="2.2、ansible介绍"></a>2.2、ansible介绍</h3><p>ansible是一种由Python开发的自动化运维工具，集合了众多运维工具（puppet、cfengine、chef、func、fabric）的优点，实现了批量系统配置、批量程序部署、批量运行命令等功能。<strong>ansible是基于模块工作的，本身没有批量部署的能力</strong>。<strong>真正具有批量部署的是ansible所运行的模块，ansible只是提供一种框架</strong>。主要包括：</p>
<ol>
<li>连接插件connection plugins：负责和被监控端实现通信；<strong>ansible管理端和客户端基于ssh协议通信</strong></li>
<li>host inventory：指定操作的主机，是一个配置文件里面定义监控的主机；<strong>提供主机管理列表，定义管理谁</strong></li>
<li>各种模块核心模块、command模块、自定义模块；<strong>提供了日常模块</strong></li>
<li>借助于插件完成记录日志邮件等功能； <strong>根据需求后续添加模块，邮件、日志模块</strong></li>
<li>playbook：剧本执行多个任务时，非必需可以让节点一次性运行多个任务。<strong>一次发布多条指令给客户端</strong></li>
</ol>
<p><strong>特性</strong></p>
<ol>
<li>no agents：不需要在被管控主机上安装任何客户端；</li>
<li>no server：无服务器端，使用时直接运行命令即可；</li>
<li>modules in any languages：基于模块工作，可使用任意语言开发模块；</li>
<li>yaml，not code：使用yaml语言定制剧本playbook；</li>
<li>ssh by default：基于SSH工作；</li>
<li>strong multi-tier solution：可实现多级指挥。</li>
</ol>
<p><strong>优点</strong></p>
<ol>
<li>轻量级，无需在客户端安装agent，更新时，只需在操作机上进行一次更新即可；</li>
<li>批量任务执行可以写成脚本，而且不用分发到远程就可以执行；</li>
<li>使用python编写，维护更简单，ruby语法过于复杂；</li>
<li>支持sudo</li>
</ol>
<p><strong>基本架构</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/6/1601966026674.png" alt="ansible3.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">· 核心引擎：即ansible</span><br><span class="line">· 核心模块（core modules）：这些都是ansible自带的模块，ansible模块资源分发到远程节点使其执行特定任务或匹配一个特定的状态。</span><br><span class="line">· 自定义模块（custom modules）：如果核心模块不足以完成某种功能，可以添加自定义模块。</span><br><span class="line">· 插件（plugins）：完成模块功能的补充，借助于插件完成记录日志、邮件等功能</span><br><span class="line">· 剧本（playbook）：定义ansible任务的配置文件，可以将多个任务定义在一个剧本中，由ansible自动执行，剧本执行支持多个任务，可以由控制主机运行多个任务，同时对多台远程主机进行管理。</span><br><span class="line">· playbook是ansible的配置、部署和编排语言，可以描述一个你想要的远程系统执行策略，或一组步骤的一般过程。如果ansible模块作为你的工作室工具，playbook就是设计方案。在基本层面上，剧本可以用于管理配置和部署远程机器。在更高级的应用中，可以序列多层应用及滚动更新，并可以把动作委托给其他主机，与监控服务器和负载平衡器交互。</span><br><span class="line">· 连接插件（connection plugins）：ansible基于连接插件连接到各个主机上，负责和被管理节点实现通信。虽然ansible是使用ssh连接到各被管理节点，但它还支持其他的连接方法，所以需要有连接插件。</span><br><span class="line">· 主机清单（host inventory）：定义ansible管理的主机策略，默认是在ansible的hosts配置文件中定义被管节点，同时也支持自定义动态主机清单和指定配置文件路径。</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>ansible采用paramiko协议库（Fabric也使用这个，基于python开发，支持SSHV2），通过ssh或者ZeroMQ等连接主机。ansible在控制主机主机将ansible模块通过ssh协议（或者Kerberos、LDAP）推送到被管节点执行，执行完之后自动删除。控制主机与被管理节点之间支持local、SSH、ZeroMQ三种连接方式，默认使用基于SSH的连接。在规模较大的情况下使用ZeroMQ连接方式会明显改善执行速度。</p>
<h2 id="三、ansible运行原理"><a href="#三、ansible运行原理" class="headerlink" title="三、ansible运行原理"></a>三、ansible运行原理</h2><p>ansible是如何工作的呢？我们通过一个图片来说明一下</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/6/1601966060853.png" alt="ansible工作原理1132928.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">工作原理：</span><br><span class="line">1、用户登录管理机器：通过ansible剧本或者单行命令针对业务机器组或者单个机器部署任务</span><br><span class="line"></span><br><span class="line">2、管理机器读取用户的部署任务：根据自己hosts文件中定义的业务机器组查找对应的机器地址(ip或者域名)</span><br><span class="line"></span><br><span class="line">3、管理机下发任务：管理机通过ssh免密连接业务机器，下发任务给业务机器</span><br><span class="line"></span><br><span class="line">4、业务机器执行任务</span><br><span class="line"></span><br><span class="line">5、业务机器将执行结果发送给ansible管理机器</span><br><span class="line">	反馈字体颜色</span><br><span class="line">	绿色  未发生变化</span><br><span class="line">	黄色  更改生效</span><br><span class="line">	红色  执行错误</span><br></pre></td></tr></table></figure>

<h2 id="四、学习视频"><a href="#四、学习视频" class="headerlink" title="四、学习视频"></a>四、学习视频</h2><p><a href="https://www.bilibili.com/video/BV19J41167sM/">视频：ansible课程介绍</a><br><a href="https://www.bilibili.com/video/BV19J41167sM?p=2">视频：自动化运维平台课程介绍</a><br><a href="https://www.bilibili.com/video/BV19J41167sM?p=3">视频：自动化运维平台介绍</a><br><a href="https://www.bilibili.com/video/BV19J41167sM?p=4">视频：ansible介绍</a><br><a href="https://www.bilibili.com/video/BV19J41167sM?p=5">视频：ansible工作原理</a></p>
<h1 id="Ansible自动化运维平台部署"><a href="#Ansible自动化运维平台部署" class="headerlink" title="Ansible自动化运维平台部署"></a>Ansible自动化运维平台部署</h1><h2 id="一、部署前准备"><a href="#一、部署前准备" class="headerlink" title="一、部署前准备"></a>一、部署前准备</h2><ul>
<li>部署机器准备</li>
<li>计算机名解析</li>
<li>关闭防火墙、selinux</li>
<li>时间同步</li>
<li>软件包获得</li>
<li>ssh免密登陆</li>
</ul>
<p><strong>约定事项：</strong></p>
<ol>
<li><p>所有服务器全部采用静态ip</p>
<table>
<thead>
<tr>
<th>主机名称</th>
<th>IP地址</th>
</tr>
</thead>
<tbody><tr>
<td>manage01</td>
<td>192.168.98.200&#x2F;24</td>
</tr>
<tr>
<td>node1</td>
<td>192.168.98.201&#x2F;24</td>
</tr>
<tr>
<td>node2</td>
<td>192.168.98.202&#x2F;24</td>
</tr>
<tr>
<td>node3</td>
<td>192.168.98.203&#x2F;24</td>
</tr>
</tbody></table>
</li>
<li><p>主机名及主机名互相绑定</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# cat /etc/hosts</span><br><span class="line">127.0.0.1   localhost</span><br><span class="line">::1         localhost </span><br><span class="line">192.168.98.200	manage01</span><br><span class="line">192.168.98.201	node1</span><br><span class="line">192.168.98.202	node2</span><br><span class="line">192.168.98.203	node3</span><br><span class="line"></span><br><span class="line">其他机器同理</span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭防火墙, selinux</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# systemctl disable firewalld</span><br><span class="line">[root@manage01 ~]# sed -i -r &#x27;/SELINUX=/c\SELINUX=disabled&#x27; /etc/selinux/config</span><br><span class="line">[root@manage01 ~]# reboot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">其他机器同理</span><br></pre></td></tr></table></figure>
</li>
<li><p>采用时间服务器，时间同步</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、修改配置文件，配置时间服务器为阿里云的时间服务器</span><br><span class="line">[root@manage01 ~]# egrep &quot;^server&quot; /etc/chrony.conf </span><br><span class="line">server ntp1.aliyun.com</span><br><span class="line">server ntp2.aliyun.com</span><br><span class="line">server ntp3.aliyun.com</span><br><span class="line">server ntp4.aliyun.com</span><br><span class="line"></span><br><span class="line">#注释</span><br><span class="line"># pool 2.centos.pool.ntp.org iburst</span><br><span class="line"></span><br><span class="line">2、重启服务chronyd</span><br><span class="line">[root@manage01 ~]# systemctl restart chronyd.service </span><br><span class="line"></span><br><span class="line">3、查看源信息</span><br><span class="line">#chronyc chrony的命令行客户端</span><br><span class="line">[root@manage01 ~]# chronyc sources -v</span><br><span class="line">210 Number of sources = 2</span><br><span class="line"></span><br><span class="line">  .-- Source mode  &#x27;^&#x27; = server, &#x27;=&#x27; = peer, &#x27;#&#x27; = local clock.</span><br><span class="line"> / .- Source state &#x27;*&#x27; = current synced, &#x27;+&#x27; = combined , &#x27;-&#x27; = not combined,</span><br><span class="line">| /   &#x27;?&#x27; = unreachable, &#x27;x&#x27; = time may be in error, &#x27;~&#x27; = time too variable.</span><br><span class="line">||                                                 .- xxxx [ yyyy ] +/- zzzz</span><br><span class="line">||      Reachability register (octal) -.           |  xxxx = adjusted offset,</span><br><span class="line">||      Log2(Polling interval) --.      |          |  yyyy = measured offset,</span><br><span class="line">||                                \     |          |  zzzz = estimated error.</span><br><span class="line">||                                 |    |           \</span><br><span class="line">MS Name/IP address         Stratum Poll Reach LastRx Last sample               </span><br><span class="line">===============================================================================</span><br><span class="line">^? 120.25.115.20                 2   6     1     3   +663us[ +663us] +/-   23ms</span><br><span class="line">^? 203.107.6.88                  2   6     1     2  -1326us[-1326us] +/-   17ms</span><br></pre></td></tr></table></figure>
</li>
<li><p>确认和配置yum源(需要epel源)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# yum -y install epel-*</span><br></pre></td></tr></table></figure>

<p>6.ssh远程连接</p>
<p>管理端和被管理端连接时基于ssh的，所以有两种连接方式</p>
<p>1）基于ssh口令</p>
<p>2）基于ssh证书（重点讲解）</p>
<p>如果想不需要运维人员干预，被管理端必须允许管理端证书免密登陆。</p>
</li>
<li><p>&#96;&#96;&#96;<br>#管理端manage01生成ssh公私钥<br>[root@manage01 ~]# ssh-keygen<br>Generating public&#x2F;private rsa key pair.<br>Enter file in which to save the key (&#x2F;root&#x2F;.ssh&#x2F;id_rsa):<br>Enter passphrase (empty for no passphrase):<br>Enter same passphrase again:<br>Your identification has been saved in &#x2F;root&#x2F;.ssh&#x2F;id_rsa.<br>Your public key has been saved in &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub.<br>The key fingerprint is:<br>SHA256:aufJno2QjPK&#x2F;V63&#x2F;PVW13h5oWlKu0jk7HesXYTho0gM root@manage01<br>The key’s randomart image is:<br>+—[RSA 2048]—-+<br>|                 |<br>|         E      .|<br>|          o . . o|<br>|         . &#x3D; + +.|<br>|        S o.+ &#x3D; +|<br>|     o o  …* +o|<br>|  . . * ….O o.+|<br>|   o . &#x3D;.<em>.B o +.|<br>|    ..o+B oo</em>oo o|<br>+—-[SHA256]—–+</p>
<p>#将公钥传给node1<br>[root@manage01 ~]# ssh-copy-id -i .ssh&#x2F;id_rsa.pub <a href="mailto:&#x72;&#111;&#x6f;&#x74;&#x40;&#x31;&#57;&#50;&#x2e;&#49;&#54;&#56;&#x2e;&#x39;&#x38;&#x2e;&#50;&#x30;&#x31;">&#x72;&#111;&#x6f;&#x74;&#x40;&#x31;&#57;&#50;&#x2e;&#49;&#54;&#56;&#x2e;&#x39;&#x38;&#x2e;&#50;&#x30;&#x31;</a><br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: Source of key(s) to be installed: “.ssh&#x2F;id_rsa.pub”<br>The authenticity of host ‘192.168.98.201 (192.168.98.201)’ can’t be established.<br>ECDSA key fingerprint is SHA256:u+yOQz+E+eF7Oixdz&#x2F;vClLXlAEu&#x2F;7K8jy783gzk20dQ.<br>ECDSA key fingerprint is MD5:c0:80:1b:ae:93:32:c2:66:f5:da:2f:1c:26:1e:7e:f8.<br>Are you sure you want to continue connecting (yes&#x2F;no)? yes<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: 1 key(s) remain to be installed – if you are prompted now it is to install the new keys<br><a href="mailto:&#114;&#x6f;&#x6f;&#116;&#x40;&#x31;&#x39;&#x32;&#46;&#49;&#54;&#56;&#46;&#x39;&#56;&#46;&#x32;&#x30;&#x31;">&#114;&#x6f;&#x6f;&#116;&#x40;&#x31;&#x39;&#x32;&#46;&#49;&#54;&#56;&#46;&#x39;&#56;&#46;&#x32;&#x30;&#x31;</a>‘s password: </p>
<p>Number of key(s) added: 1</p>
<p>Now try logging into the machine, with:   “ssh ‘<a href="mailto:&#x72;&#111;&#111;&#x74;&#64;&#x31;&#x39;&#50;&#x2e;&#49;&#54;&#56;&#46;&#57;&#x38;&#x2e;&#x32;&#48;&#x31;">&#x72;&#111;&#111;&#x74;&#64;&#x31;&#x39;&#50;&#x2e;&#49;&#54;&#56;&#46;&#57;&#x38;&#x2e;&#x32;&#48;&#x31;</a>‘“<br>and check to make sure that only the key(s) you wanted were added.</p>
<p>#将公钥传给node2<br>[root@manage01 ~]# ssh-copy-id -i .ssh&#x2F;id_rsa.pub <a href="mailto:&#114;&#x6f;&#x6f;&#116;&#x40;&#x31;&#x39;&#50;&#x2e;&#49;&#x36;&#x38;&#46;&#57;&#56;&#x2e;&#x32;&#48;&#x32;">&#114;&#x6f;&#x6f;&#116;&#x40;&#x31;&#x39;&#50;&#x2e;&#49;&#x36;&#x38;&#46;&#57;&#56;&#x2e;&#x32;&#48;&#x32;</a><br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: Source of key(s) to be installed: “.ssh&#x2F;id_rsa.pub”<br>The authenticity of host ‘192.168.98.202 (192.168.98.202)’ can’t be established.<br>ECDSA key fingerprint is SHA256:X4JeiiFuwV0cja81veAyGCosriEfZm&#x2F;zv34cfYkuxmU.<br>ECDSA key fingerprint is MD5:7d:17:0f:80:d5:2b:30:ec:2c:62:f9:79:6b:fb:5f:bc.<br>Are you sure you want to continue connecting (yes&#x2F;no)? yes<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: 1 key(s) remain to be installed – if you are prompted now it is to install the new keys<br><a href="mailto:&#x72;&#111;&#x6f;&#x74;&#64;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#x2e;&#x39;&#x38;&#x2e;&#x32;&#48;&#50;">&#x72;&#111;&#x6f;&#x74;&#64;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#x2e;&#x39;&#x38;&#x2e;&#x32;&#48;&#50;</a>‘s password: </p>
<p>Number of key(s) added: 1</p>
<p>Now try logging into the machine, with:   “ssh ‘<a href="mailto:&#x72;&#x6f;&#x6f;&#x74;&#64;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#x2e;&#x39;&#56;&#46;&#x32;&#48;&#x32;">&#x72;&#x6f;&#x6f;&#x74;&#64;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#x2e;&#x39;&#56;&#46;&#x32;&#48;&#x32;</a>‘“<br>and check to make sure that only the key(s) you wanted were added.</p>
<p>#将公钥传给node3<br>[root@manage01 ~]# ssh-copy-id -i .ssh&#x2F;id_rsa.pub <a href="mailto:&#114;&#x6f;&#x6f;&#116;&#64;&#49;&#57;&#x32;&#x2e;&#49;&#x36;&#56;&#46;&#57;&#56;&#46;&#x32;&#48;&#x33;">&#114;&#x6f;&#x6f;&#116;&#64;&#49;&#57;&#x32;&#x2e;&#49;&#x36;&#56;&#46;&#57;&#56;&#46;&#x32;&#48;&#x33;</a><br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: Source of key(s) to be installed: “.ssh&#x2F;id_rsa.pub”<br>The authenticity of host ‘192.168.98.203 (192.168.98.203)’ can’t be established.<br>ECDSA key fingerprint is SHA256:PtpsYBjaXkE+o3j8QYU5Ju8uPgcW2lVW8wsx4X1PV&#x2F;c.<br>ECDSA key fingerprint is MD5:50:a1:63:a0:ef:e7:61:26:11:25:ae:06:ec:93:cb:18.<br>Are you sure you want to continue connecting (yes&#x2F;no)? yes<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed<br>&#x2F;usr&#x2F;bin&#x2F;ssh-copy-id: INFO: 1 key(s) remain to be installed – if you are prompted now it is to install the new keys<br><a href="mailto:&#114;&#111;&#x6f;&#116;&#64;&#x31;&#x39;&#x32;&#46;&#49;&#54;&#56;&#x2e;&#x39;&#x38;&#x2e;&#50;&#x30;&#x33;">&#114;&#111;&#x6f;&#116;&#64;&#x31;&#x39;&#x32;&#46;&#49;&#54;&#56;&#x2e;&#x39;&#x38;&#x2e;&#50;&#x30;&#x33;</a>‘s password: </p>
<p>Number of key(s) added: 1</p>
<p>Now try logging into the machine, with:   “ssh ‘<a href="mailto:&#x72;&#x6f;&#111;&#x74;&#x40;&#49;&#57;&#x32;&#46;&#49;&#54;&#x38;&#x2e;&#57;&#x38;&#x2e;&#50;&#48;&#51;">&#x72;&#x6f;&#111;&#x74;&#x40;&#49;&#57;&#x32;&#46;&#49;&#54;&#x38;&#x2e;&#57;&#x38;&#x2e;&#50;&#48;&#51;</a>‘“<br>and check to make sure that only the key(s) you wanted were added.</p>
<p>小窍门<br>免交互创建公私钥<br>[root@manage01 ansible]# ssh-keygen -f &#x2F;root&#x2F;.ssh&#x2F;id_rsa -N “”<br>-f 指定密钥存放路径<br>-N “”  新密码设置问空<br>-P “”  老密码是什么</p>
<p>如何可以非交互式传公钥呢<br>[root@manage01 ansible]# yum -y install sshpass<br>[root@manage01 ansible]# sshpass -p111111 ssh-copy-id -o StrictHostKeyChecking&#x3D;no -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub <a href="mailto:&#114;&#x6f;&#x6f;&#x74;&#x40;&#49;&#x39;&#50;&#46;&#49;&#54;&#x38;&#46;&#57;&#x38;&#x2e;&#50;&#x30;&#x32;">&#114;&#x6f;&#x6f;&#x74;&#x40;&#49;&#x39;&#50;&#46;&#49;&#54;&#x38;&#46;&#57;&#x38;&#x2e;&#50;&#x30;&#x32;</a> </p>
<p>StrictHostKeyChecking   严厉的主机监测&#x3D;no  就不会问你yes|no了<br>sshpass 非交互式传密码</p>
<p>测试证书是否生效<br>[root@manage01 ~]# for i in <code>seq 201 203</code>;do</p>
<blockquote>
<p>ssh <a href="mailto:&#x72;&#x6f;&#111;&#x74;&#64;&#x31;&#x39;&#x32;&#46;&#49;&#x36;&#x38;&#x2e;&#x39;&#x38;">&#x72;&#x6f;&#111;&#x74;&#64;&#x31;&#x39;&#x32;&#46;&#49;&#x36;&#x38;&#x2e;&#x39;&#x38;</a>.$i “hostname”<br>done<br>node1<br>node2<br>node3</p>
</blockquote>
<p>看到返回客户端的计算机名称</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## 二、ansible管理端部署</span><br><span class="line"></span><br><span class="line">### 2.1）管理端安装ansible</span><br><span class="line"></span><br><span class="line">安装方式:</span><br><span class="line"></span><br><span class="line">1）yum</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<p>[root@manage01 ~]# yum -y install ansible<br>[root@manage01 ~]# ansible –version<br>ansible 2.8.5<br>  config file &#x3D; &#x2F;etc&#x2F;ansible&#x2F;ansible.cfg<br>  configured module search path &#x3D; [‘&#x2F;root&#x2F;.ansible&#x2F;plugins&#x2F;modules’, ‘&#x2F;usr&#x2F;share&#x2F;ansible&#x2F;plugins&#x2F;modules’]<br>  ansible python module location &#x3D; &#x2F;usr&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;ansible<br>  executable location &#x3D; &#x2F;usr&#x2F;bin&#x2F;ansible<br>  python version &#x3D; 3.6.8 (default, May 21 2019, 23:51:36) [GCC 8.2.1 20180905 (Red Hat 8.2.1-3)]</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">2） 源码</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>1、官网下载地址：<a href="https://releases.ansible.com/ansible">https://releases.ansible.com/ansible</a><br>[root@manage01 ~]# wget <a href="https://releases.ansible.com/ansible/ansible-2.9.3.tar.gz">https://releases.ansible.com/ansible/ansible-2.9.3.tar.gz</a><br>2、安装ansible<br>[root@manage01 ~]# tar xf ansible-2.9.3.tar.gz<br>[root@manage01 ~]# mv ansible-2.9.3 &#x2F;opt&#x2F;ansible<br>[root@manage01 ~]# cd &#x2F;opt&#x2F;ansible-2.9.3<br>#python软件包安装–1、安装依赖<br>[root@manage01 ansible-2.9.0rc3]# pip3 install -r requirements.txt -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>[root@manage01 ansible]# ln -s &#x2F;usr&#x2F;bin&#x2F;pip3 &#x2F;usr&#x2F;bin&#x2F;pip<br>#python软件包安装–2、安装软件<br>[root@manage01 ansible-2.9.0rc3]# pip install –user ansible -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a></p>
<p>#安装后设置<br>[root@manage01 ~]# ln -s &#x2F;usr&#x2F;bin&#x2F;python3 &#x2F;usr&#x2F;bin&#x2F;python<br>[root@manage01 ~]# ln -s &#x2F;opt&#x2F;ansible&#x2F;bin&#x2F;* &#x2F;usr&#x2F;bin&#x2F;<br>[root@manage01 ~]# cp &#x2F;opt&#x2F;ansible&#x2F;examples&#x2F;ansible.cfg &#x2F;etc&#x2F;ansible&#x2F;<br>[root@manage01 ~]# cp &#x2F;opt&#x2F;ansible&#x2F;examples&#x2F;hosts &#x2F;etc&#x2F;ansible&#x2F;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">**FAQ1**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>[root@manage01 ansible-2.9.0rc3]# .&#x2F;bin&#x2F;ansible -m ping 192.168.98.201<br> [WARNING]: No inventory was parsed, only implicit localhost is available</p>
<p> [WARNING]: provided hosts list is empty, only localhost is available. Note that<br>the implicit localhost does not match ‘all’</p>
<p> [WARNING]: Could not match supplied host pattern, ignoring: 192.168.98.201</p>
<p> 触发原因<br> 执行ansible的时候回去读取客户端文件hosts，如果没有把客户端加入到hosts文件，就说明无法ansible无法管理。</p>
<p> 解决方案<br> [root@manage01 ansible]# mkdir &#x2F;etc&#x2F;ansible<br> [root@manage01 ansible]# cp examples&#x2F;hosts &#x2F;etc&#x2F;ansible&#x2F;<br> #将需要管理的客户端IP地址写入hosts文件,可以分组或者直接写<br> [root@manage01 ~]# cat &#x2F;etc&#x2F;ansible&#x2F;hosts<br> 192.168.98.[201:203]</p>
<p> 分组<br> [group1]<br>192.168.98.[201:203]</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">### 2.2）ansible管理服务器部署</span><br><span class="line"></span><br><span class="line">管理端ansible目录：/etc/ansible</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>[root@manage01 ansible]# tree<br>.<br>├── ansible.cfg           #ansible配置文件,不需要配置<br>├── hosts									#主机列表<br>└── roles                 #角色列表</p>
<p>1 directory, 2 files</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">### 2.3）部署主机列表，定义被监控机</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>[root@manage01 ansible]# egrep -v “(^#|^$)” &#x2F;etc&#x2F;ansible&#x2F;hosts<br>[group1]					#名字可以随便起  后面跟上业务机器的IP地址或者域名<br>192.168.98.201<br>192.168.98.202<br>192.168.98.203</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">**关于业务机器分组**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>分组中使用范围<br>[nginx]					组名<br>apache[1:10].aaa.com	表示apache1.aaa.com到apache10.aaa.com这10台机器<br>nginx[a:z].aaa.com		表示nginxa.aaa.com到nginxz.aaa.com共26台机器<br>10.1.1.[11:15]			表示10.1.1.11到10.1.1.15这5台机器</p>
<p>如果业务机器的SSH端口不是22<br>10.1.1.13:2222			表示10.1.1.13这台，但ssh端口为2222</p>
<p>指定业务机器别名，未做免密登陆的机器可以通过下面的机器设置账号密码<br>nginx1  ansible_ssh_host&#x3D;10.1.1.13 ansible_ssh_port&#x3D;2222 ansible_ssh_user&#x3D;root ansible_ssh_pass&#x3D;”123456”</p>
<p>ansible_ssh_host  指定业务机器的IP或域名<br>ansible_ssh_port  指定业务机器的ssh端口<br>ansible_ssh_user  指定业务机器的ssh用户名<br>ansible_ssh_pass  指定业务机器的ssh用户名密码</p>
<p>利用机器别名分组<br>nginx1  ansible_ssh_host&#x3D;10.1.1.13 ansible_ssh_port&#x3D;2222 ansible_ssh_user&#x3D;root ansible_ssh_pass&#x3D;”123456”<br>nginx2  ansible_ssh_host&#x3D;10.1.1.12</p>
<p>[nginx]<br>nginx1    #写服务器别名<br>nginx2</p>
<p>[root@manage01 ansible]# egrep -v “(^#|^$)” &#x2F;etc&#x2F;ansible&#x2F;hosts<br>#别名定义<br>web1 ansible_ssh_host&#x3D;192.168.98.203 ansible_ssh_port&#x3D;12121</p>
<p>#分组<br>[group1]<br>192.168.98.201<br>#未做免密登陆机器<br>192.168.98.202:12121 ansible_ssh_user&#x3D;sko ansible_ssh_pass&#x3D;’123’<br>#别名机器<br>web1 ansible_ssh_user&#x3D;sko ansible_ssh_pass&#x3D;’123’</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">### 2.4）测试管理机和业务机器的联通性</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>我们可以使用ansible通过调用ping模块来测试分组机器或某个机器<br>-m 指定使用的模块   group1  业务机器分组<br>#测试单个机器<br>#测试主机列表中的机器</p>
<p>#测试单个机器方法<br>[root@manage01 ~]# ansible -m ping 192.168.98.201<br>192.168.98.201 | SUCCESS &#x3D;&gt; {<br>    “ansible_facts”: {<br>        “discovered_interpreter_python”: “&#x2F;usr&#x2F;libexec&#x2F;platform-python”<br>    },<br>    “changed”: false,<br>    “ping”: “pong”<br>}</p>
<p>#测试主机列表中的机器方法<br>[root@manage01 ~]# ansible -m ping group1<br>192.168.98.201 | SUCCESS &#x3D;&gt; {<br>    “ansible_facts”: {<br>        “discovered_interpreter_python”: “&#x2F;usr&#x2F;libexec&#x2F;platform-python”<br>    },<br>    “changed”: false,<br>    “ping”: “pong”<br>}<br>192.168.98.203 | SUCCESS &#x3D;&gt; {<br>    “ansible_facts”: {<br>        “discovered_interpreter_python”: “&#x2F;usr&#x2F;libexec&#x2F;platform-python”<br>    },<br>    “changed”: false,<br>    “ping”: “pong”<br>}<br>192.168.98.202 | SUCCESS &#x3D;&gt; {<br>    “ansible_facts”: {<br>        “discovered_interpreter_python”: “&#x2F;usr&#x2F;libexec&#x2F;platform-python”<br>    },<br>    “changed”: false,<br>    “ping”: “pong”<br>}</p>
<pre><code>
## 三、学习视频

[视频：部署前准备](https://www.bilibili.com/video/BV19J41167sM?p=6)
[视频：ssh证书互信设置](https://www.bilibili.com/video/BV19J41167sM?p=7)
[视频：ansible平台部署](https://www.bilibili.com/video/BV19J41167sM?p=8)
[视频：主机列表文件hosts文件](https://www.bilibili.com/video/BV19J41167sM?p=9)
[视频：ansible自动化平台部署知识图谱](https://www.bilibili.com/video/BV19J41167sM?p=10)
</code></pre>
]]></content>
  </entry>
  <entry>
    <title>CCIE-Practical-Studies-Volume1</title>
    <url>/2022/11/17/CCIE-Practical-Studies-Volume1/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCIE-Practical-Studies-Volume2</title>
    <url>/2022/11/17/CCIE-Practical-Studies-Volume2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCIE-Security-Practice-Labs</title>
    <url>/2022/11/17/CCIE-Security-Practice-Labs/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCIE实验指南第2卷</title>
    <url>/2022/11/17/CCIE%E5%AE%9E%E9%AA%8C%E6%8C%87%E5%8D%97%E7%AC%AC2%E5%8D%B7/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCIE实验指南第1卷</title>
    <url>/2022/11/17/CCIE%E5%AE%9E%E9%AA%8C%E6%8C%87%E5%8D%97%E7%AC%AC1%E5%8D%B7/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-1</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-10</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-11</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-12</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-13</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-14</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-3</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-4</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object>1</p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-2</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-5</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-6</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-8</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-7</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷1-9</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B71-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-1</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-11</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-10</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-12</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-13</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-3</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-2</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-4</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-5</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-6</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-7</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-8</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCIE路由和交换认证考试指南第5版卷2-9</title>
    <url>/2022/11/14/CCIE%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E5%8D%B72-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNA_200-301_Official_Cert_Guide_Volume_1</title>
    <url>/2022/11/17/CCNA-200-301-Official-Cert-Guide-Volume-1/</url>
    <content><![CDATA[<p><object data="CCNA_200-301_Official_Cert_Guide_Volume_1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNA-Advanced-Methods-and-Strategies-To-Learn-RS-Essentials</title>
    <url>/2022/11/17/CCNA-Advanced-Methods-and-Strategies-To-Learn-RS-Essentials/</url>
    <content><![CDATA[<p><object data="CCNA-Advanced-Methods-and-Strategies-To-Learn-RS-Essentials.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNA-Data-Center-Introducing-Cisco-Data-Center</title>
    <url>/2022/11/17/CCNA-Data-Center-Introducing-Cisco-Data-Center/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCNA_200-301_Official_Cert_Guide_Volume_2</title>
    <url>/2022/11/17/CCNA-200-301-Official-Cert-Guide-Volume-2/</url>
    <content><![CDATA[<p><object data="CCNA_200-301_Official_Cert_Guide_Volume_2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNA-Portable-Command-Guide-2nd-Edition</title>
    <url>/2022/11/17/CCNA-Portable-Command-Guide-2nd-Edition/</url>
    <content><![CDATA[<p><object data="CCNA-Portable-Command-Guide-2nd-Edition.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNA学习指南中文第七版</title>
    <url>/2022/11/17/CCNA%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97%E4%B8%AD%E6%96%87%E7%AC%AC%E4%B8%83%E7%89%88/</url>
    <content><![CDATA[<p><object data="CCNA学习指南中文第七版.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNA-Portable-Command-Guide</title>
    <url>/2022/11/17/CCNA-Portable-Command-Guide/</url>
    <content><![CDATA[<p><object data="CCNA-Portable-Command-Guide.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNA-Security-portable-command</title>
    <url>/2022/11/17/CCNA-Security-portable-command/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCNA-Security</title>
    <url>/2022/11/17/CCNA-Security/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCNA实验手册</title>
    <url>/2022/11/17/CCNA%E5%AE%9E%E9%AA%8C%E6%89%8B%E5%86%8C/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCNA无线认证考试指南</title>
    <url>/2022/11/17/CCNA%E6%97%A0%E7%BA%BF%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<p><object data="CCNA无线认证考试指南.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNP-Enterprise-Wireless-Design-and-Implementation</title>
    <url>/2022/11/17/CCNP-Enterprise-Wireless-Design-and-Implementation/</url>
    <content><![CDATA[<p><object data="CCNP-Enterprise-Wireless-Design-and-Implementation.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNP-BCMSN-Portable-Command-Guide</title>
    <url>/2022/11/17/CCNP-BCMSN-Portable-Command-Guide/</url>
    <content><![CDATA[<p><object data="CCNP-BCMSN-Portable-Command-Guide.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNP-ISCW-Portable-Command-Guide</title>
    <url>/2022/11/17/CCNP-ISCW-Portable-Command-Guide/</url>
    <content><![CDATA[<p><object data="CCNP-ISCW-Portable-Command-Guide.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNP-Practical-Studies</title>
    <url>/2022/11/17/CCNP-Practical-Studies/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCNP-ROUTE-642-902-Portable-Command-Guide</title>
    <url>/2022/11/17/CCNP-ROUTE-642-902-Portable-Command-Guide/</url>
    <content><![CDATA[<p><object data="CCNP-ROUTE-642-902-Portable-Command-Guide.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNP-ROUTE-300-101-学习指南</title>
    <url>/2022/11/17/CCNP-ROUTE-300-101-%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCNP-Routing-and-Switching-Portable-Command-Guide</title>
    <url>/2022/11/17/CCNP-Routing-and-Switching-Portable-Command-Guide/</url>
    <content><![CDATA[<p><object data="CCNP-Routing-and-Switching-Portable-Command-Guide.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNP-SWITCH-300-115学习指南</title>
    <url>/2022/11/17/CCNP-SWITCH-300-115%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCNP-SWITCH-Portable-Command-Guide</title>
    <url>/2022/11/17/CCNP-SWITCH-Portable-Command-Guide/</url>
    <content><![CDATA[<p><object data="CCNP-SWITCH-Portable-Command-Guide.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>CCNP-Security-FIREWALL-642-618-Official-Cert-Guide</title>
    <url>/2022/11/17/CCNP-Security-FIREWALL-642-618-Official-Cert-Guide/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CCNP-TSHOOT-300-135学习指南</title>
    <url>/2022/11/17/CCNP-TSHOOT-300-135%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CI和CD代码管理平台</title>
    <url>/2022/11/12/CI%E5%92%8CCD%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-ASA-Firewall-Fundamentals-3rd-Edition</title>
    <url>/2022/11/17/Cisco-ASA-Firewall-Fundamentals-3rd-Edition/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-Firepower-Threat-Defense</title>
    <url>/2022/11/17/Cisco-Firepower-Threat-Defense/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-ASA-Series-CLI-Configuration-Guide</title>
    <url>/2022/11/17/Cisco-ASA-Series-CLI-Configuration-Guide/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-CCIE-Routing-and-Switching-Configuration-Practice-Labs</title>
    <url>/2022/11/17/Cisco-CCIE-Routing-and-Switching-Configuration-Practice-Labs/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-Firewalls</title>
    <url>/2022/11/17/Cisco-Firewalls/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-IOS-12.4-security-command-reference</title>
    <url>/2022/11/17/Cisco-IOS-12-4-security-command-reference/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-IOS-XR-Fundamentals</title>
    <url>/2022/11/17/Cisco-IOS-XR-Fundamentals/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-IOS-Software-Configuration-Guide-for-Cisco-Access-Points</title>
    <url>/2022/11/17/Cisco-IOS-Software-Configuration-Guide-for-Cisco-Access-Points/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-IPv6网络实现技术</title>
    <url>/2022/11/17/Cisco-IPv6%E7%BD%91%E7%BB%9C%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-ISE-for-BYOD-and-Secure-Unified-Access-2</title>
    <url>/2022/11/17/Cisco-ISE-for-BYOD-and-Secure-Unified-Access-2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-ISP-Essentials</title>
    <url>/2022/11/17/Cisco-ISP-Essentials/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-Intelligent-WAN</title>
    <url>/2022/11/17/Cisco-Intelligent-WAN/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-Networking-Simplified</title>
    <url>/2022/11/17/Cisco-Networking-Simplified/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-Next-Generation-Security-Solutions-All-in-one-Cisco-ASA-Firepower-Services</title>
    <url>/2022/11/17/Cisco-Next-Generation-Security-Solutions-All-in-one-Cisco-ASA-Firepower-Services/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-OSPF-Command-and-Configuration-Handbook</title>
    <url>/2022/11/17/Cisco-OSPF-Command-and-Configuration-Handbook/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-OSPF命令与配置手册</title>
    <url>/2022/11/17/Cisco-OSPF%E5%91%BD%E4%BB%A4%E4%B8%8E%E9%85%8D%E7%BD%AE%E6%89%8B%E5%86%8C/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-Router-Configuration-Handbook-2nd</title>
    <url>/2022/11/17/Cisco-Router-Configuration-Handbook-2nd/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-Press-Network-Management-Fundamentals</title>
    <url>/2022/11/17/Cisco-Press-Network-Management-Fundamentals/</url>
    <content><![CDATA[<p><object data="Cisco-Press-Network-Management-Fundamentals.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Cisco-and-F5-Deployment-Guide-ISE-Load-Balancing-Using-BIG-IP</title>
    <url>/2022/11/17/Cisco-and-F5-Deployment-Guide-ISE-Load-Balancing-Using-BIG-IP/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-Software-Defined-Access</title>
    <url>/2022/11/17/Cisco-Software-Defined-Access/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-VPN-Configuration-Guide</title>
    <url>/2022/11/17/Cisco-VPN-Configuration-Guide/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco-Wireless-LAN-Controller-Command-Reference</title>
    <url>/2022/11/17/Cisco-Wireless-LAN-Controller-Command-Reference/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Ciscopress-Cisco-Software-Defined-Wide-Area-Networks</title>
    <url>/2022/11/17/Ciscopress-Cisco-Software-Defined-Wide-Area-Networks/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cisco局域网交换基础</title>
    <url>/2022/11/17/Cisco%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>CompTIA-LPIC-1-Portable-Command-Guide</title>
    <url>/2022/11/17/CompTIA-LPIC-1-Portable-Command-Guide/</url>
    <content><![CDATA[<p><object data="CompTIA-LPIC-1-Portable-Command-Guide.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Containers-in-Cisco-IOS-XE-IOS-XR-and-NX-OS-Orchestration-and-Operation</title>
    <url>/2022/11/17/Containers-in-Cisco-IOS-XE-IOS-XR-and-NX-OS-Orchestration-and-Operation/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Cloud-Computing-Automating-the-Virtualized-Data-Center</title>
    <url>/2022/11/17/Cloud-Computing-Automating-the-Virtualized-Data-Center/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Controller-Based-Wireless-LAN-Fundamentals</title>
    <url>/2022/11/17/Controller-Based-Wireless-LAN-Fundamentals/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Data-Center-Fundamentals</title>
    <url>/2022/11/17/Data-Center-Fundamentals/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Data-Center-Virtualization-Fundamentals</title>
    <url>/2022/11/17/Data-Center-Virtualization-Fundamentals/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Dell-EMC-R750XS安装手册</title>
    <url>/2022/11/17/Dell-EMC-R750XS%E5%AE%89%E8%A3%85%E6%89%8B%E5%86%8C/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Designing-for-Cisco-Internetwork-Solutions-Foundation-Learning-Guide-3rd-Edition-CCDA-DESGN-640-864</title>
    <url>/2022/11/17/Designing-for-Cisco-Internetwork-Solutions-Foundation-Learning-Guide-3rd-Edition-CCDA-DESGN-640-864/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Docker容器实战部署</title>
    <url>/2022/11/12/Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E6%88%98%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Feature</title>
    <url>/2022/11/17/Feature/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>IP-Addressing-NAT-Configuration-Guide</title>
    <url>/2022/11/17/IP-Addressing-NAT-Configuration-Guide/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>IKEv2-IPsec-virtual-private-networks-understanding-and-deploying-IKEv2-IPsec-VPNs-and-FlexVPN-in-Cisco-IOS</title>
    <url>/2022/11/17/IKEv2-IPsec-virtual-private-networks-understanding-and-deploying-IKEv2-IPsec-VPNs-and-FlexVPN-in-Cisco-IOS/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>IGP</title>
    <url>/2022/11/17/IGP/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>IPv6</title>
    <url>/2022/11/17/IPv6/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>IPV6在企业网络中的部署</title>
    <url>/2022/11/15/IPV6%E5%9C%A8%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<p><object data="IPV6在企业网络中的部署.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>IP组播网络设计开发</title>
    <url>/2022/11/17/IP%E7%BB%84%E6%92%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>IP网络的Cisco-QoS管理</title>
    <url>/2022/11/17/IP%E7%BD%91%E7%BB%9C%E7%9A%84Cisco-QoS%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>IP路由协议疑难解析</title>
    <url>/2022/11/17/IP%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E7%96%91%E9%9A%BE%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>IS-IS网络设计解决方案</title>
    <url>/2022/11/17/IS-IS%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Implementing-Cisco-IP-Switched-Networks-SWITCH-642-813</title>
    <url>/2022/11/17/Implementing-Cisco-IP-Switched-Networks-SWITCH-642-813/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Implementing-Cisco-IP-Routing-ROUTE-Foundation-Learning-Guide-CCNP-ROUTE-300-101-Foundation-Learning-Guide</title>
    <url>/2022/11/17/Implementing-Cisco-IP-Routing-ROUTE-Foundation-Learning-Guide-CCNP-ROUTE-300-101-Foundation-Learning-Guide/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Implementing-Cisco-IP-Telephony-and-Video-Part-2-300-075-CIPTV2</title>
    <url>/2022/11/17/Implementing-Cisco-IP-Telephony-and-Video-Part-2-300-075-CIPTV2/</url>
    <content><![CDATA[<p><object data="Implementing-Cisco-IP-Telephony-and-Video-Part-2-300-075-CIPTV2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Implementing-Cisco-Unified-Communications-Manager-Part-1</title>
    <url>/2022/11/17/Implementing-Cisco-Unified-Communications-Manager-Part-1/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Implementing-Cisco-Unified-Communications-Manager-Part-2</title>
    <url>/2022/11/17/Implementing-Cisco-Unified-Communications-Manager-Part-2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Kubernetes云计算实战</title>
    <url>/2022/11/12/Kubernetes%E4%BA%91%E8%AE%A1%E7%AE%97%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Implementing-Cisco-Unified-Communications-Voice-over-IP-and-QoS-CCNP-Voice-CVoice-642-437-4th-Edition</title>
    <url>/2022/11/17/Implementing-Cisco-Unified-Communications-Voice-over-IP-and-QoS-CCNP-Voice-CVoice-642-437-4th-Edition/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Linux常用服务器部署实战</title>
    <url>/2022/11/12/Linux%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Linux系统管理宝典</title>
    <url>/2022/11/12/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>MCSA-Windows-Server-2016-study-guide</title>
    <url>/2022/11/17/MCSA-Windows-Server-2016-study-guide/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>MPLS-Fundamentals</title>
    <url>/2022/11/17/MPLS-Fundamentals/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>MPLS_MPLS-VPN</title>
    <url>/2022/11/17/MPLS-MPLS-VPN/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>MPLS和VPN体系结构</title>
    <url>/2022/11/17/MPLS%E5%92%8CVPN%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Managing-Cisco-Network-Security</title>
    <url>/2022/11/17/Managing-Cisco-Network-Security/</url>
    <content><![CDATA[<p><object data="Managing-Cisco-Network-Security.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>MPLS技术架构</title>
    <url>/2022/11/17/MPLS%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Multicast</title>
    <url>/2022/11/17/Multicast/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>MySQL数据库实战</title>
    <url>/2022/11/12/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>NX-OS-and-Cisco-Nexus-Switching</title>
    <url>/2022/11/17/NX-OS-and-Cisco-Nexus-Switching/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Network-Automation-Made-Easy</title>
    <url>/2022/11/17/Network-Automation-Made-Easy/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Network-Programmability-and-Automation-Textbook</title>
    <url>/2022/11/17/Network-Programmability-and-Automation-Textbook/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Network-Programmability-and-Automation-Fundamentals</title>
    <url>/2022/11/17/Network-Programmability-and-Automation-Fundamentals/</url>
    <content><![CDATA[<p><object data="Network-Programmability-and-Automation-Fundamentals.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Private-Networks-VPNs-MPLS-on-Cisco-devices</title>
    <url>/2022/11/17/Private-Networks-VPNs-MPLS-on-Cisco-devices/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>QOS</title>
    <url>/2022/11/17/QOS/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-1</title>
    <url>/2022/11/12/RHEL-RH124-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-11</title>
    <url>/2022/11/12/RHEL-RH124-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-12</title>
    <url>/2022/11/12/RHEL-RH124-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-10</title>
    <url>/2022/11/12/RHEL-RH124-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-13</title>
    <url>/2022/11/12/RHEL-RH124-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-15</title>
    <url>/2022/11/12/RHEL-RH124-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-14</title>
    <url>/2022/11/12/RHEL-RH124-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-16</title>
    <url>/2022/11/12/RHEL-RH124-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-18</title>
    <url>/2022/11/12/RHEL-RH124-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-17</title>
    <url>/2022/11/12/RHEL-RH124-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-19</title>
    <url>/2022/11/12/RHEL-RH124-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-2</title>
    <url>/2022/11/12/RHEL-RH124-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-20</title>
    <url>/2022/11/12/RHEL-RH124-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-21</title>
    <url>/2022/11/12/RHEL-RH124-lab-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-23</title>
    <url>/2022/11/12/RHEL-RH124-lab-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-22</title>
    <url>/2022/11/12/RHEL-RH124-lab-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-24</title>
    <url>/2022/11/12/RHEL-RH124-lab-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-25</title>
    <url>/2022/11/12/RHEL-RH124-lab-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-26</title>
    <url>/2022/11/12/RHEL-RH124-lab-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-3</title>
    <url>/2022/11/12/RHEL-RH124-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-4</title>
    <url>/2022/11/12/RHEL-RH124-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-5</title>
    <url>/2022/11/12/RHEL-RH124-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-6</title>
    <url>/2022/11/12/RHEL-RH124-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-7</title>
    <url>/2022/11/12/RHEL-RH124-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-8</title>
    <url>/2022/11/12/RHEL-RH124-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH124-lab-9</title>
    <url>/2022/11/12/RHEL-RH124-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-1</title>
    <url>/2022/11/12/RHEL-RH134-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-11</title>
    <url>/2022/11/12/RHEL-RH134-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-10</title>
    <url>/2022/11/12/RHEL-RH134-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-12</title>
    <url>/2022/11/12/RHEL-RH134-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-13</title>
    <url>/2022/11/12/RHEL-RH134-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-14</title>
    <url>/2022/11/12/RHEL-RH134-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-16</title>
    <url>/2022/11/12/RHEL-RH134-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-15</title>
    <url>/2022/11/12/RHEL-RH134-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-2</title>
    <url>/2022/11/12/RHEL-RH134-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-3</title>
    <url>/2022/11/12/RHEL-RH134-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-4</title>
    <url>/2022/11/12/RHEL-RH134-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-5</title>
    <url>/2022/11/12/RHEL-RH134-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-6</title>
    <url>/2022/11/12/RHEL-RH134-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-7</title>
    <url>/2022/11/12/RHEL-RH134-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-8</title>
    <url>/2022/11/12/RHEL-RH134-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH134-lab-9</title>
    <url>/2022/11/12/RHEL-RH134-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-10</title>
    <url>/2022/11/12/RHEL-RH294-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-1</title>
    <url>/2022/11/12/RHEL-RH294-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-12</title>
    <url>/2022/11/12/RHEL-RH294-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-11</title>
    <url>/2022/11/12/RHEL-RH294-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-13</title>
    <url>/2022/11/12/RHEL-RH294-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-14</title>
    <url>/2022/11/12/RHEL-RH294-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-15</title>
    <url>/2022/11/12/RHEL-RH294-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-16</title>
    <url>/2022/11/12/RHEL-RH294-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-17</title>
    <url>/2022/11/12/RHEL-RH294-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-19</title>
    <url>/2022/11/12/RHEL-RH294-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-18</title>
    <url>/2022/11/12/RHEL-RH294-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-2</title>
    <url>/2022/11/12/RHEL-RH294-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-20</title>
    <url>/2022/11/12/RHEL-RH294-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-3</title>
    <url>/2022/11/12/RHEL-RH294-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-4</title>
    <url>/2022/11/12/RHEL-RH294-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-5</title>
    <url>/2022/11/12/RHEL-RH294-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-9</title>
    <url>/2022/11/12/RHEL-RH294-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-7</title>
    <url>/2022/11/12/RHEL-RH294-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-8</title>
    <url>/2022/11/12/RHEL-RH294-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>RHEL-RH294-lab-6</title>
    <url>/2022/11/12/RHEL-RH294-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Redis数据库</title>
    <url>/2022/11/12/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>SIP-Configuration-Guide-Cisco-IOS-Release-12</title>
    <url>/2022/11/17/SIP-Configuration-Guide-Cisco-IOS-Release-12/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>SSL-Remote-Access-VPNs-Network-Security</title>
    <url>/2022/11/17/SSL-Remote-Access-VPNs-Network-Security/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Security</title>
    <url>/2022/11/17/Security/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Switching</title>
    <url>/2022/11/17/Switching/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Troubleshooting-Cisco-Nexus-Switches-and-NX-OS</title>
    <url>/2022/11/17/Troubleshooting-Cisco-Nexus-Switches-and-NX-OS/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Troubleshooting-and-Maintaining-Cisco-IP-Networks</title>
    <url>/2022/11/17/Troubleshooting-and-Maintaining-Cisco-IP-Networks/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Understanding-Cisco-Networking-Technologies-Volume-1-Exam-200-301</title>
    <url>/2022/11/17/Understanding-Cisco-Networking-Technologies-Volume-1-Exam-200-301/</url>
    <content><![CDATA[<p><object data="Understanding-Cisco-Networking-Technologies-Volume-1-Exam-200-301.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Web服务器-Apache</title>
    <url>/2022/11/12/Web%E6%9C%8D%E5%8A%A1%E5%99%A8-Apache/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Web大并发集群部署</title>
    <url>/2022/11/12/Web%E5%A4%A7%E5%B9%B6%E5%8F%91%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Web服务器-Nginx</title>
    <url>/2022/11/12/Web%E6%9C%8D%E5%8A%A1%E5%99%A8-Nginx/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Windows-7-Portable-Command-Guide</title>
    <url>/2022/11/17/Windows-7-Portable-Command-Guide/</url>
    <content><![CDATA[<p><object data="Windows-7-Portable-Command-Guide.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Web服务器-Tomcat</title>
    <url>/2022/11/12/Web%E6%9C%8D%E5%8A%A1%E5%99%A8-Tomcat/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Windows-PowerShell-portable-command</title>
    <url>/2022/11/17/Windows-PowerShell-portable-command/</url>
    <content><![CDATA[<p><object data="Windows-PowerShell-portable-command.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2008-Portable-Command-Guide</title>
    <url>/2022/11/17/Windows-Server-2008-Portable-Command-Guide/</url>
    <content><![CDATA[<p><object data="Windows-Server-2008-Portable-Command-Guide.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-1</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-10</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-11</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-12</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-13</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-15</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-14</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-16</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-17</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-18</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-19</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-2</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-20</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-21</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-3</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-4</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-6</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-5</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-7</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-9</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-ActiveDirectory-8</title>
    <url>/2022/11/12/Windows-Server-2016-ActiveDirectory-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-1</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-10</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-11</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-12</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-13</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-15</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-14</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-16</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-17</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-18</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-19</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-2</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-21</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-20</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-22</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-23</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-24</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-25</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-26</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-27</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-3</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-4</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-5</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-6</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-7</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-1</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-8</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-官方教材-9</title>
    <url>/2022/11/12/Windows-Server-2016-%E5%AE%98%E6%96%B9%E6%95%99%E6%9D%90-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-10</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-11</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-13</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-14</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-12</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-15</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-17</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-16</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-18</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-19</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-2</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-3</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-4</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-5</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-6</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-7</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-8</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Windows-Server-2016-系统配置指南-9</title>
    <url>/2022/11/12/Windows-Server-2016-%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>asa-firewall-config-guide</title>
    <url>/2022/11/17/asa-firewall-config-guide/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccdp-arch-300-320</title>
    <url>/2022/11/17/ccdp-arch-300-320/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccie-mplsvpn-qos-ipv6-multicast</title>
    <url>/2022/11/17/ccie-mplsvpn-qos-ipv6-multicast/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccie路由交换v5实验指南</title>
    <url>/2022/11/17/ccie%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2v5%E5%AE%9E%E9%AA%8C%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccie路由和交换认证考试指南第5版第1卷</title>
    <url>/2022/11/17/ccie%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E7%AC%AC1%E5%8D%B7/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccie路由和交换认证考试指南第5版第2卷</title>
    <url>/2022/11/17/ccie%E8%B7%AF%E7%94%B1%E5%92%8C%E4%BA%A4%E6%8D%A2%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97%E7%AC%AC5%E7%89%88%E7%AC%AC2%E5%8D%B7/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-210-255</title>
    <url>/2022/11/17/ccna-cyberops-210-255/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-200-201</title>
    <url>/2022/11/17/ccna-cyberops-200-201/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-11</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-10</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-1</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-13</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-14</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-17</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-15</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-12</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-16</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-18</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-19</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-2</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-20</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-21</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-23</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-22</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-25</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-24</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-26</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-27</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-28</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-29</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-3</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-30</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-32</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-31</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-33</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-34</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-35</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-36</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-37</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-38</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-39</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-40</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-41</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-4</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-42</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-43</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-44</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-45</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-47</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-46</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-49</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-48</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-5</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-50</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-52</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-53</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-54</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-51</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-55</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-56</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-57</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-58</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-6</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-59</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-60</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-61</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-63</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-62</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-64</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-65</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-65/</url>
    <content><![CDATA[<p><object data="65.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-66</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-66/</url>
    <content><![CDATA[<p><object data="66.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-67</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-67/</url>
    <content><![CDATA[<p><object data="67.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-69</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-69/</url>
    <content><![CDATA[<p><object data="69.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-68</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-68/</url>
    <content><![CDATA[<p><object data="68.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-7</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-70</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-70/</url>
    <content><![CDATA[<p><object data="70.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-71</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-71/</url>
    <content><![CDATA[<p><object data="71.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-72</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-72/</url>
    <content><![CDATA[<p><object data="72.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-73</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-73/</url>
    <content><![CDATA[<p><object data="73.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-74</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-74/</url>
    <content><![CDATA[<p><object data="74.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-75</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-75/</url>
    <content><![CDATA[<p><object data="75.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-76</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-76/</url>
    <content><![CDATA[<p><object data="76.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-77</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-77/</url>
    <content><![CDATA[<p><object data="77.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-78</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-78/</url>
    <content><![CDATA[<p><object data="78.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-8</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-cyberops-official-lab-9</title>
    <url>/2022/11/14/ccna-cyberops-official-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-10</title>
    <url>/2022/11/14/ccna-devnet-official-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-1</title>
    <url>/2022/11/14/ccna-devnet-official-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-12</title>
    <url>/2022/11/14/ccna-devnet-official-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-14</title>
    <url>/2022/11/14/ccna-devnet-official-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-11</title>
    <url>/2022/11/14/ccna-devnet-official-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-13</title>
    <url>/2022/11/14/ccna-devnet-official-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-16</title>
    <url>/2022/11/14/ccna-devnet-official-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-15</title>
    <url>/2022/11/14/ccna-devnet-official-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-17</title>
    <url>/2022/11/14/ccna-devnet-official-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-18</title>
    <url>/2022/11/14/ccna-devnet-official-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-19</title>
    <url>/2022/11/14/ccna-devnet-official-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-2</title>
    <url>/2022/11/14/ccna-devnet-official-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-20</title>
    <url>/2022/11/14/ccna-devnet-official-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-21</title>
    <url>/2022/11/14/ccna-devnet-official-lab-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-22</title>
    <url>/2022/11/14/ccna-devnet-official-lab-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-23</title>
    <url>/2022/11/14/ccna-devnet-official-lab-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-24</title>
    <url>/2022/11/14/ccna-devnet-official-lab-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-25</title>
    <url>/2022/11/14/ccna-devnet-official-lab-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-26</title>
    <url>/2022/11/14/ccna-devnet-official-lab-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-27</title>
    <url>/2022/11/14/ccna-devnet-official-lab-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-29</title>
    <url>/2022/11/14/ccna-devnet-official-lab-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-28</title>
    <url>/2022/11/14/ccna-devnet-official-lab-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-3</title>
    <url>/2022/11/14/ccna-devnet-official-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-30</title>
    <url>/2022/11/14/ccna-devnet-official-lab-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-31</title>
    <url>/2022/11/14/ccna-devnet-official-lab-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-32</title>
    <url>/2022/11/14/ccna-devnet-official-lab-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-33</title>
    <url>/2022/11/14/ccna-devnet-official-lab-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-34</title>
    <url>/2022/11/14/ccna-devnet-official-lab-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-35</title>
    <url>/2022/11/14/ccna-devnet-official-lab-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-36</title>
    <url>/2022/11/14/ccna-devnet-official-lab-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-38</title>
    <url>/2022/11/14/ccna-devnet-official-lab-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-37</title>
    <url>/2022/11/14/ccna-devnet-official-lab-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-39</title>
    <url>/2022/11/14/ccna-devnet-official-lab-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-4</title>
    <url>/2022/11/14/ccna-devnet-official-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-40</title>
    <url>/2022/11/14/ccna-devnet-official-lab-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-42</title>
    <url>/2022/11/14/ccna-devnet-official-lab-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-43</title>
    <url>/2022/11/14/ccna-devnet-official-lab-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-41</title>
    <url>/2022/11/14/ccna-devnet-official-lab-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-44</title>
    <url>/2022/11/14/ccna-devnet-official-lab-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-45</title>
    <url>/2022/11/14/ccna-devnet-official-lab-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-46</title>
    <url>/2022/11/14/ccna-devnet-official-lab-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-47</title>
    <url>/2022/11/14/ccna-devnet-official-lab-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-48</title>
    <url>/2022/11/14/ccna-devnet-official-lab-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-6</title>
    <url>/2022/11/14/ccna-devnet-official-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-5</title>
    <url>/2022/11/14/ccna-devnet-official-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-8</title>
    <url>/2022/11/14/ccna-devnet-official-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-7</title>
    <url>/2022/11/14/ccna-devnet-official-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-devnet-official-lab-9</title>
    <url>/2022/11/14/ccna-devnet-official-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-1</title>
    <url>/2022/11/14/ccna-security-official-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-10</title>
    <url>/2022/11/14/ccna-security-official-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-11</title>
    <url>/2022/11/14/ccna-security-official-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-13</title>
    <url>/2022/11/14/ccna-security-official-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-12</title>
    <url>/2022/11/14/ccna-security-official-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-14</title>
    <url>/2022/11/14/ccna-security-official-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-15</title>
    <url>/2022/11/14/ccna-security-official-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-16</title>
    <url>/2022/11/14/ccna-security-official-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-17</title>
    <url>/2022/11/14/ccna-security-official-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-18</title>
    <url>/2022/11/14/ccna-security-official-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-19</title>
    <url>/2022/11/14/ccna-security-official-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-2</title>
    <url>/2022/11/14/ccna-security-official-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-20</title>
    <url>/2022/11/14/ccna-security-official-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-21</title>
    <url>/2022/11/14/ccna-security-official-lab-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-22</title>
    <url>/2022/11/14/ccna-security-official-lab-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-23</title>
    <url>/2022/11/14/ccna-security-official-lab-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-24</title>
    <url>/2022/11/14/ccna-security-official-lab-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-25</title>
    <url>/2022/11/14/ccna-security-official-lab-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-26</title>
    <url>/2022/11/14/ccna-security-official-lab-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-27</title>
    <url>/2022/11/14/ccna-security-official-lab-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-28</title>
    <url>/2022/11/14/ccna-security-official-lab-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-29</title>
    <url>/2022/11/14/ccna-security-official-lab-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-30</title>
    <url>/2022/11/14/ccna-security-official-lab-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-31</title>
    <url>/2022/11/14/ccna-security-official-lab-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-3</title>
    <url>/2022/11/14/ccna-security-official-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-32</title>
    <url>/2022/11/14/ccna-security-official-lab-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-33</title>
    <url>/2022/11/14/ccna-security-official-lab-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-34</title>
    <url>/2022/11/14/ccna-security-official-lab-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-35</title>
    <url>/2022/11/14/ccna-security-official-lab-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-36</title>
    <url>/2022/11/14/ccna-security-official-lab-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-37</title>
    <url>/2022/11/14/ccna-security-official-lab-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-38</title>
    <url>/2022/11/14/ccna-security-official-lab-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-39</title>
    <url>/2022/11/14/ccna-security-official-lab-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-4</title>
    <url>/2022/11/14/ccna-security-official-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-40</title>
    <url>/2022/11/14/ccna-security-official-lab-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-41</title>
    <url>/2022/11/14/ccna-security-official-lab-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-42</title>
    <url>/2022/11/14/ccna-security-official-lab-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-44</title>
    <url>/2022/11/14/ccna-security-official-lab-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-43</title>
    <url>/2022/11/14/ccna-security-official-lab-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-45</title>
    <url>/2022/11/14/ccna-security-official-lab-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-46</title>
    <url>/2022/11/14/ccna-security-official-lab-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-47</title>
    <url>/2022/11/14/ccna-security-official-lab-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-48</title>
    <url>/2022/11/14/ccna-security-official-lab-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-49</title>
    <url>/2022/11/14/ccna-security-official-lab-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-5</title>
    <url>/2022/11/14/ccna-security-official-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-50</title>
    <url>/2022/11/14/ccna-security-official-lab-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-52</title>
    <url>/2022/11/14/ccna-security-official-lab-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-51</title>
    <url>/2022/11/14/ccna-security-official-lab-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-53</title>
    <url>/2022/11/14/ccna-security-official-lab-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-54</title>
    <url>/2022/11/14/ccna-security-official-lab-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-55</title>
    <url>/2022/11/14/ccna-security-official-lab-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-56</title>
    <url>/2022/11/14/ccna-security-official-lab-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-57</title>
    <url>/2022/11/14/ccna-security-official-lab-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-58</title>
    <url>/2022/11/14/ccna-security-official-lab-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-59</title>
    <url>/2022/11/14/ccna-security-official-lab-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-6</title>
    <url>/2022/11/14/ccna-security-official-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-60</title>
    <url>/2022/11/14/ccna-security-official-lab-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-61</title>
    <url>/2022/11/14/ccna-security-official-lab-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-62</title>
    <url>/2022/11/14/ccna-security-official-lab-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-8</title>
    <url>/2022/11/14/ccna-security-official-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-9</title>
    <url>/2022/11/14/ccna-security-official-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna-security-official-lab-7</title>
    <url>/2022/11/14/ccna-security-official-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-1</title>
    <url>/2022/10/30/ccna1-1/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-1</title>
    <url>/2022/11/12/ccna1-official-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-10</title>
    <url>/2022/11/12/ccna1-official-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-11</title>
    <url>/2022/11/12/ccna1-official-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-12</title>
    <url>/2022/11/12/ccna1-official-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-13</title>
    <url>/2022/11/12/ccna1-official-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-14</title>
    <url>/2022/11/12/ccna1-official-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-15</title>
    <url>/2022/11/12/ccna1-official-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-16</title>
    <url>/2022/11/12/ccna1-official-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-17</title>
    <url>/2022/11/12/ccna1-official-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-18</title>
    <url>/2022/11/12/ccna1-official-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-19</title>
    <url>/2022/11/12/ccna1-official-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-2</title>
    <url>/2022/11/12/ccna1-official-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-20</title>
    <url>/2022/11/12/ccna1-official-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-21</title>
    <url>/2022/11/12/ccna1-official-lab-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-22</title>
    <url>/2022/11/12/ccna1-official-lab-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-23</title>
    <url>/2022/11/12/ccna1-official-lab-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-24</title>
    <url>/2022/11/12/ccna1-official-lab-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-25</title>
    <url>/2022/11/12/ccna1-official-lab-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-26</title>
    <url>/2022/11/12/ccna1-official-lab-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-27</title>
    <url>/2022/11/12/ccna1-official-lab-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-28</title>
    <url>/2022/11/12/ccna1-official-lab-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-29</title>
    <url>/2022/11/12/ccna1-official-lab-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-3</title>
    <url>/2022/11/12/ccna1-official-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-30</title>
    <url>/2022/11/12/ccna1-official-lab-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-31</title>
    <url>/2022/11/12/ccna1-official-lab-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-32</title>
    <url>/2022/11/12/ccna1-official-lab-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-33</title>
    <url>/2022/11/12/ccna1-official-lab-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-34</title>
    <url>/2022/11/12/ccna1-official-lab-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object>·</p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-35</title>
    <url>/2022/11/12/ccna1-official-lab-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-36</title>
    <url>/2022/11/12/ccna1-official-lab-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-37</title>
    <url>/2022/11/12/ccna1-official-lab-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-38</title>
    <url>/2022/11/12/ccna1-official-lab-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-39</title>
    <url>/2022/11/12/ccna1-official-lab-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-4</title>
    <url>/2022/11/12/ccna1-official-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-41</title>
    <url>/2022/11/12/ccna1-official-lab-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-40</title>
    <url>/2022/11/12/ccna1-official-lab-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-42</title>
    <url>/2022/11/12/ccna1-official-lab-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-43</title>
    <url>/2022/11/12/ccna1-official-lab-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-44</title>
    <url>/2022/11/12/ccna1-official-lab-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-45</title>
    <url>/2022/11/12/ccna1-official-lab-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-46</title>
    <url>/2022/11/12/ccna1-official-lab-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-47</title>
    <url>/2022/11/12/ccna1-official-lab-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-48</title>
    <url>/2022/11/12/ccna1-official-lab-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-49</title>
    <url>/2022/11/12/ccna1-official-lab-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-5</title>
    <url>/2022/11/12/ccna1-official-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-50</title>
    <url>/2022/11/12/ccna1-official-lab-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-52</title>
    <url>/2022/11/12/ccna1-official-lab-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-51</title>
    <url>/2022/11/12/ccna1-official-lab-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-53</title>
    <url>/2022/11/12/ccna1-official-lab-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-54</title>
    <url>/2022/11/12/ccna1-official-lab-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-55</title>
    <url>/2022/11/12/ccna1-official-lab-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-56</title>
    <url>/2022/11/12/ccna1-official-lab-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-7</title>
    <url>/2022/11/12/ccna1-official-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-6</title>
    <url>/2022/11/12/ccna1-official-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-8</title>
    <url>/2022/11/12/ccna1-official-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-lab-9</title>
    <url>/2022/11/12/ccna1-official-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-1</title>
    <url>/2022/11/12/ccna1-official-material-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-10</title>
    <url>/2022/11/12/ccna1-official-material-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-12</title>
    <url>/2022/11/12/ccna1-official-material-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-11</title>
    <url>/2022/11/12/ccna1-official-material-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-13</title>
    <url>/2022/11/12/ccna1-official-material-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-14</title>
    <url>/2022/11/12/ccna1-official-material-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-15</title>
    <url>/2022/11/12/ccna1-official-material-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-16</title>
    <url>/2022/11/12/ccna1-official-material-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-17</title>
    <url>/2022/11/12/ccna1-official-material-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-18</title>
    <url>/2022/11/12/ccna1-official-material-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-19</title>
    <url>/2022/11/12/ccna1-official-material-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-2</title>
    <url>/2022/11/12/ccna1-official-material-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-20</title>
    <url>/2022/11/12/ccna1-official-material-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-21</title>
    <url>/2022/11/12/ccna1-official-material-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-22</title>
    <url>/2022/11/12/ccna1-official-material-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-23</title>
    <url>/2022/11/12/ccna1-official-material-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-24</title>
    <url>/2022/11/12/ccna1-official-material-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-25</title>
    <url>/2022/11/12/ccna1-official-material-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-26</title>
    <url>/2022/11/12/ccna1-official-material-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-27</title>
    <url>/2022/11/12/ccna1-official-material-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-28</title>
    <url>/2022/11/12/ccna1-official-material-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-29</title>
    <url>/2022/11/12/ccna1-official-material-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-3</title>
    <url>/2022/11/12/ccna1-official-material-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-4</title>
    <url>/2022/11/12/ccna1-official-material-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-5</title>
    <url>/2022/11/12/ccna1-official-material-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-6</title>
    <url>/2022/11/12/ccna1-official-material-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-7</title>
    <url>/2022/11/12/ccna1-official-material-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-8</title>
    <url>/2022/11/12/ccna1-official-material-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna1-official-material-9</title>
    <url>/2022/11/12/ccna1-official-material-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-1</title>
    <url>/2022/11/12/ccna2-official-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-10</title>
    <url>/2022/11/12/ccna2-official-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-11</title>
    <url>/2022/11/12/ccna2-official-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-12</title>
    <url>/2022/11/12/ccna2-official-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-13</title>
    <url>/2022/11/12/ccna2-official-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-14</title>
    <url>/2022/11/12/ccna2-official-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-15</title>
    <url>/2022/11/12/ccna2-official-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-16</title>
    <url>/2022/11/12/ccna2-official-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-17</title>
    <url>/2022/11/12/ccna2-official-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-18</title>
    <url>/2022/11/12/ccna2-official-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-19</title>
    <url>/2022/11/12/ccna2-official-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-2</title>
    <url>/2022/11/12/ccna2-official-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-20</title>
    <url>/2022/11/12/ccna2-official-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-21</title>
    <url>/2022/11/12/ccna2-official-lab-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-22</title>
    <url>/2022/11/12/ccna2-official-lab-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-24</title>
    <url>/2022/11/12/ccna2-official-lab-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-23</title>
    <url>/2022/11/12/ccna2-official-lab-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-25</title>
    <url>/2022/11/12/ccna2-official-lab-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-26</title>
    <url>/2022/11/12/ccna2-official-lab-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-27</title>
    <url>/2022/11/12/ccna2-official-lab-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-28</title>
    <url>/2022/11/12/ccna2-official-lab-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-3</title>
    <url>/2022/11/12/ccna2-official-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-29</title>
    <url>/2022/11/12/ccna2-official-lab-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-31</title>
    <url>/2022/11/12/ccna2-official-lab-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-30</title>
    <url>/2022/11/12/ccna2-official-lab-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-32</title>
    <url>/2022/11/12/ccna2-official-lab-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-33</title>
    <url>/2022/11/12/ccna2-official-lab-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-34</title>
    <url>/2022/11/12/ccna2-official-lab-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-35</title>
    <url>/2022/11/12/ccna2-official-lab-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-36</title>
    <url>/2022/11/12/ccna2-official-lab-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-37</title>
    <url>/2022/11/12/ccna2-official-lab-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-38</title>
    <url>/2022/11/12/ccna2-official-lab-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-39</title>
    <url>/2022/11/12/ccna2-official-lab-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-4</title>
    <url>/2022/11/12/ccna2-official-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-40</title>
    <url>/2022/11/12/ccna2-official-lab-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-41</title>
    <url>/2022/11/12/ccna2-official-lab-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-42</title>
    <url>/2022/11/12/ccna2-official-lab-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-43</title>
    <url>/2022/11/12/ccna2-official-lab-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-44</title>
    <url>/2022/11/12/ccna2-official-lab-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-46</title>
    <url>/2022/11/12/ccna2-official-lab-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-45</title>
    <url>/2022/11/12/ccna2-official-lab-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-47</title>
    <url>/2022/11/12/ccna2-official-lab-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-48</title>
    <url>/2022/11/12/ccna2-official-lab-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-49</title>
    <url>/2022/11/12/ccna2-official-lab-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-5</title>
    <url>/2022/11/12/ccna2-official-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-50</title>
    <url>/2022/11/12/ccna2-official-lab-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-51</title>
    <url>/2022/11/12/ccna2-official-lab-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-52</title>
    <url>/2022/11/12/ccna2-official-lab-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-53</title>
    <url>/2022/11/12/ccna2-official-lab-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-54</title>
    <url>/2022/11/12/ccna2-official-lab-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-55</title>
    <url>/2022/11/12/ccna2-official-lab-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-56</title>
    <url>/2022/11/12/ccna2-official-lab-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-58</title>
    <url>/2022/11/12/ccna2-official-lab-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-57</title>
    <url>/2022/11/12/ccna2-official-lab-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-59</title>
    <url>/2022/11/12/ccna2-official-lab-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-6</title>
    <url>/2022/11/12/ccna2-official-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-60</title>
    <url>/2022/11/12/ccna2-official-lab-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-61</title>
    <url>/2022/11/12/ccna2-official-lab-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-63</title>
    <url>/2022/11/12/ccna2-official-lab-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-62</title>
    <url>/2022/11/12/ccna2-official-lab-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-64</title>
    <url>/2022/11/12/ccna2-official-lab-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-65</title>
    <url>/2022/11/12/ccna2-official-lab-65/</url>
    <content><![CDATA[<p><object data="65.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-66</title>
    <url>/2022/11/12/ccna2-official-lab-66/</url>
    <content><![CDATA[<p><object data="66.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-67</title>
    <url>/2022/11/12/ccna2-official-lab-67/</url>
    <content><![CDATA[<p><object data="67.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-68</title>
    <url>/2022/11/12/ccna2-official-lab-68/</url>
    <content><![CDATA[<p><object data="68.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-69</title>
    <url>/2022/11/12/ccna2-official-lab-69/</url>
    <content><![CDATA[<p><object data="69.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-7</title>
    <url>/2022/11/12/ccna2-official-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-8</title>
    <url>/2022/11/12/ccna2-official-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-lab-9</title>
    <url>/2022/11/12/ccna2-official-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-1</title>
    <url>/2022/11/12/ccna2-official-material-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-10</title>
    <url>/2022/11/12/ccna2-official-material-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-11</title>
    <url>/2022/11/12/ccna2-official-material-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-13</title>
    <url>/2022/11/12/ccna2-official-material-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-12</title>
    <url>/2022/11/12/ccna2-official-material-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-14</title>
    <url>/2022/11/12/ccna2-official-material-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-15</title>
    <url>/2022/11/12/ccna2-official-material-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-16</title>
    <url>/2022/11/12/ccna2-official-material-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-17</title>
    <url>/2022/11/12/ccna2-official-material-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-18</title>
    <url>/2022/11/12/ccna2-official-material-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-19</title>
    <url>/2022/11/12/ccna2-official-material-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-2</title>
    <url>/2022/11/12/ccna2-official-material-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-20</title>
    <url>/2022/11/12/ccna2-official-material-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-22</title>
    <url>/2022/11/12/ccna2-official-material-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-21</title>
    <url>/2022/11/12/ccna2-official-material-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-23</title>
    <url>/2022/11/12/ccna2-official-material-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-24</title>
    <url>/2022/11/12/ccna2-official-material-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-26</title>
    <url>/2022/11/12/ccna2-official-material-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-25</title>
    <url>/2022/11/12/ccna2-official-material-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-27</title>
    <url>/2022/11/12/ccna2-official-material-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-3</title>
    <url>/2022/11/12/ccna2-official-material-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-4</title>
    <url>/2022/11/12/ccna2-official-material-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-5</title>
    <url>/2022/11/12/ccna2-official-material-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-7</title>
    <url>/2022/11/12/ccna2-official-material-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-6</title>
    <url>/2022/11/12/ccna2-official-material-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-8</title>
    <url>/2022/11/12/ccna2-official-material-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna2-official-material-9</title>
    <url>/2022/11/12/ccna2-official-material-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-10</title>
    <url>/2022/11/12/ccna3-official-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-11</title>
    <url>/2022/11/12/ccna3-official-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-1</title>
    <url>/2022/11/12/ccna3-official-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-12</title>
    <url>/2022/11/12/ccna3-official-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-13</title>
    <url>/2022/11/12/ccna3-official-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-14</title>
    <url>/2022/11/12/ccna3-official-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-15</title>
    <url>/2022/11/12/ccna3-official-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-16</title>
    <url>/2022/11/12/ccna3-official-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-17</title>
    <url>/2022/11/12/ccna3-official-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-18</title>
    <url>/2022/11/12/ccna3-official-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-19</title>
    <url>/2022/11/12/ccna3-official-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-2</title>
    <url>/2022/11/12/ccna3-official-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-20</title>
    <url>/2022/11/12/ccna3-official-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-21</title>
    <url>/2022/11/12/ccna3-official-lab-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-22</title>
    <url>/2022/11/12/ccna3-official-lab-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-23</title>
    <url>/2022/11/12/ccna3-official-lab-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-24</title>
    <url>/2022/11/12/ccna3-official-lab-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-25</title>
    <url>/2022/11/12/ccna3-official-lab-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-26</title>
    <url>/2022/11/12/ccna3-official-lab-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-27</title>
    <url>/2022/11/12/ccna3-official-lab-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-28</title>
    <url>/2022/11/12/ccna3-official-lab-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-3</title>
    <url>/2022/11/12/ccna3-official-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-4</title>
    <url>/2022/11/12/ccna3-official-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-5</title>
    <url>/2022/11/12/ccna3-official-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-6</title>
    <url>/2022/11/12/ccna3-official-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-8</title>
    <url>/2022/11/12/ccna3-official-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-7</title>
    <url>/2022/11/12/ccna3-official-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-lab-9</title>
    <url>/2022/11/12/ccna3-official-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-10</title>
    <url>/2022/11/12/ccna3-official-material-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-1</title>
    <url>/2022/11/12/ccna3-official-material-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-11</title>
    <url>/2022/11/12/ccna3-official-material-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-12</title>
    <url>/2022/11/12/ccna3-official-material-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-13</title>
    <url>/2022/11/12/ccna3-official-material-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-14</title>
    <url>/2022/11/12/ccna3-official-material-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-15</title>
    <url>/2022/11/12/ccna3-official-material-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-16</title>
    <url>/2022/11/12/ccna3-official-material-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-18</title>
    <url>/2022/11/12/ccna3-official-material-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-19</title>
    <url>/2022/11/12/ccna3-official-material-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-17</title>
    <url>/2022/11/12/ccna3-official-material-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-2</title>
    <url>/2022/11/12/ccna3-official-material-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-21</title>
    <url>/2022/11/12/ccna3-official-material-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-22</title>
    <url>/2022/11/12/ccna3-official-material-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-23</title>
    <url>/2022/11/12/ccna3-official-material-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-24</title>
    <url>/2022/11/12/ccna3-official-material-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-20</title>
    <url>/2022/11/12/ccna3-official-material-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-28</title>
    <url>/2022/11/12/ccna3-official-material-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-25</title>
    <url>/2022/11/12/ccna3-official-material-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-26</title>
    <url>/2022/11/12/ccna3-official-material-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-27</title>
    <url>/2022/11/12/ccna3-official-material-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-29</title>
    <url>/2022/11/12/ccna3-official-material-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-3</title>
    <url>/2022/11/12/ccna3-official-material-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-4</title>
    <url>/2022/11/12/ccna3-official-material-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-5</title>
    <url>/2022/11/12/ccna3-official-material-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-7</title>
    <url>/2022/11/12/ccna3-official-material-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-9</title>
    <url>/2022/11/12/ccna3-official-material-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-8</title>
    <url>/2022/11/12/ccna3-official-material-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccna3-official-material-6</title>
    <url>/2022/11/12/ccna3-official-material-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-1</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-devnet-core-350-901</title>
    <url>/2022/11/17/ccnp-devnet-core-350-901/</url>
    <content><![CDATA[<p><object data="ccnp-devnet-core-350-901.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-10</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-11</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-12</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-13</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-15</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-14</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-17</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-16</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-18</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-19</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-20</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-22</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-21</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-2</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-23</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-26</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-25</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-27</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-28</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-3</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-29</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-30</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-24</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-33</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-32</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-31</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-35</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-34</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-36</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-37</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-38</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-40</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-4</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-41</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-39</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-42</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-43</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-45</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-46</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-44</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-47</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-48</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-5</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-49</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-50</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-51</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-54</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-52</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-56</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-57</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-55</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-58</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-60</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-59</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-6</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-61</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-53</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-62</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-63</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-65</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-65/</url>
    <content><![CDATA[<p><object data="65.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-66</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-66/</url>
    <content><![CDATA[<p><object data="66.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-68</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-68/</url>
    <content><![CDATA[<p><object data="68.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-67</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-67/</url>
    <content><![CDATA[<p><object data="67.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-64</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-8</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-7</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-enarsi-official-lab-9</title>
    <url>/2022/11/14/ccnp-enarsi-official-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-1</title>
    <url>/2022/11/14/ccnp-encor-official-lab-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-1</title>
    <url>/2022/10/30/ccnp-encor-1/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-10</title>
    <url>/2022/11/14/ccnp-encor-official-lab-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-100</title>
    <url>/2022/11/14/ccnp-encor-official-lab-100/</url>
    <content><![CDATA[<p><object data="100.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-101</title>
    <url>/2022/11/14/ccnp-encor-official-lab-101/</url>
    <content><![CDATA[<p><object data="101.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-102</title>
    <url>/2022/11/14/ccnp-encor-official-lab-102/</url>
    <content><![CDATA[<p><object data="102.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-104</title>
    <url>/2022/11/14/ccnp-encor-official-lab-104/</url>
    <content><![CDATA[<p><object data="104.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-103</title>
    <url>/2022/11/14/ccnp-encor-official-lab-103/</url>
    <content><![CDATA[<p><object data="103.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-106</title>
    <url>/2022/11/14/ccnp-encor-official-lab-106/</url>
    <content><![CDATA[<p><object data="106.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-105</title>
    <url>/2022/11/14/ccnp-encor-official-lab-105/</url>
    <content><![CDATA[<p><object data="105.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-107</title>
    <url>/2022/11/14/ccnp-encor-official-lab-107/</url>
    <content><![CDATA[<p><object data="107.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-109</title>
    <url>/2022/11/14/ccnp-encor-official-lab-109/</url>
    <content><![CDATA[<p><object data="109.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-108</title>
    <url>/2022/11/14/ccnp-encor-official-lab-108/</url>
    <content><![CDATA[<p><object data="108.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-11</title>
    <url>/2022/11/14/ccnp-encor-official-lab-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-13</title>
    <url>/2022/11/14/ccnp-encor-official-lab-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-14</title>
    <url>/2022/11/14/ccnp-encor-official-lab-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-16</title>
    <url>/2022/11/14/ccnp-encor-official-lab-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-15</title>
    <url>/2022/11/14/ccnp-encor-official-lab-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-17</title>
    <url>/2022/11/14/ccnp-encor-official-lab-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-18</title>
    <url>/2022/11/14/ccnp-encor-official-lab-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-2</title>
    <url>/2022/11/14/ccnp-encor-official-lab-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-19</title>
    <url>/2022/11/14/ccnp-encor-official-lab-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-20</title>
    <url>/2022/11/14/ccnp-encor-official-lab-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-12</title>
    <url>/2022/11/14/ccnp-encor-official-lab-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-21</title>
    <url>/2022/11/14/ccnp-encor-official-lab-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-22</title>
    <url>/2022/11/14/ccnp-encor-official-lab-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-23</title>
    <url>/2022/11/14/ccnp-encor-official-lab-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-25</title>
    <url>/2022/11/14/ccnp-encor-official-lab-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-27</title>
    <url>/2022/11/14/ccnp-encor-official-lab-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-26</title>
    <url>/2022/11/14/ccnp-encor-official-lab-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-24</title>
    <url>/2022/11/14/ccnp-encor-official-lab-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-29</title>
    <url>/2022/11/14/ccnp-encor-official-lab-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-28</title>
    <url>/2022/11/14/ccnp-encor-official-lab-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-3</title>
    <url>/2022/11/14/ccnp-encor-official-lab-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-30</title>
    <url>/2022/11/14/ccnp-encor-official-lab-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-31</title>
    <url>/2022/11/14/ccnp-encor-official-lab-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-33</title>
    <url>/2022/11/14/ccnp-encor-official-lab-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-32</title>
    <url>/2022/11/14/ccnp-encor-official-lab-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-35</title>
    <url>/2022/11/14/ccnp-encor-official-lab-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-34</title>
    <url>/2022/11/14/ccnp-encor-official-lab-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-37</title>
    <url>/2022/11/14/ccnp-encor-official-lab-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-36</title>
    <url>/2022/11/14/ccnp-encor-official-lab-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-39</title>
    <url>/2022/11/14/ccnp-encor-official-lab-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-4</title>
    <url>/2022/11/14/ccnp-encor-official-lab-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-40</title>
    <url>/2022/11/14/ccnp-encor-official-lab-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-38</title>
    <url>/2022/11/14/ccnp-encor-official-lab-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-41</title>
    <url>/2022/11/14/ccnp-encor-official-lab-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-43</title>
    <url>/2022/11/14/ccnp-encor-official-lab-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-44</title>
    <url>/2022/11/14/ccnp-encor-official-lab-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-45</title>
    <url>/2022/11/14/ccnp-encor-official-lab-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-46</title>
    <url>/2022/11/14/ccnp-encor-official-lab-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-48</title>
    <url>/2022/11/14/ccnp-encor-official-lab-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-47</title>
    <url>/2022/11/14/ccnp-encor-official-lab-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-49</title>
    <url>/2022/11/14/ccnp-encor-official-lab-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-5</title>
    <url>/2022/11/14/ccnp-encor-official-lab-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-42</title>
    <url>/2022/11/14/ccnp-encor-official-lab-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-51</title>
    <url>/2022/11/14/ccnp-encor-official-lab-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-52</title>
    <url>/2022/11/14/ccnp-encor-official-lab-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-50</title>
    <url>/2022/11/14/ccnp-encor-official-lab-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-53</title>
    <url>/2022/11/14/ccnp-encor-official-lab-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-54</title>
    <url>/2022/11/14/ccnp-encor-official-lab-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-55</title>
    <url>/2022/11/14/ccnp-encor-official-lab-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-57</title>
    <url>/2022/11/14/ccnp-encor-official-lab-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-56</title>
    <url>/2022/11/14/ccnp-encor-official-lab-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-58</title>
    <url>/2022/11/14/ccnp-encor-official-lab-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-59</title>
    <url>/2022/11/14/ccnp-encor-official-lab-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-6</title>
    <url>/2022/11/14/ccnp-encor-official-lab-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-60</title>
    <url>/2022/11/14/ccnp-encor-official-lab-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-62</title>
    <url>/2022/11/14/ccnp-encor-official-lab-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-61</title>
    <url>/2022/11/14/ccnp-encor-official-lab-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-63</title>
    <url>/2022/11/14/ccnp-encor-official-lab-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-64</title>
    <url>/2022/11/14/ccnp-encor-official-lab-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-65</title>
    <url>/2022/11/14/ccnp-encor-official-lab-65/</url>
    <content><![CDATA[<p><object data="65.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-66</title>
    <url>/2022/11/14/ccnp-encor-official-lab-66/</url>
    <content><![CDATA[<p><object data="66.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-67</title>
    <url>/2022/11/14/ccnp-encor-official-lab-67/</url>
    <content><![CDATA[<p><object data="67.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-68</title>
    <url>/2022/11/14/ccnp-encor-official-lab-68/</url>
    <content><![CDATA[<p><object data="68.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-7</title>
    <url>/2022/11/14/ccnp-encor-official-lab-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-69</title>
    <url>/2022/11/14/ccnp-encor-official-lab-69/</url>
    <content><![CDATA[<p><object data="69.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-70</title>
    <url>/2022/11/14/ccnp-encor-official-lab-70/</url>
    <content><![CDATA[<p><object data="70.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-72</title>
    <url>/2022/11/14/ccnp-encor-official-lab-72/</url>
    <content><![CDATA[<p><object data="72.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-73</title>
    <url>/2022/11/14/ccnp-encor-official-lab-73/</url>
    <content><![CDATA[<p><object data="73.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-74</title>
    <url>/2022/11/14/ccnp-encor-official-lab-74/</url>
    <content><![CDATA[<p><object data="74.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-75</title>
    <url>/2022/11/14/ccnp-encor-official-lab-75/</url>
    <content><![CDATA[<p><object data="75.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-71</title>
    <url>/2022/11/14/ccnp-encor-official-lab-71/</url>
    <content><![CDATA[<p><object data="71.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-76</title>
    <url>/2022/11/14/ccnp-encor-official-lab-76/</url>
    <content><![CDATA[<p><object data="76.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-77</title>
    <url>/2022/11/14/ccnp-encor-official-lab-77/</url>
    <content><![CDATA[<p><object data="77.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-79</title>
    <url>/2022/11/14/ccnp-encor-official-lab-79/</url>
    <content><![CDATA[<p><object data="79.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-78</title>
    <url>/2022/11/14/ccnp-encor-official-lab-78/</url>
    <content><![CDATA[<p><object data="78.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-8</title>
    <url>/2022/11/14/ccnp-encor-official-lab-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-81</title>
    <url>/2022/11/14/ccnp-encor-official-lab-81/</url>
    <content><![CDATA[<p><object data="81.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-80</title>
    <url>/2022/11/14/ccnp-encor-official-lab-80/</url>
    <content><![CDATA[<p><object data="80.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-82</title>
    <url>/2022/11/14/ccnp-encor-official-lab-82/</url>
    <content><![CDATA[<p><object data="82.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-83</title>
    <url>/2022/11/14/ccnp-encor-official-lab-83/</url>
    <content><![CDATA[<p><object data="83.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-85</title>
    <url>/2022/11/14/ccnp-encor-official-lab-85/</url>
    <content><![CDATA[<p><object data="85.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-84</title>
    <url>/2022/11/14/ccnp-encor-official-lab-84/</url>
    <content><![CDATA[<p><object data="84.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-86</title>
    <url>/2022/11/14/ccnp-encor-official-lab-86/</url>
    <content><![CDATA[<p><object data="86.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-88</title>
    <url>/2022/11/14/ccnp-encor-official-lab-88/</url>
    <content><![CDATA[<p><object data="88.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-89</title>
    <url>/2022/11/14/ccnp-encor-official-lab-89/</url>
    <content><![CDATA[<p><object data="89.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-9</title>
    <url>/2022/11/14/ccnp-encor-official-lab-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-87</title>
    <url>/2022/11/14/ccnp-encor-official-lab-87/</url>
    <content><![CDATA[<p><object data="87.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-90</title>
    <url>/2022/11/14/ccnp-encor-official-lab-90/</url>
    <content><![CDATA[<p><object data="90.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-91</title>
    <url>/2022/11/14/ccnp-encor-official-lab-91/</url>
    <content><![CDATA[<p><object data="91.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-93</title>
    <url>/2022/11/14/ccnp-encor-official-lab-93/</url>
    <content><![CDATA[<p><object data="93.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-94</title>
    <url>/2022/11/14/ccnp-encor-official-lab-94/</url>
    <content><![CDATA[<p><object data="94.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-92</title>
    <url>/2022/11/14/ccnp-encor-official-lab-92/</url>
    <content><![CDATA[<p><object data="92.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-95</title>
    <url>/2022/11/14/ccnp-encor-official-lab-95/</url>
    <content><![CDATA[<p><object data="95.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-96</title>
    <url>/2022/11/14/ccnp-encor-official-lab-96/</url>
    <content><![CDATA[<p><object data="96.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-98</title>
    <url>/2022/11/14/ccnp-encor-official-lab-98/</url>
    <content><![CDATA[<p><object data="98.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-99</title>
    <url>/2022/11/14/ccnp-encor-official-lab-99/</url>
    <content><![CDATA[<p><object data="99.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-encor-official-lab-97</title>
    <url>/2022/11/14/ccnp-encor-official-lab-97/</url>
    <content><![CDATA[<p><object data="97.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>ccnp-ensari-1</title>
    <url>/2022/10/30/ccnp-ensari-1/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccnp-security-implementing-secure-access-solutions-300-208</title>
    <url>/2022/11/17/ccnp-security-implementing-secure-access-solutions-300-208/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccnp-tshoot-642-832学习指南</title>
    <url>/2022/11/17/ccnp-tshoot-642-832%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccnp-switch-642-813学习指南</title>
    <url>/2022/11/17/ccnp-switch-642-813%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>cisco-nx-os-lisp-command-reference</title>
    <url>/2022/11/17/cisco-nx-os-lisp-command-reference/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>cisco-press-designing-for-cisco-internetwork-solutions-desgn</title>
    <url>/2022/11/17/cisco-press-designing-for-cisco-internetwork-solutions-desgn/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>comptia-security-notes</title>
    <url>/2022/10/27/comptia-security-notes/</url>
    <content><![CDATA[<span id="more"></span>

<object data="comptia-security+-cram.pdf" type="application/pdf" width="100%" height="600">

</object>]]></content>
  </entry>
  <entry>
    <title>cisco局域网交换机配置手册</title>
    <url>/2022/11/17/cisco%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE%E6%89%8B%E5%86%8C/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ccnp-security-vpn-642-647</title>
    <url>/2022/11/17/ccnp-security-vpn-642-647/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>fortigate产品实施一本通</title>
    <url>/2022/11/17/fortigate%E4%BA%A7%E5%93%81%E5%AE%9E%E6%96%BD%E4%B8%80%E6%9C%AC%E9%80%9A/</url>
    <content><![CDATA[<p><object data="fortigate产品实施一本通.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>gcp-cdl</title>
    <url>/2022/10/23/gcp-cdl/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Cert-Prep-Google-Cloud-Digital-Leader-14</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Cert-Prep-Google-Cloud-Digital-Leader-14/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-cdl-1.Cloud_Fundamentals</title>
    <url>/2022/11/09/gcp-cdl-1-Cloud-Fundamentals/</url>
    <content><![CDATA[<h1 id="Cloud-Computing"><a href="#Cloud-Computing" class="headerlink" title="Cloud Computing"></a>Cloud Computing</h1><span id="more"></span>

<h2 id="Cloud-Computing-1"><a href="#Cloud-Computing-1" class="headerlink" title="Cloud Computing"></a>Cloud Computing</h2><p>Cloud computing is a remote, virtual pool of on-demand, shared resources that can be rapidly deployed at scale. </p>
<h2 id="Virtualization"><a href="#Virtualization" class="headerlink" title="Virtualization"></a>Virtualization</h2><p>Virtualization allows you to create multiple virtual machines, or VMs, all of which run on a single server. Each of these VMs has its own operating system and set of applications. VMs can all run at the same time, completely independently, without being aware of each other’s existence. Yet, they all still share the same underlying hardware.</p>
<h2 id="Benefits-of-Virtualization"><a href="#Benefits-of-Virtualization" class="headerlink" title="Benefits of Virtualization"></a>Benefits of Virtualization</h2><p>There are many benefits of virtualization, but here are the main ones. Number one, easily share resources. Virtualization makes it much easier for many different people to share the same hardware. You can have someone running Windows, and someone else running Linux, both at the same time and on the same number computer. Number two, less waste. Most computers are not constantly running at 100% utilization. Right now, your computer is probably only using a small fraction of its CPU and memory to play this video. Virtualization gives you access to previously unused resources. And so, it reduces the total number of computers needed. Number three, lower operating costs. With virtualization, you have less computers sitting idle. And less hardware means less space, power, and cooling that are required. Number four, more environmentally friendly. Less hardware that needs to be manufactured and less power consumed means virtualization also helps promote green computing, as well.</p>
<h2 id="Hypervisor"><a href="#Hypervisor" class="headerlink" title="Hypervisor"></a>Hypervisor</h2><p>A hypervisor is a piece of software used to create the virtualized environment. It sits between the physical hardware and the virtual machines, and it creates a shared pool of virtual hardware resources for each of them to access. Any request from a VM to the hardware passes through the hypervisor, thus ensuring that the hardware resources are properly shared as needed.</p>
<h2 id="Cloud-Resources"><a href="#Cloud-Resources" class="headerlink" title="Cloud Resources"></a>Cloud Resources</h2><h3 id="Compute-Resources"><a href="#Compute-Resources" class="headerlink" title="Compute Resources"></a>Compute Resources</h3><p>Compute resources provide on-demand processing power to complete your workloads. Whenever you have a program or a script that needs to run, compute resources can run for you. In your traditional on-premises data centers, these would be the equivalent to the physical servers that you could connect to remotely, and install, and run software on.</p>
<h3 id="Storage-Resources"><a href="#Storage-Resources" class="headerlink" title="Storage Resources"></a>Storage Resources</h3><p>Storage resources allow you to save and retrieve your unstructured data. Any resource that allows you to store things like images or video in the Cloud is classified as a storage resource. In a traditional data center, you would have DAS, or directly attached storage, which includes hard and solid state drives. You might also have had things like NAS, or SAN, network attached storage, or storage area network.</p>
<h3 id="Database-Resources"><a href="#Database-Resources" class="headerlink" title="Database Resources"></a>Database Resources</h3><p>Database resources allow you to store structured sets of data for use in your applications. So the equivalent here in your traditional data center would include databases such as SQL Server, Oracle, or MySQL. And network resources, which allow you to control how all the other resources will communicate with each other. Now, in a traditional data center, this would include things such as routers, switches, firewalls, and load balancers. In Cloud computing, these resources can either be directly managed by the end-user, or management can be abstracted away to create <strong>serverless</strong> offerings. </p>
<p><strong>Serverless</strong> does not mean that there are literally no servers or VMs. It just means that the VMs are hidden. Serverless offerings don’t require any knowledge or interaction with the underlying virtual machines. Instead, you can use a serverless service, and it will silently manage the VMs for you. So, for example, in a serverless database, whenever you need more storage or processing power, it’s automatically added in the background. Then, when less processing power is required, resources can be automatically removed. So you can use a serverless database without having to worry about upgrades, updates, or maintenance.</p>
<h1 id="Cloud-Types"><a href="#Cloud-Types" class="headerlink" title="Cloud Types"></a>Cloud Types</h1><h2 id="public-cloud"><a href="#public-cloud" class="headerlink" title="public cloud"></a>public cloud</h2><p>A public cloud is a collection of virtual on-demand services that are offered to the public. The vendor essentially rents out use of its hardware to many different customers. Each customer can use what they want when they need it. Today, you might only need five web servers, but tomorrow you might need 500. The major cloud vendors are capable of providing more resources than you could possibly use. These resources are typically accessible from anywhere, as long as you have a working internet connection. All back-end maintenance, including power, cooling, upgrades, and repairs are handled by the cloud vendor. The customer will never actually see the hardware, nor will they know the exact physical location of their services or data. They’ll usually be able to specify the geographic region in which it resides. This allows them to have some control for data storage requirements, and for latency.</p>
<h2 id="Private-Cloud"><a href="#Private-Cloud" class="headerlink" title="Private Cloud"></a>Private Cloud</h2><p>A private cloud is similar to a public cloud, but the main difference is that the resources are not shared to the general public. Typically, a company will create its own private cloud and share the resources among its various departments. Everything is hosted, managed, and owned by that company. This allows for direct control over the resources. Enterprises who wish to keep a tighter grasp on security might adopt this architecture. Now, maybe this sounds exactly like the on-premises data center approach, but the difference is that the private cloud uses the same cloud principles as the public. Different teams and different departments are provided on-demand access to the same pool of shared scalable resources. That means you no longer have certain machines dedicated to finance or human resources. Everyone shares the same resources. Accounting can use some VMs to crunch some numbers for a while, and then afterwards, marketing can use those same VMs to render a new video. Resources are shifted around as needed.</p>
<p>With this approach, the company has more control, but it also has a lot more responsibility. Private clouds require a lot of <strong>initial capital</strong> to purchase the hardware and to set up the data centers. Not only this, but additional resources will be needed to maintain everything. Now, individual departments will have more flexibility, but the company as a whole can’t use more resources than it currently physically owns. Plus, any unused resources still have costs associated with them.</p>
<h2 id="Hybrid-Cloud"><a href="#Hybrid-Cloud" class="headerlink" title="Hybrid Cloud"></a>Hybrid Cloud</h2><p>A hybrid cloud is literally the combination of public and private clouds. That is, you’ll have some dedicated resources in a private cloud for predictable workloads, but when you use up all available resources, you can always request more from a public cloud. Now the hybrid model is built by establishing a network link between your private cloud and a public cloud. Thus, you essentially extend the internal network of your private cloud. Now, in theory, this gives you the benefits of both models, so you can choose where each service most appropriately fits. However, in practice, the hybrid model tends to suffer from the negatives of both solutions. And because of this, hybrid clouds are typically short-term configurations. They often represent a transitional state for enterprises. It’s usually more of a way to bridge the transition from on-premises to a public cloud model.</p>
<h1 id="Cloud-Characteristics"><a href="#Cloud-Characteristics" class="headerlink" title="Cloud Characteristics"></a>Cloud Characteristics</h1><h2 id="On-demand-resourcing"><a href="#On-demand-resourcing" class="headerlink" title="On-demand resourcing"></a>On-demand resourcing</h2><p> This essentially means that when you want to provision a resource within the cloud, it’s almost immediately available to you. You allocate them when and where you need them. There’s no more waiting around for hardware to be ordered, installed, cabled, and configured before you can use it. It’s often as simple as filling out a form and clicking submit.</p>
<h2 id="Consumption-based"><a href="#Consumption-based" class="headerlink" title="Consumption-based"></a>Consumption-based</h2><p>With many cloud services, you only pay for what you use. What do I mean by this? Well, if you only have a server running for two hours and then you shut it down, then you’re only going to pay for two hours worth of compute resources. It’s just like your power bill at home and how you only pay for the electricity you use.</p>
<h2 id="Scalability-and-agility"><a href="#Scalability-and-agility" class="headerlink" title="Scalability and agility"></a>Scalability and agility</h2><p>Cloud computing offers you the ability to rapidly scale your environment’s resources, both up and down and in and out. It depends upon the requirements and the demands of your application and services. When scaling up and down, you’re altering the power and performance of a particular instance. Perhaps you’re using one with greater CPU or memory power. When scaling in and out, you’re simply adding or removing instances to your fleet of compute resources. This gives you the ultimate flexibility to keep up with the ever-changing demands of the market. And it frees you up to try new things and experiment with much lower initial costs.</p>
<h2 id="Economy-of-scale"><a href="#Economy-of-scale" class="headerlink" title="Economy of scale"></a>Economy of scale</h2><p> Public cloud vendors can procure hardware for much cheaper due to bulk pricing. Also, it’s simply more economical to create and run large public cloud data centers rather than having each company with its own on premises. You, as the end user can benefit from these exceptionally low resource costs compared to traditional hosting.</p>
<h2 id="Highly-available"><a href="#Highly-available" class="headerlink" title="Highly available"></a>Highly available</h2><p>By design, many of the core services on the public cloud are replicated across different geographic zones and regions. That means that a disruption in one area does not have to result in any downtime. When one zone goes down, you can usually seamlessly switch to another. In this way, you can ensure the durability of your data and the availability of your services.</p>
<h2 id="Flexibility-and-elasticity"><a href="#Flexibility-and-elasticity" class="headerlink" title="Flexibility and elasticity"></a>Flexibility and elasticity</h2><p> Cloud computing offers huge flexibility and elasticity to your design approach. You can choose to have as many or as few resources as you require. You decide how much and how long you want it for, and at what scale. You have full control and can make fairly significant changes without worrying about waste.</p>
<h2 id="Shared-infrastructure"><a href="#Shared-infrastructure" class="headerlink" title="Shared infrastructure"></a>Shared infrastructure</h2><p> As discussed previously, multiple instances running on the same hardware significantly reduces the amount of physical hardware required. This in turn reduces the amount of power, cooling, and space required. All this results in cheaper costs for you, the customer.</p>
<h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><p>This is one of the most discussed topics within cloud computing and many enterprises still have concerns. However, the major public cloud vendors are considered to be more secure than your own data center. The main vendors operate at an exceptionally high standard of security. They manage the security of the cloud by securing the data centers. And it’s up to you to ensure security in the cloud by correctly leveraging the tools, services, and applications available. If you copy your private information to a publicly accessible website, that’s on you. </p>
<h1 id="Cloud-Service-Models"><a href="#Cloud-Service-Models" class="headerlink" title="Cloud Service Models"></a>Cloud Service Models</h1><h2 id="SaaS"><a href="#SaaS" class="headerlink" title="SaaS"></a>SaaS</h2><p>SaaS offerings are ready to use applications. There’s nothing to install or maintain. Users can simply access the application over the internet. Probably one of the most well-known examples of this would be Google Gmail. Any user can sign in and access their email over the internet. You don’t have to install anything. As long as you can bring up a browser, you’re good to go. SaaS offerings require little to no setup, but usually offer the least amount of customization. </p>
<h2 id="PaaS"><a href="#PaaS" class="headerlink" title="PaaS"></a>PaaS</h2><p>Platform as a service offers a greater level of control, but it requires more setup. Essentially, you’re given access to a certain environment and you can build or run whatever you want on it. The underlying architecture, the hardware operating system, and maybe even things like libraries, those are all managed by the cloud vendor. Basically this gives developers a simple platform to deploy and run code on. They can concentrate on writing software and they don’t have to waste a lot of time maintaining, upgrading and patching servers.</p>
<h2 id="IaaS"><a href="#IaaS" class="headerlink" title="IaaS"></a>IaaS</h2><p>The highest level of customization offered is on infrastructure as a service. Now these services give you the option of architecting your own virtual data center. You can start out by configuring a virtual network with routers, firewalls and private IP address ranges. Then you can configure different virtual machine instances. You pick the operating system at the libraries, install any applications. It feels a lot closer to your traditional on premises data center. Now, this service does offer the highest level of customization and control, however, the underlying hardware is still managed by the vendor. So you’re not going to have complete control and there are going to be some limits on what you can and cannot change. </p>
<h1 id="Common-Use-Cases-of-Cloud-Computing"><a href="#Common-Use-Cases-of-Cloud-Computing" class="headerlink" title="Common Use Cases of Cloud Computing"></a>Common Use Cases of Cloud Computing</h1><h2 id="Proof-of-concept"><a href="#Proof-of-concept" class="headerlink" title="Proof of concept"></a>Proof of concept</h2><p>The cloud is a great fit for research and development. If you need to build a proof of concept, the cloud can let you create it at a fraction of the cost. You don’t need a huge initial investment of capital. Access whatever resources you need and then evaluate. Is your prototype going to work? Will it be successful? Is it going to bring in enough revenue to justify its cost? You can use the results of your proof of concept to better predict success or failure before committing too many resources.</p>
<h2 id="Traffic-Bursting"><a href="#Traffic-Bursting" class="headerlink" title="Traffic Bursting"></a>Traffic Bursting</h2><p>A very common scenario for companies is to have periods of time where extra computing resources are required. Perhaps you’re in the retail business and the Christmas season brings with it additional shoppers and orders. In a classic data center environment, to handle the extra load, you would need to have extra hardware on hand that would mostly sit idle the rest of the year. A far better way to handle this would be to leverage on-demand resources from a public cloud. The major cloud vendors can scale to handle almost any load imaginable.</p>
<h2 id="Backup-and-Disaster-Recovery"><a href="#Backup-and-Disaster-Recovery" class="headerlink" title="Backup and Disaster Recovery"></a>Backup and Disaster Recovery</h2><p>Due to the public cloud’s built-in resiliency and durability, it makes for a great backup solution. If something like an earthquake or hurricane strikes the same area your systems are running, then you can simply move them to another location. With the cloud, you have access to virtually unlimited storage space. All of your data can have multiple copies, and those copies can be stored across many different locations. Physically relocating a new data center can take weeks, months, or even years. Moving around in the cloud might only take you a few minutes, depending upon your setup. It also can be significantly cheaper.</p>
<h2 id="Websites-and-other-Web-based-Services"><a href="#Websites-and-other-Web-based-Services" class="headerlink" title="Websites and other Web-based Services"></a>Websites and other Web-based Services</h2><p>Many organizations choose to host their web services in the cloud due to its ability to rapidly scale up and down with demand. In addition, the wide geographic distribution of data centers, gives you the ability to place servers close to your users. It also allows you to access certain services like Content Delivery Networks, or CDNs. A CDN is a set of systems that redirects traffic to a nearby caching server. As a result, this can significantly reduce a website’s latency for its users across the globe.</p>
<h2 id="Testing-and-Development-Environments"><a href="#Testing-and-Development-Environments" class="headerlink" title="Testing and Development Environments"></a>Testing and Development Environments</h2><p>Many companies do not have the extra resources available for proper testing and development. Financially speaking, they can just be too costly. Using the public cloud allows you to spin up servers for a short time and then shut them down when you’re finished. So if you need to occasionally build and test one of your products, you don’t need a set of dedicated machines.</p>
<h2 id="Big-Data"><a href="#Big-Data" class="headerlink" title="Big Data"></a>Big Data</h2><p>The cloud also makes it easier and cheaper to manage massive amounts of data, or big data. Building and maintaining specialized resources to handle huge data sets can be expensive and complicated. By using the cloud, you have access to specialized resources to make your analysis quicker and easier. Having some of these elements managed by a cloud vendor allows you to focus on the data and not worry about the underlying architecture.</p>
]]></content>
  </entry>
  <entry>
    <title>gcp-cdl-2.Cloud-Platform-Services</title>
    <url>/2022/11/09/gcp-cdl-2-Cloud-Platform-Services/</url>
    <content><![CDATA[<h1 id="Compute"><a href="#Compute" class="headerlink" title="Compute"></a>Compute</h1><span id="more"></span>

<p>Compute services are services used for running code.  So, maybe you have purchased some software and you need the hardware to run it.  Or maybe you are developing your own custom software and need machines to build and test it.  Any project that requires processing power and memory can take advantage of a Compute service.</p>
<p>When most people think about Cloud computing, they immediately think of virtual machines.  You can configure virtual machines to do pretty much anything you want.  Google’s main service for creating your own VMs is called Compute Engine.  Compute Engine VMs can either run Linux or Windows.  And there are many different predefined machine types to choose from, each with different amounts of processing power and memory.  General-purpose machines offer the best price-performance ratio.  While optimized machines offer higher levels of performance for either compute, memory or graphics.  You can also create custom machine types as well.</p>
<h2 id="Compute-Engine"><a href="#Compute-Engine" class="headerlink" title="Compute Engine"></a>Compute Engine</h2><p>Compute Engine is “Infrastructure-as-a-Service”.  That means you can use it to build pretty much whatever you want.  You can spin up a powerful Windows instance and install SQL Server.  Or you can spin up a smaller Linux instance and install Apache web server.  The possibilities are near endless.</p>
<p>So that’s great if you want to build everything from scratch, but what if you want to move over some existing infrastructure?  Luckily, Google has made it easy to migrate.  If you are currently using VMware, then you can use <strong>Google Cloud VMware Engine</strong> to run any existing VMs.  Now if you are running bare metal servers or have another type of VM, then you can migrate those over to Compute Engine using Migrate for Compute Engine.  This service makes it really fast and easy to move your workloads over.  It creates a new instance on GCP while copying the data from your original VM.  Once the data transfer is finished, the GCP instance reboots, and then your migration is complete.  In addition to VMware and physical machines, Migrate for Compute Engine can also support VMs running on Amazon Web Services and Microsoft Azure.</p>
<h2 id="Google-Kubernetes-Engine"><a href="#Google-Kubernetes-Engine" class="headerlink" title="Google Kubernetes Engine"></a>Google Kubernetes Engine</h2><p>Virtual machines are not the only compute resource.  These days, <strong>containers</strong> have become increasingly popular.  Containers are somewhat like virtual machines, except they don’t include the operating system.  This means that they lose a little bit of flexibility, but the upside is that containers are much more lightweight.  They take up less disk space and they are faster to start up and shut down.</p>
<p><strong>Google Kubernetes Engine</strong> (or GKE) is used for running containers on Google.  It makes it easy to deploy, maintain and scale your containerized applications.  It also includes features for logging, monitoring, and health management.  Now, <font color="orange">some people want to spread out their containers to run across multiple cloud providers</font>.  And Google has created a product just for this.  This is called <font color="pink"><strong>Anthos</strong></font>.  With Anthos, you can run many different containers across multiple locations.  So you could have some running on-premises, some on GCP, and some on AWS.   Anthos provides a single command interface that controls and monitors everything.  So if you are building a hybrid environment, you might want to check Anthos out. </p>
<h2 id="Anthos"><a href="#Anthos" class="headerlink" title="Anthos"></a>Anthos</h2><p>If you are interested in converting some of your VMs to containers. Google makes this easy with Migrate for Anthos.  Just pick a VM and it will be transformed into a GKE container.  You can also combine Migrate for Compute Engine with Migrate for Anthos to convert a physical server to a container, if you wish.</p>
<p>While Compute Engine (CE) and Google Kubernetes Engine (GKE) give you a lot of power, they do require quite a lot of work.  You have to provision instances.  You have to be able to pick the right machine types.  You have to apply the latest patches and security updates.  If you already know how to do all this, then it is probably not a big deal.  But a lot of times customers don’t know and don’t care about this level of detail.  This is where Google’s “serverless” options come in.  </p>
<h2 id="App-Engine"><a href="#App-Engine" class="headerlink" title="App Engine"></a>App Engine</h2><p>Google has a “Platform-as-a-Service” offering called App Engine.  App Engine lets you run web and mobile applications without having to worry about the underlying infrastructure.  You just upload your code and let GCP take care of the rest.  It will provision and scale the underlying resources up and down automatically.  When there is little to no traffic, App Engine will scale down so that you are charged less.  When your app starts receiving lots of traffic, it will scale up to handle the load.  Compute Engine gives you far more control and flexibility.  But App Engine provides simplicity and ease-of-use.</p>
<h2 id="Cloud-Run"><a href="#Cloud-Run" class="headerlink" title="Cloud Run"></a>Cloud Run</h2><p>Similarly, Google has a serverless offering for containers, called Cloud Run.  If you have a complex application that involves many different containers, then you’ll probably want to stick with using GKE.  But if your application runs inside a single container, then Cloud Run is much easier to use.   Just upload your container and let Cloud Run deploy it as a stateless, auto scaling service.</p>
<h2 id="Cloud-Functions"><a href="#Cloud-Functions" class="headerlink" title="Cloud Functions"></a>Cloud Functions</h2><p>So App Engine is for running applications and Cloud Run is for running containers.  But what if you just want to call a simple function?  Well, there is a third serverless option for that as well.  <font color="orange">Cloud Functions can create small, single-purpose functions that respond to events.</font>  For example, you could configure a Cloud Function to be triggered whenever a file is uploaded or whenever a database is changed.  Cloud Functions are great for adding a little extra functionality without having to create something far more complicated.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>If you want to run a Windows application, you should pick Compute Engine.<br>If you want to run a Java or Python app, then App Engine would probably be the best choice.<br>For running a single container, I would choose Cloud Run.<br>For a multiple container application, then you probably want to choose GKE.<br>Unless you also want to distribute your containers across multiple cloud vendors, then you would pick Anthos.<br>And if you just want to run a simple function whenever an event occurs, Cloud Functions would be the right tool.</p>
<h1 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h1><p>Storage services are all about storing data.  Different types of data require different types of services.  For example, data can be divided into two main types: structured and unstructured.  Structured data is composed of clearly defined data types and patterns.  Think of stuff like names, dates and credit card numbers.  Structured data is easy to search and usually is kept in a relational database.  Unstructured data is just the opposite.  It is more freeform and has no obvious organization.  So think about things like music, photos and video.</p>
<p>When most people think of storage, they probably think of files in a filesystem.  This would be an excellent example of unstructured data.  If you want to read and write files to the cloud, then you can use Google Cloud Storage.  Cloud Storage is perfect for serving web pages, archiving log files, or you can even use it as a data lake.  A data lake is basically a repository of raw data that can be used for later analysis or machine learning.  Essentially, it is just a really big collection of unorganized data.</p>
<p>Cloud Storage is fast, secure, durable, and has almost unlimited capacity.  Because there are different types of unstructured data, Cloud Storage offers several different storage classes:</p>
<h2 id="Standard-Storage"><a href="#Standard-Storage" class="headerlink" title="Standard Storage"></a>Standard Storage</h2><p>Standard storage is best for short-lived or frequently accessed data.  This class costs the most, but there is no minimum for length of storage.</p>
<h2 id="Nearline-Storage"><a href="#Nearline-Storage" class="headerlink" title="Nearline Storage"></a>Nearline Storage</h2><p>Nearline storage is best when you need to store things for a longer period of time (at least 30-days) and need to access it less frequently (eg: once per month or less).  Files stored in nearline will cost less than standard.</p>
<h2 id="Coldline-storage"><a href="#Coldline-storage" class="headerlink" title="Coldline storage"></a>Coldline storage</h2><p>Coldline storage is even cheaper, but it has a longer storage minimum (90 days) and should only be used for files you need to access four times a year or less.</p>
<h2 id="Archive-Storage"><a href="#Archive-Storage" class="headerlink" title="Archive Storage"></a>Archive Storage</h2><p>Archive storage is the cheapest.  This is the best choice when you need to keep files for a long time due to compliance.  Archive storage must be kept for at least 365 days, and it should only be accessed less than once a year.<br>All four storage classes give you immediate access to your files. This is different from some other cloud providers, where the lowest cost storage can take hours to access.</p>
<p>Now while it stores files, Cloud Storage does not work exactly like a traditional file system.  It is considered <strong>“object storage”</strong>.  So there are no actual directories, and everything is kept inside “buckets”.  You also cannot edit or update part of a file.  You can only delete and recreate it.  If you need “block level” storage access with a true hierarchical structure, you can use Filestore instead.   </p>
<h2 id="Filestore"><a href="#Filestore" class="headerlink" title="Filestore"></a>Filestore</h2><p>Filestore can be used to create NFS-compatible file shares that can be mounted on your virtual machines and containers.  If you just want to store and share files, Cloud Storage is perfect.  But if you need lower level block access or say you need to constantly append data to the end of a file, Firestore is a much better match.</p>
<h2 id="Cloud-SQL"><a href="#Cloud-SQL" class="headerlink" title="Cloud SQL"></a>Cloud SQL</h2><p>Now these options are fine if you just want to store your data in files.  But what about databases?  Well Google has several services for those too.  If you want to store structured data inside organized tables, columns and rows (much like a traditional SQL database) then Cloud SQL could be a good choice.  It is fully-managed by Google, so it is very easy to get started.  And it supports the most common database engines: MySQL, PostgreSQL, and Microsoft SQL Server.  So if you are already using one of those, you can easily migrate to Cloud SQL and then let Google manage the details for you.  Cloud SQL is perfect for storing data you need to sort, transform, and search.</p>
<h2 id="Cloud-Spanner"><a href="#Cloud-Spanner" class="headerlink" title="Cloud Spanner"></a>Cloud Spanner</h2><p>If for some reason Cloud SQL isn’t powerful enough, then Google offers something even better: Cloud Spanner.  Cloud Spanner is unique because it is a relational database that’s massively scalable. You can get much higher performance than Cloud SQL, however it comes with a higher cost.  Cloud Spanner is for companies that need an extremely powerful, multi-regional database that can handle a heavy amount of I&#x2F;O.</p>
<h2 id="Big-Data"><a href="#Big-Data" class="headerlink" title="Big Data"></a>Big Data</h2><p>Finally, if you need to store and work with structured “Big Data” (which is extremely large and complex data sets) then BigQuery might be your best bet.  BigQuery is Google’s data warehouse service.  Now, a data warehouse stores data from multiple sources, including data lakes and databases, and can be used to analyze huge, multidimensional datasets.  Databases are optimized for transactions.  But data warehouses are optimized for analytics.  BigQuery can process petabytes of data and it integrates with many other services.  For example, Looker (a business intelligence solution) works with BigQuery to help you explore your data and share insights in real time.</p>
<p>Of course, Google also supports non-relational or <font color="red"><strong>“NoSQL”</strong> </font>databases as well.  NoSQL databases do not use tables, columns, rows, or schemas to organize data and are particularly useful for storing unstructured data.  NoSQL supports flexible data models, it scales horizontally, and it has incredibly fast queries.  However, searching, sorting and joining data is much more limited.</p>
<p>There are three main options here, and they include:</p>
<h2 id="Firestore"><a href="#Firestore" class="headerlink" title="Firestore"></a>Firestore</h2><p>Firestore, which is ideal for building client-side mobile and web applications<br>Firebase, which is best for syncing data between users in real-time, such as in collaboration apps</p>
<h2 id="Bigtable"><a href="#Bigtable" class="headerlink" title="Bigtable"></a>Bigtable</h2><p>Bigtable, which is best for running large analytical workloads</p>
<h2 id="Summary-1"><a href="#Summary-1" class="headerlink" title="Summary"></a>Summary</h2><p>If you need to store files for sharing, then Cloud Storage will probably be your best option.</p>
<p>If you need to edit and update files, then you might want to look at using Filestore. </p>
<p>For SQL databases you have three main choices:</p>
<p>Cloud SQL is great for when you need a standard MySQL, PostgreSQL, or Microsoft SQL Server</p>
<p>Cloud Spanner will handle larger workloads that Cloud SQL can’t</p>
<p>Big Query is great for creating a data warehouse for analytics</p>
<p>You also have three choices when it comes to noSQL databases as well:</p>
<p>Firestore is great for smaller applications (such as web and mobile)</p>
<p>Firebase is better for larger datasets</p>
<p>Bigtable is best for running very large analytical workloads</p>
<p>That should cover the main storage offerings on GCP. </p>
<h1 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h1><p>Google networking services are focused on allowing your other resources to connect and communicate.  Your Compute and Storage resources can be as accessible or isolated as you need.  You can reroute traffic when a VMs fails.  Or throttle high traffic so that a database is not overwhelmed.  Also, networking services include setting policies and rules that ensure that only authorized connections are allowed.</p>
<h2 id="VPC"><a href="#VPC" class="headerlink" title="VPC"></a>VPC</h2><p>Virtual Private Clouds (or VPC for short) allow you to organize and share your resources.  VPCs are networks that are logically isolated from each other.  VPCs can be used to group or separate VMs and containers.  You can also divide a VPC into sub-networks, define routes, and specify how traffic should flow between them.</p>
<p>By default, all incoming traffic to a VPC is blocked, and all outgoing traffic is allowed.  This protects your VPC from outside access, but allows your resources to still connect to the internet.  By creating firewall rules, you have the ability to override this default behavior.  So you can block outbound traffic in case you want to prevent a resource from accessing the internet.  Or you can allow external access to a public web server.  You can also control which VPCs can connect to each other using a service called VPC Network Peering.</p>
<h2 id="Cloud-VPN"><a href="#Cloud-VPN" class="headerlink" title="Cloud VPN"></a>Cloud VPN</h2><p>Now, what if you want to connect a VPC to an external network outside of Google?  For example, maybe you wish to route traffic between your own private data centers.  There are several ways of accomplishing this.  First, you can create a secure connection to a VPC using Cloud VPN.  VPN stands for Virtual Private Network.  A VPN uses the public internet to send encrypted traffic back and forth.  This works, but it does mean that any slowdown or disruption of the internet can affect your internal connections as well.  </p>
<h2 id="Cloud-Interconnect"><a href="#Cloud-Interconnect" class="headerlink" title="Cloud Interconnect"></a>Cloud Interconnect</h2><p>So, if you want even greater security and reliability, you can use Cloud Interconnect instead.  Cloud Interconnect is much more expensive than a VPN, but it provides a direct, dedicated connection to Google which results in higher speed and reliability.  Now as a third option, you can also choose Direct Peering by coordinating with your local internet service provider.  Peering is free, but it depends on your ISP.  It’s not really well-integrated with GCP and requires a lot more setup.</p>
<h2 id="Load-Balancers"><a href="#Load-Balancers" class="headerlink" title="Load Balancers"></a>Load Balancers</h2><p>Google has many other networking services as well.  For example, Load Balancers help distribute network traffic among groups of resources, so that no individual part of your infrastructure gets overwhelmed.  </p>
<h2 id="Cloud-Armor"><a href="#Cloud-Armor" class="headerlink" title="Cloud Armor"></a>Cloud Armor</h2><p>Cloud Armor works with your load balancers to provide built-in defenses against application and Denial of Service attacks.  </p>
<h2 id="Cloud-DNS"><a href="#Cloud-DNS" class="headerlink" title="Cloud DNS"></a>Cloud DNS</h2><p>Cloud DNS allows you to create and manage millions of DNS records, for both public and private domains.  </p>
<h2 id="Cloud-CDN"><a href="#Cloud-CDN" class="headerlink" title="Cloud CDN"></a>Cloud CDN</h2><p>And Cloud CDN can accelerate your web and application content by using Google’s globally distributed caches.</p>
<h2 id="Summary-2"><a href="#Summary-2" class="headerlink" title="Summary"></a>Summary</h2><p>You group your VMs into VPCs and then create firewall rules to isolate or connect them to the internet<br>Cloud VPN, Interconnect, and Peering all can be used to connect your corporate network to GCP<br>Load balancers are used for distributing traffic across multiple resources<br>Cloud Armor helps block internet attacks<br>Cloud DNS manages domain names<br>Cloud CDN uses caching to accelerate content delivery<br>So those are the most commonly used Networking services on GCP.</p>
<h1 id="Artificial-Intelligence-and-Machine-Learning"><a href="#Artificial-Intelligence-and-Machine-Learning" class="headerlink" title="Artificial Intelligence and Machine Learning"></a>Artificial Intelligence and Machine Learning</h1><p>Google is known for being on the cutting edge of this space.  The world was shocked when its AlphaGo software defeated one of the best human players of the board game, Go.</p>
<p>For those who don’t already know, Artificial intelligence (usually abbreviated as AI) is a field of study that attempts to give machines the same level of intelligence that humans possess.  Essentially, <font color="orange">the goal of AI is to create machines that are capable of acting on their own, without direct human intervention.</font>  Now AI is sort of a wider field of study, where Machine Learning (or ML) is a specific branch in that field.  Machine learning is mostly focused on developing systems that can learn.  Now by “learn”, I mean that they use large amounts of data to slowly improve their responses.</p>
<p>Currently, Google divides its AI and ML services into four categories: Sight, Language, Conversation, and Structured Data.</p>
<h2 id="Sight"><a href="#Sight" class="headerlink" title="Sight"></a>Sight</h2><p>Under Sight, they have services like the Vision API, which can detect objects, faces, and text in images.  The Video Intelligence API recognizes objects, places, and actions in video.  Document AI uses machine learning to help you parse and identify data inside your documents, such as company names, addresses, and phone numbers.</p>
<h2 id="Language"><a href="#Language" class="headerlink" title="Language"></a>Language</h2><p>Under Language, they have the Translation API, which can convert text from one language to another.  It currently supports over one hundred different languages.  They also have the Natural Language API, which performs tasks like sentiment analysis.  For example, it can classify a message as being either positive, negative, or neutral.</p>
<h2 id="Conversation"><a href="#Conversation" class="headerlink" title="Conversation"></a>Conversation</h2><p>The Conversation category includes the Text-to-Speech and Speech-to-Text APIs, which do exactly what you would expect.  It also includes a service called DialogFlow, which can generate realistic sounding dialogue.  Using DialogFlow, you can build chatbots and voicebots to handle things like customer support requests.</p>
<h2 id="Structured-Data"><a href="#Structured-Data" class="headerlink" title="Structured Data"></a>Structured Data</h2><p>The last category is Structured Data. These services allow you to feed in structured data and get back insights.  For example, the <strong>Recommendations AI</strong> can look at a customer’s previous purchases and recommend other products that they might be interested in buying.  Also, <strong>Cloud Talent</strong> Solutions can automatically detect and understand job content and applicant intent. Candidates can quickly find the most appropriate jobs, while companies can identify, attract and hire quality candidates.</p>
<p>All of these prebuilt AI services have been trained based on general sets of data, so they might not be able to handle your specific needs. Now for these scenarios, Google provides its AutoML suite of services. For example, you might need to identify product defects in your factory assembly lines.  By feeding your own data into AutoML Vision, you can train a custom model without having to know machine learning.</p>
<p>If you need to build custom models that are outside the scope of the AutoML suite, then you can use Vertex AI (which was previously named the AI Platform suite).  It includes many different services, but the most important ones are AI Platform Training and AI Platform Prediction. The Training service lets you train custom models using popular Python-based frameworks.  Or you can also access a repository of plug-and-play AI components (including end-to-end AI pipelines and out-of-the-box algorithms) by using AI Hub.</p>
<h2 id="Summary-3"><a href="#Summary-3" class="headerlink" title="Summary"></a>Summary</h2><p>Sight services, including the Vision API, Document API, and Video Intelligence API<br>Language services, including the Translation API and Natural Language API<br>Conversation services, include Text-to-Speech, Speech-to-Text and DialogFlow<br>Structured Data services, including Recommendations AI and Talent Solutions<br>Now, remember, if the standard APIs are not enough, you can also train your own models using AutoML.  And you can access AI Hub for plug-and-play AI components as well. And that should cover the main AI &amp; ML services on GCP.</p>
<h1 id="Security-and-Operations"><a href="#Security-and-Operations" class="headerlink" title="Security and Operations"></a>Security and Operations</h1><h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><p>First, let’s talk about security.  Security services exist to help you protect your data.  One of the main concerns with using the cloud is privacy.  You want to be able to control exactly who can access your data.  So privacy is the goal, and security is the method.  Google security services allow you to define policies, procedures, and controls that everyone must follow.  In order to protect your customers and your company, you need to properly implement security.  The policies you define will often be shaped by compliance requirements.  Compliance refers to a third party set of standards, usually by some sort of regulatory authority.  For example, different countries have different laws about storing and encrypting data.  Digital security is complicated, so there are many different GCP services to assist you.</p>
<p><strong>Security Command Center</strong> provides a centralized control panel to help you discover vulnerabilities, detect threats, and generate reports.  <strong>Secret Manager</strong> gives you centralized storage for things like passwords, API keys, and certificates.  The <strong>Data Loss Prevention service</strong> helps you identify and scrub sensitive data. For example, if your user records contain credit card numbers, you could configure DLP to remove them before responding to a database query.</p>
<h2 id="Operation"><a href="#Operation" class="headerlink" title="Operation"></a>Operation</h2><p>Next, I want to talk about operation services.  Now operations is focused on monitoring and maintaining your existing infrastructure. </p>
<p>So you have things like Google Cloud Operations Suite which was previously called Stackdriver.  Now this suite includes:</p>
<p><strong>Cloud Logging</strong>: This acts as a centralized repository for all your logs.  It makes it easy to find your logs and to search the entries for any messages you are interested in.<br><strong>Cloud Monitoring</strong>: This gives you an overview of everything that is happening.  You can view metrics like CPU utilization, response latency, and network traffic.  Plus, you can use it to set up alerts to notify you where there are any problems.  If a metric is too low or too high, you will know about it right away.<br><strong>Cloud Debugger</strong>: This helps you easily track down software bugs by allowing you to inspect the state of a running application.<br><strong>Cloud Profiler</strong>: This can be used to identify <strong>latency issues</strong> inside of an application.<br><strong>Cloud Trace</strong>: This helps you track down <strong>latency issues</strong> that exist between two or more applications.<br>Now there are other operation tools as well.  These include things like:</p>
<p><strong>Cloud Deployment Manager</strong> which allows you to write templates and then use those to provision resources.  You can have a template for creating a VM, and then run it 20 times to get 20 VMs.  This is extremely useful for when you need to create a lot of the same resources.  Now you no longer have to create everything by hand.<br><strong><font color="pink">Cloud Build</font></strong> is a tool that can help automate building, testing and deploying your code.<br><strong>Apigee</strong> helps you design secure and scale application programming interfaces (or APIs).  This way your web services can easily communicate with each other.<br><strong>Cloud Composer</strong> can be used to create, schedule, monitor, and manage workflows that span across clouds and on-premises data centers.</p>
<h2 id="Summary-4"><a href="#Summary-4" class="headerlink" title="Summary"></a>Summary</h2><p>Under Security, you have:</p>
<ul>
<li><p>Security Command Center provides a centralized overview of security issues</p>
</li>
<li><p>Secret Manager for storing passwords and keys</p>
</li>
<li><p>Data Loss Prevention for identifying and hiding sensitive data</p>
</li>
</ul>
<p>Under Operations, we talked about:</p>
<ul>
<li><p>Cloud Operations Suite</p>
<ul>
<li><p>Includes Logging &amp; Monitoring</p>
</li>
<li><p>Debugging for finding bugs in an app</p>
</li>
<li><p>Profiling for identifying slowdowns in an app</p>
</li>
<li><p>Trace for identifying bottlenecks between applications</p>
</li>
</ul>
</li>
<li><p>Deployment Manager for creating templates and automating infrastructure changes</p>
</li>
<li><p>Cloud Build for automating software deployments</p>
</li>
<li><p>Apigee for building APIs</p>
</li>
<li><p>Cloud Composer for managing workflows</p>
</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Cloud-Fundamentals-1</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Cloud-Fundamentals-1/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Introduction-to-Google-Cloud-Operations-Suite-11</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Introduction-to-Google-Cloud-Operations-Suite-11/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Knowledge-Check-Cloud-Fundamentals-2</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Knowledge-Check-Cloud-Fundamentals-2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Designing-a-Google-Cloud-Infrastructure-8</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Designing-a-Google-Cloud-Infrastructure-8/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Knowledge-Check-Designing-a-Google-Cloud-Infrastructure-9</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Knowledge-Check-Designing-a-Google-Cloud-Infrastructure-9/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Knowledge-Check-Setting-up-a-Google-Cloud-Platform-Environment-6</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Knowledge-Check-Setting-up-a-Google-Cloud-Platform-Environment-6/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Lab-Build-and-Deploy-a-Container-Application-with-Google-Cloud-Run-10</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Lab-Build-and-Deploy-a-Container-Application-with-Google-Cloud-Run-10/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Modernize-Your-IT-Department-With-GCP-3</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Modernize-Your-IT-Department-With-GCP-3/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Lab-Starting-a-Linux-Virtual-Machine-on-Google-Compute-Engine-7</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Lab-Starting-a-Linux-Virtual-Machine-on-Google-Compute-Engine-7/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Site-Reliability-Engineering-Principles-on-GCP-12</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Site-Reliability-Engineering-Principles-on-GCP-12/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Resource-Required-Reading-for-Google-Cloud-Digital-Leader-Exam-13</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Resource-Required-Reading-for-Google-Cloud-Digital-Leader-Exam-13/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Setting-up-a-Google-Cloud-Platform-Environment-5</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Setting-up-a-Google-Cloud-Platform-Environment-5/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-10</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>gcp-digital-leader-exam-Tour-of-Google-Cloud-Platform-Services-4</title>
    <url>/2022/11/14/gcp-digital-leader-exam-Tour-of-Google-Cloud-Platform-Services-4/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-1</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-12</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-11</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-14</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-13</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-15</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-16</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-19</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-18</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-2</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-20</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-17</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-22</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-21</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-23</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-24</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-25</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-26</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-27</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-28</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-29</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-3</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-30</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-31</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-32</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-35</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-34</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-36</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-33</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-4</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-5</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-6</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-7</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-8</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c根叔的云图-网络故障大排查-9</title>
    <url>/2022/11/12/h3c%E6%A0%B9%E5%8F%94%E7%9A%84%E4%BA%91%E5%9B%BE-%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E5%A4%A7%E6%8E%92%E6%9F%A5-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-1</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-100</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-100/</url>
    <content><![CDATA[<p><object data="100.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-10</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-101</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-101/</url>
    <content><![CDATA[<p><object data="101.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-102</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-102/</url>
    <content><![CDATA[<p><object data="102.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-104</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-104/</url>
    <content><![CDATA[<p><object data="104.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-105</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-105/</url>
    <content><![CDATA[<p><object data="105.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-106</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-106/</url>
    <content><![CDATA[<p><object data="106.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-107</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-107/</url>
    <content><![CDATA[<p><object data="107.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-108</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-108/</url>
    <content><![CDATA[<p><object data="108.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-109</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-109/</url>
    <content><![CDATA[<p><object data="109.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-11</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-103</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-103/</url>
    <content><![CDATA[<p><object data="103.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-111</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-111/</url>
    <content><![CDATA[<p><object data="111.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-110</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-110/</url>
    <content><![CDATA[<p><object data="110.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-112</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-112/</url>
    <content><![CDATA[<p><object data="112.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-113</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-113/</url>
    <content><![CDATA[<p><object data="113.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-114</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-114/</url>
    <content><![CDATA[<p><object data="114.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-115</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-115/</url>
    <content><![CDATA[<p><object data="115.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-116</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-116/</url>
    <content><![CDATA[<p><object data="116.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-117</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-117/</url>
    <content><![CDATA[<p><object data="117.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-118</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-118/</url>
    <content><![CDATA[<p><object data="118.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-119</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-119/</url>
    <content><![CDATA[<p><object data="119.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-12</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-120</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-120/</url>
    <content><![CDATA[<p><object data="120.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-121</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-121/</url>
    <content><![CDATA[<p><object data="121.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-122</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-122/</url>
    <content><![CDATA[<p><object data="122.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-123</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-123/</url>
    <content><![CDATA[<p><object data="123.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-124</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-124/</url>
    <content><![CDATA[<p><object data="124.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-125</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-125/</url>
    <content><![CDATA[<p><object data="125.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-126</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-126/</url>
    <content><![CDATA[<p><object data="126.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-127</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-127/</url>
    <content><![CDATA[<p><object data="127.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-128</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-128/</url>
    <content><![CDATA[<p><object data="128.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-129</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-129/</url>
    <content><![CDATA[<p><object data="129.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-131</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-131/</url>
    <content><![CDATA[<p><object data="131.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-13</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-130</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-130/</url>
    <content><![CDATA[<p><object data="130.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-133</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-133/</url>
    <content><![CDATA[<p><object data="133.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-132</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-132/</url>
    <content><![CDATA[<p><object data="132.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-134</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-134/</url>
    <content><![CDATA[<p><object data="134.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-14</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-15</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-17</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-135</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-135/</url>
    <content><![CDATA[<p><object data="135.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-16</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-18</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-19</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-2</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-20</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-22</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-21</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-23</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-24</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-25</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-26</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-27</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-28</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-29</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-3</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-30</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-32</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-31</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-33</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-34</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-35</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-36</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-38</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-37</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-39</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-4</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-40</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-42</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-43</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-44</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-45</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-46</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-47</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-49</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-48</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-51</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-5</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-52</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-41</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-50</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-54</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-53</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-56</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-55</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-58</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-57</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-6</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-59</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-60</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-61</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-63</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-62</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-65</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-65/</url>
    <content><![CDATA[<p><object data="65.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-64</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-66</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-66/</url>
    <content><![CDATA[<p><object data="66.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-67</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-67/</url>
    <content><![CDATA[<p><object data="67.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-68</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-68/</url>
    <content><![CDATA[<p><object data="68.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-69</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-69/</url>
    <content><![CDATA[<p><object data="69.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-70</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-70/</url>
    <content><![CDATA[<p><object data="70.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-7</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-72</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-72/</url>
    <content><![CDATA[<p><object data="72.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-74</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-74/</url>
    <content><![CDATA[<p><object data="74.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-73</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-73/</url>
    <content><![CDATA[<p><object data="73.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-71</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-71/</url>
    <content><![CDATA[<p><object data="71.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-75</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-75/</url>
    <content><![CDATA[<p><object data="75.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-76</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-76/</url>
    <content><![CDATA[<p><object data="76.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-77</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-77/</url>
    <content><![CDATA[<p><object data="77.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-78</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-78/</url>
    <content><![CDATA[<p><object data="78.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-8</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-79</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-79/</url>
    <content><![CDATA[<p><object data="79.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-80</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-80/</url>
    <content><![CDATA[<p><object data="80.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-81</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-81/</url>
    <content><![CDATA[<p><object data="81.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-83</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-83/</url>
    <content><![CDATA[<p><object data="83.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-82</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-82/</url>
    <content><![CDATA[<p><object data="82.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-84</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-84/</url>
    <content><![CDATA[<p><object data="84.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-85</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-85/</url>
    <content><![CDATA[<p><object data="85.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-87</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-87/</url>
    <content><![CDATA[<p><object data="87.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-86</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-86/</url>
    <content><![CDATA[<p><object data="86.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-88</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-88/</url>
    <content><![CDATA[<p><object data="88.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-89</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-89/</url>
    <content><![CDATA[<p><object data="89.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-9</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-90</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-90/</url>
    <content><![CDATA[<p><object data="90.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-91</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-91/</url>
    <content><![CDATA[<p><object data="91.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-92</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-92/</url>
    <content><![CDATA[<p><object data="92.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-93</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-93/</url>
    <content><![CDATA[<p><object data="93.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-94</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-94/</url>
    <content><![CDATA[<p><object data="94.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-96</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-96/</url>
    <content><![CDATA[<p><object data="96.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-95</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-95/</url>
    <content><![CDATA[<p><object data="95.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-97</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-97/</url>
    <content><![CDATA[<p><object data="97.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-1</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-98</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-98/</url>
    <content><![CDATA[<p><object data="98.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松交换-99</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E4%BA%A4%E6%8D%A2-99/</url>
    <content><![CDATA[<p><object data="99.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-10</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-11</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-13</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-15</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-12</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-14</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-17</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-16</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-18</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-19</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-2</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-20</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-22</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-21</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-23</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-24</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-25</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-26</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-28</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-27</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-29</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-3</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-4</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-30</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-6</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-5</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-8</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-7</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全acg1000-9</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8acg1000-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-1</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-10</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-11</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-12</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-13</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-14</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-17</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-16</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-18</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-15</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-19</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-20</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-2</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-22</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-21</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-23</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-24</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-25</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-26</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-28</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-27</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-3</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-29</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-31</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-30</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-33</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-32</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-34</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-35</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-36</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-37</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-38</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-39</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-4</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-40</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-41</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-42</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-44</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-45</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-46</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-47</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-49</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-5</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-48</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-50</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-43</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-51</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-52</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-53</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-54</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-55</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-56</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-58</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-57</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-59</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-6</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-60</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-62</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-63</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-61</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-64</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-65</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-65/</url>
    <content><![CDATA[<p><object data="65.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-66</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-66/</url>
    <content><![CDATA[<p><object data="66.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-68</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-68/</url>
    <content><![CDATA[<p><object data="68.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-67</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-67/</url>
    <content><![CDATA[<p><object data="67.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-69</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-69/</url>
    <content><![CDATA[<p><object data="69.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-7</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-71</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-71/</url>
    <content><![CDATA[<p><object data="71.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-70</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-70/</url>
    <content><![CDATA[<p><object data="70.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-72</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-72/</url>
    <content><![CDATA[<p><object data="72.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-73</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-73/</url>
    <content><![CDATA[<p><object data="73.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-75</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-75/</url>
    <content><![CDATA[<p><object data="75.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-76</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-76/</url>
    <content><![CDATA[<p><object data="76.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-77</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-77/</url>
    <content><![CDATA[<p><object data="77.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-78</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-78/</url>
    <content><![CDATA[<p><object data="78.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-79</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-79/</url>
    <content><![CDATA[<p><object data="79.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-8</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-80</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-80/</url>
    <content><![CDATA[<p><object data="80.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-81</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-81/</url>
    <content><![CDATA[<p><object data="81.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-74</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-74/</url>
    <content><![CDATA[<p><object data="74.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-83</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-83/</url>
    <content><![CDATA[<p><object data="83.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-84</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-84/</url>
    <content><![CDATA[<p><object data="84.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-85</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-85/</url>
    <content><![CDATA[<p><object data="85.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-86</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-86/</url>
    <content><![CDATA[<p><object data="86.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-82</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-82/</url>
    <content><![CDATA[<p><object data="82.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-87</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-87/</url>
    <content><![CDATA[<p><object data="87.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-88</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-88/</url>
    <content><![CDATA[<p><object data="88.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-89</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-89/</url>
    <content><![CDATA[<p><object data="89.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-9</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-90</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-90/</url>
    <content><![CDATA[<p><object data="90.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-91</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-91/</url>
    <content><![CDATA[<p><object data="91.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-92</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-92/</url>
    <content><![CDATA[<p><object data="92.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-93</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-93/</url>
    <content><![CDATA[<p><object data="93.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-94</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-94/</url>
    <content><![CDATA[<p><object data="94.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-95</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-95/</url>
    <content><![CDATA[<p><object data="95.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-97</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-97/</url>
    <content><![CDATA[<p><object data="97.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松安全v7防火墙-96</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E5%AE%89%E5%85%A8v7%E9%98%B2%E7%81%AB%E5%A2%99-96/</url>
    <content><![CDATA[<p><object data="96.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-1</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-10</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-101</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-101/</url>
    <content><![CDATA[<p><object data="101.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-100</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-100/</url>
    <content><![CDATA[<p><object data="100.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-102</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-102/</url>
    <content><![CDATA[<p><object data="102.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-103</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-103/</url>
    <content><![CDATA[<p><object data="103.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-105</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-105/</url>
    <content><![CDATA[<p><object data="105.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-104</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-104/</url>
    <content><![CDATA[<p><object data="104.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-107</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-107/</url>
    <content><![CDATA[<p><object data="107.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-108</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-108/</url>
    <content><![CDATA[<p><object data="108.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-109</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-109/</url>
    <content><![CDATA[<p><object data="109.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-11</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-110</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-110/</url>
    <content><![CDATA[<p><object data="110.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-111</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-111/</url>
    <content><![CDATA[<p><object data="111.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-113</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-113/</url>
    <content><![CDATA[<p><object data="113.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-106</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-106/</url>
    <content><![CDATA[<p><object data="106.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-112</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-112/</url>
    <content><![CDATA[<p><object data="112.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-114</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-114/</url>
    <content><![CDATA[<p><object data="114.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-12</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-13</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-14</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-16</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-15</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-17</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-18</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-19</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-2</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-20</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-21</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-22</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-23</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-24</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-25</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-26</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-27</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-28</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-29</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-3</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-30</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-31</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-33</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-34</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-35</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-37</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-36</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-38</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-32</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-39</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-4</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-40</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-41</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-42</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-43</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-44</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-45</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-46</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-47</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-48</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-49</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-5</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-50</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-51</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-52</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-53</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-54</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-55</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-56</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-57</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-58</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-59</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-6</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-60</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-61</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-64</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-65</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-65/</url>
    <content><![CDATA[<p><object data="65.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-66</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-66/</url>
    <content><![CDATA[<p><object data="66.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-63</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-67</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-67/</url>
    <content><![CDATA[<p><object data="67.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-68</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-68/</url>
    <content><![CDATA[<p><object data="68.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-69</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-69/</url>
    <content><![CDATA[<p><object data="69.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-70</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-70/</url>
    <content><![CDATA[<p><object data="70.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-7</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-71</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-71/</url>
    <content><![CDATA[<p><object data="71.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-73</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-73/</url>
    <content><![CDATA[<p><object data="73.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-72</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-72/</url>
    <content><![CDATA[<p><object data="72.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-74</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-74/</url>
    <content><![CDATA[<p><object data="74.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-75</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-75/</url>
    <content><![CDATA[<p><object data="75.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-76</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-76/</url>
    <content><![CDATA[<p><object data="76.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-77</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-77/</url>
    <content><![CDATA[<p><object data="77.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-78</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-78/</url>
    <content><![CDATA[<p><object data="78.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-79</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-79/</url>
    <content><![CDATA[<p><object data="79.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-8</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-80</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-80/</url>
    <content><![CDATA[<p><object data="80.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-81</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-81/</url>
    <content><![CDATA[<p><object data="81.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-82</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-82/</url>
    <content><![CDATA[<p><object data="82.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-83</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-83/</url>
    <content><![CDATA[<p><object data="83.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-84</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-84/</url>
    <content><![CDATA[<p><object data="84.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-62</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-85</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-85/</url>
    <content><![CDATA[<p><object data="85.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-86</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-86/</url>
    <content><![CDATA[<p><object data="86.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-87</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-87/</url>
    <content><![CDATA[<p><object data="87.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-88</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-88/</url>
    <content><![CDATA[<p><object data="88.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-89</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-89/</url>
    <content><![CDATA[<p><object data="89.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-9</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-90</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-90/</url>
    <content><![CDATA[<p><object data="90.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-91</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-91/</url>
    <content><![CDATA[<p><object data="91.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-92</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-92/</url>
    <content><![CDATA[<p><object data="92.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-94</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-94/</url>
    <content><![CDATA[<p><object data="94.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-95</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-95/</url>
    <content><![CDATA[<p><object data="95.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-93</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-93/</url>
    <content><![CDATA[<p><object data="93.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-96</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-96/</url>
    <content><![CDATA[<p><object data="96.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-98</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-98/</url>
    <content><![CDATA[<p><object data="98.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-97</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-97/</url>
    <content><![CDATA[<p><object data="97.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松无线-99</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E6%97%A0%E7%BA%BF-99/</url>
    <content><![CDATA[<p><object data="99.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-1</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-100</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-100/</url>
    <content><![CDATA[<p><object data="100.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-10</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-101</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-101/</url>
    <content><![CDATA[<p><object data="101.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-102</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-102/</url>
    <content><![CDATA[<p><object data="102.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-103</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-103/</url>
    <content><![CDATA[<p><object data="103.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-105</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-105/</url>
    <content><![CDATA[<p><object data="105.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-104</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-104/</url>
    <content><![CDATA[<p><object data="104.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-106</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-106/</url>
    <content><![CDATA[<p><object data="106.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-107</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-107/</url>
    <content><![CDATA[<p><object data="107.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-108</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-108/</url>
    <content><![CDATA[<p><object data="108.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-109</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-109/</url>
    <content><![CDATA[<p><object data="109.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-110</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-110/</url>
    <content><![CDATA[<p><object data="110.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-11</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-111</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-111/</url>
    <content><![CDATA[<p><object data="111.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-112</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-112/</url>
    <content><![CDATA[<p><object data="112.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-114</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-114/</url>
    <content><![CDATA[<p><object data="114.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-113</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-113/</url>
    <content><![CDATA[<p><object data="113.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-115</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-115/</url>
    <content><![CDATA[<p><object data="115.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-116</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-116/</url>
    <content><![CDATA[<p><object data="116.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-117</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-117/</url>
    <content><![CDATA[<p><object data="117.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-118</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-118/</url>
    <content><![CDATA[<p><object data="118.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-119</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-119/</url>
    <content><![CDATA[<p><object data="119.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-12</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-121</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-121/</url>
    <content><![CDATA[<p><object data="121.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-120</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-120/</url>
    <content><![CDATA[<p><object data="120.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-123</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-123/</url>
    <content><![CDATA[<p><object data="123.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-124</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-124/</url>
    <content><![CDATA[<p><object data="124.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-122</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-122/</url>
    <content><![CDATA[<p><object data="122.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-126</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-126/</url>
    <content><![CDATA[<p><object data="126.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-125</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-125/</url>
    <content><![CDATA[<p><object data="125.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-127</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-127/</url>
    <content><![CDATA[<p><object data="127.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-128</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-128/</url>
    <content><![CDATA[<p><object data="128.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-129</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-129/</url>
    <content><![CDATA[<p><object data="129.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-13</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-130</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-130/</url>
    <content><![CDATA[<p><object data="130.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-131</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-131/</url>
    <content><![CDATA[<p><object data="131.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-132</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-132/</url>
    <content><![CDATA[<p><object data="132.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-133</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-133/</url>
    <content><![CDATA[<p><object data="133.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-134</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-134/</url>
    <content><![CDATA[<p><object data="134.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-135</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-135/</url>
    <content><![CDATA[<p><object data="135.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-136</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-136/</url>
    <content><![CDATA[<p><object data="136.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-137</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-137/</url>
    <content><![CDATA[<p><object data="137.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-138</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-138/</url>
    <content><![CDATA[<p><object data="138.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-139</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-139/</url>
    <content><![CDATA[<p><object data="139.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-140</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-140/</url>
    <content><![CDATA[<p><object data="140.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-14</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-15</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-17</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-16</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-18</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-19</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-2</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-20</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-21</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-22</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-23</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-24</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-25</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-26</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-27</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-28</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-29</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-3</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-30</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-31</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-32</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-33</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-34</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-35</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-36</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-37</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-39</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-38</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-4</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-40</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-41</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-42</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-43</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-44</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-45</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-46</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-47</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-48</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-49</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-5</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-50</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-51</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object>3</p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-52</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-53</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-54</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-55</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-56</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-57</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-58</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-59</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-6</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-60</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-61</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-63</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-62</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-64</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-65</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-65/</url>
    <content><![CDATA[<p><object data="65.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-66</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-66/</url>
    <content><![CDATA[<p><object data="66.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-67</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-67/</url>
    <content><![CDATA[<p><object data="67.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-68</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-68/</url>
    <content><![CDATA[<p><object data="68.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-69</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-69/</url>
    <content><![CDATA[<p><object data="69.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-7</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-70</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-70/</url>
    <content><![CDATA[<p><object data="70.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-72</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-72/</url>
    <content><![CDATA[<p><object data="72.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-71</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-71/</url>
    <content><![CDATA[<p><object data="71.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-73</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-73/</url>
    <content><![CDATA[<p><object data="73.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-74</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-74/</url>
    <content><![CDATA[<p><object data="74.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-76</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-76/</url>
    <content><![CDATA[<p><object data="76.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-75</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-75/</url>
    <content><![CDATA[<p><object data="75.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-77</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-77/</url>
    <content><![CDATA[<p><object data="77.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-78</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-78/</url>
    <content><![CDATA[<p><object data="78.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-79</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-79/</url>
    <content><![CDATA[<p><object data="79.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-8</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-81</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-81/</url>
    <content><![CDATA[<p><object data="81.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-80</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-80/</url>
    <content><![CDATA[<p><object data="80.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-82</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-82/</url>
    <content><![CDATA[<p><object data="82.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-83</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-83/</url>
    <content><![CDATA[<p><object data="83.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-84</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-84/</url>
    <content><![CDATA[<p><object data="84.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-86</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-86/</url>
    <content><![CDATA[<p><object data="86.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-85</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-85/</url>
    <content><![CDATA[<p><object data="85.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-87</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-87/</url>
    <content><![CDATA[<p><object data="87.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-88</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-88/</url>
    <content><![CDATA[<p><object data="88.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-89</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-89/</url>
    <content><![CDATA[<p><object data="89.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-90</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-90/</url>
    <content><![CDATA[<p><object data="90.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-9</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-92</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-92/</url>
    <content><![CDATA[<p><object data="92.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-91</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-91/</url>
    <content><![CDATA[<p><object data="91.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-93</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-93/</url>
    <content><![CDATA[<p><object data="93.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-94</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-94/</url>
    <content><![CDATA[<p><object data="94.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-95</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-95/</url>
    <content><![CDATA[<p><object data="95.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-96</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-96/</url>
    <content><![CDATA[<p><object data="96.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-97</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-97/</url>
    <content><![CDATA[<p><object data="97.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-98</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-98/</url>
    <content><![CDATA[<p><object data="98.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>h3c轻轻松松路由-99</title>
    <url>/2022/11/12/h3c%E8%BD%BB%E8%BD%BB%E6%9D%BE%E6%9D%BE%E8%B7%AF%E7%94%B1-99/</url>
    <content><![CDATA[<p><object data="99.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2022/10/22/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-10</title>
    <url>/2022/11/11/huawei-hcie-notes-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-1</title>
    <url>/2022/11/11/huawei-hcie-notes-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-11</title>
    <url>/2022/11/11/huawei-hcie-notes-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-12</title>
    <url>/2022/11/11/huawei-hcie-notes-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-14</title>
    <url>/2022/11/11/huawei-hcie-notes-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-13</title>
    <url>/2022/11/11/huawei-hcie-notes-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-16</title>
    <url>/2022/11/11/huawei-hcie-notes-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-15</title>
    <url>/2022/11/11/huawei-hcie-notes-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-17</title>
    <url>/2022/11/11/huawei-hcie-notes-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-18</title>
    <url>/2022/11/11/huawei-hcie-notes-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-19</title>
    <url>/2022/11/11/huawei-hcie-notes-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-2</title>
    <url>/2022/11/11/huawei-hcie-notes-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-21</title>
    <url>/2022/11/11/huawei-hcie-notes-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-20</title>
    <url>/2022/11/11/huawei-hcie-notes-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-22</title>
    <url>/2022/11/11/huawei-hcie-notes-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-23</title>
    <url>/2022/11/11/huawei-hcie-notes-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-24</title>
    <url>/2022/11/11/huawei-hcie-notes-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-25</title>
    <url>/2022/11/11/huawei-hcie-notes-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-26</title>
    <url>/2022/11/11/huawei-hcie-notes-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-27</title>
    <url>/2022/11/11/huawei-hcie-notes-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-28</title>
    <url>/2022/11/11/huawei-hcie-notes-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-29</title>
    <url>/2022/11/11/huawei-hcie-notes-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-3</title>
    <url>/2022/11/11/huawei-hcie-notes-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-30</title>
    <url>/2022/11/11/huawei-hcie-notes-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-31</title>
    <url>/2022/11/11/huawei-hcie-notes-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-32</title>
    <url>/2022/11/11/huawei-hcie-notes-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-33</title>
    <url>/2022/11/11/huawei-hcie-notes-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-34</title>
    <url>/2022/11/11/huawei-hcie-notes-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-35</title>
    <url>/2022/11/11/huawei-hcie-notes-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-36</title>
    <url>/2022/11/11/huawei-hcie-notes-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-37</title>
    <url>/2022/11/11/huawei-hcie-notes-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-38</title>
    <url>/2022/11/11/huawei-hcie-notes-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-39</title>
    <url>/2022/11/11/huawei-hcie-notes-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-4</title>
    <url>/2022/11/11/huawei-hcie-notes-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-40</title>
    <url>/2022/11/11/huawei-hcie-notes-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-41</title>
    <url>/2022/11/11/huawei-hcie-notes-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-42</title>
    <url>/2022/11/11/huawei-hcie-notes-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-43</title>
    <url>/2022/11/11/huawei-hcie-notes-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-44</title>
    <url>/2022/11/11/huawei-hcie-notes-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-45</title>
    <url>/2022/11/11/huawei-hcie-notes-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-46</title>
    <url>/2022/11/11/huawei-hcie-notes-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-47</title>
    <url>/2022/11/11/huawei-hcie-notes-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-48</title>
    <url>/2022/11/11/huawei-hcie-notes-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-49</title>
    <url>/2022/11/11/huawei-hcie-notes-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-5</title>
    <url>/2022/11/11/huawei-hcie-notes-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-50</title>
    <url>/2022/11/11/huawei-hcie-notes-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-51</title>
    <url>/2022/11/11/huawei-hcie-notes-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-52</title>
    <url>/2022/11/11/huawei-hcie-notes-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-53</title>
    <url>/2022/11/11/huawei-hcie-notes-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-54</title>
    <url>/2022/11/11/huawei-hcie-notes-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-55</title>
    <url>/2022/11/11/huawei-hcie-notes-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-56</title>
    <url>/2022/11/11/huawei-hcie-notes-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-57</title>
    <url>/2022/11/11/huawei-hcie-notes-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-58</title>
    <url>/2022/11/11/huawei-hcie-notes-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-59</title>
    <url>/2022/11/11/huawei-hcie-notes-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-6</title>
    <url>/2022/11/11/huawei-hcie-notes-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-60</title>
    <url>/2022/11/11/huawei-hcie-notes-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-61</title>
    <url>/2022/11/11/huawei-hcie-notes-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-64</title>
    <url>/2022/11/11/huawei-hcie-notes-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-62</title>
    <url>/2022/11/11/huawei-hcie-notes-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-63</title>
    <url>/2022/11/11/huawei-hcie-notes-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-8</title>
    <url>/2022/11/11/huawei-hcie-notes-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-7</title>
    <url>/2022/11/11/huawei-hcie-notes-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-1</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-hcie-notes-9</title>
    <url>/2022/11/11/huawei-hcie-notes-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-10</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-11</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-12</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-13</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-15</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-16</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-14</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-19</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-18</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-2</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-17</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-20</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-21</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-3</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-5</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-4</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-6</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-7</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-1</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-9</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-10</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-11</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-12</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-14</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-13</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-15</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ieep-notes-8</title>
    <url>/2022/11/11/huawei-ver18-hcip-ieep-notes-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-16</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-17</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-19</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-2</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-18</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-21</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-20</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-22</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-23</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-24</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-26</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-25</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-4</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-3</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-6</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-5</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-7</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-9</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-ienp-notes-8</title>
    <url>/2022/11/11/huawei-ver18-hcip-ienp-notes-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-10</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-1</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-11</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-14</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-13</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-15</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-16</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-19</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-18</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-17</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-2</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-21</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-20</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-22</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-23</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-12</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-25</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-24</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-27</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-27/</url>
    <content><![CDATA[<p><object data="27.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-26</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-28</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-3</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-29</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-31</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-32</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-30</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-34</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-33</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-35</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-36</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-37</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-38</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-40</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-39</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-4</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-42</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-44</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-43</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-45</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-5</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-7</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-6</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-8</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-9</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver18-hcip-iers-notes-41</title>
    <url>/2022/11/11/huawei-ver18-hcip-iers-notes-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-11</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-1</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-10</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-12</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-13</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-14</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-15</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-17</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-19</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-21</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-21/</url>
    <content><![CDATA[<p><object data="21.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-18</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-16</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-2</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-20</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-20/</url>
    <content><![CDATA[<p><object data="20.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-22</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-22/</url>
    <content><![CDATA[<p><object data="22.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-23</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-23/</url>
    <content><![CDATA[<p><object data="23.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-24</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-24/</url>
    <content><![CDATA[<p><object data="24.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-25</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-25/</url>
    <content><![CDATA[<p><object data="25.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-28</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-28/</url>
    <content><![CDATA[<p><object data="28.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-29</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-29/</url>
    <content><![CDATA[<p><object data="29.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-27</title>
    <url>/2022/11/13/huawei-ver22-hcip-notes-27/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-26</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-26/</url>
    <content><![CDATA[<p><object data="26.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-3</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-30</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-30/</url>
    <content><![CDATA[<p><object data="30.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-31</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-31/</url>
    <content><![CDATA[<p><object data="31.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-32</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-32/</url>
    <content><![CDATA[<p><object data="32.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-34</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-34/</url>
    <content><![CDATA[<p><object data="34.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-36</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-36/</url>
    <content><![CDATA[<p><object data="36.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-35</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-35/</url>
    <content><![CDATA[<p><object data="35.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-37</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-37/</url>
    <content><![CDATA[<p><object data="37.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-33</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-33/</url>
    <content><![CDATA[<p><object data="33.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-38</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-38/</url>
    <content><![CDATA[<p><object data="38.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-4</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-39</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-39/</url>
    <content><![CDATA[<p><object data="39.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-41</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-41/</url>
    <content><![CDATA[<p><object data="41.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-42</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-42/</url>
    <content><![CDATA[<p><object data="42.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-40</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-40/</url>
    <content><![CDATA[<p><object data="40.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-44</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-44/</url>
    <content><![CDATA[<p><object data="44.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-43</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-43/</url>
    <content><![CDATA[<p><object data="43.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-45</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-45/</url>
    <content><![CDATA[<p><object data="45.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-46</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-46/</url>
    <content><![CDATA[<p><object data="46.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-47</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-47/</url>
    <content><![CDATA[<p><object data="47.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-49</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-49/</url>
    <content><![CDATA[<p><object data="49.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-48</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-48/</url>
    <content><![CDATA[<p><object data="48.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-50</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-50/</url>
    <content><![CDATA[<p><object data="50.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-5</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-51</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-51/</url>
    <content><![CDATA[<p><object data="51.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-53</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-53/</url>
    <content><![CDATA[<p><object data="53.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-54</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-54/</url>
    <content><![CDATA[<p><object data="54.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-55</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-55/</url>
    <content><![CDATA[<p><object data="55.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-56</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-56/</url>
    <content><![CDATA[<p><object data="56.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-52</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-52/</url>
    <content><![CDATA[<p><object data="52.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-57</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-57/</url>
    <content><![CDATA[<p><object data="57.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-58</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-58/</url>
    <content><![CDATA[<p><object data="58.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-59</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-59/</url>
    <content><![CDATA[<p><object data="59.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-6</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-60</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-60/</url>
    <content><![CDATA[<p><object data="60.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-61</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-61/</url>
    <content><![CDATA[<p><object data="61.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-63</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-63/</url>
    <content><![CDATA[<p><object data="63.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-64</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-64/</url>
    <content><![CDATA[<p><object data="64.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-65</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-65/</url>
    <content><![CDATA[<p><object data="65.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-66</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-66/</url>
    <content><![CDATA[<p><object data="66.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-62</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-62/</url>
    <content><![CDATA[<p><object data="62.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-68</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-68/</url>
    <content><![CDATA[<p><object data="68.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-67</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-67/</url>
    <content><![CDATA[<p><object data="67.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-69</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-69/</url>
    <content><![CDATA[<p><object data="69.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-7</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-70</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-70/</url>
    <content><![CDATA[<p><object data="70.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-73</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-73/</url>
    <content><![CDATA[<p><object data="73.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-71</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-71/</url>
    <content><![CDATA[<p><object data="71.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-72</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-72/</url>
    <content><![CDATA[<p><object data="72.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-74</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-74/</url>
    <content><![CDATA[<p><object data="74.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-75</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-75/</url>
    <content><![CDATA[<p><object data="75.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-77</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-77/</url>
    <content><![CDATA[<p><object data="77.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-76</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-76/</url>
    <content><![CDATA[<p><object data="76.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-79</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-79/</url>
    <content><![CDATA[<p><object data="79.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-78</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-78/</url>
    <content><![CDATA[<p><object data="78.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-8</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-82</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-82/</url>
    <content><![CDATA[<p><object data="82.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-80</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-80/</url>
    <content><![CDATA[<p><object data="80.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-81</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-81/</url>
    <content><![CDATA[<p><object data="81.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-84</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-84/</url>
    <content><![CDATA[<p><object data="84.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-83</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-83/</url>
    <content><![CDATA[<p><object data="83.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-86</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-86/</url>
    <content><![CDATA[<p><object data="86.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-87</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-87/</url>
    <content><![CDATA[<p><object data="87.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-85</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-85/</url>
    <content><![CDATA[<p><object data="85.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-88</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-88/</url>
    <content><![CDATA[<p><object data="88.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-89</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-89/</url>
    <content><![CDATA[<p><object data="89.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-9</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-90</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-90/</url>
    <content><![CDATA[<p><object data="90.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-91</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-91/</url>
    <content><![CDATA[<p><object data="91.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>huawei-ver22-hcip-notes-92</title>
    <url>/2022/11/11/huawei-ver22-hcip-notes-92/</url>
    <content><![CDATA[<p><object data="92.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-1</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>test-图片</title>
    <url>/2022/10/22/test-%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="b1aca26f725c5f5e416472c534057307d9cbb591f7ea5c7f6b5a29209ed2cfd6">472f0d2124ee617a2f29ff331422d5d3bd292059877923b2bde10f8b4beeb5827cf60a3ea831327a267f9899f19c586e3d16a87ef6bb2e01c6fce86902d7a3401acb10bb963d33f8bc2de87e82bcd795eb4432f144afd774bd9f1349c66fb8ca2d518908493829305b5705341416fe75b9c7d9319965d8584f88724b19034aecb9299f1153aeb107c29b636a7db0e4ed5e86c2cad864bf8679f8b62cf21bc30276463dd0e17ae2750a6bf52d38adcc459a3db09f9c507a03e97799d1fb00d43f04e9b9f093ff0c1ce87998ef57d46f26b4e2f8bd85b8f2ae53f19e05ff763b2ee7acbad6d5d991415d68003b9a2df5ff342343623fee84e237c361572a953d4092f7317b6f1ec79a30df04867eb7f67b325bc6baecdf56650496ffed10784df6a0229d0924a15bf14c85d6eeb41ae671401e558c43a658ce6a87eecc7bd5ae8d576fb71fa564478121c1b73a78c28224349944ec808d30b9fcdc2c754c075de0a98e423a1c90717e9da93b95f36dda14cbe6b947a04af1d303e179968dc2422c255495a7787814b88eb48ceb47e186b4691e3d023dc627fb5b65e5cb930f894a6369ac90618b37184d9b984df2f011f18135f63b6e19d331e18a15347b2a442355471a2bc8fe995b92a61902fd5977fb8c0c4a799e9d3c21916d2ed146f728687ae0a6c2127d10bc1ef6b91e82d2d8545739a16afdb162a272dc39ac6e5c9106dcc469bbe0b345999d07207411414c14615cb5600f82837b3ecdd4eea23f439e597a05ec06df1f8e9543477b20e1c2a76436861fb860b6d8975bcb44d85c16e07c999328c28a5ef161b9614963d48983d47a464b47e3d5ad465afd570aca7888f8e9896e81381a799dffb9e6bf21c413e01c5b817b09217e88bfdeb47b3062bdb7474c623820780adf24607c86bfd8f599749853610da0890ae5c14f42ee03869ba66aabbce9d56e1571046c69440b27db027ee6e537d9c231e93fa388cc8fc0028fcfba57c48247689898873e6bfff56893ecf2fc7ed095cebec4ad20a99953732836ed353d6a7b2ba15466168b17869094ed15a9878a70af87ee19ade63fc86bc39b2126b73e1b07a41cdba0d77e30792a558ad46324c5e5a197425de2090dde57948ac1970eed5cd3111be0c05df4d8a945613a148937bce9b377dc436f9b737332e54873e78c693370cd2b78f615cebc5c9e0c1e7378b53518942da79a79931cd357ee5aeb63fefc85dd57208fcf2de22e9f34909e3d1e28586c812d75724a2051b9a7e6973dd63f3d87a05fd59f0d9a73340ff4112aaf5bd870e5e72338029aac81eb7a44679eef8df1d68c3b1bba00ac662e502a3b2058977bc8c230001f62e2a45e719c2bb3d1dd625b363f4632e74185f46789f58ce374c0c587249e70424f812b9187f31581f47dcba4078168556fc2c8baf7d9917982638ec314c64a59021c5bb05268372a48f3dd2a09780f7443f110e32439d0fed922350fecf94a7b037802a5f01b69ea13aab430cb64470ccc33c16128669beabf9d3abe13ada8a56cec5973b9312d6407b9452b835c8aaa108451bb9b636a669f49510ba111bd7d08c221d86a448852654c00b0ad4fa461a8e66cd6fcd38a37e99341d6038aa8f3d5a7d6d1b845a9230a36c99669726f5d4c423cb38e85416ef974e0a17804a4b11f06bd92a078f09cb4b471c8dad3ae0dafcfb5f62b51bc4a0e7f2ba2f172210991b8deb748b26fa3ebb5a0f8bb8027a5be8798b3201fdb96e6958e5755f98bbac291cf6cc030835eff23810d62c28dfa1fd231163b9365e0dcc0ff72ee4b4fb635c366739abff887857ddb5b94dda8057bfd3de0c5015581e410a376d7d9571333ad8ea2cf80d770d523141d7460ab9be722c1b034d4e86abfd9011f5415c71f2a7ce8f8b7d4dbee8b322ecb5d3792d5ed3524c431684c71e12d2503a09af3fabce0d3ef27849b7a27c89cd780db07fb6caad4bc77dbbdd14ee467f8c3bb510024a76fd2c37499216bfd0d28d3146582cbf84156ee9a63a4ad53061235c2239bb5a5cac9bfa6685f695a44b76ea2bc671208ca96cdeb9f14eef6eccc061fc64dd0ce445c733d021cd6876b26d642dcd6afad40bbf554bc6eeff7b1f220b4062bf2efe6356f62fb51c254c98e85dd83ce7ddf765fed53e0d2cbb676dc387f62b7eeb15a57d67962a23b85715b4b0f8b098291e29ca16c40edfe1451a0601fe6a3dbf6b88b76ce412b6a485ae32ad7033c768174cccf89e5ed5bfcd844a58077e40153d0cd70b715862a54b640126496d18f30e6ec9167031ac2cca4ddf737b3d6a1e44a33f4b17cc047cbb4336d16713f66411002b50d97f6e3d15a95ec5441e4dd55591b237137e0b10280098731ebad2b7b0d69f3729882f117f0a12e362388dd7f8b7dadb367f29e34ddf59941b5d6ff8be59f2078cec72903503de4a4b18f5143d501f1a91cb5ee43a979789ff252c31b8eea35276486d3d3839f8fb86c112911d82acf2c02889220cf0ced13c65a8a8d3625d7acbbdb1e07bec04da6bca32956b5fa44f3fd72b516f918b10b161e9399d469b6a14f3438e4690ecd886aefa59d8b527f8c06fc53a8203148b057be7222199ed0cd2633b0194a5b04eede06cd7a66fe7a6f90c946a4af6be4a642821ab8920c02c815e709f5eb347b49a1c294f5659e84ca072f76d6218fd0833150269db8d8190c185f1f5a08641ac2fc8f85c0bd7e1f1839315e94613c8498543d71193908b34d1a10a6e0c18d7dac7c354ca193870abb00566b63c303aa3b7cc52b5ed9f332e230555df9f3dfb1a73218196716afba35dfc3ee7f008759edf55f7dc2e98746c8795e2d4897d926abeb16f6d39dceccdddab4965d019852ab29f3ead5dff854cfb21e95ac9fafeb8a4d9df8adb1d6d4930e457b31a31bbb699f9b26ac35ead4c529b6837ca0cdcb96cea824a6fccb665b84aa01c680937e1bbe1dee20ba8c0cc17aa3e0556fc9dfada8e206e34a6f919a396a83787ab30f8492ca1f1390454eb452b5c971e2ba162613ab72c5efdcbdb2c174c9a252069e3dd5f77890d69bf5aec476125707c1db2fb7b6edde87f7588564125056577d4288c08640167c863815a2c23132b615d1d0c858fb7bb5e4075335d859348a5a7eded7e1948a12761e8cbcfd1d4586d24d698d5ab4bc231e0508ebf34c4558eae553c18a3711719cda16ec68595bce1b50378f094eb9d239c5447ff6b94c91577848622c9a99e329a074a02f2f4f519c467de3828dec68e8d9851ceaf9f6808fd827daf5c405cdcf8e6615090afff8267136f449cbe43c49d8985ec4b69e8db756d3d79228be8328615db57061e991667161d37df515b01e73b0786cef2d572914095a8d05621b69f9e0fefe0031954b601afa8ed645544ad8dfa298f9c8f11f9143fedc97d9bf3276fdd1707373dfae48e2bdaba79ef1fcd65b07aaa6d151c35f901a93fc561afd8f6c5e205963341d974dafbac9f2badc2a75e25ea1da7eb34c8b9acea5c3c6fb9769e17d29d5179b0429670ad469b3a6e6a233924f92914e698a9aa1cee406fbc6173f7c073e18b393908213d63628377adedd8cb177a77c6efdb38531609aab97ecaafb20a251de2196647974c9e922ca15bf0e0572a256e719193623b826725e724c2d893ef34d9eb8a39d6c5faf77f152ea30dd61940efee2eb674e1ecf88cd1d48dffb7c1f20675cea91944c63a04df4241a9b7884b49faec410ce43fb589fda18a38adeb2ffba26dd64f8a79229f79781653ff0bdc4c4863abcf4e49e60805f77ea42636f7234a7176e3763e8e12156e8550e973922451633b59755c7eabb4f2d8553b0208ae76aadbef29c465dd6cf43f219566d04ff6f5a079bd144724f3e2f82cc3fb2658f5858b266c1209bcc5772ba010c81669bc11342b74517a47bd5586ec85e2136bae7867b3521211cf65de1f1f4a0d809bf55175038e3862a46c5c80749c59eae6415cd7d7680f945009b8db84422848f73d708e80c52a603116da77b3cf8c99d1f7f94d30969fc9a92823fae5b8a4dfdd6404b3a0c11795aff537a7a57415503ec703c81b9cba84bef9c160363ce86dcb9fd62ce7487763d71c1c69353114af8aceeb2ed972e7f8291a68209cd9a3b4db90e3a8b17e3cdfd482dda925e1a27d4ab63d7aa3e7e8f817848cfeef6f36f2ce977ac6cb57f6566e649f52974a901af80d42c352384516855b2821ecde14f72211e3a688e770bbdd38ac38db63fd486d796011487a8f7111c424f53b640d2a949daf20ad17d75a93efcba6f51eeabd5b5a58bf282a5dc9b7aab04e55887bee29d52be117fc0829837b3dea2e3294b5a1a186b410aab76ab343d1d06577c00ef38afbd7d8d0fca2136c3d4fe44070319e07fafc760300c8dab4860de134b68c035107d14a06effa9449f75f1487fcfe006eae405a3817a59d3a21abe8a74fd0c1570ab2ab83dbf233911b6f55bfc8f00cd2926cca58e441c952cd2ba309d10813c5385c557a28204ece1a91e44fea2e4eee25de13e0bb103b938df4875b2d5041bd88347883a4e51fff1c953727396cda6bb0a2ffe8629cd11e08fbf58738da9b53c3a2403b3536e1c910116c1c5f17de8ae5c6c7b18d5c7e80bcc3a7a7111662fb2a3be91f9e552402ea90a6d3255bed93bee4d29266e1494e3c3a82b142b09161b86afc67a3dbed30f69abae853354aea83eb995bd298c371a973dc99a572005dad829b74f55eaca11f8800d9c7a804a4ca2dbdf078edb355129a7ff72a5df7f0127ee59e0cf2558b06e12d1609574c5e481aead193cb6b9f6b3b742f2bbd5ec6a75f1b4b03b67f0c1e98f2a203c63f166b61b9958cd3ed3a3d549d4e18b9ff40ebb38578dbca1640d1f4883aa1afc5335118ffdc41d3cfa313dcf4fe9c301bf9b69f55f59dbc9bc473f243e10d0c71659c46a3d77c6b6918036b1ad1239807c4f07b0e31f1ba222cfbc0be2591a44f8bb440161b5d72d5dd3e22ca00ea9cdd5ce</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>ccna-notes</category>
      </categories>
      <tags>
        <tag>navigation</tag>
      </tags>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-10</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>shell脚本高手速成</title>
    <url>/2022/11/12/shell%E8%84%9A%E6%9C%AC%E9%AB%98%E6%89%8B%E9%80%9F%E6%88%90/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-11</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-13</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-12</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-14</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-15</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-16</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-2</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-3</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-4</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-5</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-6</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-7</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-8</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Docker容器实战部署</title>
    <url>/2022/11/15/zutuanxue-Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E6%88%98%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Ansible自动化运维平台</title>
    <url>/2022/11/15/zutuanxue-Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B9%B3%E5%8F%B0/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-CI/CD代码管理平台</title>
    <url>/2022/11/15/zutuanxue-CI-CD%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Kubernetes云计算实战</title>
    <url>/2022/11/15/zutuanxue-Kubernetes%E4%BA%91%E8%AE%A1%E7%AE%97%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>windows-server-2008-网络管理与架站-9</title>
    <url>/2022/11/12/windows-server-2008-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9E%B6%E7%AB%99-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Linux系统资源限制与加固</title>
    <url>/2022/11/15/zutuanxue-Linux%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6%E4%B8%8E%E5%8A%A0%E5%9B%BA/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Shell脚本高手速成</title>
    <url>/2022/11/15/zutuanxue-Shell%E8%84%9A%E6%9C%AC%E9%AB%98%E6%89%8B%E9%80%9F%E6%88%90/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Redis数据库</title>
    <url>/2022/11/15/zutuanxue-Redis%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Web大并发集群部署</title>
    <url>/2022/11/15/zutuanxue-Web%E5%A4%A7%E5%B9%B6%E5%8F%91%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Web服务器-Apache</title>
    <url>/2022/11/15/zutuanxue-Web%E6%9C%8D%E5%8A%A1%E5%99%A8-Apache/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Linux常用服务部署实战</title>
    <url>/2022/11/15/zutuanxue-Linux%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[<h1 id="DHCP服务"><a href="#DHCP服务" class="headerlink" title="DHCP服务"></a>DHCP服务</h1><p> 阅读 (225935) </p>
<p> 分享</p>
<h2 id="一、DHCP介绍"><a href="#一、DHCP介绍" class="headerlink" title="一、DHCP介绍"></a>一、DHCP介绍</h2><p>在LAN(局域网)中我们常会遇到以下的情况：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1）不知道如何配置IP地址及相关信息的员工，无法上网；</span><br><span class="line"></span><br><span class="line">2）IP地址配置冲突，无法上网；</span><br><span class="line"></span><br><span class="line">3）来访用户因不熟悉公司网络情况无法上网；</span><br></pre></td></tr></table></figure>

<p>以上这些情况都是日常最常见也是最无脑的工作，公司网络管理员需要不停的去帮忙去解决这些问题，以此来保障公司网络的正常使用及员工的正常用网需求。而这些工作对于网络管理员来说实在是太低级、太无脑、太繁琐了，会消耗网络管理员的大量工作时间，也会影响公司员工的工作效能。那么如何通过其他的方法让计算机就能直接解决了上述问题，从而解放网络管理员呢？DHCP就是一个不二的选择。</p>
<p>DHCP(Dynamic Host Configuration Protocol，动态主机配置协议),通常被应用在局域网络环境中，主要作用是集中的管理、分配IP地址，使网络环境中的主机动态的获得IP地址、Gateway地址、DNS服务器地址等信息，并能够提升地址的使用率。由于DHCP是一个UDP协议，所以运行起来更加高效。</p>
<p>DHCP协议采用客户端&#x2F;服务器模型(C&#x2F;S模型)，服务端可以为客户端提供IP、掩码、网关、主机名、DNS等信息。客户端只需将IP获得方式设置为自动获取即可。</p>
<p>目前可以提供DHCP服务的设备有很多，比如:</p>
<ul>
<li>DHCP服务器(windows server、linux)</li>
<li>硬件路由器</li>
<li>家用宽带路由</li>
</ul>
<h2 id="二、DHCP应用场景"><a href="#二、DHCP应用场景" class="headerlink" title="二、DHCP应用场景"></a>二、DHCP应用场景</h2><p>1）公司局域网环境</p>
<p>2）家庭局域网环境</p>
<p>3）公共场合的wifi环境</p>
<p>4）宽带环境网络</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用DHCP的优点：</span><br><span class="line"></span><br><span class="line">1）傻瓜式接入：用户只需懂得插网线到电脑，或者输入WiFi密码接入网络即可实现联网</span><br><span class="line"></span><br><span class="line">2）IP高效利用：及时回收IP机制，保证IP的高利用性，特别是对IP不足的网络</span><br><span class="line"></span><br><span class="line">3）避免IP冲突：避免IP冲突，保证网络的高效利用，保证公司员工及临时人员高效工作</span><br><span class="line"></span><br><span class="line">4）降低了公司网络管理员的工作量，提升了工作效率</span><br></pre></td></tr></table></figure>

<h2 id="三、DHCP工作原理"><a href="#三、DHCP工作原理" class="headerlink" title="三、DHCP工作原理"></a>三、DHCP工作原理</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602997688363.png" alt="image20200113193556339.png"></p>
<h3 id="3-1）工作方式"><a href="#3-1）工作方式" class="headerlink" title="3.1）工作方式"></a>3.1）工作方式</h3><p>IP获得需要通过发广播来实现客户端和服务器的通信，所以DHCP只能工作在局域网。</p>
<h3 id="3-2）工作原理解析"><a href="#3-2）工作原理解析" class="headerlink" title="3.2）工作原理解析"></a>3.2）工作原理解析</h3><p>1、Client：向网络中发送广播，通过自己的UDP协议的68号端口向网络中发送DHCP Discover包，用来寻找网络中的DHCP Server.类似于你在你的公司大喊一声:”谁是公司老板”一样的道理。</p>
<p>2、Server：局域网中的所有DHCP服务器都能收到该Client发送的广播包，然后DHCP Server会检查自己的IP池中(也叫做作用域)是否还有可用IP可以分发。如果有的话，会直接将这个IP地址从池中拿出来，避免在发给别的客户端，并且通过自己的UDP协议的67号端口给Client发一个响应包DHCP Offer,同样通信是采用广播的方式，明确告诉其可以提供哪个IP给Client使用。类似于公司的几个老板都在公司喊了一声：“我是X老板，我有时间在哪个办公室接待你”。</p>
<p>3、Client：Client会收到局域网中的所有DHCP服务器发给自己的DHCP Offer包，默认选一个最优的DHCP Server进行IP获取（在这里就是第一个发送给他DHCP Offer的服务器算作最优）。然后继续向网络中通过UDP的68号端口发广播DHCP Resquest，明确指定DHCP Server IP地址和需要租用的IP地址,告诉它要从他这里获得IP信息。自然其他DHCP Server也能收到广播，确认不从自己这里拿IP信息后，会将上步从IP池中拿出来的IP在释放到池中，以便别人使用。类似于你在公司大喊一声：“李老板，我找你接待”，那么其他老板刚才计划接待你的时间就会被释放出来，用于接待别的客户。</p>
<p>4、Server：被确认的DHCP Server就会通过其UDP协议的67号端口发送DHCP ACK确认包，采用广播将IP、掩码、网关、DNS等信息还有IP租约一起发送给DHCP Client，Client确认IP可用后，根据IP租约开始计算使用时间。类似于李老板把你请进他的办公室，开始和你聊天，并计算聊天时间为30分钟，开始倒计时。</p>
<h3 id="3-3-计算机获得IP的时间点"><a href="#3-3-计算机获得IP的时间点" class="headerlink" title="3.3)计算机获得IP的时间点"></a>3.3)计算机获得IP的时间点</h3><p>a、计算机开机</p>
<p>b、网卡接通网络</p>
<p>c、重启网卡服务</p>
<h3 id="3-4）租约更新阶段"><a href="#3-4）租约更新阶段" class="headerlink" title="3.4）租约更新阶段"></a>3.4）租约更新阶段</h3><p>a、租约完成1&#x2F;2</p>
<p>b、租约完成7&#x2F;8</p>
<p>c、租约到期</p>
<h2 id="四、DHCP服务器部署"><a href="#四、DHCP服务器部署" class="headerlink" title="四、DHCP服务器部署"></a>四、DHCP服务器部署</h2><p><strong>约定：本实验中使用过的机器为centos8.0_x86_64系统，计算机名称:localhost.localdomain,IP地址192.168.11.16&#x2F;24.请关闭防火墙和SELINUX。</strong></p>
<h3 id="4-1）DHCP安装"><a href="#4-1）DHCP安装" class="headerlink" title="4.1）DHCP安装"></a>4.1）DHCP安装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# dnf -y install dhcp-server</span><br></pre></td></tr></table></figure>

<h3 id="4-2）DHCP配置文件详解"><a href="#4-2）DHCP配置文件详解" class="headerlink" title="4.2）DHCP配置文件详解"></a>4.2）DHCP配置文件详解</h3><p>默认情况下，dhcp服务并没有提供配置文件，只是给提供了一个demo,存放在&#x2F;usr&#x2F;share&#x2F;doc&#x2F;dhcp-server&#x2F;目录下.我们将demo文件拷贝到&#x2F;etc&#x2F;dhcp目录下，并且命名为dhcpd.conf。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cp /usr/share/doc/dhcp-server/dhcpd.conf.example /etc/dhcp/dhcpd.conf </span><br><span class="line">cp：是否覆盖&quot;/etc/dhcp/dhcpd.conf&quot; y</span><br></pre></td></tr></table></figure>

<p>配置文件详解</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /etc/dhcp/dhcpd.conf</span><br><span class="line"># #号代表注释</span><br><span class="line"># DHCP服务配置文件分为全局配置和作用域配置，很好区分：subnet的就是作用域 不在subnet里面的就是全局设置。</span><br><span class="line"># dhcpd.conf</span><br><span class="line">#</span><br><span class="line"># Sample configuration file for ISC dhcpd</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#DNS全局选项，指定DNS服务器的地址，可以是IP，也可以是域名。</span><br><span class="line"># option definitions common to all supported networks...</span><br><span class="line"># DNS的域名</span><br><span class="line">option domain-name &quot;example.org&quot;;</span><br><span class="line"></span><br><span class="line">#具体的DNS服务器</span><br><span class="line">option domain-name-servers ns1.example.org, ns2.example.org;</span><br><span class="line"></span><br><span class="line">#默认租约为600s</span><br><span class="line">default-lease-time 600;</span><br><span class="line">#最大租约为7200s，客户机会在default-lease-time快到期时向服务器续租，如果此时客户机死机/重启，而默认租约时间到期了，服务器并不会立即回收IP地址，而是等到最大租约时间到期，客户机还没有过来续约，才会回收IP地址。</span><br><span class="line">max-lease-time 7200;</span><br><span class="line"></span><br><span class="line">#动态DNS更新方式(none:不支持；interim:互动更新模式；ad-hoc:特殊更新模式)</span><br><span class="line"># Use this to enble / disable dynamic dns updates globally.</span><br><span class="line">#ddns-update-style none;</span><br><span class="line"></span><br><span class="line">#如果该DHCP服务器是本地官方DHCP就将此选项打开，避免其他DHCP服务器的干扰。</span><br><span class="line">#当一个客户端试图获得一个不是该DHCP服务器分配的IP信息，DHCP将发送一个拒绝消息，而不会等待请求超时。当请求被拒绝，客户端会重新向当前DHCP发送IP请求获得新地址。保证IP是自己发出去的</span><br><span class="line">#</span><br><span class="line"># If this DHCP server is the official DHCP server for the local</span><br><span class="line"># network, the authoritative directive should be uncommented.</span><br><span class="line">#authoritative;</span><br><span class="line"></span><br><span class="line"># Use this to send dhcp log messages to a different log file (you also</span><br><span class="line"># have to hack syslog.conf to complete the redirection).</span><br><span class="line"># 日志级别</span><br><span class="line">log-facility local7;</span><br><span class="line"></span><br><span class="line"># No service will be given on this subnet, but declaring it helps the </span><br><span class="line"># DHCP server to understand the network topology.</span><br><span class="line"></span><br><span class="line">#作用域相关设置指令</span><br><span class="line">#subnet 定义一个作用域</span><br><span class="line">#netmask 定义作用域的掩码</span><br><span class="line">#range 允许发放的IP范围</span><br><span class="line">#option routers 指定网关地址</span><br><span class="line">#option domain-name-servers 指定DNS服务器地址</span><br><span class="line">#option broadcast-address 广播地址</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#案例:定义一个作用域 网段为10.152.187.0 掩码为255.255.255.0</span><br><span class="line">#此作用域不提供任何服务</span><br><span class="line">subnet 10.152.187.0 netmask 255.255.255.0 &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># This is a very basic subnet declaration.</span><br><span class="line"></span><br><span class="line">#案例:定义一个基本的作用域</span><br><span class="line">#网段10.254.239.0 掩码255.255.255.224</span><br><span class="line">#分发范围10.254.239.10-20</span><br><span class="line">#网关为rtr-239-0-1.example.org, rtr-239-0-2.example.org</span><br><span class="line">subnet 10.254.239.0 netmask 255.255.255.224 &#123;</span><br><span class="line">  range 10.254.239.10 10.254.239.20;</span><br><span class="line">  option routers rtr-239-0-1.example.org, rtr-239-0-2.example.org;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># This declaration allows BOOTP clients to get dynamic addresses,</span><br><span class="line"># which we don&#x27;t really recommend.</span><br><span class="line">#案例:允许采用bootp协议的客户端动态获得地址</span><br><span class="line">#bootp DHCP的前身</span><br><span class="line">#BOOTP用于无盘工作站的局域网中，可以让无盘工作站从一个中心服务器上获得IP地址。通过BOOTP协议可以为局域网中的无盘工作站分配动态IP地址，</span><br><span class="line">#这样就不需要管理员去为每个用户去设置静态IP地址。</span><br><span class="line">subnet 10.254.239.32 netmask 255.255.255.224 &#123;</span><br><span class="line">  range dynamic-bootp 10.254.239.40 10.254.239.60;</span><br><span class="line">  option broadcast-address 10.254.239.31;</span><br><span class="line">  option routers rtr-239-32-1.example.org;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例:一个简单的作用域案例</span><br><span class="line"># A slightly different configuration for an internal subnet.</span><br><span class="line">subnet 10.5.5.0 netmask 255.255.255.224 &#123;</span><br><span class="line">  range 10.5.5.26 10.5.5.30;</span><br><span class="line">  option domain-name-servers ns1.internal.example.org;</span><br><span class="line">  option domain-name &quot;internal.example.org&quot;;</span><br><span class="line">  option routers 10.5.5.1;</span><br><span class="line">  option broadcast-address 10.5.5.31;</span><br><span class="line">  default-lease-time 600;</span><br><span class="line">  max-lease-time 7200;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Hosts which require special configuration options can be listed in</span><br><span class="line"># host statements.   If no address is specified, the address will be</span><br><span class="line"># allocated dynamically (if possible), but the host-specific information</span><br><span class="line"># will still come from the host declaration.</span><br><span class="line">#</span><br><span class="line">#保留地址:可以将指定的IP分发给指定的机器，根据网卡的MAC地址来做触发</span><br><span class="line">#host: 启用保留。</span><br><span class="line">#hardware:指定客户端的mac地址</span><br><span class="line">#filename:指定文件名</span><br><span class="line">#server-name:指定下一跳服务器地址</span><br><span class="line">#fixed-address: 指定保留IP地址</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#案例:这个案例中分发给客户端的不是IP地址信息，而是告诉客户端去找toccata.fugue.com服务器，并且下载vmunix.passacaglia文件</span><br><span class="line">host passacaglia &#123;</span><br><span class="line">  hardware ethernet 0:0:c0:5d:bd:95;</span><br><span class="line">  filename &quot;vmunix.passacaglia&quot;;</span><br><span class="line">  server-name &quot;toccata.fugue.com&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Fixed IP addresses can also be specified for hosts.   These addresses</span><br><span class="line"># should not also be listed as being available for dynamic assignment.</span><br><span class="line"># Hosts for which fixed IP addresses have been specified can boot using</span><br><span class="line"># BOOTP or DHCP.   Hosts for which no fixed address is specified can only</span><br><span class="line"># be booted with DHCP, unless there is an address range on the subnet</span><br><span class="line"># to which a BOOTP client is connected which has the dynamic-bootp flag</span><br><span class="line"># set.</span><br><span class="line"># 案例:保留地址，将指定IP(fantasia.fugue.com对应的IP)分给指定客户端网卡(MAC:08:00:07:26:c0:a5)</span><br><span class="line">host fantasia &#123;</span><br><span class="line">  hardware ethernet 08:00:07:26:c0:a5;</span><br><span class="line">  fixed-address fantasia.fugue.com;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#超级作用域</span><br><span class="line">#超级作用域是DHCP服务中的一种管理功能，使用超级作用域，可以将多个作用域组合为单个管理实体。</span><br><span class="line"># You can declare a class of clients and then do address allocation</span><br><span class="line"># based on that.   The example below shows a case where all clients</span><br><span class="line"># in a certain class get addresses on the 10.17.224/24 subnet, and all</span><br><span class="line"># other clients get addresses on the 10.0.29/24 subnet.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#在局域网中，可以配置策略根据各个机器的具体信息分配IP地址和其他的网络参数，客户机的具体信息：客户机能够给dhcp服务提供的信息由有两个，</span><br><span class="line">#第一个就是网卡的dhcp-client-identifier（mac地址），</span><br><span class="line">#第二个就是设备的vendor-class-identifier。</span><br><span class="line">#管理员可以根据这两个信息给不同的机器分组。</span><br><span class="line"></span><br><span class="line">#案例:</span><br><span class="line">#按client某种类型分组DHCP,而不是按物理接口网段</span><br><span class="line">#例子: SUNW 分配地址段10.17.224.0/24</span><br><span class="line"># 非SUNW的主机,分配地址段10.0.29.0/24</span><br><span class="line">#定义一个dhcp类:foo</span><br><span class="line">#request广播中vendor-class-identifier字段对应的值前四个字节如果是&quot;SUNW&quot;,则视合法客户端.</span><br><span class="line">class &quot;foo&quot; &#123;</span><br><span class="line">  match if substring (option vendor-class-identifier, 0, 4) = &quot;SUNW&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#定义一个超级作用域: 224-29</span><br><span class="line">shared-network 224-29 &#123;</span><br><span class="line">#定义第一个作用域</span><br><span class="line">  subnet 10.17.224.0 netmask 255.255.255.0 &#123;</span><br><span class="line">    option routers rtr-224.example.org;</span><br><span class="line">  &#125;</span><br><span class="line">#定义第二个作用域</span><br><span class="line">  subnet 10.0.29.0 netmask 255.255.255.0 &#123;</span><br><span class="line">    option routers rtr-29.example.org;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">#关连池,如果客户端匹配foo类，将获得该池地址</span><br><span class="line">  pool &#123;</span><br><span class="line">    allow members of &quot;foo&quot;;</span><br><span class="line">    range 10.17.224.10 10.17.224.250;</span><br><span class="line">  &#125;</span><br><span class="line">#关连池,如果客户端配置foo类，则拒绝获得该段地址</span><br><span class="line">  pool &#123;</span><br><span class="line">    deny members of &quot;foo&quot;;</span><br><span class="line">    range 10.0.29.10 10.0.29.230;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3）DHCP启动"><a href="#4-3）DHCP启动" class="headerlink" title="4.3）DHCP启动"></a>4.3）DHCP启动</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl enable dhcpd</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/dhcpd.service to /usr/lib/systemd/system/dhcpd.service.</span><br><span class="line">[root@zutuanxue ~]# systemctl start dhcpd</span><br><span class="line"></span><br><span class="line">注意：可能发现无法启动DHCP服务，原因是DHCP在启动的时候检查配置文件，发现并没有有效作用域（和服务器同网段的作用域）。</span><br></pre></td></tr></table></figure>

<h2 id="五、DHCP作用域"><a href="#五、DHCP作用域" class="headerlink" title="五、DHCP作用域"></a>五、DHCP作用域</h2><p><strong>教学案例一、配置一个作用域，用于为本地局域网中的计算机发放IP信息。要求：</strong></p>
<p>本地网段:192.168.11.0&#x2F;24</p>
<p>发放IP地址：192.168.11.153–252</p>
<p>网关：192.168.11.254</p>
<p>DNS1：202.106.0.20</p>
<p>DNS2：114.114.114.114</p>
<p>默认租约为两个小时</p>
<p>最大租约为3个小时</p>
<p><strong>本DHCP服务器为本地权威DHCP，要求可以本地所有计算机获得IP都是由本DHCP发放</strong></p>
<h3 id="5-1-DHCP服务配置"><a href="#5-1-DHCP服务配置" class="headerlink" title="5.1)DHCP服务配置"></a>5.1)DHCP服务配置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue dhcp]# cat /etc/dhcp/dhcpd.conf</span><br><span class="line">option domain-name-servers 202.106.0.20, 114.114.114.114;</span><br><span class="line">#声明DNS服务器</span><br><span class="line">default-lease-time 7200;  #定义默认租约时间</span><br><span class="line">max-lease-time 10800;		#定义最大租约时间</span><br><span class="line">authoritative;	#拒绝不正确的IP地址的要求</span><br><span class="line">log-facility local7;	#定义日志</span><br><span class="line"></span><br><span class="line">subnet 192.168.11.0 netmask 255.255.255.0 &#123;</span><br><span class="line">  range 192.168.11.153 192.168.11.252;</span><br><span class="line">  option routers 192.168.11.254;</span><br><span class="line">  option broadcast-address 192.168.11.255;</span><br><span class="line">  default-lease-time 7200;</span><br><span class="line">  max-lease-time 10800;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">请根据4.2中的讲解理解配置文件内容。</span><br></pre></td></tr></table></figure>

<h3 id="5-2）重启DHCP服务，生效配置"><a href="#5-2）重启DHCP服务，生效配置" class="headerlink" title="5.2）重启DHCP服务，生效配置"></a>5.2）重启DHCP服务，生效配置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#重启dhcpd服务</span><br><span class="line">[root@zutuanxue dhcp]# systemctl restart dhcpd</span><br><span class="line"></span><br><span class="line">#查看启动情况，同时也验证了客户端使用的是68端口，服务端使用的是67端口</span><br><span class="line">[root@zutuanxue dhcp]# lsof -i :68</span><br><span class="line">COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">dhclient 55234 root    6u  IPv4 110700      0t0  UDP *:bootpc </span><br><span class="line">[root@zutuanxue dhcp]# lsof -i :67</span><br><span class="line">COMMAND   PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">dnsmasq  1507 nobody    3u  IPv4  27149      0t0  UDP *:bootps </span><br><span class="line">dhcpd   56570  dhcpd    7u  IPv4 129157      0t0  UDP *:bootps</span><br></pre></td></tr></table></figure>

<h3 id="5-3）测试IP分发"><a href="#5-3）测试IP分发" class="headerlink" title="5.3）测试IP分发"></a>5.3）测试IP分发</h3><p>打开一个客户端机器，IP获得方式为自动获取，测试是否获得到了自己这个DHCP服务器发放的IP地址。本例子中测试机使用了centos 8系统。来看下测试结果吧！</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1) 查看一下当前eth0的IP地址、MAC地址，并保证其IP获得方式为:DHCP</span><br><span class="line">[root@test 桌面]# ifconfig eth0</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 00:0C:29:1A:F8:BD  </span><br><span class="line">          inet addr:172.16.44.132  Bcast:172.16.44.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe1a:f8bd/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:86 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:63 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:15294 (14.9 KiB)  TX bytes:6769 (6.6 KiB)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2）使用dhclient命令来获得IP，看一下重要输出</span><br><span class="line">[root@test 桌面]# dhclient -d eth0</span><br><span class="line">Internet Systems Consortium DHCP Client 4.1.1-P1</span><br><span class="line">Copyright 2004-2010 Internet Systems Consortium.</span><br><span class="line">All rights reserved.</span><br><span class="line">For info, please visit https://www.isc.org/software/dhcp/</span><br><span class="line"></span><br><span class="line">Listening on LPF/eth0/00:0c:29:1a:f8:bd</span><br><span class="line">Sending on   LPF/eth0/00:0c:29:1a:f8:bd</span><br><span class="line">Sending on   Socket/fallback</span><br><span class="line">DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 6 (xid=0x316768c3)      发广播寻找DHCP服务器</span><br><span class="line">DHCPOFFER from 192.168.11.16                                                     192.168.11.16DHCP服务器应答</span><br><span class="line">DHCPREQUEST on eth0 to 255.255.255.255 port 67 (xid=0x316768c3)                  client向服务器请求IP地址</span><br><span class="line">DHCPACK from 192.168.11.16 (xid=0x316768c3)                                      确认租赁关系</span><br><span class="line">bound to 192.168.11.156 -- renewal in 2983 seconds.                              client分得IP:192.168.11.156</span><br><span class="line"></span><br><span class="line">注意：看到这些信息后，按CTRL+C退出。</span><br><span class="line">dhclient是一个DHCP协议客户端，它使用DHCP协议或者BOOTP协议或在这两个协议都不可用时使用静态地址来配置一个或多个网络接口</span><br><span class="line">dhclient -r 释放IP地址</span><br><span class="line">dhclient -d 强制dhclient作为前台进程运行。 通常情况下，DHCP客户端将在前台运行,直到配置了一个接口,此时它将恢复为在后</span><br><span class="line">            台运行。               </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3) 服务器日志查看验证获取信息</span><br><span class="line">[root@zutuanxue ~]# tailf /var/log/messages</span><br><span class="line">Feb 21 13:40:44 baism dhcpd: DHCPDISCOVER from 00:0c:29:1a:f8:bd via ens33</span><br><span class="line">Feb 21 13:40:45 baism dhcpd: DHCPOFFER on 192.168.11.156 to 00:0c:29:1a:f8:bd via ens33</span><br><span class="line">Feb 21 13:40:45 baism dhcpd: DHCPREQUEST for 192.168.11.156 (192.168.11.16) from 00:0c:29:1a:f8:bd via ens33</span><br><span class="line">Feb 21 13:40:45 baism dhcpd: DHCPACK on 192.168.11.156 to 00:0c:29:1a:f8:bd via ens33</span><br><span class="line"></span><br><span class="line">4) 在client上通过ifconfig命令再次查看eth0 IP地址，验证是否为192.168.11.156</span><br><span class="line">[root@test 桌面]# ifconfig eth0</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 00:0C:29:1A:F8:BD  </span><br><span class="line">          inet addr:192.168.11.156  Bcast:192.168.11.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe1a:f8bd/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:97 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:67 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:17364 (16.9 KiB)  TX bytes:7537 (7.3 KiB)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5）查看网关，确定网关为192.168.11.254</span><br><span class="line">[root@test 桌面]# route -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">192.168.11.0    0.0.0.0         255.255.255.0   U     0      0        0 eth1</span><br><span class="line">192.168.11.0    0.0.0.0         255.255.255.0   U     0      0        0 eth0</span><br><span class="line">169.254.0.0     0.0.0.0         255.255.0.0     U     1003   0        0 eth1</span><br><span class="line">0.0.0.0         192.168.11.254  0.0.0.0         UG    0      0        0 eth0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">6）查看DNS配置文件，看DNS是否为DHCP服务器发放的DNS服务器IP</span><br><span class="line">[root@test 桌面]# cat /etc/resolv.conf </span><br><span class="line">; generated by /sbin/dhclient-script</span><br><span class="line">nameserver 202.106.0.20</span><br><span class="line">nameserver 114.114.114.114</span><br></pre></td></tr></table></figure>

<h3 id="5-4）通过DHCP服务器租约文件查看具体租约"><a href="#5-4）通过DHCP服务器租约文件查看具体租约" class="headerlink" title="5.4）通过DHCP服务器租约文件查看具体租约"></a>5.4）通过DHCP服务器租约文件查看具体租约</h3><p>租约文件的路径: &#x2F;var&#x2F;lib&#x2F;dhcpd&#x2F;dhcpd.leases</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /var/lib/dhcpd/dhcpd.leases</span><br><span class="line"># The format of this file is documented in the dhcpd.leases(5) manual page.</span><br><span class="line"># This lease file was written by isc-dhcp-4.3.6</span><br><span class="line"></span><br><span class="line"># authoring-byte-order entry is generated, DO NOT DELETE</span><br><span class="line">authoring-byte-order little-endian;</span><br><span class="line"></span><br><span class="line">server-duid &quot;\000\001\000\001%\257\376\022\000\014)c.\345&quot;;</span><br><span class="line"></span><br><span class="line">lease 192.168.11.153 &#123;</span><br><span class="line">  starts 2 2020/01/14 04:21:04;	#开始时间</span><br><span class="line">  ends 2 2020/01/14 06:21:04;		#结束时间</span><br><span class="line">  cltt 2 2020/01/14 04:21:04;</span><br><span class="line">  binding state active;</span><br><span class="line">  next binding state free;</span><br><span class="line">  rewind binding state free;</span><br><span class="line">  hardware ethernet 00:0c:29:6d:1c:b3;</span><br><span class="line">  uid &quot;\001\000\014)m\034\263&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注意：当你发现这里的时间和你的服务器时间不一致的时候，建议你修改时区解决问题，一般是差8个小时，大家明白就好。</span><br></pre></td></tr></table></figure>

<h3 id="5-5）保留IP"><a href="#5-5）保留IP" class="headerlink" title="5.5）保留IP"></a>5.5）保留IP</h3><p>在IP租约到期后，如果无法续订租约，client只能乖乖交出IP地址，重新获得一个其他IP使用。但是在公司有些服务器的IP地址是不能变化的，因为变了用户就无法连接到服务器了，比如公司文件服务器、打印服务器等等。那么在这种环境中我们既想使用DHCP管理公司IP，又想实现部分机器的IP永久不变，那么怎么实现呢。</p>
<p>DHCP的作者在写DHCP的时候也想到了这个问题，提出了保留IP的概念，就是将某些IP保留，然后服务器来获得IP的时候，根据其MAC地址做匹配，将对应的IP分给它即可。</p>
<p><strong>教学案例:希望这个MAC地址为00:0C:29:1A:F8:C7的网卡能永久获得IP 192.168.11.252，实现方式如下:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> a、在配置文件/etc/dhcp/dhcpd.conf末尾添加以下内容</span><br><span class="line"> host print &#123;         </span><br><span class="line">  hardware ethernet 00:0C:29:1A:F8:C7;</span><br><span class="line">  fixed-address 192.168.11.252;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">host print    host为指令，print是个名字，随便起，但是最好有意义，要不过一段你也记不住了。</span><br><span class="line">hardware ethernet 指定以太网网卡MAC地址</span><br><span class="line">fixed-address 指定要绑定的IP</span><br><span class="line"></span><br><span class="line">b、重启DHCP服务</span><br><span class="line">[root@zutuanxue ~]# systemctl restart dhcpd</span><br><span class="line"></span><br><span class="line">c、测试，登陆测试机，释放挡墙IP，重新获得新的IP，查看IP地址是否正确分发</span><br><span class="line">[root@test 桌面]# ifconfig eth1</span><br><span class="line">eth1      Link encap:Ethernet  HWaddr 00:0C:29:1A:F8:C7  </span><br><span class="line">          inet addr:192.168.11.155  Bcast:192.168.11.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe1a:f8c7/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:4071 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:187 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:433880 (423.7 KiB)  TX bytes:16888 (16.4 KiB)</span><br><span class="line"></span><br><span class="line">[root@test 桌面]# dhclient -r eth1</span><br><span class="line"></span><br><span class="line">[root@test 桌面]# dhclient -d eth1</span><br><span class="line">Internet Systems Consortium DHCP Client 4.1.1-P1</span><br><span class="line">Copyright 2004-2010 Internet Systems Consortium.</span><br><span class="line">All rights reserved.</span><br><span class="line">For info, please visit https://www.isc.org/software/dhcp/</span><br><span class="line"></span><br><span class="line">Listening on LPF/eth1/00:0c:29:1a:f8:c7</span><br><span class="line">Sending on   LPF/eth1/00:0c:29:1a:f8:c7</span><br><span class="line">Sending on   Socket/fallback</span><br><span class="line">DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 4 (xid=0x45c162c2)</span><br><span class="line">DHCPOFFER from 192.168.11.16</span><br><span class="line">DHCPREQUEST on eth1 to 255.255.255.255 port 67 (xid=0x45c162c2)</span><br><span class="line">DHCPACK from 192.168.11.16 (xid=0x45c162c2)</span><br><span class="line">bound to 192.168.11.252 -- renewal in 2881 seconds.</span><br><span class="line">^C</span><br><span class="line"></span><br><span class="line">[root@test 桌面]# ifconfig eth1</span><br><span class="line">eth1      Link encap:Ethernet  HWaddr 00:0C:29:1A:F8:C7  </span><br><span class="line">          inet addr:192.168.11.252  Bcast:192.168.11.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe1a:f8c7/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:4081 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:191 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:436337 (426.1 KiB)  TX bytes:17656 (17.2 KiB)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">完美！</span><br></pre></td></tr></table></figure>

<h2 id="六、DHCP超级作用域"><a href="#六、DHCP超级作用域" class="headerlink" title="六、DHCP超级作用域"></a>六、DHCP超级作用域</h2><p>体验了DHCP服务器给大家带来的方便后，我们工作轻松了很多，但是随着时间的推移，突然有这么一个问题急需你解决，由于公司的发展壮大，公司人员数量越来越多，公司一个网段的IP无法满足日常使用，所以又加了一个网段。但是默认情况下，DHCP服务器只能发放和自己网卡在同一网段的IP地址，目前我们DHCP的网卡IP地址为192.168.11.0段，我们新加的网段为192.168.12.0，那么怎么能让DHCP服务器既能发11网段，又能发放12网段呢？学会超级作用域就可以解决这个问题。</p>
<p>超级作用域：将两个或以上的不同网段的作用域合成一个作用域既是超级作用域。</p>
<p><strong>案例:部署一个超级作用域，作用域是192.168.11.0&#x2F;24网段，192.168.12.0&#x2F;24网段。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a、编辑配置文件</span><br><span class="line">[root@zutuanxue ~]# cat /etc/dhcp/dhcpd.conf</span><br><span class="line">option domain-name-servers 4.2.2.2, 4.2.2.1;</span><br><span class="line"></span><br><span class="line">default-lease-time 28800;</span><br><span class="line">max-lease-time 43200;</span><br><span class="line">#authoritative;</span><br><span class="line">log-facility local7;</span><br><span class="line"></span><br><span class="line">#share-network 部署一个超级作用域</span><br><span class="line">#supper 超级作用域名称，随便起，但是建议有意义。</span><br><span class="line">shared-network supper &#123;</span><br><span class="line">#192.168.11.0作用域</span><br><span class="line">subnet 192.168.11.0 netmask 255.255.255.0 &#123;</span><br><span class="line">range 192.168.11.150 192.168.11.150;</span><br><span class="line">option domain-name-servers 202.106.0.20, 114.114.114.114;</span><br><span class="line">option routers 192.168.11.254;</span><br><span class="line">default-lease-time 7200;</span><br><span class="line">max-lease-time 10800;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#192.168.12.0作用域</span><br><span class="line">subnet 192.168.12.0 netmask 255.255.255.0 &#123;</span><br><span class="line">range 192.168.12.150 192.168.12.150;</span><br><span class="line">option domain-name-servers 202.106.0.20, 114.114.114.114;</span><br><span class="line">option routers 192.168.12.254;</span><br><span class="line">default-lease-time 7200;</span><br><span class="line">max-lease-time 10800;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注意：案例中为了方便验证，我每个作用域只发布一个IP，否者测试无法保证能100%分到两个网段。</span><br><span class="line"></span><br><span class="line">b、重启DHCP服务，生效配置文件</span><br><span class="line">[root@zutuanxue dhcp]# systemctl restart dhcpd</span><br><span class="line"></span><br><span class="line">c、验证</span><br><span class="line">#释放两网卡IP</span><br><span class="line">[root@test 桌面]# dhclient -r eth0</span><br><span class="line">[root@test 桌面]# dhclient -r eth1</span><br><span class="line"></span><br><span class="line">#释放成功</span><br><span class="line">[root@test 桌面]# ifconfig</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 00:0C:29:1A:F8:BD  </span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe1a:f8bd/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:1591 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:162 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:282324 (275.7 KiB)  TX bytes:30619 (29.9 KiB)</span><br><span class="line"></span><br><span class="line">eth1      Link encap:Ethernet  HWaddr 00:0C:29:1A:F8:C7  </span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe1a:f8c7/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:4719 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:216 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:559954 (546.8 KiB)  TX bytes:19582 (19.1 KiB)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          inet6 addr: ::1/128 Scope:Host</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:16436  Metric:1</span><br><span class="line">          RX packets:12 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:12 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:0 </span><br><span class="line">          RX bytes:720 (720.0 b)  TX bytes:720 (720.0 b)</span><br><span class="line"></span><br><span class="line">#分别获取IP地址 </span><br><span class="line">[root@test 桌面]# dhclient -d eth0</span><br><span class="line">Internet Systems Consortium DHCP Client 4.1.1-P1</span><br><span class="line">Copyright 2004-2010 Internet Systems Consortium.</span><br><span class="line">All rights reserved.</span><br><span class="line">For info, please visit https://www.isc.org/software/dhcp/</span><br><span class="line"></span><br><span class="line">Listening on LPF/eth0/00:0c:29:1a:f8:bd</span><br><span class="line">Sending on   LPF/eth0/00:0c:29:1a:f8:bd</span><br><span class="line">Sending on   Socket/fallback</span><br><span class="line">DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 6 (xid=0x2574199a)</span><br><span class="line">DHCPOFFER from 192.168.11.16</span><br><span class="line">DHCPREQUEST on eth0 to 255.255.255.255 port 67 (xid=0x2574199a)</span><br><span class="line">DHCPACK from 192.168.11.16 (xid=0x2574199a)</span><br><span class="line">bound to 192.168.11.150 -- renewal in 3026 seconds.</span><br><span class="line">^C</span><br><span class="line">#确保都是来自我们实验中的DHCP服务器</span><br><span class="line">[root@test 桌面]# dhclient -d eth1</span><br><span class="line">Internet Systems Consortium DHCP Client 4.1.1-P1</span><br><span class="line">Copyright 2004-2010 Internet Systems Consortium.</span><br><span class="line">All rights reserved.</span><br><span class="line">For info, please visit https://www.isc.org/software/dhcp/</span><br><span class="line"></span><br><span class="line">Listening on LPF/eth1/00:0c:29:1a:f8:c7</span><br><span class="line">Sending on   LPF/eth1/00:0c:29:1a:f8:c7</span><br><span class="line">Sending on   Socket/fallback</span><br><span class="line">DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 7 (xid=0x2cebde11)</span><br><span class="line">DHCPOFFER from 192.168.11.16</span><br><span class="line">DHCPREQUEST on eth1 to 255.255.255.255 port 67 (xid=0x2cebde11)</span><br><span class="line">DHCPACK from 192.168.11.16 (xid=0x2cebde11)</span><br><span class="line">bound to 192.168.12.150 -- renewal in 3102 seconds.</span><br><span class="line"></span><br><span class="line">#确保都是来自我们实验中的DHCP服务器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看IP情况，发现实验成功了，分别获得到了不同网段IP</span><br><span class="line">[root@test 桌面]# ifconfig</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 00:0C:29:1A:F8:BD  </span><br><span class="line">          inet addr:192.168.11.150  Bcast:192.168.11.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe1a:f8bd/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:1613 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:166 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:287076 (280.3 KiB)  TX bytes:31387 (30.6 KiB)</span><br><span class="line"></span><br><span class="line">eth1      Link encap:Ethernet  HWaddr 00:0C:29:1A:F8:C7  </span><br><span class="line">          inet addr:192.168.12.150  Bcast:192.168.12.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe1a:f8c7/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:4741 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:220 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:564706 (551.4 KiB)  TX bytes:20350 (19.8 KiB)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          inet6 addr: ::1/128 Scope:Host</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:16436  Metric:1</span><br><span class="line">          RX packets:12 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:12 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:0 </span><br><span class="line">          RX bytes:720 (720.0 b)  TX bytes:720 (720.0 b)</span><br></pre></td></tr></table></figure>

<h2 id="七、补充"><a href="#七、补充" class="headerlink" title="七、补充"></a>七、补充</h2><h3 id="7-1-如果客户端获得不到-IP会怎么办"><a href="#7-1-如果客户端获得不到-IP会怎么办" class="headerlink" title="7.1) 如果客户端获得不到 IP会怎么办"></a>7.1) 如果客户端获得不到 IP会怎么办</h3><p>当客户端获得不到IP地址，会得到一个169.254开头的临时IP，此IP不能和其他网段通信，但是Client会继续向网络中发DHCP广播，继续坚持不懈申请IP。</p>
<h3 id="7-2）DHCP会面临单机故障，如何解决"><a href="#7-2）DHCP会面临单机故障，如何解决" class="headerlink" title="7.2）DHCP会面临单机故障，如何解决"></a>7.2）DHCP会面临单机故障，如何解决</h3><p>两台设备互相分发对方网段一段IP，将作用域采用8&#x2F;2原则，彼此互相冗余，当一台服务器出现问题，不至于整个网段故障。</p>
<h3 id="7-3）抓包验证方法"><a href="#7-3）抓包验证方法" class="headerlink" title="7.3）抓包验证方法"></a>7.3）抓包验证方法</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue dhcp]# tcpdump -nn -vvv -s 1500 -i ens33 host 192.168.11.16 and udp port 67 or udp port 68</span><br></pre></td></tr></table></figure>

<h3 id="7-4）如何发放计算机名称"><a href="#7-4）如何发放计算机名称" class="headerlink" title="7.4）如何发放计算机名称"></a>7.4）如何发放计算机名称</h3><p>发放计算机名称只能在保留中完成，要求Client的计算机名配置文件中将对应字段删除。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">option domain-name-servers 4.2.2.2, 4.2.2.1;</span><br><span class="line"></span><br><span class="line">default-lease-time 28800;</span><br><span class="line">max-lease-time 43200;</span><br><span class="line">authoritative;</span><br><span class="line">log-facility local7;</span><br><span class="line"></span><br><span class="line">subnet 192.168.11.0 netmask 255.255.255.0 &#123;</span><br><span class="line">  range 192.168.11.153 192.168.11.252;</span><br><span class="line">  option domain-name-servers 202.106.0.20, 114.114.114.114;</span><br><span class="line">  option routers 192.168.11.254;</span><br><span class="line">  option broadcast-address 192.168.11.255;</span><br><span class="line">  default-lease-time 7200;</span><br><span class="line">  max-lease-time 10800;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">host print &#123;</span><br><span class="line">  #指定计算机名称</span><br><span class="line">  option host-name &quot;test.hello.com&quot;;</span><br><span class="line">  hardware ethernet 00:0c:29:af:f1:84;</span><br><span class="line">  fixed-address 192.168.11.252;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">注意：请把/etc/hostname 中的计算机名称清除</span><br><span class="line">      /etc/sysconfig/network中的hostname字段清除</span><br></pre></td></tr></table></figure>

<h1 id="DNS服务"><a href="#DNS服务" class="headerlink" title="DNS服务"></a>DNS服务</h1><p> 阅读 (274324) </p>
<p> 分享</p>
<p>DNS：域名系统（英文：Domain Name System)是一个域名系统，是万维网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。类似于生活中的114服务，可以通过人名找到电话号码，也可以通过电话号码找到人名(生活中没有那么准确的原因是人名有重名，而域名是全世界唯一的)。</p>
<p>DNS协议运行在UDP协议之上，使用端口号53</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">域名:</span><br><span class="line">域名是一个网站的逻辑地址，比如www.zutuanxue.com，相比IP地址更加方便人类记忆，所以被广泛使用。</span><br></pre></td></tr></table></figure>

<h2 id="一、DNS介绍"><a href="#一、DNS介绍" class="headerlink" title="一、DNS介绍"></a>一、DNS介绍</h2><p>计算机的发展起源于上世纪60年代，最初只有美国的几所高校在使用，计算机之间通信需要知道对方的地址(IP地址)，但是人们对IP地址的记忆又是不敏感的(就像生活中你能记住多少个好友的手机号码一样)。为了方便人类记忆，大学的科学家们把计算机的名字和对应的IP地址写入到计算机中的hosts文件，以此文件来做解析。</p>
<p>但是随着计算机和网络的发展出现了局域网，计算机的数量随之增加；后来为了解决方便通信问题，我们使用了wins服务器来进行计算机名和IP的注册服务，通过一个名称服务器来自动管理局域网中的计算机，并提供解析服务。人们在局域网中通过计算机名就能连接到了对应的计算机。该技术中要求计算机名称必须唯一，正是由于这个原因使得局域网中的计算机又不能太多。</p>
<p>微型计算机的出现和局域网的发展推动了广域网的发展，hosts文件只能针对极少的计算机网络，wins可以管理局域网的解析。到了广域网，人们就迫切需要一个新的服务做解析服务器，使解析方便、快速、高效的应对广域网环境。为了解决广域网解析问题，美国人研发出了DNS服务，以及成立了管理DNS相关的机构，并提出了域名命名规则。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">域名管理机构</span><br><span class="line">Internet 域名与地址管理机构（ICANN）是为承担域名系统管理，IP地址分配，协议参数配置，以及主服务器系统管理等职能而设立的非盈利机构.</span><br><span class="line">现由IANA和其他实体与美国政府约定进行管理。</span><br><span class="line"></span><br><span class="line">域名分国际域名和国内域名两种，对于国际域名而言，其命名规则是：</span><br><span class="line">域名可以由（a-z、A-Z大小写等价）26个英文字母、数字（0-9）以及连接符“-”组成，但是域名的首位必须是字母或数字。对于域名的长度也有一定</span><br><span class="line">的限制：国际通用顶级域名长度不得超过26个字符，中国国家顶级域名长度不得超过20个字符</span><br></pre></td></tr></table></figure>

<h2 id="二、DNS的解析原理"><a href="#二、DNS的解析原理" class="headerlink" title="二、DNS的解析原理"></a>二、DNS的解析原理</h2><p>目前，因特网的命名方法是层次树状结构的方法。采用这种命名方法，任何一个连接在因特网上的主机或设备，都有一个某一的层次结构的名字，即域名(domain name)。域是名字空间中一个可被管理的划分。域可以继续按层次划分为子域，如二级域、三级域等等。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602998062358.png" alt="image20200114172132398.png"></p>
<h2 id="三、DNS查询"><a href="#三、DNS查询" class="headerlink" title="三、DNS查询"></a>三、DNS查询</h2><p>递归查询:一般客户机和服务器之间属递归查询，即当客户机向DNS服务器发出请求后,若DNS服务器本身不能解析,则会向另外的DNS服务器发出查询请求，得到结果后转交给客户机；如果主机所询问的本地域名服务器不知道被查询的域名的IP地址，那本地 DNS就会扮演DNS客户的角色，去代理原客户去帮忙找根域名服务器发出请求，递归即递给服务器，所有操作都有服务器来完成。</p>
<p>迭代查询:一般DNS服务器之间属迭代查询，如：DNS1问DNS2,DNS2不知道会告诉DNS1一个DNS3的IP地址，让DNS1去问问DNS3知不知道，以此类推，就是迭代查询。</p>
<p>关于递归和迭代举个生活例子帮助大家理解：比如你问张老师一个问题，张老师告诉他答案这之间的叫递归查询。这期间也许张老师也不会，这时张老师问李老师，张老师去问崔老师，这之间的查询叫迭代查询！</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602998078641.png" alt="image20200114180942259.png"></p>
<p>正向查找：将域名解析为IP</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">www.zutuanxue.com  ---&gt; 118.190.209.153</span><br></pre></td></tr></table></figure>

<p>反向查找：将IP解析为域名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">118.290.209.153  ---&gt; www.zutuanxue.com</span><br></pre></td></tr></table></figure>

<h2 id="四、DNS服务器部署"><a href="#四、DNS服务器部署" class="headerlink" title="四、DNS服务器部署"></a>四、DNS服务器部署</h2><p><strong>约定：本实验中使用过的机器为centos8.0_x86_64系统，IP地址192.168.11.16&#x2F;24.请关闭防火墙和SELINUX。</strong></p>
<h3 id="4-1）DNS安装"><a href="#4-1）DNS安装" class="headerlink" title="4.1）DNS安装"></a>4.1）DNS安装</h3><p>DNS服务是由bind程序提供的，所以要实现DNS服务就需要安装bind程序包。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# dnf -y install bind bind-chroot</span><br><span class="line">bind  DNS主程序包</span><br><span class="line">bind-chroot DNS安全包，改变默认DNS根目录，将DNS运行在监牢模式</span><br><span class="line"></span><br><span class="line">说明:chroot监牢模式</span><br><span class="line">监牢是一个软件机制，其功能是使得某个程序无法访问规定区域之外的资源，同样也为了增强安全性（LCTT 译注：chroot “监牢”，所谓“监牢”就是指通过chroot机制来更改某个进程所能看到的根目录，即将某进程限制在指定目录中，保证该进程只能对该目录及其子目录的文件进行操作，从而保证整个服务器的安全）。Bind Chroot DNS 服务器的默认“监牢”为 /var/named/chroot。</span><br></pre></td></tr></table></figure>

<h3 id="4-2）DNS启动"><a href="#4-2）DNS启动" class="headerlink" title="4.2）DNS启动"></a>4.2）DNS启动</h3><p>DNS的守护进程叫做named,DNS是以named用户身份来运行，named用户在安装包的时候会在系统中自动创建。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CentOS8下安装了bind-chroot之后，若要使用named-chroot.service，则需要关闭named.service。两者只能运行一个</span><br><span class="line"></span><br><span class="line">方法一: 不使用chroot模式启动DNS</span><br><span class="line">开启开机启动</span><br><span class="line">[root@zutuanxue ~]# systemctl enable named</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/named.service to /usr/lib/systemd/system/named.service.</span><br><span class="line"></span><br><span class="line">启动DNS服务</span><br><span class="line">[root@zutuanxue ~]# systemctl start named</span><br><span class="line"></span><br><span class="line">验证启动</span><br><span class="line">[root@zutuanxue ~]# lsof -i :53</span><br><span class="line">COMMAND  PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">dnsmasq 1520 nobody    5u  IPv4  27001      0t0  UDP bogon:domain </span><br><span class="line">dnsmasq 1520 nobody    6u  IPv4  27002      0t0  TCP bogon:domain (LISTEN)</span><br><span class="line">named   2553  named   21u  IPv4  38662      0t0  TCP localhost:domain (LISTEN)</span><br><span class="line">named   2553  named   22u  IPv6  38664      0t0  TCP localhost:domain (LISTEN)</span><br><span class="line">named   2553  named  512u  IPv4  38660      0t0  UDP localhost:domain </span><br><span class="line">named   2553  named  513u  IPv4  38660      0t0  UDP localhost:domain </span><br><span class="line">named   2553  named  514u  IPv4  38660      0t0  UDP localhost:domain </span><br><span class="line">named   2553  named  515u  IPv4  38660      0t0  UDP localhost:domain </span><br><span class="line">named   2553  named  516u  IPv6  38663      0t0  UDP localhost:domain </span><br><span class="line">named   2553  named  517u  IPv6  38663      0t0  UDP localhost:domain </span><br><span class="line">named   2553  named  518u  IPv6  38663      0t0  UDP localhost:domain </span><br><span class="line">named   2553  named  519u  IPv6  38663      0t0  UDP localhost:domain</span><br><span class="line"></span><br><span class="line">方法二: 使用chroot模式DNS</span><br><span class="line">将对应的文件移动到chroot根目录</span><br><span class="line">主配文件</span><br><span class="line">[root@zutuanxue ~]# cp /etc/named.conf /var/named/chroot/etc/</span><br><span class="line">[root@zutuanxue ~]# chgrp named /var/named/chroot/etc/named.conf</span><br><span class="line">[root@zutuanxue ~]# named-checkconf /var/named/chroot/etc/named.conf</span><br><span class="line"></span><br><span class="line">区域数据库文件</span><br><span class="line">[root@zutuanxue named]# cd /var/named/</span><br><span class="line">[root@zutuanxue named]# cp -r data /var/named/chroot/var/named/</span><br><span class="line">[root@zutuanxue named]# cp -r dynamic /var/named/chroot/var/named/</span><br><span class="line">[root@zutuanxue named]# cp named.* /var/named/chroot/var/named/</span><br><span class="line">[root@zutuanxue named]# cd /var/named/chroot/var/named/</span><br><span class="line">[root@zutuanxue named]# chown -R named.named *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">启动DNS服务</span><br><span class="line">开机启动</span><br><span class="line">[root@zutuanxue ~]# systemctl enable named-chroot.service </span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/named-chroot.service to /usr/lib/systemd/system/named-chroot.service.</span><br><span class="line">启动服务</span><br><span class="line">[root@zutuanxue ~]# mv /etc/named.conf /root/</span><br><span class="line">[root@zutuanxue ~]# systemctl start named-chroot</span><br><span class="line"></span><br><span class="line">验证启动</span><br><span class="line">[root@zutuanxue ~]# lsof -i :53</span><br><span class="line">COMMAND  PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">dnsmasq 1525 nobody    5u  IPv4  27359      0t0  UDP bogon:domain </span><br><span class="line">named   2877  named   21u  IPv4  44717      0t0  TCP localhost:domain (LISTEN)</span><br><span class="line">named   2877  named   22u  IPv4  44719      0t0  TCP bogon:domain (LISTEN)</span><br><span class="line">named   2877  named   23u  IPv4  44721      0t0  TCP bogon:domain (LISTEN)</span><br><span class="line">named   2877  named  512u  IPv4  44715      0t0  UDP localhost:domain </span><br><span class="line">named   2877  named  513u  IPv4  44715      0t0  UDP localhost:domain </span><br><span class="line">named   2877  named  514u  IPv4  44715      0t0  UDP localhost:domain </span><br><span class="line">named   2877  named  515u  IPv4  44715      0t0  UDP localhost:domain </span><br><span class="line">named   2877  named  516u  IPv4  44718      0t0  UDP bogon:domain </span><br><span class="line">named   2877  named  517u  IPv4  44718      0t0  UDP bogon:domain </span><br><span class="line">named   2877  named  518u  IPv4  44718      0t0  UDP bogon:domain </span><br><span class="line">named   2877  named  519u  IPv4  44718      0t0  UDP bogon:domain </span><br><span class="line">named   2877  named  520u  IPv4  44720      0t0  UDP bogon:domain </span><br><span class="line">named   2877  named  521u  IPv4  44720      0t0  UDP bogon:domain </span><br><span class="line">named   2877  named  522u  IPv4  44720      0t0  UDP bogon:domain </span><br><span class="line">named   2877  named  523u  IPv4  44720      0t0  UDP bogon:domain</span><br></pre></td></tr></table></figure>

<h3 id="4-3）DNS配置文件"><a href="#4-3）DNS配置文件" class="headerlink" title="4.3）DNS配置文件"></a>4.3）DNS配置文件</h3><p>默认情况下，如果不安装bind-chroot这个包，配置文件的路径如下：</p>
<p>配置文件:&#x2F;etc&#x2F;named.conf</p>
<p>区域数据库文件:&#x2F;var&#x2F;named&#x2F;</p>
<p>由于我们安装了bind-chroot这个用于改变默认DNS配置文件的路径的包，所以相对应的配置文件的路径也发生了变化。</p>
<p>变化如下：</p>
<p>配置文件:&#x2F;var&#x2F;named&#x2F;chroot&#x2F;etc&#x2F;named.conf</p>
<p>区域数据库文件:&#x2F;var&#x2F;named&#x2F;chroot&#x2F;var&#x2F;named&#x2F;</p>
<p>a、主配文件详解</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//</span><br><span class="line">// named.conf</span><br><span class="line">//</span><br><span class="line">// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</span><br><span class="line">// server as a caching only nameserver (as a localhost DNS resolver only).</span><br><span class="line">//</span><br><span class="line">// See /usr/share/doc/bind*/sample/ for example named configuration files.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">options</span><br><span class="line">&#123;</span><br><span class="line">		</span><br><span class="line">    #IPv4监听端口为53，只允许本机连接</span><br><span class="line">    listen-on port 53    &#123; 127.0.0.1; &#125;;</span><br><span class="line">    #IPv6监听端口为53，只允许本机连接</span><br><span class="line">    listen-on-v6 port 53    &#123; ::1; &#125;;</span><br><span class="line">		#定义工作目录</span><br><span class="line">    directory         &quot;/var/named&quot;; </span><br><span class="line">    #CACHE文件路径,指定服务器在收到rndc dump命令时，转储数据到文件的路径。默认cache_dump.db</span><br><span class="line">    dump-file         &quot;data/cache_dump.db&quot;;</span><br><span class="line">    #静态文件路径,指定服务器在收到rndc stats命令时，追加统计数据的文件路径。默认named.stats</span><br><span class="line">    statistics-file     &quot;data/named_stats.txt&quot;;</span><br><span class="line">    #内存静态文件路径,服务器在退出时，将内存统计写到文件的路径。默认named.mem_stats</span><br><span class="line">    memstatistics-file     &quot;data/named_mem_stats.txt&quot;;</span><br><span class="line">        #在收到rndc secroots指令后，服务器转储安全根的目的文件的路径名。默认named.secroots</span><br><span class="line">    secroots-file        &quot;data/named.secroots&quot;;</span><br><span class="line">    # 指定服务器在通过rndc recursing命令指定转储当前递归请求到的文件路径。默认named.recursing</span><br><span class="line">    recursing-file        &quot;data/named.recursing&quot;;</span><br><span class="line">    </span><br><span class="line">    #指定允许哪些主机可以进行普通的DNS查询,可以是关键字:any/localhost/none,也可以是IPV4,IPV6地址</span><br><span class="line">    allow-query        &#123; localhost; &#125;;</span><br><span class="line">    #指定允许哪些主机可以对缓存的访问</span><br><span class="line">    allow-query-cache    &#123; localhost; &#125;;</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">     - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.</span><br><span class="line">    假如你建立的是一个权威DNS你不需要开启递归</span><br><span class="line">     - If you are building a RECURSIVE (caching) DNS server, you need to enable recursion. </span><br><span class="line">    假如你建立的是一个递归DNS,你需要开启递归服务</span><br><span class="line">     - If your recursive DNS server has a public IP address, you MUST enable access control to limit queries to your legitimate users. Failing to do so will</span><br><span class="line">     如果你的递归DNS是具有公网IP，你必须要设置访问控制来限制对合法用户的查询.</span><br><span class="line">       cause your server to become part of large scale DNS amplification </span><br><span class="line">    否则你的DNS会被大规模的攻击</span><br><span class="line">       attacks. Implementing BCP38 within your network would greatly</span><br><span class="line">    在您的网络中实现BCP38将非常重要减少此类攻击面</span><br><span class="line">       reduce such attack surface </span><br><span class="line">     */</span><br><span class="line">    #开启递归</span><br><span class="line">    recursion yes;</span><br><span class="line"></span><br><span class="line">    #开启DNSSEC在权威或者递归服务器之间信任服务</span><br><span class="line">    dnssec-enable yes;</span><br><span class="line"></span><br><span class="line">    #开启DNSSEC验证在递归服务器</span><br><span class="line">    dnssec-validation yes;</span><br><span class="line"></span><br><span class="line">    #指定目录，其中保存着跟踪被管理DNSSEC密钥文件。默认为工作目录。</span><br><span class="line">    managed-keys-directory &quot;/var/named/dynamic&quot;;</span><br><span class="line">    </span><br><span class="line">    #PID文件路径</span><br><span class="line">    pid-file &quot;/run/named/named.pid&quot;;</span><br><span class="line">    #session-keyfile文件路径</span><br><span class="line">    session-keyfile &quot;/run/named/session.key&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">logging </span><br><span class="line">&#123;</span><br><span class="line">#开启DNS日志记录</span><br><span class="line">        channel default_debug &#123;</span><br><span class="line">                file &quot;data/named.run&quot;;</span><br><span class="line">                severity dynamic;</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    #定义一个根域</span><br><span class="line">zone &quot;.&quot; IN &#123;</span><br><span class="line">        #域类型为hint,还有master slave forward等类型</span><br><span class="line">            type hint;</span><br><span class="line">        #区域数据库文件路径</span><br><span class="line">            file &quot;/var/named/named.ca&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">    #包含两个子配置文件</span><br><span class="line">    include &quot;/etc/named.rfc1912.zones&quot;;</span><br><span class="line">    include &quot;/etc/named.root.key&quot;;</span><br></pre></td></tr></table></figure>

<p>b、区域数据库文件详解</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">正向解析</span><br><span class="line">[root@zutuanxue ~]# cat /var/named/named.localhost </span><br><span class="line">;缓存时间</span><br><span class="line">$TTL 1D</span><br><span class="line">;@表示相应的域名</span><br><span class="line">	@    				IN 	SOA        @ 					rname.invalid. (</span><br><span class="line">;解析的域名   类型 授权域    授权域名服务器   管理员邮箱</span><br><span class="line">                    0    ; serial  </span><br><span class="line">         序列号,每次更新该文件系列号都应该变大</span><br><span class="line">                    1D    ; refresh </span><br><span class="line">刷新时间,即规定从域名服务器多长时间查询一个主服务器，以保证从服务器的数据是最新的</span><br><span class="line">                    1H    ; retry   </span><br><span class="line">重试时间,即当从服务试图在主服务器上查询更时，而连接失败了，则这个值规定了从服务多长时间后再试 </span><br><span class="line">                    1W    ; expire  </span><br><span class="line">   过期时间,从服务器在向主服务更新失败后多长时间后清除对应的记录</span><br><span class="line">                    3H )    ; minimum </span><br><span class="line">   这个数据用来规定缓存服务器不能与主服务联系上后多长时间清除相应的记录</span><br><span class="line">    NS   				@</span><br><span class="line">    ;NS 名称服务器，表示这个主机为域名服务器</span><br><span class="line">    			A    		127.0.0.1</span><br><span class="line">;主机头  	A记录   	IP</span><br><span class="line">    AAAA    		::1</span><br><span class="line">;   AAAA 				解析为IPV6地址</span><br><span class="line"></span><br><span class="line">#反向解析</span><br><span class="line">[root@zutuanxue ~]# cat named.loopback </span><br><span class="line">$TTL 1D</span><br><span class="line">@    IN SOA    @ rname.invalid. (</span><br><span class="line">                    0    ; serial</span><br><span class="line">                    1D    ; refresh</span><br><span class="line">                    1H    ; retry</span><br><span class="line">                    1W    ; expire</span><br><span class="line">                    3H )    ; minimum</span><br><span class="line">    NS    		@</span><br><span class="line">    PTR    		localhost</span><br><span class="line">;IP 反向指针     主机名</span><br><span class="line">;PTR 反向指针 反解</span><br></pre></td></tr></table></figure>

<h2 id="五、部署一个正向解析"><a href="#五、部署一个正向解析" class="headerlink" title="五、部署一个正向解析"></a>五、部署一个正向解析</h2><h3 id="5-1）教学案例"><a href="#5-1）教学案例" class="headerlink" title="5.1）教学案例"></a>5.1）教学案例</h3><p><strong>对zutuanxue.com域名做解析，解析要求如下：</strong></p>
<p><strong>www 解析为A记录 IP地址为 192.168.11.88</strong></p>
<p><strong>news 做别名解析CNAME 解析为 www</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1）主配置文件</span><br><span class="line">[root@zutuanxue ~]# cat /var/named/chroot/etc/named.conf </span><br><span class="line">options &#123;</span><br><span class="line">    listen-on port 53 &#123; any; &#125;;</span><br><span class="line">    directory     &quot;/var/named&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//定义根域</span><br><span class="line">//用于DNS向根递归查询</span><br><span class="line">zone &quot;.&quot; IN &#123;</span><br><span class="line">    type hint;</span><br><span class="line">    //保存了DNS根级服务器的地址</span><br><span class="line">    file &quot;named.ca&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//定义一个主域</span><br><span class="line">//注意每行都要;结尾</span><br><span class="line">zone &quot;zutuanxue.com&quot; IN &#123;</span><br><span class="line">//类型为master</span><br><span class="line">    type master;</span><br><span class="line">//区域数据库文件名称</span><br><span class="line">    file &quot;zutuanxue.com.zone&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2）区域数据库文件</span><br><span class="line">[root@zutuanxue named]# cat zutuanxue.com.zone </span><br><span class="line">$TTL 1D</span><br><span class="line">zutuanxue.com.    IN SOA    ns1.zutuanxue.com. rname.invalid. (</span><br><span class="line">                    0    ; serial</span><br><span class="line">                    1D    ; refresh</span><br><span class="line">                    1H    ; retry</span><br><span class="line">                    1W    ; expire</span><br><span class="line">                    3H )    ; minimum</span><br><span class="line">;zutuanxue.com.  需要做解析的域名</span><br><span class="line">;ns1.zutuanxue.com.  为zutuanxue.com.做解析的DNS    这里我们既是DNS也同时为自己域名做了解析</span><br><span class="line"></span><br><span class="line">    NS    ns1.zutuanxue.com.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;A         域名机械为IP</span><br><span class="line">;PTR        IP解析为域名</span><br><span class="line">;MX        邮件标记</span><br><span class="line">;CNAME        别名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ns1    A    192.168.11.16</span><br><span class="line">www    A    192.168.11.88</span><br><span class="line">news  CNAME    www</span><br></pre></td></tr></table></figure>

<h3 id="5-2）测试方法"><a href="#5-2）测试方法" class="headerlink" title="5.2）测试方法"></a>5.2）测试方法</h3><p>域名解析linux系统为大家提供了三个命令，看大家喜欢用哪个都可以。</p>
<p>a、host采用非交互式解析，</p>
<p>b、nslookup可以采用交互或非交互式解析</p>
<p>c、dig显示详细的解析流程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">测试注意：请将你的测试客户端机器的DNS指向你自己的DNS服务器的IP地址。本例中我使用DNS服务器给自己当测试端，我修改了自己的DNS服务器地址</span><br><span class="line">[root@zutuanxue ~]# cat /etc/resolv.conf </span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">nameserver 192.168.11.16</span><br><span class="line"></span><br><span class="line">#host命令</span><br><span class="line">[root@zutuanxue ~]# host news.zutuanxue.com</span><br><span class="line">news.zutuanxue.com is an alias for www.zutuanxue.com.</span><br><span class="line">www.zutuanxue.com has address 192.168.11.88</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#nslookup 命令---交互式解析</span><br><span class="line">[root@zutuanxue ~]# nslookup</span><br><span class="line">&gt; news.zutuanxue.com</span><br><span class="line">Server:        192.168.11.16</span><br><span class="line">Address:    192.168.11.16#53</span><br><span class="line"></span><br><span class="line">news.zutuanxue.com    canonical name = www.zutuanxue.com.</span><br><span class="line">Name:    www.zutuanxue.com</span><br><span class="line">Address: 192.168.11.88</span><br><span class="line">&gt; exit</span><br><span class="line"></span><br><span class="line">#nslookup 命令---非交互式解析</span><br><span class="line">[root@zutuanxue ~]# nslookup news.zutuanxue.com</span><br><span class="line">Server:        192.168.11.16</span><br><span class="line">Address:    192.168.11.16#53</span><br><span class="line"></span><br><span class="line">news.zutuanxue.com    canonical name = www.zutuanxue.com.</span><br><span class="line">Name:    www.zutuanxue.com</span><br><span class="line">Address: 192.168.11.88</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#dig命令</span><br><span class="line">[root@zutuanxue ~]# dig news.zutuanxue.com</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.9.4-RedHat-9.9.4-73.el7_6 &lt;&lt;&gt;&gt; news.zutuanxue.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 28487</span><br><span class="line">;; flags: qr aa rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 1, ADDITIONAL: 1</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 4096</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;news.zutuanxue.com.        IN    A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">news.zutuanxue.com.    86400    IN    CNAME    www.zutuanxue.com.</span><br><span class="line">www.zutuanxue.com.    86400    IN    A    192.168.11.88</span><br><span class="line"></span><br><span class="line">;; AUTHORITY SECTION:</span><br><span class="line">zutuanxue.com.        86400    IN    NS    www.zutuanxue.com.</span><br><span class="line"></span><br><span class="line">;; Query time: 0 msec</span><br><span class="line">;; SERVER: 192.168.11.16#53(192.168.11.16)</span><br><span class="line">;; WHEN: 一 2月 25 10:52:19 CST 2019</span><br><span class="line">;; MSG SIZE  rcvd: 93</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">技巧：</span><br><span class="line">在dig解析中，后面跟上+trace来显示详细解析流程</span><br><span class="line">[root@zutuanxue ~]# dig www.zutuanxue.com +trace</span><br></pre></td></tr></table></figure>

<h2 id="六、部署一个反向解析"><a href="#六、部署一个反向解析" class="headerlink" title="六、部署一个反向解析"></a>六、部署一个反向解析</h2><p><strong>案例:对<a href="http://www.zutuanxue.com做反向解析，其对应的IP地址为192.168.11.88">www.zutuanxue.com做反向解析，其对应的IP地址为192.168.11.88</a></strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1）主配置文件添加反向解析zone</span><br><span class="line">[root@zutuanxue ~]# cat /var/named/chroot/etc/named.conf </span><br><span class="line">options &#123;</span><br><span class="line">    listen-on port 53 &#123; any; &#125;;</span><br><span class="line">    directory     &quot;/var/named&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//定义根域</span><br><span class="line">//用于DNS向根递归查询</span><br><span class="line">zone &quot;.&quot; IN &#123;</span><br><span class="line">    type hint;</span><br><span class="line">    //保存了DNS根级服务器的地址</span><br><span class="line">    file &quot;named.ca&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//定义一个主域</span><br><span class="line">//注意每行都要;结尾</span><br><span class="line">zone &quot;zutuanxue.com&quot; IN &#123;</span><br><span class="line">//类型为master</span><br><span class="line">    type master;</span><br><span class="line">//区域数据库文件名称</span><br><span class="line">    file &quot;zutuanxue.com.zone&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//定义一个反向解析</span><br><span class="line">//此处需要倒写网段</span><br><span class="line">zone &quot;11.168.192.in-addr.arpa&quot; IN &#123;</span><br><span class="line">    type master;</span><br><span class="line">    file &quot;192.168.11.arpa&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2）区域数据库文件设置</span><br><span class="line">[root@zutuanxue named]# cat 192.168.11.arpa </span><br><span class="line">$TTL 1D</span><br><span class="line">11.168.192.in-addr.arpa.    IN SOA    ns1.zutuanxue.com. rname.invalid. (</span><br><span class="line">                    0    ; serial</span><br><span class="line">                    1D    ; refresh</span><br><span class="line">                    1H    ; retry</span><br><span class="line">                    1W    ; expire</span><br><span class="line">                    3H )    ; minimum</span><br><span class="line">    NS    ns1.zutuanxue.com.</span><br><span class="line">88    PTR    www.zutuanxue.com.</span><br><span class="line"></span><br><span class="line">注意：文件的所有者和所有者组都是named</span><br><span class="line">3）使用nslookup测试</span><br><span class="line">[root@zutuanxue ~]# nslookup 192.168.11.88</span><br><span class="line">Server:        192.168.11.16</span><br><span class="line">Address:    192.168.11.16#53</span><br><span class="line"></span><br><span class="line">88.11.168.192.in-addr.arpa    name = www.zutuanxue.com.</span><br></pre></td></tr></table></figure>

<h2 id="七、DNS服务器冗余"><a href="#七、DNS服务器冗余" class="headerlink" title="七、DNS服务器冗余"></a>七、DNS服务器冗余</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602998138816.png" alt="image20200114172337009.png"></p>
<p>DNS服务器在网络中为全世界的服务器提供了域名解析服务，扮演着至关重要的角色。网络中的某台DNS一旦宕机，就会造成部分域名无法解析，用户无法顺利访问到对应的服务器。但是我们学习的过程中也发现了，我们的DNS部署在单台服务器上，如果出现单点故障，我们应该如何应对呢？我们可以通过部署多台相同解析的DNS来解决单点故障，就算一台DNS服务器出现问题，也不会影响解析服务。怎么部署呢？如何保障多台之间的解析一致？这就是我们要讨论的问题了。我们来学习辅助DNS吧！</p>
<p>辅助DNS是从主DNS拉取区域数据库文件的的，当主DNS解析的域名对应的区域数据库文件发生变化，辅助就会去找主DNS拉取新的区域数据库文件，保证和主的解析一致，而且是自动的不需要人为干预的，确保了主从DNS的区域数据库文件的一致性。</p>
<p><strong>教学案例:按照图例,为主DNS(192.168.11.16）部署一台辅助DNS(192.168.11.116)，实现数据同步。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">辅助DNS设置</span><br><span class="line">a、软件包安装</span><br><span class="line">[root@slave ~]# dnf -y install bind bind-chroot</span><br><span class="line"></span><br><span class="line">b、设置主配文件</span><br><span class="line">[root@slave etc]# cat /var/named/chroot/etc/named.conf</span><br><span class="line">options &#123;</span><br><span class="line">    listen-on port 53 &#123; any; &#125;;</span><br><span class="line">    directory     &quot;/var/named&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//定义根域</span><br><span class="line">//用于DNS向根递归查询</span><br><span class="line">zone &quot;.&quot; IN &#123;</span><br><span class="line">    type hint;</span><br><span class="line">    //保存了DNS根级服务器的地址</span><br><span class="line">    file &quot;named.ca&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//定义一个主域</span><br><span class="line">//注意每行都要;结尾</span><br><span class="line">zone &quot;zutuanxue.com&quot; IN &#123;</span><br><span class="line">//类型为slave  代表辅助</span><br><span class="line">    type slave;</span><br><span class="line">//区域数据库文件名称</span><br><span class="line">    file &quot;zutuanxue.com.zone&quot;;</span><br><span class="line">//设置主DNS IP,向该IP去同步数据</span><br><span class="line">    masters &#123; 192.168.11.16; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//定义一个反向解析</span><br><span class="line">//此处需要倒写网段</span><br><span class="line">zone &quot;11.168.192.in-addr.arpa&quot; IN &#123;</span><br><span class="line">//类型写slave  代表辅助</span><br><span class="line">    type slave;</span><br><span class="line">    file &quot;192.168.11.arpa&quot;;</span><br><span class="line">//设置主DNS IP,向该IP去同步数据</span><br><span class="line">    masters &#123; 192.168.11.16; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">修改权限</span><br><span class="line">[root@slave etc]# chgrp named named.conf </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c、启动服务</span><br><span class="line">[root@slave chroot]# systemctl enable named-chroot.service </span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/named-chroot.service to</span><br><span class="line"> /usr/lib/systemd/system/named-chroot.service.</span><br><span class="line">[root@slave chroot]# systemctl start named-chroot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d、验证</span><br><span class="line">[root@slave ~]# ls /var/named/chroot/var/named/</span><br><span class="line">192.168.11.arpa  zutuanxue.com.zone  chroot  data  dynamic  named.ca  named.empty  named.localhost  named.loopback  slaves</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">发现192.168.11.arpa  zutuanxue.com.zone 这两个数据库文件已经同步过来了，解析一下看看吧！</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">设置客户端的DNS IP为192.168.11.116，我的测试机就是这台slave机器，所以设置为192.168.11.116即可</span><br><span class="line">[root@slave ~]# cat /etc/resolv.conf </span><br><span class="line">nameserver 192.168.11.116</span><br><span class="line"></span><br><span class="line">使用nslookup验证一下</span><br><span class="line">[root@slave ~]# nslookup news.zutuanxue.com</span><br><span class="line">Server:        192.168.11.116</span><br><span class="line">Address:    192.168.11.116#53</span><br><span class="line"></span><br><span class="line">news.zutuanxue.com    canonical name = www.zutuanxue.com.</span><br><span class="line">Name:    www.zutuanxue.com</span><br><span class="line">Address: 192.168.11.88</span><br><span class="line"></span><br><span class="line">[root@slave ~]# nslookup 192.168.11.88</span><br><span class="line">Server:        192.168.11.116</span><br><span class="line">Address:    192.168.11.116#53</span><br><span class="line"></span><br><span class="line">88.11.168.192.in-addr.arpa    name = www.11.168.192.in-addr.arpa.</span><br><span class="line"></span><br><span class="line">看到结果了，完美！！</span><br></pre></td></tr></table></figure>

<h2 id="八、智能DNS"><a href="#八、智能DNS" class="headerlink" title="八、智能DNS"></a>八、智能DNS</h2><p>在我们访问WEB的时候，发现有的网站打开的速度非常快，有的网站打开的非常慢，这是为什么呢？原因就是很多公司为了提升用户的体验，自己的网站使用了CDN内容加速服务，让你直接在你本地城市的服务器上拿数据并展示给你看。什么是CDN我们暂且理解为本地缓存服务器就好，那么你是怎么准确知道你本地的缓存服务器的呢！因为很多CDN公司的DNS使用了智能解析服务，根据你的源IP判断你属于哪个城市，让后再把本地的缓存服务器解析给你，你就会直接去找该服务器拿数据了。</p>
<p>智能解析原理</p>
<p>在DNS中植入全世界的IP库以及IP对应的地域，当用户来请求解析时，DNS会根据其源IP来定位他属于哪个区域，然后去找这个区域的view视图查询对应的域名的区域数据库文件做解析。从而使得不同地域的用户解析不同。</p>
<p><strong>教学案例:部署一台DNS智能解析服务器，对zutuanxue.com域名做智能解析：</strong></p>
<p><strong>上海的用户解析IP为 1.1.1.1</strong></p>
<p><strong>北京的用户解析IP为 2.2.2.2</strong></p>
<p><strong>其他用户解析为 3.3.3.3</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">智能解析</span><br><span class="line">a、设置主配文件</span><br><span class="line">定义IP库，DNS根据IP库判断源IP属于哪个区域</span><br><span class="line">根据地域定义视图，将该区域的客户端的解析请求都由该视图中的zone来解析</span><br><span class="line"></span><br><span class="line">[root@master named]# cat /var/named/chroot/etc/named.conf</span><br><span class="line">options &#123;</span><br><span class="line">    directory     &quot;/var/named&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//定义IP库</span><br><span class="line"></span><br><span class="line">acl shanghai &#123; 192.168.11.50; &#125;;</span><br><span class="line">acl beijing &#123; 192.168.11.100; &#125;;</span><br><span class="line"></span><br><span class="line">//定义视图，通过IP匹配后，通过不同的区域数据库文件进行解析</span><br><span class="line">view sh &#123;</span><br><span class="line">	match-clients &#123; shanghai; &#125;;</span><br><span class="line">	zone &quot;zutuanxue.com&quot; IN &#123;</span><br><span class="line">    type master;</span><br><span class="line">    file &quot;zutuanxue.com.zone.sh&quot;;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">view bj &#123;</span><br><span class="line">	match-clients &#123; beijing; &#125;;</span><br><span class="line">	zone &quot;zutuanxue.com&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;zutuanxue.com.zone.bj&quot;;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">view other &#123;</span><br><span class="line">	match-clients &#123; any; &#125;;</span><br><span class="line">  zone &quot;zutuanxue.com&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;zutuanxue.com.zone.any&quot;;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">b、根据主配文件设置不同的区域数据库文件</span><br><span class="line">[root@master named]# cd /var/named/chroot/var/named</span><br><span class="line">[root@master named]# cp zutuanxue.com.zone zutuanxue.com.zone.bj</span><br><span class="line">[root@master named]# cp zutuanxue.com.zone zutuanxue.com.zone.sh</span><br><span class="line">[root@master named]# cp zutuanxue.com.zone zutuanxue.com.zone.any</span><br><span class="line">[root@master named]# chgrp named  zutuanxue.com.zone.*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@master named]# cat /var/named/chroot/var/named/zutuanxue.com.zone.sh </span><br><span class="line">$TTL 1D</span><br><span class="line">@    IN SOA    zutuanxue.com. rname.invalid. (</span><br><span class="line">                    0    ; serial</span><br><span class="line">                    1D    ; refresh</span><br><span class="line">                    1H    ; retry</span><br><span class="line">                    1W    ; expire</span><br><span class="line">                    3H )    ; minimum</span><br><span class="line">    NS    www.zutuanxue.com.</span><br><span class="line">www    A    1.1.1.1</span><br><span class="line"></span><br><span class="line">[root@master named]# cat /var/named/chroot/var/named/zutuanxue.com.zone.bj</span><br><span class="line">$TTL 1D</span><br><span class="line">@    IN SOA    zutuanxue.com. rname.invalid. (</span><br><span class="line">                    0    ; serial</span><br><span class="line">                    1D    ; refresh</span><br><span class="line">                    1H    ; retry</span><br><span class="line">                    1W    ; expire</span><br><span class="line">                    3H )    ; minimum</span><br><span class="line">    NS    www.zutuanxue.com.</span><br><span class="line">www    A    2.2.2.2</span><br><span class="line"></span><br><span class="line">[root@master named]# cat /var/named/chroot/var/named/zutuanxue.com.zone.any </span><br><span class="line">$TTL 1D</span><br><span class="line">@    IN SOA    zutuanxue.com. rname.invalid. (</span><br><span class="line">                    0    ; serial</span><br><span class="line">                    1D    ; refresh</span><br><span class="line">                    1H    ; retry</span><br><span class="line">                    1W    ; expire</span><br><span class="line">                    3H )    ; minimum</span><br><span class="line">    NS    www.zutuanxue.com.</span><br><span class="line">www    A    3.3.3.3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c、测试</span><br><span class="line">依次修改主配的IP库中的IP为本机，观看解析情况</span><br><span class="line"></span><br><span class="line">[root@master named]# nslookup www.zutuanxue.com</span><br><span class="line">Server:        192.168.11.16</span><br><span class="line">Address:    192.168.11.16#53</span><br><span class="line"></span><br><span class="line">Name:    www.zutuanxue.com</span><br><span class="line">Address: 1.1.1.1</span><br></pre></td></tr></table></figure>

<h1 id="FTP文件服务器"><a href="#FTP文件服务器" class="headerlink" title="FTP文件服务器"></a>FTP文件服务器</h1><p> 阅读 (293262) </p>
<p> 分享</p>
<h2 id="一、FTP介绍"><a href="#一、FTP介绍" class="headerlink" title="一、FTP介绍"></a>一、FTP介绍</h2><p>FTP (File transfer protocol) 是TCP&#x2F;IP 协议组中的协议之一。他最主要的功能是在服务器与客户端之间进行文件的传输。FTP就是实现两台计算机之间的拷贝，从远程计算机拷贝文件至自己的计算机上，称之为“下载 （download）”文件。将文件从自己计算机中拷贝至远程计算机上，则称之为“上传（upload）”文件。这个古老的协议使用的是明码传输方式，且过去有相当多的安全危机历史。为了更安全的使用 FTP 协议，我们主要介绍较为安全但功能较少的 vsftpd(very secure File transfer protocol ) 这个软件。FTP是一个C&#x2F;S类型的软件，FTP监听TCP端口号为21，数据端口为20。</p>
<h2 id="二、应用场景"><a href="#二、应用场景" class="headerlink" title="二、应用场景"></a>二、应用场景</h2><p>下载服务器：提供对外的下载服务</p>
<p>文件服务器：提供上传和下载服务</p>
<h2 id="三、FTP的权限"><a href="#三、FTP的权限" class="headerlink" title="三、FTP的权限"></a>三、FTP的权限</h2><p>FTP 服务器的功能除了单纯的进行文件的传输与管理之外，依据服务器软件的设定架构，它还可以提供几个主要的功能。：<br>不同等级的用户身份：user, guest, anonymous<br>FTP 服务器在默认的情况下，依据使用者登录的情况而分为三种不同的身份，分别是：</p>
<p>(1)本地用户：系统中真实存在的用户</p>
<p>(2)来宾, guest；</p>
<p>(3)匿名登录者, anonymous</p>
<p>这三种身份的用户在系统上面的权限差异很大！例如实体用户取得系统的权限比较完整， 所以可以进行比较多的动作；至于匿名登录者，大概我们就仅提供他下载资源的能力而已，并不许匿名者使用太多主机的资源！ 当然，这三种人物因为权限的不同能够使用的【在线命令】自然也就不相同！</p>
<h2 id="四、FTP的工作模式"><a href="#四、FTP的工作模式" class="headerlink" title="四、FTP的工作模式"></a>四、FTP的工作模式</h2><p>FTP支持两种模式，一种方式叫做Standard (也就是 PORT方式，主动方式)，一种是 Passive (也就是PASV，被动方式)。 Standard模式 FTP的客户端发送 PORT 命令到FTP服务器。Passive模式FTP的客户端发送 PASV命令到 FTP Server。</p>
<p>下面介绍一个这两种方式的工作原理：</p>
<p>Port模式FTP 客户端首先和FTP服务器的TCP 21端口建立连接，通过这个通道发送命令，客户端需要接收数据的时候在这个通道上发送PORT命令。 PORT命令包含了客户端用什么端口接收数据。在传送数据的时候，服务器端通过自己的TCP 20端口连接至客户端的指定端口发送数据。 FTP server必须和客户端建立一个新的连接用来传送数据。</p>
<p>Passive模式在建立控制通道的时候和Standard模式类似，但建立连接后发送的不是Port命令，而是Pasv命令。FTP服务器收到Pasv命令后，随机打开一个高端端口（端口号大于1024）并且通知客户端在这个端口上传送数据的请求，客户端连接FTP服务器此端口，然后FTP服务器将通过这个端口进行数据的传送，这个时候FTP server不再需要建立一个新的和客户端之间的连接。</p>
<p>很多防火墙在设置的时候都是不允许接受外部发起的连接的，所以许多位于防火墙后或内网的FTP服务器不支持PASV模式，因为客户端无法穿过防火墙打开FTP服务器的高端端口；而许多内网的客户端不能用PORT模式登陆FTP服务器，因为从服务器的TCP 20无法和内部网络的客户端建立一个新的连接，造成无法工作。</p>
<h2 id="五、FTP安装部署"><a href="#五、FTP安装部署" class="headerlink" title="五、FTP安装部署"></a>五、FTP安装部署</h2><p><strong>约定：本实验中使用过的机器为centos8.0_x86_64系统，IP地址192.168.11.16&#x2F;24.请关闭防火墙和SELINUX。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vsftp安装</span><br><span class="line">[root@localhost ~]# dnf -y install vsftpd ftp</span><br><span class="line"></span><br><span class="line">vsftp开机启动</span><br><span class="line">[root@localhost ~]# systemctl enable vsftpd</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to </span><br><span class="line">/usr/lib/systemd/system/vsftpd.service.</span><br><span class="line"></span><br><span class="line">启动vsftp服务</span><br><span class="line">[root@localhost ~]# systemctl start vsftpd</span><br><span class="line"></span><br><span class="line">验证启动</span><br><span class="line">[root@localhost ~]# lsof -i :21</span><br><span class="line">COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">vsftpd  1951 root    4u  IPv6  32837      0t0  TCP *:ftp (LISTEN)</span><br></pre></td></tr></table></figure>

<h2 id="六、FTP配置文件"><a href="#六、FTP配置文件" class="headerlink" title="六、FTP配置文件"></a>六、FTP配置文件</h2><h3 id="6-1）相关文件"><a href="#6-1）相关文件" class="headerlink" title="6.1）相关文件"></a>6.1）相关文件</h3><p>主配文件:&#x2F;etc&#x2F;vsftpd&#x2F;vsftpd.conf</p>
<p>下载目录:&#x2F;var&#x2F;ftp&#x2F;</p>
<p>FTP日志:&#x2F;var&#x2F;log&#x2F;xferlog</p>
<h3 id="6-2）主配文件详解"><a href="#6-2）主配文件详解" class="headerlink" title="6.2）主配文件详解"></a>6.2）主配文件详解</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Example config file /etc/vsftpd/vsftpd.conf</span><br><span class="line">#</span><br><span class="line"># The default compiled in settings are fairly paranoid. This sample file</span><br><span class="line"># loosens things up a bit, to make the ftp daemon more usable.</span><br><span class="line"># Please see vsftpd.conf.5 for all compiled in defaults.</span><br><span class="line">#</span><br><span class="line"># READ THIS: This example file is NOT an exhaustive list of vsftpd options.</span><br><span class="line"># Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd&#x27;s</span><br><span class="line"># capabilities.</span><br><span class="line">#</span><br><span class="line">#匿名用户访问,YES是允许，NO是拒绝</span><br><span class="line"># Allow anonymous FTP? (Beware - allowed by default if you comment this out).</span><br><span class="line">anonymous_enable=NO</span><br><span class="line">#</span><br><span class="line"># Uncomment this to allow local users to log in.</span><br><span class="line"># 本地用户登录,YES是允许，NO是拒绝.默认访问的是本地用户家目录，如果你开启了selinux</span><br><span class="line"># 请设置开启布尔值ftp_home_dir为ON</span><br><span class="line"># When SELinux is enforcing check for SE bool ftp_home_dir</span><br><span class="line">local_enable=YES</span><br><span class="line">#</span><br><span class="line">#允许本地用户上传</span><br><span class="line"># Uncomment this to enable any form of FTP write command.</span><br><span class="line">write_enable=YES</span><br><span class="line">#</span><br><span class="line"># Default umask for local users is 077. You may wish to change this to 022,</span><br><span class="line"># 上传的权限是022，使用的是umask权限。对应的目录是755，文件是644</span><br><span class="line"># if your users expect that (022 is used by most other ftpd&#x27;s)</span><br><span class="line">local_umask=022</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Uncomment this to allow the anonymous FTP user to upload files. This only</span><br><span class="line"># has an effect if the above global write enable is activated. Also, you will</span><br><span class="line"># obviously need to create a directory writable by the FTP user.</span><br><span class="line"># When SELinux is enforcing check for SE bool allow_ftpd_anon_write, allow_ftpd_full_access</span><br><span class="line"># 开启匿名用户上传功能，默认是拒绝的</span><br><span class="line">#anon_upload_enable=YES</span><br><span class="line">#</span><br><span class="line"># Uncomment this if you want the anonymous FTP user to be able to create</span><br><span class="line"># new directories.</span><br><span class="line"># 开启匿名用户创建文件或文件夹权限</span><br><span class="line">#anon_mkdir_write_enable=YES</span><br><span class="line">#</span><br><span class="line"># Activate directory messages - messages given to remote users when they</span><br><span class="line"># go into a certain directory.</span><br><span class="line"># 开启目录欢迎消息，一般对命令行登陆有效</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">#</span><br><span class="line"># Activate logging of uploads/downloads.</span><br><span class="line"># 开启上传和下载日志记录功能</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">#</span><br><span class="line">#使用标准模式</span><br><span class="line"># Make sure PORT transfer connections originate from port 20 (ftp-data).</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">#</span><br><span class="line"># If you want, you can arrange for uploaded anonymous files to be owned by</span><br><span class="line"># a different user. Note! Using &quot;root&quot; for uploaded files is not</span><br><span class="line"># recommended!</span><br><span class="line"># 声明匿名用户上传文件的所有者</span><br><span class="line"># 允许更改匿名用户上传文件的所有者</span><br><span class="line">#chown_uploads=YES</span><br><span class="line">#所有者为whoever</span><br><span class="line">#chown_username=whoever</span><br><span class="line">#</span><br><span class="line"># You may override where the log file goes if you like. The default is shown</span><br><span class="line"># below.</span><br><span class="line"># 日志文件路径</span><br><span class="line">#xferlog_file=/var/log/xferlog</span><br><span class="line">#</span><br><span class="line"># If you want, you can have your log file in standard ftpd xferlog format.</span><br><span class="line"># Note that the default log file location is /var/log/xferlog in this case.</span><br><span class="line"># 日志文件采用标准格斯</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">#</span><br><span class="line"># You may change the default value for timing out an idle session.</span><br><span class="line"># 会话超时时间</span><br><span class="line">#idle_session_timeout=600</span><br><span class="line">#</span><br><span class="line"># You may change the default value for timing out a data connection.</span><br><span class="line"># 数据传输超时时间</span><br><span class="line">#data_connection_timeout=120</span><br><span class="line">#</span><br><span class="line"># It is recommended that you define on your system a unique user which the</span><br><span class="line"># ftp server can use as a totally isolated and unprivileged user.</span><br><span class="line"># FTP子进程管理用户</span><br><span class="line">#nopriv_user=ftpsecure</span><br><span class="line">#</span><br><span class="line"># Enable this and the server will recognise asynchronous ABOR requests. Not</span><br><span class="line"># recommended for security (the code is non-trivial). Not enabling it,</span><br><span class="line"># however, may confuse older FTP clients.</span><br><span class="line"># 是否允许客户端发起“async ABOR”请求，该操作是不安全的默认禁止。</span><br><span class="line">#async_abor_enable=YES</span><br><span class="line">#</span><br><span class="line"># By default the server will pretend to allow ASCII mode but in fact ignore</span><br><span class="line"># the request. Turn on the below options to have the server actually do ASCII</span><br><span class="line"># mangling on files when in ASCII mode. The vsftpd.conf(5) man page explains</span><br><span class="line"># the behaviour when these options are disabled.</span><br><span class="line"># Beware that on some FTP servers, ASCII support allows a denial of service</span><br><span class="line"># attack (DoS) via the command &quot;SIZE /big/file&quot; in ASCII mode. vsftpd</span><br><span class="line"># predicted this attack and has always been safe, reporting the size of the</span><br><span class="line"># raw file.</span><br><span class="line"># ASCII mangling is a horrible feature of the protocol.</span><br><span class="line"># 该选项用于指定是否允许上传时以ASCII模式传输数据</span><br><span class="line">#ascii_upload_enable=YES</span><br><span class="line">#该选项用于指定是否允许下载时以ASCII模式传输数据</span><br><span class="line">#ascii_download_enable=YES</span><br><span class="line">#</span><br><span class="line"># You may fully customise the login banner string:</span><br><span class="line"># FTP文本界面登陆欢迎词</span><br><span class="line">#ftpd_banner=Welcome to blah FTP service.</span><br><span class="line">#</span><br><span class="line"># You may specify a file of disallowed anonymous e-mail addresses. Apparently</span><br><span class="line"># useful for combatting certain DoS attacks.</span><br><span class="line"># 是否开启拒绝的Email功能</span><br><span class="line">#deny_email_enable=YES</span><br><span class="line"># (default follows)</span><br><span class="line"># 指定保存被拒接的Email地址的文件</span><br><span class="line">#banned_email_file=/etc/vsftpd/banned_emails</span><br><span class="line">#</span><br><span class="line"># You may specify an explicit list of local users to chroot() to their home</span><br><span class="line"># directory. If chroot_local_user is YES, then this list becomes a list of</span><br><span class="line"># users to NOT chroot().</span><br><span class="line"># (Warning! chroot&#x27;ing can be very dangerous. If using chroot, make sure that</span><br><span class="line"># the user does not have write access to the top level directory within the</span><br><span class="line"># chroot)</span><br><span class="line"># 是否开启对本地用户chroot的限制，YES为默认所有用户都不能切出家目录，NO代表默认用户都可以切出家目录</span><br><span class="line"># 设置方法类似于：YES拒绝所有，允许个别    NO  允许所有拒绝个别</span><br><span class="line">#chroot_local_user=YES</span><br><span class="line">#开启特例列表</span><br><span class="line">#chroot_list_enable=YES</span><br><span class="line"># (default follows)</span><br><span class="line"># 如果chroot_local_user的值是YES则该文件中的用户是可以切出家目录，如果是NO，该文件中的用户则不能切出家目录</span><br><span class="line"># 一行一个用户。</span><br><span class="line">#chroot_list_file=/etc/vsftpd/chroot_list</span><br><span class="line">#</span><br><span class="line"># You may activate the &quot;-R&quot; option to the builtin ls. This is disabled by</span><br><span class="line"># default to avoid remote users being able to cause excessive I/O on large</span><br><span class="line"># sites. However, some broken FTP clients such as &quot;ncftp&quot; and &quot;mirror&quot; assume</span><br><span class="line"># the presence of the &quot;-R&quot; option, so there is a strong case for enabling it.</span><br><span class="line"># 是否开启ls 递归查询功能 ls -R</span><br><span class="line">#ls_recurse_enable=YES</span><br><span class="line">#</span><br><span class="line"># When &quot;listen&quot; directive is enabled, vsftpd runs in standalone mode and</span><br><span class="line"># listens on IPv4 sockets. This directive cannot be used in conjunction</span><br><span class="line"># with the listen_ipv6 directive.</span><br><span class="line"># 是否开启ftp独立模式在IPV4</span><br><span class="line">listen=NO</span><br><span class="line">#</span><br><span class="line"># This directive enables listening on IPv6 sockets. By default, listening</span><br><span class="line"># on the IPv6 &quot;any&quot; address (::) will accept connections from both IPv6</span><br><span class="line"># and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6</span><br><span class="line"># sockets. If you want that (perhaps because you want to listen on specific</span><br><span class="line"># addresses) then you must run two copies of vsftpd with two configuration</span><br><span class="line"># files.</span><br><span class="line"># Make sure, that one of the listen options is commented !!</span><br><span class="line"># 是否开启ftp独立模式在ipv6</span><br><span class="line">listen_ipv6=YES</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#启用pam模块验证</span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">#是否开启userlist功能.</span><br><span class="line"></span><br><span class="line">#是否启用用户列表功能</span><br><span class="line">userlist_enable=YES</span><br></pre></td></tr></table></figure>

<p>通过配置文件的分析，VSFTP不允许匿名访问，本地用户可以下载和上传。如果允许匿名用户登录的话需要将anonymous_enable&#x3D;YES，然后重新启动服务</p>
<p>我们可以通过修改配置文件的内容即可配置FTP的相关登陆情况。</p>
<h2 id="七、FTP客户端访问"><a href="#七、FTP客户端访问" class="headerlink" title="七、FTP客户端访问"></a>七、FTP客户端访问</h2><p>FTP是一个C&#x2F;S类型的软件,连接服务端需要FTP客户端才能完成，常见的FTP客户端有以下几种:</p>
<p>浏览器：可以通过浏览器中输入 <a href="ftp://ip或者ftp//%E5%9F%9F%E5%90%8D%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9D%A5%E8%AE%BF%E9%97%AEFTP">ftp://ip或者ftp://域名的方式来访问FTP</a></p>
<p>自带客户端:命令行下可以使用ftp命令去连接</p>
<p>三方客户端：FileZilla 8uftp 图形软件或者文本界面的lftp等</p>
<p>三种方式中，文本界面是比较麻烦的，无法鼠标流。所以我重点给大家讲解一下</p>
<h3 id="7-1）文本界面登陆"><a href="#7-1）文本界面登陆" class="headerlink" title="7.1）文本界面登陆"></a>7.1）文本界面登陆</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">文本界面匿名登陆</span><br><span class="line">[root@localhost ~]# ftp 192.168.11.16</span><br><span class="line">Connected to 192.168.11.16 (192.168.11.16).</span><br><span class="line">220 (vsFTPd 3.0.3)</span><br><span class="line">Name (192.168.11.16:root): ftp	#用户名可以是ftp也可以是anonymous</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password:							#密码为空</span><br><span class="line">230 Login successful. #显示登陆成功</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">227 Entering Passive Mode (192,168,11,16,90,35).</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">drwxr-xr-x    2 0        0               6 May 14  2019 pub</span><br><span class="line">226 Directory send OK.</span><br><span class="line">通过ls可以列出当前目录下有哪些内容 看到有一个目录叫pub</span><br><span class="line">ftp&gt; pwd</span><br><span class="line">257 &quot;/&quot;   </span><br><span class="line">通过pwd命令查看当前路径  注意这里显示的是FTP的根目录</span><br><span class="line"></span><br><span class="line">ftp&gt; bye</span><br><span class="line">221 Goodbye.</span><br><span class="line">退出使用bye命令</span><br><span class="line"></span><br><span class="line">文本界面本地用户登录</span><br><span class="line">[root@localhost ~]# ftp 192.168.11.16</span><br><span class="line">Connected to 192.168.11.16 (192.168.11.16).</span><br><span class="line">220 (vsFTPd 3.0.3)</span><br><span class="line">Name (192.168.11.16:root): hello</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password:</span><br><span class="line">230 Login successful.</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">227 Entering Passive Mode (192,168,11,16,130,240).</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">drwxr-xr-x    2 1001     1001            6 Jan 15 08:56 下载</span><br><span class="line">drwxr-xr-x    2 1001     1001            6 Jan 15 08:56 公共</span><br><span class="line">drwxr-xr-x    2 1001     1001            6 Jan 15 08:56 图片</span><br><span class="line">drwxr-xr-x    2 1001     1001            6 Jan 15 08:56 文档</span><br><span class="line">drwxr-xr-x    2 1001     1001            6 Jan 15 08:56 桌面</span><br><span class="line">drwxr-xr-x    2 1001     1001            6 Jan 15 08:56 模板</span><br><span class="line">drwxr-xr-x    2 1001     1001            6 Jan 15 08:56 视频</span><br><span class="line">drwxr-xr-x    2 1001     1001            6 Jan 15 08:56 音乐</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; pwd</span><br><span class="line">257 &quot;/home/hello&quot; is the current directory</span><br></pre></td></tr></table></figure>

<h3 id="7-2）FTP客户端常用命令"><a href="#7-2）FTP客户端常用命令" class="headerlink" title="7.2）FTP客户端常用命令"></a>7.2）FTP客户端常用命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">键入help命令可以查看所有可使用的命令</span><br><span class="line">ftp&gt; help</span><br><span class="line">Commands may be abbreviated.  Commands are:</span><br><span class="line"></span><br><span class="line">!                debug         mdir           sendport     site</span><br><span class="line">$                dir           mget           put          size</span><br><span class="line">account          disconnect    mkdir          pwd          status</span><br><span class="line">append           exit          mls            quit         struct</span><br><span class="line">ascii            form          mode           quote        system</span><br><span class="line">bell             get           modtime        recv         sunique</span><br><span class="line">binary           glob          mput           reget        tenex</span><br><span class="line">bye              hash          newer          rstatus      tick</span><br><span class="line">case             help          nmap           rhelp        trace</span><br><span class="line">cd               idle          nlist          rename       type</span><br><span class="line">cdup             image         ntrans         reset        user</span><br><span class="line">chmod            lcd           open           restart      umask</span><br><span class="line">close            ls            prompt         rmdir        verbose</span><br><span class="line">cr               macdef        passive        runique        ?</span><br><span class="line">delete           mdelete       proxy          send</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">!+linux命令   执行系统命令</span><br><span class="line">!ls /opt  显示linux系统中/opt目录下的内容</span><br><span class="line">ftp&gt; !ls /opt</span><br><span class="line">dhcp  dns  rh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lcd linux系统中的当前目录</span><br><span class="line">lcd /root  将linux系统中的当前目录切换到/root下</span><br><span class="line">ftp&gt; lcd /root</span><br><span class="line">Local directory now /root</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">put 上传命令，mput批量上传命令</span><br><span class="line">上传initial-setup-ks.cfg文件到hello家目录下</span><br><span class="line">ftp&gt; put initial-setup-ks.cfg </span><br><span class="line">local: initial-setup-ks.cfg remote: initial-setup-ks.cfg</span><br><span class="line">227 Entering Passive Mode (192,168,11,16,96,132).</span><br><span class="line">150 Ok to send data.</span><br><span class="line">226 Transfer complete.</span><br><span class="line">1803 bytes sent in 0.00135 secs (1333.58 Kbytes/sec)</span><br><span class="line">可以看到上传成功了</span><br><span class="line"></span><br><span class="line">验证一下上传结果</span><br><span class="line">ftp&gt; ls</span><br><span class="line">227 Entering Passive Mode (192,168,11,16,173,142).</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">-rw-r--r--    1 1000     1000         1803 Feb 26 07:01 initial-setup-ks.cfg</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 下载</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 公共</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 图片</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 文档</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 桌面</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 模板</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 视频</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 音乐</span><br><span class="line">226 Directory send OK.</span><br><span class="line">看见了吧</span><br><span class="line"></span><br><span class="line">切换linux当前目录到/tmp</span><br><span class="line">ftp&gt; lcd /tmp</span><br><span class="line">Local directory now /tmp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">get下载命令，mget批量下载</span><br><span class="line">下载initial-setup-ks.cfg到linux系统当前目录/tmp</span><br><span class="line">ftp&gt; get initial-setup-ks.cfg</span><br><span class="line">local: initial-setup-ks.cfg remote: initial-setup-ks.cfg</span><br><span class="line">227 Entering Passive Mode (192,168,11,16,229,134).</span><br><span class="line">150 Opening BINARY mode data connection for initial-setup-ks.cfg (1803 bytes).</span><br><span class="line">226 Transfer complete.</span><br><span class="line">1803 bytes received in 2.9e-05 secs (62172.41 Kbytes/sec)</span><br><span class="line"></span><br><span class="line">列出linux目录/tmp的内容，看到了下载的文件initial-setup-ks.cfg</span><br><span class="line">ftp&gt; !ls /tmp/</span><br><span class="line">dhcp                                          tracker-extract-files.0</span><br><span class="line">initial-setup-ks.cfg                                  VMwareDnD</span><br><span class="line">systemd-private-8e7a99ea89c14ab396d66116970fe04d-chronyd.service-sghHHs       vmware-root</span><br><span class="line">systemd-private-8e7a99ea89c14ab396d66116970fe04d-colord.service-wK7h08      yum_save_tx.2019-02-20.16-10.Z6uXqR.yumtx</span><br><span class="line">systemd-private-8e7a99ea89c14ab396d66116970fe04d-cups.service-cokBro          yum_save_tx.2019-02-21.09-03.08zIbU.yumtx</span><br><span class="line">systemd-private-8e7a99ea89c14ab396d66116970fe04d-rtkit-daemon.service-6wt1S0  yum_save_tx.2019-02-22.11-10.prawAT.yumtx</span><br><span class="line"></span><br><span class="line">ftp&gt; close</span><br><span class="line">221 Goodbye.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">Not connected.</span><br><span class="line">可以使用close断开连接，当连接断开希望再次连接直接使用open命令即可</span><br><span class="line">ftp&gt; open 192.168.11.16</span><br><span class="line">Connected to 192.168.11.16 (192.168.11.16).</span><br><span class="line">220 (vsFTPd 3.0.2)</span><br><span class="line">Name (192.168.11.16:root): hello</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password:</span><br><span class="line">230 Login successful.</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">227 Entering Passive Mode (192,168,11,16,192,88).</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">-rw-r--r--    1 1000     1000         1803 Feb 26 07:01 initial-setup-ks.cfg</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 下载</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 公共</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 图片</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 文档</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 桌面</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 模板</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 视频</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 音乐</span><br><span class="line">226 Directory send OK.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">delete命令可以删除属于自己的文件</span><br><span class="line">删除initial-setup-ks.cfg文件</span><br><span class="line">ftp&gt; delete initial-setup-ks.cfg</span><br><span class="line">250 Delete operation successful.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">227 Entering Passive Mode (192,168,11,16,168,142).</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 下载</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 公共</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 图片</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 文档</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 桌面</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 模板</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 视频</span><br><span class="line">drwxr-xr-x    2 1000     1000            6 Jan 11 01:37 音乐</span><br><span class="line">226 Directory send OK.</span><br></pre></td></tr></table></figure>

<h2 id="八、基于虚拟用户配置安全的ftp"><a href="#八、基于虚拟用户配置安全的ftp" class="headerlink" title="八、基于虚拟用户配置安全的ftp"></a>八、基于虚拟用户配置安全的ftp</h2><p>在ftp中不论是匿名用户还是实名用户都是系统中真实存在的用户，或多或少都会有一些安全方面的风险，为了避免这个风险，开发者在ftp中加入了一个虚拟用户的概念，所有虚拟用户都会被统一映射为一个系统账号，免去了管理过多账户的麻烦，那么这个虚拟用户如何实现呢？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a、修改配置文件 </span><br><span class="line">[root@zutuanxue pam.d]# egrep -v &quot;^#&quot; /etc/vsftpd/vsftpd.conf </span><br><span class="line">anonymous_enable=YES</span><br><span class="line">local_enable=YES</span><br><span class="line">write_enable=YES</span><br><span class="line">local_umask=022</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">chroot_local_user=YES</span><br><span class="line">listen=NO</span><br><span class="line">listen_ipv6=YES</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#虚拟用户配置选项</span><br><span class="line">#pam登陆验证</span><br><span class="line">pam_service_name=vftp</span><br><span class="line">#允许虚拟用户功能</span><br><span class="line">guest_enable=YES</span><br><span class="line">#虚拟用户映射到本地用户hello</span><br><span class="line">guest_username=hello</span><br><span class="line">#这里我通过指令改变了默认设置，允许虚拟用户写</span><br><span class="line">allow_writeable_chroot=YES </span><br><span class="line"></span><br><span class="line">#本地用户的根目录</span><br><span class="line">#这里是定义虚拟用户主目录，用户和组必须指定为宿主用户hello</span><br><span class="line">local_root=/home/hello</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#允许虚拟用户和本地用户权限一致</span><br><span class="line">virtual_use_local_privs=YES</span><br><span class="line"></span><br><span class="line">#如果虚拟用户和本地用户权限不同，可以通过以下的指令来设置指令，配置文件和登陆名同步即可。</span><br><span class="line">#user_config_dir=/etc/vsftpd/vconf.d/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">b、生成虚拟用户账号密码文件</span><br><span class="line">奇数行数账户，偶数行是密码</span><br><span class="line">[root@zutuanxue ~]# cat /etc/vsftpd/vuser</span><br><span class="line">vuser01</span><br><span class="line">123456</span><br><span class="line">vuser02</span><br><span class="line">123456</span><br><span class="line"></span><br><span class="line">使用db_load转成db格式</span><br><span class="line">[root@zutuanxue ~]# db_load -T -t hash -f /etc/vsftpd/vuser /etc/vsftpd/vuser.db</span><br><span class="line">要求权限是600</span><br><span class="line">[root@zutuanxue ~]# chmod 600 /etc/vsftpd/vuser.db</span><br><span class="line"></span><br><span class="line">c、配置pam认证，注意先后顺序</span><br><span class="line">[root@zutuanxue ~]# cat /etc/pam.d/vftp </span><br><span class="line">#虚拟用户登录</span><br><span class="line">auth       sufficient     /lib64/security/pam_userdb.so db=/etc/vsftpd/vuser</span><br><span class="line">account    sufficient     /lib64/security/pam_userdb.so db=/etc/vsftpd/vuser</span><br><span class="line">#本地登陆</span><br><span class="line">session    optional     pam_keyinit.so    force revoke</span><br><span class="line">auth       required    pam_listfile.so item=user sense=deny file=/etc/vsftpd/ftpusers onerr=succeed</span><br><span class="line">auth       required    pam_shells.so</span><br><span class="line">auth       include    password-auth</span><br><span class="line">account    include    password-auth</span><br><span class="line">session    required     pam_loginuid.so</span><br><span class="line">session    include    password-auth</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d、重启服务生效</span><br><span class="line">[root@zutuanxue ~]# systemctl restart vsftpd</span><br><span class="line">[root@zutuanxue ~]# cat /etc/vsftpd/chroot_list </span><br><span class="line">vuser01</span><br><span class="line">vuser02</span><br><span class="line"></span><br><span class="line">e、验证登陆</span><br><span class="line">[root@zutuanxue ~]# ftp 192.168.11.16</span><br><span class="line">Connected to 192.168.11.16 (192.168.11.16).</span><br><span class="line">220 Welcome to ayitula FTP service.</span><br><span class="line">Name (192.168.11.16:root): vuser01</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password:</span><br><span class="line">230 Login successful.</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">227 Entering Passive Mode (192,168,11,16,82,91).</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">226 Transfer done (but failed to open directory).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">登陆成功了.</span><br></pre></td></tr></table></figure>

<h1 id="Linux-时间服务器"><a href="#Linux-时间服务器" class="headerlink" title="Linux 时间服务器"></a>Linux 时间服务器</h1><p> 阅读 (192071) </p>
<p> 分享</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><strong>什么是时间服务器</strong></p>
<p>NTP：Network Time Protocol 网络时间协议，用来同步网络中各主机的时间，在linux系统中早期使用ntp来实现，后来使用chrony来实现，Chrony 应用本身已经有几年了，其是是网络时间协议的 (NTP) 的另一种实现。</p>
<p><strong>Chrony可以同时做为ntp服务的客户端和服务端</strong></p>
<p>一直以来众多发行版里标配的都是ntpd对时服务，自rhel7&#x2F;centos7 起，Chrony做为了发行版里的标配服务，不过老的ntpd服务依旧在rhel7&#x2F;centos7里可以找到 。</p>
<p><strong>核心组件：</strong></p>
<p>chronyd：是守护进程，主要用于调整内核中运行的系统时间和时间服务器同步。它确定计算机增减时间的比率，并对此进行调整补偿。</p>
<p>chronyc：提供一个用户界面，用于监控性能并进行多样化的配置。它可以在chronyd实例控制的计算机上工作，也可以在一台不同的远程计算机上工作。</p>
<p><strong>优势</strong></p>
<p>chrony用来同步时间，来代替ntp服务，优点是很精巧的时间同步工具，更快响应时钟变化，在应对延时提供更好的稳定性能，不会出现时间空白，跨越互联网同步时间只需要几毫秒。</p>
<p>它的优势主要包括</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#更快的同步：能在最大程度的减少时间和频率误差，这对于非全天运行的台式计算机或系统而言非常有用</span><br><span class="line"></span><br><span class="line">#更快的响应速度：能够更好的响应时间频率的快速变化，这对于具备不稳定时钟的虚拟机或导致时钟频率发生变化的节能技术而言更有帮助</span><br><span class="line"></span><br><span class="line">#稳定：在初始同步后，它并不会停止时钟，以防对需要系统时间的程序造成影响，以及可以更好的应对延迟</span><br></pre></td></tr></table></figure>

<p><strong>相关文件说明</strong></p>
<p>&#x2F;etc&#x2F;chrony.conf 主配置文件</p>
<p>&#x2F;usr&#x2F;bin&#x2F;chronyc 客户端程序工具</p>
<p>&#x2F;usr&#x2F;sbin&#x2F;chronyd 服务端程序</p>
<p><strong>配置文件说明</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# vim /etc/chrony.conf</span><br><span class="line"># Use public servers from the pool.ntp.org project.</span><br><span class="line"># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span><br><span class="line">pool 2.centos.pool.ntp.org iburst</span><br><span class="line">###指定时间服务器的地址，可以使用pool开始也可以使用server开始，iburst可以加速初始同步，perfer表示优先</span><br><span class="line"># Record the rate at which the system clock gains/losses time.</span><br><span class="line">driftfile /var/lib/chrony/drift</span><br><span class="line">#用来记录时间差异，由于chrony是通过BIOS判断时间的，他会用这个时间与上层时间服务器进行对比，将差异记录下来</span><br><span class="line"># Allow the system clock to be stepped in the first three updates</span><br><span class="line"># if its offset is larger than 1 second.</span><br><span class="line">makestep 1.0 3</span><br><span class="line">#让chrony可以根据需求逐步进行时间的调整，避免在某些情况下时间差异较大，导致调整时间耗时过长，以上的设置表示在误差时间大于1.0秒的话，前三次使用update更新时间是使用step（分阶段）而不是slew(微调),如果最后一个值是负数的话，如-1则表示随时步进</span><br><span class="line"># Enable kernel synchronization of the real-time clock (RTC).</span><br><span class="line">rtcsync</span><br><span class="line">#启用内核模式，在内核模式中，系统时间每11分钟会同步到实时时钟（RTC）</span><br><span class="line"># Enable hardware timestamping on all interfaces that support it.</span><br><span class="line">#hwtimestamp *</span><br><span class="line"># 通过使用hwtimestamp指令启用硬件时间戳</span><br><span class="line"># Increase the minimum number of selectable sources required to adjust</span><br><span class="line"># the system clock.</span><br><span class="line">#minsources 2</span><br><span class="line"></span><br><span class="line"># Allow NTP client access from local network.</span><br><span class="line">#allow 192.168.0.0/16</span><br><span class="line">#允许同步的网段</span><br><span class="line"># Serve time even if not synchronized to a time source.</span><br><span class="line">#local stratum 10</span><br><span class="line">#即时自己未能通过网络时间服务器同步时间，也允许将本地时间作为标准时间同步给其他客户端</span><br><span class="line"># Specify file containing keys for NTP authentication.</span><br><span class="line">keyfile /etc/chrony.keys</span><br><span class="line">#验证的秘钥文件</span><br><span class="line"># Get TAI-UTC offset and leap seconds from the system tz database.</span><br><span class="line">leapsectz right/UTC</span><br><span class="line">#从system tz数据库中获取TAI(国际原子时)和UTC（协调世界时）之间的时间偏移及闰秒</span><br><span class="line"># Specify directory for log files.</span><br><span class="line">logdir /var/log/chrony</span><br><span class="line">#日志文件的位置</span><br><span class="line"># Select which information is logged.</span><br><span class="line">#log measurements statistics tracking</span><br></pre></td></tr></table></figure>

<h2 id="时间服务器实战"><a href="#时间服务器实战" class="headerlink" title="时间服务器实战"></a>时间服务器实战</h2><p>环境：两台主机，系统为CentOS8，IP地址为192.168.2.100,192.168.2.200,selinux和防火墙关闭</p>
<p>要求: 192.168.2.100为内网时间服务器，192.168.2.200为客户端，200的客户端的时间要与100的时间同步</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在192.168.2.100主机上</span><br><span class="line">step1	检查时间服务器上是否有相关软件包</span><br><span class="line">[root@zutuanxue ~]# rpm -qa | grep chrony</span><br><span class="line">chrony-3.3-3.el8.x86_64</span><br><span class="line"></span><br><span class="line">step2	检查本机的时区</span><br><span class="line">[root@zutuanxue ~]# timedatectl </span><br><span class="line">               Local time: 五 2020-01-17 17:36:14 CST</span><br><span class="line">           Universal time: 五 2020-01-17 09:36:14 UTC</span><br><span class="line">                 RTC time: 五 2020-01-17 09:36:56</span><br><span class="line">                Time zone: Asia/Shanghai (CST, +0800)</span><br><span class="line">System clock synchronized: yes</span><br><span class="line">              NTP service: active</span><br><span class="line">          RTC in local TZ: no</span><br><span class="line">注：如果不是本地时区请设置时区</span><br><span class="line">[root@zutuanxue ~]# timedatectl list-timezones | grep Shanghai</span><br><span class="line">Asia/Shanghai</span><br><span class="line">[root@zutuanxue ~]# timedatectl set-timezone Asia/Shanghai</span><br><span class="line"></span><br><span class="line">step3	修改配置文件</span><br><span class="line">[root@zutuanxue ~]# vim /etc/chrony.conf</span><br><span class="line">server 192.168.2.100 iburst		#定义时间服务器的地址</span><br><span class="line">driftfile /var/lib/chrony/drift	</span><br><span class="line">makestep 1.0 3</span><br><span class="line">rtcsync</span><br><span class="line">allow 192.168.2.0/24	#定义允许谁来同步</span><br><span class="line">local stratum 10	#允许将本地时间作为标准</span><br><span class="line">leapsectz right/UTC	</span><br><span class="line">logdir /var/log/chrony</span><br><span class="line">bindaddress 192.168.2.100	#监听的网络接口</span><br><span class="line"></span><br><span class="line">step4	启动服务&amp;查看端口</span><br><span class="line">[root@zutuanxue ~]# systemctl start chronyd</span><br><span class="line">[root@zutuanxue ~]# lsof -i :123</span><br><span class="line"></span><br><span class="line">在192.168.2.200主机上</span><br><span class="line">step5	检查软件包</span><br><span class="line">[root@slave ~]# rpm -qa | grep chrony</span><br><span class="line">chrony-3.3-3.el8.x86_64</span><br><span class="line"></span><br><span class="line">step6	检查并设置本机时区</span><br><span class="line">[root@slave ~]# timedatectl </span><br><span class="line">               Local time: 五 2020-01-17 04:19:38 EST</span><br><span class="line">           Universal time: 五 2020-01-17 09:19:38 UTC</span><br><span class="line">                 RTC time: 五 2020-01-17 16:04:57</span><br><span class="line">                Time zone: America/New_York (EST, -0500)</span><br><span class="line">System clock synchronized: yes</span><br><span class="line">              NTP service: active</span><br><span class="line">          RTC in local TZ: no</span><br><span class="line">[root@slave ~]# timedatectl list-timezones |grep Shanghai</span><br><span class="line">Asia/Shanghai</span><br><span class="line">[root@slave ~]# timedatectl set-time Asia/Shanghai</span><br><span class="line"></span><br><span class="line">step7	修改配置文件</span><br><span class="line">[root@zutuanxue ~]# vim /etc/chrony.conf</span><br><span class="line">server 192.168.2.100 iburst</span><br><span class="line">driftfile /var/lib/chrony/drift</span><br><span class="line">makestep 1.0 3</span><br><span class="line">rtcsync</span><br><span class="line">keyfile /etc/chrony.keys</span><br><span class="line">leapsectz right/UTC</span><br><span class="line">logdir /var/log/chrony</span><br><span class="line"></span><br><span class="line">step8 启动服务&amp;检查能否连接时间服务器</span><br><span class="line">[root@slave ~]# systemctl start chronyd</span><br><span class="line">[root@slave ~]# chronyc sources -v</span><br><span class="line">210 Number of sources = 1</span><br><span class="line"></span><br><span class="line">  .-- Source mode  &#x27;^&#x27; = server, &#x27;=&#x27; = peer, &#x27;#&#x27; = local clock.</span><br><span class="line"> / .- Source state &#x27;*&#x27; = current synced, &#x27;+&#x27; = combined , &#x27;-&#x27; = not combined,</span><br><span class="line">| /   &#x27;?&#x27; = unreachable, &#x27;x&#x27; = time may be in error, &#x27;~&#x27; = time too variable.</span><br><span class="line">||                                                 .- xxxx [ yyyy ] +/- zzzz</span><br><span class="line">||      Reachability register (octal) -.           |  xxxx = adjusted offset,</span><br><span class="line">||      Log2(Polling interval) --.      |          |  yyyy = measured offset,</span><br><span class="line">||                                \     |          |  zzzz = estimated error.</span><br><span class="line">||                                 |    |           \</span><br><span class="line">MS Name/IP address         Stratum Poll Reach LastRx Last sample               </span><br><span class="line">===============================================================================</span><br><span class="line">^* 192.168.2.100                11   6   377    57    +13ms[ +278us] +/- 3718us</span><br><span class="line"></span><br><span class="line">#可以在2.100上使用date -s命令修改时间，在2.200上重启服务，看到时间同步</span><br><span class="line">chronyc命令</span><br><span class="line"></span><br><span class="line">chronyc sources -v		查看时间同步源</span><br><span class="line">chronyc sourcestats -v	查看时间同步源状态</span><br><span class="line">timedatectl set-local-rtc 1	设置硬件时间硬件时间默认为UTC</span><br><span class="line">timedatectl set-ntp yes	启用NTP时间同步：</span><br><span class="line">chronyc tracking	校准时间服务器：</span><br></pre></td></tr></table></figure>

<h1 id="Linux-双机热备"><a href="#Linux-双机热备" class="headerlink" title="Linux 双机热备"></a>Linux 双机热备</h1><p> 阅读 (255970) </p>
<p> 分享</p>
<h2 id="一-Rsync概述"><a href="#一-Rsync概述" class="headerlink" title="一 Rsync概述"></a>一 Rsync概述</h2><h3 id="1-1、什么是Rsync"><a href="#1-1、什么是Rsync" class="headerlink" title="1.1、什么是Rsync"></a>1.1、什么是Rsync</h3><p>rsync是一款开源，快速，多功能的可实现增量的本地或远程的数据镜像同步备份的优秀工具。适用于多个平台。从软件名称可以看出来是远程同步的意思（remote sync）可实现全量备份与增量备份，因此非常适合用于架构集中式备份或异地备份等应用。</p>
<p><strong>官网：</strong> <a href="http://rsync.samba.org/">http://rsync.samba.org/</a></p>
<p><strong>端口：</strong> 873</p>
<p><strong>运行模式：</strong> C&#x2F;S B&#x2F;S</p>
<h3 id="1-2、rsync特性"><a href="#1-2、rsync特性" class="headerlink" title="1.2、rsync特性"></a>1.2、rsync特性</h3><p>1、支持拷贝特殊文件如链接文件、设备等</p>
<p>2、可以有排除指定文件或目录同步的功能，相当于tar的排除功能</p>
<p>3、可以做到保持原文件或目录的权限、时间、软硬链接、属主、组等所有属性均不改变</p>
<p>4、可以实现增量同步，即只同步发生变化的数据，因此数据传输效率很高</p>
<p>5、可以使用rcp，rsh，ssh等方式来配合传输文件（rsync本身不对数据加密）</p>
<p>6、可以通过socket（进程方式）传输文件和数据（服务端和客户端）。</p>
<p>7、支持匿名的或认证（无须系统用户）的进程模式传输，可实现方便安全的进行数据备份及镜像</p>
<h3 id="1-3、传输方式"><a href="#1-3、传输方式" class="headerlink" title="1.3、传输方式"></a>1.3、传输方式</h3><p><strong>拉复制(下载)：</strong> rsync备份服务器定期去所有主机上拉取数据</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603525992068.png" alt="image20200116202338681.png"></p>
<p><strong>推复制（上传）：</strong> 所有主服务器将本地数据推送至从服务器</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603526014361.png" alt="image20200116202157436.png"></p>
<p>在日常使用中，这两种形式都是混合使用的如：</p>
<p><strong>大量数据备份</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603526031950.png" alt="image20200116202528449.png"></p>
<p><strong>异地备份</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603526050140.png" alt="image20200116202556118.png"></p>
<h2 id="二-rsync拉复制实战"><a href="#二-rsync拉复制实战" class="headerlink" title="二 rsync拉复制实战"></a>二 rsync拉复制实战</h2><p><strong>环境：</strong></p>
<ul>
<li>两台主机，IP地址为192.168.11.16，192.168.11.100</li>
<li>操作系统为CentOS8</li>
<li>关闭selinux和防火墙</li>
</ul>
<p><strong>需求：</strong> 希望192.168.11.100这台主机&#x2F;cache目录的数据与192.168.11.16这台主机&#x2F;cache目录中的数据保持一致</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">step1	在192.168.11.16这台主机上制作rsync服务</span><br><span class="line">[root@zutuanxue ~]# rpm -qa | grep rsync</span><br><span class="line">rsync-3.1.3-4.el8.x86_64</span><br><span class="line">#检查是或否安装的相关软件包</span><br><span class="line">[root@zutuanxue ~]# mkdir /etc/rsyncd</span><br><span class="line">[root@zutuanxue ~]# vim rsyncd.conf</span><br><span class="line">uid=root			#定义以哪个用户的身份启动进程	</span><br><span class="line">gid=root			#定义以哪个组的身份启动进程</span><br><span class="line">port=873			#此服务默认端口873</span><br><span class="line">max connections=0		#最大连接数（正整数），0代表不限制。</span><br><span class="line">log file=/var/log/rsyncd.log	#定义日志文件位置</span><br><span class="line">pid file=/var/run/rsyncd.pid	#定义pid文件位置</span><br><span class="line">lock file=/var/run/rsyncd.lock	#定义锁定文件位置，避免多开</span><br><span class="line">motd file=/etc/rsyncd/rsyncd.motd	#定义欢迎信息</span><br><span class="line">read only=yes		#权限为只读</span><br><span class="line">hosts allow=192.168.11.0/24		#允许的网段</span><br><span class="line">hosts deny=*						#拒绝所有，允许个别</span><br><span class="line">[www]	#定义共享名称为www</span><br><span class="line">path=/cache				#路径</span><br><span class="line">list=yes					#允许别人看到</span><br><span class="line">ignore errors			#忽略错误</span><br><span class="line">auth users=hello		#授权的账号</span><br><span class="line">secrets file=/etc/rsyncd/rsyncd.secrets	#密码文件</span><br><span class="line"></span><br><span class="line">setp2	建立欢迎信息文件，内容随意</span><br><span class="line">[root@zutuanxue ~]# vim /etc/rsyncd/rsyncd.motd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">step3	建立密码文件</span><br><span class="line">[root@zutuanxue ~]# vim /etc/rsyncd/rsyncd.secrets</span><br><span class="line">hello：123456</span><br><span class="line">[root@zutuanxue ~]# chmod 600 rsyncd.secrets</span><br><span class="line"></span><br><span class="line">step4	建立cache目录和文件</span><br><span class="line">[root@zutuanxue ~]# mkdir /cache</span><br><span class="line">[root@zutuanxue ~]# touch /cache/file&#123;1..10&#125;</span><br><span class="line"></span><br><span class="line">step5启动服务</span><br><span class="line">[root@zutuanxue ~]# rsync	--daemon		--config=/etc/rsyncd/rsyncd.conf</span><br><span class="line">[root@zutuanxue ~]# lsof	-i	:873</span><br><span class="line"></span><br><span class="line">step6	在192.168.11.100上建立密码文件并修改权限</span><br><span class="line">[root@slave ~]# vim /etc/rsync.pw</span><br><span class="line">123456</span><br><span class="line">[root@slave ~]# chmod 600 /etc/rsync.pw</span><br><span class="line">[root@slave ~]#	mkdir /cache</span><br><span class="line">step7	同步测试</span><br><span class="line">[root@slave ~]#	rsync -avzP	--delete --password-file=/etc/rsync.pw hello@192.168.11.16::www /cache </span><br><span class="line"></span><br><span class="line">rsync参数</span><br><span class="line">-a	归档模式传输，相当于-rlptgoD一起使用</span><br><span class="line">-v	详细模式输出</span><br><span class="line">-z	传输时进行压缩以提高效率</span><br><span class="line">-r	递归传输目录及子目录，即目录下得所有目录都同样传输</span><br><span class="line">-t	保持文件时间信息</span><br><span class="line">-o	保持文件属主信息</span><br><span class="line">-p	保持文件权限</span><br><span class="line">-g	保持文件属组信息</span><br><span class="line">-l 	保留软连接</span><br><span class="line">-P	显示同步的过程及传输时的进度等信息</span><br><span class="line">-D	保持设备文件信息</span><br><span class="line">-L	保留软连接指向的目标文件</span><br><span class="line">--exclude=PATTERN	指定排除不需要传输的文件模式</span><br><span class="line">--bwlimit=1m	限速传输</span><br><span class="line">--delete	让目标目录和源目录数据保持一致</span><br><span class="line">--password-file	指定密码文件位置</span><br><span class="line"></span><br><span class="line">step8	定义计划任务</span><br><span class="line">[root@slave ~]#	crontab -e</span><br><span class="line">* * * * * rsync -avzP	--delete --password-file=/etc/rsync.pw hello@192.168.11.16::www /cache</span><br><span class="line"></span><br><span class="line">step9	将11.16主机上文件进行调整，观察是否改变</span><br></pre></td></tr></table></figure>

<h2 id="三-Rsync推复制"><a href="#三-Rsync推复制" class="headerlink" title="三 Rsync推复制"></a>三 Rsync推复制</h2><p><strong>环境：</strong></p>
<ul>
<li>两台主机，IP地址为192.168.11.16，192.168.11.100</li>
<li>操作系统为CentOS8</li>
<li>关闭selinux和防火墙</li>
</ul>
<p><strong>需求：</strong> 希望192.168.11.100这台主机&#x2F;cache目录的数据与192.168.11.16这台主机&#x2F;cache目录中的数据保持一致</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">注：停止192.168.11.16主机上的rsync服务</span><br><span class="line">step1	在192.168.11.100这台主机上制作rsync服务</span><br><span class="line">[root@slave ~]# rpm -qa | grep rsync</span><br><span class="line">rsync-3.1.3-4.el8.x86_64</span><br><span class="line">#检查是或否安装的相关软件包</span><br><span class="line">[root@slave ~]# mkdir /etc/rsyncd</span><br><span class="line">[root@slave ~]# vim rsyncd.conf</span><br><span class="line">uid=root			#定义以哪个用户的身份启动进程	</span><br><span class="line">gid=root			#定义以哪个组的身份启动进程</span><br><span class="line">port=873			#此服务默认端口873</span><br><span class="line">max connections=0		#最大连接数（正整数），0代表不限制。</span><br><span class="line">log file=/var/log/rsyncd.log	#定义日志文件位置</span><br><span class="line">pid file=/var/run/rsyncd.pid	#定义pid文件位置</span><br><span class="line">lock file=/var/run/rsyncd.lock	#定义锁定文件位置，避免多开</span><br><span class="line">motd file=/etc/rsyncd/rsyncd.motd	#定义欢迎信息</span><br><span class="line">read only=no		#权限为不只读（可写）</span><br><span class="line">hosts allow=192.168.11.0/24		#允许的网段</span><br><span class="line">hosts deny=*						#拒绝所有，允许个别</span><br><span class="line">[www]	#定义共享名称为www</span><br><span class="line">path=/cache				#路径</span><br><span class="line">list=yes					#允许别人看到</span><br><span class="line">ignore errors			#忽略错误</span><br><span class="line">auth users=hello		#授权的账号</span><br><span class="line">secrets file=/etc/rsyncd/rsyncd.secrets	#密码文件</span><br><span class="line"></span><br><span class="line">setp2	建立欢迎信息文件，内容随意</span><br><span class="line">[root@slave ~]# vim /etc/rsyncd/rsyncd.motd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">step3	建立密码文件</span><br><span class="line">[root@slave ~]# vim /etc/rsyncd/rsyncd.secrets</span><br><span class="line">hello：123456</span><br><span class="line">[root@slave ~]# chmod 600 rsyncd.secrets</span><br><span class="line"></span><br><span class="line">step4	建立cache目录</span><br><span class="line">[root@slave ~]# mkdir /cache</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">step5启动服务</span><br><span class="line">[root@slave ~]# rsync	--daemon		--config=/etc/rsyncd/rsyncd.conf</span><br><span class="line">[root@slave ~]# lsof	-i	:873</span><br><span class="line"></span><br><span class="line">step6	在192.168.11.16上安装监控软件</span><br><span class="line">[root@zutuanxue ~]# tar fx sersync2.5_32bit_binary_stable_final.tar.gz -C /usr/src/</span><br><span class="line">[root@zutuanxue ~]# cd /usr/src/GNU-Linux-x86/</span><br><span class="line"></span><br><span class="line">step7	配置监控软件</span><br><span class="line">[root@zutuanxue ~]# vim confxml.xml </span><br><span class="line">&lt;sersync&gt;</span><br><span class="line">        &lt;localpath watch=&quot;/cache&quot;&gt;</span><br><span class="line">            &lt;remote ip=&quot;192.168.11.100&quot; name=&quot;www&quot;/&gt;</span><br><span class="line">						.</span><br><span class="line">						.</span><br><span class="line">						.</span><br><span class="line">					&lt;rsync&gt;</span><br><span class="line">            &lt;commonParams params=&quot;-artuz&quot;/&gt;</span><br><span class="line">            &lt;auth start=&quot;true&quot; users=&quot;hello&quot; passwordfile=&quot;/etc/rsync.pw&quot;/&gt;</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# vim /etc/rsync.pw</span><br><span class="line">123456</span><br><span class="line">[root@zutuanxue ~]# chmod 600 rsync.pw </span><br><span class="line"></span><br><span class="line">step8	启动监控软件</span><br><span class="line">[root@zutuanxue ~]# ./sersync2	-r	#第一次启动加-r 可以查看到工作流程</span><br><span class="line"></span><br><span class="line">step9	重新打开一个终端，在192.168.11.16上建立、删除文件，去192.168.11.100上查看是否同步成功</span><br></pre></td></tr></table></figure>

<h1 id="部署linux网络安装服务器"><a href="#部署linux网络安装服务器" class="headerlink" title="部署linux网络安装服务器"></a>部署linux网络安装服务器</h1><p> 阅读 (3171521) </p>
<p> 分享</p>
<h2 id="一、批量部署概述"><a href="#一、批量部署概述" class="headerlink" title="一、批量部署概述"></a>一、批量部署概述</h2><p><strong>什么是PXE</strong><br>预启动执行环境（PXE）是由Intel公司开发的最新技术，工作于Client&#x2F;Server的网络模式，支持工作站通过网络从远端服务器下载映像，并由此支持通过网络启动操作系统，在启动过程中，终端要求服务器分配IP地址，再用TFTP（trivial file transfer protocol）或MTFTP(multicast trivial file transfer protocol)协议下载一个启动软件包到本机内存中执行，由这个启动软件包完成终端（客户端）基本软件设置，从而引导预先安装在服务器中的终端操作系统。PXE可以引导多种操作系统，如：Windows95&#x2F;98&#x2F;2000&#x2F;windows2003&#x2F;windows2008&#x2F;winXP&#x2F;win7&#x2F;win8,linux系列系统等。</p>
<p><strong>PXE原理</strong><br>PXE是在没有软驱、硬盘、CD-ROM的情况下引导计算机的一种方式，也就是BIOS将使用PXE协议从网络引导。整个安装的过程是这样的：</p>
<p>PXE网卡启动 &#x3D;&gt; DHCP获得IP地址 &#x3D;&gt; 从TFTP上下载 pxelinux.0、vmlinuz、initr.img 等 &#x3D;&gt; 引导系统进入安装步骤 &#x3D;&gt; 通过PEX linux 下载ks.cfg文件并跟据ks.cfg自动化安装系统 &#x3D;&gt; 完成。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603526488594.png" alt="image20200403143123698.png"></p>
<p><strong>TFTP服务</strong><br>TFTP是用来下载远程文件的最简单网络协议，它其于UDP协议而实现。</p>
<p><strong>什么是kickstart</strong><br>KickStart是一种无人职守安装方式。KickStart的工作原理是通过记录典型的安装过程中所需人工干预填写的各种参数，并生成一个名为ks.cfg的文件；在其后的安装过程中（不只局限于生成KickStart安装文件的机器）当出现要求填写参数的情况时，安装程序会首先去查找KickStart生成的文件，当找到合适的参数时，就采用找到的参数，当没有找到合适的参数时，才需要安装者手工干预。这样，如果KickStart文件涵盖了安装过程中出现的所有需要填写的参数时，安装者完全可以只告诉安装程序从何处取ks.cfg文件，然后去忙自己的事情。等安装完毕，安装程序会根据ks.cfg中设置的重启选项来重启系统，并结束安装。</p>
<h2 id="二、批量部署原理"><a href="#二、批量部署原理" class="headerlink" title="二、批量部署原理"></a>二、批量部署原理</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603526515184.png" alt="image20200403144115628.png"></p>
<p><strong>1、PXE Client向DHCP发送请求：</strong><br>　　PXE Client从自己的PXE网卡启动，通过PXE BootROM(自启动芯片)会以UDP(简单用户数据报协议)发送一个广播请求，向本网络中的DHCP服务器索取IP。</p>
<p><strong>2、DHCP服务器提供信息：</strong><br>　　DHCP服务器收到客户端的请求，验证是否来至合法的PXE Client的请求，验证通过它将给客户端一个“提供”响应，这个“提供”响应中包含了为客户端分配的IP地址、pxelinux启动程序(TFTP)位置，以及配置文件所在位置。</p>
<p><strong>3、PXE客户端请求下载启动文件：</strong><br>　　客户端收到服务器的“回应”后，会回应一个帧，以请求传送启动所需文件。这些启动文件包括：pxelinux.0、pxelinux.cfg&#x2F;default、vmlinuz、initrd.img等文件。</p>
<p><strong>4、Boot Server响应客户端请求并传送文件：</strong><br>　　当服务器收到客户端的请求后，他们之间之后将有更多的信息在客户端与服务器之间作应答, 用以决定启动参数。BootROM由TFTP通讯协议从Boot Server下载启动安装程序所必须的文件(pxelinux.0、pxelinux.cfg&#x2F;default)。default文件下载完成后，会根据该文件中定义的引导顺序，启动Linux安装程序的引导内核。</p>
<p><strong>5、请求下载自动应答文件：</strong><br>　　客户端通过pxelinux.cfg&#x2F;default文件成功的引导Linux安装内核后，安装程序首先必须确定你通过什么安装介质来安装linux，如果是通过网络安装(NFS, FTP, HTTP)，则会在这个时候初始化网络，并定位安装源位置。接着会读取default文件中指定的自动应答文件ks.cfg所在位置，根据该位置请求下载该文件。<br>　　这里有个问题，在第2步和第5步初始化2次网络了，这是由于PXE获取的是安装用的内核以及安装程序等，而安装程序要获取的是安装系统所需的二进制包以及配置文件。因此PXE模块和安装程序是相对独立的，PXE的网络配置并不能传递给安装程序，从而进行两次获取IP地址过程，但IP地址在DHCP的租期内是一样的。</p>
<p><strong>6、客户端安装操作系统：</strong><br>　　将ks.cfg文件下载回来后，通过该文件找到OS Server，并按照该文件的配置请求下载安装过程需要的软件包。<br>　　OS Server和客户端建立连接后，将开始传输软件包，客户端将开始安装操作系统。安装完成后，将提示重新引导计算机。</p>
<h2 id="三、kickstart批量部署实战"><a href="#三、kickstart批量部署实战" class="headerlink" title="三、kickstart批量部署实战"></a>三、kickstart批量部署实战</h2><p>环境：</p>
<ul>
<li>selinux关闭，防火墙关闭</li>
<li>Server：192.168.2.100</li>
</ul>
<p><strong>Step 1 配置dnf源</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat server.repo </span><br><span class="line">[serverApp]</span><br><span class="line">name=app</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">baseurl=file:///mnt/AppStream</span><br><span class="line">[serverOS]</span><br><span class="line">name=os</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">baseurl=file:///mnt/BaseOS</span><br></pre></td></tr></table></figure>

<p><strong>Step 2 安装软件包</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# dnf install dhcp-server tftp-server httpd syslinux -y</span><br></pre></td></tr></table></figure>

<p><strong>Step 3 搭建并启动DHCP</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# vim /etc/dhcp/dhcpd.conf </span><br><span class="line">subnet 192.168.2.0 netmask 255.255.255.0 &#123;</span><br><span class="line">        option routers          192.168.2.100;</span><br><span class="line">        range                   192.168.2.10    192.168.2.20;</span><br><span class="line">        next-server             192.168.2.100;</span><br><span class="line">        filename                &quot;pxelinux.0&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl start dhcpd</span><br><span class="line">[root@zutuanxue ~]# systemctl status dhcpd</span><br><span class="line">[root@zutuanxue ~]# netstat -antlup | grep :67</span><br><span class="line">udp        0      0 0.0.0.0:67              0.0.0.0:*                           31465/dhcpd         </span><br><span class="line">udp        0      0 0.0.0.0:67              0.0.0.0:*                           1345/dnsmasq        </span><br></pre></td></tr></table></figure>

<p><strong>Step 4 生成需要的文件并启动tftp服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cp /usr/share/syslinux/pxelinux.0		/var/lib/tftpboot/</span><br><span class="line">[root@zutuanxue ~]# cp /mnt/isolinux/&#123;vmlinuz,ldlinux.c32,initrd.img&#125; 		/var/lib/tftpboot/</span><br><span class="line">[root@zutuanxue ~]# mkdir /var/lib/tftpboot/pxelinux.cfg</span><br><span class="line">[root@zutuanxue ~]# vim /var/lib/tftpboot/pxelinux.cfg/default			#生成default文件</span><br><span class="line">default linux</span><br><span class="line">timeout 3</span><br><span class="line">label linux</span><br><span class="line">  kernel vmlinuz</span><br><span class="line">  append initrd=initrd.img ip=dhcp method=http://192.168.2.100/RHEL ks=http://192.168.2.100/ks.cfg</span><br><span class="line">[root@zutuanxue mnt]# systemctl start tftp			#启动tftp服务</span><br><span class="line">[root@zutuanxue mnt]# systemctl status tftp</span><br><span class="line">[root@zutuanxue mnt]# netstat -antulp | grep :69</span><br><span class="line">udp6       0      0 :::69                   :::*                                1/systemd           </span><br></pre></td></tr></table></figure>

<p><strong>Step 5 搭建并启动http服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# mkdir /var/www/html/RHEL		#建立软件包存放目录</span><br><span class="line">[root@zutuanxue ~]# mount /dev/cdrom /var/www/html/RHEL		#将光盘挂载到对应目录中</span><br></pre></td></tr></table></figure>

<p><strong>Step 6 生成ks.cfg文件</strong></p>
<p>由于CentOS8.0中没有system-config-kickstart包，所以无法通过工具生成ks文件，需要手动生成，例子中root用户和新建的hello用户的密码都为‘&#96;123qwe’</p>
<p>如果需要自己额外指定密码，请使用其它工具进行转换，例如doveadm命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp /root/anaconda-ks.cfg /var/www/html/ks.cfg	#生成ks.cfg文件</span><br><span class="line">[root@zutuanxue ~]# vim /var/www/html/ks.cfg</span><br><span class="line">#version=RHEL8</span><br><span class="line">ignoredisk --only-use=sda</span><br><span class="line">autopart --type=lvm</span><br><span class="line"># Partition clearing information</span><br><span class="line">clearpart --all			#删除所有分区</span><br><span class="line"># Use graphical install</span><br><span class="line">graphical</span><br><span class="line">url  --url=&quot;http://192.168.2.100/RHEL/&quot;			#指定安装URL</span><br><span class="line"># Keyboard layouts</span><br><span class="line">keyboard --vckeymap=cn --xlayouts=&#x27;cn&#x27;</span><br><span class="line"># System language</span><br><span class="line">lang zh_CN.UTF-8</span><br><span class="line"># Network information</span><br><span class="line">network  --bootproto=dhcp --device=ens33 --ipv6=auto --activate</span><br><span class="line">network  --hostname=localhost.localdomain</span><br><span class="line">##root用户的密码&quot;111111&quot;</span><br><span class="line">rootpw --iscrypted $6$kdHt1qIdgNPlHUD1$zibMjh/AQGZQjIJe8Q4HYiin.IKaV7MHWciueiwbLD/03giuSqzU5ynSu/giDAjMLpJFj/CpNgT7TKSm5XyxV1</span><br><span class="line"># X Window System configuration information</span><br><span class="line">xconfig  --startxonboot</span><br><span class="line"># Run the Setup Agent on first boot</span><br><span class="line">#firstboot disable		#初次启动设置</span><br><span class="line">firstboot --disable</span><br><span class="line"># System services</span><br><span class="line">services --enabled=&quot;chronyd&quot;</span><br><span class="line"># System timezone</span><br><span class="line">timezone America/New_York --isUtc</span><br><span class="line">#Reboot after installation	#安装完成后自动重启</span><br><span class="line">reboot</span><br><span class="line"># License agreement		#同意授权协议</span><br><span class="line">eula --agreed</span><br><span class="line">#添加一个普通用户名字为zutuanxue密码&quot;111111&quot; 属组为 whell</span><br><span class="line">user --groups=wheel --name=zutuanxue --password=$6$kdHt1qIdgNPlHUD1$zibMjh/AQGZQjIJe8Q4HYiin.IKaV7MHWciueiwbLD/03giuSqzU5ynSu/giDAjMLpJFj/CpNgT7TKSm5XyxV1 --iscrypted --gecos=&quot;zutuanxue&quot;</span><br><span class="line">%packages</span><br><span class="line">@^graphical-server-environment</span><br><span class="line">%end</span><br><span class="line"></span><br><span class="line">%addon com_redhat_kdump --disable --reserve-mb=&#x27;auto&#x27;</span><br><span class="line"></span><br><span class="line">%end</span><br><span class="line"></span><br><span class="line">%anaconda</span><br><span class="line">pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class="line">pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok</span><br><span class="line">pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class="line">%end</span><br></pre></td></tr></table></figure>

<p><strong>Step 7 修改文件权限，启动http服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# chmod a+r /var/www/html/ks.cfg</span><br><span class="line">[root@zutuanxue ~]# systemctl start httpd</span><br><span class="line">[root@zutuanxue ~]# systemctl start httpd</span><br><span class="line">[root@zutuanxue ~]# systemctl status httpd</span><br><span class="line">[root@zutuanxue ~]# netstat -antlp | grep :80</span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      33976/httpd         </span><br></pre></td></tr></table></figure>

<p><strong>Step 8 测试</strong></p>
<p>选择网络启动</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603526811897.png" alt="image20191202110450898.png"></p>
<p>获取IP和相关文件</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603526828444.png" alt="image20191202110525859.png"></p>
<p>开启安装进程</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603526884300.png" alt="install6.png"></p>
<p>安装完成后自动重启</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603526915193.png" alt="install7.png"></p>
<h2 id="四、kickstart-uefi批量部署"><a href="#四、kickstart-uefi批量部署" class="headerlink" title="四、kickstart+uefi批量部署"></a>四、kickstart+uefi批量部署</h2><p><strong>环境：</strong></p>
<ul>
<li>selinux关闭，防火墙关闭</li>
<li>Server：192.168.2.100</li>
</ul>
<p><strong>Step 1 配置dnf源</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat server.repo </span><br><span class="line">[serverApp]</span><br><span class="line">name=app</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">baseurl=file:///mnt/AppStream</span><br><span class="line">[serverOS]</span><br><span class="line">name=os</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">baseurl=file:///mnt/BaseOS</span><br></pre></td></tr></table></figure>

<p><strong>Step 2 安装软件包</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# dnf install dhcp-server tftp-server httpd -y</span><br></pre></td></tr></table></figure>

<p><strong>Step 3 搭建并启动DHCP</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# vim /etc/dhcp/dhcpd.conf </span><br><span class="line">subnet 192.168.2.0 netmask 255.255.255.0 &#123;</span><br><span class="line">        option routers          192.168.2.100;</span><br><span class="line">        range                   192.168.2.10    192.168.2.20;</span><br><span class="line">        next-server             192.168.2.100;</span><br><span class="line">        filename                &quot;BOOTX64.EFI&quot;;#注意差异，使用的不是pxelinux.0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl start dhcpd</span><br><span class="line">[root@zutuanxue ~]# systemctl status dhcpd</span><br><span class="line">[root@zutuanxue ~]# netstat -antlup | grep :67</span><br><span class="line">udp        0      0 0.0.0.0:67              0.0.0.0:*                           31465/dhcpd         </span><br><span class="line">udp        0      0 0.0.0.0:67              0.0.0.0:*                           1345/dnsmasq        </span><br></pre></td></tr></table></figure>

<p><strong>Step 4 生成需要的文件并启动tftp服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cd /mnt/EFI/BOOT/</span><br><span class="line">[root@zutuanxue BOOT]# cp BOOTX64.EFI grub.cfg grubx64.efi /var/lib/tftpboot/</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# cp /mnt/isolinux/&#123;vmlinuz,initrd.img&#125; 		/var/lib/tftpboot/</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# vim /var/lib/tftpboot/grub.cfg</span><br><span class="line">set default=&quot;0&quot;</span><br><span class="line">set timeout=3</span><br><span class="line">menuentry &#x27;Install CentOS Linux 8.0.1905&#x27;  &#123;</span><br><span class="line">        linuxefi /vmlinuz ip=dhcp ks=http://192.168.2.100/ks.cfg</span><br><span class="line">        initrdefi /initrd.img</span><br><span class="line">&#125;</span><br><span class="line">[root@zutuanxue mnt]# systemctl start tftp			#启动tftp服务</span><br><span class="line">[root@zutuanxue mnt]# systemctl status tftp</span><br><span class="line">[root@zutuanxue mnt]# netstat -antulp | grep :69</span><br><span class="line">udp6       0      0 :::69                   :::*                                1/systemd           </span><br></pre></td></tr></table></figure>

<p><strong>Step 5 搭建并启动http服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# mkdir /var/www/html/RHEL		#建立软件包存放目录</span><br><span class="line">[root@zutuanxue ~]# mount /dev/cdrom /var/www/html/RHEL		#将光盘挂载到对应目录中</span><br></pre></td></tr></table></figure>

<p><strong>Step 6 生成ks.cfg文件</strong></p>
<p>由于CentOS8.0中没有system-config-kickstart包，所以无法通过工具生成ks文件，需要手动生成，例子中root用户和新建的hello用户的密码都为‘&#96;123qwe’</p>
<p><a href="https://access.redhat.com/labs/kickstartconfig/">https://access.redhat.com/labs/kickstartconfig/</a></p>
<p>如果需要自己额外指定密码，请使用其它工具进行转换，例如doveadm命令，但是系统没有这个工具，所以推荐使用python来实现</p>
<p>注意：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# python3 -c &#x27;import crypt,getpass;pw=&quot;zutuanxue&quot;;print(crypt.crypt(pw))&#x27;</span><br></pre></td></tr></table></figure>

<p><strong>生成ks.cfg文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp /root/anaconda-ks.cfg /var/www/html/ks.cfg	#生成ks.cfg文件</span><br><span class="line">[root@zutuanxue ~]# vim /var/www/html/ks.cfg</span><br><span class="line">#version=RHEL8</span><br><span class="line">ignoredisk --only-use=nvme0n1    ###注意这是与BIOS方式差异的位置，注意设备类型，可在BIOS中查看到</span><br><span class="line">autopart --type=lvm</span><br><span class="line"># Partition clearing information</span><br><span class="line">clearpart --all			#删除所有分区</span><br><span class="line"># Use graphical install</span><br><span class="line">graphical</span><br><span class="line">url     --url=&quot;http://192.168.2.100/RHEL/&quot;			#指定安装URL</span><br><span class="line"># Keyboard layouts</span><br><span class="line">keyboard --vckeymap=cn --xlayouts=&#x27;cn&#x27;</span><br><span class="line"># System language</span><br><span class="line">lang zh_CN.UTF-8</span><br><span class="line"># Network information</span><br><span class="line">network  --bootproto=dhcp --device=ens33 --ipv6=auto --activate</span><br><span class="line">network  --hostname=localhost.localdomain</span><br><span class="line"># Root password	“`123qwe”			##root用户的密码&quot;111111&quot;</span><br><span class="line">rootpw --iscrypted $6$kdHt1qIdgNPlHUD1$zibMjh/AQGZQjIJe8Q4HYiin.IKaV7MHWciueiwbLD/03giuSqzU5ynSu/giDAjMLpJFj/CpNgT7TKSm5XyxV1</span><br><span class="line"># X Window System configuration information</span><br><span class="line">xconfig  --startxonboot</span><br><span class="line"># Run the Setup Agent on first boot</span><br><span class="line">#firstboot disable		#初次启动设置</span><br><span class="line">firstboot --disable</span><br><span class="line"># System services</span><br><span class="line">services --enabled=&quot;chronyd&quot;</span><br><span class="line"># System timezone</span><br><span class="line">timezone America/New_York --isUtc</span><br><span class="line">#Reboot after installation	#安装完成后自动重启</span><br><span class="line">reboot</span><br><span class="line"># License agreement		#同意授权协议</span><br><span class="line">eula --agreed</span><br><span class="line">#添加一个普通用户名字为zutuanxue密码&quot;111111&quot; 属组为 whell</span><br><span class="line">user --groups=wheel --name=zutuanxue --password=$6$kdHt1qIdgNPlHUD1$zibMjh/AQGZQjIJe8Q4HYiin.IKaV7MHWciueiwbLD/03giuSqzU5ynSu/giDAjMLpJFj/CpNgT7TKSm5XyxV1 --iscrypted --gecos=&quot;zutuanxue&quot;</span><br><span class="line">%packages</span><br><span class="line">@^graphical-server-environment</span><br><span class="line">%end</span><br><span class="line"></span><br><span class="line">%addon com_redhat_kdump --disable --reserve-mb=&#x27;auto&#x27;</span><br><span class="line"></span><br><span class="line">%end</span><br><span class="line"></span><br><span class="line">%anaconda</span><br><span class="line">pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class="line">pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok</span><br><span class="line">pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class="line">%end</span><br></pre></td></tr></table></figure>

<p><strong>Step 7 修改文件权限，启动http服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# chmod a+r /var/www/html/ks.cfg</span><br><span class="line">[root@zutuanxue ~]# systemctl start httpd</span><br><span class="line">[root@zutuanxue ~]# systemctl start httpd</span><br><span class="line">[root@zutuanxue ~]# systemctl status httpd</span><br><span class="line">[root@zutuanxue ~]# netstat -antlp | grep :80</span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      33976/httpd         </span><br></pre></td></tr></table></figure>

<p><strong>Step 8 测试</strong></p>
<p>新建虚拟机的是要选择自定义使用UEFI</p>
]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Web服务器-Nginx</title>
    <url>/2022/11/15/zutuanxue-Web%E6%9C%8D%E5%8A%A1%E5%99%A8-Nginx/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Web服务器-Tomcat</title>
    <url>/2022/11/15/zutuanxue-Web%E6%9C%8D%E5%8A%A1%E5%99%A8-Tomcat/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-企业级监控系统-Zabbix</title>
    <url>/2022/11/15/zutuanxue-%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F-Zabbix/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-数据安全之企业存储</title>
    <url>/2022/11/15/zutuanxue-%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E4%B9%8B%E4%BC%81%E4%B8%9A%E5%AD%98%E5%82%A8/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-虚拟化之KVM</title>
    <url>/2022/11/15/zutuanxue-%E8%99%9A%E6%8B%9F%E5%8C%96%E4%B9%8BKVM/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-构建可视化数据分析系统-ELK</title>
    <url>/2022/11/15/zutuanxue-%E6%9E%84%E5%BB%BA%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E7%B3%BB%E7%BB%9F-ELK/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-计算机介绍</title>
    <url>/2022/11/15/zutuanxue-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<h1 id="3分钟了解计算机发展历史"><a href="#3分钟了解计算机发展历史" class="headerlink" title="3分钟了解计算机发展历史"></a>3分钟了解计算机发展历史</h1><p> 阅读 (1051376) </p>
<p> 分享</p>
<hr>
<h2 id="一、计算机定义"><a href="#一、计算机定义" class="headerlink" title="一、计算机定义"></a>一、计算机定义</h2><p>计算机（computer）俗称电脑，是现代一种用于高速计算的电子计算机器，可以进行数值计算，又可以进行逻辑计算，还具有存储记忆功能。是能够按照程序运行，自动、高速处理海量数据的现代化智能电子设备。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">计算机光有硬件是没法工作的，因为人无法和硬件(CPU/硬盘/光驱等)交流的，你说的它也听不懂，所以需要一个媒介来</span><br><span class="line">帮助你管理这些硬件，驱动硬件干活，能听懂的的指令，管理你的所有app。这个媒介就是操作系统，比如windows</span><br><span class="line"> Linux Unix Android ios等这些都是操作系统，所以一个可以让人使用的完整的计算机必须包括干活的硬件和辅助</span><br><span class="line">人类使用的操作系统软件</span><br></pre></td></tr></table></figure>

<h2 id="二、计算机分类"><a href="#二、计算机分类" class="headerlink" title="二、计算机分类"></a>二、计算机分类</h2><ul>
<li>超级计算机</li>
</ul>
<p>超级计算机是计算机中功能最强、运算速度最快、存储容量最大的一类计算机，多用于国家高科技领域和尖端技术研究，是一个国家科研实力的体现，它对国家安全，经济和社会发展具有举足轻重的意义。是国家科技发展水平和综合国力的重要标志。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">中国超级计算机: 天河2号 神威蓝光 曙光星云等</span><br></pre></td></tr></table></figure>

<p>超级计算机一般用在科研、超级运算、航天等领域，因为价格超级昂贵(注意我的措辞：昂贵，大家脑补吧)，一般不会被企业和个人购买和使用，所以我们一般是看不到这样的机器的，大家了解这种神一样的机器是存在的就可以了。有的小伙伴问过我，像阿里云、京东云等这样的云计算公司会不会用到这样的机器呢？<br>答案是肯定的：不会<br>原因是：</p>
<ol>
<li>价格是第一要素</li>
<li>弹性伸缩很难实现</li>
<li>运营成本太高</li>
</ol>
<ul>
<li>工业控制计算机</li>
</ul>
<p>工控机（Industrial Personal Computer，IPC）即工业控制计算机，是一种采用总线结构，对生产过程及机电设备、工艺装备进行检测与控制的工具总称。工控机具有重要的计算机属性和特征，如具有计算机主板、CPU、硬盘、内存、外设及接口，并有操作系统、控制网络和协议、计算能力、友好的人机界面。工控行业的产品和技术非常特殊，属于中间产品，是为其他各行业提供稳定、可靠、嵌入式、智能化的工业计算机。</p>
<p>工控机的主要类别有：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">IPC（PC总线工业电脑）</span><br><span class="line">PLC（可编程控制系统）</span><br><span class="line">DCS（分散型控制系统）</span><br><span class="line">FCS（现场总线系统）</span><br><span class="line">CNC（数控系统）</span><br></pre></td></tr></table></figure>

<ul>
<li>网络计算机<br>网络计算机的特点是无盘，是瘦版的计算机，数据由由服务器提供网络上的程序或存储。网络计算机具有自己的处理能力，但除核心软件之外，其他软件都需从网络服务器下载，节省了频繁的软件升级和维护，也降低了成本。</li>
<li>个人计算机<br>个人计算机由硬件系统和软件系统组成，是一种能独立运行，完成特定功能的设备。</li>
<li>嵌入式计算机<br>嵌入式技术就是”专用”计算机技术，这个专用，是指针对某个特定的应用，如针对网络、针对通信、针对音频、针对视频，针对工业控制等，从学术的角度，嵌入式系统是以应用为中心，以计算机技术为基础，并且软硬件可裁剪，适用于应用系统对功能、可靠性、成本、体积、功耗有严格要求的专用计算机系统，它一般由嵌入式微处理器、外围硬件设备、嵌入 式操作系统以及用户的应用程序等四个部分组成。</li>
</ul>
<h2 id="三、计算机的发展史"><a href="#三、计算机的发展史" class="headerlink" title="三、计算机的发展史"></a>三、计算机的发展史</h2><p><strong>第1代：电子管数字机（1946—1958年）</strong></p>
<p>世界上第一台电脑硬件方面，逻辑元件采用的是真空电子管，主存储器采用汞延迟线、阴极射线示波管静电存储器、磁鼓、磁芯；外存储器采用的是磁带。软件方面采用的是机器语言、汇编语言。应用领域以军事和科学计算为主。特点是体积大、功耗高、可靠性差。速度慢（一般为每秒数千次至数万次）、价格昂贵，但为以后的计算机发展奠定了基础。</p>
<p><strong>第2代：晶体管数字机（1958—1964年）</strong></p>
<p>硬件方的操作系统、高级语言及其编译程序。应用领域以科学计算和事务处理为主，并开始进入工业控制领域。特点是体积缩小、能耗降低、可靠性提高、运算速度提高（一般为每秒数10万次，可高达300万次）、性能比第1代计算机有很大的提高。</p>
<p><strong>第3代：集成电路数字机（1964—1970年）</strong></p>
<p>硬件方面，逻辑元件采用中、小规模集成电路（MSI、SSI），主存储器仍采用磁芯。软件方面出现了分时操作系统以及结构化、规模化程序设计方法。特点是速度更快（一般为每秒数百万次至数千万次），而且可靠性有了显著提高，价格进一步下降，产品走向了通用化、系列化和标准化等。应用领域开始进入文字处理和图形图像处理领域。</p>
<p><strong>第4代：大规模集成电路机（1970年至今）</strong></p>
<p>硬件方面，逻辑元件采用大规模和超大规模集成电路（LSI和VLSI）。软件方面出现了数据库管理系统、网络管理系统和面向对象语言等。特点是1971年世界上第一台微处理器在美国硅谷诞生，开创了微型计算机的新时代。应用领域从科学计算、事务管理、过程控制逐步走向家庭。</p>
<p>推动计算机高速发展的重要人物–冯.诺依曼<br>1944年，美籍匈牙利数学家 冯·诺依曼 提出计算机基本结构和工作方式的设想，为计算机的诞生和发展提供了理论基础。时至今日，尽管计算机软硬件技术飞速发展，但计算机本身的体系结构并没有明显的突破，当今的计算机仍属于冯·诺依曼架构。</p>
<p><strong>计算机快速发展的贡献者–冯.诺依曼，提出了计算机的冯.诺依曼体系。</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/8/26/1598403420332.jpeg" alt="冯.诺依曼.jpeg"></p>
<p><strong>冯.诺依曼计算机体系的部分内容：</strong><br>1）计算机硬件设备由存储器、运算器、控制器、输入设备和输出设备5部分组成。<br>2）采用二进制形式表示数据和指令。<br>3） 将程序（数据和指令序列）预先存放在主存储器中，使计算机在工作时能够自动高速地从存储器中取出指令，并加以执行。</p>
<h1 id="快速选购适合自己的CPU"><a href="#快速选购适合自己的CPU" class="headerlink" title="快速选购适合自己的CPU"></a>快速选购适合自己的CPU</h1><p> 阅读 (353157) </p>
<p> 分享</p>
<hr>
<h2 id="一、CPU介绍"><a href="#一、CPU介绍" class="headerlink" title="一、CPU介绍"></a>一、CPU介绍</h2><p>计算机的核心部件，负责程序控制和运算，是计算机组成的最重要部分。选购计算机时的重要指标部件，决定计算机运算速度的快慢。个人电脑CPU目前最著名的有：intel 和 AMD两大家，其中Intel以稳定著称，AMD以速度快著称。所以一般工作的机器用Intel的多一些，玩游戏的玩家机器一般选购AMD CPU。这个没有绝对的界限，看个人需求和爱好。</p>
<h2 id="二、CPU分类"><a href="#二、CPU分类" class="headerlink" title="二、CPU分类"></a>二、CPU分类</h2><ul>
<li>按厂商: intel AMD</li>
<li>按接口: LGA PGA</li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/8/26/1598403814356.jpeg" alt="intel_cpu_LGA.jpeg"></p>
<p>LGA触点式：新式接口类型 现在Intel的CPU基本使用该接口<br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/8/26/1598403862582.jpg" alt="AMD_AM4_PGA接口.jpg"><br>PGA针式： 老的接口类型，AMD一直在使用该接口</p>
<h2 id="三、选购CPU的指标"><a href="#三、选购CPU的指标" class="headerlink" title="三、选购CPU的指标"></a>三、选购CPU的指标</h2><p>参考指标：主频、缓存、核数<br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/8/26/1598403946021.png" alt="CPU_参数.png"></p>
<h2 id="四、CPU常见故障"><a href="#四、CPU常见故障" class="headerlink" title="四、CPU常见故障"></a>四、CPU常见故障</h2><ul>
<li>电脑无法开机<br>CPU针脚和主板接口接触不良[intel CPU是触点的会氧化]或者确针[AMD的CPU是针式]</li>
<li>故障表象：计算机死机，重启</li>
</ul>
<p>故障原因：<br>温度过高造成，一般原因是天气、散热器老化、长时间高负荷运行、超频造成的。</p>
<p>附录：2020 CPU发展天梯图<br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/8/26/1598404302669.jpg" alt="cpu天梯图.jpg"></p>
<h1 id="计算机硬件-内存"><a href="#计算机硬件-内存" class="headerlink" title="计算机硬件-内存"></a>计算机硬件-内存</h1><p> 阅读 (472635) </p>
<p> 分享</p>
<h2 id="一、内存介绍"><a href="#一、内存介绍" class="headerlink" title="一、内存介绍"></a>一、内存介绍</h2><p>内存是计算机中最重要的部件，它是计算机中的一个中间件。解决了CPU和硬盘之间速度严重不对等的问题，是CPU和硬盘数据交互的桥梁。默认情况下，CPU从内存读写数据，内存从硬盘读写数据。为了提升效率，一般在开机或者软件在运行的时候，会将常用数据直接从硬盘直接读入内存，以待后续CPU使用，提高计算机运行效率。</p>
<h2 id="二、内存工作原理"><a href="#二、内存工作原理" class="headerlink" title="二、内存工作原理"></a>二、内存工作原理</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/22/1600754779576.png" alt="内存工作原理.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">计算机在开机加载系统的时候，会把系统常用的数据从硬盘调入内存，方便CPU直接从内存获取数据，避免了从低速的硬盘</span><br><span class="line">拿数据造成用户等待，给用户不好的体验；当然用户在使用APP的时候也是同样的道理，所需数据都是优先存入到内存中。</span><br><span class="line">这是内存的读操作。当然，写操作也是一样的道理，也需要经过内存在到硬盘，用户在计算机操作过程中临时产生的数据</span><br><span class="line">也是暂存内存，通过用户保存或者内存数据刷新机制写入到硬盘。</span><br><span class="line"></span><br><span class="line">比如: 你创建了一个word文件，你往word文档写数据其实是先写到内存然后在由内存写到硬盘的。</span><br></pre></td></tr></table></figure>

<h2 id="三、内存分类"><a href="#三、内存分类" class="headerlink" title="三、内存分类"></a>三、内存分类</h2><p>内存条分为：笔记本、台式机两种</p>
<p>当然如果按厂商的话会有很多，这里推荐金士顿的，老牌子靠得住。</p>
<ul>
<li>台式机内存</li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/22/1600754846309.jpg" alt="台式机内存.jpg"></p>
<ul>
<li>笔记本内存</li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/22/1600754863320.jpg" alt="笔记本内存.jpg"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">误区解读：内存越大越好吗？</span><br><span class="line">其实理论上是这样的，同时也需要你的金钱支撑，因为买很多大容量内存还是需要花很多钱的，同时还得主板支持。</span><br><span class="line">但是，还是需要根据自己的电脑运行业务的情况去定，很多家用电脑购买了只是简单的游戏或者办公，购买满配的内存其实</span><br><span class="line">真正的内存使用率确不到30%</span><br><span class="line">				浪费了钱也浪费了资源，你懂了吗？</span><br></pre></td></tr></table></figure>

<h2 id="四、内存选购"><a href="#四、内存选购" class="headerlink" title="四、内存选购"></a>四、内存选购</h2><p>选购参数：容量、频率</p>
<p>选购多条内存或者升级计算机内存的时候，最好选购同品牌，同频率的产品，否则会有兼容问题，会造成蓝屏或重启。</p>
<h2 id="五、内存常见故障"><a href="#五、内存常见故障" class="headerlink" title="五、内存常见故障"></a>五、内存常见故障</h2><p>台式机开机点不亮显示器</p>
<p>台式机运行了一段后突然一天开机显示器不亮(点不亮)的情况，一般是由于内存条上的金手指（内存和主板插槽接触的铜片）氧化，拔下来用橡皮或者粗糙的纸擦擦就好了，如果条件允许就换个槽插上就行了。</p>
<h1 id="计算机硬件-硬盘"><a href="#计算机硬件-硬盘" class="headerlink" title="计算机硬件-硬盘"></a>计算机硬件-硬盘</h1><p> 阅读 (263679) </p>
<p> 分享</p>
<h2 id="一、硬盘介绍"><a href="#一、硬盘介绍" class="headerlink" title="一、硬盘介绍"></a>一、硬盘介绍</h2><p>硬盘是计算机中最重要的存储设备，负责永久性数据存储。目前常用的硬盘分为<strong>机械硬盘</strong>和<strong>固态硬盘</strong>两种，相比来说，固态硬盘速度快但是容量较小，价格高；机械硬盘速度慢但是容量大，价格便宜。</p>
<h3 id="机械硬盘"><a href="#机械硬盘" class="headerlink" title="机械硬盘"></a>机械硬盘</h3><p>机械硬盘是由磁盘片、磁头、马达、电路板等部件组成，分为2.5和3.5英寸两种，转速为5400转&#x2F;分、7200转&#x2F;分、10000转&#x2F;分、15000转&#x2F;分.笔记本采用的是2.5英寸的，台式机常用3.5英寸的。数据写在磁盘片的正反面的磁道上，磁盘片和光盘类似！</p>
<p>由于机械硬盘价格相对较低、容量大、技术稳定，所以深受广大计算机用户的喜爱。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/22/1600755663926.jpeg" alt="机械硬盘结构.jpeg"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">脑补：</span><br><span class="line">机械硬盘读写速度最快有多快</span><br><span class="line">机械硬盘最快的当属15000转/分的scsi接口磁盘，理论读写220MB/S</span><br></pre></td></tr></table></figure>

<h3 id="固态硬盘"><a href="#固态硬盘" class="headerlink" title="固态硬盘"></a>固态硬盘</h3><p>固态硬盘是一种新型硬盘，采用电信号存储，速度更快，深受广大计算机用户的喜爱，但是目前固态硬盘容量相对较小，价格较贵，还没有深度普及，又因为其存储的颗粒受擦写次数的限制，所以只是用在擦写不是很频繁的环境中。</p>
<ul>
<li>固态硬盘有sata固态、m.2固态、pci-e固态三种</li>
<li>m.2固态又有nvme的m.2和sata的m.2两种</li>
</ul>
<p>STAT接口的固态硬盘，目前很多笔记本电脑厂商使用这种固态硬盘，价格相对较低。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/22/1600756354053.jpg" alt="固态硬盘2.5英寸.jpg"></p>
<p>M.2 NVME接口硬盘，俗称口香糖硬盘，苹果笔记本大部分采用这种硬盘，价格相对较高。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/22/1600756385862.jpg" alt="固态硬盘口香糖.jpg"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">脑补：</span><br><span class="line">固态硬盘速度有多快</span><br><span class="line">目前不同厂家的固态硬盘读写速度不同，最快的nvme.m2 告诉SSD磁盘理论读写速度为3400MB/S</span><br></pre></td></tr></table></figure>

<h3 id="磁盘类型"><a href="#磁盘类型" class="headerlink" title="磁盘类型"></a>磁盘类型</h3><p>按接口分类:IDE、SCSI、SATA、SAS</p>
<h2 id="二、硬盘的选购"><a href="#二、硬盘的选购" class="headerlink" title="二、硬盘的选购"></a>二、硬盘的选购</h2><p>参考指标:容量、缓存、【转速】、读写速度</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/22/1600755992921.png" alt="硬盘选购.png"></p>
<h2 id="三、硬盘常见故障"><a href="#三、硬盘常见故障" class="headerlink" title="三、硬盘常见故障"></a>三、硬盘常见故障</h2><ul>
<li>磁盘坏道<br>硬盘属于计算机中的耗材设备，如果磁盘出现坏道会造成蓝屏或者数据读写慢，甚至数据无法读出。应该尽快更换硬盘。</li>
<li>电脑越用越慢<br>很多小伙伴的windows电脑越用越慢，常常抱怨，重装系统后感觉就好多了，这是为啥？<br>一般情况下windows电脑越用越慢的原因是因为windows系统在运行的时候会把运行日志都存储在安装系统的那个分区，随着时间推移，越存越多，自然该分区就越来越小了，每次在使用这个分区上的空间时都需要长时间寻找空闲空间造成等待，还因为数据量太大，从该分区找系统所使用的文件时间也会越来越长，所以用户体验特别不好。定期清理系统盘的垃圾是很有必要的。</li>
<li>家里电脑年代长了，升级内存后依然很慢<br>电脑年头久了，想升级一下电脑，所以加装了大内存，但是感觉提升很小。原因是可能同学对电脑的运行原理还不是很了解，可以看看上一节的内存工作原理。<br>其实电脑工作涉及的核心部件就三个：CPU、内存、硬盘<br>CPU一般是不会用完的，因为个人电脑CPU再老也能满足个人的日常使用，除非你玩很大的游戏或者高负荷运算。<br>内存是CPU连接硬盘的桥梁，只要日常查看内存监控的时候使用率到不了80%以上完全没必要投资升级<br>硬盘其实是电脑慢的罪魁祸首，因为CPU的数据得从硬盘读出或存入。读是硬盘交给内存，内存交给CPU；写是CPU交给内存，内存存入硬盘。当你发现CPU使用率不高，内存的也不高，但是电脑特慢，不用在找原因了，肯定是硬盘出问题了，一般是因为长时间的使用硬盘中的盘片有划伤了，所以在读数据时，读到划伤区域会读的特变慢！<br>兄台，换块固态吧！努一努，单车变摩托。</li>
</ul>
<h1 id="计算机硬件-主板"><a href="#计算机硬件-主板" class="headerlink" title="计算机硬件-主板"></a>计算机硬件-主板</h1><p> 阅读 (441922) </p>
<p> 分享</p>
<h2 id="主板介绍"><a href="#主板介绍" class="headerlink" title="主板介绍"></a>主板介绍</h2><p>主板是计算机中最重要的平台部件，也是电脑中最大的集成电路板，它直接或间接的将所有的设备连接在一起。主板的好坏直接决定了计算机速度的快慢和运行稳定。同时主板也提供了大量的设备接口，为计算机扩展功能提供了可能。</p>
<p>主板一般为矩形电路板，上面安装了组成计算机的主要电路系统，一般有BIOS芯片、I&#x2F;O控制芯片、键和面板控制开关接口、指示灯插接件、扩充插槽、主板及插卡的直流电源供电接插件等元件。</p>
<p>现在主板一般情况下都集成了三卡(显卡、网卡、声卡)，也有的只集成了声卡和网卡。</p>
<p>主板分为大板和小板两种，如果不是空间的限制，建议大家一律选择大板。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601026904041.png" alt="主板.png"></p>
<h2 id="主板选购"><a href="#主板选购" class="headerlink" title="主板选购"></a>主板选购</h2><p>参考指标：CPU平台、接口数量、支持的技术</p>
<h2 id="主板故障"><a href="#主板故障" class="headerlink" title="主板故障"></a>主板故障</h2><p>主板是高精密的集成电路板，出厂经过严格的检测，使用过程中如果不是外力，基本上不会被损坏。</p>
<h1 id="计算机硬件-显卡"><a href="#计算机硬件-显卡" class="headerlink" title="计算机硬件-显卡"></a>计算机硬件-显卡</h1><p> 阅读 (407031) </p>
<p> 分享</p>
<h2 id="显卡介绍"><a href="#显卡介绍" class="headerlink" title="显卡介绍"></a>显卡介绍</h2><p>显卡是计算机中最重要的图像输出设备，是将计算机系统所需要的显示信息进行转换驱动显示器，并向显示器提供逐行或隔行扫描信号，控制显示器的正确显示，是连接显示器和个人计算机主板的重要组件，是“人机对话”的重要设备之一。</p>
<p>显卡按照接口分类</p>
<ol>
<li>ISA</li>
<li>PCI</li>
<li>AGP</li>
<li>PCI-E</li>
</ol>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601027000625.png" alt="显卡.png"></p>
<h2 id="显卡选购"><a href="#显卡选购" class="headerlink" title="显卡选购"></a>显卡选购</h2><p>显卡参考指标: 显存、位宽、频率</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601027009241.png" alt="显卡参数.png"></p>
<h1 id="计算机硬件-机箱电源"><a href="#计算机硬件-机箱电源" class="headerlink" title="计算机硬件-机箱电源"></a>计算机硬件-机箱电源</h1><p> 阅读 (517711) </p>
<p> 分享</p>
<h2 id="机箱介绍与选购"><a href="#机箱介绍与选购" class="headerlink" title="机箱介绍与选购"></a>机箱介绍与选购</h2><p>机箱是用来装载计算机硬件的容器，可以起到对计算机硬件的保护作用。此外，电脑机箱具有屏蔽电磁辐射的重要作用。在购买机箱的时候，建议大家参考以下的指标：</p>
<p>1）抗静电</p>
<p>2）机箱质量</p>
<p>3）机箱散热</p>
<p>4）机箱质量不易变形</p>
<p>5）机箱空间能满足扩展需求</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601027153719.jpg" alt="机箱.jpg"></p>
<p>机箱分类</p>
<ol>
<li>E-ATX加大型</li>
<li>ATX标准型</li>
<li>M-ATX紧凑型</li>
<li>MINI mini型</li>
</ol>
<h4 id="机箱选购"><a href="#机箱选购" class="headerlink" title="机箱选购"></a>机箱选购</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601027132863.png" alt="机箱选购.png"></p>
<h2 id="电源介绍与选购"><a href="#电源介绍与选购" class="headerlink" title="电源介绍与选购"></a>电源介绍与选购</h2><p>计算机属于弱电产品，也就是说部件的工作电压比较低，一般在正负12伏以内，并且是直流电。而普通的市电为220伏（有些国家为110伏）交流电，不能直接在计算机部件上使用。因此计算机和很多家电一样需要一个电源部分，负责将普通市电转换为计算机可以使用的电压，一般安装在计算机内部。计算机的核心部件工作电压非常低，并且由于计算机工作频率非常高，因此对电源的要求比较高。目前计算机的电源为开关电路，将普通交流电转为直流电，再通过斩波控制电压，将不同的电压分别输出给主板、硬盘、光驱等计算机部件。</p>
<p>电源是所有计算机获得电力的设备，是计算机的心脏部件。电源工作的稳定直接决定了电脑的稳定，所以在选购电源时，建议大家不要选购杂牌，一定选择正规的大厂品牌，同时要考虑电源的功率，要为后续升级硬件预留空间。</p>
<p>电源选购时应该注意以下指标:</p>
<p>1）品牌</p>
<p>2）提供的电源接口</p>
<p>3）电源功率</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601027175857.jpg" alt="电源.jpg"></p>
<h4 id="电源选购"><a href="#电源选购" class="headerlink" title="电源选购"></a>电源选购</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601027189126.png" alt="电源选购.png"></p>
<h1 id="计算机硬件-网卡声卡"><a href="#计算机硬件-网卡声卡" class="headerlink" title="计算机硬件-网卡声卡"></a>计算机硬件-网卡声卡</h1><p> 阅读 (217991) </p>
<p> 分享</p>
<h2 id="一、网卡介绍"><a href="#一、网卡介绍" class="headerlink" title="一、网卡介绍"></a>一、网卡介绍</h2><p>网卡又叫网络接口卡，是计算机联网的设备。之前一直是独立存在的，后来被主板商集成在主板上。目前集成的网卡基本上都是10&#x2F;100&#x2F;1000M自适应网卡。</p>
<p>网卡分为有线网卡和无线网卡两种。</p>
<p>无线网卡遵循了IEEE802.11ac、a、b、g、n标准，标准不同速度不同，标准之间是向下兼容的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">不同标准的无线网卡速度</span><br><span class="line">11Mbps（802.11b）</span><br><span class="line">22Mbps（802.11 Super b）</span><br><span class="line">54Mbps（802.11g/802.11a）</span><br><span class="line">108Mbps（802.11 Super G）</span><br><span class="line">125Mbps（802.11 High Speed-G）</span><br><span class="line">300Mbps（802.11n）</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601027380743.png" alt="主板集成网卡.png"></p>
<h2 id="二、声卡介绍"><a href="#二、声卡介绍" class="headerlink" title="二、声卡介绍"></a>二、声卡介绍</h2><p>声卡 (Sound Card)也叫音频卡：声卡是多媒体技术中最基本的组成部分，是实现声波&#x2F;数字信号相互转换的一种硬件。</p>
<p>声卡的基本功能是把来自话筒、磁带、光盘的原始声音信号加以转换，输出到耳机、扬声器、扩音机、录音机等声响设备，或通过音乐设备数字接口(MIDI)使乐器发出美妙的声音。</p>
<p>现在电脑声卡基本上是集成在主板上的，除非特殊需要采购专业声卡，比如唱歌、影视频处理等。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601027395258.png" alt="主板集成声卡.png"></p>
<h1 id="服务器品牌、型号介绍"><a href="#服务器品牌、型号介绍" class="headerlink" title="服务器品牌、型号介绍"></a>服务器品牌、型号介绍</h1><p> 阅读 (230656) </p>
<p> 分享</p>
<h2 id="一、服务器品牌介绍"><a href="#一、服务器品牌介绍" class="headerlink" title="一、服务器品牌介绍"></a>一、服务器品牌介绍</h2><p>1、戴尔（Dell），是一家总部位于美国德克萨斯州朗德罗克的世界五百强企业，由迈克尔·戴尔于1984年创立。戴尔以生产、设计、销售家用以及办公室电脑而闻名，不过它同时也涉足高端电脑市场，生产与销售服务器、数据储存设备、网络设备等</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602321471498.png" alt="clip_image001.png"></p>
<p>2、惠普已经拆分成了两家独立的世界五百强。一个叫HPI 沿用惠普的名字主营pc和打印机，一个叫HPE也就是慧与，主营服务器。拆分主要是让两家公司对这两块业务更加专注，独立运营，惠普（HP）是世界最大的信息科技（IT）公司之一，成立于1939年，总部位于美国加利福尼亚州帕洛阿尔托市。惠普下设三大业务集团：信息产品集团、打印及成像系统集团和企业计算机专业服务集团。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602321488450.png" alt="clip_image002.png"></p>
<p>3、浪潮集团有限公司，即浪潮集团，是中国本土综合实力强大的大型IT企业之一，中国领先的云计算、大数据服务商。浪潮集团旗下拥有浪潮信息、浪潮软件、浪潮国际、华光光电四家上市公司，业务涵盖云数据中心、云服务大数据、智慧城市、智慧企业四大产业群组，为全球100多个国家和地区提供IT产品和服务</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602321512313.png" alt="image20191029172806677.png"></p>
<p>4、ThinkServer是2012年6月5日联想从全球向中国引进的全新服务器品牌，与Think一脉相承，恪守对品质的坚持，传承Think“品质”、“创新”、“易用”三大基因，共享联想全球研发和制造资源，并汲取全球用户对品质的要求，以精密的设计、业界最全面的质量标准、严苛的测试流程打造全球品质的产品</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602321551590.png" alt="clip_image003.png"></p>
<p>5、华为技术有限公司是一家生产销售通信设备的民营通信科技公司，于1987年正式注册成立，是全球领先的信息与通信技术（ICT）解决方案供应商，专注于ICT领域，坚持稳健经营、持续创新、开放合作，在电信运营商、企业、终端和云计算等领域构筑了端到端的解决方案优势</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602321571550.png" alt="clip_image004.png"></p>
<p>6、IBM（International Business Machines Corporation）。总公司在纽约州阿蒙克市。1911年托马斯·沃森创立于美国，是全球最大的信息技术和业务解决方案公司，拥有全球雇员31多万人，业务遍及160多个国家和地区。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602321593255.png" alt="clip_image005.png"></p>
<p>以上的公司都是一个综合类型公司，生产和销售服务器只是他们的一项业务，除了上面介绍的几家公司之外还有思科，新华三，宝德等有服务器生产销售业务的公司。</p>
<h2 id="二、服务器规格介绍"><a href="#二、服务器规格介绍" class="headerlink" title="二、服务器规格介绍"></a>二、服务器规格介绍</h2><p>我们以机架式服务器为例来给各位介绍一下服务器规格，通常机架式服务器都有1U、2U、4U、6U、8U这几种规格，这里面提到了一个U的概念，U指的是高度也就是1U&#x3D;4.445cm高，所以机架式服务器对应的高度你就可以用1、2、4、6、8去乘以4.445去进行计算，而服务器的高度越大对应的可扩展性就越好，支持的硬件就越多，当然价格也就越高一些。通常企业中选购的服务器以2U的居多</p>
<h2 id="三、服务器型号介绍"><a href="#三、服务器型号介绍" class="headerlink" title="三、服务器型号介绍"></a>三、服务器型号介绍</h2><p>我们以典型的戴尔服务器和IBM的服务器为例来给大家介绍一下这两个厂商的服务器型号以及他们的命名规则</p>
<p>首先，我们来看下戴尔的服务器，从第十代服务器开始，戴尔重新规范的了服务器的名字，以PowerEdge R640为例</p>
<p>第一位是字母，R代表的是机架式服务器，除了R之外还有</p>
<ul>
<li>R：Rack，机架式服务器</li>
<li>T：Tower 塔式服务器</li>
<li>M：Modular 模块化服务器（刀片服务器）</li>
</ul>
<p>另外还有一个比较特别的系列，这个系列是为数据中心等提出的高密度服务器，也称为为服务器就是C</p>
<p>第二位是数字，这个数字代表此服务器在整个产品线中的位置</p>
<ul>
<li>1,2系列为基础入门级的单路CPU服务器，这个系列是中小型企业的首选</li>
<li>3,4,5系列为中高端的单路CPU和入门级的双路CPU服务器，包含有可选的高级系统管理功能，适合远程站点和较大的公司使用</li>
<li>6,7,8系列是主流的双路CPU和入门级四路CPU服务器，拥有强大的性能，能够满足大部分企业级应用需求</li>
<li>9系列是最高端的四路CPU服务器，用用强大的计算能力，支持超大内存，适合需要最高性能，可靠性以及I&#x2F;O可扩展的关键任务应用程序</li>
</ul>
<p>第三位是数字，代表的是第几代产品</p>
<ul>
<li>目前戴尔最新的服务器是第十四代产品所以这个数字是4</li>
</ul>
<p>最后一位是数字</p>
<ul>
<li>0代表的是intel的CPU，5代表的是AMD的CPU</li>
</ul>
<p>接下来我们看下IBM的服务器</p>
<p>IBM服务器，主要包括i系列、p系列、x系列、z系列。</p>
<ul>
<li>i系列的服务器产品一直被大家命名为“小型机“，i系列服务器一般是终端产品，该系列产品用户主要是将众多的小型服务器合并到更少量的i系列产品中，i系列采用IBM POWER微处理器技术。</li>
<li>p系列也是基于POWER处理器的服务器，运行AIX（IBM版Unix）和Linux，p系列是IBM Unix服务器产品线的根基，有机架式和机柜式。</li>
<li>x系列全部基于X86架构处理器，也和DELL、HP一样包括塔式服务器、机架式服务器和刀片服务器。如IBM X3850 X5服务器来说明命名规则，x3表明是x3架构下的服务器，第二位的8表明性能，数字越大表示性能越强，第三位的5表示机架式，如果是2或者3也表示机架式，如果第三位是0则表示塔式，如X3500服务器即为塔式服务器，第四位的0表示采用的是intel的CPU，5表示用的是AMD的CPU，最后的两位x5则是表示内存技术、内存扩展能力。</li>
<li>z系列为大型机，都为机柜式结构，该系列产品相当高端，是IBM的支柱产品。</li>
</ul>
<h2 id="四、如何购买"><a href="#四、如何购买" class="headerlink" title="四、如何购买"></a>四、如何购买</h2><p>对于服务器产品的购买，现在的渠道相对来说比较多，可以去京东，淘宝，或者各家服务器的官网，货比三家之后购买会有惊喜</p>
<h2 id="五、服务器内部结构"><a href="#五、服务器内部结构" class="headerlink" title="五、服务器内部结构"></a>五、服务器内部结构</h2><p>对于刀片式服务器，从大体上为存储模块，散热模块，计算模块（包含CPU，内存等）供电模块和其他扩展模块这几部分组成，不同类型的布局上会稍微有些差异，下面的两张图片分别是戴尔和IBM的产品</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602321618840.png" alt="clip_image006.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602321631447.png" alt="clip_image007.png"></p>
<h2 id="六、机柜介绍"><a href="#六、机柜介绍" class="headerlink" title="六、机柜介绍"></a>六、机柜介绍</h2><p>机柜一般是冷轧钢板或合金制作的用来存放计算机和相关控制设备的物件，可以提供对存放设备的保护，屏蔽电磁干扰，有序、整齐地排列设备，方便以后维护设备。机柜一般分为服务器机柜、网络机柜、控制台机柜等。我们以服务器机柜为例，服务器机柜在机柜的深度、高度、承重等方面均有要求。高度有2.2米、2.0米、1.8米、1.6米、1.4米、1.2米等高度；宽度为800mm、700mm或600mm三种；深度为800mm、900mm和1000mm三种，对应的是47U、42U、37U、32U、27U、22U，可以配置：专用固定托盘、专用滑动托盘、电源支架、地脚轮、地脚钉、理线环、理线架、L支架、扩展横梁等。主体框架、前后门、左右侧门可以快速拆装。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602321650329.png" alt="clip_image008.png"></p>
]]></content>
  </entry>
  <entry>
    <title>zutuanxue-计算机网络基础</title>
    <url>/2022/11/15/zutuanxue-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h1 id="计算机网络介绍"><a href="#计算机网络介绍" class="headerlink" title="计算机网络介绍"></a>计算机网络介绍</h1><p> 阅读 (224944) </p>
<p> 分享</p>
<h2 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h2><p>计算机网络是由通信介质将地理位置不同的且相互独立的计算机连接起来，实现数据通信与资源共享</p>
<h2 id="网络分类"><a href="#网络分类" class="headerlink" title="网络分类"></a>网络分类</h2><h4 id="按照网络拓扑分类"><a href="#按照网络拓扑分类" class="headerlink" title="按照网络拓扑分类"></a>按照网络拓扑分类</h4><p>总线型：一般传输介质为同轴电缆，需要T型头和信号终结器</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023369025.png" alt="总线型.png"></p>
<p>环形：需要申请令牌才可以通信。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023390144.png" alt="环型.png"></p>
<p>星型：中央节点压力大，单点故障</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023413168.png" alt="星型.png"></p>
<p>网型：效率高，网络复杂</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023426070.png" alt="网型.png"></p>
<h4 id="按地域分类：参照物不同，类型不同"><a href="#按地域分类：参照物不同，类型不同" class="headerlink" title="按地域分类：参照物不同，类型不同"></a>按地域分类：参照物不同，类型不同</h4><p>局域网(LAN)：一个公司、一个家庭</p>
<p>城域网(MAN)：一个区、一个城市、一个国家</p>
<p>广域网(WAN)：一个国家、全世界</p>
<h2 id="网络设备"><a href="#网络设备" class="headerlink" title="网络设备"></a>网络设备</h2><p>交换机：负责组建局域网，研究的是MAC地址</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023466761.jpeg" alt="交换机.jpeg"></p>
<p>路由器：负责组建广域网，研究的是IP地址</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023483245.jpeg" alt="路由器.jpeg"></p>
<h2 id="传输介质"><a href="#传输介质" class="headerlink" title="传输介质"></a>传输介质</h2><p>同轴电缆、双绞线、光纤</p>
<p>目前常用的就是双绞线和光纤</p>
<h3 id="1）双绞线"><a href="#1）双绞线" class="headerlink" title="1）双绞线"></a>1）双绞线</h3><p>双绞线（twisted pair，TP）是一种综合布线工程中最常用的传输介质，是由两根具有绝缘保护层的铜导线组成的。把两根绝缘的铜导线按一定密度互相绞在一起，每一根导线在传输中辐射出来的电波会被另一根线上发出的电波抵消，有效降低信号干扰的程度。双绞线理论最大传输距离是100米，<strong>树明建议不要超过90米</strong>。如果两台设备超过这个距离，建议中间放一个中继器或者交换机。</p>
<p><strong>双绞线分为屏蔽双绞线和非屏蔽双绞线两种。</strong></p>
<p>屏蔽双绞线：抗静电干扰性强，价格稍高一些，一般室外用的多一些。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023511681.jpeg" alt="屏蔽双绞线.jpeg"></p>
<p>非屏蔽双绞线：重量轻，易弯曲，易安装，一般用在室内。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023533094.png" alt="非屏蔽双绞线.png"></p>
<p><strong>按照传输速度分类</strong></p>
<ul>
<li>1类 100KHz 主要用于传输语音</li>
<li>2类 1MHz 用于语音传输和最高传输速率4Mbps的数据传输</li>
<li>3类 16MHz 指目前在ANSI和EIA&#x2F;TIA568标准中指定的电缆，该电缆的传输频率16MHz，用于语音传输及最高传输速率为10Mbps的数据传输主要用于10BASE–T。</li>
<li>4类 20MHz 该类电缆的传输频率为20MHz，用于语音传输和最高传输速率16Mbps的数据传输主要用于基于令牌的局域网和 10BASE-T&#x2F;100BASE-T。</li>
<li>5类 100MHz 该类电缆增加了绕线密度，外套一种高质量的绝缘材料，传输率为100MHz，用于语音传输和最高传输速率为10Mbps的数据传输，主要用于100BASE-T和10BASE-T网络。这是最常用的以太网电缆。</li>
<li>5e类 100MHz 超5类具有衰减小，串扰少，并且具有更高的衰减与串扰的比值(ACR)和信噪比(Structural Return Loss)、更小的时延误差，性能得到很大提高。超5类线主要用于千兆位以太网（1000Mbps）。</li>
<li>6类 250MHz 六类线：该类电缆的传输频率为1MHz～250MHz，六类布线系统在200MHz时综合衰减串扰比（PS-ACR）应该有较大的余量，它提供2倍于超五类的带宽。六类布线的传输性能远远高于超五类标准，最适用于传输速率高于1Gbps的应用。六类与超五类的一个重要的不同点在于：改善了在串扰以及回波损耗方面的性能，对于新一代全双工的高速网络应用而言，优良的回波损耗性能是极重要的。六类标准中取消了基本链路模型，布线标准采用星形的拓扑结构，要求的布线距离为：永久链路的长度不能超过90m，信道长度不能超过100m。</li>
<li>6A类 500MHz</li>
<li>7类 600MHz</li>
</ul>
<p><strong>按照品牌分类</strong></p>
<ul>
<li>安普</li>
<li>西蒙</li>
<li>朗讯</li>
<li>丽特</li>
<li>IBM</li>
</ul>
<h3 id="2）光纤"><a href="#2）光纤" class="headerlink" title="2）光纤"></a>2）光纤</h3><p>光纤是光导纤维的简写，是一种由玻璃或塑料制成的纤维，可作为光传导工具。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023556171.jpg" alt="光纤.jpg"></p>
<p><strong>光纤分类</strong></p>
<p>单模光纤：只能传输一种模式的光，传输距离远，是多模光纤的几十倍以上，单模光纤外面护套线颜色一般为黄色</p>
<p>多模光纤：可以传输多种模式的光，多模光纤传输的距离比较近，一般只有几千米，多模光纤外面颜色一般为橘红色</p>
<p><strong>光纤速度</strong></p>
<p>光纤的极限传输家用的普通光纤就可达到10Gbps以上。</p>
<p>实验室中单条光纤最大速度已达到了26Tbps，有消息说通过石墨烯制造的新光调制器，还可继续提高10000倍，即260Pbps。</p>
<h1 id="OSI七层网络模型"><a href="#OSI七层网络模型" class="headerlink" title="OSI七层网络模型"></a>OSI七层网络模型</h1><p> 阅读 (322693) </p>
<p> 分享</p>
<h2 id="ISO介绍"><a href="#ISO介绍" class="headerlink" title="ISO介绍"></a>ISO介绍</h2><p>国际标准化组织（International Organization for Standardization，ISO）简称ISO，是一个全球性的非政府组织，是国际标准化领域中一个十分重要的组织。ISO国际标准组织成立于1946年，</p>
<p>ISO负责目前绝大部分领域（包括军工、石油、船舶等垄断行业）的标准化活动。ISO现有117个成员，包括117个国家和地区。中国是ISO的正式成员，代表中国参加ISO的国家机构是中国国家技术监督局（CSBTS）。</p>
<h2 id="网络模型介绍"><a href="#网络模型介绍" class="headerlink" title="网络模型介绍"></a>网络模型介绍</h2><p>在上世纪70年代，不同的厂商的计算机之间采用的都是本厂的通信协议，不同厂商间的计算机是无法通信的，为了解决这个问题，ISO组织专门成立了一个小组，目的是写出一套公共通信协议，实现不同厂商计算机之间通信互联。</p>
<p>实际上只是Honeywell Information System公司的一个小组完成的，小组的技术负责人是Charlie Bachman，这个小组主要是为了开发一些原型系统而成立的，主要关注数据库系统的设计。70年代中，为了支持数据库系统的访问，需要一个结构化的分布式通信系统体系结构。</p>
<p>在1977年提出了一个七层的体系结构模型，他们内部称之为分布式系统体系结构（DSA）</p>
<p>与此同时，1977年英国标准化协会向国际标准化组织（ISO）提议，为了定义分布处理之间的通信基础设施，需要一个标准的体系结构。结果，ISO就开放系统互联（OSI）问题成立了一个专委会（TC 97, Subcomittee 16），指定由美国国家标准协会（ANSI）开发一个标准草案，在专委会第一次正式会议之前提交。</p>
<p>Bachman [1] 参加了ANSI早期的会议，并提交了他的七层模型，这个模型就成了提交ISO专委会的唯一的一份草案。1978年发布了这个临时版本，1979年稍作细化之后，成了最终的版本。</p>
<h2 id="OSI七层模型"><a href="#OSI七层模型" class="headerlink" title="OSI七层模型"></a>OSI七层模型</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023863056.png" alt="osi七层模型简图.png"></p>
<h2 id="OSI七层模型介绍"><a href="#OSI七层模型介绍" class="headerlink" title="OSI七层模型介绍"></a>OSI七层模型介绍</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601023885728.gif" alt="osi七层.gif"></p>
<p>应用层</p>
<p>网络服务与最终用户的一个接口。</p>
<p>协议有：HTTP FTP TFTP SMTP SNMP DNS TELNET HTTPS POP3 DHCP</p>
<p>表示层</p>
<p>数据的表示、安全、压缩。（在五层模型里面已经合并到了应用层）</p>
<p>格式有，JPEG、ASCll、DECOIC、加密格式等</p>
<p>会话层</p>
<p>建立、管理、终止会话。（在五层模型里面已经合并到了应用层）</p>
<p>对应主机进程，指本地主机与远程主机正在进行的会话</p>
<p>传输层</p>
<p>定义传输数据的协议端口号，以及流控和差错校验。</p>
<p>协议有：TCP UDP，数据包一旦离开网卡即进入网络传输层</p>
<p>网络层</p>
<p>进行逻辑地址寻址，实现不同网络之间的路径选择。</p>
<p>协议有：ICMP IGMP IP（IPV4 IPV6） ARP RARP</p>
<p>数据链路层</p>
<p>建立逻辑连接、进行硬件地址寻址、差错校验 [2] 等功能。（由底层网络定义协议）</p>
<p>将比特组合成字节进而组合成帧，用MAC地址访问介质，错误发现但不能纠正。</p>
<p>物理层</p>
<p>建立、维护、断开物理连接。（由底层网络定义协议）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">关于设备工作在哪一层！</span><br><span class="line"></span><br><span class="line">一个设备工作在哪一层，关键看它工作时利用哪一层的数据头部信息。网桥工作时，是以MAC头部来决定转发端口的，</span><br><span class="line">因此显然它是数据链路层的设备。</span><br><span class="line">具体说:</span><br><span class="line">物理层：网卡，网线，集线器，中继器，调制解调器</span><br><span class="line"></span><br><span class="line">数据链路层：网桥，交换机</span><br><span class="line"></span><br><span class="line">网络层：路由器</span><br></pre></td></tr></table></figure>

<h2 id="OSI七层特点"><a href="#OSI七层特点" class="headerlink" title="OSI七层特点"></a>OSI七层特点</h2><p>OSI七层由于太过严格，所以并没有应用在计算机中，而是基于其衍生了一个TCP&#x2F;IP四层模型，被广大操作系统所应用。</p>
<h1 id="TCP-x2F-IP四层网络模型"><a href="#TCP-x2F-IP四层网络模型" class="headerlink" title="TCP&#x2F;IP四层网络模型"></a>TCP&#x2F;IP四层网络模型</h1><p> 阅读 (230877) </p>
<p> 分享</p>
<h2 id="一、TCP-x2F-IP四层模型介绍"><a href="#一、TCP-x2F-IP四层模型介绍" class="headerlink" title="一、TCP&#x2F;IP四层模型介绍"></a>一、TCP&#x2F;IP四层模型介绍</h2><p>OSI的七层协议体系结构的概念清楚，理论也比较完整，但它既复杂又不实用，ISO制定的OSI参考模型的过于庞大、复杂招致了许多批评。由技术人员自己开发的TCP&#x2F;IP协议栈获得了更为广泛的应用。TCP&#x2F;IP体系结构则不同，它现在已经得到了非常广泛的应用，TCP&#x2F;IP是一个四层的体系结构。</p>
<p>它包含应用层、运输层、网际层和网络接口层（用网际层这个名字是强调这一层是为了解决不同网络的互连问题 ），不过从实质来讲，TCP&#x2F;IP只有最上面的三层，因为最下面的网络接口层基本上和一般的通信链路的功能上没有多大差别.</p>
<h2 id="二、TCP-x2F-IP四层模型"><a href="#二、TCP-x2F-IP四层模型" class="headerlink" title="二、TCP&#x2F;IP四层模型"></a>二、TCP&#x2F;IP四层模型</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601024106315.png" alt="tcp:ip四层.png"></p>
<p>每一层负责不同的功能:</p>
<p>链路层：有时也称作数据链路层或网络接口层，</p>
<p>通常包括操作系统中的设备驱动程序和计算机</p>
<p>中对应的网络接口卡。它们一起处理与电缆(或其他任何传输媒介)的物理接口细节。</p>
<p>网络层：有时也称作互联网层，处理分组在网络中的活动，例如分组的选路。在TCP&#x2F;IP协议族中，网络层协议包括IP协议(网际协议)，ICMP协议(Internet互联网控制报文协议 ，以及IGMP协议(Internet组管理协议 )。</p>
<p>运输层：主要为两台主机上的应用程序提供端到端的通信。在TCP&#x2F;IP 协议族中 ， 有两个互不相同的传输协议 : TCP (传输控制协议) 和UDP (用户数据报协议)。</p>
<p>TCP 为两台主机提供高可靠性的数据通信。它所做的工作包括把应用程序交给它的数据分 成合适的小块交给下面的网络层，确认接收到的分组，设置发送最后确认分组的超时时钟等。由于运输层提供了高可靠性的端到端的通信，因此应用层可以忽略所有这些细节。</p>
<p>而另一方面， UDP则为应用层提供一种非常简单的服务 。 它只是把称作数据报的分组从一台主机发送到另一台主机，但并不保证该数据报能到达另一端。任何必需的可靠 性必须由应用层来提供。 这两种运输层协议分别在不同的应用程序中有不同的用途，这一点将在后面看到。</p>
<p>应用层：负责处理特定的应用程序细节。几乎各种不同的 TCP&#x2F;IP实现都会提供下面这些通用的应用程序:</p>
<p>Telnet 远程登录。</p>
<p>FTP 文件传输协议。</p>
<p>SMTP 简单邮件传送协议。</p>
<p>SNMP 简单网络管理协议。</p>
<h3 id="TCP-x2F-IP协议簇"><a href="#TCP-x2F-IP协议簇" class="headerlink" title="TCP&#x2F;IP协议簇"></a>TCP&#x2F;IP协议簇</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601024134979.png" alt="TCP:IP协议.png"></p>
<h3 id="一次C-x2F-S通信"><a href="#一次C-x2F-S通信" class="headerlink" title="一次C&#x2F;S通信"></a>一次C&#x2F;S通信</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601024158331.png" alt="tcp:ip通信机制.png"></p>
<h1 id="传输层协议"><a href="#传输层协议" class="headerlink" title="传输层协议"></a>传输层协议</h1><p> 阅读 (318213) </p>
<p> 分享</p>
<p>TCP 和 UDP 是两种最为著名的传输层协议，二者都使用 I P 作 为 网 络 层 协 议</p>
<p>尽管 TCP 和 UDP 都使用相同的网络层( IP )， TCP 却向应用层提供与 UDP 完全不同的服务。 TCP 提供一种面向连接的、可靠的字节流服务。</p>
<p>TCP: 传输控制协议,面向连接的协议</p>
<p>面向连接意味着两个使用 TCP 的 应 用 ( 通 常 是 一 个 客 户 和 一 个 服 务 器 ) 在 彼 此 交 换 数 据 之前必须先建立一个 TCP 连 接 。</p>
<p>一对一传输</p>
<h3 id="tcp三次握手"><a href="#tcp三次握手" class="headerlink" title="tcp三次握手"></a>tcp三次握手</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601024398414.jpeg" alt="TCP三次握手.jpeg"></p>
<h3 id="TCP四次断开"><a href="#TCP四次断开" class="headerlink" title="TCP四次断开"></a>TCP四次断开</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601024418282.png" alt="tcp四次断开.png"></p>
<h3 id="TCP包头"><a href="#TCP包头" class="headerlink" title="TCP包头"></a>TCP包头</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601024479086.jpeg" alt="tcp包头.jpeg"></p>
<h3 id="UDP协议"><a href="#UDP协议" class="headerlink" title="UDP协议"></a>UDP协议</h3><p>UDP（User Datagram Protocol），用户数据报协议，是OSI(Open System Interconnection，开放式系统互联) 参考模型中一种无连接的传输层协议，提供面向事务的简单不可靠信息传送服务,UDP提供了无连接通信，适合于一次传输少量数据,UDP报文没有可靠性保证、顺序保证和流量控制字段等，可靠性较差。但是正因为UDP协议的控制选项较少，在数据传输过程中延迟小、数据传输效率高，适合对可靠性要求不高的应用程序，或者可以保障可靠性的应用程序，如DNS、TFTP、SNMP等。</p>
<p>可以一对一、一对多传输、多对一和多对多的交互通信</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601024457747.jpeg" alt="UDP包头.jpeg"></p>
<h3 id="TCP与UDP区别："><a href="#TCP与UDP区别：" class="headerlink" title="TCP与UDP区别："></a>TCP与UDP区别：</h3><p>1、TCP面向连接（如打电话要先拨号建立连接）;UDP是无连接的，即发送数据之前不需要建立连接</p>
<p>2、TCP提供可靠的服务。也就是说，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达;UDP尽最大努力交付，即不保证可靠交付，Tcp通过校验和，重传控制，序号标识，滑动窗口、确认应答实现可靠传输。如丢包时的重发控制，还可以对次序乱掉的分包进行顺序控制。</p>
<p>3、UDP具有较好的实时性，工作效率比TCP高，适用于对高速传输和实时性有较高的通信或广播通信。</p>
<p>4.每一条TCP连接只能是点到点的;UDP支持一对一，一对多，多对一和多对多的交互通信</p>
<p>5、TCP对系统资源要求较多，UDP对系统资源要求较少。</p>
<h1 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h1><p> 阅读 (450309) </p>
<p> 分享</p>
<h2 id="一、IP介绍"><a href="#一、IP介绍" class="headerlink" title="一、IP介绍"></a>一、IP介绍</h2><p>IP是英文Internet Protocol的缩写，意思是“网络之间互连的协议”，也就是为计算机网络相互连接进行通信而设计的协议。在因特网中，它是能使连接到网上的所有计算机网络实现相互通信的一套规则，规定了计算机在因特网上进行通信时应当遵守的规则。任何厂家生产的计算机系统，只要遵守IP协议就可以与因特网互连互通。正是因为有了IP协议，因特网才得以迅速发展成为世界上最大的、开放的计算机通信网络。因此，IP协议也可以叫做“因特网协议”。</p>
<p>IP地址是指互联网协议地址，IP地址是IP协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个逻辑地址。大家日常见到的情况是每台联网的PC上都需要有IP地址，才能正常通信。我们可以把“个人电脑”比作“一台电话”，那么“IP地址”就相当于“电话号码”，而Internet中的路由器，就相当于电信局的“程控式交换机”。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">IP是一个协议，是计算机在网络中互联互通的规则</span><br><span class="line">IP地址是IP实现互联互通的一个策略</span><br></pre></td></tr></table></figure>

<h3 id="IP地址和Mac地址"><a href="#IP地址和Mac地址" class="headerlink" title="IP地址和Mac地址"></a>IP地址和Mac地址</h3><p>IP地址是软件地址，而不是硬件地址。硬件地址被硬编码到网络接口卡(NIC)中，用于在本地 网络中寻找主机。 IP地址让一个网络中的主机能够与另一个网络中的主机通信，而不管这些主机所属的LAN是什么类型的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MAC用于局域网中通信，交换机通过mac地址将数据包转发到正确的计算机</span><br><span class="line">IP用于网络间通信</span><br></pre></td></tr></table></figure>

<h3 id="IP地址分类"><a href="#IP地址分类" class="headerlink" title="IP地址分类"></a>IP地址分类</h3><p>IPV4:32位二进制 以点分割，分为4段十进制数 a.b.c.d</p>
<p>IPV6:128位二进制 以冒号分割,分为8段十六进制数 a🅱️c:d:e:f:g:h</p>
<h2 id="二、IPV4地址"><a href="#二、IPV4地址" class="headerlink" title="二、IPV4地址"></a>二、IPV4地址</h2><p>IPV4地址长 32位，这些位被划分成 4组(称为字节或八位组)，每组8位,每组最大不超过255，我们可使用下面3种方法描述IP地址:</p>
<p>点分十进制表示，如 192.168.0.1。</p>
<p>二进制，如 11000000.10101000.00000000.00000001</p>
<p>十六进制，如 c0.a8.0.1。</p>
<p>上述示例表示的是同一个IP地址。对于IP编址时，十六进制表示没有点分十进制和二进制那样常用，但某些程序确实以十六进制形式存储IP地址， Windows注册表就将机器的IP地址存储为十六进制。</p>
<h3 id="IPV4地址分类"><a href="#IPV4地址分类" class="headerlink" title="IPV4地址分类"></a>IPV4地址分类</h3><p>按照第一段的范围分类</p>
<p>A 1-126</p>
<p>B 128-191</p>
<p>C 192-223</p>
<p>D 224-239</p>
<p>E 240-255</p>
<p>设计因特网的人决定根据网络规模创建网络类型。对于少量包含大量节点的网络，他们创建了A类网络;对于另一种极端情况的网络，他们创建了C类网络，用来指示大量只包含少量节点的网络; 介于超大型和超小型网络之间的是B类网络。所以IPV4五类地址中只有前三类可以分给用户试用，D类是多播地址，E类为保留地址，用于研究。</p>
<p>网络的类型决定了 IP地址将如何划分成网络部分和节点部分</p>
<h3 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h3><p>子网掩码：区分IP地址的网络位和主机位</p>
<p>255.0.0.0</p>
<p>255.255.0.0</p>
<p>255.255.255.0</p>
<p>255.255.255.255</p>
<p>网络位:掩码对应的IP位的二进制部分，全为1的部分是网络位</p>
<p>主机位:掩码对应的IP位的二进制部分，不全为1的部分是主机位</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601024638647.png" alt="网络位与主机位.png"></p>
<h3 id="进制转换方法"><a href="#进制转换方法" class="headerlink" title="进制转换方法"></a>进制转换方法</h3><p>十进制转二进制: 除2取余倒着念</p>
<p>十进制转八进制: 除8取余倒着念</p>
<p>十进制转十六进制: 除16取余倒着念</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601026468125.png" alt="进制转换.png"></p>
<h3 id="8421法则转换法"><a href="#8421法则转换法" class="headerlink" title="8421法则转换法"></a>8421法则转换法</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">把要转换的十进制数按照下列数累加，用的的写1没用的的写0</span><br><span class="line">128      64      32      16    8     4   2   1</span><br><span class="line"></span><br><span class="line">比如：十进制数132转换为二进制</span><br><span class="line">128      64      32      16    8     4   2   1</span><br><span class="line">1         0      0       0     0     1   0   0</span><br><span class="line"></span><br><span class="line">因为132=128+4</span><br><span class="line">所以十进制数132转换为二进制是&quot;10000100</span><br></pre></td></tr></table></figure>

<h3 id="私网地址"><a href="#私网地址" class="headerlink" title="私网地址"></a>私网地址</h3><p>由于互联网的蓬勃发展，IP位址的需求量愈来愈大，使得IP位址的发放愈趋严格，各项资料显示全球IPv4位址可能在2005至2010年间全部发完(实际情况是在2011年2月3日IPv4位地址分配完毕）。</p>
<p>为了解决IP地址不足，又设计了私有地址，这样就可以重复在局域网中使用了，LAN中的用户想上网只需通过PNAT的方式通过地址转换技术就可以上网，保证了公网地址的最大化、最高效应用。</p>
<p>A类地址中私网10.0.0.0–10.255.255.255</p>
<p>B类地址中私网172.16.0.0.0–172.31.255.255</p>
<p>C类地址中私网192.168.0.0–192.168.255.255</p>
<h3 id="PNAT技术"><a href="#PNAT技术" class="headerlink" title="PNAT技术"></a>PNAT技术</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601026081212.png" alt="LAN_NAT_WAN.png"></p>
<h3 id="IP分配原则"><a href="#IP分配原则" class="headerlink" title="IP分配原则"></a>IP分配原则</h3><p>只有A、B、C三类地址可以分配给计算机和网络设备</p>
<p>网络地址相同主机地址必须唯一</p>
<p>网络地址的第一个数字不能为127，保留用来测试连接</p>
<p>网络地址不能全为0，也不能全为1.</p>
<p>主机地址中不能全为0，也不能全为1：主机地址全为0用来表示网络地址，全为1用作广播</p>
<p><strong>ipv4特殊IP，不能使用的IP：</strong></p>
<p>0.0.0.0</p>
<p>255.255.255.255</p>
<p>127.x.x.x</p>
<p>A.0.0.0、A.255.255.255</p>
<p>169.254.0.0–168.254.255.255</p>
<h2 id="三、IPv6地址"><a href="#三、IPv6地址" class="headerlink" title="三、IPv6地址"></a>三、IPv6地址</h2><p>由于IPv4最大的问题在于网络地址资源有限，严重制约了互联网的应用和发展。IPv6的使用，不仅能解决网络地址资源数量的问题，而且也解决了多种接入设备连入互联网的障碍</p>
<p>互联网数字分配机构（IANA）在2016年已向国际互联网工程任务组（IETF）提出建议，要求新制定的国际互联网标准只支持IPv6，不再兼容IPv4。</p>
<h3 id="IPV6组成"><a href="#IPV6组成" class="headerlink" title="IPV6组成"></a>IPV6组成</h3><p>IPv6的地址长度为128位，是IPv4地址长度的4倍。于是IPv4点分十进制格式不再适用，采用十六进制表示。</p>
<h3 id="IPV6分类"><a href="#IPV6分类" class="headerlink" title="IPV6分类"></a>IPV6分类</h3><p>单播地址（Unicast Address）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用来唯一标识一个接口，类似于IPv4中的单播地址。发送到单播地址的数据报文将被传送给此地址所标识的一个接口。</span><br></pre></td></tr></table></figure>

<p>组播地址（Multicast Address）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用来标识一组接口（通常这组接口属于不同的节点），类似于IPv4中的组播地址。发送到组播地址的数据报文被传送给此</span><br><span class="line">地址所标识的所有接口。</span><br></pre></td></tr></table></figure>

<p>任播地址（Anycast Address）</p>
<p>用来标识一组接口（通常这组接口属于不同的节点）。发送到任播地址的数据报文被传送给此地址所标识的一组接口中距离源节点最近（根据使用的路由协议进行度量）的一个接口，一对最近。</p>
<p>单播地址</p>
<p>可聚合的全球单播地址（Aggregatable Global Unicast Addresses）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">可在全球范围内路由和到达的，相当于IPv4里面的global addresses。前三个bit是001</span><br><span class="line"></span><br><span class="line">例如：2000::1:2345:6789:01ab</span><br></pre></td></tr></table></figure>

<p>链路本地地址（Link-Local Addresses）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用于同一个链路上的相邻节点之间通信，相当于IPv4里面的169.254.0.0/16地址。Ipv6的路由器不会转发链路本地地址</span><br><span class="line">的数据包。前10个bit是1111 1110 10，由于最后是64bit的interface ID，所以它的前缀总是FE80::/64</span><br><span class="line"></span><br><span class="line">例如：FE80::1/10</span><br></pre></td></tr></table></figure>

<p>站点本地地址（Site-Local Addresses）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">对于无法访问internet的本地网络，可以使用站点本地地址，这个相当于IPv4里面的private address（10.0.0.0/8,</span><br><span class="line"> 172.16.0.0/12, and 192.168.0.0/16）。它的前10个bit是1111 1110 11，它最后是16bit的Subnet ID和</span><br><span class="line">64bit的interface ID，所以它的前缀是FEC0::/48。</span><br></pre></td></tr></table></figure>

<p>未指定地址（Unspecified address）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0:0:0:0:0:0:0:0 或者::</span><br><span class="line"></span><br><span class="line">当一个有效地址还不能确定，一般用未指定地址作为源地址。未指定地址不能作为一个目标地址来使用。</span><br></pre></td></tr></table></figure>

<p>回环地址（Loopback address）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">回环地址::1用于标识一个回环接口，可以使一个节点可以给自己发送数据包。相当于IPv4的回环地址127.0.0.1</span><br></pre></td></tr></table></figure>

<p>唯一的本地单播地址（ULA，Unique Local IPv6 Unicast Address）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在RFC4193中标准化了一种用来在本地通信中取代单播站点本地地址的地址。ULA拥有固定前缀FC00::/7，后面跟一个</span><br><span class="line">被称为全局ID的40bit随机标识符</span><br></pre></td></tr></table></figure>

<h3 id="IPV6特殊地址"><a href="#IPV6特殊地址" class="headerlink" title="IPV6特殊地址"></a>IPV6特殊地址</h3><p>下面列出一些绝对应该牢记的地址范围，因为我们总是会用到它们。它们都是特殊地址或保留用 于特定目的的地址，但不同于 IPv4， IPv6提供的地址非常多，因此保留一些不会有任何害处。</p>
<p>0:0:0:0:0:0:0:0 (::)相当于 IPv4地址 0.0.0札通常在使用有状态 DHCP配置时，用作主机 的源地址。</p>
<p>0:0:0:0:0:0:0:1 (::1) 相当于 IPv4地址 127.0.0.10</p>
<p>0:0:0:0:0:0:192.168.100.1 在同时支持 IP4和IPv6的网络中，从 IPv4地址转换而来的IPv6地址通常这样书写。</p>
<p>2000::&#x2F;3 全局单播地址范围。</p>
<p>FCOO::厅唯一的本地单播地址范围。</p>
<p>FE80::&#x2F;10 链路本地单播地址范围。</p>
<p>FFOO::&#x2F;8 组播地址范围。</p>
<p>3FFF:FFFF::&#x2F;32 保留举例和编写文档时使用。</p>
<p>2001:0088::&#x2F;32 保留举例和编写文档时使用。</p>
<p>2002::&#x2F;16 保留供 6t04隧道技术使用。 6t04隧道技术是一种从IPv4迁移到IPv6的方法，让IPv6分组能够通过IPv4 网络进行传输，而无需配置显式的隧道。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">IPV6为啥这么多年没广泛应用</span><br><span class="line"></span><br><span class="line">网络黑白名单需要时间去建立，否则网络威胁无法解决。</span><br><span class="line"></span><br><span class="line">目前骨干线路已经全部使用了IPV6地址，随着物联网的出现，IPV6会更快完成替换。</span><br></pre></td></tr></table></figure>

<h2 id="四、VLSM可变长子网掩码"><a href="#四、VLSM可变长子网掩码" class="headerlink" title="四、VLSM可变长子网掩码"></a>四、VLSM可变长子网掩码</h2><p>VLSM(可变长子网掩码) 提供了在一个主类(A类、B类、C类)网络内包含多个子网的能力，可以对一个子网再进行子网划分,使IP地址得到最充分的利用.</p>
<h3 id="划分子网"><a href="#划分子网" class="headerlink" title="划分子网"></a>划分子网</h3><p>就是借用主机号的位充当网络号来扩大网络的个数</p>
<h3 id="VLSM优点"><a href="#VLSM优点" class="headerlink" title="VLSM优点"></a>VLSM优点</h3><p>VLSM技术可以避免固定长度子网掩码浪费地址空间的问题。</p>
<p>提高带宽利用率</p>
<p>实现LAN中的网络隔离，更加安全。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/25/1601026370058.png" alt="VLSM.png"></p>
]]></content>
  </entry>
  <entry>
    <title>zutuanxue-部署高可用集群</title>
    <url>/2022/11/15/zutuanxue-%E9%83%A8%E7%BD%B2%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>企业级监控系统-Zabbix</title>
    <url>/2022/11/12/%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F-Zabbix/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>zutuanxue-容器监控-Prometheus</title>
    <url>/2022/11/15/zutuanxue-%E5%AE%B9%E5%99%A8%E7%9B%91%E6%8E%A7-Prometheus/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>容器监控-Prometheus</title>
    <url>/2022/11/12/%E5%AE%B9%E5%99%A8%E7%9B%91%E6%8E%A7-Prometheus/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>思科CCIE-Wireless-v3.0-400-351学习指南英文原版</title>
    <url>/2022/11/17/%E6%80%9D%E7%A7%91CCIE-Wireless-v3-0-400-351%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97%E8%8B%B1%E6%96%87%E5%8E%9F%E7%89%88/</url>
    <content><![CDATA[<p><object data="思科CCIE-Wireless-400-351学习指南英文原版.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>构建可视化数据分析系统-ELK</title>
    <url>/2022/11/12/%E6%9E%84%E5%BB%BA%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E7%B3%BB%E7%BB%9F-ELK/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>思科CCNP-CCIE-Security-Core-SCOR-350-701官方认证指南</title>
    <url>/2022/11/17/%E6%80%9D%E7%A7%91CCNP-CCIE-Security-Core-SCOR-350-701%E5%AE%98%E6%96%B9%E8%AE%A4%E8%AF%81%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>数据安全之企业存储</title>
    <url>/2022/11/12/%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E4%B9%8B%E4%BC%81%E4%B8%9A%E5%AD%98%E5%82%A8/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>端到端qos网络设计</title>
    <url>/2022/11/17/%E7%AB%AF%E5%88%B0%E7%AB%AFqos%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>网络常见问题与故障1000例</title>
    <url>/2022/11/17/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E6%95%85%E9%9A%9C1000%E4%BE%8B/</url>
    <content><![CDATA[<p><object data="网络常见问题与故障1000例.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>虚拟化之KVM</title>
    <url>/2022/11/12/%E8%99%9A%E6%8B%9F%E5%8C%96%E4%B9%8BKVM/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>计算机网络基础</title>
    <url>/2022/11/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-10</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-1</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-11</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-12</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-13</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-14</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-15</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-17</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-16</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-18</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-19</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-2</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-3</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-5</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-4</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-6</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-8</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-9</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-1</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>zutuanxue-MySQL数据库实战</title>
    <url>/2022/11/15/zutuanxue-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[<h1 id="数据库介绍"><a href="#数据库介绍" class="headerlink" title="数据库介绍"></a>数据库介绍</h1><p> 阅读 (127201) </p>
<p> 分享</p>
<p>数据库(Database)是按照数据结构来组织、存储和管理数据的仓库，它产生于距今六十多年前，随着信息技术和市场的发展，特别是二十世纪九十年代以后，数据管理不再仅仅是存储和管理数据，而转变成用户所需要的各种数据管理的方式。数据库有很多种类型，从最简单的存储有各种数据的表格到能够进行海量数据存储的大型数据库系统都在各个方面得到了广泛的应用。</p>
<p>在信息化社会，充分有效地管理和利用各类信息资源，是进行科学研究和决策管理的前提条件。数据库技术是管理信息系统、办公自动化系统、决策支持系统等各类信息系统的核心部分，是进行科学研究和决策管理的重要技术手段。</p>
<h2 id="一、数据库管理系统"><a href="#一、数据库管理系统" class="headerlink" title="一、数据库管理系统"></a>一、数据库管理系统</h2><h3 id="1-1、数据存储方式"><a href="#1-1、数据存储方式" class="headerlink" title="1.1、数据存储方式"></a>1.1、数据存储方式</h3><p>计算机数据（Data）的存储一般以硬盘为数据存储空间资源，从而保证计算机内的数据能够持续保存。对于数据的处理，一般会采用数据库相关的技术进行处理，从而保证数据处理的高效性。</p>
<p>采用数据库的管理模式不仅提高了数据的存储效率，而且在存储的层面上提高了数据的安全性。通过分类的存储模式让数据管理更加安全便捷，更能实现对数据的调用和对比，并且方便查询等操作的使用。</p>
<h3 id="1-2、数据库管理系统"><a href="#1-2、数据库管理系统" class="headerlink" title="1.2、数据库管理系统"></a>1.2、数据库管理系统</h3><p><strong>常见的数据库管理系统：</strong></p>
<p>MySQL:开源免费的数据库，小型的数据库。已经被Oracle收购了，MySQL6.x版本也开始收费。</p>
<p>Oracle:收费的大型数据库，Oracle公司的产品。Oracle收购SUN公司，收购MYSQL。</p>
<p>DB2:IBM公司的数据库产品,收费的。常应用在银行系统中.</p>
<p>SQLServer:MicroSoft 公司收费的中型的数据库。C#、.net等语言常使用。</p>
<p>SyBase:已经淡出历史舞台。提供了一个非常专业数据建模的工具PowerDesigner。</p>
<p>SQLite:嵌入式的小型数据库，应用在手机端。</p>
<p>Java常用的数据库:MySQL，Oracle。</p>
<p>Python常用的数据库:MySQL。</p>
<h3 id="1-3、数据库与数据库管理系统关系"><a href="#1-3、数据库与数据库管理系统关系" class="headerlink" title="1.3、数据库与数据库管理系统关系"></a>1.3、数据库与数据库管理系统关系</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185856048.png" alt="image20200128210246764.png"></p>
<h2 id="2、数据库"><a href="#2、数据库" class="headerlink" title="2、数据库"></a>2、数据库</h2><p>数据库就是存储数据的仓库，由数据库表组成，其本质是一个文件系统，数据库按照特定的格式将数据存储起来，用户可以对数据库中的数据进行增加，修改，删除及查询操作。</p>
<h3 id="2-1、数据库表"><a href="#2-1、数据库表" class="headerlink" title="2.1、数据库表"></a>2.1、数据库表</h3><p>数据库中以表为组织单位存储数据。</p>
<p>数据库表由：表名、表字段、表记录构成</p>
<p><strong>如：</strong></p>
<p>在学生档案中，学生信息（<strong>数据库表</strong>）是由学号、姓名、性别、年龄、籍贯、院系、联系电话（<strong>表中字段</strong>）等特征组成的，那么这些具体的特征值所构成的一条记录就是一个学生的信息数据，例如“2016010102，张三，男，26，山西，计算机学院，18513232232”（<strong>记录</strong>）。</p>
<h3 id="2-2、数据库表记录"><a href="#2-2、数据库表记录" class="headerlink" title="2.2、数据库表记录"></a>2.2、数据库表记录</h3><p>根据表字段所规定的数据类型，我们可以向其中填入一条条的数据，而表中的每条数据类似类的实例对象。表中的一行一行的信息我们称之为记录。</p>
<h4 id="2-2-1、数据库"><a href="#2-2-1、数据库" class="headerlink" title="2.2.1、数据库"></a>2.2.1、数据库</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185877802.png" alt="image20200128212446704.png"></p>
<h4 id="2-2-2、数据库表结构"><a href="#2-2-2、数据库表结构" class="headerlink" title="2.2.2、数据库表结构"></a>2.2.2、数据库表结构</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185890762.png" alt="image20200128212610860.png"></p>
<h4 id="2-2-3、记录"><a href="#2-2-3、记录" class="headerlink" title="2.2.3、记录"></a>2.2.3、记录</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603185901929.png" alt="image20200128212711794.png"></p>
<h1 id="MySql安装与使用"><a href="#MySql安装与使用" class="headerlink" title="MySql安装与使用"></a>MySql安装与使用</h1><p> 阅读 (156474) </p>
<p> 分享</p>
<p>mysql是目前最流行的关系型数据库管理系统,在WEB应用方面MySQL是最好的RDBMS(Relational Database Management System：关系数据库管理系统)应用软件之一。</p>
<p>MySQL是非常灵活的一款数据库，虽然它不是绝对完美，但它的灵活足够适应很多高要求的环境。为了发挥MySQL的性能并很好的使用它，我们就得先了解其设计。MySQL的灵活主要体现在我们可以通过不同的配置使他在不同的硬件上都能运行的很好。但是MySQL最重要，与众不同的特性是它的存储引擎架构，这种架构将查询处理及其他系统任务和数据的存储&#x2F;提取相分离。</p>
<h2 id="一、mysql概述"><a href="#一、mysql概述" class="headerlink" title="一、mysql概述"></a>一、mysql概述</h2><h3 id="1-1、关系型数据库"><a href="#1-1、关系型数据库" class="headerlink" title="1.1、关系型数据库"></a>1.1、关系型数据库</h3><p>关系型数据库天然就是二维表格，因此存储在数据表的行和列中。数据表可以彼此关联协作存储，也很容易提取数据。</p>
<h3 id="1-2、MySQL数据库"><a href="#1-2、MySQL数据库" class="headerlink" title="1.2、MySQL数据库"></a>1.2、MySQL数据库</h3><p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB公司开发，目前属于Oracle公司。</p>
<p>MySQL可将数据保存在不同的表中，而不是将所有数据放在一个大的仓库内，从而加快了访问速度并提高了灵活性。</p>
<p>MySQL 使用了标准的 SQL 语言形式。支持大型的数据库，可以处理拥有上千万条记录的大型数据库。MySQL 还可用于多种系统中，且支持多种语言。</p>
<h3 id="1-3、RDBMS术语"><a href="#1-3、RDBMS术语" class="headerlink" title="1.3、RDBMS术语"></a>1.3、RDBMS术语</h3><p>数据库：数据库是一些关联表的集合。</p>
<p>数据表：表是数据的矩阵。在一个数据库中的表看起来像一个简单的电子表格。</p>
<p>列：一列（数据元素）包含了相同的数据，例如邮政编码的数据。</p>
<p>行：一行（&#x3D;元组，或者记录）是一组相关的数据，例如一条用户订阅的数据。</p>
<p>亢余：存储两倍数据，亢余降低了性能，但是提高了数据的安全性。</p>
<p>主键：主键是唯一的，一个数据表中只能够包含一个主键，你可以使用主键来查询数据。</p>
<p>外键：外键用于关联两个表。</p>
<p>复合键：复合键（组合键）将多个列作为一个索引键，一般用于复合索引。</p>
<p>索引：使用索引可快速访问数据库表中的特定信息。索引是对数据库表中一列或者多列的值进行排序的一种结构。类似于书籍的目录。</p>
<h3 id="1-4、mysql下载"><a href="#1-4、mysql下载" class="headerlink" title="1.4、mysql下载"></a>1.4、mysql下载</h3><p><a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186097183.png" alt="image20200223135527926.png"></p>
<p>点击“Download”后，我们要先登录Oracle，才能进行下载。</p>
<h2 id="2、mysql安装"><a href="#2、mysql安装" class="headerlink" title="2、mysql安装"></a>2、mysql安装</h2><h3 id="2-1、指定安装文件位置"><a href="#2-1、指定安装文件位置" class="headerlink" title="2.1、指定安装文件位置"></a>2.1、指定安装文件位置</h3><p>将mysql安装包放到&#x2F;usr&#x2F;local&#x2F;下面</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186112844.png" alt="image20200223011252870.png"></p>
<h3 id="2-2、解压"><a href="#2-2、解压" class="headerlink" title="2.2、解压"></a>2.2、解压</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue local]# xz -d mysql-8.0.17-linux-glibc2.12-x86_64.tar.xz </span><br><span class="line">[root@zutuanxue local]# tar -xvf mysql-8.0.17-linux-glibc2.12-x86_64.tar </span><br></pre></td></tr></table></figure>

<h3 id="2-3、改名"><a href="#2-3、改名" class="headerlink" title="2.3、改名"></a>2.3、改名</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue local]# mv mysql-8.0.17-linux-glibc2.12-x86_64 mysql</span><br></pre></td></tr></table></figure>

<h3 id="2-4、创建用户组"><a href="#2-4、创建用户组" class="headerlink" title="2.4、创建用户组"></a>2.4、创建用户组</h3><p>mysql用户组、mysql用户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue local]# groupadd mysql</span><br><span class="line">[root@zutuanxue local]# useradd -r -g mysql mysql</span><br><span class="line">[root@zutuanxue local]# passwd mysql</span><br><span class="line">#更改密码：Ww1985929wW</span><br></pre></td></tr></table></figure>

<h3 id="2-5、修改MySQL配置文件"><a href="#2-5、修改MySQL配置文件" class="headerlink" title="2.5、修改MySQL配置文件"></a>2.5、修改MySQL配置文件</h3><p>&#x2F;etc&#x2F;my.cnf</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># For advice on how to change settings please see</span><br><span class="line"># http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html</span><br><span class="line"># *** DO NOT EDIT THIS FILE. It&#x27;s a template which will be copied to the</span><br><span class="line"># *** default location during install, and will be replaced if you</span><br><span class="line"># *** upgrade to a newer version of MySQL.</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size = 128M</span><br><span class="line"></span><br><span class="line"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="line"># changes to the binary log between backups.</span><br><span class="line"># log_bin</span><br><span class="line"></span><br><span class="line"># These are commonly set, remove the # and set as required.</span><br><span class="line">basedir = /usr/local/mysql</span><br><span class="line">datadir = /usr/local/mysql/data</span><br><span class="line">port = 3306</span><br><span class="line"># server_id = .....</span><br><span class="line">socket = /tmp/mysql.sock</span><br><span class="line">character-set-server = utf8</span><br><span class="line">skip-name-resolve</span><br><span class="line">log-error = /usr/local/mysql/data/error.log</span><br><span class="line">pid-file = /usr/local/mysql/data/mysql.pid</span><br><span class="line"></span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size = 128M</span><br><span class="line"># sort_buffer_size = 2M</span><br><span class="line"># read_rnd_buffer_size = 2M </span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br></pre></td></tr></table></figure>

<h3 id="2-6、创建data文件夹"><a href="#2-6、创建data文件夹" class="headerlink" title="2.6、创建data文件夹"></a>2.6、创建data文件夹</h3><p>data文件夹是用于存储数据库文件，他的位置是在mysql目录下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# mkdir data</span><br></pre></td></tr></table></figure>

<h3 id="2-7、更改mysql目录权限"><a href="#2-7、更改mysql目录权限" class="headerlink" title="2.7、更改mysql目录权限"></a>2.7、更改mysql目录权限</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# chown -R mysql .</span><br><span class="line">[root@zutuanxue mysql]# chgrp -R mysql .</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186134688.png" alt="image20200223012815486.png"></p>
<h3 id="2-8、初始化数据库"><a href="#2-8、初始化数据库" class="headerlink" title="2.8、初始化数据库"></a>2.8、初始化数据库</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data</span><br></pre></td></tr></table></figure>

<p>执行完后查看初始密码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# vim /usr/local/mysql/data/error.log</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186163795.png" alt="image20200223013228179.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186172227.png" alt="image20200223182708100.png"></p>
<h3 id="2-9、启动mysql服务"><a href="#2-9、启动mysql服务" class="headerlink" title="2.9、启动mysql服务"></a>2.9、启动mysql服务</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server start</span><br><span class="line">Starting MySQL... SUCCESS! </span><br></pre></td></tr></table></figure>

<h3 id="2-10、修改root密码"><a href="#2-10、修改root密码" class="headerlink" title="2.10、修改root密码"></a>2.10、修改root密码</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./bin/mysql -uroot -prj%-:yqHb98g</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186189059.png" alt="image20200223014851493.png"></p>
<p><strong>修改密码：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;Root123456&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br></pre></td></tr></table></figure>

<h2 id="3、mysql操作"><a href="#3、mysql操作" class="headerlink" title="3、mysql操作"></a>3、mysql操作</h2><h3 id="3-1、服务器操作"><a href="#3-1、服务器操作" class="headerlink" title="3.1、服务器操作"></a>3.1、服务器操作</h3><p>启动、停止、重启</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server restart</span><br><span class="line">Shutting down MySQL. SUCCESS! </span><br><span class="line">Starting MySQL.. SUCCESS! </span><br><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server stop</span><br><span class="line">Shutting down MySQL.. SUCCESS! </span><br><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server start</span><br><span class="line">Starting MySQL.. SUCCESS! </span><br></pre></td></tr></table></figure>

<h3 id="3-2、设置远程连接"><a href="#3-2、设置远程连接" class="headerlink" title="3.2、设置远程连接"></a>3.2、设置远程连接</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create user &#x27;root&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;Root123456&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant all on *.* to &#x27;root&#x27;@&#x27;%&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>遇到问题：</strong></p>
<p>Can’t connect to MySQL server on ‘192.168.1.121’ (61)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# systemctl stop firewalld.service </span><br><span class="line">[root@zutuanxue mysql]# firewall-cmd --state</span><br></pre></td></tr></table></figure>

<h2 id="4、mysql卸载"><a href="#4、mysql卸载" class="headerlink" title="4、mysql卸载"></a>4、mysql卸载</h2><h3 id="4-1、停止mysql服务"><a href="#4-1、停止mysql服务" class="headerlink" title="4.1、停止mysql服务"></a>4.1、停止mysql服务</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# ./support-files/mysql.server stop</span><br><span class="line">Shutting down MySQL.... SUCCESS! </span><br></pre></td></tr></table></figure>

<h3 id="4-2、查找所有mysql相关文件夹"><a href="#4-2、查找所有mysql相关文件夹" class="headerlink" title="4.2、查找所有mysql相关文件夹"></a>4.2、查找所有mysql相关文件夹</h3><p>查找</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# find / -name mysql</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186208888.png" alt="image20200223024128126.png"></p>
<p>删除所有查出来的文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# rm -rf /var/lib/selinux/targeted/active/modules/100/mysql</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<h3 id="4-3、删除配置文件"><a href="#4-3、删除配置文件" class="headerlink" title="4.3、删除配置文件"></a>4.3、删除配置文件</h3><p>配置文件一般有&#x2F;etc&#x2F;my.cnf 或&#x2F;etc&#x2F;init.d&#x2F;mysql.server，</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# rm -f /etc/my.cnf</span><br><span class="line">[root@zutuanxue mysql]# rm -rf /etc/init.d/mysql.server</span><br></pre></td></tr></table></figure>

<h3 id="4-4、删除用户组"><a href="#4-4、删除用户组" class="headerlink" title="4.4、删除用户组"></a>4.4、删除用户组</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue mysql]# userdel mysql</span><br><span class="line">[root@zutuanxue mysql]# id mysql</span><br><span class="line">id: “mysql”：无此用户</span><br></pre></td></tr></table></figure>

<h1 id="MySql客户端"><a href="#MySql客户端" class="headerlink" title="MySql客户端"></a>MySql客户端</h1><p> 阅读 (216008) </p>
<p> 分享</p>
<p>Navicat for MySQL是一套管理和开发MySQL或MariaDB的理想解决方案，支持单一程序，可同时连接到MySQL和MariaDB。这个功能齐备的前端软件为数据库管理、开发和维护提供了直观而强大的图形界面，给MySQL或MariaDB新手以及专业人士提供了一组全面的工具。</p>
<h2 id="1、Navicat-for-MySQL下载与安装"><a href="#1、Navicat-for-MySQL下载与安装" class="headerlink" title="1、Navicat for MySQL下载与安装"></a>1、Navicat for MySQL下载与安装</h2><h3 id="1-1、下载"><a href="#1-1、下载" class="headerlink" title="1.1、下载"></a>1.1、下载</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://www.navicat.com.cn/download/navicat-for-mysql</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186370700.png" alt="image20200222233257400.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186384589.png" alt="image20200222233338007.png"></p>
<h3 id="1-2、下载完成"><a href="#1-2、下载完成" class="headerlink" title="1.2、下载完成"></a>1.2、下载完成</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186400724.png" alt="image20200222233455188.png"></p>
<h3 id="1-3、安装"><a href="#1-3、安装" class="headerlink" title="1.3、安装"></a>1.3、安装</h3><p><strong>右击“navicat150_mysql_cs_x64.exe”，以管理员身份运行，选择“是”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186444899.png" alt="image20200222233702941.png"></p>
<p><strong>跳出安装程序对话框，选择“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186460999.png" alt="image20200222233952780.png"></p>
<p><strong>选择“我同意”，继续“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186477455.png" alt="image20200222234125462.png"></p>
<p><strong>选择“安装路径”，继承“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186494146.png" alt="image20200222234450664.png"></p>
<p><strong>选择“快捷方式路径”，继续“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186509787.png" alt="image20200222234354406.png"></p>
<p><strong>选择在“桌面创建快捷方式”，继续“下一步”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186527639.png" alt="image20200222234708924.png"></p>
<p><strong>进入“装备安装”界面，点击“安装”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186542299.png" alt="image20200222234904299.png"></p>
<p><strong>进入“安装”界面，直到跳出“完成”界面</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186557642.png" alt="image20200222235023235.png"></p>
<p><strong>点击“完成”，安装成功</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186572803.png" alt="image20200222235103254.png"></p>
<h3 id="1-4、Navicat-for-MySQL连接MySQL数据库"><a href="#1-4、Navicat-for-MySQL连接MySQL数据库" class="headerlink" title="1.4、Navicat for MySQL连接MySQL数据库"></a>1.4、Navicat for MySQL连接MySQL数据库</h3><h4 id="1-4-1、打开Navicat-for-MySQL"><a href="#1-4-1、打开Navicat-for-MySQL" class="headerlink" title="1.4.1、打开Navicat for MySQL"></a>1.4.1、打开Navicat for MySQL</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186588911.png" alt="image20200222235353143.png"></p>
<h4 id="1-4-2、创建新连接"><a href="#1-4-2、创建新连接" class="headerlink" title="1.4.2、创建新连接"></a>1.4.2、创建新连接</h4><p><strong>连接-&gt;MySQL</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186603371.png" alt="image20200222235549717.png"></p>
<p><strong>文件-&gt;新建连接-&gt;MySQL</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186618860.png" alt="image20200222235719188.png"></p>
<p><strong>新建连接对话框，输入对应信息，点击“测试连接”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186632233.png" alt="image20200223000045104.png"></p>
<p><strong>连接成功</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186647147.png" alt="image20200223000156896.png"></p>
<p><strong>确认连接后如下：</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186661203.png" alt="image20200223000512002.png"></p>
<h2 id="2、Navicat-for-MySQL操作-上"><a href="#2、Navicat-for-MySQL操作-上" class="headerlink" title="2、Navicat for MySQL操作-上"></a>2、Navicat for MySQL操作-上</h2><h3 id="2-1、数据库操作"><a href="#2-1、数据库操作" class="headerlink" title="2.1、数据库操作"></a>2.1、数据库操作</h3><h4 id="2-2-1、创建数据库"><a href="#2-2-1、创建数据库" class="headerlink" title="2.2.1、创建数据库"></a>2.2.1、创建数据库</h4><p><strong>右击“MySQL连接”，选择“新建数据库”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186683271.png" alt="image20200223001205072.png"></p>
<h4 id="2-2-2、删除数据库"><a href="#2-2-2、删除数据库" class="headerlink" title="2.2.2、删除数据库"></a>2.2.2、删除数据库</h4><p><strong>右击想要删除的数据库，选择“删除数据库”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186700884.png" alt="image20200223001414043.png"></p>
<h3 id="2-2、数据库表操作"><a href="#2-2、数据库表操作" class="headerlink" title="2.2、数据库表操作"></a>2.2、数据库表操作</h3><h4 id="2-2-1、新建表"><a href="#2-2-1、新建表" class="headerlink" title="2.2.1、新建表"></a>2.2.1、新建表</h4><p><strong>右击“表”，选择“新建表”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186715524.png" alt="image20200223001746104.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186727307.png" alt="image20200223002004707.png"></p>
<h2 id="3、Navicat-for-MySQL操作-下"><a href="#3、Navicat-for-MySQL操作-下" class="headerlink" title="3、Navicat for MySQL操作-下"></a>3、Navicat for MySQL操作-下</h2><h3 id="3-1、数据库表操作"><a href="#3-1、数据库表操作" class="headerlink" title="3.1、数据库表操作"></a>3.1、数据库表操作</h3><h4 id="3-1-1、操作表中结构与记录"><a href="#3-1-1、操作表中结构与记录" class="headerlink" title="3.1.1、操作表中结构与记录"></a>3.1.1、操作表中结构与记录</h4><p><strong>表结构（表的修改）</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186745243.png" alt="image20200223002415540.png"></p>
<p><strong>表记录（记录的增加、删除、修改、查看）</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186756221.png" alt="image20200223002826369.png"></p>
<h4 id="3-1-2、删除表"><a href="#3-1-2、删除表" class="headerlink" title="3.1.2、删除表"></a>3.1.2、删除表</h4><p><strong>右击想删除的表，选择“删除表”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186773023.png" alt="image20200223003000136.png"></p>
<h3 id="3-2、命令列窗口的打开"><a href="#3-2、命令列窗口的打开" class="headerlink" title="3.2、命令列窗口的打开"></a>3.2、命令列窗口的打开</h3><p><strong>右击连接&#x2F;数据库，选择“命令列窗口”</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186786858.png" alt="image20200223003312998.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186796440.png" alt="image20200223003438588.png"></p>
<p>相当于</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603186810087.png" alt="image20200223003552091.png"></p>
<h1 id="SQL介绍"><a href="#SQL介绍" class="headerlink" title="SQL介绍"></a>SQL介绍</h1><p> 阅读 (134527) </p>
<p> 分享</p>
<p>结构化查询语言是高级的非过程化编程语言，允许用户在高层数据结构上工作。它不要求用户指定对数据的存放方法，也不需要用户了解具体的数据存放方式，所以具有完全不同底层结构的不同数据库系统, 可以使用相同的结构化查询语言作为数据输入与管理的接口。结构化查询语言语句可以嵌套，这使它具有极大的灵活性和强大的功能。</p>
<h2 id="一、SQL概述"><a href="#一、SQL概述" class="headerlink" title="一、SQL概述"></a>一、SQL概述</h2><h3 id="1-1、什么是SQL"><a href="#1-1、什么是SQL" class="headerlink" title="1.1、什么是SQL"></a>1.1、什么是SQL</h3><p>结构化查询语言(Structured Query Language)简称SQL，是一种特殊目的的编程语言，是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统；同时也是数据库脚本文件的扩展名。</p>
<h3 id="1-2、SQL作用"><a href="#1-2、SQL作用" class="headerlink" title="1.2、SQL作用"></a>1.2、SQL作用</h3><p>是一种所有关系型数据库的查询规范，不同的数据库都支持。</p>
<p>通用的数据库操作语言，可以用在不同的数据库中。</p>
<p>不同的数据库 SQL 语句有一些区别</p>
<h2 id="二、SQL分类"><a href="#二、SQL分类" class="headerlink" title="二、SQL分类"></a>二、SQL分类</h2><p><strong>数据查询语言（DQL:Data Query Language）：</strong></p>
<p>其语句，也称为“数据检索语句”，用以从表中获得数据，确定数据怎样在应用程序给出。保留字SELECT是DQL（也是所有SQL）用得最多的动词，其他DQL常用的保留字有WHERE，ORDER BY，GROUP BY和HAVING。这些DQL保留字常与其他类型的SQL语句一起使用。</p>
<p><strong>数据操作语言</strong>（<strong>DML</strong>：<strong>Data Manipulation Language</strong>）：</p>
<p>其语句包括动词INSERT，UPDATE和DELETE。它们分别用于添加，修改和删除表中的行。也称为动作查询语言。</p>
<p><strong>事务处理语言（TPL）：</strong></p>
<p>它的语句能确保被DML语句影响的表的所有行及时得以更新。TPL语句包括BEGIN TRANSACTION，COMMIT和ROLLBACK。</p>
<p>**数据定义语言（*<em>DDL*<em>）：</em></em></p>
<p>其语句包括动词CREATE和DROP。在数据库中创建新表或删除表（CREAT TABLE 或 DROP TABLE）；为表加入索引等。DDL包括许多与人数据库目录中获得数据有关的保留字。它也是动作查询的一部分。</p>
<p><strong>指针控制语言（CCL）：</strong></p>
<p>它的语句，像DECLARE CURSOR，FETCH INTO和UPDATE WHERE CURRENT用于对一个或多个表单独立的操作。</p>
<p><strong>数据控制语言</strong>（<strong>DCL</strong>）：</p>
<p>它的语句通过GRANT或REVOKE获得许可，确定单个用户和用户组对数据库对象的访问。某些RDBMS可用GRANT或REVOKE控制对表单个列的访问。</p>
<h2 id="三、MySql语法"><a href="#三、MySql语法" class="headerlink" title="三、MySql语法"></a>三、MySql语法</h2><p>每条语句以分号（;）结尾。</p>
<p>SQL 中不区分大小写，关键字中认为大写和小写是一样的</p>
<p>3种注释方法：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187016784.png" alt="image20200128220353753.png"></p>
<h1 id="DDL语句"><a href="#DDL语句" class="headerlink" title="DDL语句"></a>DDL语句</h1><p> 阅读 (121140) </p>
<p> 分享</p>
<p>数据库模式定义语言DDL(Data Definition Language)，是用于描述数据库中要存储的现实世界实体的语言。</p>
<p>数据库模式定义语言并非程序设计语言，DDL数据库模式定义语言是SQL语言（结构化查询语言）的组成部分。DDL描述的模式，必须由计算机软件进行编译，转换为便于计算机存储、查询和操纵的格式，完成这个转换工作的程序称为模式编译器。</p>
<p>模式编译器处理模式定义主要产生两种类型的数据：数据字典以及数据类型和结构定义。</p>
<h2 id="一、数据库操作-上"><a href="#一、数据库操作-上" class="headerlink" title="一、数据库操作-上"></a>一、数据库操作-上</h2><h3 id="1-1、DDL概述"><a href="#1-1、DDL概述" class="headerlink" title="1.1、DDL概述"></a>1.1、DDL概述</h3><p>DDL（data definition language）数据库定义语言：其实就是我们在创建表的时候用到的一些sql，比如说：CREATE、ALTER、DROP等。DDL主要是用在操作数据库，定义或改变数据库表的结构，数据类型等初始化工作。</p>
<h3 id="1-2、创建数据库"><a href="#1-2、创建数据库" class="headerlink" title="1.2、创建数据库"></a>1.2、创建数据库</h3><p><strong>直接创建数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create database 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>判断数据库是否已经存在，不存在则创建</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create database if not exists 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>创建数据库并指定字符集</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create database 数据库名 character set 字符集;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#创建数据库</span><br><span class="line">mysql&gt; create database zutuanxue;</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)#创建成功</span><br><span class="line">#在次创建同名数据库</span><br><span class="line">mysql&gt; create database zutuanxue;</span><br><span class="line">Can&#x27;t create database &#x27;zutuanxue&#x27;; database exists #无法创建数据库“zutuanxue”；数据库存在</span><br><span class="line">#判断是否存在，如果不存在则创建数据库zutuanxue</span><br><span class="line">mysql&gt; create database if not exists zutuanxue;</span><br><span class="line">Query OK, 1 rows affected, 1 warnings (0.01 秒)</span><br><span class="line">#创建数据库并指定字符集为 gbk</span><br><span class="line">mysql&gt; create database zutuanxue01 default character set gbk;</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> default 可以不要</p>
<p><strong>补充：了解字符集查看</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#查看字符集</span><br><span class="line">mysql&gt; show character set;</span><br><span class="line">+----------+---------------------------------+---------------------+--------+</span><br><span class="line">| Charset  | Description                     | Default collation   | Maxlen |</span><br><span class="line">+----------+---------------------------------+---------------------+--------+</span><br><span class="line">| armscii8 | ARMSCII-8 Armenian              | armscii8_general_ci | 1      |</span><br><span class="line">| ascii    | US ASCII                        | ascii_general_ci    | 1      |</span><br><span class="line">| big5     | Big5 Traditional Chinese        | big5_chinese_ci     | 2      |</span><br><span class="line">| binary   | Binary pseudo charset           | binary              | 1      |</span><br><span class="line">| cp1250   | Windows Central European        | cp1250_general_ci   | 1      |</span><br><span class="line">| cp1251   | Windows Cyrillic                | cp1251_general_ci   | 1      |</span><br><span class="line">| cp1256   | Windows Arabic                  | cp1256_general_ci   | 1      |</span><br><span class="line">| cp1257   | Windows Baltic                  | cp1257_general_ci   | 1      |</span><br><span class="line">| cp850    | DOS West European               | cp850_general_ci    | 1      |</span><br><span class="line">| cp852    | DOS Central European            | cp852_general_ci    | 1      |</span><br><span class="line">| cp866    | DOS Russian                     | cp866_general_ci    | 1      |</span><br><span class="line">| cp932    | SJIS for Windows Japanese       | cp932_japanese_ci   | 2      |</span><br><span class="line">| dec8     | DEC West European               | dec8_swedish_ci     | 1      |</span><br><span class="line">| eucjpms  | UJIS for Windows Japanese       | eucjpms_japanese_ci | 3      |</span><br><span class="line">| euckr    | EUC-KR Korean                   | euckr_korean_ci     | 2      |</span><br><span class="line">| gb18030  | China National Standard GB18030 | gb18030_chinese_ci  | 4      |</span><br><span class="line">| gb2312   | GB2312 Simplified Chinese       | gb2312_chinese_ci   | 2      |</span><br><span class="line">| gbk      | GBK Simplified Chinese          | gbk_chinese_ci      | 2      |</span><br><span class="line">| geostd8  | GEOSTD8 Georgian                | geostd8_general_ci  | 1      |</span><br><span class="line">| greek    | ISO 8859-7 Greek                | greek_general_ci    | 1      |</span><br><span class="line">| hebrew   | ISO 8859-8 Hebrew               | hebrew_general_ci   | 1      |</span><br><span class="line">| hp8      | HP West European                | hp8_english_ci      | 1      |</span><br><span class="line">| keybcs2  | DOS Kamenicky Czech-Slovak      | keybcs2_general_ci  | 1      |</span><br><span class="line">| koi8r    | KOI8-R Relcom Russian           | koi8r_general_ci    | 1      |</span><br><span class="line">| koi8u    | KOI8-U Ukrainian                | koi8u_general_ci    | 1      |</span><br><span class="line">| latin1   | cp1252 West European            | latin1_swedish_ci   | 1      |</span><br><span class="line">| latin2   | ISO 8859-2 Central European     | latin2_general_ci   | 1      |</span><br><span class="line">| latin5   | ISO 8859-9 Turkish              | latin5_turkish_ci   | 1      |</span><br><span class="line">| latin7   | ISO 8859-13 Baltic              | latin7_general_ci   | 1      |</span><br><span class="line">| macce    | Mac Central European            | macce_general_ci    | 1      |</span><br><span class="line">| macroman | Mac West European               | macroman_general_ci | 1      |</span><br><span class="line">| sjis     | Shift-JIS Japanese              | sjis_japanese_ci    | 2      |</span><br><span class="line">| swe7     | 7bit Swedish                    | swe7_swedish_ci     | 1      |</span><br><span class="line">| tis620   | TIS620 Thai                     | tis620_thai_ci      | 1      |</span><br><span class="line">| ucs2     | UCS-2 Unicode                   | ucs2_general_ci     | 2      |</span><br><span class="line">| ujis     | EUC-JP Japanese                 | ujis_japanese_ci    | 3      |</span><br><span class="line">| utf16    | UTF-16 Unicode                  | utf16_general_ci    | 4      |</span><br><span class="line">| utf16le  | UTF-16LE Unicode                | utf16le_general_ci  | 4      |</span><br><span class="line">| utf32    | UTF-32 Unicode                  | utf32_general_ci    | 4      |</span><br><span class="line">| utf8     | UTF-8 Unicode                   | utf8_general_ci     | 3      |</span><br><span class="line">| utf8mb4  | UTF-8 Unicode                   | utf8mb4_0900_ai_ci  | 4      |</span><br><span class="line">+----------+---------------------------------+---------------------+--------+</span><br><span class="line">41 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="1-3、查看数据库"><a href="#1-3、查看数据库" class="headerlink" title="1.3、查看数据库"></a>1.3、查看数据库</h3><p><strong>查看所有数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<p><strong>查看某个数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show create database 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#查看所有数据库</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mb                 |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| zutuanxue           |</span><br><span class="line">| zutuanxue01         |</span><br><span class="line">+--------------------+</span><br><span class="line">7 行于数据集 (0.01 秒)</span><br><span class="line">#查看数据库zutuanxue的信息</span><br><span class="line">mysql&gt; show create database zutuanxue;</span><br><span class="line">+----------+-------------------------------------------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                                                 |</span><br><span class="line">+----------+-------------------------------------------------------------------------------------------------+</span><br><span class="line">| zutuanxue | CREATE DATABASE `zutuanxue` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */ |</span><br><span class="line">+----------+-------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、数据库操作-下"><a href="#二、数据库操作-下" class="headerlink" title="二、数据库操作-下"></a>二、数据库操作-下</h2><h3 id="2-1、修改数据库"><a href="#2-1、修改数据库" class="headerlink" title="2.1、修改数据库"></a>2.1、修改数据库</h3><p><strong>修改字符集</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter database 数据库名 character set 字符集;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#需求：将zutuanxue01数据库的字符集改成 utf8</span><br><span class="line">mysql&gt; alter database zutuanxue01 character set utf8;</span><br><span class="line">Query OK, 1 rows affected, 1 warnings (0.09 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>为什么修改的不是数据库名？</p>
<p>容易引起数据丢失。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rename database 旧数据库名 to 新数据库名;</span><br></pre></td></tr></table></figure>

<p>这个是5.1.7到5.1.23版本可以用，但是官方不推荐，会有丢失数据的危险</p>
<h3 id="2-2、删除数据库"><a href="#2-2、删除数据库" class="headerlink" title="2.2、删除数据库"></a>2.2、删除数据库</h3><p><strong>删除数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式:</span><br><span class="line">drop database 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#需求：删除zutuanxue01数据库</span><br><span class="line">mysql&gt; drop database zutuanxue01;</span><br><span class="line">Query OK, 0 rows affected (0.07 秒)</span><br><span class="line">#查看所有数据库</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mb                 |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| zutuanxue           |</span><br><span class="line">+--------------------+</span><br><span class="line">6 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-3、使用数据库"><a href="#2-3、使用数据库" class="headerlink" title="2.3、使用数据库"></a>2.3、使用数据库</h3><p><strong>查看当前数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select database();#mysql中的全局函数</span><br></pre></td></tr></table></figure>

<p><strong>切换数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">use 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#查看当前使用的数据库</span><br><span class="line">mysql&gt; select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| NULL       |#当前没有使用的数据库</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">#切换或指定当前使用的数据库</span><br><span class="line">mysql&gt; use zutuanxue;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line">#查看当前使用的数据库</span><br><span class="line">mysql&gt; select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| zutuanxue   |#当前使用的数据库为zutuanxue</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、数据库表操作-上"><a href="#三、数据库表操作-上" class="headerlink" title="三、数据库表操作-上"></a>三、数据库表操作-上</h2><h3 id="3-1、创建表"><a href="#3-1、创建表" class="headerlink" title="3.1、创建表"></a>3.1、创建表</h3><p><strong>创建表结构</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 数据库表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>关键字说明</strong></p>
<p>create：创建</p>
<p>table：表</p>
<h3 id="3-2、数据类型（mysql）"><a href="#3-2、数据类型（mysql）" class="headerlink" title="3.2、数据类型（mysql）"></a>3.2、数据类型（mysql）</h3><p><strong>数字类型</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187353636.png" alt="image20200206171122469.png"></p>
<p><strong>日期类型</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187402867.png" alt="image20200206171204522.png"></p>
<p><strong>字符串类型</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187415619.png" alt="image20200206171241199.png"></p>
<p><strong>BLOB&#x2F;TEXT</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187429998.png" alt="image20200206171350662.png"></p>
<p><strong>BINARY&#x2F;VARBINARY</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187442067.png" alt="image20200206171423603.png"></p>
<p><strong>ENUM&#x2F;SET</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187455034.png" alt="image20200206171501339.png"></p>
<p><strong>案例：</strong></p>
<p>创建一个学生表，里面包含了编号、学生名字、出生年月等数据</p>
<p><strong>分析：</strong></p>
<p>表名：students</p>
<p>字段有：编号（id,int类型）、学生名字（sname,varchar()类型）、出生日期（birthday date类型）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table students(</span><br><span class="line">   id int, -- 学生id</span><br><span class="line">   sname varchar(20), -- 学生名字</span><br><span class="line">   birthday date -- 学生出生日期</span><br><span class="line">);</span><br><span class="line">#想要创建数据库表先进入，数据库</span><br><span class="line">mysql&gt; use zutuanxue;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line">#创建表</span><br><span class="line">mysql&gt; create table students(id int ,sname varchar(20),birthday date);</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line">#查看所有表</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+--------------------+</span><br><span class="line">| Tables_in_zutuanxue |</span><br><span class="line">+--------------------+</span><br><span class="line">| students           |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、查看表"><a href="#3-3、查看表" class="headerlink" title="3.3、查看表"></a>3.3、查看表</h3><p><strong>查看所有表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<p><strong>查看表结构</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">desc 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>查看表SQL信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show create table 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看zutuanxue数据库下的所有表</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#进入mysql数据库</span><br><span class="line">mysql&gt; use zutuanxue;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line">#查看数据库里的所有表</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+--------------------+</span><br><span class="line">| Tables_in_zutuanxue |</span><br><span class="line">+--------------------+</span><br><span class="line">| students           |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看students数据库表的结构</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看students数据库表的信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#查看students数据库表SQL信息</span><br><span class="line">mysql&gt; show create table students;</span><br><span class="line">+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table    | Create Table                                                                                                                                                                                 |</span><br><span class="line">+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| students | CREATE TABLE `students` (</span><br><span class="line">  `id` int(11) DEFAULT NULL,</span><br><span class="line">  `sname` varchar(20) DEFAULT NULL,</span><br><span class="line">  `birthday` date DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |</span><br><span class="line">+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="4、数据库表操作-中"><a href="#4、数据库表操作-中" class="headerlink" title="4、数据库表操作-中"></a>4、数据库表操作-中</h2><h3 id="4-1、快速建表"><a href="#4-1、快速建表" class="headerlink" title="4.1、快速建表"></a>4.1、快速建表</h3><p><strong>建新表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 新数据库表名 like 旧数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>创建一个students01表，要求表结构与students相同</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#创建一个新表与旧表结构相同</span><br><span class="line">mysql&gt; create table students01 like students;</span><br><span class="line">Query OK, 0 rows affected (0.11 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students01;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="4-2、删除表"><a href="#4-2、删除表" class="headerlink" title="4.2、删除表"></a>4.2、删除表</h3><p><strong>直接删除表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop table 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>判断表是否存在，存在则删除</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop table if exists 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#直接删除students01;</span><br><span class="line">mysql&gt; drop table students01;</span><br><span class="line">Query OK, 0 rows affected (0.09 秒)</span><br><span class="line">#有就删除students01,没有就不删除;</span><br><span class="line">mysql&gt; drop table if exists students01;</span><br><span class="line">Query OK, 0 rows affected, 1 warnings (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="5、数据库表操作-下"><a href="#5、数据库表操作-下" class="headerlink" title="5、数据库表操作-下"></a>5、数据库表操作-下</h2><h3 id="5-1、修改表"><a href="#5-1、修改表" class="headerlink" title="5.1、修改表"></a>5.1、修改表</h3><p><strong>添加表字段</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 add 字段名 字段类型；</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>为students表添加一个字段性别（sex char类型)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#增加字段</span><br><span class="line">mysql&gt; alter table students add sex char;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">| sex      | char(1)     | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>修改表字段类型</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 modify 字段名 新字段类型;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>将students表中字段性别（sex）的字段类型改为varchar(2)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#修改字段类型</span><br><span class="line">mysql&gt; alter table students modify sex varchar(2);</span><br><span class="line">Query OK, 0 rows affected (0.06 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">| sex      | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>修改表字段名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 change 旧字段名 新字段名 字段类型;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>将students表中的性别（sex）改成班级（classes）类型为varchar(10)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#修改字段名</span><br><span class="line">mysql&gt; alter table students change sex classes varchar(10);</span><br><span class="line">Query OK, 0 rows affected (0.07 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">| classes  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>删除表中字段</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 drop 字段名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>删除students表中的班级（classes）字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#删除字段</span><br><span class="line">mysql&gt; alter table students drop classes;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>修改表名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">rename table 数据库表名 to 新数据库表;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#修改表名</span><br><span class="line">mysql&gt; rename table students to student;</span><br><span class="line">Query OK, 0 rows affected (0.04 秒)</span><br><span class="line">#查看所有表</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+--------------------+</span><br><span class="line">| Tables_in_zutuanxue |</span><br><span class="line">+--------------------+</span><br><span class="line">| student            |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>修改字符集</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 character set 字符集;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>修改student表的字符集</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#修改数据库表字符集</span><br><span class="line">mysql&gt; alter table student character set gbk;</span><br><span class="line">Query OK, 0 rows affected (0.07 秒)</span><br><span class="line">#查看数据库表SQL信息</span><br><span class="line">mysql&gt; show create table student;</span><br><span class="line">+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table   | Create Table                                                                                                                                                                                                  |</span><br><span class="line">+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| student | CREATE TABLE `student` (</span><br><span class="line">  `id` int(11) DEFAULT NULL,</span><br><span class="line">  `sname` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,</span><br><span class="line">  `birthday` date DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="DML语句"><a href="#DML语句" class="headerlink" title="DML语句"></a>DML语句</h1><p> 阅读 (192019) </p>
<p> 分享</p>
<p>数据操纵语言DML（Data Manipulation Language），用户通过它可以实现对数据库的基本操作。就是我们最经常用到的UPDATE、INSERT、DELETE。 主要用来对数据库的数据进行一些操作。</p>
<h2 id="一、表记录操作-上"><a href="#一、表记录操作-上" class="headerlink" title="一、表记录操作-上"></a>一、表记录操作-上</h2><h3 id="1-1、DML概述"><a href="#1-1、DML概述" class="headerlink" title="1.1、DML概述"></a>1.1、DML概述</h3><p>DML 操作是指对数据库中表记录的操作，主要包括表记录的插入（insert）、更新（update）和删除（delete），是开发人员日常使用最频繁的操作。</p>
<h3 id="1-2、插入记录"><a href="#1-2、插入记录" class="headerlink" title="1.2、插入记录"></a>1.2、插入记录</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">insert into 数据库表名 [字段名列表] values(字段值列表)</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p><strong>insert into 数据库表名：</strong>指定增加记录的表</p>
<p><strong>[字段名列表]：</strong>表示要给那些字段加入字段值，没有，就为所有字段</p>
<p><strong>values（字段值列表）：</strong>表示为对应的字段加入对应的字段值</p>
<p><strong>为所有字段插入值</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">insert into 数据库表名(字段名1,字段名2...,字段名n)values(字段值1,字段值2...,字段值n);</span><br><span class="line">或</span><br><span class="line">insert into 数据库表名 values(字段值1,字段值2...,字段值n);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#指定所有字段插入记录</span><br><span class="line">mysql&gt; insert into student(id,sname,birthday)values(1,&quot;林志颖&quot;,&quot;1974-10-18&quot;);</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br><span class="line">#不指定字段，默认所有字段插入记录</span><br><span class="line">mysql&gt; insert into student values(2,&quot;郭德纲&quot;,&quot;1973-01-18&quot;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#查看数据库表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">| id   | sname     | birthday   |</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 |</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>插入部分字段值</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">insert into 数据库表名(字段名1,字段名2...)values(字段值1,字段值2...);</span><br><span class="line">#注意：没有给定字段的值，为null;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#插入部分字段值</span><br><span class="line">mysql&gt; insert into student(id,sname)values(3,&quot;柳岩&quot;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#查看数据库表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">| id   | sname     | birthday   |</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 |</span><br><span class="line">| 3    | 柳岩    | NULL       |</span><br><span class="line">+------+-----------+------------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>只插入部份字段值时，前面必须带字段名字。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into student values(4,&quot;王宝强&quot;);</span><br><span class="line">Column count doesn&#x27;t match value count at row 1#列计数与第1行的值计数不匹配</span><br></pre></td></tr></table></figure>

<h2 id="二、表记录操作-下"><a href="#二、表记录操作-下" class="headerlink" title="二、表记录操作-下"></a>二、表记录操作-下</h2><h3 id="2-1、更新记录"><a href="#2-1、更新记录" class="headerlink" title="2.1、更新记录"></a>2.1、更新记录</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">update 数据库表名 set 字段名1=字段值1,字段名2=字段值2...,字段名n=字段值n [where 条件表达式];</span><br><span class="line">#注意：更新的数据可以是0-N条记录</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p><strong>update 数据库表名：</strong>指定需要更新的数据库表</p>
<p><strong>set 字段名&#x3D;字段值：</strong>修改指定的数据库表中字段的值</p>
<p><strong>[where 条件表达式]：</strong>修改满足条件的记录的字段值，可省略</p>
<p><strong>不带条件记录更新</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">update 数据库表名 set 字段名1=字段值1,字段名2=字段值2...,字段名n=字段值n;  #表示修改表中所有记录</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>加入一个性别（sex varchar(2)）字段，将sex的值都改为“男”</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#在student表中增加字段sex</span><br><span class="line">mysql&gt; alter table student add sex varchar(2);</span><br><span class="line">Query OK, 0 rows affected (0.24 秒)</span><br><span class="line">#查看表结构</span><br><span class="line">mysql&gt; desc student;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| birthday | date        | YES  |     | NULL    |       |</span><br><span class="line">| sex      | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line">#修改student表中sex字段的值为&#x27;男&#x27;</span><br><span class="line">mysql&gt; update student set sex=&#x27;男&#x27;;</span><br><span class="line">Query OK, 3 rows affected (0.09 秒)</span><br><span class="line">#查看表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | NULL       | 男  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>带条件记录更新</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">update 数据库表名 set 字段名1=字段值1,字段名2=字段值2...,字段名n=字段值n [where 条件表达式];   #表示修改表中满足条件的记录</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>修改id&#x3D;3的记录，将sex改为’女’</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#修改id为3记录中的sex改为&#x27;女&#x27;</span><br><span class="line">mysql&gt; update student set sex=&#x27;女&#x27; where id=3;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#查看表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | NULL       | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>修改id&#x3D;3的记录，将sex改为’女’，birthday改为1980-11-08</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#修改id为3记录中的sex改为&#x27;女&#x27;,birthday改为1980-11-08</span><br><span class="line">mysql&gt; update student set sex=&#x27;女&#x27;,birthday=&#x27;1980-11-08&#x27; where id=3;</span><br><span class="line">Query OK, 1 rows affected (0.11 秒)</span><br><span class="line">#查看表中所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | 1980-11-08 | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、删除记录"><a href="#2-2、删除记录" class="headerlink" title="2.2、删除记录"></a>2.2、删除记录</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">delete from 数据库表名 [where 条件表达式];</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p><strong>delete from 数据库表名：</strong>指定删除记录的表</p>
<p><strong>[where 条件表达式]：</strong>删除满足条件的记录的字段值，可省略</p>
<p><strong>带条件删除记录</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">delete from 数据库表名 [where 条件表达式]; #删除满足条件的记录</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除id为1的记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#删除id=1的记录</span><br><span class="line">mysql&gt; delete from student where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br><span class="line">#查看所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 2    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | 1980-11-08 | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>不带条件删除记录</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">delete from 数据库表名;    #删除表中所有的记录</span><br><span class="line">或</span><br><span class="line">truncate table 数据库表名;   #删除表中所有的记录</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除表中所有记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#删除所有记录</span><br><span class="line">mysql&gt; delete from student;</span><br><span class="line">Query OK, 2 rows affected (0.08 秒)</span><br><span class="line">#查看所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">空的数据集 (0.01 秒)</span><br><span class="line">#删除所有记录</span><br><span class="line">mysql&gt; truncate table student;</span><br><span class="line">Query OK, 0 rows affected (0.08 秒)</span><br><span class="line">#查看所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">空的数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>truncate删除的是表的结构，再创建一张表；delete删除的是表的记录；</p>
<h1 id="DQL语句"><a href="#DQL语句" class="headerlink" title="DQL语句"></a>DQL语句</h1><p> 阅读 (179770) </p>
<p> 分享</p>
<p>DQL（Data QueryLanguage ）数据查询语言，基本结构是由SELECT子句，FROM子句，WHERE子句组成的查询块。</p>
<h2 id="一、DQL概述"><a href="#一、DQL概述" class="headerlink" title="一、DQL概述"></a>一、DQL概述</h2><h3 id="1-1、什么是DQL"><a href="#1-1、什么是DQL" class="headerlink" title="1.1、什么是DQL"></a>1.1、什么是DQL</h3><p>DQL：数据查询语言，用于从数据库表中查询数据，并不会修改数据，只是一种显示数据的方式。由select语句构成。</p>
<h3 id="1-2、记录查询格式"><a href="#1-2、记录查询格式" class="headerlink" title="1.2、记录查询格式"></a>1.2、记录查询格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [where 条件表达式];</span><br></pre></td></tr></table></figure>

<p><strong>格式说明：</strong></p>
<p>select *&#x2F;字段列表： 查询完后需要展示的字段</p>
<p>from 数据库表名： 指定要查询的数据库表</p>
<p>[where 条件表达式]： 查询满足条件的记录</p>
<h2 id="二、记录查询"><a href="#二、记录查询" class="headerlink" title="二、记录查询"></a>二、记录查询</h2><h3 id="2-1、简单查询"><a href="#2-1、简单查询" class="headerlink" title="2.1、简单查询"></a>2.1、简单查询</h3><p><strong>查询表中的记录和列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select * from 数据库表名;   #查询表中所有记录,显示所有列</span><br><span class="line">或</span><br><span class="line">select 字段名1,字段名2,...,字段名n from 数据库表名;   #查询表中所有记录，显示指定列</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询student表中的所有记录，显示所有列</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#显示所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 2    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | 1980-11-08 | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询student表中的所有记录，显示所有姓名、性别列</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#显示所有记录,显示列为姓名、性别</span><br><span class="line">mysql&gt; select sname,sex from student;</span><br><span class="line">+-----------+------+</span><br><span class="line">| sname     | sex  |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 郭德纲 | 男  |</span><br><span class="line">| 林志颖 | 男  |</span><br><span class="line">| 柳岩    | 女  |</span><br><span class="line">+-----------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、别名查询"><a href="#2-2、别名查询" class="headerlink" title="2.2、别名查询"></a>2.2、别名查询</h3><p>别名有二种：字段别名、表别名</p>
<p>作用：</p>
<p>字段别名查询出记录显示新的名字，并不影响表的结构。</p>
<p>表别名取了一个新的名字，可以代替表名使用。</p>
<p><strong>字段别名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 字段名1 as 别名1,字段名2 as 别名2,...,字段名n as 别名n from 数据库表名; </span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询student表中的sname和sex，以别名’姓名’和’性别’显示</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#使用字段别名显示姓名、性别</span><br><span class="line">mysql&gt; select sname as 姓名,sex as 性别 from student;</span><br><span class="line">+-----------+------+</span><br><span class="line">| 姓名        | 性别   |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 郭德纲 | 男  |</span><br><span class="line">| 林志颖 | 男  |</span><br><span class="line">| 柳岩    | 女  |</span><br><span class="line">+-----------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>表别名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 字段名1 as 别名1,字段名2 as 别名2,...,字段名n as 别名n from 数据库表名 as 别名; </span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>查询student表中的sname和sex，以别名’姓名’和’性别’显示，并为student表取了一个别名 s</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#使用字段别名显示姓名、性别，表别名没有具体表现</span><br><span class="line">mysql&gt; select sname as 姓名,sex as 性别 from student as s;</span><br><span class="line">+-----------+------+</span><br><span class="line">| 姓名        | 性别   |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 郭德纲 | 男  |</span><br><span class="line">| 林志颖 | 男  |</span><br><span class="line">| 柳岩    | 女  |</span><br><span class="line">+-----------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>表别名一般用于多表查询，单表查询中没有具体体现。</p>
<h3 id="2-3、清除重复记录查询"><a href="#2-3、清除重复记录查询" class="headerlink" title="2.3、清除重复记录查询"></a>2.3、清除重复记录查询</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select distinct 字段名 from 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>去掉性别重复的记录</p>
<p>去掉性别和姓名同时重复的记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#查看所有记录</span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| id   | sname     | birthday   | sex  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">| 1    | 郭德纲 | 1973-01-18 | 男  |</span><br><span class="line">| 2    | 林志颖 | 1974-10-18 | 男  |</span><br><span class="line">| 3    | 柳岩    | 1980-11-08 | 女  |</span><br><span class="line">+------+-----------+------------+------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line">#查看sex不重复的记录</span><br><span class="line">mysql&gt; select distinct sex from student;</span><br><span class="line">+------+</span><br><span class="line">| sex  |</span><br><span class="line">+------+</span><br><span class="line">| 男  |</span><br><span class="line">| 女  |</span><br><span class="line">+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line">#查看sex,sname都不重复的记录</span><br><span class="line">mysql&gt; select distinct sex,sname from student;</span><br><span class="line">+------+-----------+</span><br><span class="line">| sex  | sname     |</span><br><span class="line">+------+-----------+</span><br><span class="line">| 男  | 郭德纲 |</span><br><span class="line">| 男  | 林志颖 |</span><br><span class="line">| 女  | 柳岩    |</span><br><span class="line">+------+-----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-4、运算查询"><a href="#2-4、运算查询" class="headerlink" title="2.4、运算查询"></a>2.4、运算查询</h3><p><strong>字段与固定值运算</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 字段名+固定值 from 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>运算的字段必须是数值型</p>
<p><strong>案例：</strong></p>
<p>查询student表中年龄减10岁，并显示sname和age</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select age-10 as age ,sname from student;</span><br><span class="line">+-----+--------+</span><br><span class="line">| age | sname  |</span><br><span class="line">+-----+--------+</span><br><span class="line">|  37 | 郭德纲 |</span><br><span class="line">|  36 | 林志颖 |</span><br><span class="line">|  30 | 柳岩   |</span><br><span class="line">+-----+--------+</span><br><span class="line">3 rows in set</span><br></pre></td></tr></table></figure>

<p><strong>字段与字段运算</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 字段名+字段名 from 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>运算的字段必须是数值型</p>
<p><strong>案例：</strong></p>
<p>查询student表中age与id的和，并显示出来age和id</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select age+id,age,id</span><br><span class="line"> from student;</span><br><span class="line">+--------+-----+----+</span><br><span class="line">| age+id | age | id |</span><br><span class="line">+--------+-----+----+</span><br><span class="line">|     48 |  47 |  1 |</span><br><span class="line">|     48 |  46 |  2 |</span><br><span class="line">|     43 |  40 |  3 |</span><br><span class="line">+--------+-----+----+</span><br><span class="line">3 rows in set</span><br></pre></td></tr></table></figure>

<h2 id="三、条件查询"><a href="#三、条件查询" class="headerlink" title="三、条件查询"></a>三、条件查询</h2><h3 id="3-1、条件查询前准备"><a href="#3-1、条件查询前准备" class="headerlink" title="3.1、条件查询前准备"></a>3.1、条件查询前准备</h3><p>新建学生信息表（students）</p>
<p><strong>字段：</strong>学生ID（sid）、学生姓名(sname)、学生性别(sex)、学生年龄(age)、英语成绩(english)、数学成绩(math)、入学时间(entertime)、备注(remark)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table students(</span><br><span class="line">    sid int,</span><br><span class="line">    sname varchar(20),</span><br><span class="line">    sex varchar(2),</span><br><span class="line">    age int,</span><br><span class="line">    english double(4,1),</span><br><span class="line">    math double(4,1),</span><br><span class="line">    entertime date,</span><br><span class="line">    remark text</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187929354.png" alt="image20200207010430241.png"></p>
<p><strong>记录：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into students values</span><br><span class="line">(1,&#x27;张三&#x27;,&#x27;男&#x27;,19,98.5,88,&#x27;2017-09-01&#x27;,&#x27;他来自四川&#x27;),</span><br><span class="line">(2,&#x27;李四&#x27;,&#x27;男&#x27;,20,80,88,&#x27;2017-09-01&#x27;,&#x27;他来自重庆&#x27;),</span><br><span class="line">(3,&#x27;张红&#x27;,&#x27;女&#x27;,19,86,80,&#x27;2017-09-01&#x27;,&#x27;他来自北京&#x27;),</span><br><span class="line">(4,&#x27;张八&#x27;,&#x27;男&#x27;,18,80,85,&#x27;2017-09-01&#x27;,&#x27;他来自天津&#x27;),</span><br><span class="line">(5,&#x27;李三&#x27;,&#x27;男&#x27;,19,60,88,&#x27;2017-09-01&#x27;,&#x27;他来自湖北&#x27;),</span><br><span class="line">(6,&#x27;王六&#x27;,&#x27;女&#x27;,20,50,70,&#x27;2017-09-01&#x27;,&#x27;他来自湖南&#x27;),</span><br><span class="line">(7,&#x27;刘红&#x27;,&#x27;女&#x27;,18,90,98,&#x27;2017-09-01&#x27;,&#x27;他来自甘肃&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603187963975.png" alt="image20200207011044328.png"></p>
<h3 id="3-2、基础比较运算符"><a href="#3-2、基础比较运算符" class="headerlink" title="3.2、基础比较运算符"></a>3.2、基础比较运算符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">&gt;、&lt;、&lt;=、&gt;=、=、&lt;&gt;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>在SQL中“&lt;&gt;”，表示不等于，mysql中也可以用“!&#x3D;”表示</p>
<p>在SQL中没有“&#x3D;&#x3D;”</p>
<p><strong>案例：</strong></p>
<p>查询学生信息表中英语成绩大于80的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where english&gt;80;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中英语成绩小于80的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where english&lt;80;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄大于等于19岁的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where age&gt;=19;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄小于等于19岁的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where age&lt;=19;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中数学成绩等于88的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where math=88;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄不等于18岁的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where age&lt;&gt;18;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄大于等于20岁的学生的姓名和性别</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select sname,sex from students where age&gt;=20;</span><br><span class="line">+--------+------+</span><br><span class="line">| sname  | sex  |</span><br><span class="line">+--------+------+</span><br><span class="line">| 李四 | 男  |</span><br><span class="line">| 王六 | 女  |</span><br><span class="line">+--------+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、提高比较运算符"><a href="#3-3、提高比较运算符" class="headerlink" title="3.3、提高比较运算符"></a>3.3、提高比较运算符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">between...and...  #在一定的范围内</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>包含头尾</p>
<p><strong>案例：</strong></p>
<p>查询学生信息表中英语成绩80到90岁之间的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where english between 80 and 90;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line">格式：</span><br><span class="line">in(值1,值2...,值n)  #表示用n个值相等</span><br><span class="line">not in(值1,值2...,值n)  #表示用n个值不相等</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中sid为1，3，5的信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sid in(1,3,5);</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中sid除了1，3，5的信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sid not in(1,3,5);</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line">格式：</span><br><span class="line">like &#x27;%值%&#x27;  #模糊查询</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql通配符</span><br><span class="line"></span><br><span class="line">%  :匹配任意多个字符</span><br><span class="line"></span><br><span class="line">_   ：匹配一个字符</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中姓’张’的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;张%&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from students where sname like &#x27;张&#x27;;</span><br><span class="line">空的数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中包含’红’字的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;%红%&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中姓’王’的二个字的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;王_&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">格式：</span><br><span class="line">is null   #表示某字段值为null</span><br><span class="line">is not null    #表示某字段值不为null</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>不能写成：字段名&#x3D;null</p>
<p><strong>案例：</strong></p>
<p>查询学生信息表中age为null学生信息</p>
<p>查询学生信息表中english为null学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where age is null;</span><br><span class="line">+------+--------+------+------+---------+------+-----------+--------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime | remark |</span><br><span class="line">+------+--------+------+------+---------+------+-----------+--------+</span><br><span class="line">| 8    | 王五 | 男  | NULL | NULL    | NULL | NULL      | NULL   |</span><br><span class="line">+------+--------+------+------+---------+------+-----------+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from students where english is null;</span><br><span class="line">+------+-----------+------+------+---------+------+-----------+--------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime | remark |</span><br><span class="line">+------+-----------+------+------+---------+------+-----------+--------+</span><br><span class="line">| 8    | 王五    | 男  | NULL | NULL    | NULL | NULL      | NULL   |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL      | NULL   |</span><br><span class="line">+------+-----------+------+------+---------+------+-----------+--------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中english不为null学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where english is not null;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-4、逻辑运算符"><a href="#3-4、逻辑运算符" class="headerlink" title="3.4、逻辑运算符"></a>3.4、逻辑运算符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">and #与，二边条件同时成立，成立  &amp;&amp;</span><br><span class="line">or #或，二边条件有一边成立，成立  ||</span><br><span class="line">not  #非，一边条件成立，取反；一边条件不成立，取反  ！</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中english大于85的男生的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where english&gt;85 and sex=&#x27;男&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄大于等于20岁或数学成绩大于85的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where age&gt;=20 or math&gt;85;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中除了年龄大于等于20岁或数学成绩大于85的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where not (age&gt;=20 or math&gt;85);</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="DQL语句排序与分组"><a href="#DQL语句排序与分组" class="headerlink" title="DQL语句排序与分组"></a>DQL语句排序与分组</h1><p> 阅读 (178868) </p>
<p> 分享</p>
<h2 id="一、DQL-排序"><a href="#一、DQL-排序" class="headerlink" title="一、DQL-排序"></a>一、DQL-排序</h2><p>排序是计算机内经常进行的一种操作，其目的是将一组“无序”的记录序列调整为“有序”的记录序列。分内部排序和外部排序，若整个排序过程不需要访问外存便能完成，则称此类排序问题为内部排序。反之，若参加排序的记录数量很大，整个序列的排序过程不可能在内存中完成，则称此类排序问题为外部排序。内部排序的过程是一个逐步扩大记录的有序序列长度的过程。</p>
<h3 id="1-1、排序概述"><a href="#1-1、排序概述" class="headerlink" title="1.1、排序概述"></a>1.1、排序概述</h3><p>将数据库表中杂乱无章的数据记录，通过字段的升序或降序的顺序排列的过程叫做排序。</p>
<h3 id="1-2、排序语法"><a href="#1-2、排序语法" class="headerlink" title="1.2、排序语法"></a>1.2、排序语法</h3><p>通过order by子句</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [where 条件表达式] [order by 字段名 [asc/desc]];</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p>asc：升序，默认值</p>
<p>desc：降序</p>
<h3 id="1-3、单列排序"><a href="#1-3、单列排序" class="headerlink" title="1.3、单列排序"></a>1.3、单列排序</h3><p>按照一个字段进行排序</p>
<p><strong>案例：</strong></p>
<p>查看学生信息表中按照英语成绩升序排列，去掉成绩为null的学生。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where english is not null order by english;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">7 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="1-4、组合排序"><a href="#1-4、组合排序" class="headerlink" title="1.4、组合排序"></a>1.4、组合排序</h3><p>按照多个字段进行排序，先按1字段排序，在按2字段排序，在按n字段排序</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [where 条件表达式] [order by 字段名1 [asc/desc],字段名2 [asc/desc],...,字段名n [asc/desc]];</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看学生信息表中先按照数学成绩升序排列，在按照英语成绩降序排列，最后去掉成绩为null的学生。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where english is not null order by math,english desc;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、DQL-分组"><a href="#二、DQL-分组" class="headerlink" title="二、DQL 分组"></a>二、DQL 分组</h2><p>数据分组是根据统计研究的需要，将原始数据按照某种标准划分成不同的组别，分组后的的数据称为分组数据。</p>
<p>数据分组应遵循两个基本原则：</p>
<p>穷尽性原则</p>
<p>这一原则就是要求调查的每一单位都能无一例外地划归到某一组去，不会产生“遗漏”现象。</p>
<p>互斥性原则</p>
<p>这一原则就是要求将调查单位分组后，各个组的范围应该互不相容、互为排斥。即每个调查单位在特定的分组标志下只能归属某一组，而不能同时或可能同时归属到几个组。</p>
<h3 id="2-1、分组概述"><a href="#2-1、分组概述" class="headerlink" title="2.1、分组概述"></a>2.1、分组概述</h3><ul>
<li>什么是分组</li>
</ul>
<p>分组就是将一组行记录按列或表达式的值分组成摘要行记录。通过GROUP BY子句返回每个分组的一个行记录。换句话说，它减少了在结果集中的行数。</p>
<ul>
<li>分组语法</li>
</ul>
<p>– 语法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [group by 分组字段名 [having 条件表达式]];</span><br></pre></td></tr></table></figure>

<p>– 分组方式</p>
<p>将学生信息表中男、女同学进行分组</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188686160.png" alt="image20200209001000938.png"></p>
<p><strong>原始数据</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188795282.png" alt="image20200209001300283.png"></p>
<p><strong>分组为：男一组，女一组</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188695335.png" alt="image20200209001300283.png"></p>
<p><strong>返回每组第一条数据</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603188705609.png" alt="image20200209002544753.png"></p>
<h3 id="2-2、分组应用"><a href="#2-2、分组应用" class="headerlink" title="2.2、分组应用"></a>2.2、分组应用</h3><ul>
<li>实际分组方式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select sex from students group by sex;</span><br><span class="line">+------+</span><br><span class="line">| sex  |</span><br><span class="line">+------+</span><br><span class="line">| 男  |</span><br><span class="line">| 女  |</span><br><span class="line">+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>当我们使用某个字段分组,在查询的时候也需要将这个字段查询出来,否则看不到数据属于哪组的。</p>
<p>单独分组没什么用处，分组的目的就是为了统计，一般分组会跟<strong>聚合函数</strong>一起使用。</p>
<p><strong>案例：</strong></p>
<p>查询学生信息表中男、女同学的人数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select sex,count(*) from students group by sex;</span><br><span class="line">+------+----------+</span><br><span class="line">| sex  | count(*) |</span><br><span class="line">+------+----------+</span><br><span class="line">| 男  | 6        |</span><br><span class="line">| 女  | 3        |</span><br><span class="line">+------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<ul>
<li>where与having</li>
</ul>
<p>– where**</p>
<p>查询学生信息表中数学成绩在80分以上的，男、女同学的人数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#where后面不能用聚合函数</span><br><span class="line">mysql&gt; select sex,count(*) from students where math&gt;80 group by sex;</span><br><span class="line">+------+----------+</span><br><span class="line">| sex  | count(*) |</span><br><span class="line">+------+----------+</span><br><span class="line">| 男  | 4        |</span><br><span class="line">| 女  | 1        |</span><br><span class="line">+------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>where是将不符合条件的先去掉，在分组。</p>
<p>– having</p>
<p>查询学生信息表中男、女同学的人数，人数超过3人显示</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#having n&gt;3 可以写成 having count(*)&gt;3</span><br><span class="line">mysql&gt; select sex,count(*) as n from students group by sex having n&gt;3;</span><br><span class="line">+------+---+</span><br><span class="line">| sex  | n |</span><br><span class="line">+------+---+</span><br><span class="line">| 男  | 6 |</span><br><span class="line">+------+---+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>having是先分组，在将分组后不符合条件的去掉。</p>
<p>– where与having区别</p>
<p><strong>where</strong> <strong>子句</strong></p>
<p>在分组之前过滤数据，即先过滤再分组。</p>
<p>where 后面不可以使用聚合函数。</p>
<p><strong>having</strong> <strong>子句</strong></p>
<p>在分组之后过滤数据，即先分组再过滤。</p>
<p>having 后面可以使用聚合函数。</p>
<h1 id="DQL-聚合函数"><a href="#DQL-聚合函数" class="headerlink" title="DQL-聚合函数"></a>DQL-聚合函数</h1><p> 阅读 (161008) </p>
<p> 分享</p>
<p>SQL基本函数，聚合函数对一组值执行计算，并返回单个值，也被称为组函数。</p>
<p>聚合函数对一组值执行计算并返回单一的值。除 COUNT 以外，聚合函数忽略空值，如果COUNT函数的应用对象是一个确定列名，并且该列存在空值，此时COUNT仍会忽略空值。</p>
<p>所有聚合函数都具有确定性。任何时候用一组给定的输入值调用它们时，都返回相同的值。聚合函数可以应用于查询语句的SELECT中，或者HAVING子句中，但不可用于WHERE语句中，因为WHERE是对逐条的行记录进行筛选。</p>
<h2 id="一、聚合函数概述"><a href="#一、聚合函数概述" class="headerlink" title="一、聚合函数概述"></a>一、聚合函数概述</h2><h3 id="1-1、什么是聚合函数"><a href="#1-1、什么是聚合函数" class="headerlink" title="1.1、什么是聚合函数"></a>1.1、什么是聚合函数</h3><p>SQL基本函数，聚合函数对一组值执行计算，并返回单个值，也被称为组函数。 聚合函数经常与 SELECT 语句的 GROUP BY 子句的HAVING一同使用。</p>
<h3 id="1-2、聚合函数的特点"><a href="#1-2、聚合函数的特点" class="headerlink" title="1.2、聚合函数的特点"></a>1.2、聚合函数的特点</h3><p>除了 COUNT 以外，聚合函数忽略空值。<br>聚合函数经常与 SELECT 语句的 GROUP BY 子句一同使用。<br>所有聚合函数都具有确定性。任何时候用一组给定的输入值调用它们时，都返回相同的值。</p>
<h3 id="1-3、常用聚合函数"><a href="#1-3、常用聚合函数" class="headerlink" title="1.3、常用聚合函数"></a>1.3、常用聚合函数</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">count(字段名)：统计总行数</span><br><span class="line">sum(字段名)：计算列总和</span><br><span class="line">avg(字段名)：求某一列平均值</span><br><span class="line">min(字段名)：求某一列的最小值</span><br><span class="line">max(字段名)：求某一列的最大值</span><br></pre></td></tr></table></figure>

<h3 id="1-4、聚合函数语法"><a href="#1-4、聚合函数语法" class="headerlink" title="1.4、聚合函数语法"></a>1.4、聚合函数语法</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select 聚合函数(字段名) from 数据库表名;</span><br></pre></td></tr></table></figure>

<h2 id="二、聚合函数应用"><a href="#二、聚合函数应用" class="headerlink" title="二、聚合函数应用"></a>二、聚合函数应用</h2><h3 id="2-1、聚合函数基础应用"><a href="#2-1、聚合函数基础应用" class="headerlink" title="2.1、聚合函数基础应用"></a>2.1、聚合函数基础应用</h3><p><strong>案例：</strong></p>
<p>查看学生信息表中通过英语成绩统计所有的学生数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(english) as 学生人数 from students;</span><br><span class="line">+-----+</span><br><span class="line">| 总人数 |</span><br><span class="line">+-----+</span><br><span class="line">| 7   |</span><br><span class="line">+-----+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>null的记录是不会统计，如果要想统计null，可以用ifnull(字段名,默认值)</p>
<p>默认值里设置：null用0表示</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(ifnull(english,0)) as 总人数 from students;</span><br><span class="line">+-----+</span><br><span class="line">| 总人数 |</span><br><span class="line">+-----+</span><br><span class="line">| 9   |</span><br><span class="line">+-----+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>除了前面这个方法可以统计学生人数外，我们还可以：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#比较常用的方法</span><br><span class="line">mysql&gt; select count(*) from students;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">| 9        |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中年龄大于19的总人数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(*) from students where age&gt;19;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">| 2        |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中英语成绩的总分</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select sum(english) as 英语总分 from students;</span><br><span class="line">+-------+</span><br><span class="line">| 英语总分  |</span><br><span class="line">+-------+</span><br><span class="line">| 544.5 |</span><br><span class="line">+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中英语成绩的平均分</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select avg(english) as 英语平均分 from students;</span><br><span class="line">+----------+</span><br><span class="line">| 英语平均分    |</span><br><span class="line">+----------+</span><br><span class="line">| 77.78571 |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中英语成绩的最高分</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select max(english) as 英语最高分 from students;</span><br><span class="line">+-------+</span><br><span class="line">| 英语最高分 |</span><br><span class="line">+-------+</span><br><span class="line">| 98.5  |</span><br><span class="line">+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查看学生信息表中英语成绩的最低分</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select min(english) as 英语最低分 from students;</span><br><span class="line">+-------+</span><br><span class="line">| 英语最低分 |</span><br><span class="line">+-------+</span><br><span class="line">| 50.0  |</span><br><span class="line">+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、聚合函数分组应用"><a href="#2-2、聚合函数分组应用" class="headerlink" title="2.2、聚合函数分组应用"></a>2.2、聚合函数分组应用</h3><p><strong>案例：</strong></p>
<p>统计学生信息表中男生的人数与女生的人数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(*),sex from students group by sex;</span><br><span class="line">+----------+------+</span><br><span class="line">| count(*) | sex  |</span><br><span class="line">+----------+------+</span><br><span class="line">| 6        | 男  |</span><br><span class="line">| 3        | 女  |</span><br><span class="line">+----------+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(*),sex,sum(english),avg(math) from students group by sex;</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">| count(*) | sex  | sum(english) | avg(math) |</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">| 6        | 男  | 318.5        | 87.25000  |</span><br><span class="line">| 3        | 女  | 226.0        | 82.66667  |</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩，总人数超过3人显示</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(*) as n,sex,sum(english),avg(math) from students group by sex having n&gt;3;</span><br><span class="line">+---+------+--------------+-----------+</span><br><span class="line">| n | sex  | sum(english) | avg(math) |</span><br><span class="line">+---+------+--------------+-----------+</span><br><span class="line">| 6 | 男  | 318.5        | 87.25000  |</span><br><span class="line">+---+------+--------------+-----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、聚合函数应用扩展"><a href="#三、聚合函数应用扩展" class="headerlink" title="三、聚合函数应用扩展"></a>三、聚合函数应用扩展</h2><h3 id="3-1、group-concat"><a href="#3-1、group-concat" class="headerlink" title="3.1、group_concat"></a>3.1、group_concat</h3><p>group_concat(字段名)可以作为一个输出字段来使用，表示分组之后，根据分组结果，使用group_concat()来放置每一组的某字段的值的集合。</p>
<p><strong>案例：</strong></p>
<p>统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩及数学成绩的集合</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(*),sex,sum(english),avg(math),group_concat(math) from students group by sex;</span><br><span class="line">+----------+------+--------------+-----------+---------------------+</span><br><span class="line">| count(*) | sex  | sum(english) | avg(math) | group_concat(math)  |</span><br><span class="line">+----------+------+--------------+-----------+---------------------+</span><br><span class="line">| 3        | 女  | 226.0        | 82.66667  | 80.0,70.0,98.0      |</span><br><span class="line">| 6        | 男  | 318.5        | 87.25000  | 88.0,88.0,85.0,88.0 |</span><br><span class="line">+----------+------+--------------+-----------+---------------------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、with-rollup"><a href="#3-2、with-rollup" class="headerlink" title="3.2、with rollup"></a>3.2、with rollup</h3><p>在最后新增一行，来记录当前列里所有记录的总和</p>
<p><strong>案例：</strong></p>
<p>统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩及增加显示列的记录总和</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(*),sex,sum(english),avg(math) from students group by sex with rollup;</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">| count(*) | sex  | sum(english) | avg(math) |</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">| 3        | 女  | 226.0        | 82.66667  |</span><br><span class="line">| 6        | 男  | 318.5        | 87.25000  |</span><br><span class="line">| 9        | NULL | 544.5        | 85.28571  |</span><br><span class="line">+----------+------+--------------+-----------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h1 id="DQL-limit分页"><a href="#DQL-limit分页" class="headerlink" title="DQL-limit分页"></a>DQL-limit分页</h1><p> 阅读 (134847) </p>
<p> 分享</p>
<p>在我们使用查询语句的时候，经常要返回前几条或者中间某几行数据，这个时候怎么办呢？不用担心，mysql已经为我们提供了这样一个功能-limit。</p>
<h2 id="一、limit概述"><a href="#一、limit概述" class="headerlink" title="一、limit概述"></a>一、limit概述</h2><p>Limit是限制的意思，所以limit的作用就是限制查询记录的条数。</p>
<h2 id="二、limit语法"><a href="#二、limit语法" class="headerlink" title="二、limit语法"></a>二、limit语法</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [limit offset,length];</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p>offset：起始行数，从 0 开始计数，如果省略，默认就是 0</p>
<p>length： 返回的行数</p>
<h2 id="三、limit应用"><a href="#三、limit应用" class="headerlink" title="三、limit应用"></a>三、limit应用</h2><p><strong>案例：</strong></p>
<p>查询学生信息表中前5条记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#offset可以省略，省略时，从0开始</span><br><span class="line">mysql&gt; select * from students limit 5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中从第3条记录开始，查询出5条记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students limit 2,5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、limit分页"><a href="#四、limit分页" class="headerlink" title="四、limit分页"></a>四、limit分页</h2><h3 id="4-1、什么是分页"><a href="#4-1、什么是分页" class="headerlink" title="4.1、什么是分页"></a>4.1、什么是分页</h3><p>打开百度，输入我们想要查看的信息，查出来的数据会有成千上万条数据，那么这些数据在页面不能一次性展示，这个时候我们就需要用到分页。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603189560330.png" alt="image20200209012451326.png"></p>
<h3 id="4-2、MySql中的分页"><a href="#4-2、MySql中的分页" class="headerlink" title="4.2、MySql中的分页"></a>4.2、MySql中的分页</h3><p><strong>案例：</strong></p>
<p>查询学生信息表中的信息，按5条记录为一页展示</p>
<p><strong>第一页</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students limit 0,5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>第二页</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students limit 5,5;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六    | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红    | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">| 8    | 王五    | 男  | NULL | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>limit中offset在发生着变化，第一页是0，第二页是(前一页的offset+length)，而length并没有发生变化。</p>
<p>如果最后一页的记录数没有指定的length条，是有多少显示多少</p>
<h1 id="DQL-limit分页-1"><a href="#DQL-limit分页-1" class="headerlink" title="DQL-limit分页"></a>DQL-limit分页</h1><p> 阅读 (134847) </p>
<p> 分享</p>
<p>在我们使用查询语句的时候，经常要返回前几条或者中间某几行数据，这个时候怎么办呢？不用担心，mysql已经为我们提供了这样一个功能-limit。</p>
<h2 id="一、limit概述-1"><a href="#一、limit概述-1" class="headerlink" title="一、limit概述"></a>一、limit概述</h2><p>Limit是限制的意思，所以limit的作用就是限制查询记录的条数。</p>
<h2 id="二、limit语法-1"><a href="#二、limit语法-1" class="headerlink" title="二、limit语法"></a>二、limit语法</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 [limit offset,length];</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p>offset：起始行数，从 0 开始计数，如果省略，默认就是 0</p>
<p>length： 返回的行数</p>
<h2 id="三、limit应用-1"><a href="#三、limit应用-1" class="headerlink" title="三、limit应用"></a>三、limit应用</h2><p><strong>案例：</strong></p>
<p>查询学生信息表中前5条记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#offset可以省略，省略时，从0开始</span><br><span class="line">mysql&gt; select * from students limit 5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中从第3条记录开始，查询出5条记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students limit 2,5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、limit分页-1"><a href="#四、limit分页-1" class="headerlink" title="四、limit分页"></a>四、limit分页</h2><h3 id="4-1、什么是分页-1"><a href="#4-1、什么是分页-1" class="headerlink" title="4.1、什么是分页"></a>4.1、什么是分页</h3><p>打开百度，输入我们想要查看的信息，查出来的数据会有成千上万条数据，那么这些数据在页面不能一次性展示，这个时候我们就需要用到分页。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/20/1603189560330.png" alt="image20200209012451326.png"></p>
<h3 id="4-2、MySql中的分页-1"><a href="#4-2、MySql中的分页-1" class="headerlink" title="4.2、MySql中的分页"></a>4.2、MySql中的分页</h3><p><strong>案例：</strong></p>
<p>查询学生信息表中的信息，按5条记录为一页展示</p>
<p><strong>第一页</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students limit 0,5;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八 | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>第二页</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students limit 5,5;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 6    | 王六    | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">| 7    | 刘红    | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">| 8    | 王五    | 男  | NULL | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>limit中offset在发生着变化，第一页是0，第二页是(前一页的offset+length)，而length并没有发生变化。</p>
<p>如果最后一页的记录数没有指定的length条，是有多少显示多少</p>
<h1 id="DQL-模糊查询"><a href="#DQL-模糊查询" class="headerlink" title="DQL-模糊查询"></a>DQL-模糊查询</h1><p> 阅读 (167937) </p>
<p> 分享</p>
<p>模糊查询即模糊检索，是指搜索系统自动按照用户输入关键词的同义词进行模糊检索，从而得出较多的检索结果。与之相反的是“精准搜索”。模糊检索也可以说是同义词检索，这里的同义词是用户通过“检索管理”中的“同义词典”来配置的。</p>
<p>用户在检索页面中输入同义词中任何一个词检索时，只要选中“模糊检索”复选框，则该关键词的所有同义词信息也都被检索出来。</p>
<p>举例：例如配置了“电脑”与“computer”为同义词后，检索“电脑”，则包含“computer”的网页也会出现在检索结果中。</p>
<h2 id="一、模糊查询概述"><a href="#一、模糊查询概述" class="headerlink" title="一、模糊查询概述"></a>一、模糊查询概述</h2><h3 id="1-1、什么是模糊查询"><a href="#1-1、什么是模糊查询" class="headerlink" title="1.1、什么是模糊查询"></a>1.1、什么是模糊查询</h3><p>模糊查询是针对字符串操作的，类似正则表达式，没有正则表达式强大。</p>
<h3 id="1-2、通配符"><a href="#1-2、通配符" class="headerlink" title="1.2、通配符"></a>1.2、通配符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%：表示任意0个或多个字符。</span><br><span class="line">_： 表示任意单个字符。</span><br><span class="line">[ ]：表示括号内所列字符中的一个（类似正则表达式）。</span><br><span class="line">[^ ] ：表示不在括号所列之内的单个字符。</span><br></pre></td></tr></table></figure>

<h3 id="1-3、回顾-和"><a href="#1-3、回顾-和" class="headerlink" title="1.3、回顾%和_"></a>1.3、回顾%和_</h3><h4 id="1-3-1、-应用"><a href="#1-3-1、-应用" class="headerlink" title="1.3.1、%应用"></a>1.3.1、%应用</h4><p>可匹配任意类型和长度的字符，有些情况下若是中文，请使用两个百分号（%%）表示。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 like %字符串%;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询出学生信息表中姓名里有‘三’的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;%三%&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三 | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 5    | 李三 | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2、-应用"><a href="#1-3-2、-应用" class="headerlink" title="1.3.2、_应用"></a>1.3.2、_应用</h4><p>匹配单个任意字符，它常用来限制表达式的字符长度语句。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 like _字符串_;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中姓名里含有‘红’字，二个字的学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sname like &#x27;_红&#x27; or sname like &#x27;红_&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、模糊查询应用"><a href="#二、模糊查询应用" class="headerlink" title="二、模糊查询应用"></a>二、模糊查询应用</h2><h3 id="2-1、-应用"><a href="#2-1、-应用" class="headerlink" title="2.1、[ ]应用"></a>2.1、[ ]应用</h3><p>指定一个字符、字符串或范围，要求所匹配对象为它们中的任一个。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 regexp [字符串]字符串;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中姓名里有张和李的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sname regexp &#x27;[张李]&#x27;;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三    | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四    | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红    | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八    | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 三李    | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">6 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中姓名为张红和李红的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#[张李]红  张红 李红</span><br><span class="line">mysql&gt; select * from students where sname regexp &#x27;[张李]红&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 3    | 张红 | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄包含789这几个数字的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where age regexp &#x27;[789]&#x27;;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三    | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 3    | 张红    | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八    | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 5    | 三李    | 男  | 19   | 60.0    | 88.0 | 2017-09-01 | 他来自湖北 |</span><br><span class="line">| 7    | 刘红    | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">6 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>如 [ ] 内有一系列字符（01234、abcde之类的）则可略写为“0-4”、“a-e”</p>
<h3 id="2-2、-应用"><a href="#2-2、-应用" class="headerlink" title="2.2、[^]应用"></a>2.2、[^]应用</h3><p>其取值和 [] 相同，但它要求所匹配对象为指定字符以外的任一个字符。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 regexp [^字符串]字符串;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询学生信息表中姓名不是张红、李红，而是其他红的人的信息。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sname regexp &#x27;[^张李]红&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 7    | 刘红 | 女  | 18   | 90.0    | 98.0 | 2017-09-01 | 他来自甘肃 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中年龄不包含7891这几个数字的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where age regexp &#x27;[^7891]&#x27;;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 2    | 李四 | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 6    | 王六 | 女  | 20   | 50.0    | 70.0 | 2017-09-01 | 他来自湖南 |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询学生信息表中姓张和姓李的人的信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students where sname regexp &#x27;^[张李]&#x27;;</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname     | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| 1    | 张三    | 男  | 19   | 98.5    | 88.0 | 2017-09-01 | 他来自四川 |</span><br><span class="line">| 2    | 李四    | 男  | 20   | 80.0    | 88.0 | 2017-09-01 | 他来自重庆 |</span><br><span class="line">| 3    | 张红    | 女  | 19   | 86.0    | 80.0 | 2017-09-01 | 他来自北京 |</span><br><span class="line">| 4    | 张八    | 男  | 18   | 80.0    | 85.0 | 2017-09-01 | 他来自天津 |</span><br><span class="line">| 9    | 李老六 | 男  | 19   | NULL    | NULL | NULL       | NULL            |</span><br><span class="line">+------+-----------+------+------+---------+------+------------+-----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">^[]表示的是：字符串开始的第一个字符</span><br></pre></td></tr></table></figure>

<h1 id="MySQL约束"><a href="#MySQL约束" class="headerlink" title="MySQL约束"></a>MySQL约束</h1><p> 阅读 (201392) </p>
<p> 分享</p>
<p>约束是按照约定（特定）条件限制，管束等意思。约束的作用是添加、删除。</p>
<p>在数据库中对表中的数据进行限制，保证数据的正确性、有效性和完整性。一个表如果添加了约束，不正确的数据将无法插入到表中。约束在创建表的时候添加比较合适。</p>
<h2 id="一、约束概述"><a href="#一、约束概述" class="headerlink" title="一、约束概述"></a>一、约束概述</h2><h3 id="1-1、什么是约束"><a href="#1-1、什么是约束" class="headerlink" title="1.1、什么是约束"></a>1.1、什么是约束</h3><p>约束用于限制加入表的数据的类型。</p>
<p>可以在创建表时规定约束（通过 CREATE TABLE 语句），或者在表创建之后也可以（通过 ALTER TABLE 语句）。</p>
<h3 id="1-2、约束作用"><a href="#1-2、约束作用" class="headerlink" title="1.2、约束作用"></a>1.2、约束作用</h3><p>对表中的数据进行限制，保证数据的正确性、有效性和完整性。一个表如果添加了约束，不正确的数据将无法插入到表中。约束在创建表的时候添加比较合适。</p>
<h3 id="1-3、约束分类"><a href="#1-3、约束分类" class="headerlink" title="1.3、约束分类"></a>1.3、约束分类</h3><p><strong>主键</strong> primary key</p>
<p><strong>唯一</strong> unique</p>
<p><strong>非空</strong> not null</p>
<p><strong>默认值</strong> default</p>
<p><strong>外键</strong> foreign key</p>
<p><strong>检查约束</strong> check</p>
<h2 id="二、主键约束"><a href="#二、主键约束" class="headerlink" title="二、主键约束"></a>二、主键约束</h2><h3 id="2-1、主键约束格式"><a href="#2-1、主键约束格式" class="headerlink" title="2.1、主键约束格式"></a>2.1、主键约束格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式1：</span><br><span class="line">字段名 字段类型 primary key  #在create table 语句中设置主键</span><br><span class="line">格式2：</span><br><span class="line">alter table 数据库表名 add primary key(字段名); #在已经创建好的数据库表中增加主键</span><br><span class="line">格式3：</span><br><span class="line">alter table 数据库表名 drop primary key; #在已经创建好的数据库表中删除主键</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>非空 not null</p>
<p>唯一</p>
<h3 id="2-2、主键约束作用"><a href="#2-2、主键约束作用" class="headerlink" title="2.2、主键约束作用"></a>2.2、主键约束作用</h3><p>是每一条记录的唯一标识，不会重复。</p>
<p><strong>如：</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240514001.png" alt="image20200210091102251.png"></p>
<p><strong>注意：</strong></p>
<p>通常主键，单独给每张表设计一个 id 的字段，把 id 作为主键。</p>
<p>主键是给数据库和程序使用的，不是给最终的客户使用的。所以主键有没有含义没有关系，只要不重复，非空就行。</p>
<h3 id="2-3、主键约束应用"><a href="#2-3、主键约束应用" class="headerlink" title="2.3、主键约束应用"></a>2.3、主键约束应用</h3><p>创建一个老师表，里面包含了字段名（tid，tname，sex，age），将tid做为主键</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table teacher(</span><br><span class="line">   tid int primary key, -- sid为主键</span><br><span class="line">   tname varchar(20),</span><br><span class="line">   sex varchar(2),</span><br><span class="line">   age int</span><br><span class="line">);</span><br><span class="line">mysql&gt; create table teacher(</span><br><span class="line">   tid int primary key, -- sid为主键</span><br><span class="line">   tname varchar(20),</span><br><span class="line">   sex varchar(2),</span><br><span class="line">   age int</span><br><span class="line">);</span><br><span class="line">Query OK, 0 rows affected (0.10 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc teacher;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| tid   | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| tname | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex   | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>往老师表中插入记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#插入记录</span><br><span class="line">mysql&gt; insert into teacher values(1,&#x27;李小四&#x27;,&#x27;男&#x27;,45);</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br><span class="line">#插入相同记录</span><br><span class="line">mysql&gt; insert into teacher values(1,&#x27;李小四&#x27;,&#x27;男&#x27;,45);</span><br><span class="line">Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line">mysql&gt; select * from teacher;</span><br><span class="line">+-----+-----------+------+------+</span><br><span class="line">| tid | tname     | sex  | age  |</span><br><span class="line">+-----+-----------+------+------+</span><br><span class="line">| 1   | 李小四 | 男  | 45   |</span><br><span class="line">+-----+-----------+------+------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">#插入一条null记录</span><br><span class="line">mysql&gt; insert into teacher values(null,&#x27;李小四&#x27;,&#x27;男&#x27;,45);</span><br><span class="line">Column &#x27;tid&#x27; cannot be null</span><br></pre></td></tr></table></figure>

<p>去掉老师表中的主键约束</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table teacher drop primary key;</span><br><span class="line">Query OK, 1 rows affected (0.07 秒)</span><br><span class="line">mysql&gt; desc teacher;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| tid   | int(11)     | NO   |     | NULL    |       |</span><br><span class="line">| tname | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex   | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>为老师表添加主键约束</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table teacher add primary key(tid);</span><br><span class="line">Query OK, 0 rows affected (0.25 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc teacher;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| tid   | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| tname | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex   | varchar(2)  | YES  |     | NULL    |       |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、主键自增"><a href="#三、主键自增" class="headerlink" title="三、主键自增"></a>三、主键自增</h2><h3 id="3-1、主键自增格式"><a href="#3-1、主键自增格式" class="headerlink" title="3.1、主键自增格式"></a>3.1、主键自增格式</h3><p>在数据库表中，主键一般情况下，我们是用一个id字段来表示，如果让我们自己添加的话要做到不能重复、不能为空就比较麻烦，所以主键我们都是设置为自动增长。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">字段名 字段类型 primary key auto_increment</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>创建一个用户表，表里面有用户名和密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table user(</span><br><span class="line">   uid int primary key auto_increment,</span><br><span class="line">   uname varchar(20),</span><br><span class="line">   pword varchar(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>在用户表中插入二条件数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into user(uname,pword)values(&#x27;zutuanxue01&#x27;,&#x27;00001&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.06 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user(uname,pword)values(&#x27;zutuanxue02&#x27;,&#x27;00002&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| uid | uname      | pword |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| 1   | zutuanxue01 | 00001 |</span><br><span class="line">| 2   | zutuanxue02 | 00002 |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>设置表字段的自增长后，他的默认起始值从1开始</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into user values(null,&#x27;zutuanxue03&#x27;,&#x27;00003&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| uid | uname      | pword |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| 1   | zutuanxue01 | 00001 |</span><br><span class="line">| 2   | zutuanxue02 | 00002 |</span><br><span class="line">| 3   | zutuanxue03 | 00003 |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、修改主键自增起始值"><a href="#3-2、修改主键自增起始值" class="headerlink" title="3.2、修改主键自增起始值"></a>3.2、修改主键自增起始值</h3><h4 id="3-2-1、创建表后修改"><a href="#3-2-1、创建表后修改" class="headerlink" title="3.2.1、创建表后修改"></a>3.2.1、创建表后修改</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 auto_increment=起始值;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>修改用户表中主键自增长的起始值为100</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table user auto_increment=100;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user values(null,&#x27;zutuanxue04&#x27;,&#x27;00004&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.10 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| uid | uname      | pword |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| 1   | zutuanxue01 | 00001 |</span><br><span class="line">| 2   | zutuanxue02 | 00002 |</span><br><span class="line">| 3   | zutuanxue03 | 00003 |</span><br><span class="line">| 100 | zutuanxue04 | 00004 |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-2、创建表时修改"><a href="#3-2-2、创建表时修改" class="headerlink" title="3.2.2、创建表时修改"></a>3.2.2、创建表时修改</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 数据库表名(</span><br><span class="line">  字段名1 字段类型 primary key auto_increment,</span><br><span class="line">  字段名2 字段类型,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型,</span><br><span class="line">)auto_increment=超始值;</span><br></pre></td></tr></table></figure>

<p>创建一个新用户表，表里面有用户名和密码，并设置起始值为100</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table new_user(</span><br><span class="line">   uid int primary key auto_increment,</span><br><span class="line">   uname varchar(20),</span><br><span class="line">   pword varchar(20)</span><br><span class="line">)auto_increment=100;</span><br></pre></td></tr></table></figure>

<p>在新用户表中插入一条件数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into new_user(uname,pword)values(&#x27;zutuanxue01&#x27;,&#x27;00001&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.10 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from new_user;</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| uid | uname      | pword |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">| 100 | zutuanxue01 | 00001 |</span><br><span class="line">+-----+------------+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、记录删除后对自增的影响"><a href="#3-3、记录删除后对自增的影响" class="headerlink" title="3.3、记录删除后对自增的影响"></a>3.3、记录删除后对自增的影响</h3><h4 id="3-3-1、delete"><a href="#3-3-1、delete" class="headerlink" title="3.3.1、delete"></a>3.3.1、delete</h4><p>删除记录后，对自增长字段没有影响</p>
<p><strong>案例：</strong></p>
<p>删除用户数据库表中的所有记录，在插入1条记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; delete from user;</span><br><span class="line">Query OK, 4 rows affected (0.11 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user values(null,&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| uid | uname    | pword    |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| 101 | zhangsan | zhangsan |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-2、truncate"><a href="#3-3-2、truncate" class="headerlink" title="3.3.2、truncate"></a>3.3.2、truncate</h4><p>删除记录后，自增长字段重新从1开始</p>
<p><strong>案例：</strong></p>
<p>删除用户数据库表中的所有记录，在插入1条记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; truncate user;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into user values(null,&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user;</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| uid | uname    | pword    |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| 1   | zhangsan | zhangsan |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">mysql&gt; truncate new_user;</span><br><span class="line">Query OK, 0 rows affected (0.06 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into new_user values(null,&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from new_user;</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| uid | uname    | pword    |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">| 1   | zhangsan | zhangsan |</span><br><span class="line">+-----+----------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、唯一约束"><a href="#四、唯一约束" class="headerlink" title="四、唯一约束"></a>四、唯一约束</h2><p>唯一约束就是：设计表中的某一个字段不能出现重复的记录</p>
<h3 id="4-1、唯一约束格式"><a href="#4-1、唯一约束格式" class="headerlink" title="4.1、唯一约束格式"></a>4.1、唯一约束格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">字段名 字段类型 unique  #在create table 语句中设置唯一约束</span><br></pre></td></tr></table></figure>

<h3 id="4-2、唯一约束应用"><a href="#4-2、唯一约束应用" class="headerlink" title="4.2、唯一约束应用"></a>4.2、唯一约束应用</h3><h4 id="4-2-1、插入相同记录"><a href="#4-2-1、插入相同记录" class="headerlink" title="4.2.1、插入相同记录"></a>4.2.1、插入相同记录</h4><p><strong>案例：</strong></p>
<p>创建一个新的表t1，表里包含字段名（id,name）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table t1(</span><br><span class="line">  id int,</span><br><span class="line">  name varchar(20) unique -- 姓名唯一，不能出现重复</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>往表中插入一条记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t1 values(1,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br></pre></td></tr></table></figure>

<p>继续插入同一条件记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t1 values(1,&#x27;zhangsan&#x27;);</span><br><span class="line">Duplicate entry &#x27;zhangsan&#x27; for key &#x27;name&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-1、插入null记录"><a href="#4-2-1、插入null记录" class="headerlink" title="4.2.1、插入null记录"></a>4.2.1、插入null记录</h4><p>案例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t1 values(1,null);</span><br><span class="line">Query OK, 1 rows affected (0.02 秒)</span><br><span class="line">mysql&gt; insert into t1 values(1,null);</span><br><span class="line">Query OK, 1 rows affected (0.05 秒)</span><br><span class="line">mysql&gt; select * from t1;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | name     |</span><br><span class="line">+------+----------+</span><br><span class="line">| 1    | zhangsan |</span><br><span class="line">| 1    | NULL     |</span><br><span class="line">| 1    | NULL     |</span><br><span class="line">+------+----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>null表示的是没有数据，所有不存在重复的问题</p>
<h2 id="五、非空约束"><a href="#五、非空约束" class="headerlink" title="五、非空约束"></a>五、非空约束</h2><p>非空约束就是：数据库表中的字段的值，不能为null</p>
<h3 id="5-1、非空约束格式"><a href="#5-1、非空约束格式" class="headerlink" title="5.1、非空约束格式"></a>5.1、非空约束格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">字段名 字段类型 not null  #在create table 语句中设置字段值不能为null</span><br></pre></td></tr></table></figure>

<h3 id="5-2、非空约束应用"><a href="#5-2、非空约束应用" class="headerlink" title="5.2、非空约束应用"></a>5.2、非空约束应用</h3><p><strong>案例：</strong></p>
<p>创建一个新的表t2，表里包含字段名（id,name）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table t2(</span><br><span class="line">  id int,</span><br><span class="line">  name varchar(20) not null -- 姓名的记录不能为null</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>往表中插入一条记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t2 values(1,&#x27;lisi&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.10 秒)</span><br></pre></td></tr></table></figure>

<p>往表中插入一条姓名为null的记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t2 values(1, null);</span><br><span class="line">Column &#x27;name&#x27; cannot be null</span><br><span class="line">mysql&gt; select * from t2;</span><br><span class="line">+------+------+</span><br><span class="line">| id   | name |</span><br><span class="line">+------+------+</span><br><span class="line">| 1    | lisi |</span><br><span class="line">+------+------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>字段设置了非空与唯一约束与主键区别？</p>
<p>主键数在一个表中，只能有一个。自增长只能用在主键上</p>
<p>非空与唯一约束可以设置在N个字段上</p>
<h2 id="六、默认值"><a href="#六、默认值" class="headerlink" title="六、默认值"></a>六、默认值</h2><p>默认值就是：当我们在增加记录的时候如果不去设置值，那么自动的会用默认值补齐，字段默认的默认值是null</p>
<h3 id="6-1、默认值格式"><a href="#6-1、默认值格式" class="headerlink" title="6.1、默认值格式"></a>6.1、默认值格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">字段名 字段类型 default 默认值  #在create table 语句中设置字段的默认值，不设置默认值为null</span><br></pre></td></tr></table></figure>

<h3 id="6-2、默认值应用"><a href="#6-2、默认值应用" class="headerlink" title="6.2、默认值应用"></a>6.2、默认值应用</h3><p><strong>案例：</strong></p>
<p>创建一个新的表t3，表里包含字段名（id,name）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table t3(</span><br><span class="line">  id int,</span><br><span class="line">  name varchar(20) default &#x27;lisi&#x27; -- 增加时如果不加入姓名，姓名为‘lisi’</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>往表中插入一条记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t3 values(1,&#x27;zhangsan&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p>往表中插入一条id为1的记录，其他信息不用增加</p>
<p><strong>方法一：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t3(id) values(1);</span><br><span class="line">Query OK, 1 rows affected (0.06 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t3;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | name     |</span><br><span class="line">+------+----------+</span><br><span class="line">| 1    | zhangsan |</span><br><span class="line">| 1    | lisi     |</span><br><span class="line">+------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>方法二：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t3 values(1,default);</span><br><span class="line">Query OK, 1 rows affected (0.09 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t3;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | name     |</span><br><span class="line">+------+----------+</span><br><span class="line">| 1    | zhangsan |</span><br><span class="line">| 1    | lisi     |</span><br><span class="line">| 1    | lisi     |</span><br><span class="line">+------+----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="七、外键约束产生"><a href="#七、外键约束产生" class="headerlink" title="七、外键约束产生"></a>七、外键约束产生</h2><h3 id="7-1、数据冗余"><a href="#7-1、数据冗余" class="headerlink" title="7.1、数据冗余"></a>7.1、数据冗余</h3><p>数据冗余是指数据之间的重复，也可以说是同一数据存储在不同数据文件中的现象。</p>
<h3 id="7-2、表的数据冗余"><a href="#7-2、表的数据冗余" class="headerlink" title="7.2、表的数据冗余"></a>7.2、表的数据冗余</h3><p><strong>员工表</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240575339.png" alt="image20200213223102058.png"></p>
<p>除了数据冗余的问题外，假如我们的研发部搬到了北京，这这时候，我们就要去修改我们的研发部的地点，这样的修改数据的时候也会很麻烦。</p>
<p><strong>问题解决</strong></p>
<p>数据冗余、数据增、删、改？</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240588322.png" alt="image20200213224403897.png"></p>
<h3 id="7-3、为什么要使用外键约束"><a href="#7-3、为什么要使用外键约束" class="headerlink" title="7.3、为什么要使用外键约束"></a>7.3、为什么要使用外键约束</h3><p><strong>新的问题？</strong></p>
<p>假如我们在员工表中增加一条记录</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240601021.png" alt="image20200213225528342.png"></p>
<p>员工表中的记录dep_id中的3，在部门表中并没有这个id的记录。我们也将这条记录加入了进去。那么我们的员工王六就没有对应的部门了。这种情况在实际的应用中是不允许的。</p>
<p><strong>实际情况：</strong></p>
<p>我们员工表中的dep_id的值，只能是部门表中存在的id。</p>
<p><strong>解决方法：</strong></p>
<p>使用外键约束</p>
<h3 id="7-4、什么是外键约束"><a href="#7-4、什么是外键约束" class="headerlink" title="7.4、什么是外键约束"></a>7.4、什么是外键约束</h3><p>一张表的一个字段受限于另外一张表的一个字段对应的值。这里涉及到两张表：被引用的表叫主表（父表），另外一张叫从表（子表）。</p>
<p><strong>子表：</strong>定义了外键的表，外键的取值要么取父表中字段对应的值，要么取NULL值，严重受限于父表</p>
<p><strong>父表：</strong>被引用的字段要具有唯一性（绝大多数都是用的父表的主键）</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603240617595.png" alt="image20200213230844619.png"></p>
<h3 id><a href="#" class="headerlink" title></a></h3><h2 id="八、外键约束"><a href="#八、外键约束" class="headerlink" title="八、外键约束"></a>八、外键约束</h2><h3 id="8-1、外键约束格式"><a href="#8-1、外键约束格式" class="headerlink" title="8.1、外键约束格式"></a>8.1、外键约束格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式一：</span><br><span class="line">[constraint][外键约束名称] foreign key(外键字段名) references 主表名称(主键字段名);  #在create table时设置 </span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>创建一个班级表：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table classes( -- 班级表</span><br><span class="line">cid int primary key auto_increment,-- 班级ID</span><br><span class="line">cname varchar(20),-- 班级名称  </span><br><span class="line">crenshu int(3),-- 班级人数</span><br><span class="line">cmajor varchar(10),-- 专业</span><br><span class="line">cmark text -- 备注</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; desc classes;</span><br><span class="line">+---------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field   | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+---------+-------------+------+-----+---------+----------------+</span><br><span class="line">| cid     | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| cname   | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| crenshu | int(3)      | YES  |     | NULL    |                |</span><br><span class="line">| cmajor  | varchar(10) | YES  |     | NULL    |                |</span><br><span class="line">| cmark   | text        | YES  |     | NULL    |                |</span><br><span class="line">+---------+-------------+------+-----+---------+----------------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>插入班级信息:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into classes values(null,&#x27;一班&#x27;,60,&#x27;计算机&#x27;,&#x27;学校的王牌专业&#x27;),(null,&#x27;二班&#x27;,50,&#x27;财务会计&#x27;,&#x27;学校最好就业专业&#x27;);</span><br><span class="line">Query OK, 2 rows affected (0.06 秒)</span><br><span class="line">mysql&gt; select * from classes;</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| cid | cname  | crenshu | cmajor       | cmark                    |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| 3   | 一班 | 60      | 计算机    | 学校的王牌专业    |</span><br><span class="line">| 4   | 二班 | 50      | 财务会计 | 学校最好就业专业 |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>创建一个学生表（与班级表建立主外键关联）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table stu  -- 学生表</span><br><span class="line">(</span><br><span class="line">sid int primary key auto_increment, -- 学生ID</span><br><span class="line">sname varchar(20),-- 学生姓名</span><br><span class="line">ssex varchar(2),-- 性别</span><br><span class="line">stell varchar(11),-- 电话号码</span><br><span class="line">sdate date ,-- 入学日期</span><br><span class="line">srmark varchar(30),-- 备注</span><br><span class="line">sclassid int,-- 外键对应主表中的主建  </span><br><span class="line">-- 创建外键约束</span><br><span class="line">constraint stu_sclassid_fk foreign key (sclassid) references classes(cid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| sid      | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| ssex     | varchar(2)  | YES  |     | NULL    |                |</span><br><span class="line">| stell    | varchar(11) | YES  |     | NULL    |                |</span><br><span class="line">| sdate    | date        | YES  |     | NULL    |                |</span><br><span class="line">| srmark   | varchar(30) | YES  |     | NULL    |                |</span><br><span class="line">| sclassid | int(11)     | YES  | MUL | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">7 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>PRI主键约束； UNI唯一约束； MUL可以重复。</p>
<p>插入学生信息：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into stu values(null,&#x27;张三&#x27;,&#x27;男&#x27;,&#x27;13111111111&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩不错&#x27;,3);</span><br><span class="line">Query OK, 1 rows affected (0.03 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into stu values(null,&#x27;李四&#x27;,&#x27;男&#x27;,&#x27;13112211112&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩一般&#x27;,1);</span><br><span class="line">Cannot add or update a child row: a foreign key constraint fails (`zutuanxue`.`stu`, CONSTRAINT `stu_sclassid_fk` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 3        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line">格式二：</span><br><span class="line">alter table 从表名称 add [constraint][外键约束名称] foreign key(外键字段名) references 主表名称(主键字段名);  #建好表后修改</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>创建一个学生表：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table stu1  -- 学生表</span><br><span class="line">(</span><br><span class="line">sid int primary key auto_increment, -- 学生ID</span><br><span class="line">sname varchar(20),-- 学生姓名</span><br><span class="line">ssex varchar(2),-- 性别</span><br><span class="line">stell varchar(11),-- 电话号码</span><br><span class="line">sdate date ,-- 入学日期</span><br><span class="line">srmark varchar(30),-- 备注</span><br><span class="line">sclassid int -- 外键对应主表中的主建  </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| sid      | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| ssex     | varchar(2)  | YES  |     | NULL    |                |</span><br><span class="line">| stell    | varchar(11) | YES  |     | NULL    |                |</span><br><span class="line">| sdate    | date        | YES  |     | NULL    |                |</span><br><span class="line">| srmark   | varchar(30) | YES  |     | NULL    |                |</span><br><span class="line">| sclassid | int(11)     | YES  |     | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>为我们的学生表stu1加入我们的外键约束</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table stu1 add constraint stu_sclassid_fk1</span><br><span class="line">foreign key (sclassid) references classes(cid);</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| sid      | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| ssex     | varchar(2)  | YES  |     | NULL    |                |</span><br><span class="line">| stell    | varchar(11) | YES  |     | NULL    |                |</span><br><span class="line">| sdate    | date        | YES  |     | NULL    |                |</span><br><span class="line">| srmark   | varchar(30) | YES  |     | NULL    |                |</span><br><span class="line">| sclassid | int(11)     | YES  | MUL | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>插入学生信息：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into stu1 values(null,&#x27;张三&#x27;,&#x27;男&#x27;,&#x27;13111111111&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩不错&#x27;,3);</span><br><span class="line">Query OK, 1 rows affected (0.07 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into stu1 values(null,&#x27;李四&#x27;,&#x27;男&#x27;,&#x27;13112211112&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩一般&#x27;,1);</span><br><span class="line">Cannot add or update a child row: a foreign key constraint fails (`zutuanxue`.`stu1`, CONSTRAINT `stu_sclassid_fk1` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu1;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 3        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="8-2、删除外键约束"><a href="#8-2、删除外键约束" class="headerlink" title="8.2、删除外键约束"></a>8.2、删除外键约束</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 从表 drop foreign key 外键约束名称;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除stu1中的外表关联</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table stu1 drop foreign key stu_sclassid_fk1;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc stu1;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| sid      | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sname    | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| ssex     | varchar(2)  | YES  |     | NULL    |                |</span><br><span class="line">| stell    | varchar(11) | YES  |     | NULL    |                |</span><br><span class="line">| sdate    | date        | YES  |     | NULL    |                |</span><br><span class="line">| srmark   | varchar(30) | YES  |     | NULL    |                |</span><br><span class="line">| sclassid | int(11)     | YES  | MUL | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">7 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into stu1 values(null,&#x27;李四&#x27;,&#x27;男&#x27;,&#x27;13112211112&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩一般&#x27;,1);</span><br><span class="line">Query OK, 1 rows affected (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu1;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 3        |</span><br><span class="line">| 3   | 李四 | 男  | 13112211112 | 2019-09-01 | 学习成绩一般 | 1        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="九、级联操作"><a href="#九、级联操作" class="headerlink" title="九、级联操作"></a>九、级联操作</h2><h3 id="9-1、为什么要级联"><a href="#9-1、为什么要级联" class="headerlink" title="9.1、为什么要级联"></a>9.1、为什么要级联</h3><p>当我们的主表班级表中的cid发生变化时，我们应该如何去改变我们的从表学生表中的sclassid？这个时候我们就需要级联。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; delete from classes;</span><br><span class="line">Cannot delete or update a parent row: a foreign key constraint fails (`zutuanxue`.`stu`, CONSTRAINT `stu_sclassid_fk` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br><span class="line">mysql&gt; delete from classes where cid=3;</span><br><span class="line">Cannot delete or update a parent row: a foreign key constraint fails (`zutuanxue`.`stu`, CONSTRAINT `stu_sclassid_fk` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br><span class="line">mysql&gt; update classes set cid=1 where cid=3;</span><br><span class="line">Cannot delete or update a parent row: a foreign key constraint fails (`zutuanxue`.`stu`, CONSTRAINT `stu_sclassid_fk` FOREIGN KEY (`sclassid`) REFERENCES `classes` (`cid`))</span><br></pre></td></tr></table></figure>

<h3 id="9-2、级联是什么"><a href="#9-2、级联是什么" class="headerlink" title="9.2、级联是什么"></a>9.2、级联是什么</h3><p>在修改和删除主表的主键时，同时更新或删除副表的外键值，称为级联操作。</p>
<p>级联操作分为二种：级联更新、级联删除</p>
<h3 id="9-2、级联操作方式"><a href="#9-2、级联操作方式" class="headerlink" title="9.2、级联操作方式"></a>9.2、级联操作方式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">on update cascade #级联更新</span><br><span class="line">on delete cascade #级联操作</span><br></pre></td></tr></table></figure>

<p>只能是创建表的时候创建级联关系。更新主表中的主键，从表中的外键列也自动同步更新</p>
<p><strong>案例：</strong></p>
<p>创建一个学生表（与班级表建立主外键关联，并加入级联操作）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table stu  -- 学生表</span><br><span class="line">(</span><br><span class="line">sid int primary key auto_increment, -- 学生ID</span><br><span class="line">sname varchar(20),-- 学生姓名</span><br><span class="line">ssex varchar(2),-- 性别</span><br><span class="line">stell varchar(11),-- 电话号码</span><br><span class="line">sdate date ,-- 入学日期</span><br><span class="line">srmark varchar(30),-- 备注</span><br><span class="line">sclassid int,-- 外键对应主表中的主建  </span><br><span class="line">-- 创建外键约束</span><br><span class="line">constraint stu_sclassid_fk foreign key (sclassid) references classes(cid) on update cascade on delete cascade</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>在学生表中插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into stu values(null,&#x27;张三&#x27;,&#x27;男&#x27;,&#x27;13111111111&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩不错&#x27;,3);</span><br><span class="line">Query OK, 1 rows affected (0.11 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into stu values(null,&#x27;李四&#x27;,&#x27;男&#x27;,&#x27;13112211112&#x27;,&#x27;2019-09-01&#x27;,&#x27;学习成绩一般&#x27;,4);</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 3        |</span><br><span class="line">| 2   | 李四 | 男  | 13112211112 | 2019-09-01 | 学习成绩一般 | 4        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>修改我们班级表中的主键</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from classes;</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| cid | cname  | crenshu | cmajor       | cmark                    |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| 3   | 一班 | 60      | 计算机    | 学校的王牌专业    |</span><br><span class="line">| 4   | 二班 | 50      | 财务会计 | 学校最好就业专业 |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; update classes set cid=1 where cid=3;</span><br><span class="line">Query OK, 1 rows affected (0.06 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from classes;</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| cid | cname  | crenshu | cmajor       | cmark                    |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">| 1   | 一班 | 60      | 计算机    | 学校的王牌专业    |</span><br><span class="line">| 4   | 二班 | 50      | 财务会计 | 学校最好就业专业 |</span><br><span class="line">+-----+--------+---------+--------------+--------------------------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 1        |</span><br><span class="line">| 2   | 李四 | 男  | 13112211112 | 2019-09-01 | 学习成绩一般 | 4        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>删除我们班级表中的主键</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; delete from classes where cid=4;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from classes;</span><br><span class="line">+-----+--------+---------+-----------+-----------------------+</span><br><span class="line">| cid | cname  | crenshu | cmajor    | cmark                 |</span><br><span class="line">+-----+--------+---------+-----------+-----------------------+</span><br><span class="line">| 1   | 一班 | 60      | 计算机 | 学校的王牌专业 |</span><br><span class="line">+-----+--------+---------+-----------+-----------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| sid | sname  | ssex | stell       | sdate      | srmark             | sclassid |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">| 1   | 张三 | 男  | 13111111111 | 2019-09-01 | 学习成绩不错 | 1        |</span><br><span class="line">+-----+--------+------+-------------+------------+--------------------+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="十、检查约束"><a href="#十、检查约束" class="headerlink" title="十、检查约束"></a>十、检查约束</h2><h3 id="10-1、什么是检查约束"><a href="#10-1、什么是检查约束" class="headerlink" title="10.1、什么是检查约束"></a>10.1、什么是检查约束</h3><p>检查约束指定某列中的值必须满足布尔表达式，根据用户自己的需求来进行限制。</p>
<h3 id="10-2、检查约束使用"><a href="#10-2、检查约束使用" class="headerlink" title="10.2、检查约束使用"></a>10.2、检查约束使用</h3><h4 id="10-2-1、行级添加"><a href="#10-2-1、行级添加" class="headerlink" title="10.2.1、行级添加"></a>10.2.1、行级添加</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名</span><br><span class="line">(</span><br><span class="line">  check (字段名1 != 字段名1),</span><br><span class="line">  字段名1 字段类型 check (表达式),</span><br><span class="line">  字段名2 字段类型 constraint 唯一约束名 check (表达式) [not enforced]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>表达式中可以包含该字段名: 字段名 &gt; 0<br>表达式注意事项<br>1.允许使用文字，内置函数和运算符<br>2.不允许在使用了auto_increment的列上使用<br>3.不允许存储函数和用户定义的函数<br>4.不允许子查询等<br>如果省略或指定为enforced，则创建并强制执行约束。<br>如果指定为not enforced，则创建约束但不强制执行。</p>
<p><strong>案例：</strong></p>
<p>创建一个表t4</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table t4</span><br><span class="line">(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  username varchar(32),</span><br><span class="line">  phone varchar(11) check(length(phone) =11)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t4 values(null,&#x27;zhangsan&#x27;,&#x27;13812221222&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t4 values(null,&#x27;zhangsan&#x27;,&#x27;1381222125&#x27;);</span><br><span class="line">Check constraint &#x27;t4_chk_1&#x27; is violated.</span><br></pre></td></tr></table></figure>

<h4 id="10-2-2、表级添加"><a href="#10-2-2、表级添加" class="headerlink" title="10.2.2、表级添加"></a>10.2.2、表级添加</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名</span><br><span class="line">(</span><br><span class="line">  字段名1 字段类型,</span><br><span class="line">  字段名2 字段类型,</span><br><span class="line">  [constraint 检查约束名] check(布尔表达式) [ not enforced]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>创建一个表t5</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table t5</span><br><span class="line">(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  username varchar(32),</span><br><span class="line">  phone varchar(11),</span><br><span class="line">  constraint t5_check_phone check(length(phone) =11)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t5 values(null,&#x27;zhangsan&#x27;,&#x27;13812222222&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t5 values(null,&#x27;zhangsan&#x27;,&#x27;1381222222&#x27;);</span><br><span class="line">Check constraint &#x27;t4_check_phone&#x27; is violated.</span><br></pre></td></tr></table></figure>

<h4 id="10-2-3、表后添加"><a href="#10-2-3、表后添加" class="headerlink" title="10.2.3、表后添加"></a>10.2.3、表后添加</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 add constraint 检查约束名 check(检查约束);</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>创建一个表t6</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table t6</span><br><span class="line">(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  username varchar(32),</span><br><span class="line">  phone varchar(11)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table t6 add constraint t6_check_phone check(length(phone)=11);</span><br><span class="line">Query OK, 0 rows affected (0.09 秒)</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t6 values(null,&#x27;zhangsan&#x27;,&#x27;13812221222&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t6 values(null,&#x27;zhangsan&#x27;,&#x27;1381222125&#x27;);</span><br><span class="line">Check constraint &#x27;t6_check_phone&#x27; is violated.</span><br></pre></td></tr></table></figure>

<h4 id="10-2-4、约束删除"><a href="#10-2-4、约束删除" class="headerlink" title="10.2.4、约束删除"></a>10.2.4、约束删除</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据库表名 drop check 检查约束名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>删除t6表中的检查约束t6_check_phone</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table t6 drop check t6_check_phone;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into t6 values(null,&#x27;zhangsan&#x27;,&#x27;1381222125&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="表与表之间关系"><a href="#表与表之间关系" class="headerlink" title="表与表之间关系"></a>表与表之间关系</h1><p> 阅读 (189460) </p>
<p> 分享</p>
<p>可以在数据库图表中的表之间创建关系，以显示一个表中的列与另一个表中的列是如何相链接的。</p>
<p>在一个关系型数据库中，利用关系可以避免多余的数据。</p>
<h2 id="一、表与表之间关系概述"><a href="#一、表与表之间关系概述" class="headerlink" title="一、表与表之间关系概述"></a>一、表与表之间关系概述</h2><h3 id="1-1、什么是表与表之间关系"><a href="#1-1、什么是表与表之间关系" class="headerlink" title="1.1、什么是表与表之间关系"></a>1.1、什么是表与表之间关系</h3><p>在关系型数据库中，为了避免数据冗余，我们的一些表与表之间肯定是有一定的关系。</p>
<p>如：学生表与老师表，部门表与员工表，用户表与权限表等。</p>
<p>在表设计的时候，就应该体现出来表与表之间的这种关系。</p>
<h3 id="1-2、表与表之间关系分类"><a href="#1-2、表与表之间关系分类" class="headerlink" title="1.2、表与表之间关系分类"></a>1.2、表与表之间关系分类</h3><h4 id="1-2-1、一对多关系"><a href="#1-2-1、一对多关系" class="headerlink" title="1.2.1、一对多关系"></a>1.2.1、一对多关系</h4><p>一对多关系是最普通的一种关系。在这种关系中，A 表中的一行可以匹配 B 表中的多行，但是 B 表中的一行只能匹配 A 表中的一行。</p>
<p>只有当一个相关列是一个主键或具有唯一约束时，才能创建一对多关系。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241036981.png" alt="image20200215112949021.png"></p>
<p><strong>注意：</strong></p>
<p>一对多的创建原则：</p>
<p>主外键关连</p>
<h4 id="1-2-2、一对一关系"><a href="#1-2-2、一对一关系" class="headerlink" title="1.2.2、一对一关系"></a>1.2.2、一对一关系</h4><p>在一对一关系中，A 表中的一行最多只能匹配于 B 表中的一行，反之亦然。如果相关列都是主键或都具有唯一约束，则可以创建一对一关系。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241052871.png" alt="image20200215122050731.png"></p>
<p><strong>注意：</strong></p>
<p>一对一的创建原则：</p>
<p>外键唯一：主表的主键和从表的外键（唯一），形成主外键关系，外键唯一 UNIQUE</p>
<p>外键是主键：主表的主键和从表的主键，形成主外键关系</p>
<h4 id="1-2-3、多对多关系"><a href="#1-2-3、多对多关系" class="headerlink" title="1.2.3、多对多关系"></a>1.2.3、多对多关系</h4><p>在多对多关系中，A 表中的一行可以匹配 B 表中的多行，反之亦然。要创建这种关系，需要定义第三个表，称为结合表，它的主键由 A 表和 B 表的外部键组成。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241065129.png" alt="image20200215121200999.png"></p>
<p><strong>注意：</strong></p>
<p>多对多的创建原则：</p>
<p>二个表与中间表创建1对多的关系。</p>
<h2 id="2、一对多应用"><a href="#2、一对多应用" class="headerlink" title="2、一对多应用"></a>2、一对多应用</h2><p>创建一对多关系：主外键关连</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241079269.png" alt="image20200215123556759.png"></p>
<p>新华出版社（Python爬虫、Linux）</p>
<p>海燕出版社（操作系统、数学）</p>
<p>摆渡出版社（英语、网页设计）</p>
<p>大众出版社（）</p>
<p><strong>案例：</strong></p>
<p>这是一个书和出版社的一个例子，书要关联出版社（多个书可以是一个出版社，一个出版社也可以有好多书）。</p>
<p>表的创建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#出版社表（被关联表）</span><br><span class="line">create table press(</span><br><span class="line">id int primary key auto_increment, </span><br><span class="line">name char(20)-- 出版社名字</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#书表（关联表）</span><br><span class="line">create table book(</span><br><span class="line">book_id int primary key auto_increment,</span><br><span class="line">book_name varchar(20),</span><br><span class="line">book_price int,</span><br><span class="line">press_id int,</span><br><span class="line">constraint fk_pressid_id foreign key(press_id) references press(id)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into press(name) values(&#x27;新华出版社&#x27;), (&#x27;海燕出版社&#x27;), (&#x27;摆渡出版社&#x27;), (&#x27;大众出版社&#x27;);</span><br><span class="line">Query OK, 4 rows affected (0.09 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into book(book_name,book_price,press_id) values(&#x27;Python爬虫&#x27;,100,1), (&#x27;Linux&#x27;,80,1), (&#x27;操作系统&#x27;,70,2), (&#x27;数学&#x27;,50,2), (&#x27;英语&#x27;,103,3), (&#x27;网页设计&#x27;,22,3);</span><br><span class="line">Query OK, 6 rows affected (0.07 秒)</span><br></pre></td></tr></table></figure>

<p>查看数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from press;</span><br><span class="line">+----+-----------------+</span><br><span class="line">| id | name            |</span><br><span class="line">+----+-----------------+</span><br><span class="line">| 1  | 新华出版社 |</span><br><span class="line">| 2  | 海燕出版社 |</span><br><span class="line">| 3  | 摆渡出版社 |</span><br><span class="line">| 4  | 大众出版社 |</span><br><span class="line">+----+-----------------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from book;</span><br><span class="line">+---------+--------------+------------+----------+</span><br><span class="line">| book_id | book_name    | book_price | press_id |</span><br><span class="line">+---------+--------------+------------+----------+</span><br><span class="line">| 1       | Python爬虫 | 100        | 1        |</span><br><span class="line">| 2       | Linux        | 80         | 1        |</span><br><span class="line">| 3       | 操作系统 | 70         | 2        |</span><br><span class="line">| 4       | 数学       | 50         | 2        |</span><br><span class="line">| 5       | 英语       | 103        | 3        |</span><br><span class="line">| 6       | 网页设计 | 22         | 3        |</span><br><span class="line">+---------+--------------+------------+----------+</span><br><span class="line">6 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、一对一应用"><a href="#三、一对一应用" class="headerlink" title="三、一对一应用"></a>三、一对一应用</h2><p>创建一对一：外键唯一，user_id唯一对应一个uid，user_id必须在uid里出现</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241161787.png" alt="image20200215164955805.png"></p>
<p><strong>案例：</strong></p>
<p>用户和管理员（只有管理员才可以登录，一个管理员对应一个用户）</p>
<p>表创建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#用户表（被关联表）</span><br><span class="line">create table user(</span><br><span class="line">id int primary key auto_increment, #主键自增</span><br><span class="line">name char(10)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#管理员表（关联表）</span><br><span class="line">create table manager(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">user_id int unique,</span><br><span class="line">password varchar(16),</span><br><span class="line">foreign key(user_id) references user(id)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into user(name)values(&#x27;susan1&#x27;),(&#x27;susan2&#x27;),(&#x27;susan3&#x27;),(&#x27;susan4&#x27;),(&#x27;susan5&#x27;),(&#x27;susan6&#x27;);</span><br><span class="line">Query OK, 6 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into manager(user_id,password) values(4,&#x27;sds156&#x27;),(2,&#x27;531561&#x27;),(6,&#x27;f3swe&#x27;);</span><br><span class="line">Query OK, 3 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p>查看数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from user;</span><br><span class="line">+----+--------+</span><br><span class="line">| id | name   |</span><br><span class="line">+----+--------+</span><br><span class="line">| 1  | susan1 |</span><br><span class="line">| 2  | susan2 |</span><br><span class="line">| 3  | susan3 |</span><br><span class="line">| 4  | susan4 |</span><br><span class="line">| 5  | susan5 |</span><br><span class="line">| 6  | susan6 |</span><br><span class="line">+----+--------+</span><br><span class="line">6 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from manager;</span><br><span class="line">+----+---------+----------+</span><br><span class="line">| id | user_id | password |</span><br><span class="line">+----+---------+----------+</span><br><span class="line">| 1  | 4       | sds156   |</span><br><span class="line">| 2  | 2       | 531561   |</span><br><span class="line">| 3  | 6       | f3swe    |</span><br><span class="line">+----+---------+----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="4、多对多应用"><a href="#4、多对多应用" class="headerlink" title="4、多对多应用"></a>4、多对多应用</h2><p>创建多对多：要把book_id和author_id设置成联合唯一</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241222140.png" alt="image20200215161523092.png"></p>
<p>九阳神功（egon、e3）</p>
<p>葵花宝典（egon、e4）</p>
<p>辟邪剑谱（e1、e2、e3）</p>
<p>降龙十巴掌（e4）</p>
<p><strong>或者</strong></p>
<p>egon（九阳神功、葵花宝典）</p>
<p>e1（辟邪剑谱）</p>
<p>e2（辟邪剑谱）</p>
<p>e3（九阳神功、辟邪剑谱）</p>
<p>e4（葵花宝典、降龙十巴掌）</p>
<p><strong>案例：</strong></p>
<p>这是一个书和作者的一个例子，书要关联作者（一个作者可以写多个书，一本书也可以有多个作者，双向的一对多，即多对多）。</p>
<p>表创建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#书表（被关联表）</span><br><span class="line">create table book1(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(10),</span><br><span class="line">price float(3,2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#作者表（被关联表）</span><br><span class="line">create table author(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name char(5)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#作者和书表（关联表）</span><br><span class="line">create table author2book(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">book_id int not null,</span><br><span class="line">author_id int not null,</span><br><span class="line">unique(book_id,author_id),</span><br><span class="line">foreign key(book_id) references book1(id)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade,</span><br><span class="line">foreign key(author_id) references author(id)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into book1(name,price) values(&#x27;九阳神功&#x27;,9.9), (&#x27;葵花宝典&#x27;,9.5), (&#x27;辟邪剑谱&#x27;,5),  (&#x27;降龙十巴掌&#x27;,7.3);</span><br><span class="line">Query OK, 4 rows affected (0.09 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into author(name) values(&#x27;egon&#x27;),(&#x27;e1&#x27;),(&#x27;e2&#x27;),(&#x27;e3&#x27;),(&#x27;e4&#x27;);</span><br><span class="line">Query OK, 5 rows affected (0.07 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into author2book(book_id,author_id) values(1,1),(1,4),(2,1),(2,5),(3,2),(3,3),(3,4),(4,5);</span><br><span class="line">Query OK, 8 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p>查看数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from book1;</span><br><span class="line">+----+-----------------+-------+</span><br><span class="line">| id | name            | price |</span><br><span class="line">+----+-----------------+-------+</span><br><span class="line">| 1  | 九阳神功    | 9.90  |</span><br><span class="line">| 2  | 葵花宝典    | 9.50  |</span><br><span class="line">| 3  | 辟邪剑谱    | 5.00  |</span><br><span class="line">| 4  | 降龙十巴掌 | 7.30  |</span><br><span class="line">+----+-----------------+-------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from author;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">| 1  | egon |</span><br><span class="line">| 2  | e1   |</span><br><span class="line">| 3  | e2   |</span><br><span class="line">| 4  | e3   |</span><br><span class="line">| 5  | e4   |</span><br><span class="line">+----+------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from author2book;</span><br><span class="line">+----+---------+-----------+</span><br><span class="line">| id | book_id | author_id |</span><br><span class="line">+----+---------+-----------+</span><br><span class="line">| 1  | 1       | 1         |</span><br><span class="line">| 2  | 1       | 4         |</span><br><span class="line">| 3  | 2       | 1         |</span><br><span class="line">| 4  | 2       | 5         |</span><br><span class="line">| 5  | 3       | 2         |</span><br><span class="line">| 6  | 3       | 3         |</span><br><span class="line">| 7  | 3       | 4         |</span><br><span class="line">| 8  | 4       | 5         |</span><br><span class="line">+----+---------+-----------+</span><br><span class="line">8 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="多表连接查询"><a href="#多表连接查询" class="headerlink" title="多表连接查询"></a>多表连接查询</h1><p> 阅读 (153087) </p>
<p> 分享</p>
<p>连接查询是关系数据库中最主要的查询，主要包括内连接、外连接和交叉连接等。通过连接运算符可以实现多个表查询。连接是关系数据库模型的主要特点，也是它区别于其它类型数据库管理系统的一个标志。 在关系数据库管理系统中，表建立时各数据之间的关系不必确定，常把一个实体的所有信息存放在一个表中。当检索数据时，通过连接操作查询出存放在多个表中的不同实体的信息。连接操作给用户带来很大的灵活性，他们可以在任何时候增加新的数据类型。为不同实体创建新的表，然后通过连接进行查询。</p>
<h2 id="一、多表连接查询概述"><a href="#一、多表连接查询概述" class="headerlink" title="一、多表连接查询概述"></a>一、多表连接查询概述</h2><h3 id="1-1、什么是多表查询"><a href="#1-1、什么是多表查询" class="headerlink" title="1.1、什么是多表查询"></a>1.1、什么是多表查询</h3><p>连接是在多个表之间通过一定的连接条件，使表之间发生关联，进而能从多个表之间获取数据。</p>
<p><strong>比如：</strong></p>
<p>有一个部门表，有一个员工表，我想查询某部门中的所有员工的信息。这时我们要先找出部门ID，通过部门ID查询出对应的员工信息。</p>
<p>这样我们在查询我们需要的信息的时候就应用了多表。所以这就是我们的多表查询。</p>
<h3 id="1-2、多表查询的作用"><a href="#1-2、多表查询的作用" class="headerlink" title="1.2、多表查询的作用"></a>1.2、多表查询的作用</h3><p><strong>比如：</strong></p>
<p>我们想查询员工A的名字和他所在的部门的名字，则需要使用多表查询。</p>
<p>那么我们使用一条 SQL 语句查询多张表，因为查询结果在多张不同的表中。而我们的结果要从每张表取 1 列或多列。这就是多表查询的作用。</p>
<h3 id="1-3、多表查询分类"><a href="#1-3、多表查询分类" class="headerlink" title="1.3、多表查询分类"></a>1.3、多表查询分类</h3><p>多表查询可以分为二类查询：</p>
<p><strong>内连接：</strong>隐匿内连接、显示内连接</p>
<p><strong>外连接：</strong>左外连接、右外连接</p>
<h3 id="1-4、笛卡尔积现象"><a href="#1-4、笛卡尔积现象" class="headerlink" title="1.4、笛卡尔积现象"></a>1.4、笛卡尔积现象</h3><h4 id="1-4-1、数据准备"><a href="#1-4-1、数据准备" class="headerlink" title="1.4.1、数据准备"></a>1.4.1、数据准备</h4><p>创建表和数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#部门表</span><br><span class="line">create table dept(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(20)</span><br><span class="line">);</span><br><span class="line">insert into dept (name) values (&#x27;研发部&#x27;),(&#x27;渠道部&#x27;),(&#x27;教务部&#x27;);</span><br><span class="line"></span><br><span class="line"># 创建员工表</span><br><span class="line">create table emp (</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(10),</span><br><span class="line">gender char(1), -- 性别</span><br><span class="line">salary double, -- 工资</span><br><span class="line">join_date date, -- 入职日期</span><br><span class="line">dept_id int,</span><br><span class="line">foreign key (dept_id) references dept(id) -- 外键，关联部门表(部门表的主键) </span><br><span class="line">);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;张三&#x27;,&#x27;男&#x27;,7200,&#x27;2013-02-24&#x27;,1);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;李四&#x27;,&#x27;男&#x27;,3600,&#x27;2010-12-02&#x27;,2);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;王五&#x27;,&#x27;男&#x27;,9000,&#x27;2008-08-08&#x27;,2);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;赵六&#x27;,&#x27;女&#x27;,5000,&#x27;2015-10-07&#x27;,3);</span><br><span class="line">insert into emp(name,gender,salary,join_date,dept_id) values(&#x27;吴七&#x27;,&#x27;女&#x27;,4500,&#x27;2011-03-14&#x27;,1);</span><br></pre></td></tr></table></figure>

<p>显示表中数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+----+-----------+</span><br><span class="line">| id | name      |</span><br><span class="line">+----+-----------+</span><br><span class="line">| 1  | 研发部 |</span><br><span class="line">| 2  | 渠道部 |</span><br><span class="line">| 3  | 教务部 |</span><br><span class="line">+----+-----------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-4-2、什么是笛卡尔积"><a href="#1-4-2、什么是笛卡尔积" class="headerlink" title="1.4.2、什么是笛卡尔积"></a>1.4.2、什么是笛卡尔积</h4><p>案例：</p>
<p>查询所有员工和所有部门</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from emp,dept;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241592735.png" alt="image20200215173505470.png"></p>
<p>左表的每条数据和右表的每条数据组合，这种效果就是笛卡尔积</p>
<h4 id="1-4-3、清除笛卡尔积"><a href="#1-4-3、清除笛卡尔积" class="headerlink" title="1.4.3、清除笛卡尔积"></a>1.4.3、清除笛卡尔积</h4><p>我们发现笛卡尔积所产生的数据并不是都是有用的，只有员工.dept_id&#x3D;部门.id的值才是我们想要的。</p>
<p>所以我们需要过滤掉没有用的数据。那么如何设置过滤条件呢？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from emp,dept where emp.dept_id=dept.id;</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id | id(2) | name(2)   |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       | 1     | 研发部 |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       | 1     | 研发部 |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       | 2     | 渠道部 |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       | 2     | 渠道部 |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       | 3     | 教务部 |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">mysql&gt; select emp.name,dept.name from emp,dept where emp.dept_id=dept.id;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| name   | name(2)   |</span><br><span class="line">+--------+-----------+</span><br><span class="line">| 张三 | 研发部 |</span><br><span class="line">| 吴七 | 研发部 |</span><br><span class="line">| 李四 | 渠道部 |</span><br><span class="line">| 王五 | 渠道部 |</span><br><span class="line">| 赵六 | 教务部 |</span><br><span class="line">+--------+-----------+</span><br><span class="line">5 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、内连接"><a href="#二、内连接" class="headerlink" title="二、内连接"></a>二、内连接</h2><p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示。如：从表.外键&#x3D;主表.主键</p>
<h3 id="2-1、隐式内连接"><a href="#2-1、隐式内连接" class="headerlink" title="2.1、隐式内连接"></a>2.1、隐式内连接</h3><p>看不到 join 关键字，条件使用 where 指定</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 左表，右表 where 条件表达式;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>查询员工表中所有员工及所在部门</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from emp,dept where emp.dept_id=dept.id;</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id | id(2) | name(2)   |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       | 1     | 研发部 |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       | 1     | 研发部 |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       | 2     | 渠道部 |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       | 2     | 渠道部 |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       | 3     | 教务部 |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br></pre></td></tr></table></figure>

<h3 id="2-2、显式内连接"><a href="#2-2、显式内连接" class="headerlink" title="2.2、显式内连接"></a>2.2、显式内连接</h3><p>使用inner join…on语句，可以省略inner</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 左表 [inner] join 右表 on 条件表达式;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>查询王五的信息，显示员工 id，姓名，性别，工资和所在的部门名称。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select emp.id,emp.name,emp.gender,emp.salary,dept.name from emp join dept on emp.dept_id=dept.id where emp.name=&#x27;王五&#x27;;</span><br><span class="line">+----+--------+--------+--------+-----------+</span><br><span class="line">| id | name   | gender | salary | name(2)   |</span><br><span class="line">+----+--------+--------+--------+-----------+</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 渠道部 |</span><br><span class="line">+----+--------+--------+--------+-----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>SQL优化</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select emp.id,emp.name,emp.gender,emp.salary,dept.name from emp join dept on emp.dept_id=dept.id where emp.name=&#x27;王五&#x27;;</span><br><span class="line">或</span><br><span class="line">select e.id,e.name,e.gender,e.salary,d.name from emp e join dept d on e.dept_id=d.id where e.name=&#x27;王五&#x27;;</span><br><span class="line">或</span><br><span class="line">select e.id,e.name,gender,salary,d.name from emp e join dept d on dept_id=d.id where e.name=&#x27;王五&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="2-3、内连接使用步骤"><a href="#2-3、内连接使用步骤" class="headerlink" title="2.3、内连接使用步骤"></a>2.3、内连接使用步骤</h3><ul>
<li>确认查询的数据库表</li>
<li>确认数据库表连接条件</li>
<li>确认数据库表查询条件</li>
<li>确认数据库表显示字段</li>
</ul>
<h2 id="三、左-x2F-右连接"><a href="#三、左-x2F-右连接" class="headerlink" title="三、左&#x2F;右连接"></a>三、左&#x2F;右连接</h2><h3 id="3-1、左连接"><a href="#3-1、左连接" class="headerlink" title="3.1、左连接"></a>3.1、左连接</h3><p>使用 left outer join…on，outer 可以省略</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 左表 left [outer] join 右表 on 条件表达式;</span><br></pre></td></tr></table></figure>

<p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示；否则，显示 NULL</p>
<p><strong>案例：</strong></p>
<p>在部门表中增加一个部门</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into dept(name) values(&#x27;执行部&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.08 秒)</span><br></pre></td></tr></table></figure>

<p>用内连接查询信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from dept d inner join emp e on d.id=e.dept_id;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241661863.png" alt="image20200215182047845.png"></p>
<p>用左连接查询信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from dept d left join emp e on d.id=e.dept_id;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241674165.png" alt="image20200215182100590.png"></p>
<p><strong>注意：</strong></p>
<p>左连接表示的是在内连接的基础上保证左表的信息全部显示</p>
<h3 id="3-2、右连接"><a href="#3-2、右连接" class="headerlink" title="3.2、右连接"></a>3.2、右连接</h3><p>使用 right outer join…on，outer 可以省略</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 左表 right [outer] join 右表 on 条件表达式;</span><br></pre></td></tr></table></figure>

<p>用右边表的记录去匹配左边表的记录，如果符合条件的则显示；否则，显示 NULL</p>
<p><strong>案例：</strong></p>
<p>在员工表中加入一个新员工</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into emp values (null, &#x27;王一&#x27;,&#x27;男&#x27;,6666,&#x27;2013-12-05&#x27;,null);</span><br><span class="line">Query OK, 1 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>用内连接查询信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from dept d inner join emp e on d.id=e.dept_id;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241693324.png" alt="image20200215182047845.png"></p>
<p>用右连接查询信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from dept d right join emp e on d.id=e.dept_id;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/21/1603241714996.png" alt="image20200215183504384.png"></p>
<p><strong>注意：</strong></p>
<p>右连接表示的是在内连接的基础上保证右表的信息全部显示</p>
<h1 id="MySQL子查询"><a href="#MySQL子查询" class="headerlink" title="MySQL子查询"></a>MySQL子查询</h1><p> 阅读 (189263) </p>
<p> 分享</p>
<p>在SQL语言中，一个SELECT-FROM-WHERE语句称为一个查询块。当获得一个查询的答案需要多个步骤的操作，首先必须创建一个查询来确定用户不知道但包含在数据库中的值，将一个查询块嵌套在另一个查询块的WHERE字句或HAVING短语的条件中查询块称为子查询或内层查询。上层的查询块曾为父查询或外层查询。子查询的结果作为输入传递回“父查询”或“外部查询”。父查询将这个值结合到计算中，以便确定最后的输出。</p>
<h2 id="一、子查询概述"><a href="#一、子查询概述" class="headerlink" title="一、子查询概述"></a>一、子查询概述</h2><h3 id="1-1、什么是子查询"><a href="#1-1、什么是子查询" class="headerlink" title="1.1、什么是子查询"></a>1.1、什么是子查询</h3><p>子查询是一种常用计算机语言sql中select语言中嵌套查询下层的程序模块。当一个查询是另一个查询的条件时，称之为子查询。</p>
<p><strong>如：</strong></p>
<p>查询渠道部有那些员工</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#第一步，查询出&#x27;渠道部&#x27;的id</span><br><span class="line">mysql&gt; select id from dept where name=&#x27;渠道部&#x27;;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 2  |</span><br><span class="line">+----+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line">#第二步，通过查询出的‘渠道部’的id，在查询渠道部的员工信息</span><br><span class="line">mysql&gt; select * from emp where dept_id=2;</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>子查询方式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from emp where dept_id=(select id from dept where name=&#x27;渠道部&#x27;);</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">2 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h3 id="1-2、子查询特点"><a href="#1-2、子查询特点" class="headerlink" title="1.2、子查询特点"></a>1.2、子查询特点</h3><p>一个查询的结果做为另一个查询的条件</p>
<p>有查询的嵌套，内部的查询称为子查询</p>
<p>子查询要使用括号</p>
<h3 id="1-3、子查询结果的三种情况"><a href="#1-3、子查询结果的三种情况" class="headerlink" title="1.3、子查询结果的三种情况"></a>1.3、子查询结果的三种情况</h3><p>单行单列</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519226794.png" alt="image20200215215222589.png"></p>
<p>多行单列</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519241295.png" alt="image20200215215408848.png"></p>
<p>多行多列</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519252162.png" alt="image20200215215431152.png"></p>
<h2 id="二、单行单列查询"><a href="#二、单行单列查询" class="headerlink" title="二、单行单列查询"></a>二、单行单列查询</h2><p>子查询结果只要是单行单列，肯定在 WHERE 后面作为条件，父查询使用：比较运算符，如：&gt; 、&lt;、&lt;&gt;、&#x3D;、&gt;&#x3D;、&lt;&#x3D;等</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名=(子查询);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询工资最高的员工信息</p>
<p>分析：</p>
<p>先找出最高工资，在查找员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select max(salary) from emp;</span><br><span class="line">+-------------+</span><br><span class="line">| max(salary) |</span><br><span class="line">+-------------+</span><br><span class="line">| 9000        |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp where salary=(select max(salary) from emp);</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询工资小于平均工资的员工信息</p>
<p>分析：</p>
<p>先算出员工的平均工资，在查看小于平均工资的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select avg(salary) from emp;</span><br><span class="line">+-------------------+</span><br><span class="line">| avg(salary)       |</span><br><span class="line">+-------------------+</span><br><span class="line">| 5994.333333333333 |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp where salary&lt;(select avg(salary) from emp);</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">3 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、单行多列查询"><a href="#三、单行多列查询" class="headerlink" title="三、单行多列查询"></a>三、单行多列查询</h2><p>子查询结果只要是单行多列，结果集类似于一个数组，父查询使用in、not in运算符</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from 数据库表名 where 字段名 in (子查询);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询工资大于 5000 的员工，来自于哪些部门的名字</p>
<p>分析：</p>
<p>先找出工资大于5000的员工的部门ID，通过部门ID查找对应的部门名字</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select dept_id from emp where salary&gt;5000;</span><br><span class="line">+---------+</span><br><span class="line">| dept_id |</span><br><span class="line">+---------+</span><br><span class="line">| 1       |</span><br><span class="line">| 2       |</span><br><span class="line">+---------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept where id in(select dept_id from emp where salary&gt;5000); </span><br><span class="line">+----+-----------+</span><br><span class="line">| id | name      |</span><br><span class="line">+----+-----------+</span><br><span class="line">| 1  | 研发部 |</span><br><span class="line">| 2  | 渠道部 |</span><br><span class="line">+----+-----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>查询研发部与渠道部所有的员工信息</p>
<p>分析：</p>
<p>先查找研发部与渠道部的id，通过id查找到研发部与渠道部的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select id from dept where name=&#x27;研发部&#x27; or name=&#x27;渠道部&#x27;;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1  |</span><br><span class="line">| 2  |</span><br><span class="line">+----+</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp where dept_id in(select id from dept where name in(&#x27;研发部&#x27;,&#x27;渠道部&#x27;));</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、多行多列"><a href="#四、多行多列" class="headerlink" title="四、多行多列"></a>四、多行多列</h2><p>子查询结果只要是多行多列，肯定在 FROM 后面作为表，子查询作为表需要取别名，否则这张表没有名称则无法访问表中的字段。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select */字段列表 from (子查询) [as] 表别名 where 条件表达式;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查询出 2011 年以后入职的员工信息，包括部门名称</p>
<p>分析：<br>先找出2011年入职的员工信息组成一个新表，在查询所在的部门信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from emp where join_date&gt;=&#x27;2011-01-01&#x27;;</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept d,(select * from emp where join_date&gt;=&#x27;2011-01-01&#x27;) e where d.id=e.dept_id;</span><br><span class="line">+----+-----------+-------+---------+--------+--------+------------+---------+</span><br><span class="line">| id | name      | id(2) | name(2) | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+-----------+-------+---------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 研发部 | 1     | 张三  | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 3  | 教务部 | 4     | 赵六  | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 1  | 研发部 | 5     | 吴七  | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">+----+-----------+-------+---------+--------+--------+------------+---------+</span><br><span class="line">3 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>还可以使用表连接查询</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from emp inner join dept on emp.dept_id = dept.id where join_date &gt;=&#x27;2011-1-1&#x27;;</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id | id(2) | name(2)   |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       | 1     | 研发部 |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       | 3     | 教务部 |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       | 1     | 研发部 |</span><br><span class="line">+----+--------+--------+--------+------------+---------+-------+-----------+</span><br></pre></td></tr></table></figure>

<h1 id="MySQL事务"><a href="#MySQL事务" class="headerlink" title="MySQL事务"></a>MySQL事务</h1><p> 阅读 (195783) </p>
<p> 分享</p>
<p>事务（Transaction），一般是指要做的或所做的事情。在计算机术语中是指访问并可能更新数据库中各种数据项的一个程序执行单元(unit)。事务通常由高级数据库操纵语言或编程语言（如SQL，C++或Java）书写的用户程序的执行所引起，并用形如begin transaction和end transaction语句（或函数调用）来界定。事务由事务开始(begin transaction)和事务结束(end transaction)之间执行的全体操作组成。</p>
<h2 id="一、事务概述"><a href="#一、事务概述" class="headerlink" title="一、事务概述"></a>一、事务概述</h2><h3 id="1-1、什么是事务"><a href="#1-1、什么是事务" class="headerlink" title="1.1、什么是事务"></a>1.1、什么是事务</h3><p>MySQL 事务主要用于处理操作量大，复杂度高的数据。比如说，在人员管理系统中，你删除一个人员，你既需要删除人员的基本资料，也要删除和该人员相关的信息，如信箱，文章等等，这样，这些数据库操作语句就构成一个事务！</p>
<p>事务是一个事件处理的完整的过程。比如：存款、取款、转帐等操作都可以称之为一个事务。</p>
<h3 id="1-2、事务的应用场景"><a href="#1-2、事务的应用场景" class="headerlink" title="1.2、事务的应用场景"></a>1.2、事务的应用场景</h3><p>我们想完成一次转帐业务，那么他会多次去访问我们的数据库。转帐实上就是从一个帐户上扣钱，在往一个帐户上加钱。这样我们执行了二次sql，如果其中一个sql失败，那么整个业务就没有执行成功。所有的sql都需要回滚，整个业务失败。</p>
<p><strong>数据准备</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#创建数据表</span><br><span class="line">create table yh(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(20),</span><br><span class="line">money double</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加数据</span><br><span class="line">insert into yh(name,money)values(&#x27;张三&#x27;, 1000),(&#x27;李四&#x27;, 1000);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>模拟张三给李四转500元钱</p>
<p>分析：</p>
<p>先从张三的帐户减出500，在往李四的帐户加入500元</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; update yh set money=money-500 where name=&#x27;张三&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; update yh set money=money+500 where name=&#x27;李四&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 500   |</span><br><span class="line">| 2  | 李四 | 1500  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.04 秒)</span><br></pre></td></tr></table></figure>

<p><strong>如果转帐时出现问题：</strong></p>
<p>当张三账号上-500 元,服务器崩溃了。李四的账号并没有+500 元，数据就出现问题了。</p>
<p>因为他们是一个整体的业务，所以我们需要保证其中一条 SQL 语句出现问题，整个转账就算失败。只有两条 SQL 都成功了转账才算成功。这个时候就需要用到事务。</p>
<h3 id="1-3、事务提交方式"><a href="#1-3、事务提交方式" class="headerlink" title="1.3、事务提交方式"></a>1.3、事务提交方式</h3><p>mysql中有两种事务提交方式：</p>
<p>手动提交</p>
<p>自动提交</p>
<h2 id="二、事务手动提交"><a href="#二、事务手动提交" class="headerlink" title="二、事务手动提交"></a>二、事务手动提交</h2><h3 id="2-1、手动提交的过程"><a href="#2-1、手动提交的过程" class="headerlink" title="2.1、手动提交的过程"></a>2.1、手动提交的过程</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603518979561.png" alt="image20200215230939254.png"></p>
<p>事务执行成功的过程：开启事务-&gt;执行多条件SQL语句-&gt;成功-&gt;事务提交</p>
<p>事务执行失败的过程：开启事务-&gt;执行多条件SQL语句-&gt;失败-&gt;事务回滚</p>
<h3 id="2-2、语法格式"><a href="#2-2、语法格式" class="headerlink" title="2.2、语法格式"></a>2.2、语法格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">start transaction; #开启事务 </span><br><span class="line">commit; #提交事务 </span><br><span class="line">rollback; #回滚事务 </span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>事务的成功提交：模拟张三给李四转 500 元钱（成功） 目前数据库数据如下：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603518996760.png" alt="image20200215232438482.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#开启事务</span><br><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line">#执行从张三帐户扣出500元</span><br><span class="line">mysql&gt; update yh set money=money-500 where name=&#x27;张三&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#执行往李四帐户加入500元</span><br><span class="line">mysql&gt; update yh set money=money+500 where name=&#x27;李四&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#提交事务</span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.08 秒)</span><br><span class="line">#查看帐户</span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 0     |</span><br><span class="line">| 2  | 李四 | 2000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>事务回滚：模拟李四给张三转 500 元钱（失败） 目前数据库数据如下：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519029171.png" alt="image20200215232946263.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#开启事务</span><br><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line">#执行从李四帐户扣出500元</span><br><span class="line">mysql&gt; update yh set money=money-500 where name=&#x27;李四&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#执行往张三帐户加入500元，但是加了600</span><br><span class="line">mysql&gt; update yh set money=money+600 where name=&#x27;张三&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line">#事务回滚</span><br><span class="line">mysql&gt; rollback;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line">#查看帐户</span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 0     |</span><br><span class="line">| 2  | 李四 | 2000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、事务自动提交"><a href="#三、事务自动提交" class="headerlink" title="三、事务自动提交"></a>三、事务自动提交</h2><p>MySQL 默认每一条 DML(增删改)语句都是一个单独的事务，每条语句都会自动开启一个事务，语句执行完毕自动提交事务，MySQL 默认开始自动提交事务。</p>
<p>如：</p>
<p>事务开始-&gt;update&#x2F;delete&#x2F;insert into-&gt;事务提交</p>
<h3 id="3-1、自动提交事务"><a href="#3-1、自动提交事务" class="headerlink" title="3.1、自动提交事务"></a>3.1、自动提交事务</h3><p><strong>案例：</strong></p>
<p>自动事务提交：往张三的帐户里存入1000元，目前数据库数据如下：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519053659.png" alt="image20200215233931488.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; update yh set money=money+1000 where name=&#x27;张三&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 2000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、取消自动提交"><a href="#3-2、取消自动提交" class="headerlink" title="3.2、取消自动提交"></a>3.2、取消自动提交</h3><p>查看 MySQL 是否开启自动提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select @@autocommit;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>@@表示全局变量，1 表示开启，0 表示关闭</p>
<p>取消自动提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">set autocommit=0;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select @@autocommit;</span><br><span class="line">+--------------+</span><br><span class="line">| @@autocommit |</span><br><span class="line">+--------------+</span><br><span class="line">| 1            |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; set autocommit=0;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@autocommit;</span><br><span class="line">+--------------+</span><br><span class="line">| @@autocommit |</span><br><span class="line">+--------------+</span><br><span class="line">| 0            |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>从李四的帐户取出1000元，目前数据库数据如下：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519068528.png" alt="image20200215234548334.png"></p>
<p><strong>注意：</strong></p>
<p>要在窗口A、窗口B中验证</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#窗口A</span><br><span class="line">mysql&gt; update yh set money=money-1000 where name=&#x27;李四&#x27;;</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">#在窗口B中查询银行帐户(第一次验证)</span><br><span class="line"></span><br><span class="line">#提交</span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.10 秒)</span><br><span class="line"></span><br><span class="line">#在窗口B中查询银行帐户(第二次验证)</span><br></pre></td></tr></table></figure>

<p>在打开一个窗口</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#窗口B</span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 2000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="4、事务原理"><a href="#4、事务原理" class="headerlink" title="4、事务原理"></a>4、事务原理</h2><p>一个事务会涉及到大量的cpu计算和IO操作，这些操作被打包成一个执行单元,要么同时都完成，要么同时都不完成。</p>
<h3 id="4-1、自动提交原理图"><a href="#4-1、自动提交原理图" class="headerlink" title="4.1、自动提交原理图"></a>4.1、自动提交原理图</h3><p>如果没有显示启动事务,数据库会根据autocommit的值.默认每条sql操作都会自动提交。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519086079.png" alt="image20200218000643813.png"></p>
<h3 id="4-2、手动提交原理图"><a href="#4-2、手动提交原理图" class="headerlink" title="4.2、手动提交原理图"></a>4.2、手动提交原理图</h3><p>如果开启了事务，其中有任何一条语句因为崩溃或者其它原因无法执行，那么该组中所有的sql语句都不会执行。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519101214.png" alt="image20200218001646389.png"></p>
<h3 id="4-3、事务提交步骤"><a href="#4-3、事务提交步骤" class="headerlink" title="4.3、事务提交步骤"></a>4.3、事务提交步骤</h3><p>客户端连接上服务器端，创建连接同时创建当前用户的临时事务日志文件。</p>
<p>开启事务，改变原有的操作机制（所有的操作都会先写入临时日志文件）。</p>
<p>写入SQL，接收并执行SQL，所有的SQL操作都会写入临时文件；返回数据时，从数据库表拿取数据，但要通过临时日志文件加工在返回。</p>
<p>事务的提交或回滚，提交：同步临时日志文件中的SQL操作结果到数据库表；回滚：清除临时日志文件</p>
<h2 id="5、事务回滚"><a href="#5、事务回滚" class="headerlink" title="5、事务回滚"></a>5、事务回滚</h2><p>我们可以在mysql事务处理过程中定义保存点(SAVEPOINT)，然后回滚到指定的保存点前的状态。</p>
<p>定义保存点，以及回滚到指定保存点前状态的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">savepoint 保存点名; #定义保存点</span><br><span class="line">rollback to savepoint 保存点名;  #回滚到指定保存点</span><br><span class="line">或</span><br><span class="line">rollback to 保存点名;</span><br></pre></td></tr></table></figure>

<p><strong>数据表准备</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#创建一个管理员表</span><br><span class="line">create table manager(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  uname varchar(20),</span><br><span class="line">  pword varchar(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#插入数据</span><br><span class="line">insert into manager(uname,pword) values(&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;),(&#x27;lisi&#x27;,&#x27;lisi&#x27;);</span><br><span class="line"></span><br><span class="line">#插入数据</span><br><span class="line">insert into manager(uname,pword) values(&#x27;wangwu&#x27;,&#x27;wangwu&#x27;),(&#x27;zhaoliu&#x27;,&#x27;zhaoliu&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>开启事务</p>
<p>向表中插入二条件记录</p>
<p>设置保存点，保存点的名字为：insert_point</p>
<p>向表中插入二条件记录</p>
<p>回到保存点：insert_point</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into manager(uname,pword) values(&#x27;zhangsan&#x27;,&#x27;zhangsan&#x27;),(&#x27;lisi&#x27;,&#x27;lisi&#x27;);</span><br><span class="line">Query OK, 2 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from manager;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | uname    | pword    |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| 1  | zhangsan | zhangsan |</span><br><span class="line">| 2  | lisi     | lisi     |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; savepoint insert_point;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into manager(uname,pword) values(&#x27;wangwu&#x27;,&#x27;wangwu&#x27;),(&#x27;zhaoliu&#x27;,&#x27;zhaoliu&#x27;);</span><br><span class="line">Query OK, 2 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from manager;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | uname    | pword    |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| 1  | zhangsan | zhangsan |</span><br><span class="line">| 2  | lisi     | lisi     |</span><br><span class="line">| 3  | wangwu   | wangwu   |</span><br><span class="line">| 4  | zhaoliu  | zhaoliu  |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">4 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; rollback to savepoint insert_point;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from manager;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | uname    | pword    |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| 1  | zhangsan | zhangsan |</span><br><span class="line">| 2  | lisi     | lisi     |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>设置保存点可以让我们在失败的时候回到保存点，而不是回到事务开启的时候。</p>
<h2 id="六、事务隔离级别"><a href="#六、事务隔离级别" class="headerlink" title="六、事务隔离级别"></a>六、事务隔离级别</h2><h3 id="6-1、事务特性"><a href="#6-1、事务特性" class="headerlink" title="6.1、事务特性"></a>6.1、事务特性</h3><p><strong>原子性（Atomicity）：</strong> 事务内的操作要嘛全部完成，要嘛全部回滚。</p>
<p><strong>一致性(Consistency)：</strong> 事务执行的前后都是合法的数据状态，不会违反任何的数据完整性。</p>
<p><strong>隔离性（Isolation）:</strong> 主要是事务之间的相互的影响，根据隔离有不同的影响效果。</p>
<p><strong>持久性（Durability）：</strong> 事务一旦提交，就会体现在数据库上，不能回滚。</p>
<h3 id="6-2、事务的并发问题"><a href="#6-2、事务的并发问题" class="headerlink" title="6.2、事务的并发问题"></a>6.2、事务的并发问题</h3><p><strong>脏读：</strong> 比如事务A执行的过程中，读到了事务B未提交的内容。</p>
<p><strong>不可重复读：</strong> 指一个事务在前后两次查询的结果不一致。</p>
<p><strong>幻读：</strong> 幻读是指前后两次相同条件下的查询，后一次查询读到了前一次查询没有的行数据。</p>
<h3 id="6-3、事务的隔离级别"><a href="#6-3、事务的隔离级别" class="headerlink" title="6.3、事务的隔离级别"></a>6.3、事务的隔离级别</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519132024.png" alt="image20200218012806058.png"></p>
<p>注意：</p>
<p>隔离级别越高，性能越差，安全性越高。</p>
<h3 id="6-4、事务隔离命令"><a href="#6-4、事务隔离命令" class="headerlink" title="6.4、事务隔离命令"></a>6.4、事务隔离命令</h3><p>查看隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#格式：</span><br><span class="line">select @@transaction_isolation;</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>设置隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#格式：</span><br><span class="line">set global transaction_isolation=级别字符串</span><br><span class="line"></span><br><span class="line">mysql&gt; set global transaction_isolation=&#x27;read-committed&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>重启客户端，查看</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-COMMITTED          |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="7、脏读"><a href="#7、脏读" class="headerlink" title="7、脏读"></a>7、脏读</h2><h3 id="7-1、设置隔离级别"><a href="#7-1、设置隔离级别" class="headerlink" title="7.1、设置隔离级别"></a>7.1、设置隔离级别</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;read-uncommitted&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-UNCOMMITTED        |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="7-2、脏读"><a href="#7-2、脏读" class="headerlink" title="7.2、脏读"></a>7.2、脏读</h3><p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519178063.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，转帐操作</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; update yh set money=money-500 where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; update yh set money=money+500 where id=2;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户，钱已经到帐</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 500   |</span><br><span class="line">| 2  | 李四 | 1500  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行回滚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; rollback;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户，钱不见了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>脏读是比较危险的事情，如果张三在李四那里买了一个汽球花了500元，那么张三转帐给李四后，李四发货给张三，张三收到货物后把事务回滚，这样李四再也没有看到钱。</p>
<p><strong>要解决脏读的问题我们要提高隔离级别？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;read-committed&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-COMMITTED        |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，转帐操作</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; update yh set money=money-500 where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; update yh set money=money+500 where id=2;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户，帐户没有变化</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，事务提交</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户，钱到帐了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 500   |</span><br><span class="line">| 2  | 李四 | 1500  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>这样我们就解决了脏读的问题，提高我们的隔离级别。</p>
<h2 id="八、不可重复读"><a href="#八、不可重复读" class="headerlink" title="八、不可重复读"></a>八、不可重复读</h2><h3 id="8-1、设置隔离级别"><a href="#8-1、设置隔离级别" class="headerlink" title="8.1、设置隔离级别"></a>8.1、设置隔离级别</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;read-committed&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-COMMITTED        |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="8-2、不可重复读"><a href="#8-2、不可重复读" class="headerlink" title="8.2、不可重复读"></a>8.2、不可重复读</h3><p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000   |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里更新数据，并提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; update yh set money=money+500 where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里在次执行，查看帐户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1500  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>看着这二个数据本身觉得没有什么问题，如果这二次的数据分别是显示在银行职员的显示器上和发送给客户，那么银行的工作人员都不知道以什么为准了。</p>
<p><strong>要解决不可重复读的问题我们要提高隔离级别？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;repeatable-read&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查看帐户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000   |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里更新数据，并提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; update yh set money=money+500 where id=1;</span><br><span class="line">Query OK, 1 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里在次执行，查看帐户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1000  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>这样我们就解决了不可重复读的问题，提高我们的隔离级别。</p>
<h2 id="九、幻读"><a href="#九、幻读" class="headerlink" title="九、幻读"></a>九、幻读</h2><h3 id="9-1、设置隔离级别"><a href="#9-1、设置隔离级别" class="headerlink" title="9.1、设置隔离级别"></a>9.1、设置隔离级别</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;repeatable-read&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="9-2、幻读"><a href="#9-2、幻读" class="headerlink" title="9.2、幻读"></a>9.2、幻读</h3><p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，查询ID为3的帐户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh where id=3;</span><br><span class="line">空的数据集 (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查询ID为3的帐户，没有就添加记录，并提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh where id=3;</span><br><span class="line">空的数据集 (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into yh values(3,&#x27;王五&#x27;,1000);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1500  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">| 3  | 王五 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">3 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.09 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，添加id为3的帐户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into yh values(3,&#x27;王五&#x27;,1000);</span><br><span class="line">Duplicate entry &#x27;3&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from yh;</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| id | name   | money |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">| 1  | 张三 | 1500  |</span><br><span class="line">| 2  | 李四 | 1000  |</span><br><span class="line">+----+--------+-------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>我们在A窗口中看不到新加人员的王五信息，但是我们想自己增加王五的信息也无加入的我们的数据库，这就是幻读。</p>
<p><strong>要解决幻读的问题我们要提高隔离级别？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global transaction_isolation=&#x27;serializable&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br><span class="line"></span><br><span class="line">#重启窗口查看隔离级别</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| SERIALIZABLE            |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>恢复yh表中的数据为：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519359501.png" alt="image20200218104028518.png"></p>
<p>打开A，B两个窗口，分别开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在A窗口里执行，查询ID为3的帐户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh where id=3;</span><br><span class="line">空的数据集 (0.00 秒)</span><br></pre></td></tr></table></figure>

<p>在B窗口里执行，查询ID为3的帐户，没有就添加记录，并提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from yh where id=3;</span><br><span class="line">空的数据集 (0.00 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into yh values(3,&#x27;王五&#x27;，1000);</span><br><span class="line">|  #光标闪烁，不能执行下去</span><br></pre></td></tr></table></figure>

<p>这样我们就解决了幻读的问题，提高我们了融离级别。</p>
<h1 id="MySQL视图"><a href="#MySQL视图" class="headerlink" title="MySQL视图"></a>MySQL视图</h1><p> 阅读 (210827) </p>
<p> 分享</p>
<p>视图是指计算机数据库中的视图，是一个虚拟表，其内容由查询定义。同真实的表一样，视图包含一系列带有名称的列和行数据。但是，视图并不在数据库中以存储的数据值集形式存在。行和列数据来自由定义视图的查询所引用的表，并且在引用视图时动态生成。</p>
<h2 id="一、视图概述"><a href="#一、视图概述" class="headerlink" title="一、视图概述"></a>一、视图概述</h2><h3 id="1-1、什么是视图"><a href="#1-1、什么是视图" class="headerlink" title="1.1、什么是视图"></a>1.1、什么是视图</h3><p>在 SQL 中，视图是基于 SQL 语句的结果集的可视化的表。</p>
<p>视图包含行和列，就像一个真实的表。视图中的字段就是来自一个或多个数据库中的真实的表中的字段。我们可以向视图添加 SQL 函数、WHERE 以及 JOIN 语句，我们也可以提交数据，就像这些来自于某个单一的表。</p>
<p><strong>注意：</strong></p>
<p>数据库的设计和结构不会受到视图中的函数、where 或 join 语句的影响。</p>
<h3 id="1-2、视图的作用"><a href="#1-2、视图的作用" class="headerlink" title="1.2、视图的作用"></a>1.2、视图的作用</h3><p>重复利用SQL语句</p>
<p>简化SQL查询，快速取数据</p>
<p>只用知道表的部分结构</p>
<p>保护数据，根据特定授权</p>
<p>更改数据格式和表示，视图可返回与底层表的表示和格式不同的数据</p>
<p><strong>注意：</strong><br>在视图创建后，可以用与表基本相同的方式使用（查询、过滤、排序数据、与其他视图或连结、（添加、更新））。</p>
<p>视图只是用来查看存储在别处的数据的设施，本身不包含数据，返回的数据也是从其他表检索出来的。</p>
<p>因为视图本身不包含数据，索引多个表连结或嵌套可能存在性能问题，需测试。</p>
<h3 id="1-3、视图规则和限制"><a href="#1-3、视图规则和限制" class="headerlink" title="1.3、视图规则和限制"></a>1.3、视图规则和限制</h3><p>与表一样，命名必须是唯一的(不能出现同名视图或表名)。</p>
<p>创建视图数目无限制，但是要考虑复杂查询创建为视图之后的性能影响。</p>
<p>视图不能添加索引，也不能有关联的触发器或者默认值。</p>
<p>视图可以提高安全性，必须具有足够的访问权限。</p>
<p>order by可用在视图中，但是如果从该视图检索数据select中含有order by ，那么该视图中的order by将被覆盖。</p>
<p>视图可以和表一起使用。</p>
<h3 id="1-4、视图的应用"><a href="#1-4、视图的应用" class="headerlink" title="1.4、视图的应用"></a>1.4、视图的应用</h3><p><strong>权限控制时使用</strong></p>
<p>如某几个列，允许用户查询，其他列不允许查询</p>
<p>可以通过视图，开放其中几列查询，起到权限控制作用</p>
<p><strong>简化复杂查询时使用</strong></p>
<p>查询每个栏目下商品的平均价格，并按平均价格排序，查询出平均价格前3的栏目</p>
<p><strong>视图能不能更新，删除，添加</strong></p>
<p>如果视图的每一行，是与物理表一一对应的则可以</p>
<p>视图的行是由物理表多行经过计算得到的结果，视图不可以更新的</p>
<h2 id="二、视图创建"><a href="#二、视图创建" class="headerlink" title="二、视图创建"></a>二、视图创建</h2><h3 id="2-1、创建格式"><a href="#2-1、创建格式" class="headerlink" title="2.1、创建格式"></a>2.1、创建格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create view  视图名  as  select 字段名 from 表名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>创建一个视图</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create view s_view as (select sname,sex,age from students);</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+------+------+</span><br><span class="line">| sname  | sex  | age  |</span><br><span class="line">+--------+------+------+</span><br><span class="line">| 张三   | 男   |   19 |</span><br><span class="line">| 李四   | 男   |   20 |</span><br><span class="line">| 张红   | 女   |   19 |</span><br><span class="line">| 张八   | 男   |   18 |</span><br><span class="line">| 三李   | 男   |   19 |</span><br><span class="line">| 王六   | 女   |   20 |</span><br><span class="line">| 刘红   | 女   |   18 |</span><br><span class="line">+--------+------+------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、视图的运算规则"><a href="#2-2、视图的运算规则" class="headerlink" title="2.2、视图的运算规则"></a>2.2、视图的运算规则</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create [algorithm = &#123;undefined | merge | temptable&#125;] view  视图名  as  select 字段名 from 表名;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>ALGORITHM ： 视图算法</p>
<p>undefined 系统自动选择算法</p>
<p>merge 当使用视图时，会把查询视图的语句和创建视图的语句合并起来，形成一条件一句，最后再从基表中查询</p>
<p>temptable 当使用视图时，会把创建视图的语句的查询结果当成一张临时表，再从临时表中进行筛选</p>
<p><strong>案例：</strong></p>
<p>用temptable创建视图</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create algorithm=temptable view view_t as select sname,sex,english,math from students order by math,english desc;</span><br><span class="line">Query OK, 0 rows affected (0.03 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from view_t;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 王六 | 女  | 50.0    | 70.0 |</span><br><span class="line">| 张红 | 女  | 86.0    | 80.0 |</span><br><span class="line">| 张八 | 男  | 80.0    | 85.0 |</span><br><span class="line">| 张三 | 男  | 98.5    | 88.0 |</span><br><span class="line">| 李四 | 男  | 80.0    | 88.0 |</span><br><span class="line">| 三李 | 男  | 60.0    | 88.0 |</span><br><span class="line">| 刘红 | 女  | 90.0    | 98.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">8 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from view_t group by sex;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 王六 | 女  | 50.0    | 70.0 |</span><br><span class="line">| 张八 | 男  | 80.0    | 85.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>用merge创建视图</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create algorithm=merge view view_m as select sname,sex,english,math from students order by math,english desc;</span><br><span class="line">Query OK, 0 rows affected (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from view_m;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 王六 | 女  | 50.0    | 70.0 |</span><br><span class="line">| 张红 | 女  | 86.0    | 80.0 |</span><br><span class="line">| 张八 | 男  | 80.0    | 85.0 |</span><br><span class="line">| 张三 | 男  | 98.5    | 88.0 |</span><br><span class="line">| 李四 | 男  | 80.0    | 88.0 |</span><br><span class="line">| 三李 | 男  | 60.0    | 88.0 |</span><br><span class="line">| 刘红 | 女  | 90.0    | 98.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">8 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from view_m group by sex;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 张三 | 男  | 98.5    | 88.0 |</span><br><span class="line">| 张红 | 女  | 86.0    | 80.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">2 行于数据集 (0.01 秒)</span><br><span class="line">#查询视图的语句和创建视图的语句合并起来，形成一条件一句，最后再从基表中查询</span><br><span class="line">mysql&gt; select sname,sex,english,math from students group by sex order by math,english desc;</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| sname  | sex  | english | math |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">| 张红 | 女  | 86.0    | 80.0 |</span><br><span class="line">| 张三 | 男  | 98.5    | 88.0 |</span><br><span class="line">+--------+------+---------+------+</span><br><span class="line">2 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-3、视图的权限范围"><a href="#2-3、视图的权限范围" class="headerlink" title="2.3、视图的权限范围"></a>2.3、视图的权限范围</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">[with [cascaded | local ] check option] </span><br></pre></td></tr></table></figure>

<p>WITH CHECK OPTION 表示对UPDATE、INSERT和DELETE操作时保持更新，插入或删除的行满足视图定义的条件（即子查询中的条件表达式）</p>
<p><strong>注意：</strong></p>
<p>cascaded 默认值 更新视图时要满足所有相关视图和表的条件。</p>
<p>local 表示更新视图时满足该视图本身定义的条件即可。</p>
<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create view view_1 as select sid,sname,sex,age from students where sid&lt;6;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; create view view_1_1 as select * from view_1 where sid&gt;2 with cascaded check option;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; create view view_1_2 as select * from view_1 where sid&gt;2 with local check option;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into view_1_1 values(6,&#x27;lisi&#x27;,&#x27;男&#x27;,20);</span><br><span class="line">CHECK OPTION failed &#x27;zutuanxue.view_1_1&#x27;</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into view_1_2 values(6,&#x27;lisi&#x27;,&#x27;男&#x27;,20);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-4、视图记录修改"><a href="#2-4、视图记录修改" class="headerlink" title="2.4、视图记录修改"></a>2.4、视图记录修改</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">update 数据库表名 set 字段名1=字段值1,字段名2=字段值2,...字段名n=字段值n where 条件表达式; #和表的修改一样</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>修改视图中王六的性别为‘男’</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; update s_view set sex=&#x27;男&#x27; where sname=&#x27;王六&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+------+------+</span><br><span class="line">| sname  | sex  | age  |</span><br><span class="line">+--------+------+------+</span><br><span class="line">| 张三   | 男   |   19 |</span><br><span class="line">| 李四   | 男   |   20 |</span><br><span class="line">| 张红   | 女   |   19 |</span><br><span class="line">| 张八   | 男   |   18 |</span><br><span class="line">| 三李   | 男   |   19 |</span><br><span class="line">| 王六   | 男   |   20 |</span><br><span class="line">| 刘红   | 女   |   18 |</span><br><span class="line">+--------+------+------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>修改了视图，对基表数据也有影响</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from students;</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">| sid  | sname  | sex  | age  | english | math | entertime  | remark          |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">|    1 | 张三   | 男   |   19 |    98.5 | 88.0 | 2017-09-01 | 他来自四川      |</span><br><span class="line">|    2 | 李四   | 男   |   20 |    80.0 | 88.0 | 2017-09-01 | 他来自重庆      |</span><br><span class="line">|    3 | 张红   | 女   |   19 |    86.0 | 80.0 | 2017-09-01 | 他来自北京      |</span><br><span class="line">|    4 | 张八   | 男   |   18 |    80.0 | 85.0 | 2017-09-01 | 他来自天津      |</span><br><span class="line">|    5 | 三李   | 男   |   19 |    60.0 | 88.0 | 2017-09-01 | 他来自湖北      |</span><br><span class="line">|    6 | 王六   | 男   |   20 |    50.0 | 70.0 | 2017-09-01 | 他来自湖南      |</span><br><span class="line">|    7 | 刘红   | 女   |   18 |    90.0 | 98.0 | 2017-09-01 | 他来自甘肃      |</span><br><span class="line">+------+--------+------+------+---------+------+------------+-----------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>修改students表中王六的年龄为21</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; update students set age=21 where sname=&#x27;王六&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+------+------+</span><br><span class="line">| sname  | sex  | age  |</span><br><span class="line">+--------+------+------+</span><br><span class="line">| 张三   | 男   |   19 |</span><br><span class="line">| 李四   | 男   |   20 |</span><br><span class="line">| 张红   | 女   |   19 |</span><br><span class="line">| 张八   | 男   |   18 |</span><br><span class="line">| 三李   | 男   |   19 |</span><br><span class="line">| 王六   | 男   |   21 |</span><br><span class="line">| 刘红   | 女   |   18 |</span><br><span class="line">+--------+------+------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="三、视图修改"><a href="#三、视图修改" class="headerlink" title="三、视图修改"></a>三、视图修改</h2><h3 id="3-1、修改格式"><a href="#3-1、修改格式" class="headerlink" title="3.1、修改格式"></a>3.1、修改格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter view 视图名称 as select 语句;</span><br><span class="line">或</span><br><span class="line">alter view 视图名称 as select 视图;</span><br><span class="line">或</span><br><span class="line">create or replace view  视图名  as  select 字段名 from 表名;</span><br></pre></td></tr></table></figure>

<h3 id="3-2、select-语句-修改"><a href="#3-2、select-语句-修改" class="headerlink" title="3.2、select 语句 修改"></a>3.2、select 语句 修改</h3><p><strong>案例：</strong></p>
<p>修改我们的s_view视图</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter view s_view as select sname,sex,age,remark from students;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+------+------+-----------------+</span><br><span class="line">| sname  | sex  | age  | remark          |</span><br><span class="line">+--------+------+------+-----------------+</span><br><span class="line">| 张三   | 男   |   19 | 他来自四川      |</span><br><span class="line">| 李四   | 男   |   20 | 他来自重庆      |</span><br><span class="line">| 张红   | 女   |   19 | 他来自北京      |</span><br><span class="line">| 张八   | 男   |   18 | 他来自天津      |</span><br><span class="line">| 三李   | 男   |   19 | 他来自湖北      |</span><br><span class="line">| 王六   | 女   |   20 | 他来自湖南      |</span><br><span class="line">| 刘红   | 女   |   18 | 他来自甘肃      |</span><br><span class="line">+--------+------+------+-----------------+</span><br><span class="line">8 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、select-视图-修改"><a href="#3-3、select-视图-修改" class="headerlink" title="3.3、select 视图 修改"></a>3.3、select 视图 修改</h3><p><strong>案例：</strong></p>
<p>修改我们的s_view视图</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create view s_view_1 as(select sname,sex,age,remark from students);</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; alter view s_view as select sname,remark from s_view_1;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+-----------------+</span><br><span class="line">| sname  | remark          |</span><br><span class="line">+--------+-----------------+</span><br><span class="line">| 张三   | 他来自四川      |</span><br><span class="line">| 李四   | 他来自重庆      |</span><br><span class="line">| 张红   | 他来自北京      |</span><br><span class="line">| 张八   | 他来自天津      |</span><br><span class="line">| 三李   | 他来自湖北      |</span><br><span class="line">| 王六   | 他来自湖南      |</span><br><span class="line">| 刘红   | 他来自甘肃      |</span><br><span class="line">+--------+-----------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="3-4、create-or-replace"><a href="#3-4、create-or-replace" class="headerlink" title="3.4、create or replace"></a>3.4、create or replace</h3><p><strong>案例：</strong></p>
<p>修改我们的s_view视图</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create or replace view  s_view as select sname from students;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from s_view;</span><br><span class="line">+--------+</span><br><span class="line">| sname  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三   |</span><br><span class="line">| 李四   |</span><br><span class="line">| 张红   |</span><br><span class="line">| 张八   |</span><br><span class="line">| 三李   |</span><br><span class="line">| 王六   |</span><br><span class="line">| 刘红   |</span><br><span class="line">+--------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="四、视图查看"><a href="#四、视图查看" class="headerlink" title="四、视图查看"></a>四、视图查看</h2><h3 id="4-1、显示视图创建情况"><a href="#4-1、显示视图创建情况" class="headerlink" title="4.1、显示视图创建情况"></a>4.1、显示视图创建情况</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show create view 视图名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show create view s_view;</span><br><span class="line">+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+</span><br><span class="line">| View   | Create View                                                                                                                                                                      | character_set_client | collation_connection |</span><br><span class="line">+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+</span><br><span class="line">| s_view | CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `s_view` AS select `s_view_1`.`sname` AS `sname`,`s_view_1`.`remark` AS `remark` from `s_view_1` | utf8mb4              | utf8mb4_0900_ai_ci   |</span><br><span class="line">+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="4-2、查看视图"><a href="#4-2、查看视图" class="headerlink" title="4.2、查看视图"></a>4.2、查看视图</h3><h3 id="4-2-1、查看视图结构"><a href="#4-2-1、查看视图结构" class="headerlink" title="4.2.1、查看视图结构"></a>4.2.1、查看视图结构</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">desc 视图名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看视图s_view结构</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; desc s_view;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| sname | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">1 row in set (0.02 sec)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2、查看数据库中的视图"><a href="#4-2-2、查看数据库中的视图" class="headerlink" title="4.2.2、查看数据库中的视图"></a>4.2.2、查看数据库中的视图</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show tables [like %字符串%];</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>查看数据库中所有视图</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">+--------------------+</span><br><span class="line">| Tables_in_zutuanxue |</span><br><span class="line">+--------------------+</span><br><span class="line">| classes            |</span><br><span class="line">| new_user           |</span><br><span class="line">| s_view             |</span><br><span class="line">| s_view_1           |</span><br><span class="line">| stu                |</span><br><span class="line">| student            |</span><br><span class="line">| students           |</span><br><span class="line">| t1                 |</span><br><span class="line">| t2                 |</span><br><span class="line">| t3                 |</span><br><span class="line">| t4                 |</span><br><span class="line">| t5                 |</span><br><span class="line">| t6                 |</span><br><span class="line">| teacher            |</span><br><span class="line">| user               |</span><br><span class="line">+--------------------+</span><br><span class="line">15 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables like &#x27;%view%&#x27;;</span><br><span class="line">+-----------------------------+</span><br><span class="line">| Tables_in_zutuanxue (%view%) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| s_view                      |</span><br><span class="line">| s_view_1                    |</span><br><span class="line">+-----------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="五、视图删除及重命名"><a href="#五、视图删除及重命名" class="headerlink" title="五、视图删除及重命名"></a>五、视图删除及重命名</h2><h3 id="5-1、视图删除"><a href="#5-1、视图删除" class="headerlink" title="5.1、视图删除"></a>5.1、视图删除</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop view 视图列表;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>删除视图s_view_1</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; drop view s_view_1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables like &#x27;%view%&#x27;;</span><br><span class="line">+-----------------------------+</span><br><span class="line">| Tables_in_zutuanxue (%view%) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| s_view                      |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="5-2、视图重命名"><a href="#5-2、视图重命名" class="headerlink" title="5.2、视图重命名"></a>5.2、视图重命名</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">rename table 视图名 to 新视图名;</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<p>修改视图s_view的名字为view_s</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; rename table s_view to view_s;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables like &#x27;%view%&#x27;;</span><br><span class="line">+-----------------------------+</span><br><span class="line">| Tables_in_zutuanxue (%view%) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| view_s                      |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL-索引"><a href="#MySQL-索引" class="headerlink" title="MySQL 索引"></a>MySQL 索引</h1><p> 阅读 (219855) </p>
<p> 分享</p>
<p>在关系数据库中，索引是一种单独的、物理的对数据库表中一列或多列的值进行排序的一种存储结构，它是某个表中一列或若干列值的集合和相应的指向表中物理标识这些值的数据页的逻辑指针清单。索引的作用相当于图书的目录，可以根据目录中的页码快速找到所需的内容。</p>
<h2 id="一、索引概述"><a href="#一、索引概述" class="headerlink" title="一、索引概述"></a>一、索引概述</h2><h3 id="1-1、什么是索引"><a href="#1-1、什么是索引" class="headerlink" title="1.1、什么是索引"></a>1.1、什么是索引</h3><p>索引是用于快速找出在某个列中拥有特定值的行。</p>
<p>如果没有索引，MySQL必须从第一条记录开始读完整个表，直到找出相关的行，表越大，查询数据所花费的时间就越多。</p>
<p>如果拥有索引，MySQL能够快速到达一个位置去搜索数据文件，而不必查看所有数据，那么将会节省很大一部分时间。</p>
<h3 id="1-2、为什么建立索引"><a href="#1-2、为什么建立索引" class="headerlink" title="1.2、为什么建立索引"></a>1.2、为什么建立索引</h3><p>如果有一张产品表，记录着4W产品的信息。有一个品牌的字段记录产品的品牌，现在想要查询出这个品牌的产品。</p>
<p>如果没有索引，那么将从表中第一条记录一条条往下遍历，直到找到该条信息为止。</p>
<p>如果拥有索引，那么会将该品牌字段，通过一定的方法进行存储，好让查询该字段上的信息时，能够快速找到对应的数据，而不必在遍历4W条产品数据。</p>
<h3 id="1-3、索引存储分类"><a href="#1-3、索引存储分类" class="headerlink" title="1.3、索引存储分类"></a>1.3、索引存储分类</h3><p>其中MySQL中的索引的存储类型有两种：BTREE、HASH。要想知道在这二种存储类型中是如何查找的，那么就必须学会算法的知识，对于现在的我们只需要了解索引的作用及功能就好了。</p>
<h3 id="1-4、索引优缺点"><a href="#1-4、索引优缺点" class="headerlink" title="1.4、索引优缺点"></a>1.4、索引优缺点</h3><p><strong>优点：</strong></p>
<p>所有的字段都可以被索引，也就是可以给任意字段设置索引</p>
<p>加快数据的查询速度</p>
<p><strong>缺点：</strong></p>
<p>创建索引和维护索引要耗费时间</p>
<p>数据量的增加，所耗费的时间也会增加</p>
<p>索引也需要占空间，如果我们的索引量越来越大的话，那么索引文件可能达到我们数据的最大线值</p>
<p>表中数据发生变化时，索引也需要动态维护，降低数据维护效率</p>
<h3 id="1-5、索引的使用原则"><a href="#1-5、索引的使用原则" class="headerlink" title="1.5、索引的使用原则"></a>1.5、索引的使用原则</h3><p>通过上面说的优点和缺点，我们可以看出，索引并不是越多越好，而是需要自己合理的使用。那么那些表应该去使用索引呢？</p>
<p><strong>避免使用过多索引：</strong> 经常更新的表、数据量小的表、相同值少的字段上等</p>
<p><strong>使用索引：</strong> 经常查询的表、不同值较多的字段上等</p>
<p>一个表中很够创建多个索引，这些索引会被存放到一个索引文件中(专门存放索引的地方)</p>
<h2 id="二、索引类型"><a href="#二、索引类型" class="headerlink" title="二、索引类型"></a>二、索引类型</h2><p>索引是在存储引擎中实现的，也就是说不同的存储引擎，会使用不同的索引。</p>
<p>MyISAM和InnoDB存储引擎：只支持BTREE索引， 也就是说默认使用BTREE</p>
<p>MEMORY&#x2F;HEAP存储引擎：支持HASH和BTREE索引</p>
<p>MySQL目前主要有以下几种索引类型：</p>
<p>单列索引（普通索引、唯一索引、主键索引）</p>
<p>组合索引</p>
<p>全文索引</p>
<p>空间索引</p>
<h3 id="2-1、单列索引-普通索引"><a href="#2-1、单列索引-普通索引" class="headerlink" title="2.1、单列索引-普通索引"></a>2.1、单列索引-普通索引</h3><p>MySQL中普通索引并没有什么限制，纯粹为了查询数据更快一点。</p>
<p>可以在定义索引的字段中插入重复值和空值</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  index/key 索引名(字段名(长度))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table book(</span><br><span class="line">  bid int primary key auto_increment,</span><br><span class="line">  bname varchar(200),</span><br><span class="line">  bcbs varchar(200),</span><br><span class="line">  index(bname)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table book1(</span><br><span class="line">  bid int primary key auto_increment,</span><br><span class="line">  bname varchar(200),</span><br><span class="line">  bcbs varchar(200),</span><br><span class="line">  key(bname)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table book;</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                                               |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| book  | CREATE TABLE `book` (</span><br><span class="line">  `bid` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `bname` varchar(200) DEFAULT NULL,</span><br><span class="line">  `bcbs` varchar(200) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`bid`),</span><br><span class="line">  KEY `bname` (`bname`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table book1;</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                                                |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| book1 | CREATE TABLE `book1` (</span><br><span class="line">  `bid` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `bname` varchar(200) DEFAULT NULL,</span><br><span class="line">  `bcbs` varchar(200) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`bid`),</span><br><span class="line">  KEY `bname` (`bname`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p>测试查询：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; explain select * from book where bname=&#x27;计算机&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519846736.png" alt="image20200217091133154.png"></p>
<p><strong>id：</strong> select识别符。这是select的查询序列号，也就是一条语句中，该select是第几次出现。比如：在这条语句中select只出现了1次。</p>
<p><strong>select_type：</strong> select查询类型。</p>
<p>simple：表示为简单的select，没有使用union或子查询，就是简单的select。</p>
<p>primary：表示最外面的select ，拥有子查询时，就会出现2次select。</p>
<p>union：表示第二层。在select 之后使用了 union</p>
<p>subquery：在子查询中，第二SELECT。</p>
<p><strong>table：</strong> 数据库表的名字。他们按被读取的先后顺序排列</p>
<p><strong>type：</strong> 指定本数据表和其他数据表之间的关联关系。</p>
<p><strong>ref：</strong> 就是连接程序无法根据键值只取得一条记录的情况。</p>
<p><strong>system：</strong> 表只有一行记录（等于系统表）。</p>
<p>可能的取值有 const、eq_ref、index和all等</p>
<p><strong>possible_keys：</strong> MySQL在搜索数据记录时可以选用的各个索引，该表中就只有一个索引，bname</p>
<p><strong>key：</strong> 实际选用的索引</p>
<p><strong>key_len：</strong> 显示了mysql使用索引的长度(也就是使用的索引个数)，当 key 字段的值为 null时，索引的长度就是 null。注意，key_len的值可以告诉你在联合索引中mysql会真正使用了哪些索引。</p>
<p><strong>ref：</strong> 给出关联关系中另一个数据表中数据列的名字。常量（const）</p>
<p><strong>rows：</strong> MySQL在执行这个查询时预计会从这个数据表里读出的记录条数。</p>
<p><strong>extra：</strong> 提供了与关联操作有关的信息，没有则什么都不写。</p>
<h3 id="2-2、单列索引-唯一索引"><a href="#2-2、单列索引-唯一索引" class="headerlink" title="2.2、单列索引-唯一索引"></a>2.2、单列索引-唯一索引</h3><p>唯一索引是索引列中的值必须是唯一的，允许为空值。在使用唯一索引时要加入记录。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  unique index 索引名(字段名(长度))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table book2(</span><br><span class="line">  bid int,</span><br><span class="line">  bname varchar(200),</span><br><span class="line">  bcbs varchar(200),</span><br><span class="line">  unique index unique_bid(bid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table book2;</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                        |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| book2 | CREATE TABLE `book2` (</span><br><span class="line">  `bid` int(11) DEFAULT NULL,</span><br><span class="line">  `bname` varchar(200) DEFAULT NULL,</span><br><span class="line">  `bcbs` varchar(200) DEFAULT NULL,</span><br><span class="line">  UNIQUE KEY `unique_bid` (`bid`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>测试查询</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; explain select * from book2 where bid=1;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519903738.png" alt="image20200217092552395.png"></p>
<p><strong>注意：</strong></p>
<p>要查看其中查询使用的索引，必须先往表中插入数据，然后在查询数据，不然查找一个没有的bid值，是不会使用索引的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into book2 values(1,&#x27;计算机基础&#x27;,&#x27;清华出版社&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.06 秒)</span><br><span class="line">mysql&gt; explain select * from book2 where bid=1;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519921512.png" alt="image20200217092825869.png"></p>
<p>可以看到，通过id查询时，会使用唯一索引。并且还实验了查询一个没有的id值，则不会使用索引。</p>
<h3 id="2-3、单列索引-主键索引"><a href="#2-3、单列索引-主键索引" class="headerlink" title="2.3、单列索引-主键索引"></a>2.3、单列索引-主键索引</h3><p>是一种特殊的唯一索引，不允许有空值。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  primary key 索引名(字段名(长度))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table book3(</span><br><span class="line">  bid int,</span><br><span class="line">  bname varchar(200),</span><br><span class="line">  bcbs varchar(200),</span><br><span class="line">  primary key(bid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table book3;</span><br><span class="line">+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                        |</span><br><span class="line">+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| book3 | CREATE TABLE `book3` (</span><br><span class="line">  `bid` int(11) NOT NULL,</span><br><span class="line">  `bname` varchar(200) DEFAULT NULL,</span><br><span class="line">  `bcbs` varchar(200) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`bid`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>测试查询</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into book3 values(1,&#x27;计算机基础&#x27;,&#x27;清华出版社&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.12 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; explain select * from book3 where bid=1;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519985050.png" alt="image20200217093610423.png"></p>
<p>主键索引就是：我们以前声明的主键约束，就是一个主键索引。</p>
<h3 id="2-4、组合索引"><a href="#2-4、组合索引" class="headerlink" title="2.4、组合索引"></a>2.4、组合索引</h3><p>在表中的多个字段组合上创建的索引，只有在查询条件中使用了这些字段的左边字段时，索引才会被使用，使用组合索引时遵循最左前缀集合。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  index 索引名(字段名1(长度),字段名2(长度),...字段名n(长度))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table stu1(</span><br><span class="line">  sid int,</span><br><span class="line">  sname varchar(20),</span><br><span class="line">  age int,</span><br><span class="line">  sex varchar(2),</span><br><span class="line">  index index_sid_sname_age(sid,sname,age)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table stu1;</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                                                                 |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| stu1  | CREATE TABLE `stu1` (</span><br><span class="line">  `sid` int(11) DEFAULT NULL,</span><br><span class="line">  `sname` varchar(20) DEFAULT NULL,</span><br><span class="line">  `age` int(11) DEFAULT NULL,</span><br><span class="line">  `sex` varchar(2) DEFAULT NULL,</span><br><span class="line">  KEY `index_sid_sname_age` (`sid`,`sname`,`age`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>最左前缀</p>
<p>组合索引就是遵从了最左前缀，利用索引中最左边的列集来匹配行，这样的列集称为最左前缀。</p>
<p>例如，这里由sid、sname和age 3个字段构成的索引，索引行中就按sid&#x2F;sname&#x2F;age的顺序存放，索引可以索引下面字段组合(sid，sname，age)、（sid,age）、(sid，sname)或者(sid)。如果要查询的字段不构成索引最左面的前缀，那么就不会是用索引，比如，age或者（sname，age）组合就不会使用索引查询</p>
<p>测试查询</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; explain select * from stu1 where sid=1 and sname=&quot;job&quot;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520015989.png" alt="image20200217095020128.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; explain select * from stu1 where age=17 and sname=&quot;job&quot;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520032028.png" alt="image20200217095150193.png"></p>
<h3 id="2-5、全文索引"><a href="#2-5、全文索引" class="headerlink" title="2.5、全文索引"></a>2.5、全文索引</h3><p>全文索引，只有在MyISAM引擎上才能使用，只能在CHAR,VARCHAR,TEXT类型字段上使用全文索引。</p>
<p>全文索引，就是在一堆文字中，通过其中的某个关键字等，就能找到该字段所属的记录行。</p>
<p>比如：有学员的备注信息里有”成绩很好，是一个好学生” 通过“好学生”，可能就可以找到该条记录。这里说的是可能，因为全文索引的使用涉及了很多细节。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  fulltext index 索引名(字段名(长度))</span><br><span class="line">)ENGINE=MyISAM;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table stu2(</span><br><span class="line">  sid int,</span><br><span class="line">  sname varchar(20),</span><br><span class="line">  age int,</span><br><span class="line">  sex varchar(2),</span><br><span class="line">  info text,</span><br><span class="line">  fulltext index full_info(info)</span><br><span class="line">)ENGINE=MyISAM;</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table stu2;</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                                                                                                                                                                  |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| stu2  | CREATE TABLE `stu2` (</span><br><span class="line">  `sid` int(11) DEFAULT NULL,</span><br><span class="line">  `sname` varchar(20) DEFAULT NULL,</span><br><span class="line">  `age` int(11) DEFAULT NULL,</span><br><span class="line">  `sex` varchar(2) DEFAULT NULL,</span><br><span class="line">  `info` text,</span><br><span class="line">  FULLTEXT KEY `full_info` (`info`)</span><br><span class="line">) ENGINE=MyISAM DEFAULT CHARSET=gbk |</span><br><span class="line">+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p>测试全文索引</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; explain select * from stu2 where match(info) against(&#x27;好学生&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520068046.png" alt="image20200217100917184.png"></p>
<p><strong>注意：</strong></p>
<p>在使用全文搜索时，限制较多：</p>
<p>需要使用MATCH函数</p>
<p>只能通过MyISAM引擎</p>
<p>只能在CHAR,VARCHAR,TEXT上设置全文索引</p>
<p>搜索的关键字默认至少要4个字符，搜索的关键字太短就会被忽略掉</p>
<h3 id="2-6、空间索引"><a href="#2-6、空间索引" class="headerlink" title="2.6、空间索引"></a>2.6、空间索引</h3><p>空间索引是对空间数据类型的字段建立的索引。</p>
<p>MySQL中的空间数据类型有四种，GEOMETRY（几何类型）、POINT（点）、LINESTRING（线）、POLYGON（面）。在创建空间索引时，也要使用MyISAM引擎，创建空间索引的列也不能为null。</p>
<p><strong>创建表时创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create table 表名(</span><br><span class="line">  字段名1 字段类型1,</span><br><span class="line">  字段名2 字段类型2,</span><br><span class="line">  ...</span><br><span class="line">  字段名n 字段类型n,</span><br><span class="line">  spatial index 索引名(字段名(长度))</span><br><span class="line">)ENGINE = MyISAM;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table t(</span><br><span class="line">  g geometry not null,</span><br><span class="line">  spatial index s_g(g)</span><br><span class="line">)ENGINE = MyISAM;</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table t;</span><br><span class="line">+-------+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table                                                                                               |</span><br><span class="line">+-------+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| t     | CREATE TABLE `t` (</span><br><span class="line">  `g` geometry NOT NULL,</span><br><span class="line">  SPATIAL KEY `s_g` (`g`)</span><br><span class="line">) ENGINE=MyISAM DEFAULT CHARSET=utf8 |</span><br><span class="line">+-------+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、索引操作"><a href="#三、索引操作" class="headerlink" title="三、索引操作"></a>三、索引操作</h2><h3 id="3-1、创建索引"><a href="#3-1、创建索引" class="headerlink" title="3.1、创建索引"></a>3.1、创建索引</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter table 数据表名 add [unique|fulltext|spatial] [index|key] [索引名][字段名][asc|desc]</span><br></pre></td></tr></table></figure>

<p>查看表中索引</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show index from 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show index from book2;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520109258.png" alt="image20200217104030561.png"></p>
<p>Table:创建索引的表</p>
<p>Non_unique：表示索引非唯一，1代表 非唯一索引， 0代表 唯一索引，意思就是该索引是不是唯一索引</p>
<p>Key_name：索引名称</p>
<p>Seq_in_index 表示该字段在索引中的位置，单列索引的话该值为1，组合索引为每个字段在索引定义中的顺序(这个只需要知道单列索引该值就为1，组合索引为别的)</p>
<p>Column_name：表示定义索引的列字段</p>
<p>Sub_part：表示索引的长度</p>
<p>Null：表示该字段是否能为空值</p>
<p>Index_type：表示索引类型</p>
<p>我们继续为book2加一个索引</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table book2 add index i_bname(bname);</span><br><span class="line">Query OK, 0 rows affected (0.07 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show index from book2;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520139013.png" alt="image20200217104438329.png"></p>
<h3 id="3-2、删除索引"><a href="#3-2、删除索引" class="headerlink" title="3.2、删除索引"></a>3.2、删除索引</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式一：</span><br><span class="line">alter table 数据库表名 drop index 索引名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除book2中的i_bname索引</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table book2 drop index i_bname;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show index from book2;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520161317.png" alt="image20200217112753060.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式二：</span><br><span class="line">drop index 索引名 on 数据库表名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除book2中的unique_bid索引</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; drop index unique_bid on book2;</span><br><span class="line">Query OK, 0 rows affected (0.12 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show index from book2;</span><br><span class="line">空的数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL常用函数"><a href="#MySQL常用函数" class="headerlink" title="MySQL常用函数"></a>MySQL常用函数</h1><p> 阅读 (201484) </p>
<p> 分享</p>
<p>MySQL函数，是一种控制流程函数，属于数据库用语言。</p>
<p>MySQL数据库中提供了很丰富的函数。MySQL函数包括数学函数、字符串函数、日期和时间函数、条件判断函数、系统信息函数、加密函数、格式化函数等。通过这些函数，可以简化用户的操作。</p>
<h2 id="一、数学函数"><a href="#一、数学函数" class="headerlink" title="一、数学函数"></a>一、数学函数</h2><h3 id="1-1、函数概述"><a href="#1-1、函数概述" class="headerlink" title="1.1、函数概述"></a>1.1、函数概述</h3><p>MySQL函数是MySQL数据库提供的内部函数。这些内部函数可以帮助用户更加方便的处理表中的数据。</p>
<h3 id="1-2、数学函数概述"><a href="#1-2、数学函数概述" class="headerlink" title="1.2、数学函数概述"></a>1.2、数学函数概述</h3><p>数学函数是MySQL中常用的一类函数。主要用于处理数字，包括整型、浮点数等。</p>
<h3 id="1-3、常用数学函数"><a href="#1-3、常用数学函数" class="headerlink" title="1.3、常用数学函数"></a>1.3、常用数学函数</h3><h4 id="1-3-1、abs"><a href="#1-3-1、abs" class="headerlink" title="1.3.1、abs()"></a>1.3.1、abs()</h4><p>abs(X):返回X的绝对值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select abs(-32);</span><br><span class="line">+----------+</span><br><span class="line">| abs(-32) |</span><br><span class="line">+----------+</span><br><span class="line">| 32       |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2、mod"><a href="#1-3-2、mod" class="headerlink" title="1.3.2、mod()"></a>1.3.2、mod()</h4><p>MOD(N,M)或%:返回N被M除的余数。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select mod(15,7);</span><br><span class="line">+-----------+</span><br><span class="line">| mod(15,7) |</span><br><span class="line">+-----------+</span><br><span class="line">| 1         |</span><br><span class="line">+-----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select 15%7;</span><br><span class="line">+------+</span><br><span class="line">| 15%7 |</span><br><span class="line">+------+</span><br><span class="line">| 1    |</span><br><span class="line">+------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-3、ceiling"><a href="#1-3-3、ceiling" class="headerlink" title="1.3.3、ceiling()"></a>1.3.3、ceiling()</h4><p>CEILING(X):返回不小于X的最小整数值。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select ceiling(1.23);</span><br><span class="line">+---------------+</span><br><span class="line">| ceiling(1.23) |</span><br><span class="line">+---------------+</span><br><span class="line">| 2             |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ceiling(-1.23);</span><br><span class="line">+----------------+</span><br><span class="line">| ceiling(-1.23) |</span><br><span class="line">+----------------+</span><br><span class="line">| -1             |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-4、round"><a href="#1-3-4、round" class="headerlink" title="1.3.4、round()"></a>1.3.4、round()</h4><p>ROUND(X) :返回参数X的四舍五入的一个整数。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select round(3.58);</span><br><span class="line">+-------------+</span><br><span class="line">| round(3.58) |</span><br><span class="line">+-------------+</span><br><span class="line">| 4           |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select round(-3.58);</span><br><span class="line">+--------------+</span><br><span class="line">| round(-3.58) |</span><br><span class="line">+--------------+</span><br><span class="line">| -4           |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-5、pi"><a href="#1-3-5、pi" class="headerlink" title="1.3.5、pi()"></a>1.3.5、pi()</h4><p>PI()：返回圆周率π，默认显示6位小数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select pi();</span><br><span class="line">+----------+</span><br><span class="line">| pi()     |</span><br><span class="line">+----------+</span><br><span class="line">| 3.141593 |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-2-6、sqrt"><a href="#1-2-6、sqrt" class="headerlink" title="1.2.6、sqrt()"></a>1.2.6、sqrt()</h4><p>SQRT(x)：返回非负数的x的二次方根</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select sqrt(16);</span><br><span class="line">+----------+</span><br><span class="line">| sqrt(16) |</span><br><span class="line">+----------+</span><br><span class="line">| 4        |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-7、ceil"><a href="#1-3-7、ceil" class="headerlink" title="1.3.7、ceil()"></a>1.3.7、ceil()</h4><p>CEIL(x)：返回不小于x的最小整数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select ceil(1.3);</span><br><span class="line">+-----------+</span><br><span class="line">| ceil(1.3) |</span><br><span class="line">+-----------+</span><br><span class="line">| 2         |</span><br><span class="line">+-----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ceil(-1.3);</span><br><span class="line">+---------------+</span><br><span class="line">| ceiling(-1.3) |</span><br><span class="line">+---------------+</span><br><span class="line">| -1            |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-8、floor"><a href="#1-3-8、floor" class="headerlink" title="1.3.8、floor()"></a>1.3.8、floor()</h4><p>FLOOR(x)：返回不大于x的最大整数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select floor(1.3);</span><br><span class="line">+------------+</span><br><span class="line">| floor(1.3) |</span><br><span class="line">+------------+</span><br><span class="line">| 1          |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select floor(-1.3);</span><br><span class="line">+-------------+</span><br><span class="line">| floor(-1.3) |</span><br><span class="line">+-------------+</span><br><span class="line">| -2          |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-9、round"><a href="#1-3-9、round" class="headerlink" title="1.3.9、round()"></a>1.3.9、round()</h4><p>ROUND(x)、ROUND(x,y)</p>
<p>前者返回最接近于x的整数，即对x进行四舍五入；后者返回最接近x的数，其值保留到小数点后面y位，若y为负值，则将保留到x到小数点左边y位</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select round(1.3555);</span><br><span class="line">+---------------+</span><br><span class="line">| round(1.3555) |</span><br><span class="line">+---------------+</span><br><span class="line">| 1             |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select round(1.3555,2);</span><br><span class="line">+-----------------+</span><br><span class="line">| round(1.3555,2) |</span><br><span class="line">+-----------------+</span><br><span class="line">| 1.36            |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-10、sign"><a href="#1-3-10、sign" class="headerlink" title="1.3.10、sign()"></a>1.3.10、sign()</h4><p>SIGN(x):返回参数x的符号，-1表示负数，0表示0，1表示正数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select sign(5);</span><br><span class="line">+---------+</span><br><span class="line">| sign(5) |</span><br><span class="line">+---------+</span><br><span class="line">| 1       |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select sign(-5);</span><br><span class="line">+----------+</span><br><span class="line">| sign(-5) |</span><br><span class="line">+----------+</span><br><span class="line">| -1       |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select sign(0);</span><br><span class="line">+---------+</span><br><span class="line">| sign(0) |</span><br><span class="line">+---------+</span><br><span class="line">| 0       |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-11、pow-x-y"><a href="#1-3-11、pow-x-y" class="headerlink" title="1.3.11、pow(x,y)"></a>1.3.11、pow(x,y)</h4><p>POW(x,y)和、POWER(x,y):返回x的y次乘方的值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select pow(2,4);</span><br><span class="line">+----------+</span><br><span class="line">| pow(2,4) |</span><br><span class="line">+----------+</span><br><span class="line">| 16       |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select power(3,3);</span><br><span class="line">+------------+</span><br><span class="line">| power(3,3) |</span><br><span class="line">+------------+</span><br><span class="line">| 27         |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-12、rand"><a href="#1-3-12、rand" class="headerlink" title="1.3.12、rand()"></a>1.3.12、rand()</h4><p>RAND()：随机函数，返回0-1内的随机数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select rand();</span><br><span class="line">+---------------------+</span><br><span class="line">| rand()              |</span><br><span class="line">+---------------------+</span><br><span class="line">| 0.30107216378773766 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select rand();</span><br><span class="line">+---------------------+</span><br><span class="line">| rand()              |</span><br><span class="line">+---------------------+</span><br><span class="line">| 0.37762552907469266 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-13、truncate"><a href="#1-3-13、truncate" class="headerlink" title="1.3.13、truncate()"></a>1.3.13、truncate()</h4><p>TRUNCATE(x,Y):数值截取，返回数值x截取y位小数的结果（不四舍五入）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select truncate(3.1415926,2);</span><br><span class="line">+-----------------------+</span><br><span class="line">| truncate(3.1415926,2) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| 3.14                  |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select truncate(3.1415926,4);</span><br><span class="line">+-----------------------+</span><br><span class="line">| truncate(3.1415926,4) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| 3.1415                |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="二、字符串函数"><a href="#二、字符串函数" class="headerlink" title="二、字符串函数"></a>二、字符串函数</h2><h3 id="2-1、字符串函数概述"><a href="#2-1、字符串函数概述" class="headerlink" title="2.1、字符串函数概述"></a>2.1、字符串函数概述</h3><p>字符串函数是MySQL中常用的一类函数。主要用于处理字符串。</p>
<h3 id="2-2、常用字符串函数"><a href="#2-2、常用字符串函数" class="headerlink" title="2.2、常用字符串函数"></a>2.2、常用字符串函数</h3><h4 id="2-2-1、ascii"><a href="#2-2-1、ascii" class="headerlink" title="2.2.1、ascii()"></a>2.2.1、ascii()</h4><p>ASCII(str):返回字符串str的最左面字符的ASCII代码值。如果str是空字符串，返回0。如果str是NULL，返回NULL。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select ascii(&#x27;2&#x27;);</span><br><span class="line">+------------+</span><br><span class="line">| ascii(&#x27;2&#x27;) |</span><br><span class="line">+------------+</span><br><span class="line">| 50         |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ascii(2);</span><br><span class="line">+----------+</span><br><span class="line">| ascii(2) |</span><br><span class="line">+----------+</span><br><span class="line">| 50       |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ascii(&#x27;Ax&#x27;);</span><br><span class="line">+-------------+</span><br><span class="line">| ascii(&#x27;Ax&#x27;) |</span><br><span class="line">+-------------+</span><br><span class="line">| 65          |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ascii(&#x27;ax&#x27;);</span><br><span class="line">+-------------+</span><br><span class="line">| ascii(&#x27;ax&#x27;) |</span><br><span class="line">+-------------+</span><br><span class="line">| 97          |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2、concat"><a href="#2-2-2、concat" class="headerlink" title="2.2.2、concat()"></a>2.2.2、concat()</h4><p>CONCAT(str1,str2,…):返回来自于参数连结的字符串。如果任何参数是NULL，返回NULL。可以有超过2个的参数。一个数字参数被变换为等价的字符串形式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select concat(&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;);</span><br><span class="line">+-----------------------------+</span><br><span class="line">| concat(&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| helloworld!                 |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select concat(&#x27;hello&#x27;,null,&#x27;world&#x27;);</span><br><span class="line">+------------------------------+</span><br><span class="line">| concat(&#x27;hello&#x27;,null,&#x27;world&#x27;) |</span><br><span class="line">+------------------------------+</span><br><span class="line">| NULL                         |</span><br><span class="line">+------------------------------+</span><br><span class="line">1 行于数据集 (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select concat(12,21);</span><br><span class="line">+---------------+</span><br><span class="line">| concat(12,21) |</span><br><span class="line">+---------------+</span><br><span class="line">| 1221          |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3、length"><a href="#2-2-3、length" class="headerlink" title="2.2.3、length()"></a>2.2.3、length()</h4><p>LENGTH(str):获取字符串字节长度（返回字节数，要注意字符集）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select length(&#x27;hello world&#x27;);</span><br><span class="line">+-----------------------+</span><br><span class="line">| length(&#x27;hello world&#x27;) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| 11                    |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select length(&#x27;你好&#x27;);</span><br><span class="line">+--------------+</span><br><span class="line">| length(&#x27;你好&#x27;) |</span><br><span class="line">+--------------+</span><br><span class="line">| 6            |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>一个汉字是算三个字节，一个数字或字母算一个字节</p>
<h4 id="2-2-4、locate"><a href="#2-2-4、locate" class="headerlink" title="2.2.4、locate()"></a>2.2.4、locate()</h4><p>LOCATE(substr,str):返回子串substr在字符串str第一个出现的位置，如果substr不是在str里面，返回0.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select locate(&#x27;wo&#x27;,&#x27;hello world&#x27;);</span><br><span class="line">+----------------------------+</span><br><span class="line">| locate(&#x27;wo&#x27;,&#x27;hello world&#x27;) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| 7                          |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.04 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select locate(&#x27;wob&#x27;,&#x27;hello world&#x27;);</span><br><span class="line">+-----------------------------+</span><br><span class="line">| locate(&#x27;wob&#x27;,&#x27;hello world&#x27;) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| 0                           |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-5、instr"><a href="#2-2-5、instr" class="headerlink" title="2.2.5、instr()"></a>2.2.5、instr()</h4><p>INSTR(str,substr):返回子串substr在字符串str中的第一个出现的位置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select instr(&#x27;hello world&#x27;,&#x27;o&#x27;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| instr(&#x27;hello world&#x27;,&#x27;o&#x27;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">| 5                        |</span><br><span class="line">+--------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select instr(&#x27;hello world&#x27;,&#x27;ob&#x27;);</span><br><span class="line">+---------------------------+</span><br><span class="line">| instr(&#x27;hello world&#x27;,&#x27;ob&#x27;) |</span><br><span class="line">+---------------------------+</span><br><span class="line">| 0                         |</span><br><span class="line">+---------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-6、left"><a href="#2-2-6、left" class="headerlink" title="2.2.6、left()"></a>2.2.6、left()</h4><p>LEFT(str,len):返回字符串str的最左面len个字符。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select left(&#x27;hello world&#x27;,5);</span><br><span class="line">+-----------------------+</span><br><span class="line">| left(&#x27;hello world&#x27;,5) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| hello                 |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-7、right"><a href="#2-2-7、right" class="headerlink" title="2.2.7、right()"></a>2.2.7、right()</h4><p>RIGHT(str,len):返回字符串str的最右面len个字符。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select right(&#x27;hello world&#x27;,5);</span><br><span class="line">+------------------------+</span><br><span class="line">| right(&#x27;hello world&#x27;,5) |</span><br><span class="line">+------------------------+</span><br><span class="line">| world                  |</span><br><span class="line">+------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-8、substring"><a href="#2-2-8、substring" class="headerlink" title="2.2.8、substring()"></a>2.2.8、substring()</h4><p>SUBSTRING(str,pos):从字符串str的起始位置pos返回一个子串。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select substring(&#x27;hello world&#x27;,5);</span><br><span class="line">+----------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27;,5) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| o world                    |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">mysql&gt; select substring(&#x27;hello world&#x27;,2,6);</span><br><span class="line">+------------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27;,2,6) |</span><br><span class="line">+------------------------------+</span><br><span class="line">| ello w                       |</span><br><span class="line">+------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select substring(&#x27;hello world&#x27; from 7);</span><br><span class="line">+---------------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27; from 7) |</span><br><span class="line">+---------------------------------+</span><br><span class="line">| world                           |</span><br><span class="line">+---------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select substring(&#x27;hello world&#x27; from 7 for 2);</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27; from 7 for 2) |</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| wo                                    |</span><br><span class="line">+---------------------------------------+</span><br><span class="line"></span><br><span class="line">mysql&gt; select substring(&#x27;hello world&#x27; from -3 for 2);</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| substring(&#x27;hello world&#x27; from -3 for 2) |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| rl                                     |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-9、trim"><a href="#2-2-9、trim" class="headerlink" title="2.2.9、trim()"></a>2.2.9、trim()</h4><p>TRIM(str):返回字符串str，所有前缀或后缀被删除了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select trim(&#x27;  hello world  &#x27;);</span><br><span class="line">+-------------------------+</span><br><span class="line">| trim(&#x27;  hello world  &#x27;) |</span><br><span class="line">+-------------------------+</span><br><span class="line">| hello world             |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-10、ltrim-x2F-rtrim"><a href="#2-2-10、ltrim-x2F-rtrim" class="headerlink" title="2.2.10、ltrim()&#x2F;rtrim()"></a>2.2.10、ltrim()&#x2F;rtrim()</h4><p>LTRIM(str):返回删除了其前置空格字符的字符串str。</p>
<p>RTRIM(str):返回删除了其拖后空格字符的字符串str。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select ltrim(&#x27;  hello world  &#x27;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| ltrim(&#x27;  hello world  &#x27;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">| hello world              |</span><br><span class="line">+--------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select rtrim(&#x27;  hello world  &#x27;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| rtrim(&#x27;  hello world  &#x27;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">|   hello world            |</span><br><span class="line">+--------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-11、replace"><a href="#2-2-11、replace" class="headerlink" title="2.2.11、replace()"></a>2.2.11、replace()</h4><p>REPLACE(str,from_str,to_str):返回字符串str，其字符串from_str的所有出现由字符串to_str代替。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select replace(&#x27;hello world&#x27;,&#x27;o&#x27;,&#x27;O&#x27;);</span><br><span class="line">+--------------------------------+</span><br><span class="line">| replace(&#x27;hello world&#x27;,&#x27;o&#x27;,&#x27;O&#x27;) |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| hellO wOrld                    |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-3、常用字符串函数"><a href="#2-3、常用字符串函数" class="headerlink" title="2.3、常用字符串函数"></a>2.3、常用字符串函数</h3><h4 id="2-3-1、repeat"><a href="#2-3-1、repeat" class="headerlink" title="2.3.1、repeat()"></a>2.3.1、repeat()</h4><p>REPEAT(str,count):返回由重复count次的字符串str组成的一个字符串。如果count &lt;&#x3D; 0，返回一个空字符串。如果str或count是NULL，返回NULL。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select repeat(&#x27;hello&#x27;,3);</span><br><span class="line">+-------------------+</span><br><span class="line">| repeat(&#x27;hello&#x27;,3) |</span><br><span class="line">+-------------------+</span><br><span class="line">| hellohellohello   |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select repeat(&#x27;hello&#x27;,0);</span><br><span class="line">+-------------------+</span><br><span class="line">| repeat(&#x27;hello&#x27;,0) |</span><br><span class="line">+-------------------+</span><br><span class="line">|                   |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-2、reverse"><a href="#2-3-2、reverse" class="headerlink" title="2.3.2、reverse()"></a>2.3.2、reverse()</h4><p>REVERSE(str):返回颠倒字符顺序的字符串str。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select reverse(&#x27;hello world!&#x27;);</span><br><span class="line">+-------------------------+</span><br><span class="line">| reverse(&#x27;hello world!&#x27;) |</span><br><span class="line">+-------------------------+</span><br><span class="line">| !dlrow olleh            |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-3、insert"><a href="#2-3-3、insert" class="headerlink" title="2.3.3、insert()"></a>2.3.3、insert()</h4><p>INSERT(str,pos,len,newstr):返回字符串str，在位置pos起始的子串且len个字符长的子串由字符串newstr代替。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select insert(&#x27;hello world!&#x27;,5,3,&#x27;is&#x27;);</span><br><span class="line">+---------------------------------+</span><br><span class="line">| insert(&#x27;hello world!&#x27;,5,3,&#x27;is&#x27;) |</span><br><span class="line">+---------------------------------+</span><br><span class="line">| hellisorld!                     |</span><br><span class="line">+---------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-4、elt"><a href="#2-3-4、elt" class="headerlink" title="2.3.4、elt()"></a>2.3.4、elt()</h4><p>ETL(index,str1,str2,str3…):返回指定index位置的字符串</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select elt(2,&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;);</span><br><span class="line">+----------------------------+</span><br><span class="line">| elt(2,&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| world                      |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select elt(4,&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;);</span><br><span class="line">+----------------------------+</span><br><span class="line">| elt(4,&#x27;hello&#x27;,&#x27;world&#x27;,&#x27;!&#x27;) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| NULL                       |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-5、upper"><a href="#2-3-5、upper" class="headerlink" title="2.3.5、upper()"></a>2.3.5、upper()</h4><p>UPPER(x)或UCASE(x):用于将字母转成大写，x可以是单个字母也可以是字符串；</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select upper(&#x27;abcdfe&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| upper(&#x27;abcdfe&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| ABCDFE          |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ucase(&#x27;abcdfe&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| ucase(&#x27;abcdfe&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| ABCDFE          |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-6、lower"><a href="#2-3-6、lower" class="headerlink" title="2.3.6、lower()"></a>2.3.6、lower()</h4><p>LOWER(x)或LCASE(x):用于将字母转成小写，x可以是单个字母也可以是字符串；</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select lower(&#x27;ABCDEF&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| lower(&#x27;ABCDEF&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| abcdef          |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select lcase(&#x27;ABCDEF&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| lcase(&#x27;ABCDEF&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| abcdef          |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-7、char-length"><a href="#2-3-7、char-length" class="headerlink" title="2.3.7、char_length()"></a>2.3.7、char_length()</h4><p>CHAR_LENGTH():获取字符串字符数，获取字符串长度</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select char_length(&#x27;hello world&#x27;);</span><br><span class="line">+----------------------------+</span><br><span class="line">| char_length(&#x27;hello world&#x27;) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| 11                         |</span><br><span class="line">+----------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select char_length(&#x27;你好&#x27;);</span><br><span class="line">+-------------------+</span><br><span class="line">| char_length(&#x27;你好&#x27;) |</span><br><span class="line">+-------------------+</span><br><span class="line">| 2                 |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>不管汉字还是数字或者是字母都算是一个字符</p>
<h4 id="2-3-8、strcmp"><a href="#2-3-8、strcmp" class="headerlink" title="2.3.8、strcmp()"></a>2.3.8、strcmp()</h4><p>STRCMP(str1,str2):比较两个字符串的大小。左边大于右边时返回1，左边等于右边时返回0，，左小于于右时返回-1。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select strcmp(&#x27;a&#x27;,&#x27;b&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| strcmp(&#x27;a&#x27;,&#x27;b&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| -1              |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select strcmp(&#x27;d&#x27;,&#x27;b&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| strcmp(&#x27;d&#x27;,&#x27;b&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| 1               |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select strcmp(&#x27;b&#x27;,&#x27;b&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| strcmp(&#x27;b&#x27;,&#x27;b&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| 0               |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-9、field"><a href="#2-3-9、field" class="headerlink" title="2.3.9、field()"></a>2.3.9、field()</h4><p>FIELD(str,str1,str2,str3…):与find_in_set类似，返回str在str1,str2,str3…中的位置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select field(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;a&#x27;,&#x27;e&#x27;);</span><br><span class="line">+--------------------------------+</span><br><span class="line">| field(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;a&#x27;,&#x27;e&#x27;) |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| 4                              |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select find_in_set(&#x27;a&#x27;,&#x27;b,c,d,a,e&#x27;);</span><br><span class="line">+------------------------------+</span><br><span class="line">| find_in_set(&#x27;a&#x27;,&#x27;b,c,d,a,e&#x27;) |</span><br><span class="line">+------------------------------+</span><br><span class="line">| 4                            |</span><br><span class="line">+------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-10、position"><a href="#2-3-10、position" class="headerlink" title="2.3.10、position()"></a>2.3.10、position()</h4><p>POSITION(str1 IN str2):返回子串str1在字符串str2中的位置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select position(&#x27;ld&#x27; in &#x27;helloworld&#x27;);</span><br><span class="line">+--------------------------------+</span><br><span class="line">| position(&#x27;ld&#x27; in &#x27;helloworld&#x27;) |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| 9                              |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-11、locate"><a href="#2-3-11、locate" class="headerlink" title="2.3.11、locate()"></a>2.3.11、locate()</h4><p>LOCATE(str1,str,pos):函数返回字符串str1在str中的第pos位置后第一次出现的位置。如果str1在str中不存在，返回0。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select locate(&#x27;hel&#x27;,&#x27;hello world&#x27;,1);</span><br><span class="line">+-------------------------------+</span><br><span class="line">| locate(&#x27;hel&#x27;,&#x27;hello world&#x27;,1) |</span><br><span class="line">+-------------------------------+</span><br><span class="line">| 1                             |</span><br><span class="line">+-------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select locate(&#x27;hel&#x27;,&#x27;hello world&#x27;,2);</span><br><span class="line">+-------------------------------+</span><br><span class="line">| locate(&#x27;hel&#x27;,&#x27;hello world&#x27;,2) |</span><br><span class="line">+-------------------------------+</span><br><span class="line">| 0                             |</span><br><span class="line">+-------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-12、substring-index"><a href="#2-3-12、substring-index" class="headerlink" title="2.3.12、substring_index()"></a>2.3.12、substring_index()</h4><p>SUBSTRING_INDEX(str,delim,count):在定界符delim及count出现前，从字符串str返回自字符串。若count为正值,则返回最终定界符(从左边开始) ，若为-1则是从后往前截取；</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select substring_index(&#x27;hello/world/!&#x27;,&#x27;/&#x27;,-1);</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| substring_index(&#x27;hello/world/!&#x27;,&#x27;/&#x27;,-1) |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| !                                       |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select substring_index(&#x27;hello/world/!&#x27;,&#x27;/&#x27;,1);</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| substring_index(&#x27;hello/world/!&#x27;,&#x27;/&#x27;,1) |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| hello                                  |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、日期和时间函数"><a href="#三、日期和时间函数" class="headerlink" title="三、日期和时间函数"></a>三、日期和时间函数</h2><h3 id="3-1、日期和时间函数概述"><a href="#3-1、日期和时间函数概述" class="headerlink" title="3.1、日期和时间函数概述"></a>3.1、日期和时间函数概述</h3><p>日期和时间函数是MySQL中常用的一类函数。主要用于处理日期时间。</p>
<h3 id="3-2、常用日期和时间函数"><a href="#3-2、常用日期和时间函数" class="headerlink" title="3.2、常用日期和时间函数"></a>3.2、常用日期和时间函数</h3><h4 id="3-2-1、curdate"><a href="#3-2-1、curdate" class="headerlink" title="3.2.1、curdate()"></a>3.2.1、curdate()</h4><p>CURDATE()或CURRENT_DATE():返回当前日期</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select curdate();</span><br><span class="line">+------------+</span><br><span class="line">| curdate()  |</span><br><span class="line">+------------+</span><br><span class="line">| 2020-02-17 |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select current_date();</span><br><span class="line">+----------------+</span><br><span class="line">| current_date() |</span><br><span class="line">+----------------+</span><br><span class="line">| 2020-02-17     |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-2、curtime"><a href="#3-2-2、curtime" class="headerlink" title="3.2.2、curtime()"></a>3.2.2、curtime()</h4><p>CURTIME()或CURRENT_TIME()：返回当前时间</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select curtime();</span><br><span class="line">+-----------+</span><br><span class="line">| curtime() |</span><br><span class="line">+-----------+</span><br><span class="line">| 03:01:16  |</span><br><span class="line">+-----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select current_time();</span><br><span class="line">+----------------+</span><br><span class="line">| current_time() |</span><br><span class="line">+----------------+</span><br><span class="line">| 03:01:26       |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-3、now"><a href="#3-2-3、now" class="headerlink" title="3.2.3、now()"></a>3.2.3、now()</h4><p>NOW():返回当前日期时间</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select now();</span><br><span class="line">+---------------------+</span><br><span class="line">| now()               |</span><br><span class="line">+---------------------+</span><br><span class="line">| 2020-02-17 03:02:09 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-4、month"><a href="#3-2-4、month" class="headerlink" title="3.2.4、month()"></a>3.2.4、month()</h4><p>MONTH(date)或MONTHNAME(date):返回date的月份，范围1到12</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select month(now());</span><br><span class="line">+--------------+</span><br><span class="line">| month(now()) |</span><br><span class="line">+--------------+</span><br><span class="line">| 2            |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select monthname(now());</span><br><span class="line">+------------------+</span><br><span class="line">| monthname(now()) |</span><br><span class="line">+------------------+</span><br><span class="line">| February         |</span><br><span class="line">+------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-5、week"><a href="#3-2-5、week" class="headerlink" title="3.2.5、week()"></a>3.2.5、week()</h4><p>WEEK(date):从日期中选择出周数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select week(now());</span><br><span class="line">+-------------+</span><br><span class="line">| week(now()) |</span><br><span class="line">+-------------+</span><br><span class="line">| 7           |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-6、year"><a href="#3-2-6、year" class="headerlink" title="3.2.6、year()"></a>3.2.6、year()</h4><p>YEAR(date):从日期中选择出年份</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select year(now());</span><br><span class="line">+-------------+</span><br><span class="line">| year(now()) |</span><br><span class="line">+-------------+</span><br><span class="line">| 2020        |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-7、hour"><a href="#3-2-7、hour" class="headerlink" title="3.2.7、hour()"></a>3.2.7、hour()</h4><p>HOUR(date):从日期中选择出小时数,返回time的小时，范围是0到23。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select hour(now());</span><br><span class="line">+-------------+</span><br><span class="line">| hour(now()) |</span><br><span class="line">+-------------+</span><br><span class="line">| 3           |</span><br><span class="line">+-------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-8、minute"><a href="#3-2-8、minute" class="headerlink" title="3.2.8、minute()"></a>3.2.8、minute()</h4><p>MINUTE():从日期中选择出分钟数,范围是0到59。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select minute(now());</span><br><span class="line">+---------------+</span><br><span class="line">| minute(now()) |</span><br><span class="line">+---------------+</span><br><span class="line">| 12            |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-9、second"><a href="#3-2-9、second" class="headerlink" title="3.2.9、second()"></a>3.2.9、second()</h4><p>SECOND(time):回来time的秒数，范围是0到59。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select second(now());</span><br><span class="line">+---------------+</span><br><span class="line">| second(now()) |</span><br><span class="line">+---------------+</span><br><span class="line">| 41            |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、常用日期和时间函数"><a href="#3-3、常用日期和时间函数" class="headerlink" title="3.3、常用日期和时间函数"></a>3.3、常用日期和时间函数</h3><h4 id="3-3-1、weekday"><a href="#3-3-1、weekday" class="headerlink" title="3.3.1、weekday()"></a>3.3.1、weekday()</h4><p>WEEKDAY(date)或DAYNAME(date):返回date的星期索引(0&#x3D;星期一，1&#x3D;星期二, ……6&#x3D; 星期天)。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select weekday(now());</span><br><span class="line">+----------------+</span><br><span class="line">| weekday(now()) |</span><br><span class="line">+----------------+</span><br><span class="line">| 0              |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select dayname(now());</span><br><span class="line">+----------------+</span><br><span class="line">| dayname(now()) |</span><br><span class="line">+----------------+</span><br><span class="line">| Monday         |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-2、dayofweek"><a href="#3-3-2、dayofweek" class="headerlink" title="3.3.2、dayofweek()"></a>3.3.2、dayofweek()</h4><p>DAYOFWEEK(date):返回日期date的星期索引(1&#x3D;星期天，2&#x3D;星期一, …7&#x3D;星期六)。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select dayofweek(now());</span><br><span class="line">+------------------+</span><br><span class="line">| dayofweek(now()) |</span><br><span class="line">+------------------+</span><br><span class="line">| 2                |</span><br><span class="line">+------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-3、dayofmonth"><a href="#3-3-3、dayofmonth" class="headerlink" title="3.3.3、dayofmonth()"></a>3.3.3、dayofmonth()</h4><p>DAYOFMONTH(date):返回date的月份中的日期，在1到31范围内。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select dayofmonth(now());</span><br><span class="line">+-------------------+</span><br><span class="line">| dayofmonth(now()) |</span><br><span class="line">+-------------------+</span><br><span class="line">| 17                |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-4、dayofyear"><a href="#3-3-4、dayofyear" class="headerlink" title="3.3.4、dayofyear()"></a>3.3.4、dayofyear()</h4><p>DAYOFYEAR(date):返回date在一年中的日数, 在1到366范围内。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select dayofyear(now());</span><br><span class="line">+------------------+</span><br><span class="line">| dayofyear(now()) |</span><br><span class="line">+------------------+</span><br><span class="line">| 48               |</span><br><span class="line">+------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-5、quarter"><a href="#3-3-5、quarter" class="headerlink" title="3.3.5、quarter()"></a>3.3.5、quarter()</h4><p>QUARTER(date):返回date一年中的季度，范围1到4。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select quarter(now());</span><br><span class="line">+----------------+</span><br><span class="line">| quarter(now()) |</span><br><span class="line">+----------------+</span><br><span class="line">| 1              |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-6、date-add"><a href="#3-3-6、date-add" class="headerlink" title="3.3.6、date_add()"></a>3.3.6、date_add()</h4><p>DATE_ADD(date,INTERVAL expr type) ,进行日期增加的操作，可以精确到秒</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select &#x27;1997-12-31 23:59:59&#x27;+interval 1 second;</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| &#x27;1997-12-31 23:59:59&#x27;+interval 1 second |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| 1998-01-01 00:00:00                     |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select &#x27;1997-12-31&#x27;+interval 1 second;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| &#x27;1997-12-31&#x27;+interval 1 second |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| 1997-12-31 00:00:01            |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line">mysql&gt; select date_add(&#x27;1997-12-31 23:59:59&#x27;,interval 1 second);</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">| date_add(&#x27;1997-12-31 23:59:59&#x27;,interval 1 second) |</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">| 1998-01-01 00:00:00                               |</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select date_add(&#x27;1997-12-31 23:59:59&#x27;,interval &#x27;1:1&#x27; minute_second);</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">| date_add(&#x27;1997-12-31 23:59:59&#x27;,interval &#x27;1:1&#x27; minute_second) |</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">| 1998-01-01 00:01:00                                          |</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-7、date-sub"><a href="#3-3-7、date-sub" class="headerlink" title="3.3.7、date_sub()"></a>3.3.7、date_sub()</h4><p>DATE_SUB(date,INTERVAL expr type) ，进行日期减少的操作，可以精确到秒</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select &#x27;1997-12-31&#x27;-interval 1 second;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| &#x27;1997-12-31&#x27;-interval 1 second |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| 1997-12-30 23:59:59            |</span><br><span class="line">+--------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line">mysql&gt; select date_sub(&#x27;1997-12-31 23:59:59&#x27;,interval &#x27;1:1&#x27; minute_second);</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">| date_sub(&#x27;1997-12-31 23:59:59&#x27;,interval &#x27;1:1&#x27; minute_second) |</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">| 1997-12-31 23:58:58                                          |</span><br><span class="line">+--------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select date_sub(&#x27;1997-12-31 23:59:59&#x27;,interval 30 day);</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">| date_sub(&#x27;1997-12-31 23:59:59&#x27;,interval 30 day) |</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">| 1997-12-01 23:59:59                             |</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、系统信息函数"><a href="#四、系统信息函数" class="headerlink" title="四、系统信息函数"></a>四、系统信息函数</h2><h3 id="4-1、系统函数概述"><a href="#4-1、系统函数概述" class="headerlink" title="4.1、系统函数概述"></a>4.1、系统函数概述</h3><p>系统信息函数用来查询MySQL数据库的系统信息。</p>
<h3 id="4-2、常用系统函数"><a href="#4-2、常用系统函数" class="headerlink" title="4.2、常用系统函数"></a>4.2、常用系统函数</h3><h4 id="4-2-1、version"><a href="#4-2-1、version" class="headerlink" title="4.2.1、version()"></a>4.2.1、version()</h4><p>VERSION()函数返回数据库的版本号；</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select version();</span><br><span class="line">+-----------+</span><br><span class="line">| version() |</span><br><span class="line">+-----------+</span><br><span class="line">| 8.0.17    |</span><br><span class="line">+-----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2、connection-id"><a href="#4-2-2、connection-id" class="headerlink" title="4.2.2、connection_id()"></a>4.2.2、connection_id()</h4><p>CONNECTION_ID()函数返回服务器的连接数，也就是到现在为止MySQL服务的连接次数；</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select connection_id();</span><br><span class="line">+-----------------+</span><br><span class="line">| connection_id() |</span><br><span class="line">+-----------------+</span><br><span class="line">| 78              |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-3、database"><a href="#4-2-3、database" class="headerlink" title="4.2.3、database()"></a>4.2.3、database()</h4><p>DATABASE()和SCHEMA()返回当前数据库名。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| zutuanxue   |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select schema();</span><br><span class="line">+----------+</span><br><span class="line">| schema() |</span><br><span class="line">+----------+</span><br><span class="line">| zutuanxue |</span><br><span class="line">+----------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-4、用户函数"><a href="#4-2-4、用户函数" class="headerlink" title="4.2.4、用户函数"></a>4.2.4、用户函数</h4><p>USER()、SYSTEM_USER()、SESSION_USER()、CURRENT_USER()和CURRENT_USER这几个函数可以返回当前用户的名称。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select user();</span><br><span class="line">+--------------------+</span><br><span class="line">| user()             |</span><br><span class="line">+--------------------+</span><br><span class="line">| root@192.168.1.104 |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select system_user();</span><br><span class="line">+--------------------+</span><br><span class="line">| system_user()      |</span><br><span class="line">+--------------------+</span><br><span class="line">| root@192.168.1.104 |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select session_user();</span><br><span class="line">+--------------------+</span><br><span class="line">| session_user()     |</span><br><span class="line">+--------------------+</span><br><span class="line">| root@192.168.1.104 |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select current_user();</span><br><span class="line">+----------------+</span><br><span class="line">| current_user() |</span><br><span class="line">+----------------+</span><br><span class="line">| root@%         |</span><br><span class="line">+----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select current_user;</span><br><span class="line">+--------------+</span><br><span class="line">| current_user |</span><br><span class="line">+--------------+</span><br><span class="line">| root@%       |</span><br><span class="line">+--------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-5、字符集函数"><a href="#4-2-5、字符集函数" class="headerlink" title="4.2.5、字符集函数"></a>4.2.5、字符集函数</h4><p><strong>charset()</strong></p>
<p>CHARSET(str)函数返回字符串str的字符集，一般情况这个字符集就是系统的默认字符集；</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select charset(&#x27;ad&#x27;);</span><br><span class="line">+---------------+</span><br><span class="line">| charset(&#x27;ad&#x27;) |</span><br><span class="line">+---------------+</span><br><span class="line">| utf8          |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<p><strong>collation()</strong></p>
<p>COLLATION(str)函数返回字符串str的字符排列方式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select collation(&#x27;ad&#x27;);</span><br><span class="line">+-----------------+</span><br><span class="line">| collation(&#x27;ad&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| utf8_general_ci |</span><br><span class="line">+-----------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="五、其他函数"><a href="#五、其他函数" class="headerlink" title="五、其他函数"></a>五、其他函数</h2><h3 id="5-1、md5"><a href="#5-1、md5" class="headerlink" title="5.1、md5()"></a>5.1、md5()</h3><p>加密函数是MySQL中用来对数据进行加密的函数。</p>
<p>MD5(str)函数可以对字符串str进行加密。MD5(str)函数主要对普通的数据进行加密。下面使用MD5(str)函数为字符串“abcd”加密。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select md5(&#x27;abcd&#x27;);</span><br><span class="line">+----------------------------------+</span><br><span class="line">| md5(&#x27;abcd&#x27;)                      |</span><br><span class="line">+----------------------------------+</span><br><span class="line">| e2fc714c4727ee9395f324cd2e7f331f |</span><br><span class="line">+----------------------------------+</span><br><span class="line">1 行于数据集 (0.04 秒)</span><br></pre></td></tr></table></figure>

<h3 id="5-2、format"><a href="#5-2、format" class="headerlink" title="5.2、format()"></a>5.2、format()</h3><p>格式化函数FORMAT(x,n)</p>
<p>FORMAT(x,n)函数可以将数字x进行格式化，将x保留到小数点后n位。这个过程需要进行四舍五入。例如FORMAT(2.356,2)返回的结果将会是2.36；FORMAT(2.353,2)返回的结果将会是2.35。下面使用FORMAT(x,n)函数来讲235.3456和235.3454进行格式化，都保留到小数点后3位。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select format(235.3456,3),format(235.3456,2);</span><br><span class="line">+--------------------+--------------------+</span><br><span class="line">| format(235.3456,3) | format(235.3456,2) |</span><br><span class="line">+--------------------+--------------------+</span><br><span class="line">| 235.346            | 235.35             |</span><br><span class="line">+--------------------+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="5-3、进制转换函数"><a href="#5-3、进制转换函数" class="headerlink" title="5.3、进制转换函数"></a>5.3、进制转换函数</h3><p>BIN(x)返回x的二进制编码；</p>
<p>HEX(x)返回x的十六进制编码；</p>
<p>OCT(x)返回x的八进制编码；</p>
<p>CONV(x,f1,f2)将x从f1进制数变成f2进制数。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select bin(10);</span><br><span class="line">+---------+</span><br><span class="line">| bin(10) |</span><br><span class="line">+---------+</span><br><span class="line">| 1010    |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select hex(10);</span><br><span class="line">+---------+</span><br><span class="line">| hex(10) |</span><br><span class="line">+---------+</span><br><span class="line">| A       |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select oct(10);</span><br><span class="line">+---------+</span><br><span class="line">| oct(10) |</span><br><span class="line">+---------+</span><br><span class="line">| 12      |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select conv(10,10,2);</span><br><span class="line">+---------------+</span><br><span class="line">| conv(10,10,2) |</span><br><span class="line">+---------------+</span><br><span class="line">| 1010          |</span><br><span class="line">+---------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="5-4、条件判断函数"><a href="#5-4、条件判断函数" class="headerlink" title="5.4、条件判断函数"></a>5.4、条件判断函数</h3><h4 id="5-4-1、if"><a href="#5-4-1、if" class="headerlink" title="5.4.1、if()"></a>5.4.1、if()</h4><p>IF(expr,v1,v2)如果表达式 expr 成立，返回结果 v1；否则，返回结果 v2</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select if(1&gt;0,&#x27;yes&#x27;,&#x27;no&#x27;);</span><br><span class="line">+--------------------+</span><br><span class="line">| if(1&gt;0,&#x27;yes&#x27;,&#x27;no&#x27;) |</span><br><span class="line">+--------------------+</span><br><span class="line">| yes                |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select if(strcmp(&#x27;test&#x27;,&#x27;test1&#x27;),&#x27;yes&#x27;,&#x27;no&#x27;);</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| if(strcmp(&#x27;test&#x27;,&#x27;test1&#x27;),&#x27;yes&#x27;,&#x27;no&#x27;) |</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| yes                                   |</span><br><span class="line">+---------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="5-4-2、ifnull"><a href="#5-4-2、ifnull" class="headerlink" title="5.4.2、ifnull()"></a>5.4.2、ifnull()</h4><p>IFNULL(v1,v2):如果v1不为NULL，则返回v1，否则返回v2</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select ifnull(&#x27;yes&#x27;,&#x27;no&#x27;);</span><br><span class="line">+--------------------+</span><br><span class="line">| ifnull(&#x27;yes&#x27;,&#x27;no&#x27;) |</span><br><span class="line">+--------------------+</span><br><span class="line">| yes                |</span><br><span class="line">+--------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select ifnull(null,&#x27;no&#x27;);</span><br><span class="line">+-------------------+</span><br><span class="line">| ifnull(null,&#x27;no&#x27;) |</span><br><span class="line">+-------------------+</span><br><span class="line">| no                |</span><br><span class="line">+-------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h4 id="5-4-3、case"><a href="#5-4-3、case" class="headerlink" title="5.4.3、case"></a>5.4.3、case</h4><p>CASE expr WHEN v1 THEN r1 [WHEN v2 THEN v2] [ELSE rn] END:如果expr等于某个vn，则返回对应位置THEN后面的结果，如果与所有值都不想等，则返回ELSE后面的rn</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select case 11 when 1 then &#x27;one&#x27; when 2 then &#x27;two&#x27; else &#x27;more&#x27; end;</span><br><span class="line">+-------------------------------------------------------------+</span><br><span class="line">| case 11 when 1 then &#x27;one&#x27; when 2 then &#x27;two&#x27; else &#x27;more&#x27; end |</span><br><span class="line">+-------------------------------------------------------------+</span><br><span class="line">| more                                                        |</span><br><span class="line">+-------------------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select case when 1&gt;0 then &#x27;true&#x27; else &#x27;false&#x27; end;</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">| case when 1&gt;0 then &#x27;true&#x27; else &#x27;false&#x27; end |</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">| true                                       |</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select case binary &#x27;B&#x27; when &#x27;a&#x27; then 1 when &#x27;b&#x27; then 2 end;</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">| case binary &#x27;B&#x27; when &#x27;a&#x27; then 1 when &#x27;b&#x27; then 2 end |</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">| NULL                                                |</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select case binary &#x27;B&#x27; when &#x27;a&#x27; then 1 when &#x27;B&#x27; then 2 end;</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">| case binary &#x27;B&#x27; when &#x27;a&#x27; then 1 when &#x27;B&#x27; then 2 end |</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">| 2                                                   |</span><br><span class="line">+-----------------------------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL-存储过程"><a href="#MySQL-存储过程" class="headerlink" title="MySQL 存储过程"></a>MySQL 存储过程</h1><p> 阅读 (190633) </p>
<p> 分享</p>
<p>存储过程（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的SQL 语句集，它存储在数据库中，一次编译后永久有效，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。存储过程是数据库中的一个重要对象。在数据量特别庞大的情况下利用存储过程能达到倍速的效率提升</p>
<h2 id="一、存储过程概述"><a href="#一、存储过程概述" class="headerlink" title="一、存储过程概述"></a>一、存储过程概述</h2><h3 id="1-1、什么是存储过程"><a href="#1-1、什么是存储过程" class="headerlink" title="1.1、什么是存储过程"></a>1.1、什么是存储过程</h3><p>存储过程是数据库中的一个重要对象。</p>
<p>存储过程是在数据库系统中，一组为了完成特定功能的SQL 语句集。存储过程是存储在数据库中，一次编译后，到处运行。不需要再次编译，用户通过指定存储过程的名字并传递参数（如果该存储过程带有参数）来执行。</p>
<h3 id="1-2、存储过程特点"><a href="#1-2、存储过程特点" class="headerlink" title="1.2、存储过程特点"></a>1.2、存储过程特点</h3><p>用来完成较复杂业务<br>比较灵活，易修改，好编写，可编程性强<br>编写好的存储过程可重复使用</p>
<h3 id="1-3、存储过程优缺点"><a href="#1-3、存储过程优缺点" class="headerlink" title="1.3、存储过程优缺点"></a>1.3、存储过程优缺点</h3><p><strong>优点</strong></p>
<p>存储过程在创建的时候直接编译，sql语句每次使用都要编译，效率高。</p>
<p>存储过程可以被重复使用。</p>
<p>存储过程只连接一次数据库，sql语句在访问多张表时，连接多次数据库。</p>
<p>存储的程序是安全的。存储过程的应用程序授予适当的权限。<br><strong>缺点</strong><br>在那里创建的存储过程，就只能在那里使用，可移植性差。</p>
<p>开发存储过程时，标准不定好的话，后期维护麻烦。</p>
<p>没有具体的编辑器，开发和调试都不方便。</p>
<p>太复杂的业务逻辑，存储过程也解决不了。</p>
<h2 id="二、存储过程创建"><a href="#二、存储过程创建" class="headerlink" title="二、存储过程创建"></a>二、存储过程创建</h2><h3 id="2-1、创建格式-1"><a href="#2-1、创建格式-1" class="headerlink" title="2.1、创建格式"></a>2.1、创建格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create procedure 过程名()</span><br><span class="line">begin</span><br><span class="line">......</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看员工与部门表中的全信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure dept_emp()</span><br><span class="line">begin</span><br><span class="line">	select * from dept;</span><br><span class="line">	select * from emp;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call dept_emp();</span><br><span class="line">+----+-----------+</span><br><span class="line">| id | name      |</span><br><span class="line">+----+-----------+</span><br><span class="line">| 1  | 研发部 |</span><br><span class="line">| 2  | 渠道部 |</span><br><span class="line">| 3  | 教务部 |</span><br><span class="line">| 4  | 执行部 |</span><br><span class="line">+----+-----------+</span><br><span class="line">4 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| id | name   | gender | salary | join_date  | dept_id |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |</span><br><span class="line">| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |</span><br><span class="line">| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |</span><br><span class="line">| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |</span><br><span class="line">| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |</span><br><span class="line">| 6  | 王一 | 男    | 8768   | 2013-12-05 | NULL    |</span><br><span class="line">| 7  | 王二 | 女    | NULL   | NULL       | NULL    |</span><br><span class="line">+----+--------+--------+--------+------------+---------+</span><br><span class="line">7 行于数据集 (0.05 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、变量"><a href="#2-2、变量" class="headerlink" title="2.2、变量"></a>2.2、变量</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">declare 变量名 变量类型 default 默认值; #声明变量</span><br><span class="line">set 变量名=值; #变量赋值</span><br><span class="line">select 字段名 into 变量名 from 数据库表; #查询表中字段，完成变量赋值</span><br><span class="line">select 变量名; #显示变量</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看员工表中id&#x3D;1的员工的姓名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_name()</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	select name into ename from emp where id=1;</span><br><span class="line">	select ename;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_name();</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="2-3、变量作用域"><a href="#2-3、变量作用域" class="headerlink" title="2.3、变量作用域"></a>2.3、变量作用域</h3><p>存储过程中变量是有作用域的，作用范围在begin和end块之间，end结束变量的作用范围即结束。</p>
<p>变量可分为：</p>
<p><strong>局部变量：</strong> begin和end块之间</p>
<p><strong>全局变量：</strong> 放在所有代码块之前；传参变量是全局的，可以在多个块之间起作用</p>
<p><strong>案例：</strong></p>
<p>查看员工的人数与部门表中的部门数，并找出最高和最低工资（局部变量）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure dept_or_emp()</span><br><span class="line">begin</span><br><span class="line">	begin</span><br><span class="line">		declare e_n int default 0;</span><br><span class="line">		declare d_n int default 0;</span><br><span class="line">		select count(*) into e_n from emp;</span><br><span class="line">		select count(*) into d_n from dept;</span><br><span class="line">		select e_n,d_n;</span><br><span class="line">	end;</span><br><span class="line">	begin</span><br><span class="line">		declare max_s double default 0;</span><br><span class="line">		declare min_s double default 0;</span><br><span class="line">		select max(salary) into max_s from emp;</span><br><span class="line">		select min(salary) into min_s from emp;</span><br><span class="line">		select max_s,min_s;</span><br><span class="line">	end;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call dept_or_emp();</span><br><span class="line">+------+------+</span><br><span class="line">| e_n  | d_n  |</span><br><span class="line">+------+------+</span><br><span class="line">| 7    | 4    |</span><br><span class="line">+------+------+</span><br><span class="line">1 行于数据集 (0.26 秒)</span><br><span class="line"></span><br><span class="line">+-------+-------+</span><br><span class="line">| max_s | min_s |</span><br><span class="line">+-------+-------+</span><br><span class="line">| 9000  | 3600  |</span><br><span class="line">+-------+-------+</span><br><span class="line">1 行于数据集 (0.26 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.26 秒)</span><br></pre></td></tr></table></figure>

<p>查看员工的人数与部门表中的部门数，并找出最高和最低工资（全局变量）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure dept_or_emp1()</span><br><span class="line">begin</span><br><span class="line">	declare e_n int default 0;</span><br><span class="line">	declare d_n int default 0;</span><br><span class="line">	declare max_s double default 0;</span><br><span class="line">	declare min_s double default 0;</span><br><span class="line">	begin</span><br><span class="line">		select count(*) into e_n from emp;</span><br><span class="line">		select count(*) into d_n from dept;</span><br><span class="line">	end;</span><br><span class="line">	begin</span><br><span class="line"></span><br><span class="line">		select max(salary) into max_s from emp;</span><br><span class="line">		select min(salary) into min_s from emp;</span><br><span class="line">	end;</span><br><span class="line">	select e_n,d_n,max_s,min_s;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call dept_or_emp1();</span><br><span class="line">+------+------+</span><br><span class="line">| e_n  | d_n  |</span><br><span class="line">+------+------+</span><br><span class="line">| 7    | 4    |</span><br><span class="line">+------+------+</span><br><span class="line">1 行于数据集 (0.22 秒)</span><br><span class="line"></span><br><span class="line">+-------+-------+</span><br><span class="line">| max_s | min_s |</span><br><span class="line">+-------+-------+</span><br><span class="line">| 9000  | 3600  |</span><br><span class="line">+-------+-------+</span><br><span class="line">1 行于数据集 (0.23 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.23 秒)</span><br></pre></td></tr></table></figure>

<h2 id="三、存储过程参数"><a href="#三、存储过程参数" class="headerlink" title="三、存储过程参数"></a>三、存储过程参数</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create procedure 过程名([IN|OUT|INOUT] 参数名 参数数据类型 )</span><br><span class="line">begin</span><br><span class="line">......</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>in：传入参数</p>
<p>out：传出参数</p>
<p>inout：可以传入也可以传出</p>
<h3 id="3-1、in"><a href="#3-1、in" class="headerlink" title="3.1、in"></a>3.1、in</h3><p>表示该参数的值必须在调用存储过程事指定，如果不显示指定为in,那么默认就是in类型。</p>
<p><strong>案例：</strong></p>
<p>根据传入的id查看员工的姓名。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_id(eid int)</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	select name into ename from emp where id=eid;</span><br><span class="line">	select ename;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id(1);</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id(2);</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 李四 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id(9);</span><br><span class="line">+-------+</span><br><span class="line">| ename |</span><br><span class="line">+-------+</span><br><span class="line">|       |</span><br><span class="line">+-------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、out"><a href="#3-2、out" class="headerlink" title="3.2、out"></a>3.2、out</h3><p>out参数也需要指定，但必须是变量，不能是常量。</p>
<p><strong>案例：</strong></p>
<p>根据传入的id，返回员工的姓名。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_id1(eid int,out ename varchar(20))</span><br><span class="line">begin</span><br><span class="line">	select name into ename from emp where id=eid;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; set @ename=&#x27;&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id1(3,@ename);</span><br><span class="line">Query OK, 1 rows affected, 1 warnings (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @ename;</span><br><span class="line">+--------+</span><br><span class="line">| @ename |</span><br><span class="line">+--------+</span><br><span class="line">| 王五 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-3、inout"><a href="#3-3、inout" class="headerlink" title="3.3、inout"></a>3.3、inout</h3><p>如果既需要传入，同时又需要传出，则可以使用INOUT类型参数</p>
<p><strong>案例：</strong></p>
<p>根据传入的id，返回员工的id和姓名。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_id2(inout eid int,out ename varchar(20))</span><br><span class="line">begin</span><br><span class="line">	select id,name into eid,ename from emp where id=eid;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; set @eid=3;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; set @ename=&#x27;&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_id2(@eid,@ename);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @eid,@ename;</span><br><span class="line">+------+--------+</span><br><span class="line">| @eid | @ename |</span><br><span class="line">+------+--------+</span><br><span class="line">| 3    | 王五 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h2 id="四、存储过程条件"><a href="#四、存储过程条件" class="headerlink" title="四、存储过程条件"></a>四、存储过程条件</h2><h3 id="4-1、if…else…end-if"><a href="#4-1、if…else…end-if" class="headerlink" title="4.1、if…else…end if"></a>4.1、if…else…end if</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">if()</span><br><span class="line">then</span><br><span class="line">...</span><br><span class="line">else</span><br><span class="line">...</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>输入一个id，判断他是否是偶数，偶数打印对应的姓名，奇数打印id</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_if_id(eid int)</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	if(eid%2=0)</span><br><span class="line">	then</span><br><span class="line">		select name into ename from emp where id=eid;</span><br><span class="line">		select ename;</span><br><span class="line">  else</span><br><span class="line">  	select eid;</span><br><span class="line">  end if;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_id(2);</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 李四 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_id(1);</span><br><span class="line">+------+</span><br><span class="line">| eid  |</span><br><span class="line">+------+</span><br><span class="line">| 1    |</span><br><span class="line">+------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br></pre></td></tr></table></figure>

<h3 id="4-2、if…elseif…else…endif"><a href="#4-2、if…elseif…else…endif" class="headerlink" title="4.2、if…elseif…else…endif"></a>4.2、if…elseif…else…endif</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">if()</span><br><span class="line">then</span><br><span class="line">...</span><br><span class="line">elseif()</span><br><span class="line">then</span><br><span class="line">...</span><br><span class="line">else</span><br><span class="line">...</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>给id为1，2，3的员工加薪1000元，其他员工不变</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_if_salary(eid int)</span><br><span class="line">begin</span><br><span class="line">	declare esalary double default 0;</span><br><span class="line">	if(eid=1)</span><br><span class="line">	then</span><br><span class="line">		update emp set salary=salary+1000 where id=eid;</span><br><span class="line">  elseif(eid=2)</span><br><span class="line">  then</span><br><span class="line">  	update emp set salary=salary+1000 where id=eid;</span><br><span class="line">  elseif(eid=3)</span><br><span class="line">  then</span><br><span class="line">  	update emp set salary=salary+1000 where id=eid;	</span><br><span class="line">  else</span><br><span class="line">  	update emp set salary=salary where id=eid;	</span><br><span class="line">  end if;</span><br><span class="line">  select salary into esalary from emp where id=eid;</span><br><span class="line">  select esalary;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_salary(1);</span><br><span class="line">+---------+</span><br><span class="line">| esalary |</span><br><span class="line">+---------+</span><br><span class="line">| 8200    |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.05 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_salary(3);</span><br><span class="line">+---------+</span><br><span class="line">| esalary |</span><br><span class="line">+---------+</span><br><span class="line">| 10000   |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_if_salary(9);</span><br><span class="line">+---------+</span><br><span class="line">| esalary |</span><br><span class="line">+---------+</span><br><span class="line">| 0       |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="4-3、case"><a href="#4-3、case" class="headerlink" title="4.3、case"></a>4.3、case</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">case()</span><br><span class="line">when... then...</span><br><span class="line">when... then...</span><br><span class="line">else...</span><br><span class="line">end case;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>给id为1，2，3的员工加薪1000元，其他员工不变</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_case_salary(eid int)</span><br><span class="line">begin</span><br><span class="line">	declare esalary double default 0;</span><br><span class="line">	case (eid)</span><br><span class="line">	when 1 then update emp set salary=salary+1000 where id=eid;</span><br><span class="line">  when 2 then update emp set salary=salary+1000 where id=eid;</span><br><span class="line">  when 3 then update emp set salary=salary+1000 where id=eid;	</span><br><span class="line">  else</span><br><span class="line">  	update emp set salary=salary where id=eid;	</span><br><span class="line">  end case;</span><br><span class="line">  select salary into esalary from emp where id=eid;</span><br><span class="line">  select esalary;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_case_salary(3);</span><br><span class="line">+---------+</span><br><span class="line">| esalary |</span><br><span class="line">+---------+</span><br><span class="line">| 12000   |</span><br><span class="line">+---------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="五、存储过程循环"><a href="#五、存储过程循环" class="headerlink" title="五、存储过程循环"></a>五、存储过程循环</h2><h3 id="5-1、while"><a href="#5-1、while" class="headerlink" title="5.1、while"></a>5.1、while</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">while(表达式) do </span><br><span class="line">......  </span><br><span class="line">end while;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>通过id查询出员工表中的前5个员工的姓名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_view()</span><br><span class="line">begin</span><br><span class="line">	declare eid int default 1;</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	while(eid&lt;=5) do</span><br><span class="line">		select name into ename from emp where id=eid;	</span><br><span class="line">		select ename;</span><br><span class="line">		set eid=eid+1;</span><br><span class="line">	end while;	</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_view();</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 李四 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 王五 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 赵六 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 吴七 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<h3 id="5-2、repeat"><a href="#5-2、repeat" class="headerlink" title="5.2、repeat"></a>5.2、repeat</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">repeat</span><br><span class="line">...</span><br><span class="line">until 条件 -- 条件成立，跳出循环</span><br><span class="line">....</span><br><span class="line">end repeat;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>通过id查询出员工表中的前5个员工的姓名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_view1()</span><br><span class="line">begin</span><br><span class="line">	declare eid int default 1;</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	repeat</span><br><span class="line">		select name into ename from emp where id=eid;		</span><br><span class="line">		select ename;</span><br><span class="line">		set eid=eid+1;</span><br><span class="line">	until eid&gt;5</span><br><span class="line">	end repeat;	</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_view1();</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 张三 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 李四 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 王五 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.05 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 赵六 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.06 秒)</span><br><span class="line"></span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| 吴七 |</span><br><span class="line">+--------+</span><br><span class="line">1 行于数据集 (0.06 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.06 秒)</span><br></pre></td></tr></table></figure>

<h2 id="六、存储过程游标"><a href="#六、存储过程游标" class="headerlink" title="六、存储过程游标"></a>六、存储过程游标</h2><p>游标是保存查询结果的临时区域</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">declare 游标名 cursor for SQL语句; #声明游标</span><br><span class="line">open 游标名; #打开游标</span><br><span class="line">fetch 游标名 into 变量名; #取出游标的值</span><br><span class="line">close 游标名; #关闭游标</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>输出员工表中的id和姓名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_all_view()</span><br><span class="line">begin</span><br><span class="line">	declare eid int default 1;</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	declare c_emp cursor for select id,name from emp;</span><br><span class="line">	open c_emp;</span><br><span class="line">	fetch c_emp into eid,ename;</span><br><span class="line">	select eid,ename;</span><br><span class="line">	close c_emp;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_all_view();</span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1    | 张三 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<p>这样我们只取出了一条信息，这个时候我们需要循环？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure emp_all_view1()</span><br><span class="line">begin</span><br><span class="line">	declare eid int default 1;</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	declare c_emp cursor for select id,name from emp;</span><br><span class="line">	</span><br><span class="line">	open c_emp;</span><br><span class="line">	loop</span><br><span class="line">		fetch c_emp into eid,ename;</span><br><span class="line">		select eid,ename;</span><br><span class="line">	end loop;</span><br><span class="line">	close c_emp;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; call emp_all_view1();</span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1    | 张三 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 2    | 李四 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 3    | 王五 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 4    | 赵六 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 5    | 吴七 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.03 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 6    | 王一 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.04 秒)</span><br><span class="line"></span><br><span class="line">+------+--------+</span><br><span class="line">| eid  | ename  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 7    | 王二 |</span><br><span class="line">+------+--------+</span><br><span class="line">1 行于数据集 (0.05 秒)</span><br><span class="line"></span><br><span class="line">No data - zero rows fetched, selected, or processed</span><br></pre></td></tr></table></figure>

<h2 id="七、存储过程操作"><a href="#七、存储过程操作" class="headerlink" title="七、存储过程操作"></a>七、存储过程操作</h2><h3 id="7-1、存储过程查看"><a href="#7-1、存储过程查看" class="headerlink" title="7.1、存储过程查看"></a>7.1、存储过程查看</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show procedure status [like &#x27;%字符串%&#x27;];</span><br></pre></td></tr></table></figure>

<p>案例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show procedure status;</span><br><span class="line">mysql&gt;show procedure status like &#x27;%emp%&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603520873279.png" alt="image20200221144121604.png"></p>
<h3 id="7-2、存储过程删除"><a href="#7-2、存储过程删除" class="headerlink" title="7.2、存储过程删除"></a>7.2、存储过程删除</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop procedure 存储过程名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; drop procedure emp_id;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="八、自定义函数"><a href="#八、自定义函数" class="headerlink" title="八、自定义函数"></a>八、自定义函数</h2><h3 id="8-1、自定义函数创建"><a href="#8-1、自定义函数创建" class="headerlink" title="8.1、自定义函数创建"></a>8.1、自定义函数创建</h3><p>函数与存储过程最大的区别是函数必须有返回值，否则会报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create function 函数名(参数) returns 返回类型</span><br><span class="line">begin</span><br><span class="line">.....</span><br><span class="line">return 返回值;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>通过输入的id获取员工的姓名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create function getName(eid int) returns varchar(20)</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	select name into ename from emp where id=eid;</span><br><span class="line">	return ename;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521032491.png" alt="image20200221152753864.png"></p>
<p><strong>注意：</strong></p>
<p>这是我们开启了bin-log, 我们就必须指定我们的函数指定一个参数deterministic 不确定的<br>no sql 没有SQL语句，当然也不会修改数据<br>reads sql data 只是读取数据，当然也不会修改数据<br>modifies sql data 要修改数据<br>contains sql 包含了SQL语句</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create function getName(eid int) returns varchar(20) reads sql data</span><br><span class="line">begin</span><br><span class="line">	declare ename varchar(20) default &#x27;&#x27;;</span><br><span class="line">	select name into ename from emp where id=eid;</span><br><span class="line">	return ename;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; select getName(1);</span><br><span class="line">+------------+</span><br><span class="line">| getName(1) |</span><br><span class="line">+------------+</span><br><span class="line">| 张三     |</span><br><span class="line">+------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="8-2、自定义函数操作"><a href="#8-2、自定义函数操作" class="headerlink" title="8.2、自定义函数操作"></a>8.2、自定义函数操作</h3><h4 id="8-2-1、自定义函数查询"><a href="#8-2-1、自定义函数查询" class="headerlink" title="8.2.1、自定义函数查询"></a>8.2.1、自定义函数查询</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show function status [like &#x27;%字符串%&#x27;];</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show function status；</span><br><span class="line">mysql&gt; show function status like &#x27;%getName%&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521094762.png" alt="image20200221154839122.png"></p>
<h4 id="8-2-2、自定义函数删除"><a href="#8-2-2、自定义函数删除" class="headerlink" title="8.2.2、自定义函数删除"></a>8.2.2、自定义函数删除</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop function 函数名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; drop function getName;</span><br><span class="line">Query OK, 0 rows affected (0.03 秒)</span><br></pre></td></tr></table></figure>

<h2 id="九、触发器"><a href="#九、触发器" class="headerlink" title="九、触发器"></a>九、触发器</h2><p>触发器与函数、存储过程一样，触发器是一种对象，它能根据对表的操作时间，触发一些动作，这些动作可以是insert,update,delete等操作。</p>
<h3 id="9-1、触发器创建"><a href="#9-1、触发器创建" class="headerlink" title="9.1、触发器创建"></a>9.1、触发器创建</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create trigger 触发器名字 触发时间 触发事件 on 表 for each row</span><br><span class="line">begin</span><br><span class="line">    -- 触发器内容主体，每行用分号结尾</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>触发时间：</strong></p>
<p>当 SQL 指令发生时，会令行中数据发生变化，而每张表中对应的行有两种状态：<strong>数据操作前和操作后</strong></p>
<p>before：表中数据发生改变前的状态</p>
<p>after：表中数据发生改变后的状态</p>
<p><strong>触发事件：</strong></p>
<p>触发器是针对数据发送改变才会被触发，对应的操作只有insert、update、delete</p>
<p><strong>案例：</strong></p>
<p>向员工表中插入数据时，记录插入的id，动作，时间</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#创建一个操作表</span><br><span class="line">create table emp_log(</span><br><span class="line">	id int primary key auto_increment,</span><br><span class="line">  eid int,</span><br><span class="line">  eaction varchar(20),</span><br><span class="line">  etime datetime</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp_log;</span><br><span class="line">空的数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">#创建触发器</span><br><span class="line">create trigger emp_insert after insert on emp for each row</span><br><span class="line">begin</span><br><span class="line">	insert into emp_log values(null,NEW.id,&#x27;insert&#x27;,now());</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into emp(id,name,gender)values(8,&#x27;王三&#x27;,&#x27;男&#x27;);</span><br><span class="line">Query OK, 1 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp_log;</span><br><span class="line">+----+------+---------+---------------------+</span><br><span class="line">| id | eid  | eaction | etime               |</span><br><span class="line">+----+------+---------+---------------------+</span><br><span class="line">| 1  | 8    | insert  | 2020-02-21 03:12:44 |</span><br><span class="line">+----+------+---------+---------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="9-2、触发器操作"><a href="#9-2、触发器操作" class="headerlink" title="9.2、触发器操作"></a>9.2、触发器操作</h3><h4 id="9-2-1、触发器查看"><a href="#9-2-1、触发器查看" class="headerlink" title="9.2.1、触发器查看"></a>9.2.1、触发器查看</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show triggers [like &#x27;%字符串%&#x27;];</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show triggers;</span><br><span class="line">mysql&gt; show triggers like &#x27;%emp%&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521169582.png" alt="image20200221161653246.png"></p>
<h4 id="9-2-2、触发器删除"><a href="#9-2-2、触发器删除" class="headerlink" title="9.2.2、触发器删除"></a>9.2.2、触发器删除</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop trigger 触发器名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; drop trigger emp_insert;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h2 id="十、事件"><a href="#十、事件" class="headerlink" title="十、事件"></a>十、事件</h2><p>事件取代了原先只能由操作系统的计划任务来执行的工作，而且MySQL的事件调度器可以精确到每秒钟执行一个任务，而操作系统的计划任务只能精确到每分钟执行一次。</p>
<h3 id="10-1、事件创建"><a href="#10-1、事件创建" class="headerlink" title="10.1、事件创建"></a>10.1、事件创建</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create event[IF NOT EXISTS] event_name -- 创建事件</span><br><span class="line">on schedule 时间和频率 -- on schedule 什么时候来执行</span><br><span class="line">[on completion [NOT] preserve] -- 调度计划执行完成后是否还保留</span><br><span class="line">[enable | disable] -- 是否开启事件，默认开启</span><br><span class="line">[comment &#x27;事件描述&#x27;] -- 事件的注释</span><br><span class="line">do event_body;-- 需要执行的SQL</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>单次计划任务示例</strong><br>在2019年2月1日4点执行一次 on schedule at ‘2019-02-01 04:00:00’</p>
<p><strong>重复计划执行</strong><br>on schedule every 1 second 每秒执行一次<br>on schedule every 1 minute 每分钟执行一次<br>on schedule every 1 day 没天执行一次</p>
<p><strong>指定时间范围的重复计划任务</strong><br>每天在20:00:00执行一次 on schedule every 1 day starts ‘2019-02-01 20:00:00’</p>
<p><strong>案例：</strong></p>
<p>每5秒向emp_log,插入当前日期时间记录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; desc emp_log;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521230682.png" alt="image20200221171724196.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create event e_insert on schedule every 5 second on completion preserve</span><br><span class="line">enable</span><br><span class="line">comment &#x27;每5秒插入一次&#x27;</span><br><span class="line">do</span><br><span class="line">begin</span><br><span class="line">	insert into emp_log values(null,1,&#x27;insert1&#x27;,now());</span><br><span class="line">end;</span><br><span class="line">#do call 存储过程 </span><br><span class="line">#do select 函数名</span><br></pre></td></tr></table></figure>

<h3 id="10-2、事件操作"><a href="#10-2、事件操作" class="headerlink" title="10.2、事件操作"></a>10.2、事件操作</h3><h4 id="10-2-1、查看事件"><a href="#10-2-1、查看事件" class="headerlink" title="10.2.1、查看事件"></a>10.2.1、查看事件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show events;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show events;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521251515.png" alt="image20200221174040539.png"></p>
<h4 id="10-2-2、启用和禁用事件"><a href="#10-2-2、启用和禁用事件" class="headerlink" title="10.2.2、启用和禁用事件"></a>10.2.2、启用和禁用事件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter event 事件名 disable/enable;</span><br></pre></td></tr></table></figure>

<p><strong>禁用事件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter event e_insert disable;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp_log;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521269958.png" alt="image20200221174401961.png"></p>
<p><strong>启用事件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter event e_insert enable;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp_log;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521286648.png" alt="image20200221174452171.png"></p>
<h4 id="10-2-3、删除事件"><a href="#10-2-3、删除事件" class="headerlink" title="10.2.3、删除事件"></a>10.2.3、删除事件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">drop event 事件名;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; drop event e_insert;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show events;</span><br><span class="line">空的数据集 (0.01 秒)</span><br></pre></td></tr></table></figure>

<h1 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h1><p> 阅读 (152640) </p>
<p> 分享</p>
<p>数据库设计(Database Design)是指对于一个给定的应用环境，构造最优的数据库模式，建立数据库及其应用系统，使之能够有效地存储数据，满足各种用户的应用需求（信息要求和处理要求）。在数据库领域内，常常把使用数据库的各类系统统称为数据库应用系统。<br>数据库设计的设计内容包括：需求分析、概念结构设计、逻辑结构设计、物理结构设计、数据库的实施和数据库的运行和维护。</p>
<h2 id="一、范式概述"><a href="#一、范式概述" class="headerlink" title="一、范式概述"></a>一、范式概述</h2><h3 id="1-1、什么是范式"><a href="#1-1、什么是范式" class="headerlink" title="1.1、什么是范式"></a>1.1、什么是范式</h3><p>好的数据库设计对数据的存储性能和后期的程序开发，都会产生重要的影响。建立科学的，规范的数据库就需要满足一些规则来优化数据的设计和存储，这些规则就称为范式。</p>
<h3 id="1-2、范式分类"><a href="#1-2、范式分类" class="headerlink" title="1.2、范式分类"></a>1.2、范式分类</h3><p>目前关系数据库有六种范式：</p>
<p>第一范式（1NF）</p>
<p>第二范式（2NF）</p>
<p>第三范式（3NF）</p>
<p>巴斯-科德范式（BCNF）、</p>
<p>第四范式(4NF）</p>
<p>第五范式（5NF，又称完美范式）</p>
<p>一般说来，数据库只需满足第三范式(3NF）就行了。</p>
<h2 id="二、第一范式"><a href="#二、第一范式" class="headerlink" title="二、第一范式"></a>二、第一范式</h2><p>确保每个字段不可再分。确保每列原子性。</p>
<p><strong>案例：</strong></p>
<p>班级表中的字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 班级id  | 班级名称   |         上课时间        |</span><br><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 1       |    一班   | 1999-09-01~2000-01-04  |</span><br><span class="line">+---------+----------+-------------------------+</span><br></pre></td></tr></table></figure>

<p>不合理。不满足第一范式，上课时间可以再分</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 班级id   | 班级名称   |   开课时间  |  结课时间  |</span><br><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 1       |    一班   | 1999-09-01 | 2000-01-04|</span><br><span class="line">+---------+----------+-------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>地址包含省、市、县、地区是否需要拆分？</strong><br>如果仅仅起地址的作用，不需要统计，可以不拆分；如果有按地区统计的功能需要拆分。一般情况下拆分</p>
<h2 id="三、第二范式"><a href="#三、第二范式" class="headerlink" title="三、第二范式"></a>三、第二范式</h2><p>一个表只能描述一件事。</p>
<p>订单表中的字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 订单编号 | 产品编号   |   订购日期  |    价格    |</span><br><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 00001   | A00001   | 1999-09-01 |   35687.0 |</span><br><span class="line">+---------+----------+------------------------+</span><br></pre></td></tr></table></figure>

<p>不合理。不满足第二范式，一个表中出现了二种描述，一个是订单，一个是产品</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">订单表</span><br><span class="line">+---------+------------+</span><br><span class="line">| 订单编号 |   订购日期  |</span><br><span class="line">+---------+------------+</span><br><span class="line">| 00001   | 1999-09-01 | </span><br><span class="line">+---------+------------+</span><br><span class="line">产品表</span><br><span class="line">+----------+------------+</span><br><span class="line">| 产品编号   |   价格     |</span><br><span class="line">+----------+------------+</span><br><span class="line">| A00001   | 35687.0    |</span><br><span class="line">+----------+------------+</span><br></pre></td></tr></table></figure>

<p><strong>如下表设计是否合理？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+------+--------+--------+---------+----------+</span><br><span class="line">| 学号  | 姓名   |   年龄  | 最高气温 |  青菜价格  | </span><br><span class="line">+------+--------+--------+---------+----------+</span><br></pre></td></tr></table></figure>

<h2 id="四、第三范式"><a href="#四、第三范式" class="headerlink" title="四、第三范式"></a>四、第三范式</h2><p>在所有的非键字段中，不能有传递依赖。消除传递依赖</p>
<p>订单表中的字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 订单编号 | 订购日期   |   顾客编号  |   顾客姓名 |</span><br><span class="line">+---------+----------+------------------------+</span><br><span class="line">| 00001   |1999-09-01|   A000001  |    Luc    |</span><br><span class="line">+---------+----------+------------------------+</span><br></pre></td></tr></table></figure>

<p>不合理。不满足第三范式，因为我们已经可以通过顾客编号知道顾客姓名，所以我们不需要定义顾客姓名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+---------+----------+------------+</span><br><span class="line">| 订单编号 | 订购日期   |   顾客编号  | </span><br><span class="line">+---------+----------+------------+</span><br><span class="line">| 00001   |1999-09-01|   A000001  | </span><br><span class="line">+---------+----------+------------+</span><br></pre></td></tr></table></figure>

<p>下列设计是否满足第三范式？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+------+--------+--------+---------+----------+</span><br><span class="line">| 学号  | 姓名   |   语文  |   数学   |  总分    | </span><br><span class="line">+------+--------+--------+---------+----------+</span><br></pre></td></tr></table></figure>

<p>不满足，因为语文和数学确定了，总分就确定了。<br>上面的设计不满足第三范式，但是高考分数表就是这样设计的，为什么？<br>高考分数峰值访问量非常大，这时候就是性能更重要。当性能和规范化冲突的时候，我们首选性能。这就是“反三范式”。</p>
<h1 id="MySQL数据备份与还原"><a href="#MySQL数据备份与还原" class="headerlink" title="MySQL数据备份与还原"></a>MySQL数据备份与还原</h1><p> 阅读 (290399) </p>
<p> 分享</p>
<p>MySQL 数据库管理系统通常会采用有效的措施来维护数据库的可靠性和完整性。但是在数据库的实际使用过程当中，仍存在着一些不可预估的因素，会造成数据库运行事务的异常中断，从而影响数据的正确性，甚至会破坏数据库，导致数据库中的数据部分或全部丢失。</p>
<p>数据库系统提供了备份和恢复策略来保证数据库中数据的可靠性和完整性。</p>
<h2 id="一、mysqldump备份"><a href="#一、mysqldump备份" class="headerlink" title="一、mysqldump备份"></a>一、mysqldump备份</h2><h3 id="1-1、数据库备份"><a href="#1-1、数据库备份" class="headerlink" title="1.1、数据库备份"></a>1.1、数据库备份</h3><p>数据库备份是指通过导出数据或者复制表文件的方式来制作数据库的副本。当数据库出现故障或遭到破坏时，将备份的数据库加载到系统，从而使数据库从错误状态恢复到备份时的正确状态。</p>
<h3 id="1-2、备份-x2F-还原格式"><a href="#1-2、备份-x2F-还原格式" class="headerlink" title="1.2、备份&#x2F;还原格式"></a>1.2、备份&#x2F;还原格式</h3><h4 id="1-2-1、备份"><a href="#1-2-1、备份" class="headerlink" title="1.2.1、备份"></a>1.2.1、备份</h4><p>备份整个数据库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">mysqldump -u用户名 -p密码 数据库名 &gt; sql文件位置</span><br><span class="line">[root@localhost mysql]# ./bin/mysqldump -uroot -p zutuanxue &gt; /usr/local/mysql/data/zutuanxue.sql</span><br></pre></td></tr></table></figure>

<p>备份数据库中的某个表</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">mysqldump -u用户名 -p密码 数据库名 数据库表名1 数据库表名2&gt; sql文件位置</span><br><span class="line">[root@localhost mysql]# ./bin/mysqldump -uroot -p zutuanxue t5 t6 &gt; ./data/1.sql</span><br></pre></td></tr></table></figure>

<p>备份多个数据库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">mysqldump -u用户名 -p密码 --databases 数据库名1 数据库名2&gt; sql文件位置</span><br><span class="line">[root@localhost mysql]# ./bin/mysqldump -uroot -p --databases a zutuanxue &gt; ./data/2.sql</span><br></pre></td></tr></table></figure>

<p>备份系统中所有数据库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">mysqldump -u用户名 -p密码 --all-databases &gt; sql文件位置</span><br><span class="line">[root@localhost mysql]# ./bin/mysqldump -uroot -p --all-databases &gt; ./data/1.sql</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2、还原"><a href="#1-2-2、还原" class="headerlink" title="1.2.2、还原"></a>1.2.2、还原</h4><p>登录mysql数据库后</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">source 导入文件的路径;</span><br><span class="line"></span><br><span class="line">mysql&gt; use zutuanxue;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; source /usr/local/mysql/data/zutuanxue.sql</span><br></pre></td></tr></table></figure>

<h2 id="二、图形化的备份与还原"><a href="#二、图形化的备份与还原" class="headerlink" title="二、图形化的备份与还原"></a>二、图形化的备份与还原</h2><h3 id="2-1、备份"><a href="#2-1、备份" class="headerlink" title="2.1、备份"></a>2.1、备份</h3><p>打开数据库-&gt;右击要备份的数据库</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521654232.png" alt="image20200216142554960.png"></p>
<p>选择“结构和数据”或者“结构”，跳出存储路径，存储一个sql文件</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521671030.png" alt="image20200216142651361.png"></p>
<p>点击“保存”，跳出进度窗口</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521684164.png" alt="image20200216142820725.png"></p>
<h3 id="2-2、还原"><a href="#2-2、还原" class="headerlink" title="2.2、还原"></a>2.2、还原</h3><p>打开要还原的数据库，右击“数据库”</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521704494.png" alt="image20200216143025810.png"></p>
<p>选择“运行SQL文件”</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521717747.png" alt="image20200216143109143.png"></p>
<p>选择sql“文件”所在的位置，点击“开始”</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521732225.png" alt="image20200216143212105.png"></p>
<p>运行完成后点击关闭，查看数据库下是否有表</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521748776.png" alt="image20200216143324447.png"></p>
<h1 id="MySQL-DCL语句"><a href="#MySQL-DCL语句" class="headerlink" title="MySQL DCL语句"></a>MySQL DCL语句</h1><p> 阅读 (224981) </p>
<p> 分享</p>
<p>数据控制语言 (Data Control Language) 在SQL语言中，是一种可对数据访问权进行控制的指令，它可以控制特定用户账户对数据表、查看表、存储程序、用户自定义函数等数据库对象的控制权。由 GRANT 和 REVOKE 两个指令组成。</p>
<h2 id="一、DCL概述"><a href="#一、DCL概述" class="headerlink" title="一、DCL概述"></a>一、DCL概述</h2><h3 id="1-1、什么是DCL"><a href="#1-1、什么是DCL" class="headerlink" title="1.1、什么是DCL"></a>1.1、什么是DCL</h3><p>DCL 语句主要是DBA 用来管理系统中的对象权限时所使用，一般的开发人员很少使用。</p>
<p>DCL中主要包括创建用户、给用户授权、对用户撤销授权、查询用户授权和删除用户等操作。</p>
<h3 id="1-2、为什么学习DCL"><a href="#1-2、为什么学习DCL" class="headerlink" title="1.2、为什么学习DCL"></a>1.2、为什么学习DCL</h3><p>在一个企业里面的数据库服务器上面可能同时运行着很多个项目的数据库。所以，我们应该可以根据不同的项目建立不同的用户，分配不同的权限来管理和维护数据库。</p>
<h2 id="二、用户管理"><a href="#二、用户管理" class="headerlink" title="二、用户管理"></a>二、用户管理</h2><p>mysql数据库的用户都在mysql数据库下面的user表中</p>
<h3 id="2-1、查看用户"><a href="#2-1、查看用户" class="headerlink" title="2.1、查看用户"></a>2.1、查看用户</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">select * from user;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from user;</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521889167.png" alt="image20200218234525100.png"></p>
<h3 id="2-2、创建用户"><a href="#2-2、创建用户" class="headerlink" title="2.2、创建用户"></a>2.2、创建用户</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">create user &#x27;用户名&#x27;@&#x27;主机名&#x27; identified by &#x27;密码&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>用户名：</strong> 新用户的名字</p>
<p><strong>主机名：</strong> 指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%</p>
<p><strong>密码：</strong> 密码可以为空，如果为空则该用户可以不需要密码登陆服务器</p>
<p><strong>案例：</strong></p>
<p>创建一个用户root1，只能在本机登录（localhost）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create user &#x27;root1&#x27;@&#x27;localhost&#x27; identified by &#x27;123&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521923781.png" alt="image20200219000040373.png"></p>
<p>创建一个用户root2，可以在任何主机（%）登录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create user &#x27;root2&#x27;@&#x27;%&#x27; identified by &#x27;123&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521943126.png" alt="image20200219000412028.png"></p>
<p><strong>注意：</strong></p>
<p>指定加密方式，增加用户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create user &#x27;root3&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;123&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521967385.png" alt="image20200219001939522.png"></p>
<h3 id="2-3、删除用户"><a href="#2-3、删除用户" class="headerlink" title="2.3、删除用户"></a>2.3、删除用户</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop user &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>删除root1</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; drop user root1@localhost;</span><br><span class="line">Query OK, 0 rows affected (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; select user,host,plugin,authentication_string from user;</span><br></pre></td></tr></table></figure>

<h2 id="三、密码管理"><a href="#三、密码管理" class="headerlink" title="三、密码管理"></a>三、密码管理</h2><h3 id="3-1、修改用户密码"><a href="#3-1、修改用户密码" class="headerlink" title="3.1、修改用户密码"></a>3.1、修改用户密码</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">alter user &#x27;用户名&#x27;@&#x27;主机名&#x27; identified by &#x27;密码&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>修改root2的密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter user &#x27;root2&#x27;@&#x27;%&#x27; identified by &#x27;456&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>如果想用该root2用户连接上mysql服务端的话，我们的密码修改时应该是：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter user &#x27;root2&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;456&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.02 秒)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、设置管理员（root）密码"><a href="#3-2、设置管理员（root）密码" class="headerlink" title="3.2、设置管理员（root）密码"></a>3.2、设置管理员（root）密码</h3><p>清空密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">use mysql; </span><br><span class="line"></span><br><span class="line">update user set authentication_string=&#x27;&#x27; where user=&#x27;root&#x27;;#设置提root用户的密码为‘’，本地，远程 </span><br></pre></td></tr></table></figure>

<p>设置密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter user &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;Root12345&#x27;;</span><br><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;Root12345&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="四、权限管理"><a href="#四、权限管理" class="headerlink" title="四、权限管理"></a>四、权限管理</h2><h3 id="4-1、查看用户权限"><a href="#4-1、查看用户权限" class="headerlink" title="4.1、查看用户权限"></a>4.1、查看用户权限</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">show grants for &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>查看’root2’，’root3’及’root’权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show grants for &#x27;root2&#x27;@&#x27;%&#x27;;</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| Grants for root2@%                |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| GRANT USAGE ON *.* TO `root2`@`%` |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">1 行于数据集 (0.01 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show grants for &#x27;root3&#x27;@&#x27;%&#x27;;</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| Grants for root3@%                |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| GRANT USAGE ON *.* TO `root3`@`%` |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">1 行于数据集 (0.02 秒)</span><br><span class="line"></span><br><span class="line">mysql&gt; show grants for &#x27;root&#x27;@&#x27;%&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603521994010.png" alt="image20200219002900607.png"></p>
<h3 id="4-2、授权"><a href="#4-2、授权" class="headerlink" title="4.2、授权"></a>4.2、授权</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">grant 权限 1, 权限 2... on 数据库名.表名 to &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>grant… on …to ：</strong>授权关键字</p>
<p><strong>权限：</strong> 如select\insert\update\delete等，如果是所有用all</p>
<p><strong>数据库名.表名：</strong> 该用户可以操作哪个数据库的哪些表。如果要授予该用户对所有数据库和表的相应操作权限则可用<em>表示，如</em>.*</p>
<p><strong>’用户名’@‘主机名’ ：</strong> 注意单引号不能省略</p>
<p><strong>案例：</strong></p>
<p>给’root2’分配，增加、删除、修改、查询表的权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; grant insert,delete,update,select on zutuanxue.* to &#x27;root2&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure>

<p>给’root3’分配所有权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; grant all on *.* to &#x27;root3&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="4-3、撤销授权"><a href="#4-3、撤销授权" class="headerlink" title="4.3、撤销授权"></a>4.3、撤销授权</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式：</span><br><span class="line">revoke 权限 1, 权限 2... on 数据库名.表名 from &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p><strong>revoke… on …from ：</strong> 撤消授权关键字</p>
<p><strong>权限：</strong> 如select\insert\update\delete等，如果是所有用all</p>
<p><strong>数据库名.表名：</strong> 该用户可以操作哪个数据库的哪些表。如果要撤消授予该用户对所有数据库和表的相应操作权限则可用<em>表示，如</em>.*</p>
<p><strong>’用户名’@‘主机名’ ：</strong> 注意单引号不能省略</p>
<p><strong>案例：</strong></p>
<p>撤消’root2’的权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; revoke all on zutuanxue.* from &#x27;root2&#x27;@&#x27;%&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL-AB复制"><a href="#MySQL-AB复制" class="headerlink" title="MySQL AB复制"></a>MySQL AB复制</h1><p> 阅读 (324687) </p>
<p> 分享</p>
<h1 id="mysql-AB复制实战"><a href="#mysql-AB复制实战" class="headerlink" title="mysql AB复制实战"></a>mysql AB复制实战</h1><p>mysqldump解决了mysql数据库的备份，它只是基于某个时间点做备份，无法解决实时备份的问题，为了解决mysql实时备份的问题，mysql官方推出了mysql主从备份机制，可以让用户通过设置mysql主从来实现数据库实时备份。</p>
<p>1、MySQL服务器宕机怎么 单点故障</p>
<p>2、数据的安全</p>
<h2 id="一、mysql-AB复制"><a href="#一、mysql-AB复制" class="headerlink" title="一、mysql AB复制"></a>一、mysql AB复制</h2><p>通过多台机器实现一主多从的方式来实现数据备份，主服务器负责让用户读写数据，从服务器负责同步主服务器数据，也可以承担用户读的任务。</p>
<p>至少两台机器</p>
<h2 id="二、AB复制原理"><a href="#二、AB复制原理" class="headerlink" title="二、AB复制原理"></a>二、AB复制原理</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/29/1603972949435.jpg" alt="mysql_ab_原理.jpg"></p>
<p>1、用户or web 对主服务器的所有修改操作都会记录在binary log日志</p>
<p>成功的修改操作【增加 修改 删除】 记录的是SQL语句 主上的一个线程</p>
<p>2、从 有两个线程</p>
<p>IO线程：负责连接主mysql【AB通信 A授权账号】提取binlog中的SQL语句到relay log</p>
<p>SQL线程：在本地执行relay log中新增的SQL语句</p>
<p>注意：AB是异步</p>
<h2 id="三、master服务器设置"><a href="#三、master服务器设置" class="headerlink" title="三、master服务器设置"></a>三、master服务器设置</h2><p><strong>实验拓扑</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/29/1603972978082.png" alt="mysql_ab拓扑图.png"></p>
<ul>
<li>安装mysql并启动</li>
<li>关闭防火墙,selinux</li>
<li>设置时间服务器</li>
<li>修改配置文件 设置server-id&#x3D;N</li>
<li>创建slave连接master的账号，用于取SQL语句</li>
</ul>
<h3 id="3-1、安装mysql并启动"><a href="#3-1、安装mysql并启动" class="headerlink" title="3.1、安装mysql并启动"></a>3.1、安装mysql并启动</h3><p>a、安装mysql</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">官网下载mysql yum源，安装</span><br><span class="line">安装方法：yum -y install mysql-server mysql</span><br></pre></td></tr></table></figure>

<p>b、启动mysql</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl enable mysqld;systemctl start mysqld</span><br></pre></td></tr></table></figure>

<p>c、修改root密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;98989&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、关闭防火墙-selinux"><a href="#3-2、关闭防火墙-selinux" class="headerlink" title="3.2、关闭防火墙,selinux"></a>3.2、关闭防火墙,selinux</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@node1 ~]# systemctl disable firewalld</span><br><span class="line">[root@node1 ~]# iptables -F</span><br><span class="line">[root@node1 ~]# iptables -t nat -F</span><br><span class="line">[root@node1 ~]# sed -i -r &#x27;/SELINUX=/c\SELINUX=disabled&#x27; /etc/selinux/config</span><br><span class="line">[root@node1 ~]# reboot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">其他机器同理</span><br></pre></td></tr></table></figure>

<h3 id="3-3、设置时间服务器"><a href="#3-3、设置时间服务器" class="headerlink" title="3.3、设置时间服务器"></a>3.3、设置时间服务器</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">禁止向centos默认时间服务器同步时间</span><br><span class="line">[root@node1 ~]# sed -i.bak &#x27;/^pool 2.centos.pool.ntp.org iburst$/s//#/&#x27; /etc/chrony.conf </span><br><span class="line"></span><br><span class="line">设置时间服务器为阿里云的</span><br><span class="line">[root@node1 ~]# cat &gt;&gt; /etc/chrony.conf &lt;&lt;EOF</span><br><span class="line">&gt; server ntp1.aliyun.com</span><br><span class="line">&gt; server ntp2.aliyun.com</span><br><span class="line">&gt; server ntp3.aliyun.com</span><br><span class="line">&gt; server ntp4.aliyun.com</span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line">重启服务生效</span><br><span class="line">[root@node1 ~]# systemctl restart chronyd</span><br><span class="line">查看命令，看一下时间服务器IP地址</span><br><span class="line">[root@node1 ~]# chronyc sources -v</span><br></pre></td></tr></table></figure>

<h3 id="3-4、修改配置文件-设置server-id-x3D-N"><a href="#3-4、修改配置文件-设置server-id-x3D-N" class="headerlink" title="3.4、修改配置文件 设置server-id&#x3D;N"></a>3.4、修改配置文件 设置server-id&#x3D;N</h3><p>server-id的数字越小，优先级越高。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@node1 ~]# echo &quot;server-id=1&quot;  &gt;&gt; /etc/my.cnf.d/mysql-server.cnf </span><br></pre></td></tr></table></figure>

<p>确认binlog是开启的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如果没有开启   log-bin=binlog</span><br></pre></td></tr></table></figure>

<h3 id="3-5、创建slave连接master的账号，用于取SQL语句"><a href="#3-5、创建slave连接master的账号，用于取SQL语句" class="headerlink" title="3.5、创建slave连接master的账号，用于取SQL语句"></a>3.5、创建slave连接master的账号，用于取SQL语句</h3><p><strong>登陆进入mysql: mysql -u root -p</strong></p>
<p><strong>password:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create user sko identified by &quot;98989&quot;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant replication slave on *.* to sko;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>查看主的状态</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show master status \G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">             File: binlog.000002</span><br><span class="line">         Position: 155</span><br><span class="line">     Binlog_Do_DB: </span><br><span class="line"> Binlog_Ignore_DB: </span><br><span class="line">Executed_Gtid_Set: </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR: </span><br><span class="line">No query specified</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br><span class="line">mysql&gt; create database db1;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">File: binlog.000002  当前主的binlog日志</span><br><span class="line">Position: 155        当前binlog日志的SQL语句记录点</span><br></pre></td></tr></table></figure>

<h2 id="四、slave设置"><a href="#四、slave设置" class="headerlink" title="四、slave设置"></a>四、slave设置</h2><p><strong>实验步骤</strong></p>
<ul>
<li>安装mysql并启动</li>
<li>关闭防火墙、selinux</li>
<li>设置时间服务器</li>
<li>修改配置文件 设置server-id&#x3D;N+x</li>
<li>设置master主信息</li>
<li>测试同步</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- [4.1] 安装mysql并启动</span><br><span class="line">- [4.2] 关闭防火墙、selinux</span><br><span class="line">- [4.3] 设置时间服务器</span><br><span class="line"></span><br><span class="line">省略......</span><br></pre></td></tr></table></figure>

<h3 id="4-3、修改配置文件-设置server-id-x3D-N-x"><a href="#4-3、修改配置文件-设置server-id-x3D-N-x" class="headerlink" title="4.3、修改配置文件 设置server-id&#x3D;N+x"></a>4.3、修改配置文件 设置server-id&#x3D;N+x</h3><p>从服务器的server-id要比主的数字大。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@node2 ~]# echo &quot;server-id=2&quot;  &gt;&gt; /etc/my.cnf.d/mysql-server.cnf </span><br></pre></td></tr></table></figure>

<h3 id="4-4、设置slave同步"><a href="#4-4、设置slave同步" class="headerlink" title="4.4、设置slave同步"></a>4.4、设置slave同步</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; stop slave;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; change master to master_host=&#x27;192.168.98.201&#x27;,master_user=&#x27;sko&#x27;,master_password=&#x27;98989&#x27;,master_log_file=&#x27;binlog.000002&#x27;;</span><br><span class="line">Query OK, 0 rows affected, 3 warnings (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="4-5、验证slave"><a href="#4-5、验证slave" class="headerlink" title="4.5、验证slave"></a>4.5、验证slave</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show slave status \G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">               Slave_IO_State: Waiting for master to send event</span><br><span class="line">                  Master_Host: 192.168.98.201</span><br><span class="line">                  Master_User: sko</span><br><span class="line">                  Master_Port: 3306</span><br><span class="line">                Connect_Retry: 60</span><br><span class="line">              Master_Log_File: binlog.000002</span><br><span class="line">          Read_Master_Log_Pos: 337</span><br><span class="line">               Relay_Log_File: node2-relay-bin.000002</span><br><span class="line">                Relay_Log_Pos: 545</span><br><span class="line">        Relay_Master_Log_File: binlog.000002</span><br><span class="line">             Slave_IO_Running: Yes</span><br><span class="line">            Slave_SQL_Running: Yes</span><br><span class="line">              Replicate_Do_DB: </span><br><span class="line">          Replicate_Ignore_DB: </span><br><span class="line">           Replicate_Do_Table: </span><br><span class="line">       Replicate_Ignore_Table: </span><br><span class="line">      Replicate_Wild_Do_Table: </span><br><span class="line">  Replicate_Wild_Ignore_Table: </span><br><span class="line">                   Last_Errno: 0</span><br><span class="line">                   Last_Error: </span><br><span class="line">                 Skip_Counter: 0</span><br><span class="line">          Exec_Master_Log_Pos: 337</span><br><span class="line">              Relay_Log_Space: 753</span><br><span class="line">              Until_Condition: None</span><br><span class="line">               Until_Log_File: </span><br><span class="line">                Until_Log_Pos: 0</span><br><span class="line">           Master_SSL_Allowed: No</span><br><span class="line">           Master_SSL_CA_File: </span><br><span class="line">           Master_SSL_CA_Path: </span><br><span class="line">              Master_SSL_Cert: </span><br><span class="line">            Master_SSL_Cipher: </span><br><span class="line">               Master_SSL_Key: </span><br><span class="line">        Seconds_Behind_Master: 0</span><br><span class="line">Master_SSL_Verify_Server_Cert: No</span><br><span class="line">                Last_IO_Errno: 0</span><br><span class="line">                Last_IO_Error: </span><br><span class="line">               Last_SQL_Errno: 0</span><br><span class="line">               Last_SQL_Error: </span><br><span class="line">  Replicate_Ignore_Server_Ids: </span><br><span class="line">             Master_Server_Id: 1</span><br><span class="line">                  Master_UUID: ae106b21-59c3-11ea-aa77-000c29b8d045</span><br><span class="line">             Master_Info_File: mysql.slave_master_info</span><br><span class="line">                    SQL_Delay: 0</span><br><span class="line">          SQL_Remaining_Delay: NULL</span><br><span class="line">      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates</span><br><span class="line">           Master_Retry_Count: 86400</span><br><span class="line">                  Master_Bind: </span><br><span class="line">      Last_IO_Error_Timestamp: </span><br><span class="line">     Last_SQL_Error_Timestamp: </span><br><span class="line">               Master_SSL_Crl: </span><br><span class="line">           Master_SSL_Crlpath: </span><br><span class="line">           Retrieved_Gtid_Set: </span><br><span class="line">            Executed_Gtid_Set: </span><br><span class="line">                Auto_Position: 0</span><br><span class="line">         Replicate_Rewrite_DB: </span><br><span class="line">                 Channel_Name: </span><br><span class="line">           Master_TLS_Version: </span><br><span class="line">       Master_public_key_path: </span><br><span class="line">        Get_master_public_key: 0</span><br><span class="line">            Network_Namespace: </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR: </span><br><span class="line">No query specified</span><br></pre></td></tr></table></figure>

<h3 id="4-6、干货分享，如何解决AB不同步的问题"><a href="#4-6、干货分享，如何解决AB不同步的问题" class="headerlink" title="4.6、干货分享，如何解决AB不同步的问题"></a>4.6、干货分享，如何解决AB不同步的问题</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Slave_IO_Running: Yes</span><br><span class="line">#该线程负责从master上拿binlog日志到relaylog，复制线程</span><br><span class="line">#该线程如果是NO，如何排除</span><br><span class="line">#1、查主从网络是否能通信，iptables  selinux</span><br><span class="line">#2、查你的repl账号在slave上是否能连接master</span><br><span class="line"></span><br><span class="line">Slave_SQL_Running: Yes</span><br><span class="line">#该线程负责将本机relaylog中的SQL语句执行一次</span><br><span class="line">#该线程为NO,如何排除</span><br><span class="line">#该线程为NO说明relaylog中的SQL语句在本地无法执行</span><br><span class="line">#1、查看mysql&gt; show slave status \G; 找到不能执行的语句</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; show slave status \G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">               Slave_IO_State: Waiting for master to send event</span><br><span class="line">                  Master_Host: 192.168.98.201</span><br><span class="line">                  Master_User: sko</span><br><span class="line">                  Master_Port: 3306</span><br><span class="line">                Connect_Retry: 60</span><br><span class="line">              Master_Log_File: binlog.000002</span><br><span class="line">          Read_Master_Log_Pos: 515</span><br><span class="line">               Relay_Log_File: node2-relay-bin.000002</span><br><span class="line">                Relay_Log_Pos: 545</span><br><span class="line">        Relay_Master_Log_File: binlog.000002</span><br><span class="line">             Slave_IO_Running: Yes</span><br><span class="line">            Slave_SQL_Running: No</span><br><span class="line">              Replicate_Do_DB: </span><br><span class="line">          Replicate_Ignore_DB: </span><br><span class="line">           Replicate_Do_Table: </span><br><span class="line">       Replicate_Ignore_Table: </span><br><span class="line">      Replicate_Wild_Do_Table: </span><br><span class="line">  Replicate_Wild_Ignore_Table: </span><br><span class="line">                   Last_Errno: 1008</span><br><span class="line">                   Last_Error: Error &#x27;Can&#x27;t drop database &#x27;db1&#x27;; database doesn&#x27;t exist&#x27; on query. Default database: &#x27;db1&#x27;. Query: &#x27;drop database db1&#x27;</span><br><span class="line">                 Skip_Counter: 0</span><br><span class="line">          Exec_Master_Log_Pos: 337</span><br><span class="line">              Relay_Log_Space: 931</span><br><span class="line">              Until_Condition: None</span><br><span class="line">               Until_Log_File: </span><br><span class="line">                Until_Log_Pos: 0</span><br><span class="line">           Master_SSL_Allowed: No</span><br><span class="line">           Master_SSL_CA_File: </span><br><span class="line">           Master_SSL_CA_Path: </span><br><span class="line">              Master_SSL_Cert: </span><br><span class="line">            Master_SSL_Cipher: </span><br><span class="line">               Master_SSL_Key: </span><br><span class="line">        Seconds_Behind_Master: NULL</span><br><span class="line">Master_SSL_Verify_Server_Cert: No</span><br><span class="line">                Last_IO_Errno: 0</span><br><span class="line">                Last_IO_Error: </span><br><span class="line">               Last_SQL_Errno: 1008</span><br><span class="line">               Last_SQL_Error: Error &#x27;Can&#x27;t drop database &#x27;db1&#x27;; database doesn&#x27;t exist&#x27; on query. Default database: &#x27;db1&#x27;. Query: &#x27;drop database db1&#x27;</span><br><span class="line">  Replicate_Ignore_Server_Ids: </span><br><span class="line">             Master_Server_Id: 1</span><br><span class="line">                  Master_UUID: ae106b21-59c3-11ea-aa77-000c29b8d045</span><br><span class="line">             Master_Info_File: mysql.slave_master_info</span><br><span class="line">                    SQL_Delay: 0</span><br><span class="line">          SQL_Remaining_Delay: NULL</span><br><span class="line">      Slave_SQL_Running_State: </span><br><span class="line">           Master_Retry_Count: 86400</span><br><span class="line">                  Master_Bind: </span><br><span class="line">      Last_IO_Error_Timestamp: </span><br><span class="line">     Last_SQL_Error_Timestamp: 200227 20:36:57</span><br><span class="line">               Master_SSL_Crl: </span><br><span class="line">           Master_SSL_Crlpath: </span><br><span class="line">           Retrieved_Gtid_Set: </span><br><span class="line">            Executed_Gtid_Set: </span><br><span class="line">                Auto_Position: 0</span><br><span class="line">         Replicate_Rewrite_DB: </span><br><span class="line">                 Channel_Name: </span><br><span class="line">           Master_TLS_Version: </span><br><span class="line">       Master_public_key_path: </span><br><span class="line">        Get_master_public_key: 0</span><br><span class="line">            Network_Namespace: </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR: </span><br><span class="line">No query specified</span><br><span class="line"></span><br><span class="line">#这段就能看到为何不能执行，原因是slave上没有db1数据库，所以不能删除。</span><br><span class="line"> Last_SQL_Error: Error &#x27;Can&#x27;t drop database &#x27;db1&#x27;; database doesn&#x27;t exist&#x27; on query. Default database: &#x27;db1&#x27;. Query: &#x27;drop database db1&#x27;</span><br><span class="line"> </span><br><span class="line">#2、最关键的一步，如何定位错误点 </span><br><span class="line">#Read_Master_Log_Pos: 515   找到目前复制的master Binlog日志的pos位置，从这个位置开始,后续在slave上做差异还原同步。</span><br><span class="line">		</span><br><span class="line">#拓展：如何找下一个POS位置，去看你master的当前binlog日志 </span><br><span class="line">#定位错误点SQL语句的位置号</span><br><span class="line">[root@node1 ~]# mysqlbinlog /var/lib/mysql/binlog.000002|egrep -B 30 &quot;drop database db1&quot;</span><br><span class="line">.........</span><br><span class="line"># at 414    错误点SQL语句的位置号</span><br><span class="line">#200227 20:36:57 server id 1  end_log_pos 515 CRC32 0x683207a9 	Query	thread_id=8	exec_time=0	error_code=0	Xid = 17</span><br><span class="line">SET TIMESTAMP=1582853817/*!*/;</span><br><span class="line">drop database db1</span><br><span class="line">..........</span><br><span class="line"></span><br><span class="line">#定位错误点SQL语句之后一条的位置号</span><br><span class="line">[root@node1 ~]# mysqlbinlog /var/lib/mysql/binlog.000002|egrep -A 30 &quot;drop database db1&quot;</span><br><span class="line">drop database db1</span><br><span class="line">/*!*/;</span><br><span class="line"># at 515   发现下一条SQL语句是515</span><br><span class="line">#200227 20:42:37 server id 1  end_log_pos 592 CRC32 0x2677edde 	Anonymous_GTID	last_committed=2	sequence_number=3	rbr_only=no	original_committed_timestamp=1582854157245396	immediate_commit_timestamp=1582854157245396	transaction_length=182</span><br><span class="line"># original_commit_timestamp=1582854157245396 (2020-02-27 20:42:37.245396 EST)</span><br><span class="line"># immediate_commit_timestamp=1582854157245396 (2020-02-27 20:42:37.245396 EST)</span><br><span class="line">/*!80001 SET @@session.original_commit_timestamp=1582854157245396*//*!*/;</span><br><span class="line">/*!80014 SET @@session.original_server_version=80017*//*!*/;</span><br><span class="line">/*!80014 SET @@session.immediate_server_version=80017*//*!*/;</span><br><span class="line">SET @@SESSION.GTID_NEXT= &#x27;ANONYMOUS&#x27;/*!*/;</span><br><span class="line"></span><br><span class="line"># at 592</span><br><span class="line">#200227 20:42:37 server id 1  end_log_pos 697 CRC32 0x3624f753 	Query	thread_id=11	exec_time=0	error_code=0	Xid = 24</span><br><span class="line">SET TIMESTAMP=1582854157/*!*/;</span><br><span class="line">/*!80016 SET @@session.default_table_encryption=0*//*!*/;</span><br><span class="line">create database db2</span><br><span class="line">/*!*/;</span><br><span class="line">....................</span><br><span class="line">#发现下一条SQL语句是515</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#通过上述命令可以查看pos 515之后的语句，-A 30 是指往后30行   -B 30是看往前30行，根据自己的需求设置</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">#3、重新设置同步指令</span><br><span class="line">mysql&gt; stop slave;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; change master to master_host=&#x27;192.168.98.201&#x27;,master_user=&#x27;sko&#x27;,master_password=&#x27;98989&#x27;,master_log_file=&#x27;binlog.000002&#x27;,master_log_pos=515;</span><br><span class="line">Query OK, 0 rows affected, 2 warnings (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h1 id="MySQL多主模型实战"><a href="#MySQL多主模型实战" class="headerlink" title="MySQL多主模型实战"></a>MySQL多主模型实战</h1><p> 阅读 (423640) </p>
<p> 分享</p>
<p>MySQL AB解决了数据备份的问题，但是当A由于某些原因宕机后，WEB服务器就没有办法在往数据库写或者读写了。线上业务中断了，完了，出事故了。这该怎么办呢？</p>
<p>本节课主要给大家讲解如果处理因为MySQL主服务器宕机造成的业务中断问题，保障MySQL业务高可用。</p>
<h2 id="一、实验拓扑图"><a href="#一、实验拓扑图" class="headerlink" title="一、实验拓扑图"></a>一、实验拓扑图</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/29/1603973198714.png" alt="mysql_aa拓扑图.png"></p>
<h2 id="二、架构原理"><a href="#二、架构原理" class="headerlink" title="二、架构原理"></a>二、架构原理</h2><p>1、MySQL互为主备，保障多台MySQL的数据强一致性。</p>
<p>2、VIP漂移，任何一台宕机都不影响数据读写</p>
<p>3、宕机服务器修复，自动同步故障间的缺失数据</p>
<h2 id="三、实验准备"><a href="#三、实验准备" class="headerlink" title="三、实验准备"></a>三、实验准备</h2><ul>
<li>机器三台并设置好IP地址</li>
<li>关闭防火墙、selinux</li>
<li>时间同步</li>
<li>node1、node2安装mysql</li>
<li>manage01部署lamp</li>
<li>上线业务并进行容灾测试</li>
<li>知识储备点：MySQL AB复制</li>
</ul>
<h2 id="四、node1、node2互为主备"><a href="#四、node1、node2互为主备" class="headerlink" title="四、node1、node2互为主备"></a>四、node1、node2互为主备</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、确认binlog开启</span><br><span class="line">2、设置server-id</span><br><span class="line">3、创建同步mysql用户</span><br><span class="line">4、设置同步</span><br><span class="line"></span><br><span class="line">#以node2为例</span><br><span class="line">#创建用户</span><br><span class="line">mysql&gt; create user sko2 identified by &quot;123456&quot;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant replication slave on *.* to sko2;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">#开始同步</span><br><span class="line">#同步前    主服务器生成一个新binlog开始同步，防止之前的binlog中语句无法执行</span><br><span class="line">mysql&gt; stop slave;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; change master to </span><br><span class="line">-&gt; master_host=&#x27;192.168.98.202&#x27;,</span><br><span class="line">-&gt; master_user=&#x27;sko&#x27;,</span><br><span class="line">-&gt; master_password=&#x27;98989&#x27;,</span><br><span class="line">-&gt; master_log_file=&#x27;binlog.000002&#x27;,</span><br><span class="line">-&gt; master_log_pos=xxx;</span><br><span class="line">Query OK, 0 rows affected, 3 warnings (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="五、manage01-lamp"><a href="#五、manage01-lamp" class="headerlink" title="五、manage01-lamp"></a>五、manage01-lamp</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 部署lamp业务环境</span><br><span class="line">[root@manage01 ~]# yum -y install httpd php php-mysql</span><br><span class="line">[root@manage01 ~]# systemctl start httpd</span><br><span class="line">[root@manage01 ~]# systemctl start php-fpm</span><br><span class="line">[root@manage01 ~]# vim /var/www/html/phpinfo.php</span><br><span class="line"></span><br><span class="line">#测试</span><br><span class="line">&lt;?php phpinfo(); ?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="六、配置MySQL高可用"><a href="#六、配置MySQL高可用" class="headerlink" title="六、配置MySQL高可用"></a>六、配置MySQL高可用</h2><p>1、模拟故障，将配有VIP的mysql宕机，手动回收VIP并配给另外一个运行的mysql服务器，查看业务是否正常。</p>
<p>2、恢复宕机mysql，查看宕机过程中的产生的数据是否能够从另外一个运行的mysql中恢复回来。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">参考nginx高可用部署</span><br><span class="line">https://www.zutuanxue.com/home/4/58_388</span><br></pre></td></tr></table></figure>

<h2 id="七、上线业务测试"><a href="#七、上线业务测试" class="headerlink" title="七、上线业务测试"></a>七、上线业务测试</h2><p>a、拷贝站点</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manage01 ~]# cp -r 测试站点html/* /var/www/html/</span><br></pre></td></tr></table></figure>

<p>b、安装站点<br>打开浏览器输入 <a href="http://ip/install.php">http://IP/install.php</a></p>
<p>c、根据站点提示输入数据并查询，查询数据库数据同步情况</p>
<p>d、停止主mysql继续测试业务，确保正常工作</p>
<p>e、启动宕机mysql，确保停机期间的数据同步</p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-11</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-10</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-13</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco交换-7</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E4%BA%A4%E6%8D%A2-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-12</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-14</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-15</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-16</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-17</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-18</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-19</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-2</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-3</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-5</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-4</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-6</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-7</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-9</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-cisco路由-8</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-cisco%E8%B7%AF%E7%94%B1-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-1</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-10</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-12</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-11</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-13</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-14</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>zutuanxue-Linux系统管理宝典</title>
    <url>/2022/11/15/zutuanxue-Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8/</url>
    <content><![CDATA[<h1 id="操作系统介绍"><a href="#操作系统介绍" class="headerlink" title="操作系统介绍"></a>操作系统介绍</h1><p> 阅读 (100095) </p>
<p> 分享</p>
<h2 id="一、操作系统的介绍"><a href="#一、操作系统的介绍" class="headerlink" title="一、操作系统的介绍"></a>一、操作系统的介绍</h2><p>操作系统是<strong>管理计算机硬件与软件资源</strong>的计算机程序，会对计算机管理硬件、驱动硬件；管理软件；资源分配与回收，操作系统也提供一个让用户与系统交互的操作界面。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/11/15/1605446237843.png" alt="计算机构成.png"></p>
<p>在计算机中，操作系统是其最基本也是最为重要的基础性系统软件。</p>
<ul>
<li>从计算机用户的角度来说：计算机操作系统体现在其提供的各项服务；</li>
<li>从程序员的角度来说：其主要是指用户登录的界面或者接口；</li>
<li>从设计人员的角度来说：就是指各式各样模块和单元之间的联系。</li>
</ul>
<p>经过几十年以来的发展，计算机操作系统已经由一开始的简单控制循环体发展成为较为复杂的分布式操作系统，再加上计算机用户需求的愈发多样化，计算机操作系统已经成为既复杂而又庞大的计算机软件系统之一。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/9/1602246931350.png" alt="image20200316191847256.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/9/1602246940516.png" alt="image20200316192238908.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/9/1602247166613.jpg" alt="16022471411.jpg"></p>
<h2 id="二、操作系统的功能"><a href="#二、操作系统的功能" class="headerlink" title="二、操作系统的功能"></a>二、操作系统的功能</h2><p>操作系统主要包括以下几个方面的功能 ：</p>
<p>①进程管理：其工作主要是进程调度，解决处理器的调度、 分配和回收等问题 。如：根据进程的优先级不同，来决定优先处理哪个进程的数据</p>
<p>②存储管理分为几种功能：<br>– 存储分配，如：内存资源的分配；<br>– 存储共享，如：不同进程可以共享内存中的数据等；<br>– 存储保护，如：保证内存中的程序只能在指定的存储区域内活动，互不干扰 ；<br>– 存储扩张，如：利用虚拟内存技术或者自动覆盖技术，从逻辑上扩充内存。</p>
<p>③设备管理分有以下功能：<br>– 设备分配，也就是为对应的进程分配合适的设备及相关硬件；<br>– 设备传输控制，主要是控制各种I&#x2F;O设备和内存或CPU之间的数据传送 ；<br>– 设备独立性，又称设备无关性，是指应用程序独立于具体使用的物理设备。</p>
<p>④文件管理：<br>– 文件存储空间的管理，可以简单理解为，硬盘上哪些地方空着我可以写入数据，哪些地方的数据删除了，我可以将空间回收，以便有新的数据写入时使用，只不过这个是针对于块的操作；<br>– 目录管理 ，让我们可以按照名字进行存取，提高查询的速度等；<br>– 文件操作管理，如：文件的创建，删除，读，写等；<br>– 文件保护，如：为了防止文件被破坏或修改，针对不同的用户设置不同的权限。</p>
<p>⑤作业管理是负责处理用户提交的任何要求。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">操作系统是一个计算机程序，是人类和计算机硬件沟通的一个桥梁，它解决了人不懂二进制的问题，同时也解决了硬件听不懂人下发指令语言。</span><br><span class="line"></span><br><span class="line">相对于人来说他是人的大管家，负责管理硬件、支配硬件干活、把硬件工作的结果反馈给人。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这就是操作系统的作用，人类的帮手。</span><br></pre></td></tr></table></figure>

<h2 id="三、操作系统的分类"><a href="#三、操作系统的分类" class="headerlink" title="三、操作系统的分类"></a>三、操作系统的分类</h2><p>计算机的操作系统根据不同的用途分为不同的种类</p>
<ul>
<li><p><strong>从功能角度分类</strong>: 实时系统、批处理系统、分时系统、网络操作系统等。</p>
<p><strong>实时系统</strong>主要是指当外界事件或数据产生时，能够接受并以足够快的速度予以处理，其处理的结果又能在规定的时间之内来控制生产过程或对处理系统做出快速响应，调度一切可利用的资源完成实时任务，并控制所有实时任务协调一致运行的操作系统。提供及时响应和高可靠性是其主要特点。常用于工业控制，航空，航天等领域，目前主流的实时操作系统有uc&#x2F;OS、FreeRTOS、TI DSP&#x2F;BIOS、RT-Thread</p>
<p><strong>批处理系统</strong>在1960年左右出现，是指用户将一批作业提交给操作系统后就不再干预，由操作系统控制它们自动运行，批处理操作系统不具有交互性，它是为了提高CPU的利用率而提出的一种操作系统。</p>
<p><strong>分时系统</strong>可以实现用户的人机交互需要，多个用户共同使用一个主机，很大程度上节约了资源成本，如linux</p>
<p><strong>网络操作系统</strong>是向网络计算机提供服务的特殊的操作系统。借由网络达到互相传递数据与各种消息，分为服务器及客户端，我们日常接触的windows、linux等也都属于网络操作系统范畴</p>
<p><strong>分布式操作系统</strong> 简单来说就是有一堆计算机，各自物理硬件上是独立的，通过网络相连，互相通信，通过统一的“中间件”进行协调，共享资源，协同分工完成一件任务的计算机集群</p>
</li>
<li><p><strong>从使用角度分类:</strong><br><strong>个人版系统:</strong> xp win7 win10 fedora<br><strong>网络版系统:</strong> win2008 win2012 RHEL CentOS</p>
</li>
</ul>
<h1 id="Linux起源和发展"><a href="#Linux起源和发展" class="headerlink" title="Linux起源和发展"></a>Linux起源和发展</h1><p> 阅读 (92870) </p>
<p> 分享</p>
<h2 id="一、什么是linux？"><a href="#一、什么是linux？" class="headerlink" title="一、什么是linux？"></a>一、什么是linux？</h2><p><strong>Linux是一套免费使用和自由传播的类Unix操作系统</strong>，是一个基于POSIX和Unix的多用户、多任务、支持多线程和多CPU的操作系统。伴随着互联网的发展，Linux得到了来自全世界软件爱好者、组织、公司的支持。它除了在服务器操作系统方面保持着强劲的发展势头以外，在个人电脑、嵌入式系统上都有着长足的进步。使用者不仅可以直观地获取该操作系统的实现机制，而且可以根据自身的需要来修改完善这个操作系统，使其最大化地适应用户的需要。</p>
<p><strong>Linux系统应用</strong><br>Linux不仅系统性能稳定，而且是开源软件。其核心防火墙组件性能高效、配置简单，保证了系统的安全。在很多企业网络中，为了追求速度和安全，Linux操作系统不仅仅是被网络运维人员当作服务器使用，Linux既可以当作服务器，又可以当作网络防火墙是Linux的 一大亮点。</p>
<p><strong>linux优点</strong><br>Linux与其他操作系统相比 ，具有开放源码、没有版权、技术社区用户多等特点 ，开放源码使得用户可以自由裁剪，灵活性高，功能强大，成本低。尤其系统中内嵌网络协议栈 ，经过适当的配置就可实现路由器的功能。这些特点使得Linux成为开发路由交换设备的理想开发平台。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/9/1602247349375.png" alt="clip_image001.png"></p>
<h2 id="二、Linux的起源"><a href="#二、Linux的起源" class="headerlink" title="二、Linux的起源"></a>二、Linux的起源</h2><p>Linux操作系统的诞生、发展和成长过程始终依赖着五个重要支柱：</p>
<ul>
<li>Unix操作系统</li>
<li>MINIX操作系统</li>
<li>GNU计划</li>
<li>POSIX标准</li>
<li>Internet网络。</li>
</ul>
<p>20世纪80年代，计算机硬件的性能不断提高，PC的市场不断扩大，当时可供计算机选用的操作系统主要有Unix、DOS和MacOS这几种。Unix价格昂贵，不能运行于PC；DOS显得简陋，且源代码被软件厂商严格保密；<br>MacOS是一种专门用于苹果计算机的操作系统。此时，计算机科学领域迫切需要一个更加完善、强大、廉价和完全开放的操作系统。由于供教学使用的典型操作系统很少，因此当时在荷兰当教授的美国人AndrewS.Tanenbaum编写了一个操作系统，名为MINIX，为了向学生讲述操作系统内部工作原理。MINIX虽然很好，但只是一个用于教学目的的简单操作系统，而不是一个强有力的实用操作系统，然而最大的好处就是公开源代码。全世界学计算机的学生都通过钻研MINIX源代码来了解电脑里运行的MINIX操作系统，芬兰赫尔辛基大学大学二年级的学生Linus Torvalds就是其中一个，在吸收了MINIX精华的基础上，Linus于1991年写出了属于自己的Linux操作系统，版本为Linux0.01，是Linux时代开始的标志。他利用Unix的核心，去除繁杂的核心程序，改写成适用于一般计算机的x86系统，并放在网络上供大家下载，1994年推出完整的核心Version1.0，至此，Linux逐渐成为功能完善、稳定的操作系统，并被广泛使用。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/9/1602247363082.png" alt="clip_image002.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/9/1602247367625.png" alt="clip_image003.png"></p>
<h2 id="三、Linux的发展史"><a href="#三、Linux的发展史" class="headerlink" title="三、Linux的发展史"></a>三、Linux的发展史</h2><p>1984年，Andrew S.Tanenbaum开发了用于教学的UNIX系统，命名为Mininx。</p>
<p>1989年，Andrew S.Tanenbaum将Minix系统运行于x86的PC平台。</p>
<p>1990年，芬兰赫尔辛基大学学生Linux Torvalds首次接触Minix系统。</p>
<p>1991年，Linux Torvalds开始在Minix上编写各种驱动程序等操作系统内核组件。</p>
<p>1991年年底，Linux Torvalds公开了Linux内核源码0.02版</p>
<p>1994年，Linux 1.0版本发布</p>
<p>1996年，Linux 2.0版本发布</p>
<p>2011年，Linux3.0版本发布</p>
<p>这里面我们所介绍的发布时间，指的都是内核大版本的发布时间，次要版本号更新时间请参看FAQ，其中偶数版的内核为稳定版，奇数版的内核为开发版或测试版</p>
<h2 id="四、Linux和Unix的对比"><a href="#四、Linux和Unix的对比" class="headerlink" title="四、Linux和Unix的对比"></a>四、Linux和Unix的对比</h2><p>我们所讨论的差异只从硬件支持，版权和价格这些来讨论他们之间的区别，UNIX是一个功能强大、性能全面的多用户、多任务操作系统，可以应用从巨型计算机到普通PC机等多种不同的平台上，是应用面最广、影响力最大的操作系统。</p>
<ul>
<li>Linux是一种外观和性能与UNIX相同或更好的操作系统，但Linux不源于任何版本的UNIX的源代码，并不是UNIX，而是一个类似于UNIX的产品。</li>
<li>Linux是开发源代码的自由软件,UNIX是对源代码实行知识产权保护的传统商业软件.</li>
<li>UNIX系统大多是与硬件配套的,而Linux则可运行在多种硬件平台上.</li>
<li>UNIX是商业软件，需要收费,而Linux是自由软件,免费、公开源代码的</li>
<li>在对硬件的要求上,linux比unix要低,没有unix那么苛刻.在安装上linux比unix容易掌握.</li>
</ul>
<h2 id="五、类Unix操作系统介绍"><a href="#五、类Unix操作系统介绍" class="headerlink" title="五、类Unix操作系统介绍"></a>五、类Unix操作系统介绍</h2><ul>
<li>什么是类Unix操作系统？</li>
</ul>
<p>类Unix系统（英文：Unix-like）是指继承UNIX的设计风格演变出来的系统，这些操作系统虽然有的是自由软件，有的是商业软件，但都相当程度地继承了原始UNIX的特性，有许多相似处，并且都在一定程度上遵守POSIX规范，但是它们却并不含有UNIX的源代码。由于UNIX标准认定价格昂贵，所以目前唯一获得UNIX标准认定的为苹果的MACOS系统。</p>
<ul>
<li>类Unix操作系统有哪些？</li>
</ul>
<p>FreeBSD及其衍生产品、OpenBSD及其衍生产品、GNU&#x2F;Linux、GNU&#x2F;OpenSolaris等等，这里面我们所介绍的几种主流的类Unix操作系统，他们大多都属于开源产品，在互联网上是可以获取到的，有兴趣的同学可以自行搜索并下载安装</p>
<p>并且接触到了一个概念叫做“类Unix操作系统”，也知道了这个类Unix操作系统的家族非常庞大。</p>
<h2 id="六、linux厂商"><a href="#六、linux厂商" class="headerlink" title="六、linux厂商"></a>六、linux厂商</h2><p>真实因为GPL,很多公司基于linux的源码进行修改、优化后推出了自己的产品，其中最著名的就是redhat，其实每个国家都有自己的linux系统，比如中国最早的红旗linux，现在的中科麒麟、深度，都是linux系统.企业通过收取技术服务费来进行盈利。</p>
<h2 id="七、linux的应用"><a href="#七、linux的应用" class="headerlink" title="七、linux的应用"></a>七、linux的应用</h2><p>100% 的世界超级计算机跑在 Linux 上。包括 NASA 的集群。</p>
<p>SpaceX 在其灰背隼火箭引擎上使用具有特殊容错设计的 Linux。借此，Linux 帮助完成了 32 次航天任务。 埃隆·马斯克 特斯拉</p>
<p>电影泰坦尼克是首个基于 Linux 服务器拍摄的电影。</p>
<p>即使 Linux 的最大的竞争操作系统微软 Windows 也拥抱 Linux。Windows 最近集成了 Ubuntu Bash 到 Windows 10 里了。</p>
<h2 id="八、视频学习"><a href="#八、视频学习" class="headerlink" title="八、视频学习"></a>八、视频学习</h2><p><a href="https://www.ixigua.com/6906825528561369608?is_new_connect=0&is_new_user=0">视频：linux介绍</a><br><a href="https://www.ixigua.com/6906835360559727111?id=6906825493740257804&logTag=40b7533f87d8f1a8cc8d">视频：linux起源</a></p>
<h1 id="GNU和GPL"><a href="#GNU和GPL" class="headerlink" title="GNU和GPL"></a>GNU和GPL</h1><p> 阅读 (17677) </p>
<p> 分享</p>
<h2 id="一、GNU介绍"><a href="#一、GNU介绍" class="headerlink" title="一、GNU介绍"></a>一、GNU介绍</h2><p><strong>GNU</strong>是一个自由的操作系统，其内容软件完全以GPL方式发布。这个操作系统是GNU计划的主要目标，名称来自GNU’s Not Unix!的缩写，因为GNU的设计类似Unix，但它不包含具著作权的Unix代码。GNU的创始人，理查德·马修·斯托曼。</p>
<p>作为操作系统，GNU的发展仍未完成，其中最大的问题是具有完备功能的内核尚未被开发成功。GNU的内核是自由软件基金会发展的重点，但是其发展尚未成熟。在实际使用上，多半使用Linux内核、FreeBSD等替代方案，作为系统核心，其中主要的操作系统是Linux的发行版。Linux操作系统包涵了Linux内核与其他自由软件项目中的GNU组件和软件，可以被称为GNU&#x2F;Linux。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602323583201.png" alt="clip_image001.png"></p>
<p>1985年Richard Stallman又创立了自由软件基金会来为GNU计划提供技术、法律以及财政支持。尽管GNU计划大部分时候是由个人自愿无偿贡献，但FSF有时还是会聘请程序员帮助编写。当GNU计划开始逐渐获得成功时，一些商业公司开始介入开发和技术支持。</p>
<p>到了1990年，GNU计划已经开发出的软件包括了一个功能强大的文字编辑器Emacs。GCC（GNU Compiler Collection，GNU编译器集合），是一套由 GNU 开发的编程语言编译器。以及大部分UNIX系统的程序库和工具。唯一依然没有完成的重要组件就是操作系统的内核。</p>
<p>1991年Linus Torvalds编写出了与UNIX兼容的Linux操作系统内核并在GPL条款下发布。Linux之后在网上广泛流传，许多程序员参与了开发与修改。1992年Linux与其他GNU软件结合，完全自由的操作系统正式诞生。该操作系统往往被称为“GNU&#x2F;Linux”或简称Linux。许多UNIX系统上也安装了GNU软件，因为GNU软件的质量比之前UNIX的软件还要好。GNU工具还被广泛地移植到Windows和Mac OS上。</p>
<h2 id="理查德·马修·斯托曼"><a href="#理查德·马修·斯托曼" class="headerlink" title="理查德·马修·斯托曼"></a>理查德·马修·斯托曼</h2><p>理查德·马修·斯托曼（英语：Richard Matthew Stallman，简称rms，有时也用大写的RMS，1953年3月16日－），美国程序员，自由软件活动家。他发起自由软件运动，倡导软件用户能够对软件自由进行使用、学习、共享和修改，确保了这些软件被称作自由软件。斯托曼发起了GNU项目，并成立了自由软件基金会。他开发了GCC、GDB、GNU Emacs，同时编写了GNU通用公共许可协议。</p>
<p>为了创建一个完全由免费软件组成的类Unix计算机操作系统，斯托曼在1983年9月推出了GNU项目。借此又发起了自由软件运动。他迄今为止一直是GNU项目的组织者，作为主要开发者的他开发了一些被广泛使用的GNU软件。在1985年10月他创立了自由软件基金会。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602323603539.png" alt="clip_image002.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602323625454.png" alt="clip_image003.png"></p>
<h2 id="二、自由软件基金会介绍"><a href="#二、自由软件基金会介绍" class="headerlink" title="二、自由软件基金会介绍"></a>二、自由软件基金会介绍</h2><p><strong>自由软件基金会</strong>（英语：<strong>Free Software Foundation</strong>，<strong>FSF</strong>）是一个致力于推广自由软件的美国民间非营利性组织。它于1985年10月由理查德·斯托曼创建。其主要工作是运行GNU计划，开发更多的自由软件。</p>
<p>从其创建到1990年代中自由软件基金会的基金主要被用来雇佣编程师来发展自由软件。从1990年代中开始写自由软件的公司和个人繁多，因此自由软件基金会的雇员和志愿者主要在自由软件运动的法律和结构问题上工作。</p>
<p><strong>主要工作</strong>：</p>
<ul>
<li>GNU</li>
</ul>
<p>自由软件基金会最早的目的在于促进自由软件的开发，但自由软件基金会也有自己的GUN项目</p>
<ul>
<li>发布并管理许可证</li>
</ul>
<p>自由软件基金会具有发布GNU通用公共许可证和其它GNU许可证的能力和资源，但自由软件基金会只对它拥有版权的软件负责。其它软件必须由它们自己的拥有人来负责</p>
<ul>
<li>GNU许可证</li>
</ul>
<p>GNU通用公共许可证是自由软件工程中最普及的许可证。目前的版本是2007年发表的。自由软件基金会还发布了GNU宽通用公共许可证和GNU自由文档许可证</p>
<ul>
<li>监督版权</li>
</ul>
<p>自由软件基金会拥有大多数GNU软件和一些非GNU自由软件的版权。每个GNU软件包的贡献者必须签署版权文件，这样自由软件基金会可以在诉讼案中在法庭上维护这些软件。此外这样假如许可证有所变化的话不必征求软件所有的贡献者的同意。</p>
<ul>
<li>自由软件目录</li>
</ul>
<p>自由软件目录是所有自由软件包的一个列表。其中列出的每个软件包含47条信息，比如工程的主页、程序师、编程语言等。目的是提供一个自由软件的搜索引擎和为用户提供一个检查一个软件包是否自由的工具。自由软件基金会为此从联合国教科文组织获得少数基金。计划是将来这个目录可以翻译成不同的语言。</p>
<ul>
<li>颁发奖励</li>
</ul>
<p>自由软件基金会每年颁发两部奖励：自由软件进步大奖和社会福利自由软件奖励。</p>
<h2 id="三、GPL介绍"><a href="#三、GPL介绍" class="headerlink" title="三、GPL介绍"></a>三、GPL介绍</h2><p><strong>GNU</strong>通用公共许可协议（英语：GNU General Public License，缩写GNU GPL 或 GPL），是被广泛使用的自由软件许可证，给予了终端用户运行、学习、共享和修改软件的自由。许可证最初由自由软件基金会的理查德·斯托曼为GNU项目所撰写，并授予计算机程序的用户自由软件定义的权利。GPL是一个Copyleft许可证，这意味着派生作品只能以相同的许可条款分发。 GPL是第一个普遍使用的Copyleft许可证。历史上，GPL许可证系列一直是自由和开源软件领域最受欢迎的软件许可之一。</p>
<h2 id="GPL历史"><a href="#GPL历史" class="headerlink" title="GPL历史"></a>GPL历史</h2><p>GPLv1：GPL版本1，即最初的版本，发布于1989年一月</p>
<p>GPLv2：发布于1991年6月，这个版本一直延续到1999年，并分支出一个派生的LGPL版本号为2.1，并将其重命名为轻量级通用公共许可证（又称宽通用公共许可证）</p>
<p>GPLv3：2007年6月29日正式发布</p>
<h1 id="各发行版Linux介绍"><a href="#各发行版Linux介绍" class="headerlink" title="各发行版Linux介绍"></a>各发行版Linux介绍</h1><p> 阅读 (28990) </p>
<p> 分享</p>
<h2 id="一、RedHat-Enterprise-Linux介绍"><a href="#一、RedHat-Enterprise-Linux介绍" class="headerlink" title="一、RedHat Enterprise Linux介绍"></a>一、RedHat Enterprise Linux介绍</h2><p>可能这是最著名的Linux版本了，Red Hat Linux已经创造了自己的品牌，越来越多的人听说过它。Red Hat在1994年创业，当时聘用了全世界500多名员工，他们都致力于开放的源代码体系。</p>
<p>Red Hat Linux是公共环境中表现上佳的服务器。它拥有自己的公司，能向用户提供一套完整的服务，这使得它特别适合在公共网络中使用。这个版本的Linux也使用最新的内核，还拥有大多数人都需要使用的主体软件包。</p>
<p>Red Hat Linux的安装过程也十分简单明了。它的图形安装过程提供简易设置服务器的全部信息。磁盘分区过程可以自动完成，还可以选择GUI工具完成，即使对于 Linux新手来说这些都非常简单。选择软件包的过程也与其他版本类似；用户可以选择软件包种类或特殊的软件包。系统运行起来后，用户可以从Web站点和 Red Hat那里得到充分的技术支持。是一个符合大众需求的最优版本。在服务器和桌面系统中它都工作得很好。Red Hat通过论坛和邮件列表提供广泛的技术支持，它还有自己公司的电话技术支持，后者对要求更高技术支持水平的集团客户更有吸引力。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324034512.png" alt="clip_image001.png"></p>
<h2 id="二、Ubuntu介绍"><a href="#二、Ubuntu介绍" class="headerlink" title="二、Ubuntu介绍"></a>二、Ubuntu介绍</h2><p>Ubuntu是一个以桌面应用为主的Linux操作系统，基于Debian，与Debian的不同在于它每6个月会发布一个新版本。Ubuntu的目标在于为一般用户提供一个最新的、同时又相当稳定的主要由自由软件构建而成的操作系统。Ubuntu具有庞大的社区力量，用户可以方便地从社区获得帮助。随着云计算的流行，ubuntu推出了一个云计算环境搭建的解决方案，可以在其官方网站找到相关信息。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324049012.png" alt="clip_image002.png"></p>
<h2 id="三、Debian介绍"><a href="#三、Debian介绍" class="headerlink" title="三、Debian介绍"></a>三、Debian介绍</h2><p>广义的Debian是指一个致力于创建自由操作系统的合作组织及其作品，由于Debian项目众多内核分支中以Linux内核为主，而且 Debian开发者所创建的操作系统中绝大部分基础工具来自于GNU工程 ，因此 “Debian” 常指Debian GNU&#x2F;Linux。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324062244.png" alt="clip_image003.png"></p>
<h2 id="四、open-SUSE介绍"><a href="#四、open-SUSE介绍" class="headerlink" title="四、open SUSE介绍"></a>四、open SUSE介绍</h2><p>openSUSE 项目是由 Novell 发起的开源社区计划。 旨在推进 Linux 的广泛使用，提供了自由简单的方法来获得世界上最好用的 Linux 发行版之一。openSUSE 项目为 Linux开发者和爱好者提供了开始使用 Linux 所需要的一切。该项目由SUSE等公司赞助，2011年Attachmate集团收购了Novell，并把Novell和SUSE做为两个独立的子公司运营。openSUSE 操作系统和相关的开源程序会被SUSE Linux Enterprise使用。openSUSE对个人来说是完全免费的，包括使用和在线更新。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324078900.png" alt="clip_image004.png"></p>
<h2 id="五、CentOS介绍"><a href="#五、CentOS介绍" class="headerlink" title="五、CentOS介绍"></a>五、CentOS介绍</h2><p>CentOS（Community Enterprise Operating System，中文意思是社区企业操作系统）是Linux发行版之一，它是来自于Red Hat Enterprise Linux依照开放源代码规定释出的源代码所编译而成。由于出自同样的源代码，因此有些要求高度稳定性的服务器以CentOS替代商业版的Red Hat Enterprise Linux使用。两者的不同在于CentOS完全开源。</p>
<p>CentOS 每个版本的 CentOS都会获得十年的支持（通过安全更新方式）。新版本的 CentOS 大约每两年发行一次，而每个版本的 CentOS 会定期（大概每六个月）更新一次，以便支持新的硬件。这样，建立一个安全、低维护、稳定、高预测性、高重复性的 Linux 环境。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324094615.png" alt="clip_image005.png"></p>
<h2 id="六、Linux-Mint介绍"><a href="#六、Linux-Mint介绍" class="headerlink" title="六、Linux Mint介绍"></a>六、Linux Mint介绍</h2><p>Linux Mint 由Linux Mint Team团队于2006年开始发行，是一份基于Debian和Ubuntu的Linux发行版。其目标是提供一种更完整的即刻可用体验，这包括提供浏览器插件、多媒体编解码器、对DVD播放的支持、Java和其他组件，它也增加了一套定制桌面及各种菜单，一些独特的配置工具，以及一份基于web的软件包安装界面。Linux Mint是对用户友好而功能强大的操作系统。它诞生的目的是为家庭用户和企业提供一个免费的，易用的，舒适而优雅的桌面操作系统。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324108691.png" alt="clip_image006.png"></p>
<h2 id="七、Mageia介绍"><a href="#七、Mageia介绍" class="headerlink" title="七、Mageia介绍"></a>七、Mageia介绍</h2><p>2010年9月，为 Mandriva 发行版工作的多数雇员在 Mandriva 子公司 Edge-IT 实施清算时遭到解聘，他们随即与社群支持者于2010年9月18日在法国巴黎创建 Mandriva Linux 的分支项目—— Mageia。这是一个完全由社群运作的 Linux 发行版，将继续发挥 Mandriva Linux 对用户友好的优秀品质，而避免 Mandriva 公司缺乏竞争力的运作模式。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324124217.png" alt="clip_image007.png"></p>
<h2 id="八、Fedora介绍"><a href="#八、Fedora介绍" class="headerlink" title="八、Fedora介绍"></a>八、Fedora介绍</h2><p>Fedora 是一个 Linux发行版，是一款由全球社区爱好者构建的面向日常应用的快速、稳定、强大的操作系统。 它允许任何人自由地使用、修改和重发布，无论现在还是将来。它由一个强大的社群开发，这个社群的成员以自己的不懈努力，提供并维护自由、开放源码的软件和开放的标准。Fedora 项目由 Fedora 基金会管理和控制，得到了 Red Hat 的支持。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324141298.png" alt="clip_image008.png"></p>
<h2 id="九、Arch-Linux介绍"><a href="#九、Arch-Linux介绍" class="headerlink" title="九、Arch Linux介绍"></a>九、Arch Linux介绍</h2><p><strong>Arch Linux</strong>是一款基于 x86-64 架构的 Linux 发行版。系统主要由自由]和开源软件组成，支持社区参与。系统设计以KISS原则（保持简单和愚蠢）为总体指导原则，注重代码正确、优雅和极简主义，期待用户能够愿意去理解系统的操作。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324154687.png" alt="clip_image009.png"></p>
<h2 id="十、Slackware介绍"><a href="#十、Slackware介绍" class="headerlink" title="十、Slackware介绍"></a>十、Slackware介绍</h2><p><em>Slackware</em> 作为较古老的Linux发行版之一相比其他的主流发行版更希望成为具有 “UNIX风格” 的那一个，一直以来以简洁、安全和稳定所著称。其以灵活性和稳定性作为主要目标，但是缺少其他linux发行版本中那些为发行版定制的配置工具。在当今其他发行版都在使用 Systemd作为启动管理器时，<em>Slackware</em> 依旧使用 BSD 启动风格，各有优劣不做评价。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602324173330.png" alt="clip_image010.png"></p>
<h2 id="十一、视频学习"><a href="#十一、视频学习" class="headerlink" title="十一、视频学习"></a>十一、视频学习</h2><p><a href="https://www.ixigua.com/6906835360559727111?id=6906825443148726798&logTag=b3d55d329e2bd1703150">视频：linux版本级应用</a></p>
<h1 id="VMware和VMwarePlayer的使用"><a href="#VMware和VMwarePlayer的使用" class="headerlink" title="VMware和VMwarePlayer的使用"></a>VMware和VMwarePlayer的使用</h1><p> 阅读 (75078) </p>
<p> 分享</p>
<h2 id="一、VMware的优势"><a href="#一、VMware的优势" class="headerlink" title="一、VMware的优势"></a>一、VMware的优势</h2><p>VMware Workstation（中文名“威睿工作站”）是一款功能强大的桌面虚拟计算机软件，提供用户可在单一的桌面上同时运行不同的操作系统，和进行开发、测试 、部署新的应用程序的最佳解决方案。VMware Workstation可在一部实体机器上模拟完整的网络环境，以及可便于携带的虚拟机，其更好的灵活性与先进的技术胜过了市面上其他的虚拟计算机软件。对于企业的 IT开发人员和系统管理员而言， VMware在虚拟网路，实时快照，拖曳共享文件夹，支持 PXE 等方面的特点使它成为必不可少的工具。</p>
<h2 id="二、VMware的安装和部署"><a href="#二、VMware的安装和部署" class="headerlink" title="二、VMware的安装和部署"></a>二、VMware的安装和部署</h2><h3 id="安装前的准备"><a href="#安装前的准备" class="headerlink" title="安装前的准备"></a>安装前的准备</h3><p>下载软件</p>
<p>windows版下载地址：<a href="https://download3.vmware.com/software/wkst/file/VMware-workstation-full-15.5.0-14665864.exe">https://download3.vmware.com/software/wkst/file/VMware-workstation-full-15.5.0-14665864.exe</a></p>
<p>MacOS版下载地址：<a href="https://download3.vmware.com/software/fusion/file/VMware-Fusion-11.5.0-14634996.dmg">https://download3.vmware.com/software/fusion/file/VMware-Fusion-11.5.0-14634996.dmg</a></p>
<p>我们选择现在试用版的就可以，有条件的建议购买正版</p>
<h3 id="安装部署"><a href="#安装部署" class="headerlink" title="安装部署"></a>安装部署</h3><p><strong>step1</strong> 双击下载好的安装程序后，稍微等一下你会看到安装界面打开</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602325980943.png" alt="clip_image001.png"></p>
<p><strong>step2</strong> 点击下一步后会看到一个许可协议的页面，选择接受后点击下一步</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602325996588.png" alt="clip_image002.png"></p>
<p><strong>step3</strong> 直接点击下一步</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326009554.png" alt="clip_image003.png"></p>
<p><strong>step4</strong> 是否接受自动更新和是否加入客户体验计划根据自己的需求决定，然后点击下一步</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326025482.png" alt="clip_image004.png"></p>
<p><strong>step5</strong> 是否在桌面和开始菜单创建快捷方式自己决定，然后点击下一步</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326038902.png" alt="clip_image005.png"></p>
<p><strong>step6</strong> 点击安装</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326058155.png" alt="clip_image006.png"></p>
<p><strong>step7</strong> 完成安装</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326081800.png" alt="clip_image007.png"></p>
<p>如果你跟我设置的是一样的，你就会在桌面看到一个图标，双击就会打开vmware workstation，如果你看到这个界面，安装部署就完成了</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326113993.png" alt="clip_image008.png"></p>
<h2 id="三、vmware的介绍和使用"><a href="#三、vmware的介绍和使用" class="headerlink" title="三、vmware的介绍和使用"></a>三、vmware的介绍和使用</h2><p>在打开的界面中我们可以大致分为三个部分：</p>
<ul>
<li>1、文字按钮；</li>
<li>2、图标按钮；</li>
<li>3、主页大按钮；<br>下面我们来介绍一下这三部分按钮的常用功能</li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326130147.png" alt="clip_image009.png"></p>
<h3 id="1、文字按钮"><a href="#1、文字按钮" class="headerlink" title="1、文字按钮"></a>1、文字按钮</h3><p>1.1 文字按钮的第一部分是“文件”，<br>标记数字1的部分点击之后会引导你创建一个新的虚拟机；<br>标记数字2的部分点击之后会引导我们打开一个之前已经安装好的虚拟机；<br>标记数字3的部分可以帮助我们扫描电脑硬盘中都有哪些已经安装好的虚拟机可供直接使用；<br>标记数字4的就是退出vmware workstation这个程序。<br>其余没有提到的按钮，我们会在用到的时候进行讲解。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326145637.png" alt="clip_image010.png"></p>
<p>1.2 文字按钮的第二部分是“编辑” ，<br>标记数字1的部分点击之后会打开一个可以帮助我们编辑和创建虚拟网络的窗口，在这个窗口里面我们可以对虚拟网络进行调整；<br>标记数字2的部分点击之后可以让我们调整虚拟机对计算机硬件的使用，包括功能设置，快捷键设置，资源限制等</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326180506.png" alt="clip_image011.png"></p>
<p>1.3 文字按钮的第三部分是“查看”，在这里面我们可以对窗口大小以及布局进行调整，但是由于我们刚刚完成这个软件的安装，还没有安装新的虚拟机，所以这里面的大部分选项是不可用的，这些不可用的我们会在后续的课程中说明</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326192060.png" alt="clip_image012.png"></p>
<p>1.4 文字按钮的第四部分是“虚拟机”，这里面主要是针对已经安装的虚拟机进行的操作，同样由于我们还没有虚拟机，所以这些按钮都是不可用的，我们也会在安装了虚拟机之后对这个部分的按钮进行说明</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326203702.png" alt="clip_image013.png"></p>
<p>1.5 文字按钮的第五部分是“选项卡”，这个按钮里面可以帮助我们在多个虚拟机之间切换，如果我们安装了多个虚拟机，下面标记的部分就不会只有一个“主页”标签了</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326249611.png" alt="clip_image014.png"></p>
<p>1.6 文字按钮的最后一部分是“帮助”，这个按钮我们可以获取使用帮助，软件更新，以及如果购买了正版，厂商给我们的序列号也是在这里输入的</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326263489.png" alt="clip_image015.png"></p>
<p>文字按钮部分的常用功能我们就说到这里，现在我们看第二部分和第三部分</p>
<h3 id="2-图标按钮和主页大按钮"><a href="#2-图标按钮和主页大按钮" class="headerlink" title="2 图标按钮和主页大按钮"></a>2 图标按钮和主页大按钮</h3><p>图标按钮和主页大按钮这里面我们就不挨个进行讲解了，他们所提供的功能在文字按钮里面都有提供，只是为了方便用户使用，有的按钮做成了图标按钮，有些则直接放在了主页。其中图标按钮的快照相关功能是我们以后会经常用到的功能，这个功能我们会在安装完虚拟操作系统之后进行讲解</p>
<h2 id="四、vmware-player的介绍和使用"><a href="#四、vmware-player的介绍和使用" class="headerlink" title="四、vmware player的介绍和使用"></a>四、vmware player的介绍和使用</h2><p>由于vmware workstation安装程序体积大并且是收费的，而有很多人又想在不删除电脑现有系统的前提下来体验其它操作系统，所以vmware公司提供了一个体积小巧且免费的工具，这个工具就是vmware player，不过这个软件现在叫vmware workstation player，顾名思义，这个软件在诞生之初只是一个体积小巧的虚拟机播放器，并不具备创建和制作虚拟机的功能，且精简了很多功能，而vmware官方提供了大量的虚拟机文件，以及各种虚拟机环境，用户只要下载相应的虚拟机文件和vmware player就可以体验，后期经过发展也具备了创建虚拟机的功能，随着我们之前安装vmware workstation这个软件已经安装在我们的计算机当中</p>
<p>在下面的图片中我们可以看到player所包含的按钮少很多，而且软件的界面要简介很多，由于player所包含的功能我们在前面都介绍过，所以这里就不重复介绍了，有兴趣的可以自己感受一下这个虚拟机播放器</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326290975.png" alt="clip_image016.png"></p>
<p>常用的功能我们就介绍到这里，下面我们来看下下一部分</p>
<h2 id="五、新建虚拟机和相关设置"><a href="#五、新建虚拟机和相关设置" class="headerlink" title="五、新建虚拟机和相关设置"></a>五、新建虚拟机和相关设置</h2><p>这部分内容我们看下如何新建一个虚拟机</p>
<p><strong>step1</strong> 点击vmware workstation主页的“创建新的虚拟机”按钮</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326311797.png" alt="clip_image017.png"></p>
<p><strong>step2</strong> 在弹出的新窗口中有两个选项一个是“典型”另一个是“自定义”，在这两个按钮下面都有详细的文字介绍，这里面我们选择“典型”然后选择下一步</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326324645.png" alt="clip_image018.png"></p>
<p><strong>step3</strong> 在这个窗口中标记为1的部分是从光盘安装，标记为2的部分是选择一个已经下载好的光盘镜像，标记为3的创建完成后不会立即安装虚拟机，我们选择一个已经下载好的光盘镜像之后点击下一步</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326336091.png" alt="clip_image019.png"></p>
<p><strong>step4</strong> 接下来的窗口我们需要设置好相关名称和密码，主要是为了自动安装做准备，设置好内容之后点击下一步</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326349390.png" alt="clip_image020.png"></p>
<p><strong>step5</strong> 第五步需要我们给出在标签栏显示的虚拟机的名称以及安装在电脑硬盘的什么位置，设置好后点击下一步</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326365247.png" alt="clip_image021.png"></p>
<p><strong>step6</strong> 第六步是设置即将安装的虚拟机最大允许使用的硬盘空间，这里建议我们的是20G，所以各位在选择存放位置的时候一定要保证有20G以上的可用空间，避免后期更换位置的麻烦，至于虚拟机磁盘的存储方式，我们默认就可以，设置好之后点击下一步</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326378155.png" alt="clip_image022.png"></p>
<p><strong>step7</strong> 来到最后一步，这里面你可以自定义硬件来给虚拟机分配更多资源，而这个“创建后开启此虚拟机”一定不要点选，否则点击“完成”按钮后很可能会开启自动安装，你就无法熟悉操作系统的安装流程了</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326389368.png" alt="clip_image023.png"></p>
<p><strong>step8</strong> 点击完成之后会来到我们所创建的这个虚拟机的界面，点击“编辑虚拟机设置”进行一些调整</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326402799.png" alt="clip_image024.png"></p>
<p><strong>step9</strong> 在这个界面我们可以对虚拟机的硬件进行一些设置，但是要注意一定要把包含有“autoinst”字样的光驱和软驱删除，它会帮助我们自动完成虚拟机的安装，而我们不需要这个功能。在图片里面我们只看到一个包含有这个字样的，各位在安装的时候可能会看到两个包含有这个字样的设备，一个是光驱，一个是软驱，选中之后点击下方的“移除”按钮，然后点击确定</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326415434.png" alt="clip_image025.png"></p>
<p>点击确定按钮之后你会回到之前的界面，我们可以看到对虚拟机作出了哪些调整，如果没有额外需要调整的地方就可以点击“开启此虚拟机”按钮。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/10/1602326425805.png" alt="clip_image026.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">视频分享：1小时搞定VMware workstation15 </span><br><span class="line">https://study.163.com/course/courseMain.htm?courseId=1006481025&amp;share=2&amp;shareId=400000000626057</span><br></pre></td></tr></table></figure>

<h2 id="六、视频学习"><a href="#六、视频学习" class="headerlink" title="六、视频学习"></a>六、视频学习</h2><p><a href="https://www.ixigua.com/6906835360559727111?id=6907237296529998347&logTag=dbdbcdb86a5173f6da31">视频：创建虚拟机</a><br><a href="https://www.ixigua.com/6906835360559727111?id=6907237341111255566&logTag=7d4e73647a8ddc71bf13">视频：虚拟机设置</a></p>
<h1 id="安装CentOS-8-linux-系统"><a href="#安装CentOS-8-linux-系统" class="headerlink" title="安装CentOS 8 linux 系统"></a>安装CentOS 8 linux 系统</h1><p> 阅读 (342568) </p>
<p> 分享</p>
<h2 id="一、Linux系统的选择"><a href="#一、Linux系统的选择" class="headerlink" title="一、Linux系统的选择"></a><strong>一、Linux系统的选择</strong></h2><p>在linux的众多发行版当中，大多数都是面向普通用户的，面向企业的屈指可数，我们通过之前的课程了解到CentOS和Red Hat Enterprise Linux出自同样的源代码，所以从可靠性，硬件兼容性，以及生命周期上来讲无疑是最好的选择，而且CentOS还是一个免费的软件，接下来我们看一下CentOS如何安装</p>
<h2 id="二、CentOS的安装流程"><a href="#二、CentOS的安装流程" class="headerlink" title="二、CentOS的安装流程"></a><strong>二、CentOS的安装流程</strong></h2><p>安装前的准备：CentOS8光盘镜像</p>
<ul>
<li><strong>下载地址</strong><br><a href="https://mirrors.aliyun.com/centos/8.5.2111/isos/x86_64/CentOS-8.5.2111-x86_64-dvd1.iso">https://mirrors.aliyun.com/centos/8.5.2111/isos/x86_64/CentOS-8.5.2111-x86_64-dvd1.iso</a></li>
<li><strong>开始安装</strong><br><strong>step 1:</strong> 使用vmware新建一个虚拟机，选择下载好的镜像，然后点击开启虚拟机</li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379168724.png" alt="1570758965669.png"></p>
<p><strong>step 2:</strong> 选择第一个选项，安装CentOS，然后等待开启图形安装界面</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602382054024.png" alt="install0.png"></p>
<p><strong>step 3:</strong> 选择简体中文后继续</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602382086790.png" alt="install1.png"></p>
<p><strong>step 4:</strong> 设置安装信息摘要</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602384761095.png" alt="安装信息摘要0.png"></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>、键盘设置：如果键盘不是特殊键盘，比如科学运算类的，那就选默认。</span><br><span class="line"><span class="number">2</span>、安装源：系统安装方式，有网络、光盘等，这里本地介质代表光盘安装。</span><br><span class="line"><span class="number">3</span>、系统安装目的地：系统安装在哪块硬盘</span><br><span class="line"><span class="number">4</span>、语言支持：系统语言，这里默认中文，如果喜欢英文或者其他，这里可以设置。</span><br><span class="line"><span class="number">5</span>、软件安装：这里可以选择系统安装哪些软件，比如是否需要安装图形界面，后面具体说。</span><br><span class="line"><span class="number">6</span>、KDUMP：系统崩溃日志存储空间设置，为了解决系统奔溃bug使用。</span><br><span class="line"><span class="number">7</span>、时间和日期：设置时区、日期、时间的地方</span><br><span class="line"><span class="number">8</span>、网络和主机名：设置网卡信息和计算机名称的地方</span><br><span class="line"><span class="number">9</span>、安全策略：安全访问策略</span><br></pre></td></tr></table></figure>

<p><strong>step 5：</strong> 安装信息设置</p>
<ul>
<li>键盘：默认即可</li>
<li>软件：安装源设置，默认即可，本地介质代表本地光盘安装</li>
<li>安装源设置，这里面我可以选择自动分区，点击完成</li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379332054.png" alt="1570759242400.png"></p>
<p>这里是系统会自动将你的安装磁盘分区，具体分了哪些区呢？可以看通过下图步骤查看或者更改：</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602385290065.gif" alt="手动分区.gif"></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">默认分区介绍</span><br><span class="line">/boot：boot分区是用来存储linux启动程序的，<span class="number">100</span>M就够了，系统推荐了<span class="number">1024</span>M</span><br><span class="line">/：存放系统数据的，除了启动程序其他程序默认都存这个分区上，系统默认将剩余分区都给它。</span><br><span class="line">/swap：linux的交互分区，类似于windowns的虚拟内存，解决的是物理内存不够用的问题，</span><br><span class="line">官方以前推荐该分区大小为内存的<span class="number">1</span><span class="literal">-2</span>倍，但是这个也是有使用窍门的，不一定按着他的来。</span><br><span class="line">比如大文件服务器我就不分这个区，意义不大，小文件服务器我就肯定分这个区。</span><br></pre></td></tr></table></figure>

<ul>
<li>语言支持：你希望系统是什么语言就点击这里选择即可，我选的的是默认简体中文</li>
<li>软件选择：这里决定了你系统安装什么样的软件包，也就是说系统安装后是什么样的，很重要！<br>生产环境下一般系统会使用以下两种安装方式：<br>a、带图形界面的linux系统<br>b、最小化安装<br>通过这里我们就可以选择，上张图我们看看</li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602385871788.png" alt="软件选择.png"></p>
<p>喜欢安装那种自己看着选吧，一般我工作中用到的就是红框画出的两种，根据自己的需求自己选择吧。</p>
<ul>
<li>KDUMP：内核奔溃日志转储，当系统奔溃了，如果你想查日志，就可以找这个日志去看看，可以帮助你尽快定位问题，解决bug。<br>因为是初学，大家点进去直接关掉就行了，以后等涉及到内核编译等工作再去研究吧。</li>
<li>时间和日期：设置系统的时区、日期、时间<br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602386186394.png" alt="时区设置2.png"><br>这里建议大家设置一下，否者你的系统默认采用的是美洲&#x2F;纽约时区，和中国的时间不一样，很难受的。</li>
<li>网络和主机名：设置网卡联网信息和计算机名字<br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602386332917.png" alt="网络与主机名设置1.png"></li>
</ul>
<p>网卡：默认网卡是关闭的，这里强烈建议你打开，否者你按上系统上不了网，对于小白来说太痛苦了。</p>
<p>主机名：设置好主机名后点击应用按钮生效。</p>
<ul>
<li>安全策略：系统访问策略，后续说到安全在给大家说，现在说小白理解太难了，毕竟我们现在只是想安装个linux系统。</li>
</ul>
<p>安装信息设置完成如下图，点击开始安装，继续吧</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602386549911.png" alt="安装信息摘要1.png"></p>
<p><strong>step 6:</strong> 点击根密码选项来设置密码，如果有需求的可以通过创建用户选项来建立一个新用户</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602386652175.png" alt="install4.png"></p>
<p><strong>step 7:</strong> 设置root密码，两遍输入要一致，如果是弱密码需要点击两次完成，也可以设置大小写字母+数字+特殊符号的这种强密码</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602386717538.png" alt="install5.png"></p>
<p><strong>step 8:</strong> 设置完成密码后，回到之前的页面</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602386744736.png" alt="install6.png"></p>
<p><strong>step 9:</strong> 完成安装之后我们来重启</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602386769626.png" alt="install7.png"></p>
<p><strong>step 10:</strong> 重启完成之后我们可以看到有一个初始设置，在这里面我们能看到有一个授权</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379605562.png" alt="1570760127370.png"></p>
<p><strong>step 11:</strong> 接受许可协议，点击完成</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379642728.png" alt="1570760218023.png"></p>
<p><strong>step 12:</strong> 结束配置</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379674970.png" alt="1570760272700.png"></p>
<p>以上就是CentOS8的安装流程，接下来我们看一下安装完成之后的一些相关设置</p>
<h2 id="三、安装后的相关设置"><a href="#三、安装后的相关设置" class="headerlink" title="三、安装后的相关设置"></a>三、安装后的相关设置</h2><p>安装完成之后，在进入系统之前我们可以看到一个欢迎页面，我们来看下这个页面有哪些设置</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379724719.png" alt="1570760388433.png"></p>
<p>在欢迎页面点击前进之后可以来到隐私设置，在这个位置可以选择是否打开位置服务</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379753410.png" alt="1570760489852.png"></p>
<p>接下来可以选择一个在线账号，如果都没有的话可以选择跳过</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379779408.png" alt="1570760531295.png"></p>
<p>跳过之后我们可以看到一个个人信息设置的页面</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602386921351.png" alt="install8.png"></p>
<p>紧接着需要我们设置一个密码</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379852413.png" alt="1570760635589.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379885287.png" alt="1570760658382.png"></p>
<p>输入密码登录</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387040814.png" alt="install10.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387053600.png" alt="install11.png"></p>
<p>登录之后你会看到一个使用手册的页面，有兴趣的可以看下，这里面我们直接关掉这个页面。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387120468.png" alt="install12.png"></p>
<p>接下来我们以root用户的身份来进行登录，首先点击屏幕右上角的按钮选择注销用户</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387314174.png" alt="install13.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387328035.png" alt="install14.png"></p>
<p>注销之后来到登录界面，选择“未列出？”</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387406514.png" alt="install15.png"></p>
<p>点击之后会看到一个让我们输入用户名的窗口，在这个窗口里面输入root<br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602380081706.png" alt="1570761324446.png"></p>
<p>然后输入密码，这个密码就是我们在安装系统的时候设置的密码，然后就可以以root用户的身份登录，登录之后也会看到一个欢迎页面，如果不想设置可以选择退出</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602380038786.png" alt="1570761440353.png"></p>
<p>这些都设置完成之后建议各位为新安装的虚拟机做一个快照，这个时候就可以用到我们之前提到的几个快捷按钮了，标记为数字1的是创建一个快照；标记为数字2的是恢复虚拟机到之前的快照，前提是你之前创建过快照；标记为数字3的是管理虚拟机的快照，在这里面你可以对已经创建的快照进行不安利，比如说删除，由于我们是新安装的虚拟机，所以这里面我们选择1，创建快照</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379986046.png" alt="1570763495661.png"></p>
<p>创建快照</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379956652.png" alt="1570763675787.png"></p>
<p>创建完成之后，如果以后有什么误操作导致此虚拟机严重故障，无法使用，就可以选择恢复快照</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602379937301.png" alt="1570763764638.png"></p>
<p>至此安装后的设置流程就结束了，nice</p>
<h2 id="四、视频学习"><a href="#四、视频学习" class="headerlink" title="四、视频学习"></a>四、视频学习</h2><p><a href="https://www.ixigua.com/6906835360559727111?id=6907237227810685451&logTag=f679e4d7b6f5f2ba85a7">视频：系统安装介绍</a><br><a href="https://www.ixigua.com/6906835360559727111?id=6907236975086928392&logTag=c1c5f52bb43e1d4ac81e">视频：系统安装步骤</a><br><a href="https://www.ixigua.com/6906835360559727111?id=6907237048814404107&logTag=542c039b2e5ee7fd37bd">视频：vmtools介绍</a></p>
<h1 id="Linux终端的使用"><a href="#Linux终端的使用" class="headerlink" title="Linux终端的使用"></a>Linux终端的使用</h1><p> 阅读 (195329) </p>
<p> 分享</p>
<h2 id="一、终端的作用"><a href="#一、终端的作用" class="headerlink" title="一、终端的作用"></a>一、终端的作用</h2><p>要了解终端，就要了解一下计算机方面的历史，早期的计算机都属于大中型计算机，是个庞然大物，占用很大的空间，属于公用产品。不像现在的电脑，可以人手一部，直接操作。那如何对这些计算机进行控制与操作呢。那就搞个终端设备来操作。因此一台计算机上有很多种不同的终端设备也和正常。也就是说终端就是为主机提供了人机接口，每个人都通过终端使用主机的资源。</p>
<p>终端有字符终端和图形终端两种模式。在linux的图形环境下，我们可以通过鼠标点击来完成所有的管理任务，这是图形界面终端，另外一种就是文本界面的终端，在这个界面的终端下我们可以使用linux命令来控制系统完成响应的工作，而这个文本终端也是服务器常用的模式。</p>
<p>用一句话来说终端就是存在于用户和计算机之间沟通的桥梁，通过终端，用户可以控制计算机完成响应的工作，也可以获得到计算机的反馈</p>
<h2 id="二、打开终端的几种方法"><a href="#二、打开终端的几种方法" class="headerlink" title="二、打开终端的几种方法"></a>二、打开终端的几种方法</h2><p>第一种，我们登录系统之后就已经打开了图形终端，在图形终端中也给我们提供了一个可以用linux命令控制系统的工具，我们点击屏幕左上角的“活动”就可以找到这个它</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387773855.png" alt="1570773103451.png"></p>
<p>打开之后我们会看到linux的命令行，在这里面我们可以输入linux命令来进行操作</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387794098.png" alt="1570773158443.png"></p>
<p>第二种 打开文本终端，这个需要键盘上的组合键[Ctrl] + [Alt] + [F1] - [F6] ，其中F1和F2是两个可供登录的图形终端，F3-F6为文本终端，现在我们使用[Ctrl] + [Alt] + [F3]打开文本终端，然后使用root用户登录</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387807896.png" alt="1570773655859.png"></p>
<p>这就是在linux中终端的打开方式，那我们接下来看一下有哪些快捷键</p>
<h2 id="三、常用快捷键"><a href="#三、常用快捷键" class="headerlink" title="三、常用快捷键"></a>三、常用快捷键</h2><p>1、图形界面下通过点击屏幕右上角的“活动”按钮打开的终端</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Shift]+[Ctrl]+t	以标签的形式打开一个新的终端</span><br><span class="line"></span><br><span class="line">[Shift]+[Ctrl]+n	以窗口的形式打开一个新的终端</span><br><span class="line"></span><br><span class="line">[Shift]+[Ctrl]+w	关闭标签页</span><br><span class="line"></span><br><span class="line">[Shift]+[Ctrl]+q	关闭窗口</span><br></pre></td></tr></table></figure>

<p>如果你想知道额外的快捷键，点击终端上方的文字按钮，会有对应快捷键的提示</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602387826764.png" alt="1570774251987.png"></p>
<p>2、通用快捷键</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Ctrl+r:		实现快速检索使用过的历史命令.</span><br><span class="line">Ctrl+a:		光标回到命令行首。 </span><br><span class="line">Ctrl+e:		光标回到命令行尾。 </span><br><span class="line">ctrl+w:		移除光标前的一个单词</span><br><span class="line">Ctrl+k:		删除光标处到行尾的字符。</span><br><span class="line">Ctrl+u:		删除整个命令行文本字符。</span><br><span class="line">Ctrl+y:		粘贴Ctrl+u，Ctrl+k，Ctrl+w删除的文本。</span><br><span class="line">Ctrl+d:		删除提示符所在出的一个字符，在空命令行的情况下可以退出终端。</span><br><span class="line">esc+. :		上一个命令的后面的参数</span><br><span class="line">Ctrl+b:		光标向行首移动一个字符。</span><br><span class="line">Ctrl+f:		光标向行尾移动一个字符。</span><br><span class="line">Ctrl+h:		向行首删除一个字符。</span><br><span class="line">Ctrl+i:		相当于Tab键。</span><br><span class="line">Ctrl+L:		清屏</span><br><span class="line">Ctrl+s:		使终端发呆，静止，可以使快速输出的终端屏幕停下来。</span><br><span class="line">Ctrl+q:		退出Ctrl+s引起的发呆。</span><br><span class="line">Ctrl+z:		使正在运行在终端的任务，运行于后台。 （可用fg恢复）</span><br><span class="line">Ctrl+c:		中断终端中正在执行的任务。</span><br><span class="line">Tab键:		命令、文件名等自动补全功能。</span><br></pre></td></tr></table></figure>

<p>以上的快捷键都是在工作中可能会经常用到的，不论是在图形界面打开的终端还是字符界面的终端都可以使用，在这里面就不挨个演示了，各位可以在终端中使用任意字幕和空格模拟命令输入然后多多熟悉，尽快掌握。</p>
<h2 id="四、视频学习-1"><a href="#四、视频学习-1" class="headerlink" title="四、视频学习"></a>四、视频学习</h2><p><a href="https://www.ixigua.com/6906835360559727111?id=6908561960934048260&logTag=67cab8fc6d33ad53a1fd">视频：图形界面与终端介绍</a></p>
<h1 id="Linux命令行介绍"><a href="#Linux命令行介绍" class="headerlink" title="Linux命令行介绍"></a>Linux命令行介绍</h1><p> 阅读 (248543) </p>
<p> 分享</p>
<h2 id="一、命令行的介绍"><a href="#一、命令行的介绍" class="headerlink" title="一、命令行的介绍"></a>一、命令行的介绍</h2><p>命令行界面（英语：command-line interface，缩写：CLI）是在图形用户界面得到普及之前使用最为广泛的用户界面，它通常不支持鼠标，用户通过键盘输入指令，计算机接收到指令后，予以执行。也有人称之为字符用户界面CUI。通常认为，命令行界面（CLI）没有图形用户界面GUI那么方便用户操作。因为，命令行界面的软件通常需要用户记忆操作的命令，但是，由于其本身的特点，命令行界面要较图形用户界面节约计算机系统的资源。在熟记命令的前提下，使用命令行界面往往要较使用图形用户界面的操作速度要快。所以，图形用户界面的操作系统中，都保留着可选的命令行界面。另外Linux 系统的优势基因还是快速、批量、自动化、智能化管理系统及处理业务。和Windows系统使用鼠标点击的可视化管理大不相同 ，Linux通过键盘输入指令就可以完成管理系统的相关操作。说完命令行，我们来看下命令提示符</p>
<h2 id="二、命令提示符的介绍"><a href="#二、命令提示符的介绍" class="headerlink" title="二、命令提示符的介绍"></a>二、命令提示符的介绍</h2><p>当我们打开终端时，不论是在图形界面还是在字符界面，我们看到的格式都是类似于[root@localhost ~]#这种格式的一串字符，这串字符就是命令提示符</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388003591.png" alt="1570783019496.png"></p>
<p>提示符组成详解：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root：当前用户的名称</span><br><span class="line"></span><br><span class="line">@：分隔符</span><br><span class="line"></span><br><span class="line">localhost：当前主机的主机名</span><br><span class="line"></span><br><span class="line">~：用户当前所在的目录名称 “~”表示为用户家目录（发音tilde[ˈtɪldə]）</span><br><span class="line"></span><br><span class="line">#： 用户身份提示符，#表示超级用户，也就是管理员；$表示普通用户 (发音pound[paʊnd])	</span><br></pre></td></tr></table></figure>

<h2 id="三、命令的语法格式"><a href="#三、命令的语法格式" class="headerlink" title="三、命令的语法格式"></a>三、命令的语法格式</h2><p>命令+选项+操作对象这三部分是组成了一个标准的linux命令，其中命令部分需要输入命令的名称；选项部分定义命令的执行特性，可以有长短两种选项，长选项用“ –” （发音dash[dæʃ]）引导，后面跟完整的单词，如 –help；短选项用 ‘- ’引导，后面跟单个的字符， 如 -a 。多个短选项可以组合使用，例如：-h -l -a &#x3D;&#x3D; -hla，但是长选项不能组合使用，如 –help后面就不能再跟另外一个单词了。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388105934.png" alt="1570784712025.png"></p>
<p>但是大家需要注意，命令与选项，选项与选项，选项与操作对象，操作对象与操作对象他们之间是必须用空格分隔！至于操作对象就是图片中的&#x2F;boot，操作对象是可以有多个的</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388129124.png" alt="1570784853770.png"></p>
<p>语法格式我们就介绍完了，咱们接着往下看</p>
<h2 id="四、如何高效的输入命令"><a href="#四、如何高效的输入命令" class="headerlink" title="四、如何高效的输入命令"></a>四、如何高效的输入命令</h2><p>想提高命令的输入效率除了要提升命令的熟练度之外，还要掌握我们上节课所学的快捷键，这样能让你在输入命令是更得心应手。<br>那如何提升命令熟练度呢？</p>
<ul>
<li>就要会查看命令的说明，只有看懂了才能记住，记住了才能熟练</li>
<li>使用tab键查询或补全</li>
</ul>
<h3 id="4-1、如何快速获取命令的帮助说明"><a href="#4-1、如何快速获取命令的帮助说明" class="headerlink" title="4.1、如何快速获取命令的帮助说明"></a>4.1、如何快速获取命令的帮助说明</h3><p>在linux中获取命令的帮助说明的途径很多，这里面给大家简单介绍几个</p>
<p>a、help命令可以帮助我们获取到内建命令的使用帮助</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388151270.png" alt="1570785422297.png"></p>
<p>b、–help参数</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388165544.png" alt="1570785480088.png"></p>
<p>c、man手册</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388192478.png" alt="1570785620561.png"></p>
<p>以上这是三种获取帮助的方式，另外还有info、whatis等也可以获取帮助，各位还可以通过一些在线查询工具获取到相关命令的帮助！</p>
<h3 id="4-2、Tab键模糊查询命令"><a href="#4-2、Tab键模糊查询命令" class="headerlink" title="4.2、Tab键模糊查询命令"></a>4.2、Tab键模糊查询命令</h3><p>a、命令模糊查找：如果你命令记不住了，大概能记得个开头，你可以使用： 命令开头字符+两次tab键找到所有以该命令开头字符的命令，然后就能找到了！</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/11/25/1606275307362.gif" alt="命令模糊查找.gif"></p>
<p>b、命令补全： 当你打命令的时候，一般情况下你打出命令的前3-5个字符按一下tab就可以完成命令补全，补全的前提是你打的这些字符可以直接匹配到这个命令。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/11/25/1606275407293.gif" alt="命令补全.gif"></p>
<h2 id="五、视频学习"><a href="#五、视频学习" class="headerlink" title="五、视频学习"></a>五、视频学习</h2><p><a href="https://www.ixigua.com/6906835360559727111?id=6908562178287239691&logTag=002d7e81ad7e2db98422">视频：linux命令介绍</a><br><a href="https://www.ixigua.com/6906835360559727111?id=6908562316124488204&logTag=f017ae33a7a204a53a92">视频：linux常用命令</a></p>
<h1 id="Linux远程连接工具"><a href="#Linux远程连接工具" class="headerlink" title="Linux远程连接工具"></a>Linux远程连接工具</h1><p> 阅读 (190549) </p>
<p> 分享</p>
<h2 id="一、远程连接工具介绍"><a href="#一、远程连接工具介绍" class="headerlink" title="一、远程连接工具介绍"></a>一、远程连接工具介绍</h2><p>关于远程连接的用户分类时这样的，通常需要进行远程连接的人有两类，一类是系统管理员，另一类是普通的用户。系统管理员通常需要远程连接企业内网的网络设备或服务器，进行远程配置管理操作。以目前的产品发展来看，大部分企业级的网络设备或服务器，通常都提供远程配置管理的接口或功能，管理员可以通过telnet、SSH、web GUI乃至远程管理软件终端等方式，进入内网进行管理维护。普通用户的远程连接需求，通常是远程办公人员、外出人员，尤其是企业高管等需要经常出差又经常需要操作ERP、CRM、HR等信息化系统，进行查看、审批、提单等操作。</p>
<p>我们这里面所提到的远程连接工具一般指的是针对系统管理类人员使用的，而系统管理类人员常用的远程连接工具主要有Putty、XShell、SecureCRT、SSH Secure、Shell Slient等等。</p>
<ul>
<li>putty： Putty非常小巧易用，不支持tab，多窗口切换效率太低，易用性不好。</li>
</ul>
<p>相关链接： <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/">https://www.chiark.greenend.org.uk/~sgtatham/putty/</a></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388336916.png" alt="1570876394781.png"></p>
<ul>
<li>SecureCRT： 界面强大，功能全面，原始环境为英文，收费</li>
</ul>
<p>相关链接： <a href="https://www.vandyke.com/cgi-bin/releases.php?product=securecrt">https://www.vandyke.com/cgi-bin/releases.php?product=securecrt</a></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388360071.png" alt="1570876465832.png"></p>
<ul>
<li>Xshell： XShell绝对首选，免费版也没什么限制，随便改字体，随便改颜色，随便改大小，随便改字符集，多窗口，也比较小巧。</li>
</ul>
<p>相关链接： <a href="https://www.netsarang.com/zh/xshell/">https://www.netsarang.com/zh/xshell/</a></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388396036.png" alt="1570876662599.png"></p>
<h2 id="二、远程连接工具的选择"><a href="#二、远程连接工具的选择" class="headerlink" title="二、远程连接工具的选择"></a>二、远程连接工具的选择</h2><p>Xshell 是一个强大的安全终端模拟软件，它支持SSH1, SSH2, 以及Microsoft Windows 平台的TELNET 协议。Xshell 通过互联网到远程主机的安全连接以及它创新性的设计和特色帮助用户在复杂的网络环境中享受他们的工作。Xshell可以在Windows界面下用来访问远端不同系统下的服务器，从而比较好的达到远程控制终端的目的。除此之外，相对比SecureCRT的原始英文环境还收费，putty的功能单一，其中文环境、丰富的外观配色方案、样式、功能，还免费等优势，使得xshell成为多数人的首选，本节课我们就以xshell为例来看下远程连接工具的相关设置</p>
<h2 id="三、远程连接工具的相关设置和使用"><a href="#三、远程连接工具的相关设置和使用" class="headerlink" title="三、远程连接工具的相关设置和使用"></a>三、远程连接工具的相关设置和使用</h2><p>1、新建会话</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388433957.png" alt="1571022422199.png"></p>
<p>2、设置会话相关信息，标记为数字1的设置连接的名称，标记为数字2的设置远程主机的IP地址，我们还可以在左侧的选项中进行一些自定义设置，包括安全性设置，终端设置，外观这些，如果只是基本使用的话我们先添这两项就可以，填完之后点击确定，你会看到一个关于秘钥的提示，在这个提示中你可以选择一次性接受还是保存，这个根据自己需求就可以，如果选择一次性的话我们下次连接还需要我们确认这个秘钥，如果是保存下来的话，下次会直接连接，可以根据自己的需求决定,紧接着会提示输入用户名和密码，都输入正确的话我们就可以连接上远程的主机了</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388468298.png" alt="1571031465825.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388513025.png" alt="1571031724630.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388523571.png" alt="1571031917329.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388533619.png" alt="1571031936838.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602388542771.png" alt="1571032314267.png"></p>
<p>如果能看到我们在之前的课程中提到的linux命令提示符就证明连接成功了，好了，本节课的内容就到这里，我们现在回顾一下</p>
<h1 id="Linux基本命令与常用符号"><a href="#Linux基本命令与常用符号" class="headerlink" title="Linux基本命令与常用符号"></a>Linux基本命令与常用符号</h1><p> 阅读 (357912) </p>
<p> 分享</p>
<h2 id="一、常用命令介绍"><a href="#一、常用命令介绍" class="headerlink" title="一、常用命令介绍"></a>一、常用命令介绍</h2><p>在linux系统中存在很多命令，这些命令可以帮助我们完成不同的工作，在这里面我们先介绍一些常用的基础命令，这些命令可以帮助我们完成对应的基本操作，随着以后的学习，我们还会接触到更多可以帮助我们完成不同工作的linux命令，我们来一起看一下这些基础命令都有哪些</p>
<p><strong>1、关机、重启命令</strong></p>
<p><strong>关机命令</strong></p>
<ul>
<li>init 0 #管理员可以使用</li>
<li>halt</li>
<li>shutdown -h</li>
<li>poweroff</li>
</ul>
<p><strong>重启命令</strong></p>
<ul>
<li>shutdown -r</li>
<li>reboot</li>
<li>shutdown -r</li>
</ul>
<p>强烈推荐：关机或重启命令及步骤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1） sync：将缓冲区的数据同步到磁盘中(关机，重启前都需要执行，避免数据丢失)，在Linux系统中，当数据需要存入磁盘时，通常会先放到缓冲区内，等到适当的时刻再写入磁盘，如此可提高系统的执行效率</span><br><span class="line"></span><br><span class="line">2） shutdown： 以一种安全的方式关闭或重启系统。所有登陆用户都可以看到关机信息提示，并且禁止登陆</span><br><span class="line"></span><br><span class="line">	-k	并非真正关机，只向所有人显示警告信息。</span><br><span class="line">		如：shutdown -k +5</span><br><span class="line">	-r	重启。默认延迟一分钟</span><br><span class="line">		如：shutdown -r +3 &quot;shutdown in 3 minutes&quot;</span><br><span class="line">	-h	关机。默认延迟一分钟</span><br><span class="line">		如：shutdown -h 12：00/shutdown -h now</span><br><span class="line">	-f	重启时跳过磁盘检测。</span><br><span class="line">	-F	重启时强制磁盘检测。</span><br><span class="line">	-c	取消shutdown</span><br><span class="line"></span><br><span class="line">推荐理由：</span><br><span class="line">1、将内存中的数据刷入硬盘，避免因为重启或关机数据没有及时保存而丢失</span><br><span class="line">2、避免多用户使用突然某个用户强行关机，影响其他用户，使用shutdown关机和重启可以通知其他用户，给予缓冲时间</span><br></pre></td></tr></table></figure>

<p><strong>2、系统信息</strong></p>
<ul>
<li>uname</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-s  输出内核名称</span><br><span class="line">-n  输出网络节点上的主机名</span><br><span class="line">-r  输出内核发行号</span><br><span class="line">-v  输出内核版本</span><br><span class="line">-m  输出主机的硬件架构名称</span><br><span class="line">-p  输出处理器类型或&quot;unknown&quot;</span><br><span class="line">-i	输出硬件平台或&quot;unknown&quot;</span><br><span class="line">-o	输出操作系统名称</span><br><span class="line">-a  以如下次序输出所有信息。其中若-p和-i的结果不可知则省略</span><br></pre></td></tr></table></figure>

<ul>
<li>hostname 查看主机名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># hostnamectl set-hostname hello</span><br></pre></td></tr></table></figure>

<ul>
<li>date 查看和设置时间</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">时间方面：</span><br><span class="line">%n : 下一行</span><br><span class="line">%t : 跳格 tab</span><br><span class="line">%H : 小时(00..23)</span><br><span class="line">%I : 小时(01..12)</span><br><span class="line">%k : 小时(0..23)</span><br><span class="line">%l : 小时(1..12)</span><br><span class="line">%M : 分钟(00..59)</span><br><span class="line">%p : 显示本地 AM 或 PM</span><br><span class="line">%r : 直接显示时间 (12 小时制，格式为 hh:mm:ss [AP]M)</span><br><span class="line">%s : 从 1970 年 1 月 1 日 00:00:00 UTC 到目前为止的秒数</span><br><span class="line">%S : 秒(00..60)</span><br><span class="line">%T : 直接显示时间 (24 小时制)</span><br><span class="line">%X : 相当于 %H:%M:%S</span><br><span class="line">%Z : 显示时区</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">日期方面：</span><br><span class="line">%a : 星期几 (Sun..Sat)</span><br><span class="line">%A : 星期几 (Sunday..Saturday)</span><br><span class="line">%b : 月份 (Jan..Dec)</span><br><span class="line">%B : 月份 (January..December)</span><br><span class="line">%c : 直接显示日期与时间</span><br><span class="line">%d : 日 (01..31)</span><br><span class="line">%D : 直接显示日期 (mm/dd/yy)</span><br><span class="line">%h : 同 %b</span><br><span class="line">%j : 一年中的第几天 (001..366)</span><br><span class="line">%m : 月份 (01..12)</span><br><span class="line">%U : 一年中的第几周 (00..53) (以 Sunday 为一周的第一天的情形)</span><br><span class="line">%w : 一周中的第几天 (0..6)</span><br><span class="line">%W : 一年中的第几周 (00..53) (以 Monday 为一周的第一天的情形)</span><br><span class="line">%x : 直接显示日期 (yyyy-mm-dd)</span><br><span class="line">%y : 年份的最后两位数字 (00.99)</span><br><span class="line">%Y : 完整年份 (0000..9999)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%I%M%S&#x27;</span><br><span class="line">025929</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%r&#x27;</span><br><span class="line">上午 02时59分49秒</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%s&#x27;</span><br><span class="line">1584428402</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%Z&#x27;</span><br><span class="line">EDT</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%a&#x27;</span><br><span class="line">二</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%A&#x27;</span><br><span class="line">星期二</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%b&#x27;</span><br><span class="line">3月</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%B&#x27;</span><br><span class="line">三月</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%c&#x27;</span><br><span class="line">2020年03月17日 星期二 03时01分36秒</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%T%n%D&#x27;</span><br><span class="line">03:03:35</span><br><span class="line">03/17/20</span><br><span class="line">[root@zutuanxue ~]# date &#x27;+%T%t%D&#x27;</span><br><span class="line">03:03:58	03/17/20</span><br><span class="line">[root@zutuanxue ~]# date -s 2021-10-25</span><br><span class="line">2021年 10月 25日 星期一 00:00:00 EDT</span><br><span class="line">[root@zutuanxue ~]# date -s 18:00</span><br><span class="line">2021年 10月 25日 星期一 18:00:00 EDT</span><br><span class="line">[root@zutuanxue ~]# date -s 18:30:21</span><br><span class="line">2021年 10月 25日 星期一 18:30:21 EDT</span><br><span class="line">[root@zutuanxue ~]# date -s &quot;2021-04-28 15:30:20&quot;</span><br><span class="line">2021年 04月 28日 星期三 15:30:20 EDT</span><br></pre></td></tr></table></figure>

<p><strong>3、文件和目录</strong></p>
<ul>
<li>cd 目录 进入目录</li>
<li>pwd： 查看当前的工作路径</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-P		显示实际位置</span><br><span class="line">-L		显示所在位置</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# cd /etc     #进入到/etc这个目录</span><br><span class="line">[root@zutuanxue ~]# cd /</span><br><span class="line">[root@zutuanxue /]# ls</span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@zutuanxue /]# cd bin/</span><br><span class="line">[root@zutuanxue bin]# pwd</span><br><span class="line">/bin</span><br><span class="line">[root@zutuanxue bin]# pwd -P</span><br><span class="line">/usr/bin</span><br><span class="line">[root@zutuanxue bin]# pwd -L</span><br><span class="line">/bin</span><br></pre></td></tr></table></figure>

<ul>
<li>ls： 查看当前目录下有哪些文件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-a 列出目录下的所有文件，包括以 . 开头的隐含文件。</span><br><span class="line">-A 显示除 “.”和“..”外的所有文件。</span><br><span class="line">-B 不输出以 “~”结尾的备份文件。</span><br><span class="line">-c 与lt一起使用，显示并按照修改时间（ctime）排序，与l一起使用，显示修改时间，按名称排序。</span><br><span class="line">-d 将目录象文件一样显示，而不是显示其下的文件。</span><br><span class="line">-f 对输出的文件不排序，使用此选项后aU选项生效，lst选项失效</span><br><span class="line">-F 在每个文件名后附上一个字符以说明该文件的类型，“*”表示可执行的普通文件；“/”表示目录；“@”表示符号链接；“|”表示FIFOs；“=”表示套接字(sockets)。</span><br><span class="line">-g 类似l但是不显示所有者</span><br><span class="line">-h 与l一起，以易于阅读的格式输出文件大小(例如 1K 234M 2G)</span><br><span class="line">-i 输出文件的i节点的索引信息。</span><br><span class="line">-k 以k字节的形式表示文件的大小。--si类似k但是以1000为进制而非1024</span><br><span class="line">-l 列出文件的详细信息。</span><br><span class="line">-L 遇到链接文件是，显示原文件的信息，而非链接信息</span><br><span class="line">-m 横向输出文件名，并以“，”作分格符。</span><br><span class="line">-n 类似l,但是用数字的 UID,GID 代替名称。</span><br><span class="line">-o 显示文件的除组信息外的详细信息。</span><br><span class="line">-p 目录后面加上/标识</span><br><span class="line">-q 用?代替不可输出的字符。</span><br><span class="line">-r 对目录反向排序。</span><br><span class="line">-s 在每个文件名后输出该文件的大小。</span><br><span class="line">-t 以修改时间排序。</span><br><span class="line">-u 与lt一起使用，以访问时间(atime)排序；与l一起使用显示访问时间，按照名称排序</span><br><span class="line">-x 按列输出，横向排序。</span><br><span class="line">-Q 把输出的文件名用双引号括起来。</span><br><span class="line">-R 列出所有子目录下的文件。</span><br><span class="line">-S 以文件大小排序。</span><br><span class="line">-X 以文件的扩展名(最后一个 . 后的字符)排序。</span><br><span class="line">-1 一行只输出一个文件。</span><br><span class="line">--color=no 不显示彩色文件名</span><br><span class="line">--help 在标准输出上显示帮助信息。</span><br><span class="line">--version 在标准输出上输出版本信息并退出。</span><br></pre></td></tr></table></figure>

<ul>
<li>mkdir 建立目录</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-m	设置权限模式(类似chmod)</span><br><span class="line">-p	需要时创建目标目录的上层目录，但即使这些目录已存在也不当作错误处理</span><br><span class="line">-v	每次创建新目录都显示信息</span><br><span class="line">-Z	将每个创建的目录的SELinux 安全环境设置为CTX</span><br></pre></td></tr></table></figure>

<ul>
<li>rmdir 删除空文件夹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-p  递归删除空目录，从最后一个目录倒删</span><br></pre></td></tr></table></figure>

<ul>
<li>touch 建立文件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-a	只更改访问时间</span><br><span class="line">-c	不创建任何文件</span><br><span class="line">-m	只更改修改时间</span><br><span class="line">-r	使用指定文件的时间属性替代当前时间</span><br><span class="line">-t	使用[[CC]YY]MMDDhhmm[.ss] 格式的时间替代当前时间</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# stat hello</span><br><span class="line">  文件：hello</span><br><span class="line">  大小：0         	块：0          IO 块：4096   普通空文件</span><br><span class="line">设备：fd00h/64768d	Inode：34502264    硬链接：1</span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">最近访问：2020-03-17 16:51:35.502961371 -0400</span><br><span class="line">最近更改：2020-03-17 16:51:35.502961371 -0400</span><br><span class="line">最近改动：2020-03-17 16:51:35.502961371 -0400</span><br><span class="line">创建时间：-</span><br><span class="line">[root@zutuanxue ~]# touch -a -t 202002010101.30 hello</span><br><span class="line">[root@zutuanxue ~]# stat hello</span><br><span class="line">  文件：hello</span><br><span class="line">  大小：0         	块：0          IO 块：4096   普通空文件</span><br><span class="line">设备：fd00h/64768d	Inode：34502264    硬链接：1</span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">最近访问：2020-02-01 01:01:30.000000000 -0500</span><br><span class="line">最近更改：2020-03-17 16:51:35.502961371 -0400</span><br><span class="line">最近改动：2020-03-17 16:51:53.143475189 -0400</span><br><span class="line">创建时间：-</span><br><span class="line">[root@zutuanxue ~]# touch -m -t 202002050101.30 hello</span><br><span class="line">[root@zutuanxue ~]# stat hello</span><br><span class="line">  文件：hello</span><br><span class="line">  大小：0         	块：0          IO 块：4096   普通空文件</span><br><span class="line">设备：fd00h/64768d	Inode：34502264    硬链接：1</span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">最近访问：2020-02-01 01:01:30.000000000 -0500</span><br><span class="line">最近更改：2020-02-05 01:01:30.000000000 -0500</span><br><span class="line">最近改动：2020-03-17 16:52:07.837453512 -0400</span><br><span class="line">创建时间：-</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#将hello-linux.txt的属性改成与anaconda-ks.cfg一样</span><br><span class="line">[root@zutuanxue ~]# stat hello-linux.txt </span><br><span class="line">  文件：hello-linux.txt</span><br><span class="line">  大小：12        	块：8          IO 块：4096   普通文件</span><br><span class="line">设备：fd00h/64768d	Inode：34513350    硬链接：1</span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">最近访问：2020-03-17 22:50:51.319377144 -0400</span><br><span class="line">最近更改：2020-03-17 22:50:45.909483733 -0400</span><br><span class="line">最近改动：2020-03-17 22:50:45.912483674 -0400</span><br><span class="line">创建时间：-</span><br><span class="line">[root@zutuanxue ~]# stat anaconda-ks.cfg </span><br><span class="line">  文件：anaconda-ks.cfg</span><br><span class="line">  大小：1378      	块：8          IO 块：4096   普通文件</span><br><span class="line">设备：fd00h/64768d	Inode：34973658    硬链接：1</span><br><span class="line">权限：(0600/-rw-------)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">最近访问：2020-03-16 23:08:34.121427663 -0400</span><br><span class="line">最近更改：2020-02-04 15:01:33.273959663 -0500</span><br><span class="line">最近改动：2020-03-18 16:33:48.873881970 -0400</span><br><span class="line">创建时间：-</span><br><span class="line">[root@zutuanxue ~]# touch -r anaconda-ks.cfg hello-linux.txt </span><br><span class="line">[root@zutuanxue ~]# stat hello-linux.txt </span><br><span class="line">  文件：hello-linux.txt</span><br><span class="line">  大小：12        	块：8          IO 块：4096   普通文件</span><br><span class="line">设备：fd00h/64768d	Inode：34513350    硬链接：1</span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">最近访问：2020-03-16 23:08:34.121427663 -0400</span><br><span class="line">最近更改：2020-02-04 15:01:33.273959663 -0500</span><br><span class="line">最近改动：2020-03-18 18:22:48.694597233 -0400</span><br><span class="line">创建时间：-</span><br></pre></td></tr></table></figure>

<ul>
<li>cat 查看文件内容</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-A	等价于-vET</span><br><span class="line">-b	对非空输出行编号</span><br><span class="line">-e      等价于-vE</span><br><span class="line">-E	在每行结束处显示$</span><br><span class="line">-n	对输出的所有行编号</span><br><span class="line">-s	不输出多行空行</span><br><span class="line">-t	与-vT等价</span><br><span class="line">-T	将跳格字符（tab）显示为 ^I</span><br><span class="line">-v	使用^和M</span><br></pre></td></tr></table></figure>

<ul>
<li>rm 删除文件或目录</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-f	强制删除。忽略不存在的文件，不提示确认</span><br><span class="line">-i	在删除前需要确认</span><br><span class="line">-I	超过三个文件或者递归删除前要求确认。比-i提示内容更少</span><br><span class="line">-d	删除空目录</span><br><span class="line">-r	递归删除目录及其内容</span><br></pre></td></tr></table></figure>

<p>这些命令都是初学者可能会经常用到的，大家可以在自己的虚拟机上练习一下</p>
<ul>
<li>cp 拷贝</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-i	覆盖前询问(使前面的 -n 选项失效)</span><br><span class="line">-n	不要覆盖已存在的文件(使前面的 -i 选项失效)</span><br><span class="line">-R, -r, --recursive		递归复制目录及其子目录内的所有内容</span><br><span class="line">-s	只创建符号链接而不复制文件</span><br><span class="line">-f	强制，将目标文件无法打开则将其移除并重试</span><br></pre></td></tr></table></figure>

<ul>
<li>mv 移动&#x2F;改名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-f	覆盖前不询问</span><br><span class="line">-i	覆盖前询问</span><br><span class="line">-n	不覆盖已存在文件</span><br><span class="line">#如果您指定了-i、-f、-n 中的多个，仅最后一个生效。</span><br></pre></td></tr></table></figure>

<h2 id="二、常用符号"><a href="#二、常用符号" class="headerlink" title="二、常用符号"></a>二、常用符号</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*	任意字符串</span><br><span class="line"></span><br><span class="line">?	任意字符</span><br><span class="line"></span><br><span class="line">/	路径间隔符</span><br><span class="line"></span><br><span class="line">~	当前用户的家目录	管理员家目录为/root，其它用户的家目录在/home/用户名	</span><br></pre></td></tr></table></figure>

<h1 id="Linux的基本优化"><a href="#Linux的基本优化" class="headerlink" title="Linux的基本优化"></a>Linux的基本优化</h1><p> 阅读 (295010) </p>
<p> 分享</p>
<h2 id="一、selinux和防火墙优化"><a href="#一、selinux和防火墙优化" class="headerlink" title="一、selinux和防火墙优化"></a>一、selinux和防火墙优化</h2><h3 id="1、SElinux"><a href="#1、SElinux" class="headerlink" title="1、SElinux"></a>1、SElinux</h3><p>selinux 安全增强型 Linux（Security-Enhanced Linux）简称 SELinux，它是一个 Linux 内核模块，也是 Linux 的一个安全子系统。SELinux 主要由美国国家安全局开发。它的主要 作用就是最大限度地减小系统中服务进程可访问的资源（最小权限原则）。也由于它的这个原则，导致我们很多操作无法正确的执行，所以对于初学者而言在会用selinux之前我们要把这个子系统关闭</p>
<p><strong>SELinux 的工作模式</strong></p>
<p>SELinux 有三种工作模式，分别是：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- enforcing：强制模式。违反 SELinux 规则的行为将被阻止并记录到日志中。</span><br><span class="line"></span><br><span class="line">- permissive：宽容模式。违反 SELinux 规则的行为只会记录到日志中。一般为调试用。</span><br><span class="line"></span><br><span class="line">- disabled：关闭 SELinux。</span><br></pre></td></tr></table></figure>

<p><strong>SElinux工作模式设置方法</strong></p>
<ul>
<li>临时设置<br>enforcing 和 permissive 模式可以通过 setenforce 1|0 命令快速切换,重启系统后失效。</li>
<li>永久生效<br>SELinux 工作模式可以在 &#x2F;etc&#x2F;selinux&#x2F;config 中设定。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如果想从 disabled 切换到 enforcing 或者 permissive 的话，需要重启系统。反过来也一样。</span><br></pre></td></tr></table></figure>

<p>需要注意的是，如果系统已经在关闭 SELinux 的状态下运行了一段时间，在打开 SELinux 之后的第一次重启速度可能会比较慢。因为系统必须为磁盘中的文件创建安全上下文，我们现在来看一下如何关闭selinux，首先用root的身份登录系统，打开一个终端输入gedit &#x2F;etc&#x2F;selinux&#x2F;config命令，回车之后会打开一个文件，将所标记出来部分的enforcing改为disabled，保存之后重启linux系统</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# gedit /etc/selinux/config</span><br><span class="line"></span><br><span class="line">##/etc/selinux/config  内容</span><br><span class="line"># This file controls the state of SELinux on the system.</span><br><span class="line"># SELINUX= can take one of these three values:</span><br><span class="line">#     enforcing - SELinux security policy is enforced.</span><br><span class="line">#     permissive - SELinux prints warnings instead of enforcing.</span><br><span class="line">#     disabled - No SELinux policy is loaded.</span><br><span class="line">SELINUX=enforcing     #这里定义selinux是否为开启状态</span><br><span class="line"></span><br><span class="line"># SELINUXTYPE= can take one of these three values:</span><br><span class="line">#     targeted - Targeted processes are protected,</span><br><span class="line">#     minimum - Modification of targeted policy. Only selected processes are protected. </span><br><span class="line">#     mls - Multi Level Security protection.</span><br><span class="line">SELINUXTYPE=targeted   #这里定义的是selinux保护级别</span><br></pre></td></tr></table></figure>

<p>重启登录之后可以使用sestatus -v命令去查看是否成功，如果看到的状态不是disabled则需要重新操作</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# sestatus -v</span><br><span class="line">SELinux status:                 disabled</span><br></pre></td></tr></table></figure>

<h3 id="2、防火墙"><a href="#2、防火墙" class="headerlink" title="2、防火墙"></a>2、防火墙</h3><p>防火墙技术是通过有机结合各类用于安全管理与筛选的软件和硬件设备，帮助计算机网络于其内、外网之间构建一道相对隔绝的保护屏障，以保护用户资料与信息安全性的一种技术。 在CentOS8中使用firewalld作为防火墙，基于iptables的防火墙被默认不启动，但仍然可以继续使用。CentOS8中有几种防火墙共存：firewalld、iptables、ebtables等，默认使用firewalld作为防火墙，通过firewall-cmd工具来管理netfilter,不过底层调用的命令仍然是iptables，虽然防火墙是安全软件，但是它的一些默认设置会对初学者造成困扰，所以我们要先关闭firewalld。通过systemctl stop firewalld.service停止防火墙，systemctl disable firewalld.service禁止防火墙服务开机启动，接下来我们看一下如何设置中文</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389727708.png" alt="1571044294838.png"></p>
<h2 id="二、中文设置优化"><a href="#二、中文设置优化" class="headerlink" title="二、中文设置优化"></a>二、中文设置优化</h2><p>我们在安装系统选择的是中文，但是我们系统当中并没有中文输入法，所以如果要想输入中文的话需要添加中文输入法，以root用户身份登录系统之后我们使用gedit &#x2F;etc&#x2F;yum.repos.d&#x2F;server.repo,输入如下内容保存退出，确保虚拟机的光驱中加载的是CentOS8的光盘镜像，并且已连接<br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389773586.png" alt="1571048414719.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389785159.png" alt="1571047694890.png"></p>
<p>设置完成之后执行mkdir命令建立目录，然后挂载光盘</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389813049.png" alt="1571047821170.png"></p>
<p>光盘挂载完成之后执行输入法安装命令，如果只要拼音则安装的是： ibus-libpinyin.x86_64</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 安装所有支持的输入法</span><br><span class="line">[root@zutuanxue ~]# dnf install ibus* -y</span><br><span class="line"></span><br><span class="line"># 或者 精准安装拼音输入法</span><br><span class="line">[root@zutuanxue ~]#  dnf install ibus-libpinyin.x86_64 -y</span><br></pre></td></tr></table></figure>

<p>等待软件包安装完成之后重启系统然后重新登录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如果不想重启系统可以使用</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# ibus restart </span><br><span class="line"></span><br><span class="line">命令重启ibus-daemon进程来实现</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389829983.png" alt="1571048752409.png"></p>
<p>安装完成之后点击右上角的按钮然后点击设置</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389850869.png" alt="1571048826875.png"></p>
<p>在新打开的窗口中找到语言，选择添加，选择汉语，然后选择一个适合自己的中文输入法点击添加之后就可以使用中文输入法了</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389866470.png" alt="1571048904227.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389893147.png" alt="1571049215146.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389909572.png" alt="1571049244944.png"></p>
<p>输入法设置完成之后，我们来看下时间相关的设置</p>
<h2 id="三、网络时间服务器优化"><a href="#三、网络时间服务器优化" class="headerlink" title="三、网络时间服务器优化"></a>三、网络时间服务器优化</h2><p>如果系统的时间不准，自己手动设置起来比较麻烦，我们可以看下怎么来优化一下</p>
<p>同样还是找到设置，在里面找到详细信息，展开之后可以看到日期和时间的设置，两个自动设置的选项打开，如果你的虚拟机可以联网的话，过一会就会看到时间正常了</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389925235.png" alt="1571049564017.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389936841.png" alt="1571049605979.png"><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389949009.png" alt="1571049727212.png"></p>
<h2 id="四、自启动服务优化"><a href="#四、自启动服务优化" class="headerlink" title="四、自启动服务优化"></a>四、自启动服务优化</h2><p>自启动服务优化的方式类似我们之前提到的停止firewalld，但是首先我们要确认一下有哪些服务是开机启动的，然后利用之前用过的systemctl stop servername和systemctl disabled servername这两条命令停止相应的服务，比如说蓝牙服务和防火墙服务，但是各位需要注意的是，这里面所涉及的服务在你不了解的前提下不要乱停止，否则可能会导致系统功能失灵，甚至是崩溃<br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602389969693.png" alt="1571050099841.png"></p>
<h1 id="Linux目录结构和文件属性管理"><a href="#Linux目录结构和文件属性管理" class="headerlink" title="Linux目录结构和文件属性管理"></a>Linux目录结构和文件属性管理</h1><p> 阅读 (221935) </p>
<p> 分享</p>
<h2 id="一、FHS介绍"><a href="#一、FHS介绍" class="headerlink" title="一、FHS介绍"></a>一、FHS介绍</h2><p>Filesystem Hierarchy Standard（文件系统层次化标准）的缩写，多数Linux版本采用这种文件组织形式，类似于Windows操作系统中c盘的文件目录，FHS采用树形结构组织文件。FHS定义了系统中每个区域的用途、所需要的最小构成的文件和目录，同时还给出了例外处理与矛盾处理。</p>
<p>FHS定义了两层规范，第一层是， &#x2F; 下面的各个目录应该要放什么文件数据，例如&#x2F;etc应该要放置设置文件，&#x2F;bin与&#x2F;sbin则应该要放置可执行文件等等。第二层则是针对&#x2F;usr及&#x2F;var这两个目录的子目录来定义。例如&#x2F;var&#x2F;log放置系统登录文件、&#x2F;usr&#x2F;share放置共享数据等等。</p>
<h2 id="二、linux目录结构介绍"><a href="#二、linux目录结构介绍" class="headerlink" title="二、linux目录结构介绍"></a>二、linux目录结构介绍</h2><p>整个Linux系统最重要的地方就是在于目录树架构，所谓的目录树架构就是以根目录为主， 然后向下呈现分支状的目录结构的一种档案架构。下图给出了linux的目录结构，那这些目录都有什么作用呢？</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602390979455.png" alt="1571118994639.png"></p>
<h2 id="三、linux目录的作用"><a href="#三、linux目录的作用" class="headerlink" title="三、linux目录的作用"></a>三、linux目录的作用</h2><ul>
<li><strong>根目录（&#x2F;）</strong></li>
</ul>
<p>最高一级目录，所有目录都是根目录衍生出来，只有root用户具有写权限，一般根目录下只存放目录，不要存放件</p>
<ul>
<li><strong>&#x2F;bin目录 – 用户二进制文件</strong></li>
</ul>
<p>包含二进制的可执行文件，你需要的常见的Linux命令都位于此目录下。</p>
<ul>
<li><strong>&#x2F;sbin目录 – 系统二进制文件</strong></li>
</ul>
<p>这个目录下的命令通常由系统管理员使用， 对系统进行维护。</p>
<ul>
<li><strong>&#x2F;etc– 配置文件</strong></li>
</ul>
<p>包含所有程序所需要的配置文件，也包含用于启动&#x2F;停止单个程序的起动和关闭shell脚本。</p>
<ul>
<li><strong>&#x2F;dev-设备文件</strong></li>
</ul>
<p>包含设备文件，包括终端设备、USB或连接到系统的任何设备，如网卡等。</p>
<ul>
<li><strong>&#x2F;proc-进程信息文件</strong></li>
</ul>
<p>这是一个虚拟的文件系统，包含有关正在运行的进程信息。</p>
<ul>
<li><strong>&#x2F;usr-用户程序</strong></li>
</ul>
<p>包含二进制文件、库文件、文档和二级程序的源代码。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/usr/bin中包含用户程序的二进制文件。如果你在/bin中找不到用户二进制文件，到/usr/bin目录看看。</span><br><span class="line">/usr/sbin中包含系统管理员的二进制文件。如果你在/sbin中找不到系统二进制文件，到/usr/sbin目录看看。</span><br><span class="line">/usr/lib中包含了/usr/bin和/usr/sbin用到的库。</span><br><span class="line">/usr/local中包含了从源安装的用户程序。</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>&#x2F;home -HOME目录</strong></li>
</ul>
<p>包含所有用户的个人档案，Linux是多用户的系统，所以用该目录保存各用户的信息。</p>
<ul>
<li><strong>&#x2F;boot -引导加载程序</strong></li>
</ul>
<p>包含引导加载程序相关的文件。</p>
<ul>
<li><strong>&#x2F;lib -系统库</strong></li>
</ul>
<p>包含支持位于&#x2F;lib和&#x2F;sbin下的二进制文件的库文件。</p>
<ul>
<li><strong>&#x2F;opt -可选的附加应用程序</strong></li>
</ul>
<p>给主机额外安装软件所摆放的目录，以前的 Linux 系统中，习惯放置在 &#x2F;usr&#x2F;local 目录下</p>
<ul>
<li><strong>&#x2F;mnt &#x2F;media -挂载目录</strong></li>
</ul>
<p>光盘默认挂载点，通常光盘挂载于 &#x2F;mnt&#x2F;cdrom 下，也不一定，可以选择任意位置进行挂载。</p>
<ul>
<li><strong>&#x2F;root</strong> 管理员家目录</li>
</ul>
<p>在这里我们所介绍的目录是在linux系统中常见的目录，不同厂商的linux有所差异，有的版本中会出现有额外作用的目录，这个就需要具体问题具体对待了。</p>
<h2 id="四、目录和设备节点"><a href="#四、目录和设备节点" class="headerlink" title="四、目录和设备节点"></a>四、目录和设备节点</h2><p>我们已经知道目录是用来存放文件的，不同的目录存放的文件作用不同，那么我们来看下设备节点是什么？ 一个设备节点其实就是一个文件，Linux中称为设备文件。有一点必要说明的是，在Linux中，<strong>所有的设备访问都是通过文件的方式，一般的数据文件程序普通文件，设备节点称为设备文件</strong>，而这些设备节点，或者说是设备文件都统一存放在&#x2F;dev目录下，简单来说，设备节点是一种特殊的文件，只不过这个文件存放的不是一般的数据，而是和你计算机中的设备相关联的。</p>
<h2 id="五、-和…"><a href="#五、-和…" class="headerlink" title="五、.和…"></a>五、.和…</h2><p>在linux系统中，使用ls -a命令时，你会发现每一个目录下都包含两个目录，这两个目录就是.和…，其中”.“表示是的是当前目录，也就是你使用pwd所查看到的路径，而”…”表示的上一级目录，也就是父目录。</p>
<h2 id="六、绝对路径和相对路径"><a href="#六、绝对路径和相对路径" class="headerlink" title="六、绝对路径和相对路径"></a>六、绝对路径和相对路径</h2><p>linux的路径书写方式有两种：</p>
<ul>
<li>绝对路径：路径的写法一定是由根目录 &#x2F; 写起的，以根目录为起点；</li>
<li>相对路径：路径的写法不是由根目录 &#x2F; 写起的，不以根目录为起点。</li>
</ul>
<p>例如，你知道你的朋友在四楼，而你在五楼，如果你的朋友询问你的位置，你就有两种回答方式：</p>
<ul>
<li>绝对路径的方式就是你告诉对方你在XX小区的xx号楼的五楼，</li>
<li>相对路径的方式就是你告诉对方你在对方五楼。</li>
</ul>
<p>至于优缺点方面没有绝对的答案，不同情况使用不同的路径罢了，两种路径的出现只是因为参照物不同而已。</p>
<h1 id="深入理解linux文件"><a href="#深入理解linux文件" class="headerlink" title="深入理解linux文件"></a>深入理解linux文件</h1><p> 阅读 (212199) </p>
<p> 分享</p>
<h2 id="一、linux的文件存储"><a href="#一、linux的文件存储" class="headerlink" title="一、linux的文件存储"></a>一、linux的文件存储</h2><p>假如有一个用户在linux系统中编辑了一个文件，编辑完内容后，关闭编辑器时会问用户改如何命名这个文件，设置完名称之后会选择一个目录将该文件保存到指定目录下，在这个例子中包含了linux系统中与文件相关的三个组成部分</p>
<ul>
<li>数据：就是文件的内容，保存在一个叫data（数据块）的结构中</li>
<li>元数据：保存一个文件的特征的系统数据，用来保存除了文件内容和文件名以外的与文件相关的信息， 诸如文件的创建者，日期，大小等等，保存在一个叫inode（i节点）的结构中。</li>
<li>文件名：用来保存文件名称，文件名保存在一个叫dentry（目录项）的结构中。</li>
</ul>
<h2 id="二、i节点介绍"><a href="#二、i节点介绍" class="headerlink" title="二、i节点介绍"></a>二、i节点介绍</h2><p>通过前面的课程我们知道，inode是用来保存文件的元数据的，除此之外还保存文件相关属性信息，如链接数等。我们通过类似stat hello.txt这条命令查看指定文件的inode信息。</p>
<h2 id="三、链接文件介绍"><a href="#三、链接文件介绍" class="headerlink" title="三、链接文件介绍"></a>三、链接文件介绍</h2><p> Linux中如果用户想把同一个文件保存在两个地方，或用两个不同的文件名保存，除了复制之外还有另外一种选择，就是链接，在linux系统中链接分为硬链接，软链接，空链接，递归链接等</p>
<p><strong>链接命令: ln</strong></p>
<p>语法：<br>ln 源文件路径 链接位置路径</p>
<p>常用命令选项:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-s 创建软连接</span><br><span class="line"></span><br><span class="line">-f 强制执行</span><br><span class="line"></span><br><span class="line">-i 交互模式，文件存在则提示用户是否覆盖</span><br><span class="line"></span><br><span class="line">-n 把符号链接视为一般目录,显示为一般文件</span><br><span class="line"></span><br><span class="line">-v 显示详细的处理过程</span><br></pre></td></tr></table></figure>

<ul>
<li>硬链接：允许一个文件拥有多个有效路径名，这样用户就可以建立硬链接到重要的文件，以防止“误删”源数据，不过硬链接只能在同一文件系统中的文件之间进行连接</li>
<li>软链接 ： 也叫符号链接，类似于windows系统中的快捷方式，与硬链接不同，软链接就是一个普通文件，软链接可对文件或目录创建。</li>
</ul>
<p>这是概念上的描述，我们用一句话来将这两种链接进行总结：</p>
<p>a、硬链接不能链目录，不能跨文件系统，软链接可以；</p>
<p>b、源文件删除后软链接失效，硬链接依然可用；</p>
<p>我们通过下面的例子可以看到硬链接和软链接的创建方式以及基本对比</p>
<p><strong>软连接</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 在root家目录下创建一个文件ztx</span><br><span class="line">[root@zutuanxue ~]# touch ztx</span><br><span class="line"></span><br><span class="line"># 为/root/ztx文件创建一个软连接文件在/tmp目录下</span><br><span class="line">[root@zutuanxue ~]# ln -s /root/ztx /tmp/</span><br><span class="line"></span><br><span class="line"># 验证快捷方式是否创建成功</span><br><span class="line">[root@zutuanxue ~]# ls -l /tmp/ztx </span><br><span class="line">lrwxrwxrwx 1 root root 9 11月 26 15:06 /tmp/ztx -&gt; /root/ztx</span><br><span class="line"></span><br><span class="line"># 查看源文件和链接文件的i节点信息</span><br><span class="line">[root@zutuanxue ~]# ls -i /root/ztx /tmp/ztx </span><br><span class="line">674632 /root/ztx  929916 /tmp/ztx    # 发现软连接的文件i节点不同</span><br><span class="line"></span><br><span class="line"># 删除源文件</span><br><span class="line">[root@zutuanxue ~]# rm -f /root/ztx</span><br><span class="line"> </span><br><span class="line"># 验证链接文件是否可用</span><br><span class="line">[root@zutuanxue ~]# cat /tmp/ztx </span><br><span class="line">cat: /tmp/ztx: 没有那个文件或目录    #删除源文件发现链接文件失效</span><br></pre></td></tr></table></figure>

<p><strong>硬链接</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 创建一个源文件  名字为组团学</span><br><span class="line">[root@zutuanxue ~]# touch zutuanxue   </span><br><span class="line"></span><br><span class="line"># 为/root/zutuanxue文件创建一个硬链接文件 到/tmp/zutuanxue</span><br><span class="line">[root@zutuanxue ~]# ln /root/zutuanxue /tmp/zutuanxue   </span><br><span class="line"></span><br><span class="line"># 查看源文件和链接文件的i节点</span><br><span class="line">[root@zutuanxue ~]# ls -i /root/zutuanxue /tmp/zutuanxue </span><br><span class="line">674632 /root/zutuanxue  674632 /tmp/zutuanxue  # 硬链接的i节点和源文件的i节点一致</span><br><span class="line"></span><br><span class="line"># 删除源文件，看看硬链接文件是否可用</span><br><span class="line">[root@zutuanxue ~]# echo test &gt; /root/zutuanxue </span><br><span class="line">[root@zutuanxue ~]# rm /root/zutuanxue </span><br><span class="line">rm：是否删除普通文件 &quot;/root/zutuanxue&quot;？y</span><br><span class="line">[root@zutuanxue ~]# cat /tmp/zutuanxue </span><br><span class="line">test			#删除硬链接源文件后，发现链接文件依然可以使用</span><br></pre></td></tr></table></figure>

<p>除了上面我们说到的硬链接和软链接之外还有</p>
<ul>
<li>空链接，所谓的空链接就是软链接指向的源文件不存在了，包括源文件被删除，改名。</li>
<li>递归链接：递归链接不如空链接常见，如果想看的话几乎需要专门寻找，如果用户创建两个软链接，linka与linkb关联，而linkb又与linka关联，这时候就会出现递归链接，比如</li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602391513564.png" alt="1571130770456.png"></p>
<ul>
<li>绝对软链接和相对软链接：主要指的是用户在创建软链接的时候使用的是绝对路径还是相对路径来指定链接目标，如果链接创建完成之后不会移动，那么这两种方法可以随意使用，但是如果链接文件需要被移动，那么建议还是使用绝对路径，比如</li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602391531255.png" alt="1571132049532.png"></p>
<p>好了链接我们就说到这里，下面我们看一下时间戳</p>
<h2 id="四、时间戳"><a href="#四、时间戳" class="headerlink" title="四、时间戳"></a>四、时间戳</h2><p>时间戳是指格林威治时间1970年01月01日00时00分00秒(北京时间1970年01月01日08时00分00秒)起至现在的总毫秒数。通俗的讲， 时间戳是一份能够表示一份数据在一个特定时间点已经存在的完整的可验证的数据。 它的提出主要是为用户提供一份电子证据， 以证明用户的某些数据的产生时间。 当我们使用stat命令查看文件的时候除了创建时间你会发现有三个跟时间戳相关的信息</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602391546471.png" alt="1571133239914.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602391560592.png" alt="1571133272500.png"></p>
<table>
<thead>
<tr>
<th>缩写</th>
<th>命令</th>
<th>目的</th>
</tr>
</thead>
<tbody><tr>
<td>Atime</td>
<td>访问时间</td>
<td>文件数据每次被阅读后的更新</td>
</tr>
<tr>
<td>Ctime</td>
<td>改变时间</td>
<td>文件的i-节点信息每次被改变后都更新</td>
</tr>
<tr>
<td>Mtime</td>
<td>修改时间</td>
<td>文件数据每次被改变后的更新</td>
</tr>
</tbody></table>
<h2 id="五、常用目录管理命令总结"><a href="#五、常用目录管理命令总结" class="headerlink" title="五、常用目录管理命令总结"></a>五、常用目录管理命令总结</h2><ul>
<li><strong>目录：</strong></li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th>用法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>mkdir</td>
<td>mkdir 目录名称</td>
<td>创建一个目录</td>
</tr>
<tr>
<td>rmdir</td>
<td>rmdir 目录名称</td>
<td>删除一个空目录</td>
</tr>
<tr>
<td>cd</td>
<td>cd 目录名称</td>
<td>进入一个目录</td>
</tr>
<tr>
<td>ls</td>
<td>ls 目录名称</td>
<td>列出一个目录内容</td>
</tr>
</tbody></table>
<ul>
<li><strong>文件：</strong></li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th>用法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>touch</td>
<td>touch 文件名</td>
<td>新建一个文件</td>
</tr>
<tr>
<td>rm</td>
<td>rm 文件名</td>
<td>删除一个文件</td>
</tr>
<tr>
<td>cat</td>
<td>cat 文件名</td>
<td>打印一个文件内容</td>
</tr>
</tbody></table>
<ul>
<li><strong>其他：</strong></li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th>用法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>cp</td>
<td>mkdir file folder</td>
<td>将文件file拷贝到目录folder</td>
</tr>
<tr>
<td>mv</td>
<td>mv A B</td>
<td>移动A到B目录或者从命名 A为B</td>
</tr>
<tr>
<td>ln</td>
<td>ln -s A B</td>
<td>给A做一个快捷方式,放到B位置</td>
</tr>
</tbody></table>
<h1 id="VIM文本编辑器"><a href="#VIM文本编辑器" class="headerlink" title="VIM文本编辑器"></a>VIM文本编辑器</h1><p> 阅读 (420113) </p>
<p> 分享</p>
<h2 id="一、vim使用介绍"><a href="#一、vim使用介绍" class="headerlink" title="一、vim使用介绍"></a>一、vim使用介绍</h2><p><strong>vim介绍</strong></p>
<p>在linux系统中，大部分配置文件都是ASCII的纯文本形式存放的，所以我们在修改系统设置的时候使用简单的文本编辑软件就可以实现了，如果你使用过windows当中的word的话，那么你可能会感觉linux字符界面的文本编辑工具并不是太好用，毕竟没有图形窗口，看着不会太舒服。但是既然要学习linux，掌握并熟练使用文本编辑工具是必不可少的技能，在linux当中的文本编辑工具有很多，如emacs pico nano joe vi&#x2F;vim 等等</p>
<p>既然有这么多文本编辑工具，为什么要学习vi&#x2F;vim呢？</p>
<p><strong>为什么要使用vim？</strong></p>
<p>虽然在linux下的文本编辑器众多，这些工具都有各自的优点，但是有几点是其它编辑工具所不能比拟的</p>
<ul>
<li>所有的类Unix系统都内建vi，其它的编辑工具则不一定，而vim相当于是vi的升级版</li>
<li>很多软件的编辑界面都会调用vi，如后面提到的crontab、edquota等</li>
<li>vim具有程序编辑能力，可以主动以字体颜色标识语法的正确性，方便代码编写</li>
<li>程序简单，编辑速度非常快</li>
</ul>
<p>综上所述这是一个老式的文字处理工具，但是功能很齐全，不仅是文本处理工具，还是一个程序编辑工具，就连官方网站也说vim是一个程序开发工具而不是文字处理软件，因为它包含了很多额外的功能，如：多文件编辑，区块复制等，这些功能让我们在进行配置文件修改的时候会更方便。</p>
<p>介绍就到这里，我们来看一下基本使用</p>
<h2 id="二、基本使用"><a href="#二、基本使用" class="headerlink" title="二、基本使用"></a>二、基本使用</h2><p>由于vi&#x2F;vim是一个全屏幕的文本编辑器，它工作在三种模式下：分别是命令模式、输入模式和末行模式。可以分别从命令模式切换到输入模式和末行模式，也可以从末行模式或输入模式切换到命令模式，但是输入模式与末行模式之间不能互相切换。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602392063340.png" alt="1571203454643.png"></p>
<p>第一种：命令模式，当我使用“vim myfile”命令打开myfile这个文件时就处于命令模式,屏幕左下角为文件名（myfile），1L 表示本文件有1 行，26C 表示此文件有26 个字符。1,25表示光标当前位置，在此模式下用户可以输入命令来进行文件存盘、移动光标、删除字符、撤消命令和重复命令等操作，还可以设置编辑环境。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this is the command mode.</span><br><span class="line">~                                                                                  </span><br><span class="line">~   表示没有内容                                                                                          </span><br><span class="line">&quot;myfile&quot; 1L, 26C                                         1,25         全部</span><br></pre></td></tr></table></figure>

<p>第二种：编辑模式，又叫输入模式。在输入模式下，屏幕的左下方会出现INSERT (插入)字样。在输入状态下，用户可以输入文本的内容。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this is the command mode.</span><br><span class="line">~                                                                                  </span><br><span class="line">~                                                                                  </span><br><span class="line">~                                                                                  </span><br><span class="line">~                                                                                  </span><br><span class="line">-- 插入 --                                                       1,25         全部</span><br></pre></td></tr></table></figure>

<p>第三种：末行模式。只要在命令模式下输入命令“：”即可进入末行模式。在末行模式下，可以进行保存文件、退出vi、进行查找和替换等操作。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this is the command mode.</span><br><span class="line">~                                                                                  </span><br><span class="line">~                                                                                  </span><br><span class="line">~                                                                                  </span><br><span class="line">~                                                                                  </span><br><span class="line">:q!                                                    </span><br></pre></td></tr></table></figure>

<p>三种模式介绍完了，我们看下vim的使用，这里面我们还是按照三种模式来对vim的使用进行说明</p>
<p><strong>命令模式可以使用的按键说明</strong></p>
<p> <strong>光标控制按键</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>h 或 向左箭头键(←)</td>
<td>光标向左移动一个字符</td>
</tr>
<tr>
<td>j 或 向下箭头键(↓)</td>
<td>光标向下移动一个字符</td>
</tr>
<tr>
<td>k 或 向上箭头键(↑)</td>
<td>光标向上移动一个字符</td>
</tr>
<tr>
<td>l 或 向右箭头键(→)</td>
<td>光标向右移动一个字符</td>
</tr>
<tr>
<td>15j&#x2F;15↓</td>
<td>向下移动15行</td>
</tr>
<tr>
<td>[Ctrl] + [f]</td>
<td>屏幕『向下』移动一页，相当于 [Page Down]按键 (常用)</td>
</tr>
<tr>
<td>[Ctrl] + [b]</td>
<td>屏幕『向上』移动一页，相当于 [Page Up] 按键 (常用)</td>
</tr>
<tr>
<td>[Ctrl] + [d]</td>
<td>屏幕『向下』移动半页</td>
</tr>
<tr>
<td>[Ctrl] + [u]</td>
<td>屏幕『向上』移动半页</td>
</tr>
<tr>
<td>n</td>
<td>那个 n 表示『数字』，例如 3 。按下数字后再按空格键，光标会向右移动3 个字符。</td>
</tr>
<tr>
<td>0 或功能键[Home]</td>
<td>这是数字『 0 』：移动到这一行的最前面字符处 (常用)</td>
</tr>
<tr>
<td>$ 或功能键[End]</td>
<td>移动到这一行的最后面字符处(常用)</td>
</tr>
<tr>
<td>H</td>
<td>光标移动到这个屏幕的最上方那一行的第一个字符</td>
</tr>
<tr>
<td>M</td>
<td>光标移动到这个屏幕的中央那一行的第一个字符</td>
</tr>
<tr>
<td>L</td>
<td>光标移动到这个屏幕的最下方那一行的第一个字符</td>
</tr>
<tr>
<td>G</td>
<td>移动到这个文件的最后一行(常用)</td>
</tr>
<tr>
<td>nG</td>
<td>n 为数字。移动到这个文件的第 n 行。可配合 :set nu</td>
</tr>
<tr>
<td>gg</td>
<td>移动到这个档案的第一行，相当于 1G (常用)</td>
</tr>
<tr>
<td>n</td>
<td>n 为数字。光标向下移动 n 行(常用)</td>
</tr>
</tbody></table>
<p> <strong>搜索与替换</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;abc</td>
<td>向光标之下查找一个名称为 abc 的字符串。 (常用)</td>
</tr>
<tr>
<td>?abc</td>
<td>向光标之上查找一个字符串名称为 abc 的字符串。</td>
</tr>
<tr>
<td>n</td>
<td>这个 n 是英文按键。代表『重复前一个查找的动作』。</td>
</tr>
<tr>
<td>N</td>
<td>这个 N 是英文按键。与 n 刚好相反</td>
</tr>
<tr>
<td>:n1,n2s&#x2F;abc1&#x2F;abc2&#x2F;g</td>
<td>n1 与 n2 为数字。在第 n1 与 n2 行之间查找 abc1 替换为 abc2</td>
</tr>
<tr>
<td>:1,$s&#x2F;abc1&#x2F;abc2&#x2F;g</td>
<td>从第一行到最后一行查找 abc1 字符串，并将该字符串替换为 abc2 (常用)</td>
</tr>
<tr>
<td>:1,$s&#x2F;abc1&#x2F;abc2&#x2F;gc</td>
<td>从第一行到最后一行查找 abc1 字符串，并将该字符串替换为 abc2 ,且在替换前显示提示字符给用户确认</td>
</tr>
</tbody></table>
<p> <strong>删除与复制粘贴</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>x, X</td>
<td>x 相当于 [del] ， X 相当于 [backspace] (常用)</td>
</tr>
<tr>
<td>nx</td>
<td>n 为数字，连续向后删除 n 个字符。</td>
</tr>
<tr>
<td>dd</td>
<td>删除光标所在的那一整行(常用)</td>
</tr>
<tr>
<td>ndd</td>
<td>n 为数字。删除光标所在的向下 n 行(常用)</td>
</tr>
<tr>
<td>d1G</td>
<td>删除光标所在行到第一行的所有数据</td>
</tr>
<tr>
<td>dG</td>
<td>删除光标所在行到最后一行的所有数据</td>
</tr>
<tr>
<td>d$</td>
<td>删除光标所在处，到该行的最后一个字符</td>
</tr>
<tr>
<td>d0</td>
<td>那个是数字的 0 ，删除光标所在处，到该行的最前面一个字符</td>
</tr>
<tr>
<td>yy</td>
<td>复制光标所在的那一行(常用)</td>
</tr>
<tr>
<td>nyy</td>
<td>n 为数字。(常用)</td>
</tr>
<tr>
<td>y1G</td>
<td>复制光标所在行到第一行的所有数据</td>
</tr>
<tr>
<td>yG</td>
<td>复制光标所在行到最后一行的所有数据</td>
</tr>
<tr>
<td>y0</td>
<td>复制光标所在的那个字符到该行行首的所有数据</td>
</tr>
<tr>
<td>y$</td>
<td>复制光标所在的那个字符到该行行尾的所有数据</td>
</tr>
<tr>
<td>p, P</td>
<td>p 为将已复制的数据在光标下一行贴上，P 则为贴在光标上一行 (常用)</td>
</tr>
<tr>
<td>J</td>
<td>将光标所在行与下一行的数据结合成同一行</td>
</tr>
<tr>
<td>c</td>
<td>重复删除多个数据，例如向下删除 4 行，[ 4cj ]，配合上下左右的按键使用</td>
</tr>
<tr>
<td>u</td>
<td>撤销操作。(常用)</td>
</tr>
<tr>
<td>[Ctrl]+r</td>
<td>重做上一个动作。(常用)</td>
</tr>
</tbody></table>
<p><strong>从命令模式进入输入模式</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>i, I</td>
<td>i&#x3D;从当前光标所在处插入， I &#x3D;在当前所在行的第一个非空处开始插入。 (常用)</td>
</tr>
<tr>
<td>a, A</td>
<td>a &#x3D;从当前光标所在的下一个字符处开始插入， A &#x3D;从光标所在行的最后一个字符处开始插入。(常用)</td>
</tr>
<tr>
<td>o, O</td>
<td>o &#x3D;在当前光标所在的下一行处插入新的一行； O &#x3D;在当前光标所在处的上一行插入新的一行。(常用)</td>
</tr>
<tr>
<td>r, R</td>
<td>r 只会取代光标所在的那一个字符一次；R会一直取代光标所在的文字，直到按下 ESC 为止；(常用)</td>
</tr>
<tr>
<td>[Esc]</td>
<td>退出输入模式，回到命令模式中(常用)</td>
</tr>
</tbody></table>
<p><strong>从命令模式进入到末行模式</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>:w</td>
<td>保存(常用)</td>
</tr>
<tr>
<td>:w!</td>
<td>若文件属性为『只读』时，强制保存，是否能保存与权限有关</td>
</tr>
<tr>
<td>:q</td>
<td>不保存退出(常用)</td>
</tr>
<tr>
<td>:q!</td>
<td>强制退出不保存。</td>
</tr>
<tr>
<td>:wq</td>
<td>保存退出， :wq! 则为强制保存退出 (常用)</td>
</tr>
<tr>
<td>ZZ</td>
<td>这是大写的 Z ！若档案没有更动，则不储存离开，若档案已经被更动过，则储存后离开！</td>
</tr>
<tr>
<td>:w [filename]</td>
<td>将编辑的数据储存成另一个档案（类似另存新档）</td>
</tr>
<tr>
<td>:r [filename]</td>
<td>在编辑的数据中，从指定的文件读取数据并加到光标所在行后面</td>
</tr>
<tr>
<td>:n1,n2 w [filename]</td>
<td>将 n1 到 n2 的内容保存为 filename 这个档案。</td>
</tr>
<tr>
<td>:! command</td>
<td>在系统中执行指定的命令 如 :! ls &#x2F;home</td>
</tr>
<tr>
<td>vim 环境的变更</td>
<td></td>
</tr>
<tr>
<td>:set nu</td>
<td>显示行号</td>
</tr>
<tr>
<td>:set nonu</td>
<td>取消行号</td>
</tr>
</tbody></table>
<h2 id="三、额外功能"><a href="#三、额外功能" class="headerlink" title="三、额外功能"></a>三、额外功能</h2><p><strong>区块选择</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>v</td>
<td>字符选择，选中光标经过的地方</td>
</tr>
<tr>
<td>V</td>
<td>选中光标经过的行</td>
</tr>
<tr>
<td>[Ctrl]+v</td>
<td>区块选择</td>
</tr>
<tr>
<td>y</td>
<td>复制选中的部分</td>
</tr>
<tr>
<td>d</td>
<td>删除选中的部分</td>
</tr>
</tbody></table>
<p><strong>多文件编辑</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>:n</td>
<td>编辑下一个文件</td>
</tr>
<tr>
<td>:N</td>
<td>编辑上一个文件</td>
</tr>
<tr>
<td>:files</td>
<td>列出目前这个 vim 的开启的所有文件</td>
</tr>
</tbody></table>
<p><strong>多窗口编辑</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>:sp&#x2F;:vsp [filename]</td>
<td>开启一个新窗口，如果加 filename， 表示在新窗口编辑指定的文件，否则表示两个窗口为同一个文件(同步显示)。</td>
</tr>
<tr>
<td>[ctrl]+w+ j [ctrl]+w+↓</td>
<td>按键的按法是：先按下 [ctrl] 不放， 再按下 w 后放开所有的按键，然后再按下 j (或向下箭头键)，则光标可移动到下方的窗口。</td>
</tr>
<tr>
<td>[ctrl]+w+ k [ctrl]+w+↑</td>
<td>同上，不过光标移动到上面的窗口。</td>
</tr>
<tr>
<td>[ctrl]+w+ q</td>
<td>退出光标所在窗口，也可以 [ctrl]+w+j&#x2F;k 切换窗口后，按下 :q 即可离开， 也可以按下 [ctrl]+w+q 。</td>
</tr>
</tbody></table>
<p><strong>环境变量与记录</strong></p>
<p>.viminfo:记录用户的行为，之前编辑过的文件光标在什么位置，在这个文件中进行过什么操作等，自动建立</p>
<p>.vimrc：定义vim的默认设置，如是否显示行号等，需要手动生成</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>:set nu &#x2F;:set nonu</td>
<td>就是设定与取消行号！</td>
</tr>
<tr>
<td>:set hlsearch &#x2F;:set nohlsearch</td>
<td>搜索时是否高亮显示。默认值是 hlsearch</td>
</tr>
<tr>
<td>:set autoindent :set noautoindent</td>
<td>是否自动缩排？autoindent 就是自动缩排。</td>
</tr>
<tr>
<td>:set backup&#x2F;:set nobackup</td>
<td>是否自动备份，一般是 nobackup 的， 如果设定 backup 的话，那么当你更动任何一个档案时，则源文件会被另存成一个档名为 filename~ 的档案。</td>
</tr>
<tr>
<td>:set ruler&#x2F;:set noruler</td>
<td>是否显示右下角的一些状态栏说明</td>
</tr>
<tr>
<td>:set showmode&#x2F;:set noshowmode</td>
<td>是否显示左下角的状态栏。</td>
</tr>
<tr>
<td>:set backspace&#x3D;(012)</td>
<td>一般来说， 如果我们按下 i 进入编辑模式后，可以利用backspace来删除任意字符的。 但是，某些版本则不许如此。这时就可以使用这个设置2 可以删除任意；0 或 1 仅可删除刚刚输入内容</td>
</tr>
<tr>
<td>:set all</td>
<td>显示目前所有的环境变量设定值。</td>
</tr>
<tr>
<td>:set</td>
<td>显示与系统默认值不同的设置， 用户修改过的</td>
</tr>
<tr>
<td>:syntax on :syntax off</td>
<td>是否显示颜色</td>
</tr>
<tr>
<td>:set bg&#x3D;dark :set bg&#x3D;light</td>
<td>可用以显示不同的颜色色调，预设是『 light 』。如果你常常发现批注的字体深蓝色实在很不容易看， 那么这里可以设定为 dark 喔！试看看，会有不同的样式呢！</td>
</tr>
</tbody></table>
<p><strong>密码设置与取消</strong></p>
<p>加密</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim filename---&gt;:X---&gt;输入密码---&gt;保存（否则不加密）</span><br></pre></td></tr></table></figure>

<p>取消密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim filename---&gt;输入正确密码---&gt;:X---&gt;空密码---&gt;保存</span><br><span class="line">vim filename---&gt;:set key= ---&gt;保存</span><br><span class="line"></span><br><span class="line">注意：不要对系统文件进行加密的操作</span><br></pre></td></tr></table></figure>

<p><strong>vim插件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、虚拟机网卡设置为NAT</span><br><span class="line">2、释放IP并重新获取IP</span><br><span class="line">dhclient -r ensxx</span><br><span class="line">dhclient ensxx</span><br><span class="line">3、安装EPELyum源</span><br><span class="line">dnf install epel-release -y</span><br><span class="line">4、安装vim插件</span><br><span class="line">dnf install vim-airline -y</span><br></pre></td></tr></table></figure>

<p><strong>vimdiff&amp;vimtutor</strong></p>
<p>vimdiff：编辑两个或者更多个文件并显示不同</p>
<p>vimtutor:一条神奇的命令</p>
<h2 id="四、使用中的注意事项"><a href="#四、使用中的注意事项" class="headerlink" title="四、使用中的注意事项"></a>四、使用中的注意事项</h2><p>由于个别版本的linux默认只安装vi，所以你需要额外安装vim的软件包，如何安装软件包我们会在后续的课程中讲解，另外vim在字符界面下不能输入中文，而在图形界面下能否输入中文则取决于系统中是否安装了中文输入法</p>
<p>字符差异</p>
<p>由于linux和windows的系统差异，它们针对于文件的中的一些特殊符号表示方式也是不同的，比如说用来表示换行的符号等，如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat -A hello-linux.txt </span><br><span class="line">hello$</span><br><span class="line">$</span><br><span class="line">[root@zutuanxue ~]# cat -A hello-windows.txt </span><br><span class="line">hello^M$</span><br><span class="line">^M$</span><br></pre></td></tr></table></figure>

<p>如果这种文件是从windows拷贝到linux的一本小说的话，基本没什么问题，但是如果是一个我们需要执行指定工作的shell脚本就会出现问题，因为linux不认识这种符号的含义，就会导致shell脚本无法执行。所以此时我们就要对这种文件进行处理</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# unix2dos [-kn] file [newfile]</span><br><span class="line">选项与参数：</span><br><span class="line">-k  ：保留文件原本的 mtime 时间格式</span><br><span class="line">-n  ：保留旧文件，将转换后的内容输出到新文件，如： dos2unix -n old new</span><br></pre></td></tr></table></figure>

<h1 id="linux用户管理"><a href="#linux用户管理" class="headerlink" title="linux用户管理"></a>linux用户管理</h1><p> 阅读 (371198) </p>
<p> 分享</p>
<h2 id="一、用户和组的相关概念"><a href="#一、用户和组的相关概念" class="headerlink" title="一、用户和组的相关概念"></a>一、用户和组的相关概念</h2><h3 id="账号的概念和分类"><a href="#账号的概念和分类" class="headerlink" title="账号的概念和分类"></a>账号的概念和分类</h3><ul>
<li><strong>账号</strong>：是一种用来记录单个用户或是多个用户的数据。Linux中每一个合法的用户都必须要拥有账号，才能使用 。它不仅可以用来验证用户身份，还决定了一个用户在系统中可以从事什么工作</li>
</ul>
<p>在Linux 上的账号可以分成两类：</p>
<ul>
<li><strong>用户账号</strong> 用来储存单一用户的数据，你可以使用一个用户账号，来储存某一个用户的数据。</li>
<li><strong>群组账号</strong> 用来储存多个用户的信息，每一个群组账号可以用来记录一组用户的数据。</li>
</ul>
<p>我们可以把 Linux 的所有账号依照下面两种方法进行分类：</p>
<ul>
<li>依照账号的位置。</li>
<li>依照账号的功能。</li>
</ul>
<p><strong>依照账号存储的位置</strong></p>
<p>账号数据存放在不同的地方，其可使用的范围就会不太一样，账号的使用范围我们称为视野。依照账号储存的位置与视野不同，我们可以区分本机账号与网域账号两种：</p>
<p><strong>本机账号:</strong> 账号密码储存于本机硬盘中，我们称为本机账号。<br>本机账号使用范围只能在账号建立的 Linux 系统上，如果超出范围时，本机账号将无法使用。比如：你在自己电脑上登录用的账号和密码，正常是无法在其它的电脑上使用的。</p>
<ul>
<li>本机账号的优点：是简单易用，你无须作额外的设置，就可以直接建立本机账号；</li>
<li>本机账号的缺点：则是无法具备延展性（<em>Scalability</em>）。比如：你在一个拥有很多主机的环境中，想拥有一个在每台主机都可以登录的账号时，你就需要在所有的主机上都建立相关的用户</li>
</ul>
<p><strong>网域账号：</strong> 你也可以把大量的计算机组织成为一个网域，然后在网域中的某一台 Linux 上建立账号数据，并且通过某些通信协议，将账号数据分享出来。当其他计算机需要取得账号数据时，再通过网络调用这些分享的账号即可。这种账号我们称为网域账号 （<em>Domain Account</em>）。</p>
<ul>
<li>网域账号的优点：在于具备延展性。在大规模的环境中，使用网域账号往往能节省管理账号的时间；</li>
<li>但网域账号也有缺点，其最大的缺点就是要配置网域账号前，你必须先建立“域”的环境才行。</li>
</ul>
<p><strong>依照账号的功能</strong></p>
<p>不管是本机账号或是网域账号，我们还可以把所有账号依照功能分成下面几类</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602392635606.png" alt="1571285802298.png"></p>
<p><strong>用户账号部分：</strong> 包含了超级用户、普通用户；而普通用户中还可细分为系统用户、真实用户两种。</p>
<ul>
<li><p>超级用户：在Linux 系统上拥有完整的控制能力，常被称为系统管理员，在 系统上拥有完整的控制能力，你可以利用超级用户读取或写入 上任何文件、安装或删除软硬件、启动或停止服务，甚至关机与停止系统的执行。 通常只有在管理系统时才会使用超级用户账号登录，所以超级用户常被称为系统管理员 （<em>System Administrator</em>）。由于超级用户的权限不受任何限制，你可以使用该账号来管理 系统；但是，也可能因为操作错误，或者打错命令而造成无法挽救的伤害。<br>在此，强烈建议你“除非有必要，否则请不要轻易以超级用户身份使用 Linux”！</p>
<p><strong>在 Linux 系统中，默认超级用户的用户为 root，其 UID（用户ID号）一定为 0。</strong></p>
</li>
<li><p>普通用户账号：行为能力会受到限制，只能调用具备权限的文件，如果没有足够的权限，普通用户是完全无法调用的；所以，普通用户账号不太容易危害 Linux 系统。普通用户账号中，我们又可分为两大类：</p>
</li>
<li><p>系统账号<br>这种类型的账号仅提供给Linux 系统本身使用。在某些软件执行的时候，需要你提供一个普通用户类型的账号。为了满足这些软件而建立的账号，我们称为系统账号 （<em>System Account</em>）。</p>
</li>
<li><p>真实用户<br>系统用户账号是给软件或程序使用的，那么，什么账号是让我们登录Linux 时使用的呢？答案就是真实用户（<em>Real User</em>）。真实用户账号是为了让其他人登录系统使用的</p>
</li>
</ul>
<p><strong>群组账号部分：</strong> 包含了超级用户群组、系统群组以及用户自定义组三大类。</p>
<ul>
<li>超级用户群组：Linux 有一个叫做 root 的群组，因为这个群组的名称与 root 这个超级用户的名称相同，所以，我们习惯把 root 群组叫做超级用户群组。超级用户群组的 GID 为 0。</li>
<li>系统群组： 与系统账号一样，系统群组是给 Linux 系统本身，或是某个软件所使用</li>
<li>用户自定义组：除了上述的群组外其余的所有群组，皆是由管理者自行定义，因此我们把这些群组称之为用户自定义组</li>
</ul>
<p>另外，Linux 系统的“用户自定义组“类型中，还有一种名为<strong>用户私有群组</strong> （<em>UPG, User Private Group</em>）的群组。什么是 <strong>用户私有群组</strong>呢？用户私有群组（<em>UPG, User Private Group</em>）是指 “与用户账号名称相同，且为用户的主要群组”的群组。当你建立新的用户账号时，Linux 会自动建立该用户的私有群组。如，当你建立 test 这个用户账号时，Linux 会自动建立了一个名为 test 的群组，并且让 test群组成为 test 用户账号的主要群组，test 群组即是 test 的私有群组。</p>
<p>了解完账号的基本概念后，我们一起来看下账号到底记录了哪些信息</p>
<h2 id="二、用户账号管理"><a href="#二、用户账号管理" class="headerlink" title="二、用户账号管理"></a>二、用户账号管理</h2><ul>
<li><strong>useradd命令</strong><br>用户创建命令，创建一个linux用户。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令介绍</span><br><span class="line">       useradd - 创建一个新用户或更新默认新用户信息</span><br><span class="line"></span><br><span class="line">命令语法</span><br><span class="line">       useradd [选项] 登录</span><br><span class="line"></span><br><span class="line">       useradd -D</span><br><span class="line"></span><br><span class="line">       useradd -D [选项]</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">  -D        默认</span><br><span class="line">  ­</span><br><span class="line">  -u UID    用来指定账号的 UID，如果省略这个参数，useradd会自动以最后一个可用的 UID 作为新账号的 UID。</span><br><span class="line"></span><br><span class="line">  -o        告诉 useradd 允许重复的 UID。  </span><br><span class="line"></span><br><span class="line">  -g gid    定义用户的主要群组。使用 -g 参数前，GROUP 必须已经存在。 </span><br><span class="line">     </span><br><span class="line">  -d HOME   指定用户的主目录。默认的主目录是建立在  /home/ 目录下，而且目录名称与用户名称相同。</span><br><span class="line">  </span><br><span class="line">  -s SHELL  指定用户登录执行的程序。</span><br><span class="line">                                      </span><br><span class="line">  -c COMMENT   指定用户的批注说明。如果批注文字包含空白，请记得使用双引号 （&quot;） 包起来。 </span><br><span class="line"> </span><br><span class="line">  -r           这个参数用来指出建立一个系统用户的账号。    </span><br><span class="line">  </span><br><span class="line">  -M           不创建家目录</span><br><span class="line"></span><br><span class="line">  -N           不创建同名组                   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#相关文件</span><br><span class="line">	/etc/passwd</span><br><span class="line">           用户账户信息。</span><br><span class="line"></span><br><span class="line">       /etc/shadow</span><br><span class="line">           安全用户账户信息。</span><br><span class="line"></span><br><span class="line">       /etc/group</span><br><span class="line">           组账户信息。</span><br><span class="line"></span><br><span class="line">       /etc/gshadow</span><br><span class="line">           安全组账户信息。</span><br><span class="line"></span><br><span class="line">       /etc/default/useradd</span><br><span class="line">           账户创建的默认值。</span><br><span class="line"></span><br><span class="line">       /etc/skel/</span><br><span class="line">           包含默认文件的目录。</span><br><span class="line"></span><br><span class="line">       /etc/subgid</span><br><span class="line">           Per user subordinate group IDs.</span><br><span class="line"></span><br><span class="line">       /etc/subuid</span><br><span class="line">           Per user subordinate user IDs.</span><br><span class="line"></span><br><span class="line">       /etc/login.defs</span><br><span class="line">           Shadow 密码套件配置。</span><br></pre></td></tr></table></figure>

<p>这些参数大多数可以同时使用，可以根据自己的需求指定，例如<br><strong>创建一个linux用户hello</strong><br>– uid为 1500<br>– 附加组为 hello<br>– 家目录为 &#x2F;home&#x2F;hello<br>– 登陆shell为 &#x2F;bin&#x2F;bash<br>– 描述为 “this is a test user”</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">useradd -u 1500 -G hello -d /home/hello -s /bin/bash -c &quot;this is a test user&quot; hello</span><br></pre></td></tr></table></figure>

<p><strong>关于linux本机用户</strong><br>本机的用户账号数据储存于&#x2F;etc&#x2F;passwd文件中。与其他的配置文件一样，passwd 也是一个文本文件，因此，你可以直接使用文字处理程序，例如 cat 或 less 浏览其中的内容。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure>

<p>&#x2F;etc&#x2F;passwd 权限必须是0644，每一行代表一个用户的账号数据，每一行又使用冒号（:）分隔为几个部分</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">USERNAME:PASSWORD:UID:GID:COMMENT:HOMEDIR:SHELL  </span><br><span class="line"></span><br><span class="line">- USERNAME:用户识别名称，也是登录的名称</span><br><span class="line">- PASSWORD：密码位，用于存储用户的密码，为了安全起见，密码放在另一个文件中，这里统一用x</span><br><span class="line">- UID：用户识别号，0表示为管理员，非0为普通用户</span><br><span class="line">- GID：组识别号，用来识别用户组的身份，同样0为管理员组，非0为系统群组或者自定义组</span><br><span class="line">- COMMENT：描述信息</span><br><span class="line">- HOMEDIR：家目录位置</span><br><span class="line">- SHELL：shell类型</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>usermod命令</strong><br>是用来修改用户相关信息的，和useradd使用的参数很多是相同的，用法也是一样的，除此之外usermod命令还有一些额外的参数</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令介绍</span><br><span class="line">       usermod - 修改一个用户账户</span><br><span class="line"></span><br><span class="line">命令语法</span><br><span class="line">       usermod [选项] 登录</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-l NEWNAME   修改账号的用户名称，NEWNAME 即是新的账号名称。</span><br><span class="line"></span><br><span class="line">-L           锁定账号，一经锁定的账号将无法用来登录系统。</span><br><span class="line"></span><br><span class="line">-U           解除锁定。</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>userdel命令</strong><br>删除linux用户</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令介绍</span><br><span class="line">       userdel - 删除用户账户和相关文件</span><br><span class="line"></span><br><span class="line">命令语法</span><br><span class="line">       userdel [选项] 登录</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-r          用户主目录中的文件将随用户主目录和用户邮箱一起删除。在其它文件系统中的文件必须手动搜索并删除。</span><br><span class="line"></span><br><span class="line">-f          强制</span><br></pre></td></tr></table></figure>

<p><strong>删除tom用户以及其家目录文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# userdel -r tom</span><br></pre></td></tr></table></figure>

<h2 id="三、用户查询命令"><a href="#三、用户查询命令" class="headerlink" title="三、用户查询命令"></a>三、用户查询命令</h2><ul>
<li><strong>id命令：查询用户uid、gid信息</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# id hello</span><br><span class="line">uid=1500(hello) gid=1500(hello) 组=1500(hello)</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# id -u hello</span><br><span class="line">1500</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>whoami命令：查询当前登录用户</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# whoami</span><br><span class="line">root</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>w命令:查询linux系统中登陆的所有用户</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# w</span><br><span class="line"> 18:21:43 up  2:01,  1 user,  load average: 0.00, 0.00, 0.00</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     pts/0    192.168.1.17    16:16    3.00s  0.08s  0.00s w</span><br></pre></td></tr></table></figure>

<h1 id="linux-组管理"><a href="#linux-组管理" class="headerlink" title="linux 组管理"></a>linux 组管理</h1><p> 阅读 (314733) </p>
<p> 分享</p>
<h2 id="组账号管理"><a href="#组账号管理" class="headerlink" title="组账号管理"></a>组账号管理</h2><p>本机的群组账号数据被储存在 &#x2F;etc&#x2F;group 文件中，权限也必须为0644，与 &#x2F;etc&#x2F;passwd 一样，这也是一个文本文件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root:x:0:</span><br><span class="line">bin:x:1:</span><br><span class="line">daemon:x:2:</span><br></pre></td></tr></table></figure>

<p>这与&#x2F;etc&#x2F;passwd文件的格式类似</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GROUPNAME:PASSWORD:GID:MEMBERS </span><br><span class="line"></span><br><span class="line">- GROUPNAME:组名</span><br><span class="line"></span><br><span class="line">- PASSWORD:组密码，这里也和passwd文件一样是个x</span><br><span class="line"></span><br><span class="line">- GID：群组识别号</span><br><span class="line"></span><br><span class="line">- MEMBERS：组成员</span><br></pre></td></tr></table></figure>

<p>一起来看下组管理的相关命令</p>
<ul>
<li><strong>groupadd</strong> 建立组</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令介绍</span><br><span class="line">       groupadd - 创建一个新组</span><br><span class="line"></span><br><span class="line">命令语法</span><br><span class="line">       groupadd [选项] group</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-g GID     指定群组账号的标识符 </span><br><span class="line"></span><br><span class="line">-r         指定添加的群组成为系统群组</span><br><span class="line"></span><br><span class="line">-f         强制执行。  在一般的情况下，groupadd 不允许建立一个与使用过的 GID 相同的群组账号，而使用这个参数时，groupadd 将会建立相同 GID 的 群组账号。</span><br><span class="line"></span><br><span class="line">-o         此选项允许添加一个使用非唯一 GID 的组。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#组相关文件</span><br><span class="line">       /etc/group</span><br><span class="line">           组账户信息。</span><br><span class="line"></span><br><span class="line">       /etc/gshadow</span><br><span class="line">           安全组账户信息。</span><br><span class="line"></span><br><span class="line">       /etc/login.defs</span><br><span class="line">           Shadow 密码套件配置。</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>groupmod</strong> 修改群组信息</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令介绍</span><br><span class="line">       groupmod - 修改组信息</span><br><span class="line"></span><br><span class="line">命令语法</span><br><span class="line">       groupmod [选项] GROUP</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-g GID       修改群组账号的标识符。GID 就是新的标识符。</span><br><span class="line">-n NEWNAME   用来修改群组的名称。NEWNAME 就是新的组名。</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>groupdel</strong> 删除群组账号</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令介绍</span><br><span class="line">	groupdel - 删除一个组</span><br><span class="line"></span><br><span class="line">命令语法</span><br><span class="line">	groupdel [选项] GROUP</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-f   强制</span><br></pre></td></tr></table></figure>

<p><strong>您不能移除现有用户的主组。在移除此组之前，必须先移除此用户。</strong></p>
<p>用户和组的相关命令我们介绍完了，现在来看下密码管理</p>
<h1 id="linux-密码管理"><a href="#linux-密码管理" class="headerlink" title="linux 密码管理"></a>linux 密码管理</h1><p> 阅读 (240105) </p>
<p> 分享</p>
<p>账号犹如一张通行证，有了账号你才能顺利的使用Linux。不过 Linux 怎么确认使用某账号的人，是这个账号的真正拥有者呢？此时Linux 会根据用户的密码，来确认用户的身份。Linux 的用户账号与群组账号都可设置密码。用户账号的密码用来验证用户的身份；而群组账号的密码则是用来确认用户是否为该群组的成员，以及确认是否为该群组的管理者。</p>
<p>在 Linux 中，使用 useradd 新建一个用户账号时，useradd 会锁定用户的密码，如此一来，用户暂时不能使用 。你必须要修改其密码后，新建的用户才能用他的账号登录。要修改用户账号的密码需要使用passwd命令</p>
<ul>
<li>passwd命令</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令介绍</span><br><span class="line">	修改用户密码</span><br><span class="line"></span><br><span class="line">命令语法</span><br><span class="line">	passwd [选项] 用户</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-d     删除用户密码，亦即把文件中的密码字段清空。</span><br><span class="line"></span><br><span class="line">-l     这个参数用来锁定账号，账号一经锁定，用户再怎样输入密码，都会被判断为错误。这个参数只能由 root 使用，普通用户无法用来锁定自己的账号。</span><br><span class="line"></span><br><span class="line">-u     解锁用户</span><br></pre></td></tr></table></figure>

<p>除了可以修改用户账号的密码外，你也可以为每一个群组设置一个密码，这个密码称为群组密码（Group Password）。Linux 的用户，可以通过 newgrp 暂时修改其主要群组的身份。执行 newgrp 时，会以指定的群组身份，开启一个登录 Shell，这样就可以获得暂时修改主要群组之功效。此时，如果该群组没有指定密码，那么 Linux 只允许群组的成员可以使用 newgrp修改主要群组的身份；如果群组设置了密码，群组成员仍可以不用密码就可切换主要群组身份，但非群组的成员，则必须要提供正确的密码才行。</p>
<ul>
<li>gpasswd命令</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令介绍</span><br><span class="line">	修改组密码,对群组管理</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-r     用来删除群组的密码。</span><br><span class="line"></span><br><span class="line">-R     锁定 GROUP 的群组密码。</span><br><span class="line"></span><br><span class="line">-A     设置组管理员</span><br><span class="line"></span><br><span class="line">-a     添加组成员到组</span><br><span class="line"></span><br><span class="line">-d     从组中 删除组成员</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">命令用法</span><br><span class="line">指派群组管理员，如果有多个管理员用“，”分隔，如果想删除群组管理员，保持位置为空</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">组管理员用法案例</span><br><span class="line">创建组admin</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# groupadd admin</span><br><span class="line"></span><br><span class="line">创建用户 ztxa ztxb ztxc</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# useradd ztxa</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# useradd ztxb</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# useradd ztxc</span><br><span class="line"></span><br><span class="line">设置ztxa为admin组的组管理员</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# gpasswd -A ztxa admin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">切换到ztxa   将ztxb ztxc加入 admin组</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# su - ztxa -c &quot;gpasswd -a ztxb admin&quot;</span><br><span class="line"></span><br><span class="line">正在将用户“ztxb”加入到“admin”组中</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# su - ztxa -c &quot;gpasswd -a ztxc admin&quot;</span><br><span class="line"></span><br><span class="line">正在将用户“ztxc”加入到“admin”组中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">切换到ztxa  从admin组中删除ztxc</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# su - ztxa -c &quot;gpasswd -d ztxc admin&quot;</span><br><span class="line"></span><br><span class="line">正在将用户“ztxc”从“admin”组中删除</span><br></pre></td></tr></table></figure>

<h1 id="linux-shadow文件"><a href="#linux-shadow文件" class="headerlink" title="linux shadow文件"></a>linux shadow文件</h1><p> 阅读 (391132) </p>
<p> 分享</p>
<p>说到用户管理，就不得不提到shadow这个文件，shadow有三个功能：</p>
<ul>
<li>隐藏密码</li>
<li>扩充密码的功能</li>
<li>提供账号管理工具</li>
</ul>
<p><strong>隐藏密码：</strong> 因为&#x2F;etc&#x2F;passwd和&#x2F;etc&#x2F;group文件的权限必须是0644，这意味着所有的用户都能读取到内容，所以为了安全起见，我们通过shaodw把用户和组的密码分别隐藏在&#x2F;etc&#x2F;shadow,&#x2F;etc&#x2F;gshadow文件中，且这两个文件只有管理员，也就是root能调用</p>
<p><strong>提供账号管理工具</strong> ：我们之前所介绍的用户和组管理的相关命令，都是shadow所提供的工具</p>
<p><strong>扩充密码功能</strong>： 这个扩充密码功能就是除了密码之外的额外功能，如，密码的有效期限，设置群组管理员（组长）等，这些都是记录在&#x2F;etc&#x2F;shadow,&#x2F;etc&#x2F;gshadow文件中</p>
<p><strong>&#x2F;etc&#x2F;shadow:</strong> 存储用户密码及密码额外功能的文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">文件内容：</span><br><span class="line">root:$6$T52Xvk7zu84.tDXp$nfXcm6LTfUx.ZviEo7Eq1bPjDO...::0:99999:7:::</span><br><span class="line">bin:*:18027:0:99999:7:::</span><br></pre></td></tr></table></figure>

<p>&#x2F;etc&#x2F;shadow文件的格式与&#x2F;etc&#x2F;passwd类似，也是每一行代表一个账号的数据，使用：进行分隔.</p>
<p><strong>内容详解</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">USERNAME:PASSWORD:LAST_CHANGED:MIN_DAYS:MAX_DAYS:WARNNING:EXPIRES:INVALID:RESERVED</span><br><span class="line"></span><br><span class="line">1、USERNAME：用户账号名称。</span><br><span class="line"></span><br><span class="line">2、PASSWORD：加密后的密码。</span><br><span class="line"></span><br><span class="line">3、LAST_CHANGED：密码最后一次修改的日期。</span><br><span class="line"></span><br><span class="line">4、MIN_DAYS：密码修改的最小间隔天数。</span><br><span class="line"></span><br><span class="line">5、MAX_DAYS：密码修改的最大天数。</span><br><span class="line"></span><br><span class="line">6、WARNNING：密码过期前警告的天数。</span><br><span class="line"></span><br><span class="line">7、EXPIRES：密码过期的日期</span><br><span class="line"></span><br><span class="line">8、INVALID:	账号失效日期</span><br><span class="line"></span><br><span class="line">9、RESERVED：保留位，未定义功能</span><br></pre></td></tr></table></figure>

<p>这里面我们所提到的日期都是从1970年1月1日起经过的天数，所以我们看到的不是日期的格式，而是一组数字，我们接下来看下另一个文件</p>
<p><strong>&#x2F;etc&#x2F;gshadow:</strong> 存储组密码及密码额外功能的文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">文件内容：</span><br><span class="line">root:::</span><br><span class="line">bin:::</span><br><span class="line">daemon:::</span><br></pre></td></tr></table></figure>

<p><strong>内容详解</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GROUPNAME:PASSWORD:ADMINISTRATORS:MEMBERS   </span><br><span class="line"></span><br><span class="line">GROUPNAME:	组名</span><br><span class="line"></span><br><span class="line">PASSWORD：	组密码</span><br><span class="line"></span><br><span class="line">ADMINISTRATORS： 组长</span><br><span class="line"></span><br><span class="line">MEMBERS：	组成员</span><br></pre></td></tr></table></figure>

<p>除此之外用户管理还有一个简单的方法，那就是以root用户身份登录图形界面</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602399129291.png" alt="1571302990425.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602399151313.png" alt="1571303014802.png"></p>
<p><strong>cockpit</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># systemctl start cockpit</span><br><span class="line">http://localhost:9090</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602399169696.png" alt="image20200331143440902.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602399191502.png" alt="image20200331143459395.png"></p>
<p><strong>管理密码的有效期限</strong></p>
<p>Shadow除了会把密码数据隐藏到其他文件、提供许多账号管理工具外，还允许你为账号或密码设置有效期限，以提高Linux 的安全性。目前的 Shadow 可以设置下列两种期限：</p>
<p>密码过期</p>
<p>一旦超过密码过期日期，用户成功的登录Linux 时，会强迫用户设置一个新的密码。设置完毕后，才会开启用户的 Shell 程序。设置密码过期的目的，在于提高 Linux 的安全性。</p>
<p>账号过期</p>
<p>若超过账号过期日期，Linux 会禁止用户登录系统，即使输入正确的密码，也无法登录。当账号过期时，Linux 会提示用户联系管理员修改账号过期日期。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Your account has expired; please contact your system administrator 	</span><br></pre></td></tr></table></figure>

<p>我们可以使用chage命令来查看或调整这些相关的期限</p>
<ul>
<li>chage命令</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# chage -l hello</span><br><span class="line">最近一次密码修改时间					：从不</span><br><span class="line">密码过期时间					：从不</span><br><span class="line">密码失效时间					：从不</span><br><span class="line">帐户过期时间						：从不</span><br><span class="line">两次改变密码之间相距的最小天数		：0</span><br><span class="line">两次改变密码之间相距的最大天数		：99999</span><br><span class="line">在密码过期之前警告的天数	：7</span><br><span class="line"></span><br><span class="line">chage</span><br><span class="line">  -m	设置密码修改的最小天数</span><br><span class="line">  -M	设置密码修改的最大天数</span><br><span class="line">  -d	设置密码最后修改日期</span><br><span class="line">  -I	设置密码过期后，锁定账号的天数</span><br><span class="line">  -E	设置账号过期日期，0=立即过期，-1=永不过期</span><br><span class="line">  -W	设置密码过期前的警告天数</span><br><span class="line">  -l	查看指定用户的相关信息</span><br><span class="line">  -h	帮助</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602399247448.png" alt="image20200331164400723.png"></p>
<h1 id="linux基本权限"><a href="#linux基本权限" class="headerlink" title="linux基本权限"></a>linux基本权限</h1><p> 阅读 (241192) </p>
<p> 分享</p>
<p>Linux系统是一个典型的多用户操作系统，不同的用户处于不同的地位，为了保护系统的安全性，linux系统对于不同用户访问同一个文件或目录做了不同的访问控制。而这种控制就是通过权限实现的，本节课我们介绍linux权限的使用</p>
<h2 id="一、基本权限的介绍"><a href="#一、基本权限的介绍" class="headerlink" title="一、基本权限的介绍"></a>一、基本权限的介绍</h2><p>Linux中每个文件或目录都有3个基本权限位，控制三种访问级别用户的读、写、执行，所以linux的基本权限位一共有9个。基本权限位和另外3个可以影响可执行程序运行的3个特殊权限位一起构成了文件访问模式。三个属性规定了对应三种级别的用户能够如何使用这个文件，这三个基本权限位对于文件和目录的含义有所差别的，我们一起来看一下</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>权限</th>
<th>对文件的含义</th>
<th>对目录的含义</th>
</tr>
</thead>
<tbody><tr>
<td>r</td>
<td>读</td>
<td>意味着我们可以查看阅读</td>
<td>可以列出目录中的文件列表</td>
</tr>
<tr>
<td>w</td>
<td>写</td>
<td>意味着，对文件可以修改或删除</td>
<td>可以在该目录中创建、删除文件</td>
</tr>
<tr>
<td>x</td>
<td>执行</td>
<td>如果是文件就可以运行，比如二进制文件或脚本。</td>
<td>可以使用cd命令进入该目录</td>
</tr>
</tbody></table>
<p>那三种访问级别都有哪些呢？每个文件都有三组不同的读、写和执行权限，分别适用于三种访问级别，其中每组中的三个栏位分别使用读取权限（r）、写入权限（w）、执行权限（x）或没有相应的权限（-）来表示，共9位来表示。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602399589987.png" alt="1571370358704.png"></p>
<ul>
<li>第一组：适用于文件的属主，图中属主的权限是rwx。</li>
<li>第二组：适用于文件的属组，图中属组的权限是r-x。</li>
<li>第三组：使用于其它用户权限位，图中其它用户权限位是r-x。</li>
</ul>
<p>当有人试图访问一个文件的时候，linux系统会按顺序执行如下步骤：</p>
<p>（1）使用者拥有这个文件吗？如果是，启用用户权限。</p>
<p>（2）用户是组所有者成员吗？如果是，启用组权限</p>
<p>（3）如果以上两个都不是，启用其它人权限</p>
<p>上面我们提到的是第一种表示方法，在linux中还有另外一种表示方法，八进制表示法，我们来看下字母和八进制表示方法的对应关系</p>
<table>
<thead>
<tr>
<th>字符表示法</th>
<th>八进制表示法</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>r</td>
<td>4</td>
<td>读</td>
</tr>
<tr>
<td>w</td>
<td>2</td>
<td>写</td>
</tr>
<tr>
<td>x</td>
<td>1</td>
<td>执行</td>
</tr>
</tbody></table>
<p>所以上面给出的权限rwxr-xr-x换成数字的表示方式就是755，那权限如何设置呢？</p>
<h2 id="二、基本权限的设置和查看"><a href="#二、基本权限的设置和查看" class="headerlink" title="二、基本权限的设置和查看"></a>二、基本权限的设置和查看</h2><p>通过前面的学习我们知道，用户分为所有者，所有者组，其他人这三类，而每一类有包含三种基本权限，他们的对应关系是</p>
<table>
<thead>
<tr>
<th>权限位</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>属主权限位</td>
<td>用于限制文件或目录的创建者</td>
</tr>
<tr>
<td>属组权限位</td>
<td>用于限制文件或目录所属组的成员</td>
</tr>
<tr>
<td>其它用户的权限</td>
<td>用于限制既不是属主又不是所属组的能访问该文件或目录的其他人员</td>
</tr>
</tbody></table>
<p>当我们使用命令来查看文件或目录时，会看如下内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# ls -l</span><br><span class="line">总用量 13804</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 11 06:36 公共</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 11 06:36 模板</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 11 06:36 视频</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 11 06:36 图片</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 11 06:36 文档</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 11 06:36 下载</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 11 06:36 音乐</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 11 06:36 桌面</span><br><span class="line">-rw-------.  1 root root     1214 10月 11 06:12 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--.  1 root root     1369 10月 11 06:17 initial-setup-ks.cfg</span><br></pre></td></tr></table></figure>

<p>每一行显示一个文件或目录的信息，这些信息包括文件的类型（1位）、文件的权限(9位)、文件的连接数、文件的属主（第3列）、文件的所属组（第4列），大小以及相关时间和文件名。其中Linux 文件的权限标志位九个，分为3 组，分别代表文件拥有者的权限，文件所属用户组的权限和其它用户的权限，现在我们知道文件有三种权限（（r）读取、（w）写入和（x）执行）和三种访问级别（（u）用户、（g）主要组和（o）其它人）决定文件可以被如何使用。那如何修改？</p>
<ul>
<li><strong>chmod命令:修改文件权限</strong></li>
</ul>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602399812604.png" alt="1571375694210.png"></p>
<table>
<thead>
<tr>
<th>缩写</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>u</td>
<td>User(用户)</td>
</tr>
<tr>
<td>g</td>
<td>Group (组)</td>
</tr>
<tr>
<td>o</td>
<td>Other(其它)</td>
</tr>
<tr>
<td>a</td>
<td>All(所有)</td>
</tr>
<tr>
<td>+</td>
<td>Add(加)</td>
</tr>
<tr>
<td>-</td>
<td>Remove(减去)</td>
</tr>
<tr>
<td>&#x3D;</td>
<td>Set (设置)</td>
</tr>
<tr>
<td>r</td>
<td>Read (可读)</td>
</tr>
<tr>
<td>w</td>
<td>Write (可写)</td>
</tr>
<tr>
<td>x</td>
<td>Execute (执行)</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
<th>结果权限</th>
</tr>
</thead>
<tbody><tr>
<td>chmod o-r a.file</td>
<td>取消其他人的可读权限</td>
<td>rw-rw—</td>
</tr>
<tr>
<td>chmod g-w a.file</td>
<td>取消组的写入权限</td>
<td>rw-r–r–</td>
</tr>
<tr>
<td>chmod ug+w a.file</td>
<td>赋予用户和组写入权限</td>
<td>rwxrwxr–</td>
</tr>
<tr>
<td>chmod o+w a.file</td>
<td>赋予其他人写入权限</td>
<td>rw-rw-rw-</td>
</tr>
<tr>
<td>chmod go-rwx a.file</td>
<td>取消组和其他人的阅读、写入和执行权限</td>
<td>rw——-</td>
</tr>
<tr>
<td>chmod a-w a.file</td>
<td>取消所有人的写入权限</td>
<td>r– r– r–</td>
</tr>
<tr>
<td>chmod uo-r a.file</td>
<td>取消用户和其它人的阅读权限</td>
<td>-w-rw–w-</td>
</tr>
<tr>
<td>chmod go&#x3D;rw a.file</td>
<td>将组和其他人的权限设置为阅读和写入</td>
<td>rw-rw-rw-</td>
</tr>
</tbody></table>
<p>使用数字的表示方式类似chmod 755 a,执行完成后a这个文件的权限对应就是 -rwxr-xr-x,这是文件权限的两种修改方式，如果你想修改文件的所有者和所有者组需要使用的命令就是chown,chgrp</p>
<ul>
<li><strong>chown命令:改变文件或文件夹的所有者</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">-rw-r--r-- 1 root root 0 10月 18 01:26 file1</span><br><span class="line">[root@zutuanxue test]# chown oracle file1</span><br><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">-rw-r--r-- 1 oracle root 0 10月 18 01:26 file1</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>chgrp命令: 改变文件或文件夹属组</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# chgrp oracle file1</span><br><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">-rw-r--r-- 1 oracle oracle 0 10月 18 01:26 file1</span><br></pre></td></tr></table></figure>

<p>这里，我们涉及到了三条与权限修改相关的命令</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>可以执行的用户</th>
</tr>
</thead>
<tbody><tr>
<td>chmod</td>
<td>Root用户和文件的所有者</td>
</tr>
<tr>
<td>chgrp</td>
<td>Root用户和文件的所有者（必须是组成员）</td>
</tr>
<tr>
<td>chown</td>
<td>只有root用户</td>
</tr>
</tbody></table>
<p>以上是三种基本权限 -R</p>
<h2 id="三、文件或目录的默认权限"><a href="#三、文件或目录的默认权限" class="headerlink" title="三、文件或目录的默认权限"></a>三、文件或目录的默认权限</h2><p>每一个新产生的文件都会有一个默认的权限，这个权限是通过系统中的umask来控制的</p>
<p>文件的最大权限是666</p>
<p>目录的权限是777</p>
<p>使用umask查看</p>
<h1 id="linux-特殊权限"><a href="#linux-特殊权限" class="headerlink" title="linux 特殊权限"></a>linux 特殊权限</h1><p> 阅读 (290829) </p>
<p> 分享</p>
<p>linux基本权限只是规定了所有者、属组、其他人三种用户的权限，如果希望对文件或文件夹做一些特殊的权限设置呢？<br>比如：</p>
<ul>
<li>设置属组继承权限</li>
<li>为执行文件设置临时超管执行权限</li>
<li>公共文件夹中的文件谁建立谁删除<br>这些任务基本权限就解决不聊了，需要解决这个问题得靠特殊权限。</li>
</ul>
<h2 id="一、特殊权限的介绍"><a href="#一、特殊权限的介绍" class="headerlink" title="一、特殊权限的介绍"></a>一、特殊权限的介绍</h2><p>之前我们提到了特殊权限有三个，这三个特殊权限是在可执行程序运行时影响操作权限的，它们分别是SUID,SGID,sticky-bit位</p>
<table>
<thead>
<tr>
<th>特殊权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>SUID</td>
<td>当一个设置了SUID 位的可执行文件被执行时，该文件将以所有者的身份运行，也就是说无论谁来执行这个文件，他都有文件所有者的特权。任意存取该文件拥有者能使用的全部系统资源。如果所有者是 root 的话，那么执行人就有超级用户的特权了。</td>
</tr>
<tr>
<td>SGID</td>
<td>当一个设置了SGID 位的可执行文件运行时，该文件将具有所属组的特权，任意存取整个组所能使用的系统资源；若一个目录设置了SGID，则所有被复制到这个目录下的文件，其所属的组都会被重设为和这个目录一样，除非在复制文件时保留文件属性，才能保留原来所属的群组设置。</td>
</tr>
<tr>
<td>stickybit</td>
<td>对一个文件设置了sticky-bit之后，尽管其他用户有写权限，也必须由属主执行删除、移动等操作；对一个目录设置了sticky-bit之后，存放在该目录的文件仅准许其属主执行删除、移动等操作。</td>
</tr>
</tbody></table>
<p>一个典型的例子就是passwd命令，这个命令允许用户修改自己的密码。我们可以看到本来是rwx的权限表示形式变成了rws，同样如果&#x2F;usr&#x2F;bin&#x2F;passwd这个文件同时被设置了三个特殊权限，那么权限的格式就会变成rwsrwsrwt,需要注意的是特殊权限设置的前置要求是可执行，也就是如果没有x权限位，是不要设置的，即便你使用root用户设置上了特殊权限，也不会生效。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# ll /usr/bin/passwd </span><br><span class="line">-rwsr-xr-x. 1 root root 34928 5月  11 11:14 /usr/bin/passwd</span><br></pre></td></tr></table></figure>

<h2 id="二、特殊权限的设置和查看"><a href="#二、特殊权限的设置和查看" class="headerlink" title="二、特殊权限的设置和查看"></a>二、特殊权限的设置和查看</h2><p><strong>特殊权限的设置也是使用chmod</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">-rwxr-xr-x 1 oracle oracle 0 10月 18 01:26 file1</span><br><span class="line">[root@zutuanxue test]# chmod u+s file1</span><br><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">-rwsr-xr-x 1 oracle oracle 0 10月 18 01:26 file1</span><br><span class="line">[root@zutuanxue test]# chmod g+s file1</span><br><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">-rwsr-sr-x 1 oracle oracle 0 10月 18 01:26 file1</span><br><span class="line">[root@zutuanxue test]# chmod o+t file1</span><br><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">-rwsr-sr-t 1 oracle oracle 0 10月 18 01:26 file1</span><br></pre></td></tr></table></figure>

<p>或者使用数字</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# chmod u-s,g-s,o-t file1</span><br><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">-rwxr-xr-x 1 oracle oracle 0 10月 18 01:26 file1</span><br><span class="line">[root@zutuanxue test]# chmod 7755 file1</span><br><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">-rwsr-sr-t 1 oracle oracle 0 10月 18 01:26 file1</span><br></pre></td></tr></table></figure>

<h1 id="linux-隐藏权限"><a href="#linux-隐藏权限" class="headerlink" title="linux 隐藏权限"></a>linux 隐藏权限</h1><p> 阅读 (200381) </p>
<p> 分享</p>
<h2 id="隐藏权限的介绍"><a href="#隐藏权限的介绍" class="headerlink" title="隐藏权限的介绍"></a>隐藏权限的介绍</h2><p>有时候你发现即时使用的是root用户也不能修改某个文件，大部分原因是因为使用过chattr命令锁定了该文件，这个命令的作用很大，通过chattr可以提高系统的安全性，但是这个命令并不适合所有的目录，如&#x2F;dev,&#x2F;tmp,&#x2F;var。与我们前面看到的chmod这些命令修改权限不同的是chattr修改的是更底层的属性，这里面我们所提到的隐藏权限指的就是使用chattr来设置属性</p>
<h2 id="隐藏权限的设置和查看"><a href="#隐藏权限的设置和查看" class="headerlink" title="隐藏权限的设置和查看"></a>隐藏权限的设置和查看</h2><p>chattr的用户与我们之前讲的chmod，chow这些命令相似，都是直接对需要修改的文件进行操作就可以了</p>
<ul>
<li><strong>chattr命令：为文件设置隐藏权限</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令选项</span><br><span class="line">+ 增加权限</span><br><span class="line">- 删除权限</span><br><span class="line">= 赋予什么权限，文件最终权限</span><br><span class="line">A 文件或目录的atime不可被修改</span><br><span class="line">S 硬盘I/O同步选项，功能类似sync。</span><br><span class="line">a 只能向文件中添加数据，而不能删除，多用于服务器日志文件安全，只有root才能设定这个属性。</span><br><span class="line">d 文件不能成为dump程序的备份目标。</span><br><span class="line">i 设定文件不能被删除、改名、设定链接关系，同时不能写入或新增内容。</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>lsattr命令: 查看文件隐藏权限</strong></li>
</ul>
<p>通过案例学习命令用法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">给file1文件添加AaiSd权限</span><br><span class="line">[root@zutuanxue test]# chattr +AaiSd file1</span><br><span class="line"></span><br><span class="line">查看文件file1隐藏权限</span><br><span class="line">[root@zutuanxue test]# lsattr file1 </span><br><span class="line">--S-iadA---------- file1</span><br><span class="line"></span><br><span class="line">设置删除file1文件隐藏权限</span><br><span class="line">- 可以使用-号  </span><br><span class="line">- 可以使用=为空设置</span><br><span class="line">[root@zutuanxue test]# chattr = file1</span><br><span class="line">[root@zutuanxue test]# lsattr file1 </span><br><span class="line">------------------ file1</span><br></pre></td></tr></table></figure>

<p>通过上面的例子可以看到查看的时候使用的是lsattr，chattr还有很多参数，各位可以在man手册中获取到帮助，另外有些参数的使用是有局限性的。</p>
<h1 id="linux-acl权限"><a href="#linux-acl权限" class="headerlink" title="linux acl权限"></a>linux acl权限</h1><p> 阅读 (341916) </p>
<p> 分享</p>
<p>linux的权限非常重要，我们之前所说的几种权限中，但是并不能只针对一个用户或者一个组进行单独设置，而ACL权限可以帮助我们实现这个功能，比如说有一个文件的所有者和所有者组都是a，这个文件的权限是660，我可以让b这个用户可以对文件进行读写的操作，而b这个用户并不属于a组的成员。那我们来看下如何使用</p>
<h2 id="ACL权限的设置和查看"><a href="#ACL权限的设置和查看" class="headerlink" title="ACL权限的设置和查看"></a>ACL权限的设置和查看</h2><p>如果要使用acl权限，首先要确定你的文件系统支持acl权限,如果再Default mount options字段出现acl字样就意味着你的文件系统支持acl，不过在CentOS8中默认是都支持的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# tune2fs -l /dev/sda1</span><br><span class="line">tune2fs 1.44.3 (10-July-2018)</span><br><span class="line">Filesystem volume name:   &lt;none&gt;</span><br><span class="line">Last mounted on:          /boot</span><br><span class="line">Filesystem UUID:          be03eaec-6474-42ea-8f79-06e7198f5155</span><br><span class="line">Filesystem magic number:  0xEF53</span><br><span class="line">Filesystem revision #:    1 (dynamic)</span><br><span class="line">Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent 64bit flex_bg sparse_super large_file huge_file dir_nlink extra_isize metadata_csum</span><br><span class="line">Filesystem flags:         signed_directory_hash </span><br><span class="line">Default mount options:    user_xattr acl</span><br><span class="line">Filesystem state:         clean</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br></pre></td></tr></table></figure>

<p>配置acl权限我们需要使用两个命令一个是setfacl用来设置acl权限，另一个是getfacl用来查看acl权限</p>
<ul>
<li><strong>setfacl命令：设置文件或文件夹的ACL权限</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令选项：</span><br><span class="line">-m ：设置acl</span><br><span class="line">-x ：删除指定的acl</span><br><span class="line">-b ：删除所有的acl</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>getfacl命令：用来查看文件的acl权限</strong><br>现在我们来看下如何设置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# ls</span><br><span class="line">file  file1</span><br><span class="line">[root@zutuanxue test]# ll file1</span><br><span class="line">-rw-r--r-- 1 root root 0 10月 18 02:48 file1</span><br><span class="line">[root@zutuanxue test]# setfacl -m u:oracle:rw file1	为指定的用户配置一个rw的权限</span><br><span class="line">[root@zutuanxue test]# setfacl -m u::rwx file1		如果没有指定用户则默认是为该文件的所有者设置</span><br><span class="line">[root@zutuanxue test]# ll file1</span><br><span class="line">-rwxrw-r--+ 1 root root 0 10月 18 02:48 file1	所有者权限变成的rwx而且后面多了一个+号</span><br></pre></td></tr></table></figure>

<p>你会发现使用ll（等同于ls -l）命令查看时会发现多了一个+号，这只是提醒我们此文件被设置了acl权限，但是具体是什么样的，我们还需要使用getfacl来查看</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# getfacl file1</span><br><span class="line"># file: file1			文件名</span><br><span class="line"># owner: root			所有者</span><br><span class="line"># group: root			所有者组</span><br><span class="line">user::rwx				user：后面是空的，代表的是所有者的权限</span><br><span class="line">user:oracle:rw-			我们之前给额外用户设置的权限</span><br><span class="line">group::r--				所有者组的权限</span><br><span class="line">mask::rw-				默认的有效权限</span><br><span class="line">other::r--				其他人的权限</span><br></pre></td></tr></table></figure>

<p>以上是我们针对一个额外的用户设置的权限，同理可以设置针对组和其他人的acl权限</p>
<p><strong>为不同用户或组设置不同权限</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# setfacl -m g:oracle:rw file1</span><br><span class="line">[root@zutuanxue test]# setfacl -m o:rw file1</span><br><span class="line">[root@zutuanxue test]# getfacl file1</span><br><span class="line"># file: file1</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rwx</span><br><span class="line">user:oracle:rw-</span><br><span class="line">group::r--</span><br><span class="line">group:oracle:rw-</span><br><span class="line">mask::rw-</span><br><span class="line">other::rw-</span><br></pre></td></tr></table></figure>

<p><strong>删除指定的acl</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# setfacl -x u:oracle file1		删除用户acl</span><br><span class="line">[root@zutuanxue test]# getfacl file1</span><br><span class="line"># file: file1</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rwx</span><br><span class="line">group::r--</span><br><span class="line">group:oracle:rw-</span><br><span class="line">mask::rw-</span><br><span class="line">other::rw-</span><br><span class="line">[root@zutuanxue test]# setfacl -x g:oracle file1		删除组acl</span><br><span class="line">[root@zutuanxue test]# getfacl file1</span><br><span class="line"># file: file1</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rwx</span><br><span class="line">group::r--</span><br><span class="line">mask::r--</span><br><span class="line">other::rw-</span><br><span class="line">[root@zutuanxue test]# chmod o=r file1				删除其他人直接使用chmod就可以</span><br><span class="line">[root@zutuanxue test]# ll file1</span><br><span class="line">-rw-r--r-- 1 root root 0 10月 18 04:21 file1</span><br><span class="line">[root@zutuanxue test]# getfacl file1</span><br><span class="line"># file: file1</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rw-</span><br><span class="line">group::r--</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure>

<p><strong>删除所有acl</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# setfacl -m u:oracle:rw,g:oracle:rw,o:rwx file1</span><br><span class="line">[root@zutuanxue test]# getfacl file1</span><br><span class="line"># file: file1</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rw-</span><br><span class="line">user:oracle:rw-</span><br><span class="line">group::r--</span><br><span class="line">group:oracle:rw-</span><br><span class="line">mask::rw-</span><br><span class="line">other::rwx</span><br><span class="line"></span><br><span class="line">[root@zutuanxue test]# setfacl -b file1</span><br><span class="line">[root@zutuanxue test]# getfacl file1</span><br><span class="line"># file: file1</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rw-</span><br><span class="line">group::r--</span><br><span class="line">other::rwx</span><br></pre></td></tr></table></figure>

<p>你没看错，权限在指定的时候是可以指定多个的，我们之前提到的chmod也可以这样使用，好了权限管理我们就说这么多</p>
<h1 id="linux文件压缩与解压"><a href="#linux文件压缩与解压" class="headerlink" title="linux文件压缩与解压"></a>linux文件压缩与解压</h1><p> 阅读 (452217) </p>
<p> 分享</p>
<h2 id="压缩工具的介绍"><a href="#压缩工具的介绍" class="headerlink" title="压缩工具的介绍"></a>压缩工具的介绍</h2><p>说到文件管理，就不得不说到tar，因为tar可以压缩和解压缩linux文件，所以要先了解一下压缩和解压缩。</p>
<p>由于以前的计算机磁盘容量比较小，业内人士绞尽脑汁，终于开发出了一个能帮助用户节省磁盘的工具，就是压缩工具，我们知道计算机在存储数据的时候都是使用bytes来计算的，但是实际上1byte&#x3D;8bits，在日常使用中并不是所有的数据都能把这个1byte用完，有的可能用了三个bits，有的可能用了四个bits，而他们的实际占用空间是2bytes&#x3D;16bits，剩余的空间就浪费了，压缩工具就是通过算法，将占用三个bits的数据和占用四个bits的数据放在一个byte里，这样我们就能节省出来1byte，这种空间的节省，当你在压缩一个包含了很多文本文件的目录时是非常明显的。其实就像没有人知道早高峰的公交车里有多少人一样，一个人理论上占用的公交车内的空间，跟实际占用的空间，往往有很大差别，因为挤挤总能上去的。</p>
<p>压缩工具诞生的初衷和原理我们说完了，那现在它就没用了么？依然有用，只不过现在我们使用压缩工具的目的，更多的是便于存储和传输，在linux系统中压缩工具有很多，不同的工具压缩后的后缀名和大小都有差异，从远古时代说起，linux都出现了以下这些格式的压缩文件</p>
<p>*.Z 使用compress压缩的文件</p>
<p>*.zip 使用zip压缩的文件</p>
<p>*.gz 使用gzip压缩</p>
<p>*.bz2 使用bzip2压缩</p>
<p>*.xz 使用xz压缩</p>
<p>*.tar 使用tar工具打包，没有压缩</p>
<p>*.tar.gz 使用tar工具打包，经过gzip压缩</p>
<p>*.tar.bz2 使用tar工具打包，经过bzip2压缩</p>
<p>*.tar.xz 使用tar工具打包，经过xz压缩</p>
<p>其中，compress已经过时了，因为太老，个别版本的linux已经不支持了，linux下的压缩工具还是以gzip和bzip2以及后加入的xz作为主力，但是由于这些工具，最早不能压缩目录，只能针对单一文件进行压缩，所以在日常使用中，他们都是配合着tar这个打包工具，由tar把目录中的很多文件打包成一个文件，再经由对应的工具进行压缩，所以我们会看上面的那些tar.*的压缩包。好了我们先来学习下这些压缩工具如何使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">压缩文件的好处有如下几点：</span><br><span class="line"></span><br><span class="line">- 文件更小，便于网络传输，效率高；</span><br><span class="line">- 避免杂乱，可以减少文件个数，多个文件一起压缩；</span><br><span class="line">- 有些文件不能直接传输，比如安装程序，压缩后就可以传输了</span><br></pre></td></tr></table></figure>

<h3 id="压缩工具的使用"><a href="#压缩工具的使用" class="headerlink" title="压缩工具的使用"></a>压缩工具的使用</h3><ul>
<li>gzip</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# gzip -h</span><br><span class="line">Usage: gzip [OPTION]... [FILE]...</span><br><span class="line">  -c	保留源文件	</span><br><span class="line">  -d	解压缩</span><br><span class="line">  -h	显示帮助</span><br><span class="line">  -t	检查压缩文件的数据一致性，用来确定压缩文件是否有错误</span><br><span class="line">  -v	显示压缩包的相关信息，包括压缩比等</span><br><span class="line">  -V	显示版本号</span><br><span class="line">  -1	压缩最快，压缩比低</span><br><span class="line">  -9	压缩最慢，压缩比高</span><br><span class="line">例子：</span><br><span class="line">[root@zutuanxue test]# pwd</span><br><span class="line">/root/test</span><br><span class="line">[root@zutuanxue test]# cp /etc/services ./</span><br><span class="line">[root@zutuanxue test]# gzip -v services </span><br><span class="line">services:	 79.4% -- replaced with services.gz</span><br><span class="line">[root@zutuanxue test]# ll /etc/services services.gz </span><br><span class="line">-rw-r--r--. 1 root root 692241 Sep 10  2018 /etc/services</span><br><span class="line">-rw-r--r--  1 root root 142549 Oct 20 23:32 services.gz</span><br><span class="line">[root@zutuanxue test]# zcat services.gz </span><br><span class="line">由于service文件本来就是一个文本文档，所以还可以使用zmore，zless去查看内容</span><br><span class="line">[root@zutuanxue test]# ls</span><br><span class="line">services.gz</span><br><span class="line">[root@zutuanxue test]# gzip -d services.gz </span><br><span class="line">[root@zutuanxue test]# ls</span><br><span class="line">services</span><br><span class="line">我们可以看到，gzip这个工具压缩文件和源文件默认只保留一个，所以还可以</span><br><span class="line">[root@zutuanxue test]# gzip -1 -c services &gt; test.gz</span><br><span class="line">[root@zutuanxue test]# ls</span><br><span class="line">services  test.gz</span><br><span class="line">[root@zutuanxue test]# zgrep -n ssh test.gz </span><br><span class="line">44:ssh             22/tcp                          # The Secure Shell (SSH) Protocol</span><br><span class="line">45:ssh             22/udp                          # The Secure Shell (SSH) Protocol</span><br><span class="line">你也可以使用zgrep找出指定的关键字在压缩文件的那几行</span><br></pre></td></tr></table></figure>

<ul>
<li>bzip2</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# bzip2 -h</span><br><span class="line">   -h		帮助</span><br><span class="line">   -d		解压</span><br><span class="line">   -z 		压缩 默认值</span><br><span class="line">   -k		保留源文件</span><br><span class="line">   -v		查看版本信息</span><br><span class="line">   -1 ..-9   同gzip相同</span><br><span class="line">   bzip2的使用与gzip相同，两种工具的区别就是压缩算法不同，bzip2的压缩比更好一些，bzip的包查看的时候使用的是bzcat,bzmore,bzless,bzgrep同gzip用法相同</span><br><span class="line">[root@zutuanxue test]# gzip -c services &gt; services.gz</span><br><span class="line">[root@zutuanxue test]# bzip2 -k services</span><br><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 948</span><br><span class="line">-rw-r--r-- 1 root root 692241 10月 21 01:31 services</span><br><span class="line">-rw-r--r-- 1 root root 129788 10月 21 01:31 services.bz2</span><br><span class="line">-rw-r--r-- 1 root root 142549 10月 21 01:32 services.gz</span><br></pre></td></tr></table></figure>

<ul>
<li>xz<br>虽然bzip2的压缩效果相对比gzip已经提升很多，但是技术是永无止境的，于是出现了xz，它的用法跟gzip和bzip2一样</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# xz -h</span><br><span class="line">  -d				解压缩</span><br><span class="line">  -t				检查压缩文件的完整性</span><br><span class="line">  -l				查看压缩文件的相关信息</span><br><span class="line">  -k				保留源文件</span><br><span class="line">  -c				将信息输出到显示器上</span><br><span class="line">  -0 ... -9			指定压缩级别</span><br><span class="line">  -h				显示帮助</span><br><span class="line">[root@zutuanxue test]# xz -k services</span><br><span class="line">[root@zutuanxue test]# ll</span><br><span class="line">总用量 1052</span><br><span class="line">-rw-r--r-- 1 root root 692241 10月 21 01:31 services</span><br><span class="line">-rw-r--r-- 1 root root 129788 10月 21 01:31 services.bz2</span><br><span class="line">-rw-r--r-- 1 root root 142549 10月 21 01:32 services.gz</span><br><span class="line">-rw-r--r-- 1 root root 105872 10月 21 01:31 services.xz</span><br><span class="line">可以看到，在使用默认压缩比压缩的情况下，xz压缩完的文件体积更小</span><br><span class="line">[root@zutuanxue test]# xz -l services.xz		查看相关信息</span><br><span class="line">Strms  Blocks   Compressed Uncompressed  Ratio  Check   Filename</span><br><span class="line">    1       1    103.4 KiB    676.0 KiB  0.153  CRC64   services.xz</span><br><span class="line">[root@zutuanxue test]# xzcat services.xz		查看文件内容</span><br><span class="line">[root@zutuanxue test]# xz -d services.xz		解压缩</span><br><span class="line"></span><br><span class="line">虽然xz的压缩算法更好，但是相对来说时间也比较长</span><br><span class="line">[root@zutuanxue test]# time gzip -c services &gt; services.gz</span><br><span class="line">real	0m0.023s</span><br><span class="line">user	0m0.020s</span><br><span class="line">sys	0m0.003s</span><br><span class="line">[root@zutuanxue test]# time bzip2 -k services</span><br><span class="line">real	0m0.047s</span><br><span class="line">user	0m0.043s</span><br><span class="line">sys	0m0.003s</span><br><span class="line">[root@zutuanxue test]# time xz -k services</span><br><span class="line">real	0m0.264s</span><br><span class="line">user	0m0.258s</span><br><span class="line">sys	0m0.003s</span><br><span class="line">我们可以使用time这个命令去对比一下时间gzip，bzip2，xz的时间分别是0.023,0.047,0.264，可以看到xz所使用的时间是比较长的，而这个时间会跟文件体积成正比，所以这三种压缩方式大家在使用的时候也要把时间成本考虑在内，除非你很富有。</span><br></pre></td></tr></table></figure>

<ul>
<li>tar<br>前面我们提到了，大多数压缩工具只能针对单一文件进行操作，如果你要压缩目录的话就会很麻烦，这时候我们可以使用tar这个打包工具，将目录内的多个文件打包成一个文件，再进行压缩。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue test]# tar --help</span><br><span class="line">用法: tar [选项...] [FILE]...</span><br><span class="line">  -C		解压到指定目录</span><br><span class="line">  -c		建立tar包</span><br><span class="line">  -t		查看tar包内的文件</span><br><span class="line">  -x		解压tar包</span><br><span class="line">  -p		不修改文件属性</span><br><span class="line">  -f		指定文件名称</span><br><span class="line">  -j		使用bzip2算法</span><br><span class="line">  -J		使用xz算法</span><br><span class="line">  -z		使用gzip算法</span><br><span class="line">  -P		允许压缩路径中包含有&quot;/&quot;</span><br><span class="line">  -v		显示详细信息</span><br><span class="line">  -?, --help 查看帮助</span><br><span class="line">  --exclude	压缩过程中排除指定的文件</span><br><span class="line">例：</span><br><span class="line">压缩</span><br><span class="line">[root@zutuanxue test]# tar -czf etc.tar.gz etc</span><br><span class="line">[root@zutuanxue test]# ls</span><br><span class="line">etc  etc.tar.gz</span><br><span class="line">解压缩</span><br><span class="line">[root@zutuanxue test]# ls</span><br><span class="line">etc.tar.gz</span><br><span class="line">[root@zutuanxue test]# tar -xf etc.tar.gz </span><br><span class="line">[root@zutuanxue test]# ls</span><br><span class="line">etc  etc.tar.gz</span><br><span class="line">查看压缩包内容</span><br><span class="line">[root@zutuanxue test]# tar -tf etc.tar.gz</span><br><span class="line">etc/</span><br><span class="line">etc/libreport/</span><br><span class="line">etc/libreport/workflows.d/</span><br><span class="line">etc/libreport/workflows.d/report_uploader.conf</span><br><span class="line">etc/libreport/workflows.d/anaconda_event.conf</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">查询压缩包里面的文件信息</span><br><span class="line">[root@zutuanxue test]# tar -tvf etc.tar.gz |more</span><br><span class="line">drwxr-xr-x root/root         0 2019-10-21 04:35 etc/</span><br><span class="line">drwxr-xr-x root/root         0 2019-10-21 04:35 etc/libreport/</span><br><span class="line">drwxr-xr-x root/root         0 2019-10-21 04:35 etc/libreport/workflows.d/</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">解压压缩包指定的文件</span><br><span class="line">[root@zutuanxue test]# tar -tvf etc.tar.gz | grep shadow</span><br><span class="line">---------- root/root       792 2019-10-21 04:35 etc/gshadow</span><br><span class="line">---------- root/root      1506 2019-10-21 04:35 etc/shadow</span><br><span class="line">---------- root/root       781 2019-10-21 04:35 etc/gshadow-</span><br><span class="line">---------- root/root      1374 2019-10-21 04:35 etc/shadow-</span><br><span class="line">-rw-r--r-- root/root       214 2019-10-21 04:35 etc/pam.d/sssd-shadowutils</span><br><span class="line">[root@zutuanxue test]# tar -xf etc.tar.gz etc/shadow</span><br><span class="line">[root@zutuanxue test]# ls</span><br><span class="line">etc  etc.tar.gz</span><br><span class="line">[root@zutuanxue test]# ls etc</span><br><span class="line">shadow</span><br></pre></td></tr></table></figure>

<p>linux下文件与文件夹的压缩与解压的基本使用我们就介绍到这里，那么你学会linux下对文件或文件夹压缩和解压缩了吗！</p>
<h1 id="linux软件包管理"><a href="#linux软件包管理" class="headerlink" title="linux软件包管理"></a>linux软件包管理</h1><p> 阅读 (461969) </p>
<p> 分享</p>
<p>在linux系统中我们经常涉及到软件包的删除和添加，那一起来看下在linux系统中软件包的管理方式都有哪些</p>
<ul>
<li>rpm软件</li>
<li>yum软件仓库</li>
<li>源码软件</li>
</ul>
<h2 id="一、rpm软件包"><a href="#一、rpm软件包" class="headerlink" title="一、rpm软件包"></a>一、rpm软件包</h2><h3 id="rpm的介绍"><a href="#rpm的介绍" class="headerlink" title="rpm的介绍"></a>rpm的介绍</h3><p>前面的课程我们提到过源码包安装需要解决系统环境、权限等等，这些对于初学者而言都是噩梦一般的存在，所以linux厂商推出了一种类似windows系统中的安装方式，有开发者直接在已知的系统中编译好，使用者可以直接下载并进行安装，升级，卸载等操作。在linux中能够提供这些功能的软件有两种，rpm和dpkg，而在CentOS中使用的是RPM</p>
<p>rpm最早是由redhat开发出来，由于很好用，所以很多发行版也利用rpm来进行软件包的管理。RPM全名RedHat Package Manager，最大的特点就是把需要安装的软件提前编译，打包，然后在rpm包里面存放了用以记录软件依赖关系的相关数据，当用户安装时，优先查看这些数据，如果系统满足数据要求就安装软件包，否则不能安装，安装完成后，将软件包相关信息记录到rpm自己的数据库中，便于查询和卸载等。所以说rpm的优点是方便安装，卸载，查询，缺点就是只能在指定的操作系统上使用，所以不同厂商的rpm包，甚至同一厂商不同版本操作系统的rpm包都不通用。</p>
<p><strong>rpm包的命名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dhcp-server-	4.3.6		-30			.el8		.x86_64		.rpm</span><br><span class="line">软件名称		版本		编译次数	         适用的系统	     适用的平台	   后缀名</span><br><span class="line"></span><br><span class="line">软件名	 就是软件包的名称</span><br><span class="line">版本	 每次更新版本号都会改变，用来帮助用户判断软件包新旧的</span><br><span class="line">编译次数	 也是帮助用户判断软件包新旧的</span><br><span class="line">适用的系统 在哪个系统上可以安装，CentOS和rhel的多数软件包都是通用的</span><br><span class="line">适用的平台 指的是硬件平台，比如如果你是32位的CPU就无法安装这个软件包</span><br></pre></td></tr></table></figure>

<h3 id="rpm的使用"><a href="#rpm的使用" class="headerlink" title="rpm的使用"></a>rpm的使用</h3><p>rpm包的相关文件一般都会放在对应的目录中，比如rpm包安装后，配置文件会放在&#x2F;etc下，执行文件会放在&#x2F;usr&#x2F;bin下，链接库文件会放在&#x2F;usr&#x2F;lib下，帮助与说明文档会放在&#x2F;usr&#x2F;share&#x2F;man和&#x2F;usr&#x2F;share&#x2F;doc目录下</p>
<p><strong>安装</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue Packages]# rpm -ivh dhcp-server-4.3.6-30.el8.x86_64.rpm </span><br><span class="line">-i					安装</span><br><span class="line">-v					显示详细信息</span><br><span class="line">-h					显示安装进度</span><br><span class="line">-e					卸载</span><br><span class="line">-U					升级，如果系统中有低版本的就会升级，如果系统没有安装相应的包，则安装</span><br><span class="line">-F					有条件的升级，会检测用户指定的软件包是否已安装到linux中</span><br><span class="line">--nodeps			忽略软件包之间的依赖关系</span><br><span class="line">--replacefiles		覆盖文件</span><br><span class="line">--replacepkgs		修复</span><br><span class="line">--force				强制</span><br><span class="line">--test				测试</span><br><span class="line">-q					查询指定的软件包是否安装</span><br><span class="line">-qi					查看指定的软件包的信息，包括开发商，版本，说明</span><br><span class="line">-ql					查看指定软件包中所包含的文件列表</span><br><span class="line">-qc					查看指定软件包的配置文件</span><br><span class="line">-qa					查看本机安装的所有包</span><br><span class="line">-qf					查看一个文件归属于哪个已安装的软件包</span><br></pre></td></tr></table></figure>

<p>rpm的内容我们就介绍到这里，接下来我们看下一个yum</p>
<h2 id="二、yum软件仓库"><a href="#二、yum软件仓库" class="headerlink" title="二、yum软件仓库"></a>二、yum软件仓库</h2><h3 id="yum的介绍"><a href="#yum的介绍" class="headerlink" title="yum的介绍"></a>yum的介绍</h3><p>YUM（<em>Yellow dog Updater, Modified</em>）是一个基于rpm却更胜于rpm的管理工具，让你可以更轻松的管理Red Hat Enterprise Linux系统中的软件。你可以使用YUM来安装或卸载软件、也可以利用YUM来更新你的系统，更可以利用YUM来搜索一个尚未安装的软件。不管是安装、更新或者删除，YUM都会自动的帮你解决软件间的依赖性问题。通过YUM会比单纯使用rpm来得更加方便。</p>
<p>YUM包含下列几项组件：</p>
<ul>
<li>YUM下载源：如果把所有RPM文件放在某一个目录中，这个目录就可称为“YUM下载源（<em>YUM Repository</em>）”。你也可以把YUM下载源，通过HTTP、FTP等方式分享给其他计算机使用；当然，你也可以直接使用别人建好的YUM下载源来取得需安装的软件。</li>
<li>YUM工具：YUM提供了一个名为yum的命令，你可以使用yum来使用YUM提供的众多功能。</li>
<li>YUM插件：YUM还允许第三方厂商（<em>3rd Party</em>）开发YUM的插件（<em>Plug-in</em>），让用户可以任意的扩充YUM的功能，比如说有的插件可以帮助选择最快的yum源</li>
<li>YUM缓存：YUM运行时，会从YUM下载源获得软件信息与文件，并且暂存于本机的硬盘上。这个暂存的目录，称为“YUM缓存（<em>YUM cache</em>）”。缓存目录为&#x2F;var&#x2F;cache&#x2F;yum</li>
</ul>
<h3 id="yum的使用"><a href="#yum的使用" class="headerlink" title="yum的使用"></a>yum的使用</h3><p>yum源的配置</p>
<p> 由于yum有下载源这个东西，所以我们在使用yum之前需要告诉它去什么地方获取这些软件包，也就是说需要先配置一个yum源</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cd /etc/yum.repos.d/</span><br><span class="line">[root@zutuanxue yum.repos.d]# ls</span><br><span class="line">CentOS-AppStream.repo   CentOS-CR.repo    CentOS-fasttrack.repo   CentOS-Sources.repo</span><br><span class="line">CentOS-Base.repo    CentOS-Debuginfo.repo  CentOS-Media.repo       CentOS-Vault.repo</span><br><span class="line">CentOS-centosplus.repo  CentOS-Extras.repo     CentOS-PowerTools.repo</span><br><span class="line">在CentOS8中yum的下载源配置文件统一都放到/etc/yum.repos.d/目录下，在这个目录中有些默认的下载源</span><br><span class="line">我不使用这些自带的下载源，我想配置一个自己的下载源，让yum使用光盘镜像里的软件包,为了避免干扰，我们把这些自带的下载源都放到一个目录里</span><br><span class="line">[root@zutuanxue yum.repos.d]# mkdir repos</span><br><span class="line">[root@zutuanxue yum.repos.d]# ls</span><br><span class="line">CentOS-AppStream.repo   CentOS-CR.repo         CentOS-fasttrack.repo   CentOS-Sources.repo</span><br><span class="line">CentOS-Base.repo        CentOS-Debuginfo.repo  CentOS-Media.repo       CentOS-Vault.repo</span><br><span class="line">CentOS-centosplus.repo  CentOS-Extras.repo     CentOS-PowerTools.repo  repos</span><br><span class="line">[root@zutuanxue yum.repos.d]# mv *.repo repos</span><br><span class="line">[root@zutuanxue yum.repos.d]# clear</span><br><span class="line">[root@zutuanxue yum.repos.d]# ls</span><br><span class="line">repos</span><br><span class="line">然后使用vim命令建立自己的下载源配置文件</span><br><span class="line">[root@zutuanxue repos]# vim server.repo</span><br><span class="line">[server-BaseOS]			yum源的名称</span><br><span class="line">name=server-BaseOS		完整名称</span><br><span class="line">enabled=1				是否启用</span><br><span class="line">gpgcheck=0				是否检查rpm包的数字签名</span><br><span class="line">baseurl=file:///mnt/BaseOS	下载源地址</span><br><span class="line">[server-AppStream]</span><br><span class="line">name=server-AppStream</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">baseurl=file:///mnt/AppStream</span><br><span class="line">[root@zutuanxue ~]# mount /dev/cdrom  /mnt/		将光盘挂载到指定位置</span><br><span class="line">由于CentOS8的软件包存放在光盘根目录的BaseOS和AppStream目录中，所以这里面为了保证需要的软件包能正确安装我们配置了两个yum源，这两部分内容你可以放到一个文件里，也可以分别放在两个文件中</span><br></pre></td></tr></table></figure>

<p>以上就是yum源配置文件，我们接下来看下如何建立下载源目录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">将下载好的rpm软件包存放到一个指定的目录中</span><br><span class="line">[root@zutuanxue ~]# cp /mnt/AppStream/Packages/* myrepo/</span><br><span class="line"></span><br><span class="line">从光盘镜像中安装createrepo工具</span><br><span class="line">[root@zutuanxue ~]# yum install createrepo</span><br><span class="line"></span><br><span class="line">利用createrepo工具生成软件包之间的依赖关系数据文件</span><br><span class="line">[root@zutuanxue ~]# createrepo myself/</span><br><span class="line"></span><br><span class="line">建立针对此目录的下载源配置文件</span><br><span class="line">[root@zutuanxue ~]# vim /etc/yum.repos.d/myrepo.repo</span><br><span class="line">[myself]</span><br><span class="line">name=packages</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">baseurl=file:///root/myself</span><br><span class="line"></span><br><span class="line">从新的下载源安装软件包</span><br><span class="line">[root@zutuanxue ~]# yum install httpd</span><br></pre></td></tr></table></figure>

<p>yum插件安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# yum install 插件名称</span><br><span class="line">插件配置文件存放位置/etc/yum/pluginconf.d/xxx.conf</span><br><span class="line"></span><br><span class="line">插件的启用和停用</span><br><span class="line">修改/etc/yum/pluginconf.d/xxx.conf文件中的enabled字段 1=启用 0=停用</span><br><span class="line">[root@zutuanxue ~]# yum [OPTIONS...] COMMAND [ARGVS...]</span><br><span class="line">-y							如果遇到问题，代替回答yes</span><br><span class="line">--installroot=/path			指定软件包安装的根目录</span><br></pre></td></tr></table></figure>

<p>清除yum缓存</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# yum clean all</span><br><span class="line">如果有些时候你发现yum运行不太正常，这可能是yum缓存数据错误导致的，所以你需要将yum的缓存清除</span><br><span class="line">查看软件包</span><br><span class="line">[root@zutuanxue ~]# yum list</span><br><span class="line"></span><br><span class="line">查看有哪些可用组</span><br><span class="line">[root@zutuanxue ~]# yum grouplist</span><br><span class="line">     </span><br><span class="line">查看dhcp-server这个包的信息   </span><br><span class="line">[root@zutuanxue ~]# yum info dhcp-server			</span><br><span class="line"></span><br><span class="line">搜索dhcp-server这个软件包</span><br><span class="line">[root@zutuanxue ~]# yum search dhcp-server		</span><br></pre></td></tr></table></figure>

<p>yum安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">安装dhcp-server软件包</span><br><span class="line">[root@zutuanxue ~]# yum install dhcp-server -y		</span><br><span class="line"></span><br><span class="line">安装一组软件包</span><br><span class="line">[root@zutuanxue ~]# yum groupinstall &#x27;系统工具&#x27; -y	              </span><br></pre></td></tr></table></figure>

<p>卸载软件包</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">删除一个软件包</span><br><span class="line">[root@zutuanxue ~]# yum remove dhcp-server -y			</span><br><span class="line"></span><br><span class="line">删除一组软件包</span><br><span class="line">[root@zutuanxue ~]# yum groupremove &#x27;系统工具&#x27; -y		</span><br></pre></td></tr></table></figure>

<p>使用epel源</p>
<p>EPEL是一个自由开源的附加软件包仓库，可用于 CentOS 和 RHEL 服务器。顾名思义，EPEL 仓库提供了额外的软件包，这些软件在 CentOS 8 和 RHEL 8 的默认软件包仓库中不可用。</p>
<p>安装epel源</p>
<p>epel地址：<a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm">https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm</span><br></pre></td></tr></table></figure>

<h2 id="三、源码包的安装"><a href="#三、源码包的安装" class="headerlink" title="三、源码包的安装"></a>三、源码包的安装</h2><p>在linux系统中，很多新版本的软件包的更新都会优先提供tar包版本的，然后各linux厂商拿到这个tar包之后再给自己的操作系统提供官方的rpm或者dpkg类型的软件包，而这种tar工具打包的软件包我们一般称之为源码包，在这些源码包中一般包含有，程序源代码文件，配置文件（configure），安装使用说明（INSTALL,HOWTO,README）</p>
<p>那这种tar包源码包如何安装呢？简单的流程就是</p>
<ul>
<li>获取软件包</li>
<li>解压文件</li>
<li>检查当前系统是否满足软件包安装需求</li>
<li>使用gcc进行编译，生成主要的二进制文件</li>
<li>将二进制文件安装到主机</li>
</ul>
<p>这些步骤看起来很简单，但是在使用过程中有很多问题需要解决，比如说需要解决系统环境，权限问题等等，不同类型的软件在安装方法上会有差异，但是整体步骤就是我们上面所提到的。接下来我们通过一个案例来学习源码安装软件。</p>
<p><strong>案例：源码安装一个nginx软件</strong></p>
<h3 id="获取软件包"><a href="#获取软件包" class="headerlink" title="获取软件包"></a>获取软件包</h3><p>软件包获取的方式有很多，最常见的就是拷贝或者下载这两种方式，拷贝咱们就不说了，因为用的太多了；接下来我给大家说一下如何从网络下载软件包。</p>
<ul>
<li>wget命令：文本界面的下载命令</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# wget http://nginx.org/download/nginx-1.19.3.tar.gz</span><br><span class="line">--2020-10-11 15:59:45--  http://nginx.org/download/nginx-1.19.3.tar.gz</span><br><span class="line">正在解析主机 nginx.org (nginx.org)... 3.125.197.172, 52.58.199.22, 2a05:d014:edb:5704::6, ...</span><br><span class="line">正在连接 nginx.org (nginx.org)|3.125.197.172|:80... 已连接。</span><br><span class="line">已发出 HTTP 请求，正在等待回应... 200 OK</span><br><span class="line">长度：1052581 (1.0M) [application/octet-stream]</span><br><span class="line">正在保存至: “nginx-1.19.3.tar.gz”</span><br><span class="line"></span><br><span class="line">nginx-1.19.3.tar.gz 100%[===================&gt;]   1.00M  21.4KB/s  用时 43s     </span><br><span class="line"></span><br><span class="line">2020-10-11 16:00:28 (24.1 KB/s) - 已保存 “nginx-1.19.3.tar.gz” [1052581/1052581])</span><br></pre></td></tr></table></figure>

<ul>
<li>解压软件包</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# tar xf nginx-1.19.3.tar.gz</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# ls</span><br><span class="line">公共  视频  文档  音乐  anaconda-ks.cfg       nginx-1.19.3</span><br><span class="line">模板  图片  下载  桌面  initial-setup-ks.cfg  nginx-1.19.3.tar.gz</span><br></pre></td></tr></table></figure>

<ul>
<li>configure命令：检查当前系统是否满足软件包安装需求,这步的主要目的：<br>– 检查环境 是否 满足安装条件 依赖解决<br>– 指定安装方式 配置文件 命令文件 各种文件放哪里 开启模块功能【内置模块 三方模块】<br>– 指定软件安装在那里</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- 安装GCC编译软件 以及nginx依赖，有人问我为啥要安装pcre-devel zlib-devel这两个包，因为你不了解，如果你自己安装过一次就知道在检查当前系统的时候会报错，说没有这两个软件，这里我就直接装上了。大家学习的时候可以试试，是不是我说的这样。</span><br><span class="line">[root@zutuanxue ~]# yum -y install gcc pcre-devel zlib-devel</span><br><span class="line"></span><br><span class="line">- 检查系统是否满足安装需求</span><br><span class="line">[root@zutuanxue ~]# cd nginx-1.19.3/</span><br><span class="line">[root@zutuanxue nginx-1.19.3]# ./configure --prefix=/usr/local/nginx</span><br><span class="line">checking for OS</span><br><span class="line"> + Linux 4.18.0-193.el8.x86_64 x86_64</span><br><span class="line">checking for C compiler ... found</span><br><span class="line"> + using GNU C compiler</span><br><span class="line"> + gcc version: 8.3.1 20191121 (Red Hat 8.3.1-5) (GCC) </span><br><span class="line">checking for gcc -pipe switch ... found</span><br><span class="line">checking for -Wl,-E switch ... found</span><br><span class="line">checking for gcc builtin atomic operations ... found</span><br><span class="line">checking for C99 variadic macros ... found</span><br><span class="line">checking for gcc variadic macros ... found</span><br><span class="line"></span><br><span class="line">.........此处省略10000个字</span><br><span class="line"></span><br><span class="line">Configuration summary</span><br><span class="line">  + using system PCRE library</span><br><span class="line">  + OpenSSL library is not used</span><br><span class="line">  + using system zlib library</span><br><span class="line"></span><br><span class="line">  nginx path prefix: &quot;/usr/local/nginx&quot;</span><br><span class="line">  nginx binary file: &quot;/usr/local/nginx/sbin/nginx&quot;</span><br><span class="line">  nginx modules path: &quot;/usr/local/nginx/modules&quot;</span><br><span class="line">  nginx configuration prefix: &quot;/usr/local/nginx/conf&quot;</span><br><span class="line">  nginx configuration file: &quot;/usr/local/nginx/conf/nginx.conf&quot;</span><br><span class="line">  nginx pid file: &quot;/usr/local/nginx/logs/nginx.pid&quot;</span><br><span class="line">  nginx error log file: &quot;/usr/local/nginx/logs/error.log&quot;</span><br><span class="line">  nginx http access log file: &quot;/usr/local/nginx/logs/access.log&quot;</span><br><span class="line">  nginx http client request body temporary files: &quot;client_body_temp&quot;</span><br><span class="line">  nginx http proxy temporary files: &quot;proxy_temp&quot;</span><br><span class="line">  nginx http fastcgi temporary files: &quot;fastcgi_temp&quot;</span><br><span class="line">  nginx http uwsgi temporary files: &quot;uwsgi_temp&quot;</span><br><span class="line">  nginx http scgi temporary files: &quot;scgi_temp&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">备注：</span><br><span class="line">/configure --prefix=/usr/local/nginx</span><br><span class="line">--prefix=   指定软件安装到哪个目录</span><br></pre></td></tr></table></figure>

<ul>
<li>make命令：使用gcc进行编译，生成主要的二进制文件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue nginx-1.19.3]# make -j4</span><br><span class="line">make -f objs/Makefile</span><br><span class="line">make[1]: 进入目录“/root/nginx-1.19.3”</span><br><span class="line">cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g  -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs \</span><br><span class="line">	-o objs/src/core/ngx_inet.o \</span><br><span class="line">	src/core/ngx_inet.c</span><br><span class="line">           ...........省略过程</span><br><span class="line"></span><br><span class="line">-ldl -lpthread -lcrypt -lpcre -lz \</span><br><span class="line">-Wl,-E</span><br><span class="line">make[1]: 离开目录“/root/nginx-1.19.3”</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">备注： make -j4</span><br><span class="line">-j 指定几个cpu一起编译    -j4  那就是4个一起干活，默认一个干活，这样速度更快</span><br></pre></td></tr></table></figure>

<ul>
<li>make install 命令将二进制文件安装到主机</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue nginx-1.19.3]# make install</span><br><span class="line">make -f objs/Makefile install</span><br><span class="line">make[1]: 进入目录“/root/nginx-1.19.3”</span><br><span class="line">test -d &#x27;/usr/local/nginx&#x27; || mkdir -p &#x27;/usr/local/nginx&#x27;</span><br><span class="line">test -d &#x27;/usr/local/nginx/sbin&#x27; \</span><br><span class="line">	|| mkdir -p &#x27;/usr/local/nginx/sbin&#x27;</span><br><span class="line">test ! -f &#x27;/usr/local/nginx/sbin/nginx&#x27; \</span><br><span class="line">	|| mv &#x27;/usr/local/nginx/sbin/nginx&#x27; \</span><br><span class="line">		&#x27;/usr/local/nginx/sbin/nginx.old&#x27;</span><br><span class="line">cp objs/nginx &#x27;/usr/local/nginx/sbin/nginx&#x27;</span><br><span class="line">test -d &#x27;/usr/local/nginx/conf&#x27; \</span><br><span class="line">	|| mkdir -p &#x27;/usr/local/nginx/conf&#x27;</span><br><span class="line">cp conf/koi-win &#x27;/usr/local/nginx/conf&#x27;</span><br><span class="line">cp conf/koi-utf &#x27;/usr/local/nginx/conf&#x27;</span><br><span class="line">cp conf/win-utf &#x27;/usr/local/nginx/conf&#x27;</span><br><span class="line">test -f &#x27;/usr/local/nginx/conf/mime.types&#x27; \</span><br><span class="line">	|| cp conf/mime.types &#x27;/usr/local/nginx/conf&#x27;</span><br><span class="line">cp conf/mime.types &#x27;/usr/local/nginx/conf/mime.types.default&#x27;</span><br><span class="line">test -f &#x27;/usr/local/nginx/conf/fastcgi_params&#x27; \</span><br><span class="line">	|| cp conf/fastcgi_params &#x27;/usr/local/nginx/conf&#x27;</span><br><span class="line">cp conf/fastcgi_params \</span><br><span class="line">	&#x27;/usr/local/nginx/conf/fastcgi_params.default&#x27;</span><br><span class="line">test -f &#x27;/usr/local/nginx/conf/fastcgi.conf&#x27; \</span><br><span class="line">	|| cp conf/fastcgi.conf &#x27;/usr/local/nginx/conf&#x27;</span><br><span class="line">cp conf/fastcgi.conf &#x27;/usr/local/nginx/conf/fastcgi.conf.default&#x27;</span><br><span class="line">test -f &#x27;/usr/local/nginx/conf/uwsgi_params&#x27; \</span><br><span class="line">	|| cp conf/uwsgi_params &#x27;/usr/local/nginx/conf&#x27;</span><br><span class="line">cp conf/uwsgi_params \</span><br><span class="line">	&#x27;/usr/local/nginx/conf/uwsgi_params.default&#x27;</span><br><span class="line">test -f &#x27;/usr/local/nginx/conf/scgi_params&#x27; \</span><br><span class="line">	|| cp conf/scgi_params &#x27;/usr/local/nginx/conf&#x27;</span><br><span class="line">cp conf/scgi_params \</span><br><span class="line">	&#x27;/usr/local/nginx/conf/scgi_params.default&#x27;</span><br><span class="line">test -f &#x27;/usr/local/nginx/conf/nginx.conf&#x27; \</span><br><span class="line">	|| cp conf/nginx.conf &#x27;/usr/local/nginx/conf/nginx.conf&#x27;</span><br><span class="line">cp conf/nginx.conf &#x27;/usr/local/nginx/conf/nginx.conf.default&#x27;</span><br><span class="line">test -d &#x27;/usr/local/nginx/logs&#x27; \</span><br><span class="line">	|| mkdir -p &#x27;/usr/local/nginx/logs&#x27;</span><br><span class="line">test -d &#x27;/usr/local/nginx/logs&#x27; \</span><br><span class="line">	|| mkdir -p &#x27;/usr/local/nginx/logs&#x27;</span><br><span class="line">test -d &#x27;/usr/local/nginx/html&#x27; \</span><br><span class="line">	|| cp -R html &#x27;/usr/local/nginx&#x27;</span><br><span class="line">test -d &#x27;/usr/local/nginx/logs&#x27; \</span><br><span class="line">	|| mkdir -p &#x27;/usr/local/nginx/logs&#x27;</span><br><span class="line">make[1]: 离开目录“/root/nginx-1.19.3”</span><br></pre></td></tr></table></figure>

<p>到此我们就把nginx安装到&#x2F;usr&#x2F;local目录下了,可以使用ls命令看看有没有东西</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue nginx-1.19.3]# ls /usr/local/nginx/</span><br><span class="line">conf  html  logs  sbin</span><br></pre></td></tr></table></figure>

<ul>
<li>验证安装<br>软件已经安装了，我们看看结果吧！</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">启动软件</span><br><span class="line">[root@zutuanxue nginx-1.19.3]# /usr/local/nginx/sbin/nginx</span><br></pre></td></tr></table></figure>

<p>打开虚拟机浏览器输入:<a href="http://localhost回车/">http://localhost回车</a></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602404129693.png" alt="nginx访问.png"></p>
<h2 id="四、CentOS-8-dnf命令"><a href="#四、CentOS-8-dnf命令" class="headerlink" title="四、CentOS 8 dnf命令"></a>四、CentOS 8 dnf命令</h2><h3 id="dnf介绍"><a href="#dnf介绍" class="headerlink" title="dnf介绍"></a>dnf介绍</h3><p>DNF是新一代的rpm软件包管理器。最早出现在 Fedora 18 这个发行版中，在Fedora 22中正式取代了yum</p>
<p>DNF器克服了YUM的一些瓶颈，提升了包括用户体验，内存占用，依赖分析，运行速度等多方面的内容。</p>
<h3 id="dnf安装"><a href="#dnf安装" class="headerlink" title="dnf安装"></a>dnf安装</h3><p>在CentOS7中需要单独安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install epel-release -y</span><br><span class="line">yum install dnf</span><br></pre></td></tr></table></figure>

<p>在CentOS8中系统默认使用的是DNF，我们所看到的yum只是dnf的一个软连接</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# which yum</span><br><span class="line">/usr/bin/yum</span><br><span class="line">[root@zutuanxue ~]# ll /usr/bin/yum </span><br><span class="line">lrwxrwxrwx. 1 root root 5 5月  14 2019 /usr/bin/yum -&gt; dnf-3</span><br></pre></td></tr></table></figure>

<h4 id="相关目录和使用"><a href="#相关目录和使用" class="headerlink" title="相关目录和使用"></a><strong>相关目录和使用</strong></h4><ul>
<li><strong>目录</strong></li>
</ul>
<p>&#x2F;etc&#x2F;dnf&#x2F;dnf.conf 配置文件</p>
<p>&#x2F;etc&#x2F;dnf&#x2F;aliases.d&#x2F; 为相关命令定义别名的如dnf alias add rm&#x3D;remove</p>
<p>&#x2F;etc&#x2F;dnf&#x2F;modules.d&amp;&#x2F;etc&#x2F;dnf&#x2F;modules.defaults.d 模块的设置</p>
<p>&#x2F;etc&#x2F;dnf&#x2F;plugins&#x2F; 插件的设置</p>
<p>&#x2F;etc&#x2F;dnf&#x2F;protected.d&#x2F; 受保护的软件包的设置</p>
<p>&#x2F;etc&#x2F;dnf&#x2F;vars&#x2F; 变量设置</p>
<ul>
<li><strong>dnf用法展示</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">查看DNF的版本</span><br><span class="line">[root@zutuanxue ~]# dnf --version			</span><br><span class="line"></span><br><span class="line">查看dnf的可用软件仓库</span><br><span class="line">[root@zutuanxue ~]# dnf repolist		</span><br><span class="line"></span><br><span class="line">查看所有软件仓库</span><br><span class="line">[root@zutuanxue ~]# dnf repolist all	</span><br><span class="line"></span><br><span class="line">查看已安装的软件包</span><br><span class="line">[root@zutuanxue ~]# dnf list installed	  </span><br><span class="line"></span><br><span class="line">查看可安装的软件包</span><br><span class="line">[root@zutuanxue ~]# dnf list available 	</span><br><span class="line"></span><br><span class="line">搜索dhcp-server</span><br><span class="line">[root@zutuanxue ~]# dnf search dhcp-server		</span><br><span class="line"></span><br><span class="line">查询一个文件是由哪个软件包提供的</span><br><span class="line">[root@zutuanxue ~]# dnf provides /usr/sbin/dhclient</span><br><span class="line"></span><br><span class="line">查询软件包详细信息</span><br><span class="line">[root@zutuanxue ~]# dnf info dhcp-server	</span><br><span class="line"></span><br><span class="line">安装软件包</span><br><span class="line">[root@zutuanxue ~]# dnf install dhcp-server			</span><br><span class="line"></span><br><span class="line">升级软件包</span><br><span class="line">[root@zutuanxue ~]# dnf update systemd	</span><br><span class="line"></span><br><span class="line">检查软件包的更新</span><br><span class="line">[root@zutuanxue ~]# dnf check-update	</span><br><span class="line"></span><br><span class="line">升级所有可升级的软件包</span><br><span class="line">[root@zutuanxue ~]# dnf update		</span><br><span class="line"></span><br><span class="line">升级所有可升级的软件包</span><br><span class="line">[root@zutuanxue ~]# dnf upgrade		</span><br><span class="line"></span><br><span class="line">卸载软件包</span><br><span class="line">[root@zutuanxue ~]# dnf remove dhcp-server	</span><br><span class="line">[root@zutuanxue ~]# dnf erase dhcp-server		</span><br><span class="line"></span><br><span class="line">删除无用孤立的软件包</span><br><span class="line">[root@zutuanxue ~]# dnf autoremove	</span><br><span class="line"></span><br><span class="line">清除缓存中的无用数据</span><br><span class="line">[root@zutuanxue ~]# dnf clean all	</span><br><span class="line"></span><br><span class="line">获取某一个命令的帮助</span><br><span class="line">[root@zutuanxue ~]# dnf help clean	</span><br><span class="line"></span><br><span class="line">获取dnf命令的帮助</span><br><span class="line">[root@zutuanxue ~]# dnf help			</span><br><span class="line"></span><br><span class="line">查看历史命令</span><br><span class="line">[root@zutuanxue ~]# dnf history		</span><br><span class="line"></span><br><span class="line">重新执行历史命令中的第19条</span><br><span class="line">[root@zutuanxue ~]# dnf history redo 19	</span><br><span class="line"></span><br><span class="line">查看软件包组</span><br><span class="line">[root@zutuanxue ~]# dnf grouplist		</span><br><span class="line"></span><br><span class="line">安装一组软件包</span><br><span class="line">[root@zutuanxue ~]# dnf groupinstall &#x27;系统工具&#x27; </span><br><span class="line"></span><br><span class="line">升级一组软件包</span><br><span class="line">[root@zutuanxue ~]# dnf groupupdate &#x27;系统工具&#x27;	</span><br><span class="line"></span><br><span class="line">删除一组软件包</span><br><span class="line">[root@zutuanxue ~]# dnf groupremove &#x27;系统工具&#x27;	</span><br><span class="line"></span><br><span class="line">从特定的软件仓库安装软件包</span><br><span class="line">[root@zutuanxue ~]# dnf --enablerepo=epel install zabbix</span><br><span class="line"></span><br><span class="line">将软件包更新到最新的稳定版</span><br><span class="line">[root@zutuanxue ~]# dnf distro-sync</span><br><span class="line"></span><br><span class="line">重新安装指定的软件包</span><br><span class="line">[root@zutuanxue ~]# dnf reinstall dhcp-server</span><br><span class="line"></span><br><span class="line">降级软件包</span><br><span class="line">[root@zutuanxue ~]# dnf downgrade dhcp-server</span><br></pre></td></tr></table></figure>

<h1 id="linux服务介绍"><a href="#linux服务介绍" class="headerlink" title="linux服务介绍"></a>linux服务介绍</h1><p> 阅读 (202078) </p>
<p> 分享</p>
<p>什么是服务？在linux系统中，有一些特殊程序，启动后就会持续在后台执行，等待用户或者其他软件调用使用，这种程序我们称为服务。</p>
<p>linux系统中服务的管理工具</p>
<ul>
<li>systemV</li>
<li>systemd</li>
</ul>
<h2 id="一、systemV与init"><a href="#一、systemV与init" class="headerlink" title="一、systemV与init"></a>一、systemV与init</h2><p>systemV，systemV当中有一个叫init的程序，这个程序可以让系统中的service命令去调用&#x2F;etc&#x2F;init.d&#x2F;目录下的服务脚本，我们可以通过service命令去控制服务的启动与关闭,或者找到服务相应的执行文件，然后执行，比如&#x2F;usr&#x2F;sbin&#x2F;httpd,这样才能启动一个服务，如果想要停止一个服务则需要使用kill命令去停止<br>该服务管理方式从RHEL7之前的系统中默认</p>
<h3 id="init的特点"><a href="#init的特点" class="headerlink" title="init的特点"></a>init的特点</h3><ul>
<li>启动&#x2F;停止&#x2F;查看<br>&#x2F;etc&#x2F;init.d&#x2F;servername start&#x2F;stop&#x2F;restart&#x2F;status<br>​ 或<br>​service servername start&#x2F;stop&#x2F;restart&#x2F;status</li>
<li>开机启动管理与查看<br>chkconfig –level 0-6 servername on&#x2F;off 指定一个服务在哪个运行级别启动<br>chkconfig –list servername 查看一个服务在哪些运行级别启动</li>
</ul>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><p>按照功能分类</p>
<ul>
<li>系统服务：这些服务的服务对象是linux系统本身，或者linux系统的用户</li>
<li>网络服务：网络服务的服务对象是网络中的其他客户端</li>
</ul>
<p>按照启动方法分类</p>
<ul>
<li>独立系统服务：这类服务一经启动，除非系统关闭或者管理者手动结束，否则会一直在后台执行，不管是否用到。由于这类服务一直在后台执行，所以响应速度快，同时也会占用系统资源</li>
<li>临时服务：跟独立的服务不同，临时服务是用到的时候启动，使用完毕后服务会停止，所以临时服务响应速度慢，但是节省系统资源</li>
</ul>
<h5 id="手动解决服务的依赖关系"><a href="#手动解决服务的依赖关系" class="headerlink" title="手动解决服务的依赖关系"></a>手动解决服务的依赖关系</h5><p> 服务之间是有依赖关系的，比如说，联网的服务如果想正常运行的话，就必须启动网络服务。而这些服务就需要用户手动去处理</p>
<h4 id="运行级别分类"><a href="#运行级别分类" class="headerlink" title="运行级别分类"></a>运行级别分类</h4><p> init会根据用户指定的运行级别，来启动不同的服务，在linux系统中包含了0-6，一共7个运行级别</p>
<p>0 关机</p>
<p>1 单用户</p>
<p>2 无网络的多用户</p>
<p>3 字符模式</p>
<p>4 保留</p>
<p>5 图形模式</p>
<p>6 重启</p>
<h2 id="二、systemd与unit"><a href="#二、systemd与unit" class="headerlink" title="二、systemd与unit"></a>二、systemd与unit</h2><p>从CentOS7开始SystemV，也就是init服务，被效率更高的systemd所替代，而这个systemd对应的管理命令就是systemctl，并且systemctl命令也兼容了service（service命令做为systemd的入口，是systemctl命令的封装）。</p>
<h4 id="systemd的优势"><a href="#systemd的优势" class="headerlink" title="systemd的优势"></a>systemd的优势</h4><ul>
<li>并行处理所有服务，缩短开机时间</li>
<li>响应速度快，通过systemctl命令就可以完成所有操作</li>
<li>自动解决服务的依赖关系，类似yum</li>
<li>方便记忆，按照类型对服务进行分类</li>
<li>兼容init</li>
</ul>
<h4 id="相关文件"><a href="#相关文件" class="headerlink" title="相关文件"></a>相关文件</h4><p>&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F; 服务的启动脚本，包含所有安装完成的服务设置文件</p>
<p>&#x2F;run&#x2F;systemd&#x2F;system&#x2F; 系统运行过程中的服务脚本优先级高于上一个文件</p>
<p>&#x2F;etc&#x2F;systemd&#x2F;system&#x2F; 管理员手动建立的服务启动脚本，优先级最高</p>
<p>&#x2F;etc&#x2F;sysconfig&#x2F;* 系统功能的默认设置</p>
<h4 id="服务分类"><a href="#服务分类" class="headerlink" title="服务分类"></a>服务分类</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl -t  help</span><br><span class="line">service				服务单元，用于控制服务</span><br><span class="line">socket				套接字单元，用于进程间通信</span><br><span class="line">target				目标单元，用于控制一组其它单元</span><br><span class="line">device				设备单元，用于控制动态的设备</span><br><span class="line">mount				挂载单元，用于管理文件系统挂载点</span><br><span class="line">automount			自动挂载单元，用于管理文件系统自动挂载点</span><br><span class="line">swap				交换分区单元，用于管理swap设备或swap文件</span><br><span class="line">timer				定时器单元，用于管理基于时间触发的动作</span><br><span class="line">path				路径单元，用于监视文件系统路径，以用于基于路径的启动</span><br><span class="line">slice				范围单元，用于管理与控制一组特定进程的资源占用</span><br><span class="line">scope				范围单元，与service类似，系统自动创建</span><br></pre></td></tr></table></figure>

<h1 id="linux服务管理"><a href="#linux服务管理" class="headerlink" title="linux服务管理"></a>linux服务管理</h1><p> 阅读 (242415) </p>
<p> 分享</p>
<h2 id="systemctl命令"><a href="#systemctl命令" class="headerlink" title="systemctl命令"></a>systemctl命令</h2><h3 id="管理服务"><a href="#管理服务" class="headerlink" title="管理服务"></a>管理服务</h3><p>我们一起来看一下在服务管理方面systemctl这个工具如何使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl start servername</span><br><span class="line">start            	启动服务</span><br><span class="line">stop             	停止服务</span><br><span class="line">restart          	重启服务(没启动的服务会启动)</span><br><span class="line">try-restart		只重启正在运行的服务(没有运行则不启动)</span><br><span class="line">reload          	重载配置文件(修改完服务的配置文件后使用)</span><br><span class="line">status         	 	检查服务状态</span><br><span class="line">is-active        	检查服务是否已经启动</span><br><span class="line">enable          	设置服务开机时启动</span><br><span class="line">disable          	设置服务开机时不启动</span><br><span class="line">is-enabled       	查看服务是否开机自动启动</span><br><span class="line">mask		        屏蔽一个服务</span><br><span class="line">unmask		        取消屏蔽</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl status httpd</span><br><span class="line">● httpd.service - The Apache HTTP Server		服务名称</span><br><span class="line">   Loaded: loaded	加载到内存中；error加载失败；bad-setting无法理解单元配置文件中的设置；masked被屏蔽	 	(/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled) 服务开机时是否启动 enabled为启动；disabled为不启动</span><br><span class="line">   Active: active (running) since Mon 2019-11-18 15:56:46 CST; 1h 11min ago		服务当前的状态，active(running)为运行；active(exited)运行一次就退出了；active(waiting)运行中，但是再等待其它程序结束才能继续；inactive(dead)为没有运行；activating为启动中，deactivating停止中；failed启动失败</span><br><span class="line">     Docs: man:httpd.service(8)	服务的帮助文档	</span><br><span class="line"> Main PID: 57779 (httpd)	服务的主进程号</span><br><span class="line">   Status: &quot;Running, listening on: port 80&quot; 额外的状态信息</span><br><span class="line">    Tasks: 213 (limit: 24882) 任务数量，含进程+线程</span><br><span class="line">   Memory: 22.4M		当前占用的内存</span><br><span class="line">   CGroup: /system.slice/httpd.service</span><br><span class="line">           ├─57779 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─57780 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─57781 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─57782 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           └─57783 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">		Control Groups额外信息</span><br><span class="line">11月 18 15:56:46 localhost.localdomain systemd[1]: Starting The Apache HTTP Server...</span><br><span class="line">11月 18 15:56:46 localhost.localdomain httpd[57779]: AH00558: httpd: Could not reliably determ&gt;</span><br><span class="line">11月 18 15:56:46 localhost.localdomain httpd[57779]: Server configured, listening on: port 80</span><br><span class="line">11月 18 15:56:46 localhost.localdomain systemd[1]: Started The Apache HTTP Server.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">[root@zutuanxue ~]# systemctl is-active atd	</span><br><span class="line">inactive</span><br><span class="line">[root@zutuanxue ~]# systemctl start atd</span><br><span class="line">[root@zutuanxue ~]# systemctl status atd</span><br><span class="line">● atd.service - Job spooling tools</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/atd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Mon 2019-11-18 18:36:26 CST; 7s ago</span><br><span class="line"> Main PID: 60620 (atd)</span><br><span class="line">    Tasks: 1 (limit: 24882)</span><br><span class="line">   Memory: 504.0K</span><br><span class="line">   CGroup: /system.slice/atd.service</span><br><span class="line">           └─60620 /usr/sbin/atd -f</span><br><span class="line"></span><br><span class="line">11月 18 18:36:26 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">[root@zutuanxue ~]# systemctl stop atd</span><br><span class="line">[root@zutuanxue ~]# systemctl status atd</span><br><span class="line">● atd.service - Job spooling tools</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/atd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead) since Mon 2019-11-18 18:36:43 CST; 6s ago</span><br><span class="line">  Process: 60620 ExecStart=/usr/sbin/atd -f $OPTS (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 60620 (code=exited, status=0/SUCCESS)</span><br><span class="line"></span><br><span class="line">11月 18 18:36:26 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopped Job spooling tools.</span><br><span class="line">[root@zutuanxue ~]# systemctl is-enabled atd</span><br><span class="line">enabled</span><br><span class="line">[root@zutuanxue ~]# systemctl disable atd</span><br><span class="line">Removed /etc/systemd/system/multi-user.target.wants/atd.service.</span><br><span class="line">[root@zutuanxue ~]# systemctl is-enabled atd</span><br><span class="line">disabled</span><br><span class="line">[root@zutuanxue ~]# systemctl enable atd</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/atd.service → /usr/lib/systemd/system/atd.service.</span><br><span class="line">[root@zutuanxue ~]# systemctl is-enabled atd</span><br><span class="line">enabled</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl stop atd</span><br><span class="line">[root@zutuanxue ~]# systemctl mask atd</span><br><span class="line">Created symlink /etc/systemd/system/atd.service → /dev/null.</span><br><span class="line">[root@zutuanxue ~]# systemctl status atd</span><br><span class="line">● atd.service</span><br><span class="line">   Loaded: masked (Reason: Unit atd.service is masked.)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line"></span><br><span class="line">11月 05 18:12:41 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:34:15 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:34:15 localhost.localdomain systemd[1]: Stopped Job spooling tools.</span><br><span class="line">11月 18 18:36:26 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopped Job spooling tools.</span><br><span class="line">[root@zutuanxue ~]# systemctl unmask atd</span><br><span class="line">Removed /etc/systemd/system/atd.service.</span><br><span class="line">[root@zutuanxue ~]# systemctl status atd</span><br><span class="line">● atd.service - Job spooling tools</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/atd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line"></span><br><span class="line">11月 05 18:12:41 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:34:15 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:34:15 localhost.localdomain systemd[1]: Stopped Job spooling tools.</span><br><span class="line">11月 18 18:36:26 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopped Job spooling tools</span><br></pre></td></tr></table></figure>

<h3 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]#systemctl command --type=xxx --all</span><br><span class="line">list-units				查看所有加载到内存中的单元				</span><br><span class="line">list-unit-files	查看系统中所有安装的单元文件（存放在/usr/lib/systemd/system）的启用状态</span><br><span class="line">--type=xxx			单元类型</span><br><span class="line">--all						列出系统中所有加载的，不管状态为何</span><br><span class="line">[root@zutuanxue ~]# systemctl </span><br><span class="line">UNIT	LOAD   ACTIVE SUB       DESCRIPTION                                                      </span><br><span class="line">sys.. loaded active plugged 	/sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line"></span><br><span class="line">UNIT：	单元名称</span><br><span class="line">LOAD：	是否被加载</span><br><span class="line">ACTIVE：	高优先级单元状态，与SUB结合就是使用status查看的状态</span><br><span class="line">SUB：	低优先级单元状态		</span><br><span class="line">DESCRIPTION：简介</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl list-unit-files </span><br><span class="line">UNIT	FILE					STATE    </span><br><span class="line">proc...     				static </span><br><span class="line">-.mount							generated</span><br><span class="line">boot.mount					generated</span><br><span class="line">dev-hugepages.mount	static   </span><br><span class="line">dev-mqueue.mount	  static   </span><br><span class="line">proc-fs-nfsd.mount	static   </span><br><span class="line">proc-...            static   </span><br><span class="line">sys-f...            static   </span><br><span class="line">sys-...						  static   </span><br><span class="line">sys-ke..            static   </span><br><span class="line">tmp.mount						static   </span><br><span class="line">var-lib..						static   </span><br><span class="line">var-lib..						static   </span><br><span class="line">cups.path..					enabled  </span><br><span class="line">systemd..						static</span><br><span class="line"></span><br><span class="line">查看指定类型的服务</span><br><span class="line">[root@zutuanxue ~]# systemctl --type target --all</span><br><span class="line">  UNIT                      LOAD      ACTIVE   SUB    DESCRIPTION                  </span><br><span class="line">  basic.target              loaded    active   active Basic System                 </span><br><span class="line">  bluetooth.target          loaded    active   active Bluetooth                    </span><br><span class="line">  cryptsetup.target         loaded    active   active Local...      </span><br><span class="line">● dbus.target               not-found inactive dead   dbus.target                  </span><br><span class="line">[root@zutuanxue ~]# systemctl --type=target --all</span><br><span class="line">  UNIT                      LOAD      ACTIVE   SUB    DESCRIPTION                  </span><br><span class="line">  basic.target              loaded    active   active Basic System                 </span><br><span class="line">  bluetooth.target          loaded    active   active Bluetooth                    </span><br><span class="line">  cryptsetup.target         loaded    active   active Local...</span><br><span class="line">● dbus.target               not-found inactive dead   dbus.target</span><br><span class="line">[root@zutuanxue ~]# systemctl list-units --type=target --all</span><br><span class="line">  UNIT                      LOAD      ACTIVE   SUB    DESCRIPTION                  </span><br><span class="line">  basic.target              loaded    active   active Basic System                 </span><br><span class="line">  bluetooth.target          loaded    active   active Bluetooth                    </span><br><span class="line">  cryptsetup.target         loaded    active   active Local...</span><br><span class="line">● dbus.target               not-found inactive dead   dbus.target                  </span><br><span class="line"></span><br><span class="line">使用systemctl切换运行级别</span><br><span class="line">[root@zutuanxue ~]# systemctl list-units --type target --all</span><br><span class="line">  UNIT                   LOAD      ACTIVE   SUB    DESCRIPTION                  </span><br><span class="line">  basic.target           loaded    active   active Basic System                 </span><br><span class="line">  bluetooth.target       loaded    inactive dead   Bluetooth                    </span><br><span class="line">  cryptsetup.target      loaded    active   active Local ..</span><br><span class="line">● dbus.target            not-found inactive dead   dbus.target                  </span><br><span class="line">  emergency.target       loaded    inactive dead   Emergency Mode               </span><br><span class="line">  getty-pre.target       loaded    inactive dead   Login..</span><br><span class="line">  getty.target           loaded    active   active Login Prompts                </span><br><span class="line">  graphical.target       loaded    inactive dead   Graphica..Interface          </span><br><span class="line">常用的target</span><br><span class="line">graphical.target：图形模式</span><br><span class="line">multi-user.target：字符模式</span><br><span class="line">rescue.target：救援模式</span><br><span class="line">emergency.target：紧急模式，无法进入到救援模式时使用</span><br><span class="line">shutdown.target：关机</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl get-default	查看默认运行级别</span><br><span class="line">graphical.target     </span><br><span class="line">[root@zutuanxue ~]# systemctl set-default multi-user.target	设置 </span><br><span class="line">Removed /etc/systemd/system/default.target.</span><br><span class="line">Created symlink /etc/systemd/system/default.target → /usr/lib/systemd/system/multi-user.target.</span><br><span class="line">[root@zutuanxue ~]# systemctl isolate multi-user.target 切换</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">除了可以使用上述方法设置和查看之外 系统还给我们提供了几个简单的命令，方便操作</span><br><span class="line">[root@zutuanxue ~]# systemctl poweroff		关机</span><br><span class="line">[root@zutuanxue ~]# systemctl reboot			重启</span><br><span class="line">[root@zutuanxue ~]# systemctl suspend			挂起</span><br><span class="line">[root@zutuanxue ~]# systemctl hibernate		休眠</span><br><span class="line">[root@zutuanxue ~]# systemctl rescue			进入到救援模式</span><br><span class="line">[root@zutuanxue ~]# systemctl emergency		进入到紧急模式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看服务之间的依赖关系</span><br><span class="line">[root@zutuanxue ~]# systemctl list-dependencies multi-user.target</span><br><span class="line">查看multi-user.target依赖谁</span><br><span class="line">multi-user.target</span><br><span class="line">● ├─atd.service</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">● ├─basic.target</span><br><span class="line">● │ ├─-.mount</span><br><span class="line">● │ ├─microcode.service</span><br><span class="line">● │ ├─paths.target</span><br><span class="line">● │ ├─slices.target</span><br><span class="line">● │ │ ├─-.slice</span><br><span class="line">● │ │ └─system.slice</span><br><span class="line">● │ ├─sockets.target</span><br><span class="line">● │ │ ├─avahi-daemon.socket</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">[root@zutuanxue ~]# systemctl list-dependencies multi-user.target --reverse 	查看谁依赖multi-user.target</span><br><span class="line">multi-user.target</span><br><span class="line">● └─graphical.target</span><br></pre></td></tr></table></figure>

<h3 id="服务与端口"><a href="#服务与端口" class="headerlink" title="服务与端口"></a>服务与端口</h3><p> 我们知道在服务中分为系统服务和网络服务，系统服务是本机使用的，网络服务是给网络中的其它客户端使用的，那其它客户端是如何连接上的网络服务的呢？端口和协议，协议在我们之前的课程中了解过，那端口是什么呢？</p>
<p>端口：设备与外界通讯的出口，分为虚拟端口和物理端口，物理端口又叫接口，比如电脑中可以插网线的RJ45接口等,而虚拟端口指的就是网络服务使用的通讯接口，是不可见的，这些每个虚拟端口都有一个编号，我们称之为端口号，系统当中有一个文件记录的服务和端口号以及协议的对应关系</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /etc/services  | more</span><br><span class="line">服务名称				端口号/协议				描述			</span><br><span class="line">ftp-data        20/tcp</span><br><span class="line">ftp-data        20/udp</span><br><span class="line"># 21 is registered to ftp, but also used by fsp</span><br><span class="line">ftp             21/tcp</span><br><span class="line">ftp             21/udp          fsp fspd</span><br><span class="line">ssh             22/tcp                          </span><br><span class="line">ssh             22/udp                         </span><br><span class="line">telnet          23/tcp</span><br><span class="line">telnet          23/udp</span><br><span class="line"></span><br><span class="line">我们还可以使用netstat工具去查看自己的系统打开了哪些端口</span><br><span class="line">[root@zutuanxue ~]# netstat -antulp</span><br><span class="line">a			查看所有服务以及对应的端口号</span><br><span class="line">n			将输出结果以数字的形式表示，而不是主机名，服务名等</span><br><span class="line">t			使用tcp协议</span><br><span class="line">u			使用udp协议</span><br><span class="line">l			只显示处于监听状态的</span><br><span class="line">p			显示程序的名称与进程号</span><br><span class="line">c			指定自动更新的间隔时间  秒</span><br><span class="line">r			查看路由表信息</span><br><span class="line">[root@zutuanxue ~]# netstat -antlup </span><br><span class="line">Proto：协议</span><br><span class="line">Recv-Q：接收队列，如果接收队列阻塞，可能是受到拒绝服务攻击								</span><br><span class="line">Send-Q：发送队列，如果发送队列不能很快清零，可能是有应用向外发送数据包过快，或者对方接收数据包不够快</span><br><span class="line">Recv-Q和Send-Q通常应该为0，如果不为0可能意味着有问题，数据包有堆积状态，可以接受短暂的非0状态</span><br><span class="line">Local Address：本地的地址和端口号</span><br><span class="line">Foreign Address：	外部地址和状态</span><br><span class="line">State：						端口状态</span><br><span class="line">			 CLOSED 			端口未被使用中。</span><br><span class="line">			 LISTEN 			监听中，可以连接</span><br><span class="line">			 SYN_SEND   	处在TCP三次握手期间，已经发送SYN包后，等待对方的ACK包。</span><br><span class="line">       SYN_RECV   	处在TCP三次握手期间，已经收到SYN包后，进入SYN_RECV状态。</span><br><span class="line">       ESTABLISHED	完成TCP三次握手，进入ESTABLISHED状态。可以进行通信。</span><br><span class="line">       FIN_WAIT_1   在TCP四次挥手时，主动关闭端发送FIN包后，进入此状态。</span><br><span class="line">       FIN_WAIT_2   在TCP四次挥手时，主动关闭端收到ACK包后，进入此状态。</span><br><span class="line">       TIME_WAIT    在TCP四次挥手时，主动关闭端发送了ACK包之后，进入此状态，</span><br><span class="line">       							等待一段时间，让被动关闭端收到ACK包。</span><br><span class="line">       CLOSING      在TCP四次挥手时，主动关闭端发送了FIN包后，没有收到对应的ACK										包，却收到对方的FIN包，此时，进入CLOSING状态。</span><br><span class="line">       CLOSE_WAIT   在TCP四次挥手期间，被动关闭端收到FIN包后，进入此状态。</span><br><span class="line">       LAST_ACK     在TCP四次挥手时，被动关闭端发送FIN包后，等待对方的ACK包。</span><br><span class="line">       UNKNOWN			未知状态</span><br><span class="line">PID/Program name： 进程号/程序名称</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">通过netstat命令可以看到自己的linux系统打开了哪些服务及端口号，如果有些端口不想被占用可以关闭相应的网络服务</span><br><span class="line">[root@zutuanxue ~]# systemctl list-units --all | grep avahi</span><br><span class="line">avahi-daemon.service loaded active running Avahi mDNS/DNS-SD Stack                                                                                          </span><br><span class="line">avahi-daemon.socket loaded active running Avahi mDNS/DNS-SD Stack Activation Socket                                                                        </span><br><span class="line">可以看到这个服务的作用是为内网提供域名解析的</span><br><span class="line">[root@zutuanxue ~]# systemctl stop avahi-daemon.service </span><br><span class="line">Warning: Stopping avahi-daemon.service, but it can still be activated by:</span><br><span class="line">  avahi-daemon.socket</span><br><span class="line">[root@zutuanxue ~]# systemctl stop avahi-daemon.socket                   </span><br><span class="line">[root@zutuanxue ~]# systemctl disable avahi-daemon.service avahi-daemon.socket </span><br><span class="line">Removed /etc/systemd/system/multi-user.target.wants/avahi-daemon.service.</span><br><span class="line">Removed /etc/systemd/system/sockets.target.wants/avahi-daemon.socket.</span><br><span class="line">Removed /etc/systemd/system/dbus-org.freedesktop.Avahi.service.</span><br></pre></td></tr></table></figure>

<h3 id="服务设置相关文件"><a href="#服务设置相关文件" class="headerlink" title="服务设置相关文件"></a>服务设置相关文件</h3><p>我们现在知道了服务的管理是通过systemctl，而它的设置文件存放在&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;目录下，但是官方不建议我们修改这个目录下的文件，如果需要修改的话，建议我们修改&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;目录内的相关文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# yum install dhcp-server</span><br><span class="line">[root@zutuanxue ~]# systemctl enable dhcpd</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/dhcpd.service → /usr/lib/systemd/system/dhcpd.service.</span><br><span class="line">[root@zutuanxue ~]# cd /etc/systemd/system/</span><br><span class="line">[root@zutuanxue system]# ls</span><br><span class="line">在此目录中包含的文件有三种功能</span><br><span class="line">*.service  服务的设置文件</span><br><span class="line">*.wants	  此单元可选的依赖，启动指定单元后，建议启动此目录内的单元</span><br><span class="line">*.requires			此单元必要的依赖，启动指定单元前，需要启动此目录内的单元</span><br><span class="line"></span><br><span class="line">服务的设置文件</span><br><span class="line">[root@zutuanxue system]# vim /etc/systemd/system/multi-user.target.wants/dhcpd.service </span><br><span class="line"></span><br><span class="line">[Unit]		对于此单元的简介</span><br><span class="line">Description=DHCPv4 Server Daemon</span><br><span class="line">Documentation=man:dhcpd(8) man:dhcpd.conf(5)</span><br><span class="line">Wants=network-online.target	</span><br><span class="line">After=network-online.target</span><br><span class="line">After=time-sync.target</span><br><span class="line"></span><br><span class="line">Unit部分会出现的常见内容</span><br><span class="line">	Description			简介</span><br><span class="line">	Documentation		如何进一步查询相关信息</span><br><span class="line">	Wants						与当前单元配合的单元，如果这些单元没有运行，此单元不会启动失败</span><br><span class="line">	After						在哪些单元之后启动此单元</span><br><span class="line">	Befor						在哪些单元之前启动此单元</span><br><span class="line">	Requires				当前单元依赖的单元，如果这些单元没有运行，此单元启动失败</span><br><span class="line">	Conflicts				哪些单元与此单元冲突</span><br><span class="line">[Service]	这是一个服务还可能是Socket、Timer、Mount等</span><br><span class="line">Type=notify</span><br><span class="line">EnvironmentFile=-/etc/sysconfig/dhcpd</span><br><span class="line">ExecStart=/usr/sbin/dhcpd -f -cf /etc/dhcp/dhcpd.conf -user dhcpd -group dhcpd --no-pid $DHCPDARGS</span><br><span class="line">StandardError=null</span><br><span class="line"></span><br><span class="line">Service部分会出现的内容</span><br><span class="line">	Type			启动时，相关进程的行为</span><br><span class="line">			simple		默认值</span><br><span class="line">			oneshot		一次性进程，systemd会等待当前服务结束，再继续执行</span><br><span class="line">			notify		启动完毕后通知systemd</span><br><span class="line">			idle		所有其它任务执行完毕后，此服务才会运行</span><br><span class="line">	EnviromentFile	指定环境变量配置文件</span><br><span class="line">	Enviroment	指定环境变量</span><br><span class="line">	ExecStart	执行什么命令启动当前服务</span><br><span class="line">	ExecStartPre	启动当前服务之前执行什么命令</span><br><span class="line">	ExecStartPost	启动当前服务之后执行什么命令</span><br><span class="line">	ExecStop	执行什么命令停止当前服务</span><br><span class="line">	ExecStopPost	停止当前服务后执行什么命令</span><br><span class="line">	ExecReload	执行什么命令重新加载服务的配置文件</span><br><span class="line">	Restart		服务正常退出、异常退出、被杀死、超时的时候是否重启。常用值</span><br><span class="line">			no				不重启</span><br><span class="line">			always		无条件重启</span><br><span class="line">			on-failure	异常退出时重启</span><br><span class="line">	RestartSec	自动重启服务的间隔时间</span><br><span class="line">	RemainAfterExit	此服务的进程全部退出之后，是否依然将服务的状态视为active状态</span><br><span class="line">	TimeoutSec	定义服务启动或停止的超时时间</span><br><span class="line">	KillMode	服务停止时，杀死进程的方法</span><br><span class="line">	</span><br><span class="line">[Install]	将此单元放到哪一个目标（target）当中</span><br><span class="line">WantedBy=multi-user.target	此服务所在的target，当执行systemctl enabled dhcpd时，dhcpd.service的链接会放在/etc/systemd/system/multi-user.target.wants/中</span><br><span class="line"></span><br><span class="line">Install字段出现的内容</span><br><span class="line">WantedBy=multi-user.target	此服务所在的target，当执行systemctl 																			enabled dhcpd时，dhcpd.service的链接会放																	在/etc/systemd/system/multi-user.target.wants/中Also附加单元，当用户使用systemctl enable/disabled时，也自动启用或者停用附加单元</span><br><span class="line">Alias		定义别名</span><br></pre></td></tr></table></figure>

<h3 id="服务多实例"><a href="#服务多实例" class="headerlink" title="服务多实例"></a>服务多实例</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue yum.repos.d]# dnf install vsftpd -y		安装一个服务</span><br><span class="line">[root@zutuanxue yum.repos.d]# systemctl start vsftpd</span><br><span class="line">[root@zutuanxue yum.repos.d]# netstat -antulp | grep vsftpd</span><br><span class="line">tcp6       0      0 :::21      :::*     LISTEN      6331/vsftpd         </span><br><span class="line">[root@zutuanxue yum.repos.d]# cd /etc/systemd/system/</span><br><span class="line">[root@zutuanxue system]# cp /usr/lib/systemd/system/vsftpd.service ./vsftpd2.service</span><br><span class="line">[root@zutuanxue system]# cd /etc/vsftpd/</span><br><span class="line">[root@zutuanxue vsftpd]# cp vsftpd.conf vsftpd2.conf</span><br><span class="line">[root@zutuanxue vsftpd]# vim vsftpd2.conf </span><br><span class="line">listen_port=2100</span><br><span class="line"></span><br><span class="line">[root@zutuanxuet vsftpd]# vim /etc/systemd/system/vsftpd2.service </span><br><span class="line">[Unit]</span><br><span class="line">Description=the second Vsftpd ftp daemon			修改简介</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/sbin/vsftpd /etc/vsftpd/vsftpd2.conf		修改配置文件</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">[root@zutuanxue system]# systemctl list-unit-files  | grep vsftpd</span><br><span class="line">vsftpd.service                              disabled </span><br><span class="line">vsftpd2.service                             disabled </span><br><span class="line">vsftpd@zutuanxue.service                    indirect </span><br><span class="line">vsftpd.target                               disabled </span><br><span class="line">[root@zutuanxue system]# systemctl start vsftpd</span><br><span class="line">[root@zutuanxue system]# systemctl start vsftpd2</span><br><span class="line">[root@zutuanxue system]# netstat -antulp | grep vsftpd</span><br><span class="line">tcp6       0      0 :::21          :::*        LISTEN      7388/vsftpd         </span><br><span class="line">tcp6       0      0 :::2100        :::*        LISTEN      7392/vsftpd         </span><br></pre></td></tr></table></figure>

<h1 id="linux-进程管理"><a href="#linux-进程管理" class="headerlink" title="linux 进程管理"></a>linux 进程管理</h1><p> 阅读 (202762) </p>
<p> 分享</p>
<h2 id="一、进程介绍"><a href="#一、进程介绍" class="headerlink" title="一、进程介绍"></a>一、进程介绍</h2><p>在说进程如何管理之前我们要涉及到进程的一些相关概念</p>
<p><strong>什么是进程</strong>？进程（Process）是一个程序在其自身的虚拟地址空间中的一次执行活动。之所以要创建进程，就是为了使多个程序可以并发的执行，从而提高系统的资源利用率和吞吐量。简单来说进程就是一个程序的执行活动。</p>
<p><strong>进程和程序有什么不同？</strong></p>
<p>程序：只是一个静态的指令集合；而进程是一个程序的动态执行过程，它具有生命期，是动态的产生和消亡的。</p>
<p>进程：是资源申请、调度和独立运行的单位，因此，它使用系统中的运行资源；而程序不能申请系统资源、不能被系统调度、也不能作为独立运行的单位，因此，它不占用系统的运行资源。</p>
<p>程序和进程无一一对应的关系。一方面一个程序可以由多个进程所共用，即一个程序在运行过程中可以产生多个进程；另一方面，一个进程在生命期内可以顺序的执行若干个程序。</p>
<p><strong>进程的属性</strong></p>
<p> 在Linux系统中总是有很多进程同时在运行，每一个进程都有一个识别号，叫做PID（Process ID），用以区分不同的进程。</p>
<p>除了进程识别号外，每个进程还有另外四个识别号。它们是实际用户识别号（real user ID）、实际组识别号以及有效用户识别号（effect user ID），和有效组识别号（effect group ID）。实际用户识别号和实际组识别号的作用是识别正在运行此进程的用户和组。一个进程的实际用户识别号和实际组识别号就是运行此进程的用户的识别号（UID）和组的识别号（GID）。有效用户识别号和有效组识别号的作用是确定一个进程对其访问的文件的权限和优先权。一般有效用户识别号和有效组识别号和实际用户识别号及实际组识别号相同。除非程序被设置了SUID位或SGID位。</p>
<p><strong>进程间的父子关系</strong></p>
<p>进程之间是有关联性的，有的进程会衍生出额外的进程，这时，这组进程之间就存在了父子关系，衍生出来的进程叫子进程，而原本的进程叫做父进程。</p>
<h2 id="二、linux的工作调度"><a href="#二、linux的工作调度" class="headerlink" title="二、linux的工作调度"></a>二、linux的工作调度</h2><p>由于linux是一个多人多任务的操作系统，所以用户在使用linux的时候就会出现有些工作我们需要盯着完成的进度，而有些工作我们直接放在后台执行就可以了，这里面我们就涉及到任务的前后台执行的问题，那么，如何将一个任务放到后台去执行呢？</p>
<h4 id="开启一个在后台执行的工作"><a href="#开启一个在后台执行的工作" class="headerlink" title="开启一个在后台执行的工作"></a>开启一个在后台执行的工作</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cd /</span><br><span class="line">[root@zutuanxue /]# tar -czf /tmp/test.tar.gz etc &amp;	（&amp;表示后台执行）</span><br><span class="line">[1] 13568				[1]工作序号；13568进程号（PID）</span><br><span class="line">[root@zutuanxue /]# ls tmp/ | grep test</span><br><span class="line">test.tar.gz</span><br><span class="line"></span><br><span class="line">执行完成后，会在下次敲回车的时候给用户一个反馈</span><br><span class="line">[1]+  已完成               tar -czpf /tmp/test.tar.gz etc</span><br></pre></td></tr></table></figure>

<h4 id="将当前的工作调到后台"><a href="#将当前的工作调到后台" class="headerlink" title="将当前的工作调到后台"></a>将当前的工作调到后台</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue /]# cd</span><br><span class="line">[root@zutuanxue ~]# ls</span><br><span class="line">公共  视频  文档  音乐  anaconda-ks.cfg</span><br><span class="line">模板  图片  下载  桌面  initial-setup-ks.cfg</span><br><span class="line">[root@zutuanxue ~]# vim anaconda-ks.cfg 		按键盘上的ctrl+z是调到后台</span><br><span class="line"></span><br><span class="line">[1]+  已停止               vim anaconda-ks.cfg		</span><br><span class="line">注意由ctrl+z调到后台的工作状态为暂停</span><br></pre></td></tr></table></figure>

<p>那么如何将后台工作的状态更改为运行？如何查看后台有哪些工作呢？</p>
<h4 id="后台工作的查看及状态的更改"><a href="#后台工作的查看及状态的更改" class="headerlink" title="后台工作的查看及状态的更改"></a>后台工作的查看及状态的更改</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# jobs					查看后台工作</span><br><span class="line">[1]-  已停止               vim anaconda-ks.cfg</span><br><span class="line">[2]+  已停止               find / -print</span><br><span class="line">[root@zutuanxue ~]# jobs -l				查看后台工作，并显示进程号</span><br><span class="line">[1]- 13663 停止                  vim anaconda-ks.cfg</span><br><span class="line">[2]+ 13732 停止                  find / -print</span><br><span class="line">[root@zutuanxue ~]# jobs -s				仅查看状态为停止的后台工作</span><br><span class="line">[1]-  已停止               vim anaconda-ks.cfg</span><br><span class="line">[2]+  已停止               find / -print</span><br><span class="line">[root@zutuanxue ~]# jobs -r				仅查看状态为运行的后台工作</span><br><span class="line"></span><br><span class="line">+：	当使用命令将后台任务调到前台时，默认调用有此标记的任务，也就是最近被调到后台的</span><br><span class="line">-：	倒数第二个被调到后台的任务</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# fg %工作序号(%可省略)	将后台指定的工作调到前台</span><br><span class="line">[root@zutuanxue ~]# find / -name \*a\* &gt; /tmp/test.txt</span><br><span class="line">^Z		执行一个命令，迅速使用ctrl+z将任务调到后台</span><br><span class="line">[2]+  已停止               find / -name \*a\* &gt; /tmp/test.txt</span><br><span class="line">[root@zutuanxue ~]# bg %2;jobs 连续执行两条命令，1.使用bg命令将之前的工作状态更改为运行；2.立即使用jobs命令查看状态</span><br><span class="line">[2]+ find / -name \*a\* &gt; /tmp/test.txt &amp;</span><br><span class="line">[1]+  已停止               vim anaconda-ks.cfg</span><br><span class="line">[2]-  运行中               find / -name \*a\* &gt; /tmp/test.txt &amp;</span><br><span class="line"></span><br><span class="line">注意：更改后台工作状态和查看后台工作状态的命令也可以在终端分别输入，但是如果命令执行的较快的话可能会出现下面的这种情况，也就是状态显示为已完成</span><br><span class="line">[root@zutuanxue ~]# find / -name \*a\* &gt; /tmp/test.txt</span><br><span class="line">^Z</span><br><span class="line">[2]+  已停止               find / -name \*a\* &gt; /tmp/test.txt</span><br><span class="line">[root@zutuanxue ~]# jobs</span><br><span class="line">[1]-  已停止               vim anaconda-ks.cfg</span><br><span class="line">[2]+  已停止               find / -name \*a\* &gt; /tmp/test.txt</span><br><span class="line">[root@zutuanxue ~]# bg %2</span><br><span class="line">[2]+ find / -name \*a\* &gt; /tmp/test.txt &amp;</span><br><span class="line">[root@zutuanxue ~]# jobs</span><br><span class="line">[1]+  已停止               vim anaconda-ks.cfg</span><br><span class="line">[2]-  已完成               find / -name \*a\* &gt; /tmp/test.txt</span><br></pre></td></tr></table></figure>

<h4 id="管理后台工作"><a href="#管理后台工作" class="headerlink" title="管理后台工作"></a>管理后台工作</h4><p>我们可以通过kill命令配合适当的信号来管理后台的工作，信号是进程间通信的最原始机制，不同的信号，有不同的作用，比如说，一个进程接收到了一个让它打开指定文件的信号，那这个进程就去打开这个文件，而不会去考虑原因</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# kill %工作序号</span><br><span class="line">		-l				查看</span><br><span class="line">		-1				重新加载，systemctl reload servername</span><br><span class="line">		-2				保存数据并结束	ctrl+c			</span><br><span class="line">		-9				强制结束不管其状态		常用在无法正常终止的程序上</span><br><span class="line">		-15				正常结束(默认值)		systemctl stop servername</span><br><span class="line">[root@zutuanxue ~]# jobs</span><br><span class="line">[1]+  已停止               vim anaconda-ks.cfg</span><br><span class="line">[root@zutuanxue ~]# kill -9 %1</span><br><span class="line">[1]+  已停止               vim anaconda-ks.cfg</span><br><span class="line">[root@zutuanxue ~]# jobs</span><br><span class="line">[1]+  已杀死               vim anaconda-ks.cfg</span><br><span class="line">[root@zutuanxue ~]# jobs</span><br></pre></td></tr></table></figure>

<h2 id="三、进程的查看与管理"><a href="#三、进程的查看与管理" class="headerlink" title="三、进程的查看与管理"></a>三、进程的查看与管理</h2><p>在linux中，我们可以通过fg、bg、jobs、kill等来对工作进行管理和调度，这些工作都是我们手动执行的，而那些由系统开启的工作该如何管理呢？管理这些后台工作我们可以使用两种命令ps和top</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# ps	  #静态进程管理命令,可以帮助我们查看到ps命令在执行那一刻后台进程的状态</span><br><span class="line">-A			所有进程，等同于-ax</span><br><span class="line">-a			显示所有进程（与终端有关的除外）</span><br><span class="line">-x			与参数a一起使用等同于-A</span><br><span class="line">-u			显示指定用户的进程</span><br><span class="line">-l			长格式</span><br><span class="line">-f			完整输出</span><br><span class="line">-t			从指定终端启动的进程</span><br><span class="line">-C			执行指定命令的进程</span><br><span class="line">[root@zutuanxue ~]# ps aux		#查看系统后台的所有进程</span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root          1  0.0  0.1 252828 11580 ?        Ss   10月23   0:04 /us...</span><br><span class="line">root          2  0.0  0.0      0     0 ?        S    10月23   0:00 [kthreadd]</span><br><span class="line">root          3  0.0  0.0      0     0 ?        I&lt;   10月23   0:00 [rcu_gp]</span><br><span class="line">root          4  0.0  0.0      0     0 ?        I&lt;   10月23   0:00 [rcu_par_gp]</span><br><span class="line">root          6  0.0  0.0      0     0 ?        I&lt;   10月23   0:00 [kworker/0:0H-kblockd]</span><br><span class="line">root          8  0.0  0.0      0     0 ?        I&lt;   10月23   0:00 [mm_percpu_wq]</span><br><span class="line">root          9  0.0  0.0      0     0 ?        S    10月23   0:00 [ksoftirqd/0]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">USER			开启进程的用户</span><br><span class="line">PID				进程的识别号</span><br><span class="line">%CPU			进程的cpu占用率</span><br><span class="line">%MEM			进程的物理内存占用率</span><br><span class="line">VSZ				虚拟内存用量，单位Kbytes</span><br><span class="line">RSS				物理内存占用量	Kbytes</span><br><span class="line">TTY				那个终端开启的</span><br><span class="line">STAT			进程的状态</span><br><span class="line">START			开启时间</span><br><span class="line">TIME			CPU占用时间</span><br><span class="line">COMMAND			执行具体内容</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# ps -l		查看当前用户开启的进程</span><br><span class="line">F S  UID    PID  PPID  C PRI  NI ADDR SZ WCHAN  	TTY    TIME 	CMD</span><br><span class="line">0 S   0   5191   5189  0  80   0 	-  6994 -      pts/1 00:00:02 bash</span><br><span class="line">0 R   0  14972   5191  0  80   0 	- 11240 -      pts/1 00:00:00 ps</span><br><span class="line"></span><br><span class="line">F	进程标识	4=权限为root		1=从父进程派生出来但是没有执行	5=1+4		0=没有被设置</span><br><span class="line">S	进程状态	R=运行	S=睡眠，可被唤醒	D=睡眠，不可被唤醒（资源不足引起）T=停止</span><br><span class="line">				 	 Z=僵尸进程</span><br><span class="line">UID	用户识别号</span><br><span class="line">PID	进程识别号</span><br><span class="line">PPID	父进程号</span><br><span class="line">C			cpu使用率 %</span><br><span class="line">PRI		内核调度优先级</span><br><span class="line">NI		用户设置优先级</span><br><span class="line">ADDR	加载到内存的位置，如果是运行的会用-表示</span><br><span class="line">SZ		用掉的内存页的大小，1个内存页=4096Bytes 也就是6994x4=27976K内存</span><br><span class="line">WCHAN	当前进程在哪个内核函数上睡眠，-表示正在运行，没有睡眠</span><br><span class="line">TTY		由哪个终端开启的	pts/n=图形界面或远程		ttyn=字符界面		?=系统进程</span><br><span class="line">TIME	用掉的CPU时间</span><br><span class="line">CMD		执行的命令</span><br></pre></td></tr></table></figure>

<p>ps只能显示它运行的那一刻的进程的统计信息，如果你想动态的查看就需要使用top</p>
<p>top动态查看</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# top</span><br><span class="line">-d			指定两次刷新的时间间隔,默认是3秒</span><br><span class="line">-p			后面跟进程号，查看指定进程的状态,最多20个PID</span><br><span class="line">-n			刷新指定次数后退出</span><br><span class="line">-b			批量模式，可以让top将内容输出到指定的位置</span><br><span class="line">top的按键</span><br><span class="line">?				显示帮助</span><br><span class="line">空格&amp;enter			   刷新</span><br><span class="line">E				切换统计信息部分，内存显示的单位</span><br><span class="line">e				切换任务列表的内存显示的单位</span><br><span class="line">l				显示或隐藏摘要信息中的负载统计(第一行内容)</span><br><span class="line">t				切换显示或隐藏摘要信息中任务和CPU统计信息(第2，3行内容)</span><br><span class="line">m				切换显示或隐藏摘要信息中内存统计(第4，5行内容)</span><br><span class="line">u				查看指定用户的进程</span><br><span class="line">M				根据内存排序</span><br><span class="line">P				根据cpu排序</span><br><span class="line">N				根据PID排序</span><br><span class="line">R				反向排序</span><br><span class="line">F/f			调整任务列表显示的内容，默认只有PID，USER，PR，NI....COMMAND等这些，可				以自定义还需要显示哪些内容，如果显示的列比较多可以使用&lt;/&gt;进行左右移动</span><br><span class="line">shift+&lt;/&gt;按照下一列的内容排序，比如说当前按照PID排序如果按下shift+&gt;，则按照用户名					排序，再次按下就会按照PR排序，一次类推 </span><br><span class="line">T				根据cpu使用时间排序</span><br><span class="line">k				杀死进程</span><br><span class="line">r				修改进程的nice值（优先级）</span><br><span class="line">z				将不同的位置标记颜色</span><br><span class="line">x				高亮显示排序字段</span><br><span class="line">y				高亮显示正在运行的任务</span><br><span class="line">b				将高亮显示部分加上背景色</span><br><span class="line">Z				自定义颜色</span><br><span class="line">L				搜索指定字段，&amp;下一个</span><br><span class="line">H				在进程和线程间切换显示和统计方式，默认为进程</span><br><span class="line">V				树形显示统计信息</span><br><span class="line">J				显示内容左对齐或右对齐</span><br><span class="line">c				切换COMMAND列的显示形式，程序名/命令格式</span><br><span class="line">i				显示或隐藏空闲进程</span><br><span class="line">u/U			查看指定用户的进程</span><br><span class="line">d				设置刷新间隔,默认3秒刷新一次</span><br><span class="line">W				将当前的设置写入到~/.config/procps/toprc中</span><br><span class="line">q				退出top</span><br><span class="line">[root@zutuanxue ~]# top -d 1</span><br><span class="line">1 top - 18:57:05 up 12:56,  3 users,  load average: 0.00, 0.00, 0.00</span><br><span class="line">2 Tasks: 280 total,   1 running, 279 sleeping,   0 stopped,   0 zombie</span><br><span class="line">3 %Cpu(s): 1.5 us,1.5 sy,0.0 ni,97.0 id,0.0 wa,0.0 hi,0.0 si,0.0 st</span><br><span class="line">4 MiB Mem : 3918.6 total, 160.1 free, 1264.5 used, 2494.0 buff/cache</span><br><span class="line">5 MiB Swap: 2048.0 total, 2048.0 free, 0.0 used. 2356.6 avail Mem </span><br><span class="line">6</span><br><span class="line">7PID USER  PR  NI VIRT    RES    SHR  S  %CPU  %MEM   TIME+  COMMAND  </span><br><span class="line"> 1   root  20  0  244408  13740  9100 S  0.0   0.3   0:08.77 systemd</span><br><span class="line"> 2   root  20  0  0       0      0    S  0.0   0.0   0:00.04 kthreadd  3   root  0  -20 0       0      0    I  0.0   0.0   0:00.00 rcu_gp    4   root  0  -20 0       0      0    I  0.0   0.0   0:00.00 cu_par_gp </span><br><span class="line"></span><br><span class="line">1-6行显示的内容为</span><br><span class="line">1	当前时间为18：57：05；系统一共开机12小时56分；当前有3个用户登录；系统在1，5，15分钟的平均负载，越小表示系统越空闲</span><br><span class="line"></span><br><span class="line">2	系统中进程的统计信息 总计280个，1个运行，279睡眠，0个停止，0个僵尸</span><br><span class="line"></span><br><span class="line">3	cpu的负载	按键盘上的“1”可以按照CPU核心数显示</span><br><span class="line">			us: 用户空间进程占用CPU时间百分比</span><br><span class="line">			sy:	内核进程占用CPU时间百分比</span><br><span class="line">			ni:	用户空间内改变过优先级的进程占用CPU时间百分比</span><br><span class="line">			id:	空闲CPU时间百分比(100%表示系统完全空闲)</span><br><span class="line">			wa: I/O等待占用的CPU时间百分比</span><br><span class="line">			hi: 硬件中断占用CPU时间百分比</span><br><span class="line">			si:	软件中断占用CPU时间百分比</span><br><span class="line">			st:	虚拟化hypervisor从当前虚拟机偷走的时间（如果这个值很高的话,说明你的提					供商的CPU资源有限,而你没能抢过别人,很有可能就是VPS提供商超售了.）</span><br><span class="line">4&amp;5	物理内存和虚拟内存相关的统计信息，尤其要注意swap，如果被大量占用，说明你物理内			存不足了</span><br><span class="line">6	在top中输入命令时，会显示在这里</span><br><span class="line">7	系统进程的信息</span><br><span class="line">	PID:	进程ID </span><br><span class="line">	USER  	进程所有者</span><br><span class="line">	PR  	进程优先级</span><br><span class="line">	NI 	nice值，负数表示高优先级，正数表示低优先级</span><br><span class="line">	VIRT    虚拟内存使用量，单位为KB。</span><br><span class="line">	RES    进程使用的、未被换出的物理内存大小，单位为KB。</span><br><span class="line">	SHR  	进程使用共享内存大小，单位为KB。</span><br><span class="line">	S  	进程状态</span><br><span class="line">	%CPU  	进程对CPU的使用率。</span><br><span class="line">	%MEM   进程对内存的使用率</span><br><span class="line">	TIME+  进程使用CPU时间总结，单位秒。</span><br><span class="line">	COMMAND	命令</span><br><span class="line">		</span><br><span class="line">top显示的内容有些看不到怎么办？</span><br><span class="line">[root@zutuanxue ~]# top -b -n1 &gt; /tmp/top.txt</span><br><span class="line">有些时候想查看的进程资源占用很低，在top中显示的比较靠后，怎么办？</span><br><span class="line">[root@zutuanxue ~]# top -d 2 -p 3562</span><br><span class="line">Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  2.2 us,  3.9 sy,  0.0 ni, 93.3 id,  0.0 wa,  0.5 hi,  0.1 si,  0.0 st</span><br><span class="line">MiB Mem : 3918.6 total, 1495.1 free, 1407.0 used, 1016.5 buff/cache</span><br><span class="line">MiB Swap: 2048.0 total, 2048.0 free, 0.0 used.   2258.4 avail Mem </span><br><span class="line"></span><br><span class="line">PID USER   PR  NI   VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND  </span><br><span class="line">3562 root  20   0   49296   6380   4448 S   0.0   0.2   0:00.08 bash</span><br></pre></td></tr></table></figure>

<p>上面所提到的两个查看系统进程的命令，静态的ps和动态的top，他们所显示的内容比较多，有的时候我只想查看一下进程之间的关系，这个时候我可以使用另外的一条命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# pstree</span><br><span class="line">	A				进程之间使用ASCII字符连接</span><br><span class="line">	U				进程之间使用UTF-8编码连接</span><br><span class="line">	p				显示进程号</span><br><span class="line">	u				显示用户</span><br><span class="line">[root@zutuanxue ~]# pstree -A | more</span><br><span class="line">systemd-+-ModemManager---2*[&#123;ModemManager&#125;]</span><br><span class="line">        |-NetworkManager---2*[&#123;NetworkManager&#125;]</span><br><span class="line">        |-VGAuthService</span><br><span class="line">        |-accounts-daemon---2*[&#123;accounts-daemon&#125;]</span><br><span class="line">        |-alsactl</span><br><span class="line">        |-atd</span><br><span class="line">        |-auditd-+-sedispatch</span><br><span class="line">        |        `-2*[&#123;auditd&#125;]</span><br><span class="line">[root@zutuanxue ~]# pstree -U | more</span><br><span class="line">systemd─┬─ModemManager───2*[&#123;ModemManager&#125;]</span><br><span class="line">        ├─NetworkManager───2*[&#123;NetworkManager&#125;]</span><br><span class="line">        ├─VGAuthService</span><br><span class="line">        ├─accounts-daemon───2*[&#123;accounts-daemon&#125;]</span><br><span class="line">        ├─alsactl</span><br><span class="line">        ├─atd</span><br><span class="line">        ├─auditd─┬─sedispatch</span><br><span class="line">        │        └─2*[&#123;auditd&#125;]</span><br><span class="line">[root@zutuanxue ~]# pstree -pu | more</span><br><span class="line">systemd(1)-+-ModemManager(916)-+-&#123;ModemManager&#125;(943)</span><br><span class="line">           |                   `-&#123;ModemManager&#125;(949)</span><br><span class="line">           |-NetworkManager(1040)-+-&#123;NetworkManager&#125;(1050)</span><br><span class="line">           |                      `-&#123;NetworkManager&#125;(1053)</span><br><span class="line">           |-VGAuthService(902)</span><br><span class="line">           |-accounts-daemon(1010)-+-&#123;accounts-daemon&#125;(1013)</span><br><span class="line">           |                       `-&#123;accounts-daemon&#125;(1015)</span><br><span class="line">           |-alsactl(909)</span><br><span class="line">           |-atd(1076)</span><br><span class="line">           |-auditd(862)-+-sedispatch(864)</span><br><span class="line">           |             |-&#123;auditd&#125;(863)</span><br><span class="line">           |             `-&#123;auditd&#125;(865)</span><br><span class="line">           |-avahi-daemon(910,avahi)---avahi-daemon(953)</span><br></pre></td></tr></table></figure>

<p>我们现在可以通过三种方法来查看后台的进程，那么后台的进程该如何管理呢？管理后台的进程，除了我们前面提到的kill命令之外还可以使用killall</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# kill PID</span><br><span class="line">需要注意的是，kill后面如果加的是%num代表杀死后台指定序号的工作，如果不加%代表的是杀死指定进程号的进程，这两个是有区别的</span><br><span class="line">[root@zutuanxue ~]# killall</span><br><span class="line">	e		精确匹配，最多不能超过15个字符</span><br><span class="line">	i		询问用户是否杀死指定名称的进程</span><br><span class="line">	I		进程的名称忽略大小写</span><br><span class="line">[root@zutuanxue ~]# cat /dev/zero &gt; /dev/null &amp;</span><br><span class="line">[1] 102245</span><br><span class="line">[root@zutuanxue ~]# ps -l</span><br><span class="line">F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD</span><br><span class="line">0 S     0   3562   3559  0  80   0 - 12324 -      pts/1    00:00:00 bash</span><br><span class="line">0 R     0 102245   3562 97  80   0 -  1908 -      pts/1    00:00:01 cat</span><br><span class="line">0 R     0 102246   3562  0  80   0 - 11240 -      pts/1    00:00:00 ps</span><br><span class="line">[root@zutuanxue ~]# killall -ei cat</span><br><span class="line">杀死 cat(102870) ? (y/N) y</span><br><span class="line">[1]+  已终止               cat /dev/zero &gt; /dev/null</span><br></pre></td></tr></table></figure>

<h2 id="四、进程的优先级"><a href="#四、进程的优先级" class="headerlink" title="四、进程的优先级"></a>四、进程的优先级</h2><p>之前我们在查看进程的时候看到两个东西，一个是PRI一个是NI，这两个东西是用来控制进程的优先级，而优先级又决定了CPU先处理谁的数据，后处理谁的数据。一起来看下如何调整进程的优先级</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# ps -l</span><br><span class="line">F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY     TIME 		CMD</span><br><span class="line">0 S     0   3562   3559  0  80   0 - 12522 -      pts/1  00:00:00 bash</span><br><span class="line">0 R     0  85520   3562  0  80   0 - 11240 -      pts/1  00:00:00 ps</span><br></pre></td></tr></table></figure>

<p>linux当中的每一个程序都有一个优先级，也就是PRI，这个数值越小则代表优先级越高，而PRI这个值是由内核控制的，用户无法更改，用户如果想调整程序的优先级就只能调整NI的值，所以linux中优先级的算法就是 新的优先级&#x3D;旧的优先级+NI的值，比如说我bash那个进程，PRI是80，并且假定内核不会动态调整这个值，如果我将NI值更改为-10的话，那么新的PRI的值就是70，数值变小，意味着这个进程的优先级提高了。但是如果内核在这个过程中动态调整了，最终的值就不确定了。</p>
<p>这个NI的值都可以设置成多少呢？</p>
<p>root用户：-20~19</p>
<p>普通用户：0~19</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nice 	指定新执行的进程的优先级</span><br><span class="line">	-n 	指定优先级</span><br><span class="line">[root@zutuanxue ~]# vim 1&amp;</span><br><span class="line">[1] 108831</span><br><span class="line">[root@zutuanxue ~]# ps -l</span><br><span class="line">F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY    TIME 		CMD</span><br><span class="line">0 S     0   3562   3559  0  80   0 - 12522 -      pts/1  00:00:00 bash</span><br><span class="line">0 T     0 108831   3562  0  80   0 -  9058 -      pts/1  00:00:00 vim</span><br><span class="line">0 R     0 108832   3562  0  80   0 - 11240 -      pts/1  00:00:00 ps</span><br><span class="line"></span><br><span class="line">[1]+  已停止               vim 1</span><br><span class="line">[root@zutuanxue ~]# nice -n 10 vim 2&amp;</span><br><span class="line">[2] 109328</span><br><span class="line">[root@zutuanxue ~]# ps -l</span><br><span class="line">F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY    TIME 		CMD</span><br><span class="line">0 S     0   3562   3559  0  80   0 - 12522 -      pts/1  00:00:00 bash</span><br><span class="line">0 T     0 108831   3562  0  80   0 -  9058 -      pts/1  00:00:00 vim</span><br><span class="line">0 T     0 109328   3562  0  90  10 -  9058 -      pts/1  00:00:00 vim</span><br><span class="line">0 R     0 109396   3562  0  80   0 - 11240 -      pts/1  00:00:00 ps</span><br><span class="line"></span><br><span class="line">[2]+  已停止               nice -n 10 vim 2</span><br><span class="line">[root@zutuanxue ~]# nice -n -20 vim 3 &amp;</span><br><span class="line">[3] 109470</span><br><span class="line">[root@zutuanxue ~]# ps -l</span><br><span class="line">F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY    TIME 		CMD</span><br><span class="line">0 S     0   3562   3559  0  80   0 - 12522 -      pts/1  00:00:00 bash</span><br><span class="line">0 T     0 108831   3562  0  80   0 -  9058 -      pts/1  00:00:00 vim</span><br><span class="line">0 T     0 109328   3562  0  90  10 -  9058 -      pts/1  00:00:00 vim</span><br><span class="line">4 T     0 109470   3562  0  60 -20 -  9058 -      pts/1  00:00:00 vim</span><br><span class="line">0 R     0 109471   3562  0  80   0 - 11240 -      pts/1  00:00:00 ps</span><br><span class="line"></span><br><span class="line">[3]+  已停止               nice -n -20 vim 3</span><br><span class="line"></span><br><span class="line">那如何调整一个已经启动的进程的优先级呢？</span><br><span class="line">[root@zutuanxue ~]# vim 1 &amp;</span><br><span class="line">[1] 115098</span><br><span class="line">[root@zutuanxue ~]# vim 2 &amp;</span><br><span class="line">[2] 115099</span><br><span class="line"></span><br><span class="line">[1]+  已停止               vim 1</span><br><span class="line">[root@zutuanxue ~]# ps -l</span><br><span class="line">F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD</span><br><span class="line">0 S     0   3562   3559  0  80   0 - 12522 -      pts/1    00:00:00 bash</span><br><span class="line">0 T     0 115098   3562  0  80   0 -  9058 -      pts/1    00:00:00 vim</span><br><span class="line">0 T     0 115099   3562  0  80   0 -  9058 -      pts/1    00:00:00 vim</span><br><span class="line">0 R     0 115100   3562  0  80   0 - 11240 -      pts/1    00:00:00 ps</span><br><span class="line"></span><br><span class="line">[2]+  已停止               vim 2</span><br><span class="line">[root@zutuanxue ~]# renice 10 115098</span><br><span class="line">115098 (process ID) 旧优先级为 0，新优先级为 10</span><br><span class="line">[root@zutuanxue ~]# renice -10 115099</span><br><span class="line">115099 (process ID) 旧优先级为 0，新优先级为 -10</span><br><span class="line">[root@zutuanxue ~]# ps -l</span><br><span class="line">F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY    TIME 		CMD</span><br><span class="line">0 S     0   3562   3559  0  80   0 - 12522 -      pts/1  00:00:00 bash</span><br><span class="line">0 T     0 115098   3562  0  90  10 -  9058 -      pts/1  00:00:00 vim</span><br><span class="line">0 T     0 115099   3562  0  70 -10 -  9058 -      pts/1  00:00:00 vim</span><br><span class="line">0 R     0 115736   3562  0  80   0 - 11240 -      pts/1  00:00:00 ps </span><br></pre></td></tr></table></figure>

<h1 id="linux-网络管理"><a href="#linux-网络管理" class="headerlink" title="linux 网络管理"></a>linux 网络管理</h1><p> 阅读 (203386) </p>
<p> 分享</p>
<p>现代人的生活越来越依赖网络，对于一个操作系统来讲，网络功能的支持和管理就更为重要了，本节课我们一起来看一下在CentOS8中如何对网络进行管理</p>
<h2 id="NetworkManager和常用工具和基本用法"><a href="#NetworkManager和常用工具和基本用法" class="headerlink" title="NetworkManager和常用工具和基本用法"></a>NetworkManager和常用工具和基本用法</h2><h3 id="NetworkManager介绍"><a href="#NetworkManager介绍" class="headerlink" title="NetworkManager介绍"></a>NetworkManager介绍</h3><p>在linux系统中传统的网络管理方法是用过一个叫network的服务来实现，在CentOS7中依然有这个服务的身影，但是到了CentOS8中已经不使用network这个服务了，而是使用了一个叫NetworkManager的服务，这个服务可以简化我们管理有线和无线连接的工作，除此之外它还能管理不同类型的网络，包括物理网卡，虚拟网卡，以太网，非以太网等</p>
<h4 id="常用工具"><a href="#常用工具" class="headerlink" title="常用工具"></a>常用工具</h4><ul>
<li>nmcli：命令行工具</li>
<li>nmtui：文本图形界面工具</li>
<li>cockpit：基于web的管理工具</li>
</ul>
<h4 id="nmcli基本用法"><a href="#nmcli基本用法" class="headerlink" title="nmcli基本用法"></a>nmcli基本用法</h4><p>nmcli命令的用法类似linux中以前的ip命令，而且支持tab补全，另外也可以使用-h或者–help获取帮助</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli -h</span><br><span class="line">[root@zutuanxue ~]# nmcli connection -h</span><br><span class="line">可以看到，在不同的阶段获取到的帮助内容是不一样的，具体的用法我们后面会看到</span><br><span class="line"></span><br><span class="line">nmcli这个工具有两个常用的命令</span><br><span class="line">nmcli connection（nmcli c）	与连接相关的操作</span><br><span class="line">[root@zutuanxue network-scripts]# nmcli connection </span><br><span class="line">NAME   UUID                                  TYPE      DEVICE</span><br><span class="line">连接名	 设备的UUID（通用唯一识别码）							设备类型		设备名称</span><br><span class="line">ens33  b5ecf570-543c-4da7-b082-bdc073b56acb  ethernet  ens33  </span><br><span class="line">ens37  077945cb-1d12-4c06-bba3-562426336b67  ethernet  -- </span><br><span class="line">在查看时，有颜色的字体标注的是处于活跃状态的网卡，也就是连接的，正常颜色字体标记的是非活跃状态的网卡，也就是未连接的，未连接的不生效</span><br><span class="line">nmcli device	（nmcli d）		与设备相关的操作</span><br><span class="line">[root@zutuanxue network-scripts]# nmcli device </span><br><span class="line">DEVICE  TYPE      STATE   CONNECTION </span><br><span class="line">设备名		设备类型	 设备状态	 连接名称</span><br><span class="line">ens33   ethernet  已连接  ens33      </span><br><span class="line">ens37   ethernet  已断开  --         </span><br><span class="line">lo      loopback  未托管  -- </span><br><span class="line"></span><br><span class="line">在日常使用中这两个命令相互配合，通过nmcli device可以查看到有哪些网络设备是被NetworkManager托管，通过nmcli connection控制网络设备的连接状态</span><br></pre></td></tr></table></figure>

<h3 id="使用nmcli命令设置网卡信息"><a href="#使用nmcli命令设置网卡信息" class="headerlink" title="使用nmcli命令设置网卡信息"></a>使用nmcli命令设置网卡信息</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">查看网卡信息</span><br><span class="line">[root@zutuanxue ~]# nmcli </span><br><span class="line">ens33: 已连接 to ens33	#设备状态和名称</span><br><span class="line">  &quot;Intel 82545EM&quot;	#设备型号</span><br><span class="line">  ethernet (e1000), 00:0C:29:11:47:97, 硬件, mtu 1500</span><br><span class="line">  ip4 默认</span><br><span class="line">  inet4 192.168.1.55/24</span><br><span class="line">  route4 0.0.0.0/0</span><br><span class="line">  route4 192.168.1.0/24</span><br><span class="line">  inet6 fe80::ea62:91c6:114:18bb/64</span><br><span class="line">  route6 fe80::/64</span><br><span class="line">  route6 ff00::/8</span><br><span class="line"></span><br><span class="line">为网卡设置静态IP</span><br><span class="line">[root@zutuanxue ~]# nmcli connection add type ethernet con-name ens-test1 ifname ens37 ipv4.addresses 192.168.18.100/24 ipv4.gateway 192.168.18.1 ipv4.method manual </span><br><span class="line">连接 &quot;ens-test1&quot; (da7fdc9a-e7cc-4a1c-8b2c-7751ed2fc4d2) 已成功添加。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">启用新添加的连接</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up ens-test1 </span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/16） </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看连接状态</span><br><span class="line">[root@zutuanxue ~]# nmcli connection </span><br><span class="line">NAME       UUID            TYPE      DEVICE </span><br><span class="line">ens33      b5ecf5...		  ethernet  ens33  </span><br><span class="line">ens-test1  da7fdc...		  ethernet  ens37  </span><br><span class="line">ens37      077945...		  ethernet  --     </span><br><span class="line"></span><br><span class="line">为网卡设置动态IP</span><br><span class="line">[root@zutuanxue ~]# nmcli connection add type ethernet con-name ens-test2 ifname ens37 ipv4.method auto</span><br><span class="line">连接 &quot;ens-test2&quot; (25b9dd2f-a4c0-452d-bd22-992cf12b55b2) 已成功添加。</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up ens-test2 </span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/17）</span><br><span class="line">[root@zutuanxue ~]# nmcli connection </span><br><span class="line">NAME       UUID              TYPE      DEVICE </span><br><span class="line">ens33      b5ec...					 ethernet  ens33  </span><br><span class="line">ens-test2  25b9...					 ethernet  ens37  </span><br><span class="line">ens37      0779...					 ethernet  --     </span><br><span class="line">ens-test1  da7f...					 ethernet  --     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">交互式设置IP地址</span><br><span class="line">[root@zutuanxue ~]# nmcli connection edit ens-test1 </span><br><span class="line">nmcli&gt; goto ipv4.addresses </span><br><span class="line">nmcli ipv4.addresses&gt; change</span><br><span class="line">编辑 &quot;addresses&quot; 值：192.168.20.100/24</span><br><span class="line">您是否也要将 &quot;ipv4.method&quot; 设为 &quot;manual&quot;？[yes]：yes</span><br><span class="line">nmcli ipv4.addresses&gt; back</span><br><span class="line">nmcli ipv4&gt; save</span><br><span class="line">成功地更新了连接 &quot;ens-test1&quot; (da7fdc9a-e7cc-4a1c-8b2c-7751ed2fc4d2)。</span><br><span class="line">nmcli ipv4&gt; activate </span><br><span class="line">正在监视连接激活（按任意键继续）</span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/18）</span><br><span class="line"></span><br><span class="line">nmcli ipv4&gt; quit</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# nmcli </span><br><span class="line">ens37: 已连接 to ens-test1</span><br><span class="line">  &quot;Intel 82545EM&quot;</span><br><span class="line">  ethernet (e1000), 00:0C:29:11:47:A1, 硬件, mtu 1500</span><br><span class="line">  ip4 默认</span><br><span class="line">  inet4 192.168.20.100/24</span><br><span class="line">  route4 192.168.20.0/24</span><br><span class="line">  route4 192.168.18.1/32</span><br><span class="line">  route4 0.0.0.0/0</span><br><span class="line">  inet6 fe80::11c3:e0a4:f62e:9f31/64</span><br><span class="line">  route6 fe80::/64</span><br><span class="line">  route6 ff00::/8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">启用和停用</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up ens-test1 </span><br><span class="line">连接已成功激活（D-Bus 活动路径：...</span><br><span class="line">[root@zutuanxue ~]# nmcli connection down ens-test1 </span><br><span class="line">成功停用连接 &quot;ens-test1&quot;（D-Bus 活动路...</span><br><span class="line"></span><br><span class="line">删除连接</span><br><span class="line">[root@zutuanxue ~]# nmcli connection delete ens-test1 </span><br><span class="line">成功删除连接 &quot;ens-test1&quot; (4fc43f65-ea53-43a1-85d4-692e425fcd7d)。</span><br><span class="line">[root@zutuanxue ~]# nmcli connection </span><br><span class="line">NAME   UUID     TYPE      DEVICE </span><br><span class="line">ens33  b5ec...	ethernet  ens33  </span><br><span class="line">ens37  0779...	ethernet  ens37  </span><br><span class="line">[root@zutuanxue ~]# nmcli connection show</span><br><span class="line">NAME   UUID     TYPE      DEVICE </span><br><span class="line">ens33  b5ec...  ethernet  ens33  </span><br><span class="line">ens37  0779...  ethernet  ens37  </span><br><span class="line"></span><br><span class="line">重新加载设置(不会立即生效)</span><br><span class="line">[root@zutuanxue ~]# nmcli connection reload</span><br><span class="line"></span><br><span class="line">重新加载指定的设置(不会立即生效)</span><br><span class="line">[root@zutuanxue ~]# nmcli connection load /etc/sysconfig/network-scripts/ifcfg-ens37</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">生效方法</span><br><span class="line">			</span><br><span class="line">启用设备</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up  ens37</span><br><span class="line">连接已成功激活（D-Bus 活动路径...</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">连接设备并更新设备</span><br><span class="line">[root@zutuanxue ~]# nmcli device connect ens37			</span><br><span class="line">[root@zutuanxue ~]# nmcli device reapply ens37</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看设备&amp;查看设备的详细信息</span><br><span class="line">[root@zutuanxue ~]# nmcli device </span><br><span class="line">DEVICE  TYPE      STATE   CONNECTION </span><br><span class="line">ens37   ethernet  已连接  ens37      </span><br><span class="line">ens33   ethernet  已连接  ens33      </span><br><span class="line">lo      loopback  未托管  --         </span><br><span class="line">[root@zutuanxue ~]# nmcli device show ens33</span><br><span class="line">GENERAL.DEVICE:                         ens33</span><br><span class="line">GENERAL.TYPE:                           ethernet</span><br><span class="line">GENERAL.HWADDR:                         00:0C:29:11:47:97</span><br><span class="line">GENERAL.MTU:                            1500</span><br><span class="line">GENERAL.STATE:                          100（已连接）</span><br><span class="line">GENERAL.CONNECTION:                     ens33</span><br><span class="line">GENERAL.CON-PATH:         /org/freedesktop/NetworkMana...</span><br><span class="line">WIRED-PROPERTIES.CARRIER:               开</span><br><span class="line">IP4.ADDRESS[1]:                         192.168.1.55/24</span><br><span class="line">IP4.GATEWAY:                            --</span><br><span class="line">IP4.ROUTE[1]:           dst = 192.168.1.0/24, nh = 0.0.0.0, mt = 102</span><br><span class="line">IP4.DNS[1]:             202.106.0.20</span><br><span class="line">IP4.DNS[2]:             114.114.114.114</span><br><span class="line">IP6.ADDRESS[1]:         fe80::ea62:91c6:114:18bb/64</span><br><span class="line">IP6.GATEWAY:            --</span><br><span class="line">IP6.ROUTE[1]:           dst = fe80::/64, nh = ::, mt = 102</span><br><span class="line">IP6.ROUTE[2]:           dst = ff00::/8, nh = ::, mt = 256, table=255</span><br><span class="line"></span><br><span class="line">连接/断开网卡</span><br><span class="line">[root@zutuanxue ~]# nmcli device connect/disconnect ens37</span><br><span class="line"></span><br><span class="line">开启/关闭无线网络</span><br><span class="line">[root@zutuanxue ~]# nmcli radio all on/off</span><br><span class="line"></span><br><span class="line">开启/关闭NetworkManager的网络管理功能</span><br><span class="line">[root@zutuanxue ~]# nmcli networking on/off</span><br><span class="line"></span><br><span class="line">监控网络状态</span><br><span class="line">[root@zutuanxue ~]# nmcli monitor (ctrl+c结束)</span><br><span class="line">ens37: 停用中</span><br><span class="line">网络管理器现在处于 &quot;已连接（仅本地）&quot; 状态</span><br><span class="line">连接性现在是 &quot;受限&quot;</span><br><span class="line">ens37: 已断开</span><br><span class="line"></span><br><span class="line">询问NetworkManager网络连接状态(默认等待30秒)</span><br><span class="line">[root@zutuanxue ~]# nm-online </span><br><span class="line">正在连接...............   30s [online]</span><br></pre></td></tr></table></figure>

<h3 id="使用其他网络管理方式配置网络"><a href="#使用其他网络管理方式配置网络" class="headerlink" title="使用其他网络管理方式配置网络"></a>使用其他网络管理方式配置网络</h3><ul>
<li>nmtui</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmtui</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602407640250.png" alt="image20191128171950048.png"></p>
<ul>
<li>cockpit</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# rpm -qa | grep cockpit</span><br><span class="line">cockpit-packagekit-184.1-1.el8.noarch</span><br><span class="line">cockpit-system-185-2.el8.noarch</span><br><span class="line">cockpit-185-2.el8.x86_64</span><br><span class="line">cockpit-bridge-185-2.el8.x86_64</span><br><span class="line">cockpit-ws-185-2.el8.x86_64</span><br><span class="line">cockpit-storaged-184.1-1.el8.noarch</span><br><span class="line">[root@zutuanxue ~]# systemctl start cockpit</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602407654490.png" alt="image20191128172456779.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/11/1602407665857.png" alt="image20191128172540728.png"></p>
<h1 id="linux-nmcli命令详解"><a href="#linux-nmcli命令详解" class="headerlink" title="linux nmcli命令详解"></a>linux nmcli命令详解</h1><p> 阅读 (280220) </p>
<p> 分享</p>
<h2 id="nmcli-connection及常用选项"><a href="#nmcli-connection及常用选项" class="headerlink" title="nmcli connection及常用选项"></a>nmcli connection及常用选项</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli connection </span><br><span class="line">add		添加</span><br><span class="line">delete 		删除</span><br><span class="line">edit   		编辑</span><br><span class="line">help   		帮助</span><br><span class="line">load   		加载</span><br><span class="line">monitor  	监控</span><br><span class="line">show     	查看</span><br><span class="line">clone  		克隆</span><br><span class="line">down		停用</span><br><span class="line">modify 		修改</span><br><span class="line">reload		重载</span><br><span class="line">up    		启用</span><br><span class="line">		</span><br><span class="line">[root@zutuanxue ~]# nmcli connection modify ens37 ipv4.addresses 192.168.18.100/24 ipv4.gateway 192.168.18.1 ipv4.method manual autoconnect yes</span><br><span class="line">[root@zutuanxue ~]# nmcli connection down ens37</span><br><span class="line">成功停用连接 &quot;ens37&quot;（D-Bus 活动路径：...</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up ens37</span><br><span class="line">连接已成功激活（D-Bus 活动路径：...</span><br><span class="line">[root@zutuanxue ~]# nmcli </span><br><span class="line">ens37: 已连接 to ens37</span><br><span class="line">        &quot;Intel 82545EM&quot;</span><br><span class="line">        ethernet (e1000), 00:0C:29:11:47:A1, 硬件, mtu 1500</span><br><span class="line">        ip4 默认</span><br><span class="line">        inet4 192.168.18.100/24</span><br><span class="line">        route4 192.168.18.0/24</span><br><span class="line">        route4 0.0.0.0/0</span><br><span class="line">        inet6 fe80::4283:ec57:8781:deff/64</span><br><span class="line">        route6 fe80::/64</span><br><span class="line">        route6 ff00::/8</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# nmcli connection clone ens37 ens-test1</span><br><span class="line">ens37 (077945cb-1d12-4c06-bba3-562426336b67) 已克隆为 ens-test1 (ab1cc22a-21b5-4059-9b3e-b9d14b1084fe)。</span><br><span class="line">[root@zutuanxue ~]# nmcli connection </span><br><span class="line">NAME       UUID 				TYPE      DEVICE </span><br><span class="line">ens33      b5ecf...			ethernet  ens33  </span><br><span class="line">ens37      07794...			ethernet  ens37  </span><br><span class="line">ens-test1  ab1cc...			ethernet  --  </span><br><span class="line"></span><br><span class="line">！！！！		此命令在使用时，可以加设备名称，UUID，配置文件</span><br><span class="line">如</span><br><span class="line">[root@zutuanxue ~]# nmcli connection down ens37</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up ens37</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# nmcli connection down 077945cb-1d12-4c06-bba3-562426336b67 </span><br><span class="line">[root@zutuanxue ~]# nmcli connection up 077945cb-1d12-4c06-bba3-562426336b67 </span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# nmcli connection down /etc/sysconfig/network-scripts/ifcfg-ens37 </span><br><span class="line">[root@zutuanxue ~]# nmcli connection up /etc/sysconfig/network-scripts/ifcfg-ens37 </span><br><span class="line"></span><br><span class="line">这三种方式都可以，其中最后一种是网卡配置文件存放的位置，都会以ifcfg-开头，后面加上设备名</span><br></pre></td></tr></table></figure>

<h2 id="nmcli-device及常用选项"><a href="#nmcli-device及常用选项" class="headerlink" title="nmcli device及常用选项"></a>nmcli device及常用选项</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli device </span><br><span class="line">connect     		连接</span><br><span class="line">disconnect  		断开</span><br><span class="line">lldp        		显示通过lldp协议学习到的相邻设备信息</span><br><span class="line">monitor     		监控设备</span><br><span class="line">set         		设置设备</span><br><span class="line">status      		显示设备状态</span><br><span class="line">delete      		删除设备 只能删除软件设备</span><br><span class="line">help        		帮助</span><br><span class="line">modify      		修改</span><br><span class="line">reapply     		更新</span><br><span class="line">show        		查看详细信息</span><br><span class="line">wifi        		无线网络管理</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">[root@zutuanxue ~]# nmcli device modify ens37 +ipv4.addresses 192.168.20.100/24</span><br><span class="line">成功重新应用连接到设备 &quot;ens37&quot;。</span><br><span class="line">[root@zutuanxue ~]# nmcli </span><br><span class="line">ens37: 已连接 to ens37</span><br><span class="line">  &quot;Intel 82545EM&quot;</span><br><span class="line">  ethernet (e1000), 00:0C:29:11:47:A1, 硬件, mtu 1500</span><br><span class="line">  ip4 默认</span><br><span class="line">  inet4 192.168.20.100/24</span><br><span class="line">  inet4 192.168.17.131/24</span><br><span class="line">  route4 0.0.0.0/0</span><br><span class="line">  route4 192.168.17.0/24</span><br><span class="line">  route4 192.168.20.0/24</span><br><span class="line">  inet6 fe80::f91c:608a:8381:2cb4/64</span><br><span class="line">  route6 fe80::/64</span><br></pre></td></tr></table></figure>

<h2 id="nmcli的其他常用设置"><a href="#nmcli的其他常用设置" class="headerlink" title="nmcli的其他常用设置"></a>nmcli的其他常用设置</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli </span><br><span class="line">-t		简洁输出	与-p冲突</span><br><span class="line">-p		人性化输出 与-t冲突</span><br><span class="line">-c		颜色开关 auto/on/off</span><br><span class="line">-f		过滤字段	all查看所有字段       </span><br><span class="line">connection 	连接 </span><br><span class="line">device      	设备</span><br><span class="line">general     	全局</span><br><span class="line">monitor     	监控</span><br><span class="line">networking  	网络</span><br><span class="line">radio       	无线广播</span><br><span class="line">			</span><br><span class="line">例：</span><br><span class="line">[root@zutuanxue ~]# nmcli  -t connection </span><br><span class="line">ens33:b5ecf570-543c-4da7-b082-bdc073b56acb:802-3-ethernet:ens33</span><br><span class="line">ens37:5b91e453-1130-48ce-a2a1-f6f728e072ed:802-3-ethernet:ens37</span><br><span class="line">ens37:077945cb-1d12-4c06-bba3-562426336b67:802-3-ethernet:</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# nmcli -p connection </span><br><span class="line">========================</span><br><span class="line">  网络管理器连接配置集</span><br><span class="line">========================</span><br><span class="line">NAME   UUID          TYPE      DEVICE </span><br><span class="line">----------------------------------------------------</span><br><span class="line">ens33  b5ec...			 ethernet  ens33  </span><br><span class="line">ens37  5b91...			 ethernet  ens37  </span><br><span class="line">ens37  0779...			 ethernet  --     </span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# nmcli -f STATE connection </span><br><span class="line">STATE  </span><br><span class="line">已激活 </span><br><span class="line">已激活 </span><br><span class="line">--     </span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# nmcli general hostname </span><br><span class="line">localhost.localdomain</span><br><span class="line">[root@zutuanxue ~]# nmcli general hostname hello</span><br><span class="line">[root@zutuanxue ~]# nmcli general hostname </span><br><span class="line">hello</span><br></pre></td></tr></table></figure>

<h3 id="nmcli的返回值"><a href="#nmcli的返回值" class="headerlink" title="nmcli的返回值"></a>nmcli的返回值</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0: 成功-指示操作已成功</span><br><span class="line">1: 位置或指定的错误</span><br><span class="line">2: 无效的用户输入，错误的nmcli调用</span><br><span class="line">3: 超时了（请参阅 --wait 选项）</span><br><span class="line">4: 连接激活失败</span><br><span class="line">5: 连接停用失败</span><br><span class="line">6: 断开设备失败</span><br><span class="line">7: 连接删除失败</span><br><span class="line">8: 网络管理器没有运行</span><br><span class="line">10: 连接、设备或接入点不存在</span><br></pre></td></tr></table></figure>

<h1 id="linux网络相关设置"><a href="#linux网络相关设置" class="headerlink" title="linux网络相关设置"></a>linux网络相关设置</h1><p> 阅读 (130892) </p>
<p> 分享</p>
<h2 id="网络配置文件"><a href="#网络配置文件" class="headerlink" title="网络配置文件"></a>网络配置文件</h2><p>&#x2F;etc&#x2F;NetworkManager&#x2F;NetworkManager.conf</p>
<p>NetworkManager服务配置文件，如果没有特殊需求不建议调整，如果需要调整的话，调整之前备份，调整完成重新启动服务</p>
<p>&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-xx网卡配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">网卡配置文件中的关键参数</span><br><span class="line">[root@zutuanxue ~]# cat /etc/sysconfig/network-scripts/ifcfg-ens33 </span><br><span class="line">TYPE=&quot;Ethernet&quot;	网卡类型</span><br><span class="line">BOOTPROTO=&quot;dhcp&quot;	IP获取方式，dhcp/static（none）</span><br><span class="line">DEFROUTE=&quot;yes&quot;		是否设置为IPV4默认路由</span><br><span class="line">NAME=&quot;ens33&quot;	连接名称</span><br><span class="line">UUID=&quot;b5ecf570-543c-4da7-b082-bdc073b56acb&quot; 网卡识别号</span><br><span class="line">DEVICE=&quot;ens33&quot;	设备名称</span><br><span class="line">ONBOOT=&quot;yes&quot;		是否开机自动启动此网络连接</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">额外设置参数</span><br><span class="line">NM_CONTROLLED=yes	是否被NetworkManager服务管理，默认yes</span><br><span class="line">IPADDR			ip地址</span><br><span class="line">NETMASK			子网掩码</span><br><span class="line">GATEWAY			定义网关</span><br><span class="line">DNS1			dns地址	优先级高于/etc/resolv.conf</span><br><span class="line">DNS2			dns地址</span><br><span class="line">USERCTL			是否允许普通用户控制此设备</span><br><span class="line">PEERDNS			是否允许自动修改dns配置文件/etc/resolv.conf</span><br><span class="line">PREFIX			掩码长度</span><br></pre></td></tr></table></figure>

<p>&#x2F;etc&#x2F;hostname 主机名配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /etc/hostname </span><br><span class="line">hello</span><br></pre></td></tr></table></figure>

<p>&#x2F;etc&#x2F;resolv.conf DNS配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /etc/resolv.conf </span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">search localdomain</span><br><span class="line">nameserver 192.168.17.2</span><br><span class="line">nameserver 202.106.0.20</span><br><span class="line">nameserver 114.114.114.114</span><br></pre></td></tr></table></figure>

<h2 id="其它命令"><a href="#其它命令" class="headerlink" title="其它命令"></a>其它命令</h2><ul>
<li>ifconfig命令:查看网卡信息</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# ifconfig</span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500		连接信息</span><br><span class="line">        inet 192.168.1.55  netmask 255.255.255.0  broadcast 192.168.1.255	IPV4地址信息</span><br><span class="line">        inet6 fe80::ea62:91c6:114:18bb  prefixlen 64  scopeid 0x20&lt;link&gt;	IPV6地址信息</span><br><span class="line">        ether 00:0c:29:11:47:97  txqueuelen 1000  (Ethernet)	mac地址</span><br><span class="line">        RX packets 174914  bytes 51397660 (49.0 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0   接收到的数据包统计</span><br><span class="line">        TX packets 24446  bytes 3114546 (2.9 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0	发送的数据包统计</span><br><span class="line">停用网卡</span><br><span class="line">[root@zutuanxue ~]# ifconfig ens37 down</span><br><span class="line">启用网卡</span><br><span class="line">[root@zutuanxue ~]# ifconfig ens37 up</span><br><span class="line">设置一个临时IP</span><br><span class="line">[root@zutuanxue ~]# ifconfig ens37 192.168.18.100</span><br></pre></td></tr></table></figure>

<ul>
<li>route命令：设置路由</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# route</span><br><span class="line">	-n	 以数字的形式显示路由信息</span><br><span class="line">	add/del	 添加/删除路由信息，需要配合下面参数使用</span><br><span class="line">	-net	 指定为一个网络</span><br><span class="line">	-host	 指定为一台主机</span><br><span class="line">	netmask	 指定掩码</span><br><span class="line">	gw	 指定网关</span><br><span class="line">	dev	 指定设备</span><br><span class="line">	</span><br><span class="line">Destination    Gateway   	Genmask  			Flags  	Metric Ref  Use  Iface</span><br><span class="line">0.0.0.0    		192.168.1.1 0.0.0.0   		UG    	102    0    0 	 ens33</span><br><span class="line">192.168.1.0 	0.0.0.0    	255.255.255.0 U     	102    0    0 	 ens33</span><br><span class="line">192.168.20.0  0.0.0.0     255.255.255.0 U     	100    0    0 	 ens37</span><br><span class="line"></span><br><span class="line">主要信息</span><br><span class="line">Destination		目的地址    </span><br><span class="line">Gateway   		网关</span><br><span class="line">Genmask  			掩码</span><br><span class="line">Flags  				标识	U=启用，H=主机，G=网关	</span><br><span class="line">Iface					接口</span><br><span class="line">添加路由信息</span><br><span class="line">[root@zutuanxue ~]#route add -net 192.168.20.0/24 dev ens37</span><br><span class="line">删除路由信息</span><br><span class="line">[root@zutuanxue ~]#route del -net 192.168.20.0/24	dev ens37</span><br><span class="line"></span><br><span class="line">dhclient获取与释放IP地址</span><br><span class="line">[root@zutuanxue ~]# dhclient -r ens37</span><br><span class="line">[root@zutuanxue ~]# dhclient ens37</span><br><span class="line"></span><br><span class="line">ping连通性测试工具</span><br><span class="line">[root@zutuanxue ~]# ping</span><br><span class="line">	c			指定次数</span><br><span class="line">	n			以数字的形式显示结果</span><br><span class="line">	f			洪水ping，以最快的速度收发数据包，慎用</span><br><span class="line">	</span><br><span class="line">[root@zutuanxue ~]# ping -c 5 -n www.163.com</span><br><span class="line">PING z163ipv6.v.bsgslb.cn (111.202.34.27) 56(84) bytes of data.</span><br><span class="line">64 bytes from 111.202.34.27: icmp_seq=1 ttl=128 time=5.25 ms</span><br><span class="line">64 bytes from 111.202.34.27: icmp_seq=2 ttl=128 time=8.54 ms</span><br><span class="line">64 bytes from 111.202.34.27: icmp_seq=3 ttl=128 time=6.22 ms</span><br><span class="line">64 bytes from 111.202.34.27: icmp_seq=4 ttl=128 time=5.78 ms</span><br><span class="line">64 bytes from 111.202.34.27: icmp_seq=5 ttl=128 time=5.60 ms</span><br><span class="line"></span><br><span class="line">--- z163ipv6.v.bsgslb.cn ping statistics ---</span><br><span class="line">5 packets transmitted, 5 received, 0% packet loss, time 13ms</span><br><span class="line">rtt min/avg/max/mdev = 5.253/6.278/8.536/1.173 ms</span><br></pre></td></tr></table></figure>

<h1 id="linux-路由管理"><a href="#linux-路由管理" class="headerlink" title="linux 路由管理"></a>linux 路由管理</h1><p> 阅读 (126403) </p>
<p> 分享</p>
<p>在前面的课程中我们知道使用route命令可以添加主机的路由信息，但是一旦系统重启相关的设置信息就会丢失,那么如何设置一个重启也不会丢失的路由信息呢?</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# ifconfig</span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.98.200  netmask 255.255.255.0  broadcast 192.168.98.255</span><br><span class="line">        inet6 fe80::2386:3dbd:531c:7bc1  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:a6:ad:95  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 37  bytes 4386 (4.2 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">ens37: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.123.123  netmask 255.255.255.0  broadcast 192.168.123.255</span><br><span class="line">        inet6 fe80::a848:f674:db3b:a83e  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:a6:ad:9f  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 5  bytes 1758 (1.7 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 38  bytes 4390 (4.2 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">#我现在有两块网卡,这两块网卡的ip地址分别是192.168.98.200和192.168.123.123,假如发送到192.168.1.0/24这个网段的数据包需要通过200这块网卡发送出去,而发送到192.168.100.0/24这个网段的数据包需要通过123这块网卡发送出去,我该如何设置呢?使用命令的话我们可以</span><br><span class="line">[root@zutuanxue ~]# route add -net 192.168.1.0/24 gateway 192.168.98.1 dev ens33</span><br><span class="line">[root@zutuanxue ~]# route add -net 192.168.100.0/24 gateway 192.168.123.1 dev ens37</span><br><span class="line">[root@zutuanxue ~]# route -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">192.168.1.0     192.168.98.1    255.255.255.0   UG    0      0        0 ens33</span><br><span class="line">192.168.98.0    0.0.0.0         255.255.255.0   U     100    0        0 ens33</span><br><span class="line">192.168.100.0   192.168.123.1   255.255.255.0   UG    0      0        0 ens37</span><br><span class="line">192.168.123.0   0.0.0.0         255.255.255.0   U     101    0        0 ens37</span><br><span class="line">#这种方式只是临时的,我们来看一下该如何永久添加</span><br><span class="line">[root@zutuanxue ~]# route del -net 192.168.100.0/24 gateway 192.168.123.1 dev ens37</span><br><span class="line">[root@zutuanxue ~]# route del -net 192.168.1.0/24 gateway 192.168.98.1 dev ens33</span><br><span class="line">[root@zutuanxue ~]# route -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">192.168.98.0    0.0.0.0         255.255.255.0   U     100    0        0 ens33</span><br><span class="line">192.168.123.0   0.0.0.0         255.255.255.0   U     101    0        0 ens37</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# vim /etc/sysconfig/network-scripts/route-ens33</span><br><span class="line">192.168.1.0/24 via 192.168.98.1 dev ens33</span><br><span class="line">[root@zutuanxue ~]# vim /etc/sysconfig/network-scripts/route-ens37</span><br><span class="line">192.168.100.0/24 via 192.168.123.1 dev ens37</span><br><span class="line">[root@zutuanxue ~]# systemctl restart NetworkManager</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# nmcli connection down ens33 ens37 </span><br><span class="line">成功停用连接 &quot;ens33&quot;（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/1）</span><br><span class="line"></span><br><span class="line">成功停用连接 &quot;ens37&quot;（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/2）</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# nmcli connection up ens33 </span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/3）</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up ens37</span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/4）</span><br><span class="line">[root@zutuanxue network-scripts]# route -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">192.168.1.0     192.168.98.1    255.255.255.0   UG    100    0        0 ens33</span><br><span class="line">192.168.98.0    0.0.0.0         255.255.255.0   U     100    0        0 ens33</span><br><span class="line">192.168.100.0   192.168.123.1   255.255.255.0   UG    101    0        0 ens37</span><br><span class="line">192.168.123.0   0.0.0.0         255.255.255.0   U     101    0        0 ens37</span><br></pre></td></tr></table></figure>

<h1 id="linux-聚合链路"><a href="#linux-聚合链路" class="headerlink" title="linux 聚合链路"></a>linux 聚合链路</h1><p> 阅读 (219800) </p>
<p> 分享</p>
<h2 id="聚合链路"><a href="#聚合链路" class="headerlink" title="聚合链路"></a>聚合链路</h2><p>聚合链路是将多块网卡逻辑地连接到一起从而允许故障转移或者提高吞吐率的方法。提高服务器网络可用性。</p>
<p><strong>bond</strong>是将多块网卡虚拟成为一块网卡的技术，通过bond技术让多块网卡看起来是一个单独的以太网接口设备并具有相同的ip地址。在linux下配置bond，通过网卡绑定技术既能增加服务器的可靠性，又增加了可用网络宽带，为用户提供不间断的网络服务。<br><strong>team</strong>是另一种用来实现连路聚合和方法，类似于bond，team和bond的区别在于，支持hash加密，支持负载均衡，支持8块网卡，更好地支持IPV6</p>
<p><strong>实现方式</strong></p>
<ul>
<li>bond</li>
<li>team</li>
</ul>
<h2 id="bond聚合链路"><a href="#bond聚合链路" class="headerlink" title="bond聚合链路"></a>bond聚合链路</h2><h3 id="bond聚合链路模式"><a href="#bond聚合链路模式" class="headerlink" title="bond聚合链路模式"></a>bond聚合链路模式</h3><ul>
<li>mod&#x3D;0 ，即：(balance-rr) Round-robin policy（轮询）<br>聚合口数据报文按包轮询从物理接口转发。<br>– 负载均衡—所有链路处于负载均衡状态，轮询方式往每条链路发送报文这模式的特点增加了带宽，同时支持容错能力，当有链路出问题，会把流量切换到正常的链路上。<br>– 性能问题—一个连接或者会话的数据包如果从不同的接口发出的话，中途再经过不同的链路，在客户端很有可能会出现数据包无序到达的问题，而无序到达的数据包需要重新要求被发送，这样网络的吞吐量就会下降。Bond0在大压力的网络传输下，性能增长的并不是很理想。<br>– 需要交换机进行端口绑定</li>
<li>mod&#x3D;1，即： (active-backup) Active-backup policy（主-备份策略）只有Active状态的物理接口才转发数据报文。<br>– 容错能力—只有一个slave是激活的(active)。也就是说同一时刻只有一个网卡处于工作状态，其他的slave都处于备份状态，只有在当前激活的slave故障后才有可能会变为激活的(active)。<br>– 无负载均衡—此算法的优点是可以提供高网络连接的可用性，但是它的资源利用率较低，只有一个接口处于工作状态，在有 N 个网络接口的情况下，资源利用率为1&#x2F;N。</li>
<li>mod&#x3D;2，即：(balance-xor) XOR policy（平衡策略）<br>聚合口数据报文按源目MAC、源目IP、源目端口进行异或HASH运算得到一个值，根据该值查找接口转发数据报文<br>– 负载均衡—基于指定的传输HASH策略传输数据包。<br>容错能力—这模式的特点增加了带宽，同时支持容错能力，当有链路出问题，会把流量切换到正常的链路上。<br>– 性能问题—该模式将限定流量，以保证到达特定对端的流量总是从同一个接口上发出。既然目的地是通过MAC地址来决定的，因此该模式在“本地”网络配置下可以工作得很好。如果所有流量是通过单个路由器，由于只有一个网关，源和目标mac都固定了，那么这个算法算出的线路就一直是同一条，那么这种模式就没有多少意义了。<br>– 需要交换机配置为port channel</li>
<li>mod&#x3D;3，即：broadcast（广播策略）<br>这种模式的特点是一个报文会复制两份往bond下的两个接口分别发送出去，当有对端交换机失效，我们感觉不到任何downtime，但此法过于浪费资源；不过这种模式有很好的容错机制。此模式适用于金融行业，因为他们需要高可靠性的网络，不允许出现任何问题。</li>
<li>mod&#x3D;4，即：(802.3ad) IEEE 802.3ad Dynamic link aggregation（IEEE 802.3ad 动态链接聚合）<br>在动态聚合模式下，聚合组内的成员端口上均启用LACP（链路汇聚控制协议）协议，其端口状态通过该协议自动进行维护。<br>– 负载均衡—基于指定的传输HASH策略传输数据包。默认算法与blance-xor一样。<br>– 容错能力—这模式的特点增加了带宽，同时支持容错能力，当有链路出问题，会把流量切换到正常的链路上。对比blance-xor，这种模式定期发送LACPDU报文维护链路聚合状态，保证链路质量。<br>– 需要交换机支持LACP协议</li>
<li>mod&#x3D;5，即：(balance-tlb) Adaptive transmit load balancing（适配器传输负载均衡）<br>在每个物理接口上根据当前的负载（根据速度计算）分配外出流量。如果正在接收数据的物理接口口出故障了，另一个物理接口接管该故障物理口的MAC地址。<br>需要ethtool支持获取每个slave的速率</li>
<li>mod&#x3D;6，即：(balance-alb) Adaptive load balancing（适配器适应性负载均衡）<br>该模式包含了balance-tlb模式，同时加上针对IPV4流量的接收负载均衡，而且不需要任何switch(交换机)的支持。接收负载均衡是通过ARP协商实现的。bonding驱动截获本机发送的ARP应答，并把源硬件地址改写为bond中某个物理接口的唯一硬件地址，从而使得不同的对端使用不同的硬件地址进行通信。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">其实mod=6与mod=0的区别：mod=6，先把eth0流量占满，再占eth1，….ethX；而mod=0的话，会发现2个口的流量都很稳定，基本一</span><br><span class="line">样的带宽。而mod=6，会发现第一个口流量很高，第2个口只占了小部分流量</span><br><span class="line"></span><br><span class="line">常用的模式为 0136</span><br><span class="line">mode 1、5、6不需要交换机设置</span><br><span class="line">mode 0、2、3、4需要交换机设置</span><br></pre></td></tr></table></figure>

<p><strong>案例:使用Bond方式设置聚合链路</strong></p>
<p><strong>环境</strong><br>系统：CentOS8<br>网卡名称： ens33（vmnet4） ens37（vmnet4）</p>
<p><strong>step 1：</strong> 查看环境</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli connection </span><br><span class="line">NAME   UUID                                  TYPE      DEVICE </span><br><span class="line">ens33  f035d150-9e89-4ee9-a657-03598d4b0940  ethernet  ens33  </span><br><span class="line">ens37  7726249d-8281-45e8-a8e3-a6a023c64c66  ethernet  ens37</span><br></pre></td></tr></table></figure>

<p><strong>step 2：</strong> 创建bond虚拟网卡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli connection add type bond con-name bond0 ifname bond0 mode 1 ipv4.addresses 192.168.98.200/24 ipv4.method manual autoconnect yes</span><br><span class="line"></span><br><span class="line">#type：创建的类型，这里选择bond类型</span><br><span class="line">#con-name:这里写链接名，就是show中第一列，这里写什么生成的文件就是什么名字</span><br><span class="line">#ifname:网卡名，这里bond0是虚拟出来的</span><br><span class="line">#mode:选择bond模式，常用的有主备，轮询，广播，还有其他模式，用tab补全可以看到所有，也可以使用数字0-6表示</span><br><span class="line">#ipv4.mehod:表示自动还是手动，就是使用dhcp还是自己配置地址，关联配置文件中的BOOTPROTO段</span><br><span class="line">#ipv4.address：设置ip地址，注意记得加上掩码</span><br><span class="line">#autoconnect 自动连接</span><br></pre></td></tr></table></figure>

<p><strong>step 3：</strong> 为bond网卡添加成员（真实网卡）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli connection add type bond-slave ifname ens33 master bond0</span><br><span class="line">连接 &quot;bond-slave-ens33&quot; (9fb9b3fa-a477-4a6f-a3c1-79cbfe351c7d) 已成功添加。</span><br><span class="line">[root@zutuanxue ~]# nmcli connection add type bond-slave ifname ens37 master bond0</span><br><span class="line">连接 &quot;bond-slave-ens37&quot; (2b047e49-b606-4b67-9e5c-f721f1e2ff7a) 已成功添加。</span><br><span class="line">#类型为bond-slave,表示这块真实网卡属于一块附属的网卡，原有配置的属性都不能使用了，master表示这块从属网卡属于bond0这个组</span><br><span class="line">注意：如果你的网卡没有启用的话需要启用</span><br><span class="line">[root@zutuanxue ~]# nmcli connection </span><br><span class="line">NAME              UUID                                  TYPE      DEVICE </span><br><span class="line">bond0             55e0afdc-d2a6-4c93-b346-0ce207947b81  bond      bond0  </span><br><span class="line">bond-slave-ens33  9fb9b3fa-a477-4a6f-a3c1-79cbfe351c7d  ethernet  ens33  </span><br><span class="line">bond-slave-ens37  2b047e49-b606-4b67-9e5c-f721f1e2ff7a  ethernet  ens37  </span><br><span class="line">ens33             f035d150-9e89-4ee9-a657-03598d4b0940  ethernet  --     </span><br><span class="line">ens37             7726249d-8281-45e8-a8e3-a6a023c64c66  ethernet  --     </span><br><span class="line">[root@zutuanxue ~]# ifconfig</span><br><span class="line">bond0: ether 00:0c:29:a6:ad:95  txqueuelen 1000  (Ethernet)</span><br><span class="line">       </span><br><span class="line">ens33: ether 00:0c:29:a6:ad:95  txqueuelen 1000  (Ethernet)</span><br><span class="line">       </span><br><span class="line">ens37: ether 00:0c:29:a6:ad:95  txqueuelen 1000  (Ethernet)</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up bond-slave-ens33</span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/81）</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up bond-slave-ens37</span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/82）</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up bond0</span><br><span class="line">连接已成功激活（master waiting for slaves）（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/83）</span><br></pre></td></tr></table></figure>

<p><strong>step 4：</strong> 查看链接信息并测试</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#查看信息</span><br><span class="line">[root@zutuanxue ~]# cat /proc/net/bonding/bond0 </span><br><span class="line">Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)</span><br><span class="line"></span><br><span class="line">Bonding Mode: fault-tolerance (active-backup)#模式</span><br><span class="line">Primary Slave: None</span><br><span class="line">Currently Active Slave: ens33	#当前设备</span><br><span class="line">MII Status: up	#启用状态</span><br><span class="line">MII Polling Interval (ms): 100</span><br><span class="line">Up Delay (ms): 0</span><br><span class="line">Down Delay (ms): 0</span><br><span class="line"></span><br><span class="line">Slave Interface: ens33	#从接口信息</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:a6:ad:95</span><br><span class="line">Slave queue ID: 0</span><br><span class="line"></span><br><span class="line">Slave Interface: ens37	#另外一个从接口信息</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:a6:ad:9f</span><br><span class="line">Slave queue ID: 0</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# ip add</span><br><span class="line"></span><br><span class="line">ens33: &lt;BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bond0 state UP group default qlen 1000</span><br><span class="line">		link/ether 00:0c:29:a6:ad:95 brd ff:ff:ff:ff:ff:ff</span><br><span class="line"></span><br><span class="line">ens37: &lt;BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bond0 state UP group default qlen 1000</span><br><span class="line">    link/ether 00:0c:29:a6:ad:95 brd ff:ff:ff:ff:ff:ff</span><br><span class="line"></span><br><span class="line">bond0: &lt;BROADCAST,MULTICAST,MASTER,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span><br><span class="line">    link/ether 00:0c:29:a6:ad:95 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.98.200/24 brd 192.168.98.255 scope global noprefixroute bond0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">#找到另外一台主机使用ping进行测试</span><br><span class="line">[root@zutuanxue ~]# nmcli connection down bond-slave-xxx</span><br><span class="line">或者直接断开虚拟的网络连接测试还能否ping通</span><br></pre></td></tr></table></figure>

<p><strong>删除</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmcli connection delete bond0 bond-slave-ens33 bond-slave-ens37</span><br><span class="line">注意：在配置聚合链路的时候如果使用虚拟机可能会弹出与mac地址相关的信息提示，可以暂时不用去管，如果测试的时候发现断网卡之后无法ping通，则需要在相关网卡配置文件中添加参数，如：</span><br><span class="line">[root@zutuanxue ~]# vim /etc/sysconfig/network-scripts/ifcfg-bond0</span><br><span class="line">#添加一行内容</span><br><span class="line">BONDING_OPTS=&quot;miimon=100 mode=1 fail_over_mac=1&quot;</span><br><span class="line">#miimon：链路检查时间为100ms</span><br><span class="line">#mode：模式为1，要与bond的模式相同</span><br><span class="line">#fail_over_mac=1 mac地址跟随正常工作的网卡，当第一块网卡挂掉之后，自动将mac地址调整为第二块网卡的mac</span><br><span class="line"></span><br><span class="line">以上操作只有在虚拟机的环境中使用，生产环境一般不需要</span><br></pre></td></tr></table></figure>

<h2 id="team聚合链路"><a href="#team聚合链路" class="headerlink" title="team聚合链路"></a>team聚合链路</h2><p>案例:使用team方式设置聚合链路</p>
<p>环境<br>系统：CentOS8<br>网卡名称： ens33（vmnet4） ens37（vmnet4）</p>
<p><strong>step 1：</strong> 建立</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli connection add type team con-name team0 ifname team0 config &#x27;&#123;&quot;runner&quot;:&#123;&quot;name&quot;:&quot;activebackup&quot;,&quot;hwaddr_policy&quot;:&quot;by_active&quot;&#125;&#125;&#x27; ipv4.addresses 192.168.98.200/24 ipv4.method manual autoconnect yes</span><br><span class="line"></span><br><span class="line">#JSON语法格式如下：’&#123;“runner”:&#123;“name”:“METHOD”&#125;&#125;’其中METHOD 是以下的其中一个</span><br><span class="line">broadcast=mode3</span><br><span class="line">roundrobin=mode0</span><br><span class="line">activebackup=mode1</span><br><span class="line">loadbalance=mode256</span><br><span class="line">lacp=mode4</span><br><span class="line">#&quot;hwaddr_policy&quot;:&quot;by_active&quot;：硬件地址跟随活跃的网卡，也就是未故障的网卡</span><br><span class="line">#聚合链路获取mac的地址有两种方式,一种是从第一个活跃网卡中获取mac地址，然后其余的SLAVE网卡的mac地址都使用该mac地址;另一种是使用hwaddr_policy参数，team使用当前活跃网卡的mac地址，mac地址随活跃网卡的转换而变，虚机不支持第一种获取MAC地址的方式。</span><br></pre></td></tr></table></figure>

<p><strong>step 2：</strong> 添加网卡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli connection add type team-slave ifname ens33 master team0</span><br><span class="line">[root@zutuanxue ~]# nmcli connection add type team-slave ifname ens37 master team0</span><br></pre></td></tr></table></figure>

<p><strong>step 3：</strong> 启用连接</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# nmcli connection up team-slave-ens33</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up team-slave-ens37</span><br><span class="line">[root@zutuanxue ~]# nmcli connection up team0</span><br></pre></td></tr></table></figure>

<p><strong>step 4：</strong> 查看状态</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# teamdctl team0 stat</span><br><span class="line">setup:</span><br><span class="line">  runner: activebackup</span><br><span class="line">ports:</span><br><span class="line">  ens33</span><br><span class="line">    link watches:</span><br><span class="line">      link summary: up</span><br><span class="line">      instance[link_watch_0]:</span><br><span class="line">        name: ethtool</span><br><span class="line">        link: up</span><br><span class="line">        down count: 0</span><br><span class="line">  ens37</span><br><span class="line">    link watches:</span><br><span class="line">      link summary: up</span><br><span class="line">      instance[link_watch_0]:</span><br><span class="line">        name: ethtool</span><br><span class="line">        link: up</span><br><span class="line">        down count: 0</span><br><span class="line">runner:</span><br><span class="line">  active port: ens37</span><br></pre></td></tr></table></figure>

<h1 id="linux网络故障排查"><a href="#linux网络故障排查" class="headerlink" title="linux网络故障排查"></a>linux网络故障排查</h1><p> 阅读 (243211) </p>
<p> 分享</p>
<p>在日常使用中，经常会出现无法连通的情况，这个时候我们就需要找到问题出在哪里，这里面给各位提供一个生产环境排查网络故障的大体思路，一般情况下如果遇到网络故障，都是通过筛选的方式一点一点的确定问题所在，首先判断是本机的问题还是网络上其它设备的问题，如果同一网络环境中的其它主机正常的，要去其它网络设备（路由器）上查看一下是否对网络有问题的主机设置了限制，如果没有的话，问题出在本机，这里面我们主要看下下本机容易出现哪些问题导致页面无法访问</p>
<h2 id="一、网线和网卡设置"><a href="#一、网线和网卡设置" class="headerlink" title="一、网线和网卡设置"></a>一、网线和网卡设置</h2><p>检查网卡的灯是否亮起，普通服务器的话应该是绿灯常亮为正常，交换机绿灯闪烁表示正在传输数据。也可以通过命令ethtool ethX来查看某一网卡的链路是否物理连通。</p>
<p>命令介绍</p>
<p>ethtool</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# ethtool ens33</span><br><span class="line">Settings for ens33:</span><br><span class="line">	Supported ports: [ TP ]</span><br><span class="line">	#接口类型</span><br><span class="line">	#TP 	RJ45接口双绞线</span><br><span class="line">	#AUI 	“D”型15针接口</span><br><span class="line">	#BNC 	细同轴电缆接口，类似于以前的有线电视	</span><br><span class="line">	#MII 	媒体独立接口，一种以太网行业标准</span><br><span class="line">	#FIBRE	光纤</span><br><span class="line">	Supported link modes:   10baseT/Half 10baseT/Full </span><br><span class="line">	                        100baseT/Half 				    																						100baseT/Full </span><br><span class="line">	                        1000baseT/Full </span><br><span class="line">	#支持的链接模式</span><br><span class="line">	Supported pause frame use: No</span><br><span class="line">	#是否支持暂停帧--一种网卡流量控制技术</span><br><span class="line">	Supports auto-negotiation: Yes</span><br><span class="line">	#是否支持自动协商，网络设备相互告知对方自己的工作方式，包括传输速度，双工状态等，然后选择一个最佳的</span><br><span class="line">	Supported FEC modes: Not reported</span><br><span class="line">	#编码纠错模式，支持编码纠错可提高数据通讯可信度</span><br><span class="line">	Advertised link modes:  10baseT/Half 10baseT/Full </span><br><span class="line">	                        100baseT/Half</span><br><span class="line">                          100baseT/Full </span><br><span class="line">	                        1000baseT/Full</span><br><span class="line">  #宣告的链接模式</span><br><span class="line">	Advertised pause frame use: No</span><br><span class="line">	#宣告的是否支持帧暂停</span><br><span class="line">	Advertised auto-negotiation: Yes</span><br><span class="line">	#宣告的是否支持自动协商</span><br><span class="line">	Advertised FEC modes: Not reported</span><br><span class="line">	#宣告的是否FEC</span><br><span class="line">	Speed: 1000Mb/s</span><br><span class="line">	#当前速度</span><br><span class="line">	Duplex: Full</span><br><span class="line">	#全双工还是半双工</span><br><span class="line">	Port: Twisted Pair</span><br><span class="line">	#线缆类型为双绞线</span><br><span class="line">	PHYAD: 0</span><br><span class="line">	#PHY地址，主要指PHY芯片，用来发送和接收数据帧</span><br><span class="line">	Transceiver: internal</span><br><span class="line">	#收发器类型 internal/external（内部外部）是否是板载的</span><br><span class="line">	Auto-negotiation: on</span><br><span class="line">	#自动协商功能开启</span><br><span class="line">	MDI-X: off (auto)</span><br><span class="line">	#自适应功能</span><br><span class="line">	Supports Wake-on: d</span><br><span class="line">	#是否支持远程唤醒 d=禁用，p\u\m\b\a\g=不同唤醒方式</span><br><span class="line">	Wake-on: d</span><br><span class="line">	Current message level: 0x00000007 (7)	drv probe link</span><br><span class="line">	Link detected: yes</span><br><span class="line">	#网卡已连接</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	##############常用参数</span><br><span class="line">#-a 查看网卡中 接收模块RX、发送模块TX和Autonegotiate模块的状态：启动on 或 停用off。主要指接收暂停，发送暂停和自动协商暂停功能，也就是暂停帧，主要用于控制数据路停止发送，可以防止瞬间压力过大导致缓冲区溢出而引发的帧丢失（丢包）</span><br><span class="line">#[root@zutuanxue ~]# ethtool -a ens33</span><br><span class="line">Pause parameters for ens33:</span><br><span class="line">Autonegotiate:	on</span><br><span class="line">RX:		off</span><br><span class="line">TX:		off</span><br><span class="line"></span><br><span class="line">#-A 修改网卡中 接收模块RX、发送模块TX和Autonegotiate模块的状态：启动on 或 停用off。</span><br><span class="line">[root@zutuanxue ~]# ethtool -A ens33 rx/tx/autoneg on</span><br><span class="line"></span><br><span class="line">#-i 显示网卡驱动的信息，如驱动的名称、版本等。</span><br><span class="line">[root@zutuanxue ~]# ethtool -i ens33</span><br><span class="line">driver: e1000</span><br><span class="line">version: 7.3.21-k8-NAPI</span><br><span class="line">firmware-version: </span><br><span class="line">expansion-rom-version: </span><br><span class="line">bus-info: 0000:02:01.0</span><br><span class="line">supports-statistics: yes</span><br><span class="line">supports-test: yes</span><br><span class="line">supports-eeprom-access: yes</span><br><span class="line">supports-register-dump: yes</span><br><span class="line">supports-priv-flags: no</span><br><span class="line"></span><br><span class="line">#-k 显示网卡各项功能的支持和协议状态，如支持某个协议的功能是否开启等</span><br><span class="line">#-p 用于区别不同ethX对应网卡的物理位置，常用的方法是使网卡port上的led不断的闪；N为网卡闪的持续时间，以秒为单位。</span><br><span class="line">[root@zutuanxue ~]# ethtool -p ens33 10</span><br><span class="line"></span><br><span class="line">#-r 如果自动协商状态为on，则重启自动协商功能。</span><br><span class="line">[root@zutuanxue ~]# ethtool -r ens33</span><br><span class="line"></span><br><span class="line">#-S 显示统计参数，如网卡接收/发送的字节数、接收/发送的广播包个数等。</span><br><span class="line">[root@zutuanxue ~]# ethtool -S ens33</span><br><span class="line">NIC statistics:</span><br><span class="line">     rx_packets: 609</span><br><span class="line">     tx_packets: 130</span><br><span class="line">     rx_bytes: 121330</span><br><span class="line">     tx_bytes: 16066</span><br><span class="line">     rx_broadcast: 0</span><br><span class="line"></span><br><span class="line">#-s 修改网卡的部分配置，包括网卡速度、单工/全双工模式、mac地址等。</span><br><span class="line">	ethtool –s ethX [speed 10|100|1000]</span><br><span class="line">									#设置网口速率10/100/1000M</span><br><span class="line">									[duplex half|full]</span><br><span class="line">									#设置网口半/全双工</span><br><span class="line">									[autoneg on|off]</span><br><span class="line">									#设置网口是否自协商</span><br><span class="line">									[port tp|aui|bnc|mii]</span><br><span class="line">									#设置网口类型</span><br><span class="line">[root@zutuanxue ~]# ethtool -s ens33 speed 1000 duplex full autoneg on port tp</span><br></pre></td></tr></table></figure>

<h2 id="二、selinux-amp-防火墙"><a href="#二、selinux-amp-防火墙" class="headerlink" title="二、selinux&amp;防火墙"></a>二、selinux&amp;防火墙</h2><p>这两个是最容易产生干扰的项目，selinux和防火墙如何关闭，我们在前面的课程中有涉及，这里就不重复了</p>
<h2 id="三、查看网卡ip地址，网关设置"><a href="#三、查看网卡ip地址，网关设置" class="headerlink" title="三、查看网卡ip地址，网关设置"></a>三、查看网卡ip地址，网关设置</h2><p>使用ifconfig或者nmcli命令查看&#x2F;设置ip地址和网关</p>
<h2 id="四、使用ping命令测试连通性"><a href="#四、使用ping命令测试连通性" class="headerlink" title="四、使用ping命令测试连通性"></a>四、使用ping命令测试连通性</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-c&lt;完成次数&gt;：设置完成要求回应的次数；</span><br><span class="line">-f：洪水ping只有root可以使用</span><br><span class="line">-i&lt;间隔秒数&gt;：指定收发信息的间隔时间；</span><br><span class="line">-n：只输出数值,不尝试去查找主机名</span><br><span class="line">-s&lt;数据包大小&gt;：设置数据包的大小；</span><br><span class="line">-I 指定源地址（源地址必须是本地网卡上存在的配置）</span><br><span class="line">[root@zutuanxuers1 ~]# ping -c 3 -i 0.5 -n  -s 1024 -I 192.168.2.220 192.168.2.220</span><br><span class="line">PING 192.168.2.220 (192.168.2.220) from 192.168.2.220 : 1024(1052) bytes of data.</span><br><span class="line">1032 bytes from 192.168.2.220: icmp_seq=1 ttl=64 time=0.047 ms</span><br><span class="line">1032 bytes from 192.168.2.220: icmp_seq=2 ttl=64 time=0.060 ms</span><br><span class="line">1032 bytes from 192.168.2.220: icmp_seq=3 ttl=64 time=0.053 ms</span><br><span class="line"></span><br><span class="line">--- 192.168.2.220 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 13ms</span><br><span class="line">rtt min/avg/max/mdev = 0.047/0.053/0.060/0.008 ms</span><br></pre></td></tr></table></figure>

<h2 id="五、路由"><a href="#五、路由" class="headerlink" title="五、路由"></a>五、路由</h2><p>使用route命令查看或设置路由及网关，也可以通过修改静态路由配置文件实现</p>
<h2 id="六、DNS"><a href="#六、DNS" class="headerlink" title="六、DNS"></a>六、DNS</h2><ul>
<li>&#x2F;etc&#x2F;hosts&amp;&#x2F;etc&#x2F;resolv.conf</li>
<li>nslookup</li>
<li>dig</li>
<li>host</li>
</ul>
<h2 id="七、追踪数据包"><a href="#七、追踪数据包" class="headerlink" title="七、追踪数据包"></a>七、追踪数据包</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tracepath  [参数选项]  hostname，域名或 IP地址</span><br><span class="line">#替代了以前的traceroute</span><br><span class="line">参数选项：</span><br><span class="line">-4	使用IPV4</span><br><span class="line">-6	使用IPV6=tracepath6</span><br><span class="line">-l	设置初始包的大小 默认IPV4 65535，ipv6 128000</span><br><span class="line">-m 	设置检测数据包的TTL，默认值为30次；</span><br><span class="line">-n 	显示IP地址，不查主机名。当DNS不起作用时常用到这个参数；</span><br><span class="line">-b	显示主机名和IP地址</span><br><span class="line">-p 	port 探测包使用的基本UDP端口设置为port ，默认值是33434</span><br><span class="line">[root@zutuanxuers1 ~]# tracepath -b www.baidu.com -l 1000 -m 5</span><br><span class="line"> 1:  localhost (192.168.0.1)                              18.324ms </span><br><span class="line"> 2:  localhost (192.168.1.1)                              15.622ms </span><br><span class="line"> 3:  localhost (10.70.0.1)                                18.640ms </span><br><span class="line"> 4:  114.244.94.25 (114.244.94.25)                         7.213ms </span><br><span class="line"> 5:  124.65.56.141 (124.65.56.141)                        16.020ms </span><br><span class="line">     Too many hops: pmtu 1000</span><br><span class="line">     Resume: pmtu 1000 </span><br></pre></td></tr></table></figure>

<h2 id="八、硬件故障"><a href="#八、硬件故障" class="headerlink" title="八、硬件故障"></a>八、硬件故障</h2><p>更换硬件</p>
<h1 id="linux日志管理"><a href="#linux日志管理" class="headerlink" title="linux日志管理"></a>linux日志管理</h1><p> 阅读 (140878) </p>
<p> 分享</p>
<h2 id="一、日志服务的介绍"><a href="#一、日志服务的介绍" class="headerlink" title="一、日志服务的介绍"></a>一、日志服务的介绍</h2><h3 id="日志介绍"><a href="#日志介绍" class="headerlink" title="日志介绍"></a>日志介绍</h3><p>程序执行的时候，可以通过标准输出（stdout, Standard Output）与标准错误输出 （stderr, Standard Error Output）来输送信息，用户就可以了解该程序执行时发生了什么状况；可是对于在后台执行的服务器程序，或者Linux 内核本身来说，就没有办法这样做了。服务与内核启动后，会切断与终端机（Terminal） 或控制台（Console）的联机，如此一来，即使有信息通过标准输出、标准错误输出传送出去，用户也未必能从屏幕上看到信息。</p>
<p>更何况，用户根本不可能全天候在计算机前面，盯着屏幕上显示的信息啊！为了让 管理者可以随时监控服务所产生的信息，Linux 提供了一个日志服务，该服务可以收集（Collect）任何服务传递过来的信息，储存成为记录文件（Log File） 、或直接传送给某些用户，甚至也可以传送到其他计算机的系统日志服务。</p>
<h3 id="日志的作用"><a href="#日志的作用" class="headerlink" title="日志的作用"></a>日志的作用</h3><p><strong>系统方面的问题</strong></p>
<p>linux系统长时间运行，可能会出现一些软件，硬件方面的问题，这些问题都会记录到日志文件中，我们可以通过查看相应的日志文件，找出问题所在</p>
<p><strong>网络服务的问题</strong></p>
<p>网络服务在运行过程中产生的信息都会记录到日志文件中，一旦服务出现问题，无法正常运行，我们可以通过查看相应的日志文件就知道服务出现了什么问题</p>
<p><strong>历史事件查询</strong></p>
<p>由于日志服务每天都会将系统运行的信息保存到日志文件当中，所以我们也可以通过日志信息去追溯之前的系统运行状况</p>
<h2 id="二、相关软件包和文件"><a href="#二、相关软件包和文件" class="headerlink" title="二、相关软件包和文件"></a>二、相关软件包和文件</h2><h3 id="软件包"><a href="#软件包" class="headerlink" title="软件包"></a>软件包</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# rpm -qa | grep rsyslog</span><br><span class="line">rsyslog-gssapi-8.37.0-9.el8.x86_64</span><br><span class="line">rsyslog-relp-8.37.0-9.el8.x86_64</span><br><span class="line">rsyslog-8.37.0-9.el8.x86_64</span><br><span class="line">rsyslog-gnutls-8.37.0-9.el8.x86_64</span><br></pre></td></tr></table></figure>

<h3 id="相关文件-1"><a href="#相关文件-1" class="headerlink" title="相关文件"></a>相关文件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">配置文件：/etc/rsyslog.conf</span><br><span class="line"></span><br><span class="line">辅助配置文件：/etc/rsyslog.d/*.conf</span><br><span class="line"></span><br><span class="line">日志文件存放位置：	/var/log/</span><br><span class="line"></span><br><span class="line">执行文件：/usr/sbin/rsyslogd</span><br><span class="line"></span><br><span class="line">模块路径：/usr/lib64/rsyslog/</span><br><span class="line"></span><br><span class="line">服务单元：/usr/lib/systemd/system/rsyslog.service</span><br></pre></td></tr></table></figure>

<h2 id="三、配置文件说明"><a href="#三、配置文件说明" class="headerlink" title="三、配置文件说明"></a>三、配置文件说明</h2><h3 id="x2F-etc-x2F-rsyslog-conf"><a href="#x2F-etc-x2F-rsyslog-conf" class="headerlink" title="&#x2F;etc&#x2F;rsyslog.conf"></a>&#x2F;etc&#x2F;rsyslog.conf</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue yum.repos.d]# grep &#x27;####&#x27; /etc/rsyslog.conf </span><br><span class="line">#### MODULES ####定义模块</span><br><span class="line">#### GLOBAL DIRECTIVES ####定义全局环境</span><br><span class="line">#### RULES ####	定义规则</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">模块定义</span><br><span class="line">module(load=&quot;imuxsock&quot;    # 提供对本地系统日志的支持</span><br><span class="line">       SysSock.Use=&quot;off&quot;) # 关闭通过本地日志接口的信息接收功能，日志信息接收通过下面的imjournal模块</span><br><span class="line">module(load=&quot;imjournal&quot;             # 提供对systemd日志的访问</span><br><span class="line">       StateFile=&quot;imjournal.state&quot;) # 定义状态文件，rsyslog用于记录文件上传进度，避免日志内容混乱</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">全局环境设置</span><br><span class="line"># 定义工作目录</span><br><span class="line">global(workDirectory=&quot;/var/lib/rsyslog&quot;)</span><br><span class="line"></span><br><span class="line"># 使用默认的时间戳格式</span><br><span class="line">module(load=&quot;builtin:omfile&quot; Template=&quot;RSYSLOG_TraditionalFileFormat&quot;)</span><br><span class="line"></span><br><span class="line"># 定义辅助配置文件位置</span><br><span class="line">include(file=&quot;/etc/rsyslog.d/*.conf&quot; mode=&quot;optional&quot;)</span><br><span class="line"></span><br><span class="line">规则设置</span><br><span class="line">信息来源.安全级别	 处理方式</span><br><span class="line"></span><br><span class="line">信息来源</span><br><span class="line"> 	 kern：内核相关的日志</span><br><span class="line"> 	 user：用户相关的日志</span><br><span class="line">        mail：邮件相关的日志</span><br><span class="line">        daemon：系统服务相关的日志</span><br><span class="line">        lpr： 打印相关的日志</span><br><span class="line">        cron：计划任务相关的日志</span><br><span class="line">        authpriv:认证相关的日志</span><br><span class="line">        news：新闻相关的日志</span><br><span class="line">        uucp：文件copy相关的日志</span><br><span class="line">        local0-local7：自定义相关的日志信息</span><br><span class="line">	*：		所有</span><br><span class="line">安全级别</span><br><span class="line">       debug:  调试</span><br><span class="line">	info:   消息</span><br><span class="line">	notice: 注意</span><br><span class="line">    	warn,warning: 警告</span><br><span class="line">	err,error: 错误</span><br><span class="line">	crit: 严重级别</span><br><span class="line">	alert: 需要立即修改该的信息</span><br><span class="line">	emerg,panic: 内核崩溃，系统接近崩溃</span><br><span class="line">	*：所有日志级别</span><br><span class="line">       	none:没有任何级别，也就是不记录日志信息</span><br><span class="line"></span><br><span class="line">表达形式</span><br><span class="line">mail.err		err+crit+alert+emerg</span><br><span class="line">mail.=err		err</span><br><span class="line">mail.!err		除了err</span><br><span class="line"></span><br><span class="line">处理方式</span><br><span class="line">/PATH/FILENAME：将信息储存至 /PATH/FILENAME文件中。注意，如果要系统日志服务把信息储存到文件，该文件必须以</span><br><span class="line">斜线（/） 开头的绝对路径命名之。</span><br><span class="line">USERNAME：将信息送给已登录的用户。</span><br><span class="line">@HOSTNAME：代表使用udp协议将信息转送到远端的日志服务器。</span><br><span class="line">@@hostname：代表使用tcp协议将信息传送到远端的日志服务器</span><br><span class="line">*：将信息传送给所有已登录的用户。</span><br></pre></td></tr></table></figure>

<h3 id="常见的日志文件及作用"><a href="#常见的日志文件及作用" class="headerlink" title="常见的日志文件及作用"></a>常见的日志文件及作用</h3><p>&#x2F;var&#x2F;log&#x2F;boot.log 系统启动时的日志。</p>
<p>&#x2F;var&#x2F;log&#x2F;dnf.* dnf软件包管理器相关日志</p>
<p>&#x2F;var&#x2F;log&#x2F;firewalld 防火墙日志</p>
<p>&#x2F;var&#x2F;log&#x2F;lastlog 所有用户最后一次登录信息,需要使用lastlog命令查看</p>
<p>&#x2F;var&#x2F;log&#x2F;maillog 电子邮件系统相关日志</p>
<p>&#x2F;var&#x2F;log&#x2F;messages 整体的系统日志，具体记录范围取决于服务的配置文件</p>
<p>&#x2F;var&#x2F;log&#x2F;wtmp 记录当前登录和过去登录的用户信息，使用last命令查看</p>
<h3 id="日志文件的安全设置"><a href="#日志文件的安全设置" class="headerlink" title="日志文件的安全设置"></a>日志文件的安全设置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# chattr +a /var/log/messages </span><br><span class="line">[root@zutuanxue ~]# lsattr /var/log/messages </span><br><span class="line">-----a------------ /var/log/messages</span><br></pre></td></tr></table></figure>

<h3 id="日志的格式"><a href="#日志的格式" class="headerlink" title="日志的格式"></a>日志的格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# tail /var/log/messages </span><br><span class="line">Dec  6 03:29:09 localhost systemd[1]: Started PackageKit Daemon.</span><br><span class="line">Dec  6 03:43:44 localhost systemd[1]: Starting dnf makecache...</span><br><span class="line">Dec  6 03:43:44 localhost dnf[7594]: 元数据缓存近期已刷新。</span><br><span class="line">Dec  6 03:43:44 localhost systemd[1]: Started dnf makecache.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DATE  TIME  HOSTNAME  APP（NAME）[PID]: MESSAGES</span><br><span class="line"></span><br><span class="line">每一个字段的意义如下说明：</span><br><span class="line">DATE：信息发生的日期。</span><br><span class="line">TIME：信息发生的时间。</span><br><span class="line">HOSTNAME：信息发生的主机。</span><br><span class="line">APP：产生信息的软件。</span><br><span class="line">NAME：软件的名称，或是软件组件（Component）的名称。可以省略。</span><br><span class="line">PID：进程标识符 （Process ID）。可以省略。</span><br><span class="line">MESSAGES：信息的内容。 </span><br></pre></td></tr></table></figure>

<h2 id="四、日志切割"><a href="#四、日志切割" class="headerlink" title="四、日志切割"></a>四、日志切割</h2><p><strong>日志切割介绍</strong></p>
<p>随着系统时间使用的增长，日志文件的体积会越来越大，过大的日志文件对于查看或者备份来讲都是极为不便的。所以linux系统提供了一个日志切割工具，这个工具就是logrotate，用户可以用过这个工具对日志文件进行切割，系统也利用这个工具配合计划任务服务，定期的对系统日志进行切割。</p>
<p><strong>相关文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/etc/logrotate.conf	主配置文件，定义日志切割规则</span><br><span class="line">/etc/logrotate.d/	辅助配置文件，可以让用户针对不类型的信息，定义不同的切割规则</span><br></pre></td></tr></table></figure>

<p><strong>主配置文件说明</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# vim /etc/logrotate.conf </span><br><span class="line">weekly	#定义切割周期为每周一次</span><br><span class="line">rotate 4 #默认保留四个文件</span><br><span class="line">create	 #切割完成后，建立一个新的文件继续存储日志信息</span><br><span class="line">dateext	#定义切割后的文件名中要包含日期信息</span><br><span class="line">include /etc/logrotate.d #辅助配置文件的存放位置</span><br></pre></td></tr></table></figure>

<p><strong>辅助配置文件说明</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">格式</span><br><span class="line">日志文件的名称(绝对路径)	&#123;</span><br><span class="line">	额外的设置</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# vim /etc/logrotate.d/syslog </span><br><span class="line">/var/log/cron</span><br><span class="line">/var/log/maillog</span><br><span class="line">/var/log/messages</span><br><span class="line">/var/log/secure</span><br><span class="line">/var/log/spooler</span><br><span class="line">&#123;</span><br><span class="line">    missingok	 #如果文件丢失，转到下一个文件，不报告错误信息</span><br><span class="line">    sharedscripts #定义执行的脚本，需要与endscript结合使用</span><br><span class="line">    postrotate	#定义执行完logrotate操作之后，执行的操作</span><br><span class="line">		/usr/bin/systemctl kill -s HUP rsyslog.service &gt;/dev/null 2&gt;&amp;1 || true #重启日志服务</span><br><span class="line">    endscript	#定义执行的脚本，需要sharedscripts结合使用。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>logrotate</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# logrotate -vf /etc/logrotate.conf </span><br><span class="line">#参数说明 </span><br><span class="line">v	 显示详细信息</span><br><span class="line">f	 强制切割</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# logrotate -vf /etc/logrotate.conf</span><br><span class="line">[root@zutuanxue log]# cd /var/log/</span><br><span class="line">[root@zutuanxue log]# ls</span><br><span class="line">secure-20191206		boot.log-20191206		maillog-20191206</span><br><span class="line">btmp-20191206			messages-20191206		spooler-20191206</span><br><span class="line">wtmp-20191206			cron-20191206</span><br></pre></td></tr></table></figure>

<p><strong>系统如何使用logrotate</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">linux系统通过计划任务去定期的执行切割动作</span><br><span class="line">[root@zutuanxue ~]# cat /etc/cron.daily/logrotate</span><br><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">/usr/sbin/logrotate /etc/logrotate.conf</span><br><span class="line">EXITVALUE=$?</span><br><span class="line">if [ $EXITVALUE != 0 ]; then</span><br><span class="line">    /usr/bin/logger -t logrotate &quot;ALERT exited abnormally with [$EXITVALUE]&quot;</span><br><span class="line">fi</span><br><span class="line">exit $EXITVALUE</span><br><span class="line">此文件定义了如果切割的操作执行成功的话，会调用logger命令记录一条标签为logrotate的日志信息到日志文件里</span><br></pre></td></tr></table></figure>

<h2 id="五、systemd-journald-service"><a href="#五、systemd-journald-service" class="headerlink" title="五、systemd-journald.service"></a>五、systemd-journald.service</h2><p>很早之前，日志信息是需要等到开机完成并启动日志服务之后才会开始记录的，这种方式会导致开机过程中的信息无法记录，为了避免这种情况，内核用一个叫klogd的服务来记录开机过程中产生的日志信息，然后等到日志服务启动完再将这些信息交给日志服务。</p>
<p> 现在linux系统采用systemd来管理系统服务，而systemd又是第一个启动的服务，所以现在我们通过一个systemd自带的，名字叫systemd-journald的服务来协助记录日志信息。那是不是就意味着我们可以不使用rsyslog这个服务了呢？不能，因为systemd-journald服务使用内存来记录相关日志信息，断电之后内容消失，所以我们不能停止rsyslog服务，而且rsyslog服务有一个很重要的功能，可以对日志内容进行分类。</p>
<p> <strong>journalctl命令</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemd-journald提供了一个叫journalctl的工具用来查询它所记录的信息</span><br><span class="line">[root@zutuanxue ~]# journalctl </span><br><span class="line"> -n		显示最后的几行内容，默认为10行</span><br><span class="line"> -r		倒序输出，最新的日志先输出</span><br><span class="line"> -S/--since	开始的时间</span><br><span class="line"> -U/--until	结束的时间</span><br><span class="line"> -p		指定日志等级0-7，（0=emerg，1=alert，2=crit，3=err，4=warninig，5=notice，6=info，7=debug）如：4代表的就是0-4</span><br><span class="line">-f		持续输出，类似于tail的-f	使用ctrl+c结束</span><br><span class="line">--disk-usage	磁盘空间占用</span><br><span class="line">-u		指定单元，如 -u crond.service</span><br><span class="line">--vacuum-size	释放日志文件占用的空间，如	--vacuum-size 1G</span><br><span class="line">_PID=0		查看指定PID的信息</span><br><span class="line">_UID=0		查看指定UID的信息</span><br><span class="line">		</span><br><span class="line">[root@zutuanxue ~]# journalctl --since &quot;YYYY-MM-DD 00:00:00&quot; --until &quot;YYYY-MM-DD 00:00:00&quot;</span><br><span class="line">[root@zutuanxue ~]# journalctl --since today</span><br><span class="line">[root@zutuanxue ~]# journalctl --since yesterday --until today</span><br><span class="line">[root@zutuanxue ~]# journalctl -u crond.service</span><br><span class="line">[root@zutuanxue ~]# journalctl _SYSTEM_UNIT=crond.service</span><br></pre></td></tr></table></figure>

<h2 id="六、日志分析工具"><a href="#六、日志分析工具" class="headerlink" title="六、日志分析工具"></a>六、日志分析工具</h2><p>虽然我们有相关的工具来查看日志信息，但是如果信息量过大的话查看起来也是比较费时的，所以linux系统给我们提供了一个日志分析工具，这个工具叫logwatch，它会每天分析日志信息，并将信息通过邮件的形式发送给root用户</p>
<p><strong>安装logwatch及相关软件包</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# dnf install logwatch -y</span><br><span class="line">[root@zutuanxue ~]# dnf install sendmail -y</span><br><span class="line">[root@zutuanxue ~]# systemctl start sendmail</span><br><span class="line">[root@zutuanxue ~]# ll /etc/cron.daily/0logwatch </span><br><span class="line">-rwxr-xr-x 1 root root 434 5月  11 2019 /etc/cron.daily/0logwatch</span><br><span class="line">[root@zutuanxue ~]# /etc/cron.daily/0logwatch </span><br><span class="line">[root@zutuanxue ~]# mail</span><br><span class="line">Heirloom Mail version 12.5 7/5/10.  Type ? for help.</span><br><span class="line">&quot;/var/spool/mail/root&quot;: 2 messages 1 new</span><br><span class="line">1 logwatch@zutuanxue.l Sat Dec 7 01:50 57/2011 &quot;Logwatch for localhos&quot;</span><br><span class="line">&gt;N 2 logwatch@zutuanxue.l Sat Dec 7 01:52 56/2000 &quot;Logwatch for localhos&quot;</span><br><span class="line">输入数字查看对应的邮件，输入q退出</span><br></pre></td></tr></table></figure>

<h1 id="linux日志服务器部署"><a href="#linux日志服务器部署" class="headerlink" title="linux日志服务器部署"></a>linux日志服务器部署</h1><p> 阅读 (162126) </p>
<p> 分享</p>
<h2 id="集中式日志服务器介绍"><a href="#集中式日志服务器介绍" class="headerlink" title="集中式日志服务器介绍"></a>集中式日志服务器介绍</h2><p>如果你负责管理数台的 Linux，你得登录每一台Linux 后，才能阅读其中的信息！ 这样是不是很麻烦？？ 那有没有什么更好的方案呢？</p>
<p>Linux 的系统日志服务，允许你把信息传递到某一台 Linux 的系统日志服务中；那你就可以把一台 Linux 作为日志服务器 （<em>Log Server</em>），而其他的 Linux 则当作日志客户端。此时，在作为日志服务器中就可以保存所有日志客户端产生的信息，因此，你就可以在日志服务器中阅读信息，而不用登录到其他的主机了。</p>
<h3 id="搭建流程"><a href="#搭建流程" class="headerlink" title="搭建流程"></a><strong>搭建流程</strong></h3><h4 id="环境准备："><a href="#环境准备：" class="headerlink" title="环境准备："></a>环境准备：</h4><p>server：192.168.1.55</p>
<p>client：192.168.1.18</p>
<h4 id="关闭SELinux和防火墙"><a href="#关闭SELinux和防火墙" class="headerlink" title="关闭SELinux和防火墙"></a>关闭SELinux和防火墙</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">关闭SELinux</span><br><span class="line">[root@zutuanxue ~]# vim /etc/sysconfig/selinux</span><br><span class="line">SELINUX=disabled</span><br><span class="line">[root@zutuanxue ~]# reboot</span><br><span class="line"></span><br><span class="line">关闭防火墙</span><br><span class="line">[root@zutuanxue ~]# systemctl stop firewalld</span><br><span class="line">[root@zutuanxue ~]# systemctl disable firewalld</span><br></pre></td></tr></table></figure>

<h4 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h4><p><strong>setp 1 修改server端rsyslog服务配置文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server</span><br><span class="line">[root@zutuanxue ~]# vim /etc/rsyslog.conf</span><br><span class="line">开放通过UDP协议514端口接收日志信息功能</span><br><span class="line"> 19 module(load=&quot;imudp&quot;) </span><br><span class="line"> 20 input(type=&quot;imudp&quot; port=&quot;514&quot;)</span><br><span class="line">开放通过TCP协议514端口接收日志信息功能</span><br><span class="line"> 24 module(load=&quot;imtcp&quot;)</span><br><span class="line"> 25 input(type=&quot;imtcp&quot; port=&quot;514&quot;)</span><br></pre></td></tr></table></figure>


<p><strong>step 2 重启server端rsyslog服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl restart rsyslog		#重启日志服务</span><br><span class="line">[root@zutuanxue ~]# systemctl status rsyslog		#确认服务启动状态</span><br></pre></td></tr></table></figure>

<p><strong>step 3 修改client端rsyslog服务配置文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">client</span><br><span class="line">[root@zutuanxue ~]# vim /etc/rsyslog.conf </span><br><span class="line"> 67 *.*   			@192.168.1.55			</span><br><span class="line"> #告知客户端将所有日志信息使用UDP协议传送到日志服务器，日志服务器的ip地址为192.168.1.55</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> 68 #*.*              @@192.168.1.55</span><br><span class="line"> #也可以使用@@告诉客户端将所有日志信息使用TCP协议传送到日志服务器</span><br></pre></td></tr></table></figure>

<p><strong>step 4 重启client端rsyslog服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl restart rsyslog		#重启日志服务</span><br><span class="line">[root@zutuanxue ~]# systemctl status rsyslog		#查看服务状态</span><br></pre></td></tr></table></figure>

<p> <strong>step 5 测试</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server端使用tail命令查看日志信息</span><br><span class="line">[root@zutuanxue ~]# tail -f /var/log/messages </span><br><span class="line"></span><br><span class="line">client使用logger工具产生测试日志</span><br><span class="line">[root@zutuanxue ~]# logger &quot;this is a test from 192.168.1.18&quot;</span><br><span class="line"></span><br><span class="line">如果在server端能查看到logger工具产生的内容就证明集中式日志服务器搭建成功</span><br><span class="line">Dec  6 21:18:21 localhost root[2519]: this is a test from 192.168.1.18</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注：其它的client端的设置都是相同的，这样我们就可以将很多台linux主机的日志信息都收集到一台主机上，方便查阅和后期的日志备份</span><br><span class="line">工作。</span><br></pre></td></tr></table></figure>

<h1 id="构建可视化日志管理服务器"><a href="#构建可视化日志管理服务器" class="headerlink" title="构建可视化日志管理服务器"></a>构建可视化日志管理服务器</h1><p> 阅读 (190511) </p>
<p> 分享</p>
<p>我们可以通过集中式日志服务器将多台机器的日志收集在一个日志服务器，然后通过脚本或者其他方式去分析，但是真正做过运维的小伙伴明白，日子收集在硬盘上，硬盘的空间有限且大文件分析起来IO压力超级大，分析日志需要高超的技术，一般运维人员分析起来会很困难，更无法实时的去查看某个机器的日志。这样的话我们的日志收集就变成了真正意义上的收集了，收集起来如何利用就变成了一个难题，总结一下主要的问题就是以下几点：</p>
<ul>
<li>日志文件巨大，硬盘IO压力大</li>
<li>无法实时分析</li>
<li>分析需要消耗很多计算机资源且困难</li>
</ul>
<p>如何解决这个问题呢？</p>
<ul>
<li>IO压力:我们可以将日志收集在数据库中，海量的日志通过分布式存储的底层支撑加上数据库对数据的高效管理，使得数据读写变得轻松，避免了原理日志服务器的IO压力。</li>
<li>无法实时分析：可以部署一个日志分析系统来辅助分析，苦难的分析工作瞬间变得简单。</li>
<li>分析需要消耗很多计算机资源：分布式处理分担处理压力</li>
</ul>
<p>接下来我就给大家介绍一款高性能的日志收集、存储、分析架构，<br>同时也是一个可以使用web页面查看日志的可视化架构：</p>
<h3 id="rsyslog-mariadb-loganalyzer"><a href="#rsyslog-mariadb-loganalyzer" class="headerlink" title="rsyslog+mariadb+loganalyzer"></a>rsyslog+mariadb+loganalyzer</h3><p>环境准备：与前面课程提到的集中式日志服务器的架构一样，只是这个架构是在server上搭建的，也就是IP地址为192.168.1.55的这台主机上</p>
<h3 id="server端的环境准备和设置"><a href="#server端的环境准备和设置" class="headerlink" title="server端的环境准备和设置"></a>server端的环境准备和设置</h3><p><strong>setp 1 安装所需要的软件包</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# dnf install mariadb mariadb-server rsyslog-mysql -y</span><br></pre></td></tr></table></figure>

<p><strong>step 2 启动mariadb服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl restart mariadb</span><br><span class="line">[root@zutuanxue ~]# systemctl status mariadb</span><br></pre></td></tr></table></figure>

<p>**step 3 设置mariadb **</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">##将mariadb的管理员密码设置为‘123456’</span><br><span class="line">[root@zutuanxue ~]# mysqladmin -u root password 123456</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##建立日志服务需要用到的数据库</span><br><span class="line">[root@zutuanxue ~]# cd /usr/share/doc/rsyslog/</span><br><span class="line">[root@zutuanxue rsyslog]# mysql -u root -p &lt; mysql-createDB.sql </span><br><span class="line">Enter password: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##进入到mariadb中验证一下是否有一个叫Syslog的数据库，如果有就代表前面的操作成功</span><br><span class="line">[root@zutuanxue rsyslog]# mysql -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| Syslog             |</span><br></pre></td></tr></table></figure>

<p><strong>step 4 为后面将要用到的用户进行授权，允许用户访问mairadb中的Syslog库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#允许一个叫syslogroot的用户从127.0.0.1、192.168.1.55、192.168.1.18这三个ip地址访问我的数据库，密码为syslogpass，设置完成之后刷新一下并退出（如果你的架构中还有其它的主机，只要修改数据库语句中的IP地址即可）</span><br><span class="line">MariaDB [(none)]&gt; grant all on Syslog.* to &#x27;syslogroot&#x27;@&#x27;127.0.0.1&#x27;identified by &#x27;syslogpass&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; grant all on Syslog.* to &#x27;syslogroot&#x27;@&#x27;192.168.1.55&#x27;identified by &#x27;syslogpass&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; grant all on Syslog.* to &#x27;syslogroot&#x27;@&#x27;192.168.1.18&#x27;identified by &#x27;syslogpass&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; quit</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure>

<p><strong>setp 5 修改rsyslog服务的配置文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# vim /etc/rsyslog.conf </span><br><span class="line">7 #### MODULES ####</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"> 24 module(load=&quot;imtcp&quot;) # needs to be done just once</span><br><span class="line"> 25 input(type=&quot;imtcp&quot; port=&quot;514&quot;)</span><br><span class="line"> 26 module(load=&quot;ommysql&quot;)#加载一个叫ommysql的模块是日志服务可以连接mariadb</span><br><span class="line"> .</span><br><span class="line"> .</span><br><span class="line"> 65 local7.*                 /var/log    /boot.log</span><br><span class="line"> 66 </span><br><span class="line"> #告诉日志服务通过ommysql模块，将日志信息发送到192.168.1.55的Syslog库中，使用的用户名和密码就是我们在前一步设置的syslogroot,syslogpass</span><br><span class="line"> 67 *.*     :ommysql:192.168.1.55,Syslog,syslogroot,syslogpass</span><br><span class="line"> </span><br><span class="line"> ##重启日志服务</span><br><span class="line"> [root@zutuanxue ~]# systemctl restart rsyslog</span><br></pre></td></tr></table></figure>

<p><strong>step 6 测试一下日志信息能否记录到数据库中</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# logger &quot;hello test test test&quot;</span><br><span class="line">[root@zutuanxue ~]# mysql -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">MariaDB [(none)]&gt; use Syslog;</span><br><span class="line">Database changed</span><br><span class="line">MariaDB [Syslog]&gt; select * from SystemEvents\G</span><br><span class="line">*************************** 8. row ***************************</span><br><span class="line">                ID: 8</span><br><span class="line">        CustomerID: NULL</span><br><span class="line">        ReceivedAt: 2019-12-07 03:22:31</span><br><span class="line">DeviceReportedTime: 2019-12-07 03:22:31</span><br><span class="line">          Facility: 1</span><br><span class="line">          Priority: 5</span><br><span class="line">          FromHost: localhost</span><br><span class="line">           Message: hello test test test</span><br><span class="line">###如果可以看到我们之前使用logger产生的日志信息及代表rsyslog可以将日志信息存入数据库中</span><br></pre></td></tr></table></figure>

<p><strong>step 7 设置client(192.168.1.18),此步骤是唯一一步需要对client的做出的设置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">##安装软件包</span><br><span class="line">[root@zutuanxue ~]# dnf install rsyslog-mysql -y</span><br><span class="line"></span><br><span class="line">##修改服务的配置文件添加相应内容(与server端添加的内容一致)</span><br><span class="line">[root@zutuanxue ~]# vim /etc/rsyslog.conf</span><br><span class="line">module(load=&quot;ommysql&quot;)</span><br><span class="line">*.*     :ommysql:192.168.1.55,Syslog,syslogroot,syslogpass</span><br><span class="line">[root@zutuanxue ~]# systemctl restart rsyslog</span><br><span class="line"></span><br><span class="line">###测试一下client的日志信息能否在server端的数据库中查看</span><br><span class="line">###client</span><br><span class="line">[root@zutuanxue ~]# logger &quot;hello this is a test from client 18&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">####server端使用与刚才相同的方法去查看内容</span><br><span class="line">MariaDB [Syslog]&gt; select * from SystemEvents\G</span><br><span class="line">*************************** 28. row ***************************</span><br><span class="line">                ID: 28</span><br><span class="line">        CustomerID: NULL</span><br><span class="line">        ReceivedAt: 2019-12-07 03:30:28</span><br><span class="line">DeviceReportedTime: 2019-12-07 03:30:28</span><br><span class="line">          Facility: 1</span><br><span class="line">          Priority: 5</span><br><span class="line">          FromHost: localhost</span><br><span class="line">           Message: hello this is a test from client 18</span><br></pre></td></tr></table></figure>

<p><strong>step 8 server端安装支持web页面查看日志的工具loganalyzer</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# dnf install httpd php php-mysqlnd php-gd -y</span><br><span class="line">[root@zutuanxue ~]# tar fx loganalyzer-4.1.8.tar.gz </span><br><span class="line">[root@zutuanxue ~]# cp -r loganalyzer-4.1.8/src/* /var/www/html/</span><br><span class="line">[root@zutuanxue ~]# cp loganalyzer-4.1.8/contrib/* /var/www/html/</span><br><span class="line">[root@zutuanxue ~]# cd /var/www/html/</span><br><span class="line">[root@zutuanxue html]# sh configure.sh </span><br><span class="line">[root@zutuanxue html]# systemctl restart httpd</span><br></pre></td></tr></table></figure>

<p><strong>step 9 在mariadb中创建lyzeruser工具需要用到的库、用户并授权</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue html]# mysql -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">MariaDB [(none)]&gt; create database loganalyzer;</span><br><span class="line">Query OK, 1 row affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; grant all on loganalyzer.* to lyzeruser@&#x27;192.168.1.55&#x27; identified by &#x27;lyzeruser&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; quit</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure>

<p><strong>step 10 打开浏览器，部署loganalyzer</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602984849790.png" alt="image20191207164609190.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602984863824.png" alt="image20191207164635046.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602984880250.png" alt="image20191207164704698.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602984908167.png" alt="image20191207164929730.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602984925448.png" alt="image20191207164950624.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602984941240.png" alt="image20191207165010297.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602984960364.png" alt="image20191207165056960.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602984992390.png" alt="image20191207165711728.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602985008601.png" alt="image20191207165220988.png"></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602985020468.png" alt="image20191207165748067.png"></p>
<h1 id="linux磁盘基本管理"><a href="#linux磁盘基本管理" class="headerlink" title="linux磁盘基本管理"></a>linux磁盘基本管理</h1><p> 阅读 (201146) </p>
<p> 分享</p>
<h2 id="一、磁盘介绍"><a href="#一、磁盘介绍" class="headerlink" title="一、磁盘介绍"></a>一、磁盘介绍</h2><p>磁盘：计算机中的外部存储设备，负责存储计算机数据，并且断电后也能保持数据不丢失。</p>
<p><strong>磁盘分类：</strong></p>
<p>按照物理结构：</p>
<ul>
<li>机械磁盘</li>
<li>固态磁盘</li>
</ul>
<p>按照接口:</p>
<ul>
<li>IDE</li>
<li>SCSI</li>
<li>SATA</li>
<li>SAS</li>
<li>mSATA</li>
<li>M.2</li>
<li>NVME</li>
<li>PCIe</li>
</ul>
<p>按照尺寸：</p>
<ul>
<li>机械硬盘：1.8寸 2.5寸 3.5寸</li>
<li>固态硬盘：SATA: 2.5寸</li>
<li>M.2： 2242、2260、2280</li>
</ul>
<h2 id="二、熟悉磁盘的工作原理"><a href="#二、熟悉磁盘的工作原理" class="headerlink" title="二、熟悉磁盘的工作原理"></a>二、熟悉磁盘的工作原理</h2><p><strong>机械磁盘的读写数据依靠电机带动盘片转动来完成数据读写的。</strong></p>
<h4 id="机械磁盘剖析图"><a href="#机械磁盘剖析图" class="headerlink" title="机械磁盘剖析图"></a>机械磁盘剖析图</h4><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602986110096.jpeg" alt="机械硬盘结构.jpeg"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">为了使磁盘内部清洁，磁盘是在真空特殊环境中制作的，不能随意拆卸，拆开后基本报废了</span><br></pre></td></tr></table></figure>

<p>机械磁盘工作是依靠马达带动盘片转动，通过磁头来读取磁盘上的数据。</p>
<h3 id="磁盘术语"><a href="#磁盘术语" class="headerlink" title="磁盘术语"></a>磁盘术语</h3><h5 id="磁盘"><a href="#磁盘" class="headerlink" title="磁盘"></a>磁盘</h5><p>硬盘中一般会有多个盘片组成，每个盘片包含两个面，每个盘面都对应地有一个读&#x2F;写磁头。受到硬盘整体体积和生产成本的限制，盘片数量都受到限制，一般都在5片以内。盘片的编号自下向上从0开始，如最下边的盘片有0面和1面，再上一个盘片就编号为2面和3面。</p>
<h5 id="磁头"><a href="#磁头" class="headerlink" title="磁头"></a>磁头</h5><p>负责读取盘面数据的设备</p>
<h5 id="磁道"><a href="#磁道" class="headerlink" title="磁道"></a>磁道</h5><p>从盘片的最内侧向外有很多同心圆圈，我们称为磁道</p>
<h5 id="扇区"><a href="#扇区" class="headerlink" title="扇区"></a>扇区</h5><p>从圆心向外画直线，可以将磁道划分为若干个弧段，称之为扇区，一个扇区通常为<strong>512B</strong></p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602986039811.png" alt="disk2.png"></p>
<h5 id="磁柱"><a href="#磁柱" class="headerlink" title="磁柱"></a>磁柱</h5><p>硬盘通常由重叠的一组盘片构成，每个盘面都被划分为数目相等的磁道，并从外缘的“0”开始编号，具有相同编号的磁道形成一个圆柱，称之为磁盘的柱面。磁盘的柱面数与一个盘面上的磁道数是相等的。由于每个盘面都有自己的磁头，因此，盘面数等于总的磁头数。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602986025858.png" alt="disk3.png"></p>
<h2 id="三、磁盘的性能指标"><a href="#三、磁盘的性能指标" class="headerlink" title="三、磁盘的性能指标"></a>三、磁盘的性能指标</h2><h4 id="影响磁盘性能的指标"><a href="#影响磁盘性能的指标" class="headerlink" title="影响磁盘性能的指标"></a>影响磁盘性能的指标</h4><p><strong>寻道时间（seek time）</strong>【和 转速 相关】：Tseek，是指将读写磁头移动至正确的磁道上所需要的时间。寻道时间越短，I&#x2F;O操作越快，目前磁盘的平均寻道时间一般在3-15ms</p>
<p><strong>旋转延迟</strong>：Trotation，是指盘片旋转将请求数据所在的扇区移动到读写磁头下方所需要的时间。旋转延迟取决于磁盘转速，通常用磁盘旋转一周所需时间的1&#x2F;2表示。比如：7200rpm的磁盘平均旋转延迟大约为60*1000&#x2F;7200&#x2F;2 &#x3D; 4.17ms，而转速为15000rpm的磁盘其平均旋转延迟为2ms。</p>
<p><strong>数据传输时间</strong>：Ttransfer，是指完成传输所请求的数据所需要的时间</p>
<h4 id="衡量磁盘性能的指标"><a href="#衡量磁盘性能的指标" class="headerlink" title="衡量磁盘性能的指标"></a>衡量磁盘性能的指标</h4><p><strong>IOPS</strong>：IOPS（Input&#x2F;Output Per Second）即每秒的输入输出量（或读写次数），即指每秒内系统能处理的I&#x2F;O请求数量。随机读写频繁的应用，如小文件存储等，关注随机读写性能，IOPS是关键衡量指标。可以推算出磁盘的IOPS &#x3D; 1000ms &#x2F; (Tseek + Trotation + Transfer)，如果忽略数据传输时间，理论上可以计算出随机读写最大的IOPS。常见磁盘的随机读写最大IOPS为：</p>
<ul>
<li>7200rpm的磁盘 IOPS &#x3D; 76 IOPS</li>
<li>10000rpm的磁盘IOPS &#x3D; 111 IOPS</li>
<li>15000rpm的磁盘IOPS &#x3D; 166 IOPS</li>
</ul>
<p><strong>throughput ：</strong> 吞吐量指单位时间内可以成功传输的数据数量。 单位为（m&#x2F;s G&#x2F;s）</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602986155314.png" alt="3.png"></p>
<p><strong>文件系统：</strong>是告知操作系统使用何种方法和数据结构在存储设备或分区上读写数据的；是分区数据管家，负责如何将数据写入磁盘或者从磁盘读出</p>
<p>NTFS EXT3 EXT4 XFS ISO9660</p>
<p>具体有多少 man mount -t</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">adfs,  affs,  autofs,  cifs,  coda,  coherent, cramfs,debugfs, devpts, efs, ext, ext2, ext3, ext4, hfs, hfsplus, hpfs,iso9660,  jfs, minix, msdos, ncpfs, nfs, nfs4, ntfs, proc, qnx4,ramfs, reiserfs, romfs, squashfs,  smbfs,  sysv,  tmpfs,  ubifs,udf,  ufs,  umsdos,  usbfs,  vfat, xenix, xfs, xiafs.</span><br></pre></td></tr></table></figure>

<p><strong>文件系统可以根据应用场景去选择使用哪一款，如果不会选择，推荐ext4或者XFS</strong></p>
<p><strong>page cache</strong></p>
<p>其实就是内存上空闲的部分 用来缓存数据，比如buffer cache</p>
<p>作用：对IO读写做优化</p>
<p>测试缓存对读写的影响</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">写</span><br><span class="line">[root@zutuanxue ~]# echo 3 &gt; /proc/sys/vm/drop_caches</span><br><span class="line">[root@zutuanxue ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1980          95        1807           9          77        1754</span><br><span class="line">Swap:          2047           0        2047</span><br><span class="line">[root@zutuanxue ~]# dd if=/dev/zero of=/tmp/big bs=1M count=1000</span><br><span class="line">记录了1000+0 的读入</span><br><span class="line">记录了1000+0 的写出</span><br><span class="line">1048576000字节(1.0 GB)已复制，10.2412 秒，102 MB/秒</span><br><span class="line">[root@zutuanxue ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1980          95         779           9        1105        1698</span><br><span class="line">Swap:          2047           0        2047</span><br><span class="line">[root@zutuanxue ~]# dd if=/dev/zero of=/tmp/big1 bs=1M count=1000</span><br><span class="line">记录了1000+0 的读入</span><br><span class="line">记录了1000+0 的写出</span><br><span class="line">1048576000字节(1.0 GB)已复制，7.89978 秒，133 MB/秒</span><br><span class="line"></span><br><span class="line">读</span><br><span class="line">[root@zutuanxue ~]# echo 3 &gt; /proc/sys/vm/drop_caches </span><br><span class="line">[root@zutuanxue ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1980          95        1805           9          79        1753</span><br><span class="line">Swap:          2047           0        2047</span><br><span class="line">[root@zutuanxue ~]# dd if=/tmp/big of=/dev/null </span><br><span class="line">记录了2048000+0 的读入</span><br><span class="line">记录了2048000+0 的写出</span><br><span class="line">1048576000字节(1.0 GB)已复制，2.23965 秒，468 MB/秒</span><br><span class="line">[root@zutuanxue ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1980          95         800           9        1084        1710</span><br><span class="line">Swap:          2047           0        2047</span><br><span class="line">[root@zutuanxue ~]# dd if=/tmp/big of=/dev/null </span><br><span class="line">记录了2048000+0 的读入</span><br><span class="line">记录了2048000+0 的写出</span><br><span class="line">1048576000字节(1.0 GB)已复制，1.92811 秒，544 MB/秒</span><br></pre></td></tr></table></figure>

<h2 id="四、linux磁盘的使用方法"><a href="#四、linux磁盘的使用方法" class="headerlink" title="四、linux磁盘的使用方法"></a>四、linux磁盘的使用方法</h2><h3 id="4-1、磁盘初始化"><a href="#4-1、磁盘初始化" class="headerlink" title="4.1、磁盘初始化"></a><strong>4.1、磁盘初始化</strong></h3><p> <strong>一块新的磁盘使用必须初始化为MBR或者GPT分区。</strong></p>
<ul>
<li><strong>MBR &lt;2TB fdisk</strong> <strong>4个主分区或者3个主分区+1个扩展分区（N个逻辑分区）</strong></li>
</ul>
<p>MBR(Master Boot Record)的缩写，由三部分组成，即：</p>
<ol>
<li><p>Bootloader（主引导程序）&#x3D;</p>
<p>446字节</p>
<ul>
<li>引导操作系统的主程序</li>
</ul>
</li>
<li><p>DPT分区表（Disk Partition Table）&#x3D;</p>
<p>64字节</p>
<ul>
<li>分区表保存了硬盘的分区信息，操作系统通过读取分区表内的信息，就能够获得该硬盘的分区信息</li>
<li>每个分区需要占用16个字节大小，保存有文件系统标识、起止柱面号、磁头号、扇区号、起始扇区位置（4个字节）、分区总扇区数目（4个字节）等内容</li>
<li>分区表中保存的分区信息都是主分区与扩展分区的分区信息，扩展分区不能直接使用，需要在扩展分区内划分一个或多个逻辑分区后才能使用</li>
<li>逻辑分区的分区信息保存在扩展分区内而不是保存在MBR分区表内，这样，就可以突破MBR分区表只能保存4个分区的限制</li>
</ul>
</li>
<li><p>硬盘有效标志（校验位）&#x3D;2个字节</p>
</li>
</ol>
<ul>
<li><strong>GPT &gt;2TB gdisk(parted) 128个主分区</strong></li>
</ul>
<p>注意：从MBR转到GPT，或从GPT转换到MBR会导致<strong>数据全部丢失</strong>！</p>
<h3 id="4-2、分区"><a href="#4-2、分区" class="headerlink" title="4.2、分区"></a><strong>4.2、分区</strong></h3><p> <strong>将磁盘合理分区，能使计算机或者使用者更快的存取数据</strong></p>
<p> MBR 主分区+扩展分区&lt;&#x3D;4</p>
<p> GPT 主分区&lt;&#x3D;128</p>
<h3 id="4-3、格式化"><a href="#4-3、格式化" class="headerlink" title="4.3、格式化"></a><strong>4.3、格式化</strong></h3><p> <strong>装载文件系统(相当于库管，负责数据的写入和读出)。</strong></p>
<p> 常见的文件系统:NTFS EXT EXT2 EXT3 EXT4 XFS vfat</p>
<h3 id="4-4、挂载"><a href="#4-4、挂载" class="headerlink" title="4.4、挂载"></a><strong>4.4、挂载</strong></h3><p> <strong>linux中设备不能直接使用，需要挂载到文件夹才可以。</strong></p>
<p>挂载方式：</p>
<ol>
<li>手动挂载</li>
<li>开机挂载</li>
<li>自动挂载</li>
</ol>
<h1 id="linux-磁盘分区与格式化"><a href="#linux-磁盘分区与格式化" class="headerlink" title="linux 磁盘分区与格式化"></a>linux 磁盘分区与格式化</h1><p> 阅读 (202241) </p>
<p> 分享</p>
<h2 id="一、基本分区管理"><a href="#一、基本分区管理" class="headerlink" title="一、基本分区管理"></a>一、基本分区管理</h2><h3 id="1-1、linux磁盘表示方法介绍"><a href="#1-1、linux磁盘表示方法介绍" class="headerlink" title="1.1、linux磁盘表示方法介绍"></a>1.1、linux磁盘表示方法介绍</h3><h5 id="硬盘命名方式"><a href="#硬盘命名方式" class="headerlink" title="硬盘命名方式"></a>硬盘命名方式</h5><table>
<thead>
<tr>
<th>OS</th>
<th>IDE(并口)</th>
<th>SATA(串口)</th>
<th>SCSI</th>
</tr>
</thead>
<tbody><tr>
<td>CentOS6</td>
<td>&#x2F;dev&#x2F;hda</td>
<td>&#x2F;dev&#x2F;sda</td>
<td>&#x2F;dev&#x2F;sda</td>
</tr>
<tr>
<td>CentOS7</td>
<td>&#x2F;dev&#x2F;sda</td>
<td>&#x2F;dev&#x2F;sda</td>
<td>&#x2F;dev&#x2F;sda</td>
</tr>
<tr>
<td>CentOS8</td>
<td>&#x2F;dev&#x2F;sda</td>
<td>&#x2F;dev&#x2F;sda</td>
<td>&#x2F;dev&#x2F;sda</td>
</tr>
</tbody></table>
<h5 id="磁盘设备的命名"><a href="#磁盘设备的命名" class="headerlink" title="磁盘设备的命名"></a>磁盘设备的命名</h5><p>&#x2F;dev&#x2F;sda2</p>
<p>s&#x3D;硬件接口类型（sata&#x2F;scsi）,d&#x3D;disk（硬盘）,a&#x3D;第1块硬盘（b，第二块），2&#x3D;第几个分区<br>&#x2F;dev&#x2F;hd h&#x3D;IDE硬盘 &#x2F;dev&#x2F;hdd3<br>&#x2F;dev&#x2F;vd v&#x3D;虚拟硬盘 &#x2F;dev&#x2F;vdf7</p>
<h5 id="HP服务器硬盘"><a href="#HP服务器硬盘" class="headerlink" title="HP服务器硬盘"></a>HP服务器硬盘</h5><p>&#x2F;dev&#x2F;cciss&#x2F;c0d0<br>&#x2F;dev&#x2F;cciss&#x2F;c0d0p1 c0第一个控制器, d0第一块磁盘, p1分区1<br>&#x2F;dev&#x2F;cciss&#x2F;c0d0p2 c0第一个控制器, d0第一块磁盘, p2分区2</p>
<h3 id="1-2、磁盘分区"><a href="#1-2、磁盘分区" class="headerlink" title="1.2、磁盘分区"></a>1.2、磁盘分区</h3><h4 id="1）、磁盘划分思路"><a href="#1）、磁盘划分思路" class="headerlink" title="1）、磁盘划分思路"></a>1）、磁盘划分思路</h4><ul>
<li>进入分区表 新建分区</li>
<li>更新分区表&lt;刷新分区表&gt;</li>
<li>格式化分区——&gt;文件系统</li>
</ul>
<h4 id="2）、磁盘分区"><a href="#2）、磁盘分区" class="headerlink" title="2）、磁盘分区"></a>2）、磁盘分区</h4><p>fdisk命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fdisk磁盘分区命令</span><br><span class="line">fidsk  [命令选项] [参数]</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-l   list 列出磁盘分区</span><br><span class="line">-u   与-l一起使用，显示分区的相关信息</span><br><span class="line"></span><br><span class="line">fdisk /dev/sda    为/dev/sda分区</span><br><span class="line">m ：显示菜单和帮助信息</span><br><span class="line">a ：活动分区标记/引导分区</span><br><span class="line">d ：删除分区</span><br><span class="line">l ：显示分区类型</span><br><span class="line">n ：新建分区</span><br><span class="line">p ：显示分区信息</span><br><span class="line">q ：退出不保存</span><br><span class="line">t ：设置分区号</span><br><span class="line">v ：进行分区检查</span><br><span class="line">w ：保存修改</span><br><span class="line">x ：扩展应用，高级功能</span><br></pre></td></tr></table></figure>

<p>分区前了解设备信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># lsblk		查看块设备</span><br><span class="line"># df -h  查看正在挂载的设备情况</span><br><span class="line"># blkid  打印某个已经格式化分区的UUID</span><br><span class="line"># fdisk -l		查看当前系统的所有设备分区情况</span><br><span class="line"># fdisk  /dev/sdb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# fdisk  -l /dev/sdb</span><br><span class="line">硬盘容量　＝　柱面数　×　盘面数（磁头数）　×　扇区数　×　扇区大小（一般为512字节）</span><br><span class="line">Disk /dev/sdb: 20 GiB, 21474836480 bytes, 41943040 sectors	磁盘空间统计，大小和扇区数量</span><br><span class="line">几何属性：255 个磁头, 63 个扇区/磁道, 2610 个柱面</span><br><span class="line"> ###此行内容只有在使用fdisk分区时，使用c命令加上与dos兼容的标记时才会出现，这里面所提到的磁头等数量与磁盘中的物理寻址和逻辑块寻址相关，而且它们都是逻辑地址，产生访问时，磁盘控制器会把这些确定的逻辑地址转换为实际的物理地址；对于我们来讲这几个数值可以帮助我们计算磁盘空间的大小以及一个磁柱的大小，比如说</span><br><span class="line"> ##一个磁柱的容量=255x63x512=8225280（约8M空间）</span><br><span class="line">单元：扇区 / 1 * 512 = 512 字节</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 / 512 字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：0x178c5f83</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> 设备       启动    起点     末尾     扇区 		大小 Id 类型</span><br><span class="line">/dev/sda1  *       2048  2099199  2097152   1G 83 Linux</span><br><span class="line">/dev/sda2       2099200 41943039 39843840  19G 8e Linux LVM</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：</span><br></pre></td></tr></table></figure>

<p><strong>fdisk分区总结</strong><br>命令缺点：单个分区不能超过2T 超过的话需要用parted命令<br>在linux 下大磁盘的分区不能再采用fdisk了，MBR分区表只支持2T磁盘，所以大于2T的磁盘必须使用GPT分区表。</p>
<h5 id="3）、磁盘格式化"><a href="#3）、磁盘格式化" class="headerlink" title="3）、磁盘格式化"></a>3）、磁盘格式化</h5><p>格式化(format)是指对磁盘或磁盘中的分区（partition）进行初始化的一种操作，这种操作通常会导致现有的磁盘或分区中所有的文件被清除。格式化通常分为低级格式化和高级格式化。如果没有特别指明，对硬盘的格式化通常是指高级格式化，而对软盘的格式化则通常同时包括这两者。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-L 标签名</span><br><span class="line">-V : 详细显示模式</span><br><span class="line">-t : 给定档案系统的型式，Linux 的预设值为 ext2</span><br><span class="line">-c : 在制做档案系统前，检查该partition 是否有坏轨</span><br><span class="line">-l bad_blocks_file : 将有坏轨的block资料加到 bad_blocks_file 里面</span><br><span class="line">-b : 给定 block 的大小</span><br><span class="line"></span><br><span class="line">关于block and inode  dentry</span><br><span class="line">实验发现这句话不对</span><br><span class="line">block越大，inode越少，适合存储大文件的文件系统；block越小，inode越多，适合存储文件多而小的文件系统。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">磁盘分区格式化</span><br><span class="line">mkfs.ext4 /dev/sda3</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：</p>
<p>MBR分区表最多允许4个主分区，或者3个主分区+1个扩展分区</p>
<p>扩展分区不能直接存储数据</p>
<p>扩展分区的大小决定了所有逻辑分区的大小，逻辑分区的编号从5开始</p>
<p>删除扩展分区后下面的逻辑分区都被删除</p>
<p>分完区后需要手动刷新分区表，如果刷新不成功需要重启操作系统</p>
<p>创建分区的时候尽可能注意分区序号的连续性</p>
<h1 id="GPT磁盘管理"><a href="#GPT磁盘管理" class="headerlink" title="GPT磁盘管理"></a>GPT磁盘管理</h1><p> 阅读 (118522) </p>
<p> 分享</p>
<p>GPT分区工具：gdisk gdisk</p>
<p><strong>gdisk分区</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GPT  128个主分区</span><br><span class="line">[root@zutuanxue ~]# gdisk -l /dev/sdc</span><br><span class="line">[root@zutuanxue ~]# gdisk -l /dev/sdc   查看sdc信息</span><br><span class="line">GPT fdisk (gdisk) version 1.0.3</span><br><span class="line"></span><br><span class="line">Partition table scan:</span><br><span class="line">  MBR: MBR only</span><br><span class="line">  BSD: not present</span><br><span class="line">  APM: not present</span><br><span class="line">  GPT: not present			###GPT分区无法使用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">***************************************************************</span><br><span class="line">Found invalid GPT and valid MBR; converting MBR to GPT format</span><br><span class="line">in memory. </span><br><span class="line">***************************************************************</span><br><span class="line"></span><br><span class="line">Disk /dev/sdc: 41943040 sectors, 20.0 GiB</span><br><span class="line">Model: VMware Virtual S</span><br><span class="line">Sector size (logical/physical): 512/512 bytes</span><br><span class="line">Disk identifier (GUID): B228357D-34EC-4E47-BB81-A7312F3BCF8D</span><br><span class="line">Partition table holds up to 128 entries</span><br><span class="line">Main partition table begins at sector 2 and ends at sector 33</span><br><span class="line">First usable sector is 34, last usable sector is 41943006</span><br><span class="line">Partitions will be aligned on 2048-sector boundaries</span><br><span class="line">Total free space is 37748669 sectors (18.0 GiB)</span><br><span class="line"></span><br><span class="line">Number  Start (sector)    End (sector)  Size       Code  Name</span><br><span class="line">   1            2048         2099199   1024.0 MiB  8300  Linux filesystem</span><br><span class="line">   2         2099200         4196351   1024.0 MiB  8300  Linux filesystem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">将MBR转换成GPT分区</span><br><span class="line">[root@zutuanxue ~]# gdisk /dev/sdc</span><br><span class="line">GPT fdisk (gdisk) version 1.0.3</span><br><span class="line"></span><br><span class="line">Partition table scan:</span><br><span class="line">  MBR: MBR only</span><br><span class="line">  BSD: not present</span><br><span class="line">  APM: not present</span><br><span class="line">  GPT: not present</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">***************************************************************</span><br><span class="line">Found invalid GPT and valid MBR; converting MBR to GPT format</span><br><span class="line">in memory. THIS OPERATION IS POTENTIALLY DESTRUCTIVE! Exit by</span><br><span class="line">typing &#x27;q&#x27; if you don&#x27;t want to convert your MBR partitions</span><br><span class="line">to GPT format!</span><br><span class="line">***************************************************************</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (? for help): o</span><br><span class="line">This option deletes all partitions and creates a new protective MBR.</span><br><span class="line">Proceed? (Y/N): y</span><br><span class="line"></span><br><span class="line">Command (? for help): w</span><br><span class="line"></span><br><span class="line">Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING</span><br><span class="line">PARTITIONS!!</span><br><span class="line"></span><br><span class="line">Do you want to proceed? (Y/N): y</span><br><span class="line">OK; writing new GUID partition table (GPT) to /dev/sdc.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# gdisk -l /dev/sdc</span><br><span class="line">GPT fdisk (gdisk) version 1.0.3</span><br><span class="line"></span><br><span class="line">Partition table scan:</span><br><span class="line">  MBR: protective</span><br><span class="line">  BSD: not present</span><br><span class="line">  APM: not present</span><br><span class="line">  GPT: present			###GPT可用了</span><br><span class="line"></span><br><span class="line">Found valid GPT with protective MBR; using GPT.</span><br><span class="line">Disk /dev/sdc: 41943040 sectors, 20.0 GiB</span><br><span class="line">Model: VMware Virtual S</span><br><span class="line">Sector size (logical/physical): 512/512 bytes</span><br><span class="line">Disk identifier (GUID): 7CA4232A-4A9E-467D-AADD-BB84DB2126E3</span><br><span class="line">Partition table holds up to 128 entries</span><br><span class="line">Main partition table begins at sector 2 and ends at sector 33</span><br><span class="line">First usable sector is 34, last usable sector is 41943006</span><br><span class="line">Partitions will be aligned on 2048-sector boundaries</span><br><span class="line">Total free space is 41942973 sectors (20.0 GiB)</span><br><span class="line"></span><br><span class="line">Number  Start (sector)    End (sector)  Size       Code  Name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#再次分区</span><br><span class="line">[root@zutuanxue ~]# gdisk /dev/sdc</span><br><span class="line">GPT fdisk (gdisk) version 1.0.3</span><br><span class="line"></span><br><span class="line">Partition table scan:</span><br><span class="line">  MBR: protective</span><br><span class="line">  BSD: not present</span><br><span class="line">  APM: not present</span><br><span class="line">  GPT: present</span><br><span class="line"></span><br><span class="line">Found valid GPT with protective MBR; using GPT.</span><br><span class="line"></span><br><span class="line">Command (? for help): n</span><br><span class="line">Partition number (1-128, default 1): 1</span><br><span class="line">First sector (34-41943006, default = 2048) or &#123;+-&#125;size&#123;KMGTP&#125;: </span><br><span class="line">Last sector (2048-41943006, default = 41943006) or &#123;+-&#125;size&#123;KMGTP&#125;: +2G</span><br><span class="line">Current type is &#x27;Linux filesystem&#x27;</span><br><span class="line">Hex code or GUID (L to show codes, Enter = 8300): </span><br><span class="line">Changed type of partition to &#x27;Linux filesystem&#x27;</span><br><span class="line"></span><br><span class="line">Command (? for help): p</span><br><span class="line">Disk /dev/sdc: 41943040 sectors, 20.0 GiB</span><br><span class="line">Model: VMware Virtual S</span><br><span class="line">Sector size (logical/physical): 512/512 bytes</span><br><span class="line">Disk identifier (GUID): 7CA4232A-4A9E-467D-AADD-BB84DB2126E3</span><br><span class="line">Partition table holds up to 128 entries</span><br><span class="line">Main partition table begins at sector 2 and ends at sector 33</span><br><span class="line">First usable sector is 34, last usable sector is 41943006</span><br><span class="line">Partitions will be aligned on 2048-sector boundaries</span><br><span class="line">Total free space is 37748669 sectors (18.0 GiB)</span><br><span class="line"></span><br><span class="line">Number  Start (sector)    End (sector)  Size       Code  Name</span><br><span class="line">   1            2048         4196351   2.0 GiB     8300  Linux filesystem</span><br><span class="line">Command (? for help): w</span><br><span class="line"></span><br><span class="line">Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING</span><br><span class="line">PARTITIONS!!</span><br><span class="line"></span><br><span class="line">Do you want to proceed? (Y/N): y</span><br><span class="line">OK; writing new GUID partition table (GPT) to /dev/sdc.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# partprobe /dev/sdc</span><br><span class="line"></span><br><span class="line">2.创建文件系统（格式化）CentOS8默认使用xfs</span><br><span class="line">[root@zutuanxue ~]# mkfs.xfs -f /dev/sdc1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3.挂载</span><br><span class="line">[root@zutuanxue ~]# mkdir /disk1</span><br><span class="line">[root@zutuanxue ~]# mount -t xfs -o ro /dev/sdc1 /disk1		//手动挂载</span><br><span class="line">[root@zutuanxue ~]# umount /disk1		##卸载</span><br></pre></td></tr></table></figure>

<h1 id="linux分区挂载"><a href="#linux分区挂载" class="headerlink" title="linux分区挂载"></a>linux分区挂载</h1><p> 阅读 (191808) </p>
<p> 分享</p>
<p>磁盘在linux中经过分区、格式化后是无法直接使用的，因为该分区在系统中是以一个设备文件的形式存在的。我们如果希望使用这个磁盘分区还得经过最后一步，就是将这个分区设备挂载到系统中的某个文件夹下。这样你往这个挂载文件夹里存东西其实即使往分区里存东西了。<br>接下来我们来看看linux下挂载磁盘分区的方式</p>
<ul>
<li>手动挂载</li>
<li>开机自动挂载</li>
<li>触发挂载</li>
</ul>
<h2 id="一、手动挂载"><a href="#一、手动挂载" class="headerlink" title="一、手动挂载"></a>一、手动挂载</h2><p>mount挂载命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mount - mount a filesystem</span><br><span class="line"></span><br><span class="line">命令语法</span><br><span class="line">mount device dir</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-a   挂载所有文件系统，参考文件 /etc/fstab</span><br><span class="line">-l   显示当前挂载</span><br><span class="line">-t   文件系统类型</span><br><span class="line">-o   指定挂载权限</span><br><span class="line"></span><br><span class="line">##用法说明</span><br><span class="line">mount   [options]     需要挂载的设备     挂载点</span><br><span class="line">特点：系统重启后需要重新挂载；手动卸载后需要手动挂载</span><br><span class="line"></span><br><span class="line">-o:挂载选项	ro,sync,rw,remount</span><br><span class="line">-t:文件系统类型</span><br><span class="line">mount -t nfs=mount.nfs</span><br><span class="line">mount -t cifs=mount.cifs</span><br></pre></td></tr></table></figure>

<p>挂载分区演示</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#案列1：以只读的方式重新挂载/u02分区</span><br><span class="line">[root@zutuanxue ~]# mount -o remount,ro /u02		//可以是挂载点也可以是设备</span><br><span class="line">remount:重新挂载一个正在挂载的设备</span><br><span class="line"></span><br><span class="line"># mount -o remount,ro /dev/sdb1		</span><br><span class="line"># mount -o remount,ro /u01</span><br><span class="line">注意：后面可以根挂载点也可以跟设备本身</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例2: 如果希望将本机的某个文件夹挂到另一个文件夹</span><br><span class="line">mount -o bind /etc /opt/data3</span><br></pre></td></tr></table></figure>

<p>设备表示方法：</p>
<ul>
<li>设备文件</li>
<li>设备UUID</li>
<li>设备的卷标</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#设备文件：</span><br><span class="line">/dev/sdb</span><br><span class="line">/dev/sdb1</span><br><span class="line"></span><br><span class="line">#通过UUID表示设备</span><br><span class="line">[root@zutuanxue ~]# blkid /dev/sdb1				//查看设备的UUID和文件系统类型</span><br><span class="line">/dev/sdb1: UUID=&quot;96b67b7b...&quot; TYPE=&quot;xfs&quot; PARTUUID=&quot;80e196f2-01&quot;</span><br><span class="line">[root@zutuanxue ~]# blkid /dev/sdb2</span><br><span class="line">/dev/sdb2: UUID=&quot;6821-049E&quot; TYPE=&quot;vfat&quot; PARTUUID=&quot;80e196f2-02&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#通过卷标表示设备</span><br><span class="line">#不同类型分区卷标管理与查看</span><br><span class="line">ext*设置&amp;查看卷标</span><br><span class="line">[root@zutuanxue ~]# e2label /dev/sdb1 DISK1			ext*设置卷标</span><br><span class="line">[root@zutuanxue ~]# e2label /dev/sdb1						ext*查看卷标</span><br><span class="line"></span><br><span class="line">xfs设置&amp;查看卷标</span><br><span class="line">[root@zutuanxue ~]# xfs_admin -L DISK1 /dev/sdb1	xfs设置卷标</span><br><span class="line">[root@zutuanxue ~]# xfs_admin -l /dev/sdb1				xfs查看卷标</span><br><span class="line">label = &quot;DISK1&quot;</span><br><span class="line"></span><br><span class="line">vfat设置&amp;查看卷标</span><br><span class="line">[root@zutuanxue ~]# dosfslabel /dev/sdb2 hello</span><br><span class="line">[root@zutuanxue ~]# dosfslabel /dev/sdb2</span><br><span class="line"></span><br><span class="line">也可以使用blkid查看卷标</span><br><span class="line">[root@zutuanxue ~]# blkid /dev/sdb1</span><br><span class="line">/dev/sdb1: LABEL=&quot;DISK1&quot; UUID=&quot;96..&quot; TYPE=&quot;xfs&quot; PARTUUID=&quot;80..-01&quot;</span><br><span class="line">[root@zutuanxue ~]# blkid /dev/sdb2</span><br><span class="line">/dev/sdb2: LABEL=&quot;disk2&quot; UUID=&quot;6...&quot; TYPE=&quot;vfat&quot; PARTUUID=&quot;8e.2-02&quot;</span><br></pre></td></tr></table></figure>

<p>umount设备卸载命令<br>命令详解</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">umount - 卸载文件系统</span><br><span class="line"></span><br><span class="line">umount 设备挂载点|设备源</span><br><span class="line"></span><br><span class="line">-l  懒惰卸载</span><br></pre></td></tr></table></figure>

<p>命令用法演示</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">卸载设备：umount</span><br><span class="line">[root@zutuanxue ~]# umount /u01</span><br><span class="line">[root@zutuanxue ~]# umount /dev/sdb2</span><br></pre></td></tr></table></figure>

<h2 id="二、开机自动挂载："><a href="#二、开机自动挂载：" class="headerlink" title="二、开机自动挂载："></a>二、开机自动挂载：</h2><p>自动挂载 &#x2F;etc&#x2F;fstab文件<br>特点：系统开机或重启会自动挂载；手动卸载后，使用mount -a自动挂载</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">文件内容格式：</span><br><span class="line">要挂载的资源路径	挂载点	文件系统类型	挂载选项	dump备份支持  文件系统检测</span><br><span class="line">UUID=289370eb-9459-42a8-8cee-7006507f1477   /      ext4    defaults        1 1</span><br><span class="line"></span><br><span class="line">#字段说明</span><br><span class="line">1段：挂载的设备（磁盘设备的文件名或设备的卷标或者是设备的UUID）</span><br><span class="line">2段：挂载点（建议用一个空目录），建议不要将多个设备挂载到同一个挂载点上</span><br><span class="line">3段：文件系统类型（ext3、ext4、vfat、ntfs（安装软件包）、swap等等）</span><br><span class="line">4段：挂载选项</span><br><span class="line">dev/nodev		被挂载的设备上的设备文件，是否被识别为设备文件</span><br><span class="line">async/sync  异步/同步 同步利于数据保存 异步利于提高性能</span><br><span class="line">auto/noauto     自动/非自动：</span><br><span class="line">rw/ro   读写/只读：</span><br><span class="line">exec/noexec     被挂载设备中的可执行文件是否可执行</span><br><span class="line">remount     重新挂在一个已经挂载的文件系统，常用于修改挂载参数</span><br><span class="line">user/nouser     允许/不允许其他普通用户挂载：</span><br><span class="line">suid/nosuid     具有/不具有suid权限：该文件系统是否允许SUID的存在。</span><br><span class="line">usrquota    这个是在启动文件系统的时候，让其支持磁盘配额，这个是针对用户的。</span><br><span class="line">grpquota    支持用户组的磁盘配额。</span><br><span class="line">....</span><br><span class="line">defaults 同时具有rw, dev, exec,  async,nouser等参数。</span><br><span class="line">更多挂载选项可以通过 man mount  -o 命令选项可以找到详细信息</span><br><span class="line"></span><br><span class="line">5段：是否支持dump备份。//dump是一个用来备份的命令，0代表不要做dump备份，1代表要每天进行dump的动作，2也代表其他不定日期的dump备份。通常这个数值不是0就是1。数字越小优先级越高。</span><br><span class="line"></span><br><span class="line">6段：是否用 fsck 检验扇区。//开机的过程中，系统默认会用fsck检验文件系统是否完整。0是不要检验，1表示最先检验(一般只有根目录会设定为1)，2也是要检验，只是1是最先，2是其次才进行检验。</span><br><span class="line"></span><br><span class="line"># fsck -f /dev/sdb2		强制检验/dev/sdb2上文件系统</span><br><span class="line"></span><br><span class="line">说明：</span><br><span class="line">要挂载的资源路径可以是文件系统的UUID，设备路径，文件系统的标签 ，光盘镜像文件（iso），亦或是来自网络的共享资源等</span><br></pre></td></tr></table></figure>

<h2 id="三、自动挂载-Automount："><a href="#三、自动挂载-Automount：" class="headerlink" title="三、自动挂载 Automount："></a>三、自动挂载 Automount：</h2><p>特点：挂载是由访问产生；卸载是由超时产生；依赖于后台的autofs服务</p>
<p>思路：</p>
<ol>
<li>所有的监控都是由一个程序完成 autofs</li>
<li>服务启动后才会监控挂载的设备</li>
<li>修改配置文件来指定需要监控的设备</li>
</ol>
<p>案例演示<br>需求：让系统自动挂载&#x2F;dev&#x2F;sdb2设备，如果2分钟没有被用自动卸载</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">步骤：</span><br><span class="line">1）安装autofs软件</span><br><span class="line">[root@zutuanxue ~]# rpm -q autofs</span><br><span class="line">package autofs is not installed</span><br><span class="line">[root@zutuanxue ~]# dnf install autofs</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# rpm -q autofs</span><br><span class="line">autofs-5.1.4-29.el8.x86_64</span><br><span class="line">2）修改配置文件（指定需要监控的设备和挂载的目录）</span><br><span class="line">vim /etc/auto.master		//定义一级挂载点/u01和子配置文件</span><br><span class="line">/u01    /etc/auto.test	-t 120 或者 --timeout 120  单位秒   （设置超时时间去卸载）</span><br><span class="line"></span><br><span class="line">vim /etc/auto.test			//子配置文件自己创建，定义二级挂载点和需要挂载的设备</span><br><span class="line">test  -fstype=ext4,ro   :/dev/sdb2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3）重启服务</span><br><span class="line">[root@zutuanxue ~]# systemctl restart autofs</span><br><span class="line"></span><br><span class="line">4）测试验证</span><br><span class="line">[root@zutuanxue ~]# ls /u01/test</span><br><span class="line">[root@zutuanxue ~]# df -h</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后续补充：</span><br><span class="line">如果想要将/dev/sdb2挂载到/u01下，怎么做？</span><br><span class="line">vim /etc/auto.master</span><br><span class="line">/-		/etc/auto.test</span><br><span class="line"></span><br><span class="line">vim /etc/auto.test</span><br><span class="line">/u01	-fstype=ext4 :/dev/sdb2</span><br></pre></td></tr></table></figure>

<h1 id="linux磁盘使用实战案例"><a href="#linux磁盘使用实战案例" class="headerlink" title="linux磁盘使用实战案例"></a>linux磁盘使用实战案例</h1><p> 阅读 (215659) </p>
<p> 分享</p>
<p><strong>案例需求：</strong></p>
<p>添加一块硬盘，需要将其分区，最终需要使用2G空间。</p>
<p><strong>案例思路</strong></p>
<ol>
<li>增加一块硬盘</li>
<li>使用fdisk命令进行分区</li>
<li>格式化指定分区</li>
<li>创建一个空的目录作为挂载点</li>
<li>挂载使用</li>
<li>创建新的挂载点</li>
<li>挂载使用</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">步骤：</span><br><span class="line">1. 增加硬盘</span><br><span class="line">增加完硬盘记得重启系统</span><br><span class="line"># lsblk	查看硬盘是否添加成功</span><br><span class="line">...</span><br><span class="line">sdb           8:16   0   20G  0 disk </span><br><span class="line">[root@zutuanxue ~]# fdisk -l /dev/sdb</span><br><span class="line">Disk /dev/sdb：20 GiB，21474836480 字节，41943040 个扇区</span><br><span class="line">单元：扇区 / 1 * 512 = 512 字节</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 / 512 字节</span><br><span class="line"></span><br><span class="line">2. 使用fdisk命令分区</span><br><span class="line">[root@zutuanxue ~]# fdisk /dev/sdb</span><br><span class="line"></span><br><span class="line">欢迎使用 fdisk (util-linux 2.32.1)。</span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line"></span><br><span class="line">设备不包含可识别的分区表。</span><br><span class="line">创建了一个磁盘标识符为 0x0c7799c3 的新 DOS 磁盘标签。</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：p</span><br><span class="line">Disk /dev/sdb：20 GiB，21474836480 字节，41943040 个扇区</span><br><span class="line">单元：扇区 / 1 * 512 = 512 字节</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 / 512 字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：0x0c7799c3</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">分区类型</span><br><span class="line">   p   主分区 (0个主分区，0个扩展分区，4空闲)</span><br><span class="line">   e   扩展分区 (逻辑分区容器)</span><br><span class="line">选择 (默认 p)：p</span><br><span class="line">分区号 (1-4, 默认  1): </span><br><span class="line">第一个扇区 (2048-41943039, 默认 2048): </span><br><span class="line">上个扇区，+sectors 或 +size&#123;K,M,G,T,P&#125; (2048-41943039, 默认 41943039): +1G</span><br><span class="line"></span><br><span class="line">创建了一个新分区 1，类型为“Linux”，大小为 1 GiB。</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：p</span><br><span class="line">Disk /dev/sdb：20 GiB，21474836480 字节，41943040 个扇区</span><br><span class="line">单元：扇区 / 1 * 512 = 512 字节</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 / 512 字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：0x80e196f2</span><br><span class="line"></span><br><span class="line">设备       启动  起点    末尾    扇区 大小 Id 类型</span><br><span class="line">/dev/sdb1        2048 2099199 2097152   1G 83 Linux</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">分区类型</span><br><span class="line">   p   主分区 (1个主分区，0个扩展分区，3空闲)</span><br><span class="line">   e   扩展分区 (逻辑分区容器)</span><br><span class="line">选择 (默认 p)：p</span><br><span class="line">分区号 (2-4, 默认  2): 2</span><br><span class="line">第一个扇区 (2099200-41943039, 默认 2099200): </span><br><span class="line">上个扇区，+sectors 或 +size&#123;K,M,G,T,P&#125; (2099200-41943039, 默认 41943039): +1G</span><br><span class="line"></span><br><span class="line">创建了一个新分区 2，类型为“Linux”，大小为 1 GiB。</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：p</span><br><span class="line">Disk /dev/sdb：20 GiB，21474836480 字节，41943040 个扇区</span><br><span class="line">单元：扇区 / 1 * 512 = 512 字节</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 / 512 字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：0x80e196f2</span><br><span class="line"></span><br><span class="line">设备       启动    起点    末尾    扇区 大小 Id 类型</span><br><span class="line">/dev/sdb1          2048 2099199 2097152   1G 83 Linux</span><br><span class="line">/dev/sdb2       2099200 4196351 2097152   1G 83 Linux</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：w</span><br><span class="line">分区表已调整。</span><br><span class="line">将调用 ioctl() 来重新读分区表。</span><br><span class="line">正在同步磁盘。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3. 再次查看分区情况</span><br><span class="line"># lsblk</span><br><span class="line">sdb                       8:16   0   20G  0 disk </span><br><span class="line">├─sdb1                    8:17   0    1G  0 part </span><br><span class="line">└─sdb2                    8:18   0    1G  0 part </span><br><span class="line"></span><br><span class="line">4. 刷新分区表信息</span><br><span class="line">[root@zutuanxue ~]# partprobe /dev/sdb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5. 格式化分区</span><br><span class="line">[root@zutuanxue ~]# mkfs.xfs /dev/sdb1</span><br><span class="line">[root@zutuanxue ~]# mkfs.vfat /dev/sdb2</span><br><span class="line"></span><br><span class="line">6. 创建新的挂载点</span><br><span class="line">[root@zutuanxue ~]# mkdir /u01</span><br><span class="line">[root@zutuanxue ~]# mkdir /u02</span><br><span class="line"></span><br><span class="line">7. 挂载使用</span><br><span class="line">[root@zutuanxue ~]# mount /dev/sdb1 /u01</span><br><span class="line">[root@zutuanxue ~]# mount /dev/sdb2 /u02</span><br></pre></td></tr></table></figure>

<h1 id="LVM逻辑卷介绍"><a href="#LVM逻辑卷介绍" class="headerlink" title="LVM逻辑卷介绍"></a>LVM逻辑卷介绍</h1><p> 阅读 (170396) </p>
<p> 分享</p>
<p>在分区的时候，每个分区应该分多大是令人头疼的，而且随着长时间的运行，分区不管你分多大，都会被数据给占满。当遇到某个分区不够用时管理员可能甚至要备份整个系统、清除硬盘、重新对硬盘分区，然后恢复数据到新分区。</p>
<p>虽然现在有很多动态调整磁盘的工具可以使用，但是它并不能完全解决问题，因为某个分区可能会再次被耗尽；另外一个方面这需要重新引导系统才能实现，对于很多关键的服务器，停机是不可接受的，而且对于添加新硬盘，希望一个能跨越多个硬盘驱动器的文件系统时，分区调整程序就不能解决问题。</p>
<p>因此完美的解决方法应该是在零停机前提下可以自如对文件系统的大小进行调整，可以方便实现文件系统跨越不同磁盘和分区。那么我们可以通过逻辑盘卷管理（LVM，Logical Volume Manager）的方式来非常完美的实现这一功能。</p>
<p>解决思路：将所有可用存储汇集成池，当池中某个分区空间不够时就会从池中继续划分空间给分区，池中空间不够就可以通过加硬盘的方式来解决。</p>
<h2 id="一、逻辑卷介绍"><a href="#一、逻辑卷介绍" class="headerlink" title="一、逻辑卷介绍"></a>一、逻辑卷介绍</h2><p>逻辑卷（LVM）：它是Linux环境下对磁盘分区进行管理的一种机制，它是建立在<strong>物理存储设备</strong>之上的一个抽象层，优点在于<strong>灵活</strong>管理。<br><strong>特点：</strong><br>1、动态在线扩容<br>2、离线裁剪<br>3、数据条带化<br>4、数据镜像</p>
<h2 id="二、名词解释："><a href="#二、名词解释：" class="headerlink" title="二、名词解释："></a>二、名词解释：</h2><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602992183885.png" alt="lvm.png"></p>
<ul>
<li>物理卷<br>物理卷就是指硬盘分区或从逻辑上与磁盘分区具有同样功能的设备(如RAID)，是LVM的基本存储逻辑块，但和基本的物理存储介质（如分区、磁盘等）比较，却包含有与LVM相关的管理参数</li>
<li>卷组<br>LVM卷组类似于非LVM系统中的物理硬盘，其由物理卷组成。可以在卷组上创建一个或多个“LVM分区”（逻辑卷），LVM卷组由一个或多个物理卷组成。</li>
<li>逻辑卷<br>LVM的逻辑卷类似于非LVM系统中的硬盘分区，在逻辑卷之上可以建立文件系统(比如&#x2F;home或者&#x2F;usr等)。</li>
<li>PE<br>每一个物理卷被划分为称为PE(Physical Extents)的基本单元，具有唯一编号的PE是可以被LVM寻址的最小单元。PE的大小是可配置的，默认为4MB。</li>
<li>LE<br>逻辑卷也被划分为被称为LE(Logical Extents) 的可被寻址的基本单位。在同一个卷组中，LE的大小和PE是相同的，并且一一对应。</li>
</ul>
<h2 id="三、逻辑卷使用流程"><a href="#三、逻辑卷使用流程" class="headerlink" title="三、逻辑卷使用流程"></a>三、逻辑卷使用流程</h2><p>真实的物理设备—-&gt;物理卷（pv）—-&gt;卷组（vg）—-&gt;逻辑卷（lv）——&gt;逻辑卷格式化—-&gt;挂载使用</p>
<h1 id="逻辑卷常用命令"><a href="#逻辑卷常用命令" class="headerlink" title="逻辑卷常用命令"></a>逻辑卷常用命令</h1><p> 阅读 (241252) </p>
<p> 分享</p>
<h2 id="一、物理卷管理"><a href="#一、物理卷管理" class="headerlink" title="一、物理卷管理"></a>一、物理卷管理</h2><h3 id="1-1、物理卷的创建-pvcreate命令"><a href="#1-1、物理卷的创建-pvcreate命令" class="headerlink" title="1.1、物理卷的创建:pvcreate命令"></a>1.1、物理卷的创建:pvcreate命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pvcreate    [命令选项]    [参数]</span><br><span class="line">将物理分区转换为物理卷</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-f：强制创建物理卷，不需要用户确认；</span><br><span class="line">-u：指定设备的UUID；</span><br><span class="line">-y：所有的问题都回答“yes”；</span><br><span class="line">-Z：是否利用前4个扇区。</span><br></pre></td></tr></table></figure>

<h3 id="1-2、物理卷的移除-pvremove命令"><a href="#1-2、物理卷的移除-pvremove命令" class="headerlink" title="1.2、物理卷的移除:pvremove命令"></a>1.2、物理卷的移除:pvremove命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pvremove    [命令选项]    [参数]</span><br><span class="line">将物理卷转换为普通linux分区</span><br><span class="line"></span><br><span class="line">命令选项</span><br><span class="line">-d  调试模式</span><br><span class="line">-f  强制删除</span><br><span class="line">-y  对提问回答“yes”</span><br></pre></td></tr></table></figure>

<h3 id="1-3、物理卷查看命令-pvscan"><a href="#1-3、物理卷查看命令-pvscan" class="headerlink" title="1.3、物理卷查看命令:pvscan"></a>1.3、物理卷查看命令:pvscan</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pvs     显示PV简况</span><br><span class="line">pvdisplay   显示PV详细信息</span><br></pre></td></tr></table></figure>

<h3 id="1-4、物理卷扫描命令-pvscan"><a href="#1-4、物理卷扫描命令-pvscan" class="headerlink" title="1.4、物理卷扫描命令:pvscan"></a>1.4、物理卷扫描命令:pvscan</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pvscan 扫描pv设备</span><br></pre></td></tr></table></figure>

<h3 id="删除物理卷-pvremove"><a href="#删除物理卷-pvremove" class="headerlink" title="删除物理卷: pvremove"></a>删除物理卷: pvremove</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 删除PV sdb1 sdc1</span><br><span class="line">[root@zutuanxue ~]# pvremove /dev/sdb1 /dev/sdc1</span><br></pre></td></tr></table></figure>

<h2 id="二、卷组管理"><a href="#二、卷组管理" class="headerlink" title="二、卷组管理"></a>二、卷组管理</h2><p>将多个物理卷组成一个卷组，形成一个存储池</p>
<h3 id="2-1、卷组创建：vgcreate命令"><a href="#2-1、卷组创建：vgcreate命令" class="headerlink" title="2.1、卷组创建：vgcreate命令"></a>2.1、卷组创建：vgcreate命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 将pv sdb1 sdc1创建成卷组VG1000  PE大小为32M</span><br><span class="line">[root@zutuanxue ~]# vgcreate -s 32 vg1000 /dev/sdb1 /dev/sdc1</span><br></pre></td></tr></table></figure>

<h3 id="2-2、删除卷组中的PV：vgreduce命令"><a href="#2-2、删除卷组中的PV：vgreduce命令" class="headerlink" title="2.2、删除卷组中的PV：vgreduce命令"></a>2.2、删除卷组中的PV：vgreduce命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 将vg1000卷组中的PV sdb1删除</span><br><span class="line">[root@zutuanxue ~]# vgreduce /dev/vg1000 /dev/sdb1</span><br></pre></td></tr></table></figure>

<h3 id="2-3、扩容卷组：vgextend命令"><a href="#2-3、扩容卷组：vgextend命令" class="headerlink" title="2.3、扩容卷组：vgextend命令"></a>2.3、扩容卷组：vgextend命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 将pv sdb1 加入卷组vg1000</span><br><span class="line">[root@zutuanxue ~]# vgextend /dev/vg1000 /dev/sdb1</span><br></pre></td></tr></table></figure>

<h3 id="2-4、删除卷组：vgremove命令"><a href="#2-4、删除卷组：vgremove命令" class="headerlink" title="2.4、删除卷组：vgremove命令"></a>2.4、删除卷组：vgremove命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 删除vg1000卷组</span><br><span class="line">[root@zutuanxue ~]# vgremove /dev/vg1000/</span><br></pre></td></tr></table></figure>

<h2 id="三、逻辑卷管理"><a href="#三、逻辑卷管理" class="headerlink" title="三、逻辑卷管理"></a>三、逻辑卷管理</h2><h3 id="3-1、逻辑卷创建-lvcreate命令"><a href="#3-1、逻辑卷创建-lvcreate命令" class="headerlink" title="3.1、逻辑卷创建:lvcreate命令"></a>3.1、逻辑卷创建:lvcreate命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 从卷组vg1000上创建一个lv99的逻辑卷，容量为3G。</span><br><span class="line">[root@zutuanxue ~]# lvcreate -n lv99 -L 3G /dev/vg1000</span><br></pre></td></tr></table></figure>

<h3 id="3-2、逻辑卷扩容-lvextend命令"><a href="#3-2、逻辑卷扩容-lvextend命令" class="headerlink" title="3.2、逻辑卷扩容: lvextend命令"></a>3.2、逻辑卷扩容: lvextend命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 注意扩容顺序，不能颠倒</span><br><span class="line"># a、扩容逻辑卷</span><br><span class="line">[root@zutuanxue ~]# lvextend -L 3.5G /dev/vg1000/lv99</span><br><span class="line"># b、扩容文件系统</span><br><span class="line">[root@zutuanxue ~]# resize2fs /dev/vg1000/lv99</span><br></pre></td></tr></table></figure>

<h3 id="3-3、逻辑卷缩小：lvreduce命令"><a href="#3-3、逻辑卷缩小：lvreduce命令" class="headerlink" title="3.3、逻辑卷缩小：lvreduce命令"></a>3.3、逻辑卷缩小：lvreduce命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 注意扩容顺序，不能颠倒</span><br><span class="line"># a、扫描逻辑卷文件系统，清晰该逻辑卷的使用情况，注意只能缩未使用的空间</span><br><span class="line">[root@zutuanxue ~]# e2fsck -f /dev/vg1000/lv99</span><br><span class="line"># b、缩小文件系统</span><br><span class="line">[root@zutuanxue ~]# resize2fs /dev/vg1000/lv99 2G</span><br><span class="line"># c、缩小逻辑卷</span><br><span class="line">[root@zutuanxue ~]# lvreduce -L 2G /dev/vg1000/lv99 (lvresize)</span><br></pre></td></tr></table></figure>

<h3 id="3-4、逻辑卷移除"><a href="#3-4、逻辑卷移除" class="headerlink" title="3.4、逻辑卷移除"></a>3.4、逻辑卷移除</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#remove LVM</span><br><span class="line"># 卸载分区</span><br><span class="line">[root@zutuanxue ~]# umount /dev/vg1000/lv99</span><br><span class="line"># 删除逻辑卷</span><br><span class="line">[root@zutuanxue ~]# lvremove /dev/vg1000/lv99</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>PE 和 LE的说明及应用策略</p>
<p>PE（physicalextent）<br>每一个物理卷被划分为称为PE(PhysicalExtents)的基本单元，具有唯一编号的PE是可以被LVM寻址的最小单元。PE的大小是可配置的，默认为4MB。</p>
<p>LE（logicalextent）<br>逻辑卷也被划分为被称为LE(LogicalExtents)的可被寻址的基本单位。在同一个卷组中，LE的大小和PE是相同的，并且一一对应。</p>
<p>设置使用大小为4MB的PE（默认为4MB），这表示卷组上创建的所有逻辑卷都以4MB为增量单位来进行扩充 或缩减。由于内核原因，PE大小决定了逻辑卷的最大大小，4MB的PE决定了单个逻辑卷最大容量为256GB，若希望使用大于256G的逻辑卷则创建卷组 时指定更大的PE。PE大小范围为8KB到512MB，并且必须总是2的倍数</p>
<h1 id="逻辑卷实战案例-逻辑卷应用"><a href="#逻辑卷实战案例-逻辑卷应用" class="headerlink" title="逻辑卷实战案例-逻辑卷应用"></a>逻辑卷实战案例-逻辑卷应用</h1><p> 阅读 (200735) </p>
<p> 分享</p>
<h2 id="案例需求："><a href="#案例需求：" class="headerlink" title="案例需求："></a>案例需求：</h2><p>创建一个2.5G大小的逻辑卷</p>
<h2 id="案例思路："><a href="#案例思路：" class="headerlink" title="案例思路："></a>案例思路：</h2><ol>
<li>物理的设备</li>
<li>将物理设备做成物理卷</li>
<li>创建卷组并将物理卷加入其中</li>
<li>创建逻辑卷</li>
<li>格式化逻辑卷</li>
<li>挂载使用</li>
</ol>
<h2 id="案例实现"><a href="#案例实现" class="headerlink" title="案例实现"></a>案例实现</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">步骤：</span><br><span class="line">1. 物理设备</span><br><span class="line">[root@zutuanxue ~]# lsblk /dev/sdb</span><br><span class="line">NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sdb      8:16   0  20G  0 disk </span><br><span class="line">├─sdb1   8:17   0   2G  0 part /disk1</span><br><span class="line">├─sdb2   8:18   0   2G  0 part </span><br><span class="line">├─sdb3   8:19   0   2G  0 part </span><br><span class="line">├─sdb4   8:20   0   2G  0 part </span><br><span class="line">└─sdb5   8:21   0   2G  0 part </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. 创建物理卷</span><br><span class="line">[root@zutuanxue ~]# pvcreate /dev/sdb&#123;1,2&#125;</span><br><span class="line">  Physical volume &quot;/dev/sdb1&quot; successfully created.</span><br><span class="line">  Physical volume &quot;/dev/sdb2&quot; successfully created.</span><br><span class="line">查看物理卷：</span><br><span class="line">[root@zutuanxue ~]# pvs</span><br><span class="line">  PV         VG Fmt  Attr PSize   PFree</span><br><span class="line">  /dev/sda2  cl lvm2 a--  &lt;19.00g    0 </span><br><span class="line">  /dev/sdb1     lvm2 ---    2.00g 2.00g</span><br><span class="line">  /dev/sdb2     lvm2 ---    2.00g 2.00g</span><br><span class="line">[root@zutuanxue ~]# pvscan </span><br><span class="line">  PV /dev/sda2   VG cl              lvm2 [&lt;19.00 GiB / 0    free]</span><br><span class="line">  PV /dev/sdb1                      lvm2 [2.00 GiB]</span><br><span class="line">  PV /dev/sdb2                      lvm2 [2.00 GiB]</span><br><span class="line">  Total: 3 [&lt;23.00 GiB] / in use: 1 [&lt;19.00 GiB] / in no VG: 2 [4.00 GiB]</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# pvdisplay /dev/sdb1 </span><br><span class="line">  &quot;/dev/sdb1&quot; is a new physical volume of &quot;2.00 GiB&quot;</span><br><span class="line">  --- NEW Physical volume ---</span><br><span class="line">  PV Name               /dev/sdb1		#物理卷名称</span><br><span class="line">  VG Name               						#卷组名称</span><br><span class="line">  PV Size               2.00 GiB		#大小</span><br><span class="line">  Allocatable           NO					#是否已分配出去</span><br><span class="line">  PE Size               0   				#PE大小</span><br><span class="line">  Total PE              0						#PE总数</span><br><span class="line">  Free PE               0						#空闲PE</span><br><span class="line">  Allocated PE          0						#可分配PE</span><br><span class="line">  PV UUID               3M4...lT		#UUID</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3. 创建卷组并将物理卷加入其中</span><br><span class="line">[root@zutuanxue ~]# vgcreate vg1 /dev/sdb&#123;1,2&#125;</span><br><span class="line">  Volume group &quot;vg1&quot; successfully created</span><br><span class="line">查看卷组信息：</span><br><span class="line">[root@zutuanxue ~]# vgs vg1</span><br><span class="line">  VG  #PV #LV #SN Attr   VSize VFree</span><br><span class="line">  vg1   2   0   0 wz--n- 3.99g 3.99g</span><br><span class="line">  </span><br><span class="line">[root@zutuanxue ~]# vgscan	#扫描系统中有哪些卷组</span><br><span class="line">  Reading all physical volumes.  This may take a while...</span><br><span class="line">  Found volume group &quot;vg1&quot; using metadata type lvm2</span><br><span class="line">  Found volume group &quot;cl&quot; using metadata type lvm2</span><br><span class="line">  </span><br><span class="line"> [root@zutuanxue ~]# vgdisplay vg1</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               vg1</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        2</span><br><span class="line">  Metadata Sequence No  1</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                0</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                2</span><br><span class="line">  Act PV                2</span><br><span class="line">  VG Size               3.99 GiB		#卷组大小</span><br><span class="line">  PE Size               4.00 MiB		#PE大小</span><br><span class="line">  Total PE              1022				#PE数量</span><br><span class="line">  Alloc PE / Size       0/0   		#已分配的PE/容量</span><br><span class="line">  Free  PE / Size       1022/3.99 GiB	#可分配的PE/容量</span><br><span class="line">  VG UUID               CQ6p...K9I</span><br><span class="line"></span><br><span class="line">4. 创建逻辑卷</span><br><span class="line">[root@zutuanxue ~]# lvcreate -n lv1 -L 2.5G vg1 </span><br><span class="line">  Logical volume &quot;lv1&quot; created.</span><br><span class="line">在操作系统层面映射两个地方：</span><br><span class="line">[root@zutuanxue ~]# ll /dev/mapper/vg1-lv1 </span><br><span class="line">lrwxrwxrwx 1 root root 7 12月 10 05:47 /dev/mapper/vg1-lv1 -&gt; ../dm-2</span><br><span class="line">[root@zutuanxue ~]# ll /dev/vg1/lv1 </span><br><span class="line">lrwxrwxrwx 1 root root 7 12月 10 05:47 /dev/vg1/lv1 -&gt; ../dm-2</span><br><span class="line">[root@zutuanxue ~]# ll /dev/dm-2 </span><br><span class="line">brw-rw---- 1 root disk 253, 2 12月 10 05:47 /dev/dm-2</span><br><span class="line"></span><br><span class="line">lvcreate参数</span><br><span class="line">-n：指定逻辑卷的名字</span><br><span class="line">-L：指定逻辑卷的大小</span><br><span class="line">-l：指定逻辑卷的大小</span><br><span class="line">举例：</span><br><span class="line">-l 100			100个PE，每个PE大小默认4M，故逻辑卷大小为400M</span><br><span class="line">-l 50%free		卷组剩余空间的50%</span><br><span class="line">[root@zutuanxue ~]# vgs vg1 </span><br><span class="line">  VG  #PV #LV #SN Attr   VSize VFree</span><br><span class="line">  vg1   2   1   0 wz--n- 3.99g 1.49g</span><br><span class="line"> </span><br><span class="line">创建大小为200M的逻辑卷lv02;每个PE为4M，-l 50指定50个PE,大小为200M</span><br><span class="line">[root@zutuanxue ~]# lvcreate -n lv2 -l 50 vg1</span><br><span class="line">  Logical volume &quot;lv2&quot; created.</span><br><span class="line">[root@zutuanxue ~]# vgs vg1 </span><br><span class="line">  VG  #PV #LV #SN Attr   VSize VFree </span><br><span class="line">  vg1   2   2   0 wz--n- 3.99g &lt;1.30g</span><br><span class="line"></span><br><span class="line">[root@manage01 ~]# lvs /dev/vg01/lv02</span><br><span class="line">  LV   VG   Attr       LSize   Pool Origin Data%  Move Log Cpy%Sync Convert</span><br><span class="line">  lv02 vg01 -wi-a----- 200.00m  </span><br><span class="line">  </span><br><span class="line">创建大小为剩余卷组vg01空间的50%的逻辑卷lv03</span><br><span class="line">[root@zutuanxue ~]# lvcreate -n lv3 -l 50%free vg1</span><br><span class="line">  Logical volume &quot;lv3&quot; created.</span><br><span class="line">[root@zutuanxue ~]# vgs vg1 </span><br><span class="line">  VG  #PV #LV #SN Attr   VSize VFree  </span><br><span class="line">  vg1   2   3   0 wz--n- 3.99g 664.00m</span><br><span class="line"></span><br><span class="line">查看逻辑卷的信息：</span><br><span class="line">[root@zutuanxue ~]# lvs /dev/vg1/lv1 </span><br><span class="line">  LV   VG  Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  lv1  vg1 -wi-a----- 2.50g                                                    </span><br><span class="line">[root@zutuanxue ~]# lvs /dev/vg1/lv2</span><br><span class="line">  LV   VG  Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  lv2  vg1 -wi-a----- 200.00m                                                    </span><br><span class="line">[root@zutuanxue ~]# lvs /dev/vg1/lv3</span><br><span class="line">  LV   VG  Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  lv3  vg1 -wi-a----- 664.00m                                                    </span><br><span class="line">[root@zutuanxue ~]# lvdisplay /dev/vg1/lv1 </span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/vg1/lv1</span><br><span class="line">  LV Name                lv1</span><br><span class="line">  VG Name                vg1</span><br><span class="line">  LV UUID                jj9Sj1-zHuo-qpBZ-Dkk1-LVYB-HyUH-LQ6edW</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time localhost.localdomain, 2019-12-10 05:46:59 -0500</span><br><span class="line">  LV Status              available</span><br><span class="line">  # open                 0</span><br><span class="line">  LV Size                2.50 GiB</span><br><span class="line">  Current LE             640</span><br><span class="line">  Segments               2</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:2</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">5. 格式化逻辑卷</span><br><span class="line">[root@zutuanxue ~]# mkfs.ext4 /dev/vg1/lv1 </span><br><span class="line"></span><br><span class="line">6. 挂载使用</span><br><span class="line">1）创建一个空的挂载点</span><br><span class="line">[root@zutuanxue /]# mkdir /lv1</span><br><span class="line">2）挂载使用</span><br><span class="line">[root@zutuanxue /]# mount /dev/vg1/lv1 /lv1/</span><br></pre></td></tr></table></figure>

<h1 id="逻辑卷实战案例-逻辑卷扩容"><a href="#逻辑卷实战案例-逻辑卷扩容" class="headerlink" title="逻辑卷实战案例-逻辑卷扩容"></a>逻辑卷实战案例-逻辑卷扩容</h1><p> 阅读 (161311) </p>
<p> 分享</p>
<h2 id="案例需求"><a href="#案例需求" class="headerlink" title="案例需求"></a>案例需求</h2><p>将&#x2F;lv1目录动态扩容到3G</p>
<h2 id="案例思路"><a href="#案例思路" class="headerlink" title="案例思路"></a>案例思路</h2><ol>
<li>查看&#x2F;lv1目录所对应的逻辑卷是哪一个 &#x2F;dev&#x2F;mapper&#x2F;vg1-lv1</li>
<li>查看当前逻辑卷所在的卷组vg1剩余空间是否足够</li>
<li>如果vg1空间不够，得先扩容卷组，再扩容逻辑卷</li>
<li>如果vg1空间足够，直接扩容逻辑卷</li>
</ol>
<h2 id="案例实现-1"><a href="#案例实现-1" class="headerlink" title="案例实现"></a>案例实现</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">步骤：</span><br><span class="line">1. 查看/lv1目录属于哪个卷组</span><br><span class="line">[root@zutuanxue /]# df -h</span><br><span class="line">文件系统             容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/vg1-lv1  2.4G  7.5M  2.3G    1% /lv1</span><br><span class="line"></span><br><span class="line">[root@zutuanxue /]# lvs</span><br><span class="line">  LV   VG  Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  root cl  -wi-ao---- &lt;17.00g                                                    </span><br><span class="line">  swap cl  -wi-ao----   2.00g                                                    </span><br><span class="line">  lv1  vg1 -wi-ao----   2.50g                                                    </span><br><span class="line">  lv2  vg1 -wi-a----- 200.00m                                                    </span><br><span class="line">  lv3  vg1 -wi-a----- 664.00m                                                    </span><br><span class="line">2. 卷组的剩余空间</span><br><span class="line">[root@zutuanxue /]# vgs</span><br><span class="line">  VG  #PV #LV #SN Attr   VSize   VFree  </span><br><span class="line">  cl    1   2   0 wz--n- &lt;19.00g      0 </span><br><span class="line">  vg1   2   4   0 wz--n-   3.99g 664.00m</span><br><span class="line">结果：当前卷组空间不足我扩容</span><br><span class="line"></span><br><span class="line">3. 扩容逻辑卷所在的卷组</span><br><span class="line">1）首先得有物理设备 /dev/sdb3</span><br><span class="line">2) 将物理设备做成物理卷</span><br><span class="line">[root@zutuanxue /]# pvcreate /dev/sdb3 </span><br><span class="line">  Physical volume &quot;/dev/sdb3&quot; successfully created.</span><br><span class="line">[root@zutuanxue /]# pvs</span><br><span class="line">  PV         VG  Fmt  Attr PSize   PFree  </span><br><span class="line">  /dev/sda2  cl  lvm2 a--  &lt;19.00g      0 </span><br><span class="line">  /dev/sdb1  vg1 lvm2 a--   &lt;2.00g      0 </span><br><span class="line">  /dev/sdb2  vg1 lvm2 a--   &lt;2.00g 464.00m</span><br><span class="line">  /dev/sdb3      lvm2 ---    2.00g   2.00g</span><br><span class="line">  3）将物理卷加入到卷组中（卷组扩容）</span><br><span class="line">[root@zutuanxue /]# vgextend vg1 /dev/sdb3 </span><br><span class="line">  Volume group &quot;vg1&quot; successfully extended</span><br><span class="line">[root@zutuanxue /]# pvs</span><br><span class="line">  PV         VG  Fmt  Attr PSize   PFree  </span><br><span class="line">  /dev/sda2  cl  lvm2 a--  &lt;19.00g      0 </span><br><span class="line">  /dev/sdb1  vg1 lvm2 a--   &lt;2.00g      0 </span><br><span class="line">  /dev/sdb2  vg1 lvm2 a--   &lt;2.00g 464.00m</span><br><span class="line">  /dev/sdb3  vg1 lvm2 a--   &lt;2.00g  &lt;2.00g</span><br><span class="line">  </span><br><span class="line">注意：</span><br><span class="line">正常情况下，应该先将/dev/sdb3物理设备创建为物理卷再加入到卷组中；如果直接加入卷组，系统会自动帮你将其做成物理卷。</span><br><span class="line"></span><br><span class="line">[root@zutuanxue /]# vgs</span><br><span class="line">  VG  #PV #LV #SN Attr   VSize   VFree </span><br><span class="line">  cl    1   2   0 wz--n- &lt;19.00g     0 </span><br><span class="line">  vg1   3   4   0 wz--n-  &lt;5.99g &lt;2.45g</span><br><span class="line"></span><br><span class="line">4. 扩容逻辑卷</span><br><span class="line">[root@zutuanxue /]# lvextend -L 3G /dev/vg1/lv1 </span><br><span class="line">		-L 3G最终的大小</span><br><span class="line">或者</span><br><span class="line">[root@zutuanxue /]# lvextend -L +1.5G /dev/vg1/lv1 	 -L +1.5G 扩容1.5G</span><br><span class="line"></span><br><span class="line">5. 查看结果</span><br><span class="line">[root@zutuanxue /]# lvs</span><br><span class="line">  LV   VG  Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  root cl  -wi-ao---- &lt;17.00g                                                    </span><br><span class="line">  swap cl  -wi-ao----   2.00g                                                    </span><br><span class="line">  lv1  vg1 -wi-ao----   3.00g       已经扩容到了3G</span><br><span class="line">  </span><br><span class="line">[root@zutuanxue /]# df -h</span><br><span class="line">文件系统             容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/vg1-lv1  2.4G  7.5M  2.3G    1% /lv1</span><br><span class="line">		实际并没有改变</span><br><span class="line"></span><br><span class="line">6. 同步文件系统</span><br><span class="line">[root@zutuanxue /]# resize2fs /dev/vg1/lv1    #该命令适用于ext分区</span><br><span class="line">[root@manage01  ~]# xfs_growfs /dev/vg1/lv1  #该命令适用于xfs分区</span><br><span class="line">7. 再次查看验证</span><br><span class="line">[root@zutuanxue /]# df -h</span><br><span class="line">文件系统             容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/vg1-lv1  2.9G  7.5M  2.8G    1% /lv1</span><br><span class="line">		扩容成功</span><br></pre></td></tr></table></figure>

<h1 id="逻辑卷实战案例-逻辑卷裁剪"><a href="#逻辑卷实战案例-逻辑卷裁剪" class="headerlink" title="逻辑卷实战案例-逻辑卷裁剪"></a>逻辑卷实战案例-逻辑卷裁剪</h1><p> 阅读 (227679) </p>
<p> 分享</p>
<h2 id="案例需求-1"><a href="#案例需求-1" class="headerlink" title="案例需求"></a>案例需求</h2><p>将lv1逻辑卷由原来的3G缩小为2G</p>
<h2 id="案例思路-1"><a href="#案例思路-1" class="headerlink" title="案例思路"></a>案例思路</h2><p>1、卸载逻辑卷<br>2、扫描逻辑卷<br>3、裁剪率lv1文件系统<br>4、裁剪逻辑卷lv1<br>5、挂载使用</p>
<h2 id="案例实现-2"><a href="#案例实现-2" class="headerlink" title="案例实现"></a>案例实现</h2><h3 id="ext分区逻辑卷裁剪"><a href="#ext分区逻辑卷裁剪" class="headerlink" title="ext分区逻辑卷裁剪"></a>ext分区逻辑卷裁剪</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue /]# umount /lv1</span><br><span class="line">[root@zutuanxue /]# e2fsck -f /dev/vg1/lv1		检验文件系统</span><br><span class="line">[root@zutuanxue /]# resize2fs /dev/vg1/lv1  2G	裁剪文件系统到2G</span><br><span class="line">[root@zutuanxue /]# lvreduce /dev/vg1/lv1 -L 2G	裁剪逻辑卷</span><br><span class="line">[root@zutuanxue /]# mount /dev/vg1/lv1 /lv1/		挂载使用</span><br><span class="line">[root@zutuanxue /]# df -h</span><br><span class="line">文件系统             容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/vg1-lv1  2.0G  9.0M  1.8G    1% /lv1</span><br></pre></td></tr></table></figure>

<h3 id="xfs分区逻辑卷裁剪"><a href="#xfs分区逻辑卷裁剪" class="headerlink" title="xfs分区逻辑卷裁剪"></a>xfs分区逻辑卷裁剪</h3><p><strong>案例思路：</strong><br>1、将lv2的文件系统格式化为xfs<br>2、将&#x2F;dev&#x2F;vg1&#x2F;lv2挂载到&#x2F;lv2<br>3、在&#x2F;lv2中建立一个文件，写入内容<br>4、备份数据<br>5、卸载分区并裁剪逻辑卷<br>6、格式化裁剪后的逻辑卷<br>7、导入数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1)备份数据命令</span><br><span class="line">xfsdump</span><br><span class="line">2）备份数据</span><br><span class="line">[root@zutuanxue /]# xfsdump -f /root/lv2.img /lv2</span><br><span class="line">#挂载点目录后面不要加&quot;/&quot;</span><br><span class="line">xfsdump: using file dump (drive_simple) strategy</span><br><span class="line">xfsdump: version 3.1.8 (dump format 3.0) - type ^C for status and control</span><br><span class="line"></span><br><span class="line"> ============================= dump label dialog ==============================</span><br><span class="line"></span><br><span class="line">please enter label for this dump session (timeout in 300 sec)</span><br><span class="line"> -&gt; lv2</span><br><span class="line">session label entered: &quot;lv2&quot;</span><br><span class="line"></span><br><span class="line"> --------------------------------- end dialog ---------------------------------</span><br><span class="line"></span><br><span class="line">xfsdump: level 0 dump of localhost.localdomain:/lv2</span><br><span class="line">xfsdump: dump date: Tue Dec 10 06:33:44 2019</span><br><span class="line">xfsdump: session id: 15936371-b967-4c2c-8995-49eb702792fe</span><br><span class="line">xfsdump: session label: &quot;lv2&quot;</span><br><span class="line">xfsdump: ino map phase 1: constructing initial dump list</span><br><span class="line">xfsdump: ino map phase 2: skipping (no pruning necessary)</span><br><span class="line">xfsdump: ino map phase 3: skipping (only one dump stream)</span><br><span class="line">xfsdump: ino map construction complete</span><br><span class="line">xfsdump: estimated dump size: 20800 bytes</span><br><span class="line"></span><br><span class="line"> ============================= media label dialog =============================</span><br><span class="line"></span><br><span class="line">please enter label for media in drive 0 (timeout in 300 sec)</span><br><span class="line"> -&gt; lv2</span><br><span class="line">media label entered: &quot;lv2&quot;</span><br><span class="line"></span><br><span class="line"> --------------------------------- end dialog ---------------------------------</span><br><span class="line"></span><br><span class="line">xfsdump: creating dump session media file 0 (media 0, file 0)</span><br><span class="line">xfsdump: dumping ino map</span><br><span class="line">xfsdump: dumping directories</span><br><span class="line">xfsdump: dumping non-directory files</span><br><span class="line">xfsdump: ending media file</span><br><span class="line">xfsdump: media file size 21016 bytes</span><br><span class="line">xfsdump: dump size (non-dir files) : 0 bytes</span><br><span class="line">xfsdump: dump complete: 14 seconds elapsed</span><br><span class="line">xfsdump: Dump Summary:</span><br><span class="line">xfsdump:   stream 0 /root/lv2.img OK (success)</span><br><span class="line">xfsdump: Dump Status: SUCCESS</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3)裁剪</span><br><span class="line">[root@zutuanxue ~]# umount /lv2</span><br><span class="line">[root@zutuanxue ~]# lvreduce /dev/vg1/lv2 -L 100M</span><br><span class="line">  WARNING: Reducing active logical volume to 2.00 GiB.</span><br><span class="line">  THIS MAY DESTROY YOUR DATA (filesystem etc.)</span><br><span class="line">Do you really want to reduce vg01/lv01? [y/n]: y</span><br><span class="line">  Size of logical volume vg01/lv01 changed from 7.00 GiB (1792 extents) to 2.00 GiB (512 extents).</span><br><span class="line">  Logical volume vg01/lv01 successfully resized.</span><br><span class="line"></span><br><span class="line">4）格式化</span><br><span class="line">[root@zutuanxue ~]# mkfs.xfs -f /dev/vg1/lv2</span><br><span class="line">[root@zutuanxue ~]# mount /dev/vg1/lv2 /lv2</span><br><span class="line"></span><br><span class="line">5）恢复数据 -f source</span><br><span class="line">[root@zutuanxue ~]# xfsrestore -f /root/lv2.img /lv2</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">xfsrestore: Restore Status: SUCCESS</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@zutuanxue ~]# df -h</span><br><span class="line">文件系统             容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/vg1-lv2   95M  6.0M   89M    7% /lv2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# cat /lv2/filea </span><br><span class="line">hahaha</span><br></pre></td></tr></table></figure>

<h1 id="逻辑卷实战案例-swap分区"><a href="#逻辑卷实战案例-swap分区" class="headerlink" title="逻辑卷实战案例-swap分区"></a>逻辑卷实战案例-swap分区</h1><p> 阅读 (252996) </p>
<p> 分享</p>
<p>swap分区在系统的运行内存不够用的时候，把运行内存中的一部分空间释放出来，以供当前运行的程序使用。那些被释放的空间可能来自一些很长时间没有什么操作的程序，这些被释放的空间被临时保存到swap分区中，等到那些程序要运行时，再从Swap分区中恢复保存的数据到内存中。可以缓解物理内存不足的压力，如果物理内存不足，还没有swap空间，会宕机</p>
<h2 id="扩容swap空间"><a href="#扩容swap空间" class="headerlink" title="扩容swap空间"></a>扩容swap空间</h2><p>方法1： 增加一个设备（硬盘，分区，逻辑卷）来扩容swap空间</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">查看swap空间大小：</span><br><span class="line">[root@zutuanxue ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           3918        1309        2002          15         606        2358</span><br><span class="line">Swap:          2047           0        2047</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# swapon -s</span><br><span class="line">文件名				类型					大小			已用	权限</span><br><span class="line">/dev/dm-1   partition		2097148			0		-2</span><br><span class="line">[root@zutuanxue ~]# mkswap /dev/sdb4</span><br><span class="line">正在设置交换空间版本 1，大小 = 2 GiB (2147479552  个字节)</span><br><span class="line">无标签，UUID=8235e59a-1043-4251-8694-ba619cb36f1c</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# blkid /dev/sdb4</span><br><span class="line">/dev/sdb4: UUID=&quot;8...c&quot; TYPE=&quot;swap&quot; PARTUUID=&quot;b...e&quot;</span><br><span class="line"></span><br><span class="line">//激活swap分区。swap空间不能手动挂载</span><br><span class="line">[root@zutuanxue ~]# swapon /dev/sdb4</span><br><span class="line">[root@zutuanxue ~]# swapon -s</span><br><span class="line">文件名						类型				大小		已用	权限</span><br><span class="line">/dev/dm-1       partition	2097148		0		-2</span><br><span class="line">/dev/sdb4       partition	2097148		0		-3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# free -m</span><br><span class="line">      total  used  free shared buff/cache available</span><br><span class="line">Swap:  4095   0    4095</span><br><span class="line"></span><br><span class="line">LVM形式</span><br><span class="line">[root@zutuanxue ~]# mkswap /dev/vg1/swap		#创建swap</span><br><span class="line">[root@zutuanxue ~]# swapon /dev/vg1/swap		#开启swap</span><br><span class="line">[root@zutuanxue ~]# lvextend -L 4G	/dev/vg1/swap	#放大LVM形式的swap</span><br><span class="line">[root@zutuanxue ~]# swapoff /dev/vg1/swap		#关闭lvm形式的swap</span><br><span class="line">[root@zutuanxue /]# mkswap /dev/vg1/lv-swap	#重新制作swap</span><br><span class="line">[root@zutuanxue ~]# swapon /dev/vg1/swap		#开启lvm形式的swap</span><br><span class="line">[root@zutuanxue ~]# free -m	#确认swap分区是否放大</span><br></pre></td></tr></table></figure>

<p>方法2： 使用dd命令模拟大文件来扩容swap</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# dd if=/dev/zero of=/tmp/swapfile bs=1M count=2048</span><br><span class="line"></span><br><span class="line">if=源文件,in file指定从哪里读入数据</span><br><span class="line">of=目标文件，out file指定将数据写入什么位置</span><br><span class="line">bs=复制数据的大小，block size</span><br><span class="line">count=复制的个数</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">1. 一般可以使用dd命令做块设备文件的备份</span><br><span class="line">2. /dev/zero 特殊设备，一般用来模拟一个大文件，源源不断的二进制的数据流;</span><br><span class="line">/dev/null  空设备，类似黑洞</span><br><span class="line"></span><br><span class="line">步骤：</span><br><span class="line">1. 使用dd命令模拟大文件</span><br><span class="line"># dd if=/dev/zero of=/tmp/swapfile bs=1M count=2048</span><br><span class="line">2. 格式化大文件</span><br><span class="line">[root@zutuanxue ~]# mkswap /tmp/swapfile </span><br><span class="line">mkswap: /tmp/swapfile：不安全的权限 0644，建议使用 0600。</span><br><span class="line">正在设置交换空间版本 1，大小 = 2 GiB (2147479552  个字节)</span><br><span class="line">无标签，UUID=3d855316-c97c-42ca-9c52-9df26a4517a0 </span><br><span class="line">[root@zutuanxue ~]# ll /tmp/swapfile </span><br><span class="line">-rw-r--r-- 1 root root 2147483648 12月 10 21:02 /tmp/swapfile</span><br><span class="line">[root@zutuanxue ~]# chmod 600 /tmp/swapfile </span><br><span class="line"></span><br><span class="line">3.激活大文件</span><br><span class="line">[root@zutuanxue ~]# swapon -p1 /tmp/swapfile</span><br><span class="line">-p：指定优先级，数字越大优先级越高，-1~32767</span><br><span class="line"></span><br><span class="line">4. 查看</span><br><span class="line">[root@zutuanxue ~]# swapon -s</span><br><span class="line">文件名							类型				大小			已用	权限</span><br><span class="line">/dev/dm-1         partition	2097148		 268	-2</span><br><span class="line">/dev/sdb4         partition	2097148		 0		-3</span><br><span class="line">/tmp/swapfile     file    	2097148		 0		 1</span><br><span class="line">[root@zutuanxue ~]# free -m</span><br><span class="line">      total used  free  shared  buff/cache available</span><br><span class="line">Swap:  6143  0    6143</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">如果开机自动挂载，需要修改文件：/etc/fstab</span><br><span class="line">[root@zutuanxue ~]# vim /etc/fstab </span><br><span class="line">/dev/sda4  			swap    swap     defaults       0 0</span><br><span class="line">/tmp/swapfile   swap    swap     dfaults,pri=1  0 0</span><br><span class="line">[root@zutuanxue ~]# swapon -a</span><br><span class="line"></span><br><span class="line">关闭swap</span><br><span class="line">[root@zutuanxue ~]# swapoff /dev/sdb4</span><br><span class="line">[root@zutuanxue ~]# swapoff /tmp/swapfile</span><br><span class="line">或者</span><br><span class="line">#关闭所有swap****慎用*****</span><br><span class="line">[root@zutuanxue ~]# swapoff -a	</span><br></pre></td></tr></table></figure>

<h1 id="逻辑卷实战案例-其他常见操作"><a href="#逻辑卷实战案例-其他常见操作" class="headerlink" title="逻辑卷实战案例-其他常见操作"></a>逻辑卷实战案例-其他常见操作</h1><p> 阅读 (90727) </p>
<p> 分享</p>
<h2 id="LVM中有PV出现了坏道"><a href="#LVM中有PV出现了坏道" class="headerlink" title="LVM中有PV出现了坏道"></a>LVM中有PV出现了坏道</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#LVM中有PV出现了坏道</span><br><span class="line">#数据拷贝 将/dev/sdc1拷贝到/dev/sdd1</span><br><span class="line">[root@zutuanxue ~]#lvchange -an /dev/baism/abc</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# pvmove /dev/sdc1 /dev/sdd1</span><br><span class="line">  /dev/sdc1: Moved: 2.7%</span><br><span class="line">  /dev/sdc1: Moved: 100.0%</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# vgchange -a n /dev/baism</span><br><span class="line">  0 logical volume(s) in volume group &quot;baism&quot; now active</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# vgreduce baism /dev/sdc1</span><br><span class="line">  Removed &quot;/dev/sdc1&quot; from volume group &quot;baism&quot;</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# vgchange -a y /dev/baism</span><br><span class="line">  1 logical volume(s) in volume group &quot;baism&quot; now active</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]#lvchange -ay /dev/baism/abc</span><br><span class="line"></span><br><span class="line">#卷组迁移</span><br><span class="line">#导出卷组 old machine</span><br><span class="line">[root@zutuanxue ~]# vgexport /dev/baism</span><br><span class="line">  Volume group &quot;baism&quot; successfully exported</span><br><span class="line"></span><br><span class="line">#导入卷组  new machine</span><br><span class="line">[root@zutuanxue ~]# pvscan</span><br><span class="line">[root@zutuanxue ~]# vgimport /dev/baism</span><br><span class="line">  Volume group &quot;baism&quot; successfully imported</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# vgchange -a y /dev/baism</span><br><span class="line">  1 logical volume(s) in volume group &quot;baism&quot; now active</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]#lvchange -ay /dev/baism/abc</span><br></pre></td></tr></table></figure>

<h2 id="volume-merged-lv合并"><a href="#volume-merged-lv合并" class="headerlink" title="volume merged lv合并"></a>volume merged lv合并</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@zutuanxue lvm]# vgcreate baism1 /dev/sdc1</span><br><span class="line">  Volume group &quot;baism1&quot; successfully created</span><br><span class="line">[root@zutuanxue lvm]# vgcreate baism2 /dev/sdd1</span><br><span class="line">  Volume group &quot;baism2&quot; successfully created</span><br><span class="line">[root@zutuanxue lvm]# vgmerge -v baism1 baism2</span><br><span class="line">    Checking for volume group &quot;baism1&quot;</span><br><span class="line">    Checking for volume group &quot;baism2&quot;</span><br><span class="line">    Archiving volume group &quot;baism2&quot; metadata (seqno 1).</span><br><span class="line">    Archiving volume group &quot;baism1&quot; metadata (seqno 1).</span><br><span class="line">    Writing out updated volume group</span><br><span class="line">    Creating volume group backup &quot;/etc/lvm/backup/baism1&quot; (seqno 2).</span><br><span class="line">  Volume group &quot;baism2&quot; successfully merged into &quot;baism1&quot;</span><br></pre></td></tr></table></figure>

<h2 id="volume-spilt-lv分割"><a href="#volume-spilt-lv分割" class="headerlink" title="volume spilt lv分割"></a>volume spilt lv分割</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# vgsplit baism1 baism2 /dev/sdd1</span><br><span class="line">  New volume group &quot;baism2&quot; successfully split from &quot;baism1&quot;</span><br><span class="line"></span><br><span class="line">baism1  Old volume</span><br><span class="line">baism2  New volume  /dev/sdd1</span><br></pre></td></tr></table></figure>

<h2 id="逻辑卷从旧机器迁移到新机器"><a href="#逻辑卷从旧机器迁移到新机器" class="headerlink" title="逻辑卷从旧机器迁移到新机器"></a>逻辑卷从旧机器迁移到新机器</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#########Backing Up Volume Group Metadata:</span><br><span class="line"></span><br><span class="line">当创建vg的时候，系统默认会自动备份Metadata。/etc/lvm/backup下面存放的是metadata的备份信息，而/etc/lvm/archive下面存放的是metadata的archive信息。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue backup]# pwd</span><br><span class="line">/etc/lvm/backup</span><br><span class="line"></span><br><span class="line">[root@zutuanxue backup]# strings baism2</span><br><span class="line"># Generated by LVM2 version 2.02.87(2)-rhel7 (2011-10-12): Mon Jan 14 22:27:02 2013</span><br><span class="line">contents = &quot;Text Format Volume Group&quot;</span><br><span class="line">version = 1</span><br><span class="line"></span><br><span class="line">description = &quot;Created *after* executing &#x27;vgsplit baism1 baism2 /dev/sdd1&#x27;&quot;   #warn</span><br><span class="line"></span><br><span class="line">creation_host = &quot;rhel7&quot; # Linux rhel7 2.6.32-220.el6.x86_64 #1 SMP Wed Nov 9 08:03:13 EST 2011 x86_64</span><br><span class="line">creation_time = 1358173622      # Mon Jan 14 22:27:02 2013</span><br><span class="line">baism2 &#123;</span><br><span class="line">        id = &quot;Ft0eD7-oVca-mwY6-6FeK-TwW2-hTrj-aYxYbq&quot;</span><br><span class="line">        seqno = 2</span><br><span class="line">        status = [&quot;RESIZEABLE&quot;, &quot;READ&quot;, &quot;WRITE&quot;]</span><br><span class="line">        flags = []</span><br><span class="line">        extent_size = 8192              # 4 Megabytes</span><br><span class="line">        max_lv = 0</span><br><span class="line">        max_pv = 0</span><br><span class="line">        metadata_copies = 0</span><br><span class="line">        physical_volumes &#123;</span><br><span class="line">                pv0 &#123;</span><br><span class="line">                        id = &quot;m7aKrr-D0r9-jOJ2-aK51-ec25-4rwH-4ccbbh&quot;</span><br><span class="line">                        device = &quot;/dev/sdd1&quot;    # Hint only</span><br><span class="line">                        status = [&quot;ALLOCATABLE&quot;]</span><br><span class="line">                        flags = []</span><br><span class="line">                        dev_size = 4192902      # 1.99933 Gigabytes</span><br><span class="line">                        pe_start = 2048</span><br><span class="line">                        pe_count = 511  # 1.99609 Gigabytes</span><br></pre></td></tr></table></figure>

<h1 id="创建高可用逻辑卷"><a href="#创建高可用逻辑卷" class="headerlink" title="创建高可用逻辑卷"></a>创建高可用逻辑卷</h1><p> 阅读 (298063) </p>
<p> 分享</p>
<h2 id="一、逻辑卷条带化："><a href="#一、逻辑卷条带化：" class="headerlink" title="一、逻辑卷条带化："></a>一、逻辑卷条带化：</h2><p>把保存到逻辑卷的数据分成n等分，分别写到不同的物理卷，可以提高数据的读写效率；如果任何一个涉及到的物理卷出现故障，数据都会无法恢复。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">创建物理卷</span><br><span class="line">[root@manage01 ~]# pvcreate /dev/sdb[12]</span><br><span class="line"></span><br><span class="line">查看物理卷</span><br><span class="line">[root@manage01 ~]# pvs</span><br><span class="line">/dev/sdb1            lvm2 a--   2.01g  2.01g</span><br><span class="line">/dev/sdb2            lvm2 a--   2.01g  2.01g</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">创建卷组：</span><br><span class="line">[root@manage01 ~]# vgcreate vg01 /dev/sdb[12]</span><br><span class="line"></span><br><span class="line">[root@manage01 ~]# pvs /dev/sdb[12]</span><br><span class="line">  PV         VG   Fmt  Attr PSize PFree</span><br><span class="line"> /dev/sdb1  vg01      lvm2 a--   2.00g  2.00g</span><br><span class="line"> /dev/sdb2  vg01      lvm2 a--   2.00g  2.00g</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">创建实现条带化的逻辑卷：</span><br><span class="line">[root@zutuanxue ~]# lvcreate -n lv1 -L 1G vg01 -i 2 /dev/sdb&#123;1,2&#125;</span><br><span class="line"></span><br><span class="line">-i 参数：给出条带化的数量</span><br><span class="line">[root@zutuanxue ~]# lvs /dev/vg01/lv01</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">格式化挂载使用：</span><br><span class="line">[root@zutuanxue ~]# mkfs.ext4 /dev/vg1/lv1</span><br><span class="line">[root@zutuanxue ~]# mount /dev/vg1/lv1 /lv1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">测试：</span><br><span class="line">[root@zutuanxue ~]# dnf install sysstat -y</span><br><span class="line">[root@zutuanxue ~]# iostat -m -d /dev/sdb[12] 2 </span><br><span class="line">-d 查看磁盘</span><br><span class="line">-m 以什么速度显示，每秒M</span><br><span class="line"> 2 每隔2s显示一次 </span><br><span class="line">   如果后面还有数字则代表总共显示多少次</span><br><span class="line">   </span><br><span class="line">[root@zutuanxue ~]# dd if=/dev/zero of=/lv1/test bs=1M count=1000    模拟写数据</span><br><span class="line">[root@zutuanxue ~]# iostat -m -d /dev/sdb[12] 1</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">Device tps  		MB_read/s  MB_wrtn/s MB_read MB_wrtn</span><br><span class="line">sdb1   4015.00  0.01       364.38    0       364</span><br><span class="line">sdb2   4005.00  0.00       364.33    0       364</span><br></pre></td></tr></table></figure>

<h2 id="二、逻辑卷实现镜像"><a href="#二、逻辑卷实现镜像" class="headerlink" title="二、逻辑卷实现镜像"></a>二、逻辑卷实现镜像</h2><p>镜像是一种文件存储形式，是冗余的一种类型，一个磁盘上的数据在另一个磁盘上存在一个完全相同的副本即为镜像。对某个逻辑卷的数据做镜像，起到数据备份的作用。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">当前环境：</span><br><span class="line">[root@zutuanxue ~]# lsblk</span><br><span class="line">├─sdb3        8:19   0    2G  0 part </span><br><span class="line">├─sdb4        8:20   0    2G  0 part </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">创建物理卷：</span><br><span class="line">[root@zutuanxue ~]# pvcreate /dev/sdb[34]</span><br><span class="line">[root@zutuanxue ~]# pvs</span><br><span class="line">  PV         VG  Fmt  Attr PSize   PFree </span><br><span class="line">  /dev/sdb3      lvm2 ---    2.00g  2.00g</span><br><span class="line">  /dev/sdb4      lvm2 ---    2.00g  2.00g</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"> 将物理卷加入到vg1卷组：</span><br><span class="line">[root@zutuanxue ~]# vgextend vg1 /dev/sdb[34]</span><br><span class="line">  Volume group &quot;vg1&quot; successfully extended</span><br><span class="line">[root@zutuanxue ~]# vgs</span><br><span class="line">  VG  #PV #LV #SN Attr   VSize   VFree</span><br><span class="line">  vg1   4   1   0 wz--n-   7.98g 6.98g</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">创建实现镜像的逻辑卷：</span><br><span class="line">[root@zutuanxue ~]# lvcreate -n lv2 -L 1G vg1 -m 1 /dev/sdb[34]</span><br><span class="line">  Logical volume &quot;lv2&quot; created.</span><br><span class="line"></span><br><span class="line">-m参数：给出镜像的个数；1表示1个镜像</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# lvs -a -o +devices</span><br><span class="line">[root@zutuanxue ~]# lvs -a -o +devices</span><br><span class="line">  LV             VG  Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert Devices                        </span><br><span class="line">  root           cl  -wi-ao---- &lt;17.00g                                                     /dev/sda2(512)                 </span><br><span class="line">  swap           cl  -wi-ao----   2.00g                                                     /dev/sda2(0)                   </span><br><span class="line">  lv1            vg1 -wi-ao----   1.00g                                                     /dev/sdb1(0),/dev/sdb2(0)      </span><br><span class="line">  lv2            vg1 rwi-a-r---   1.00g                                    100.00           lv2_rimage_0(0),lv2_rimage_1(0)</span><br><span class="line">  [lv2_rimage_0] vg1 iwi-aor---   1.00g                                                     /dev/sdb3(1)                   </span><br><span class="line">  [lv2_rimage_1] vg1 iwi-aor---   1.00g                                                     /dev/sdb4(1)                   </span><br><span class="line">  [lv2_rmeta_0]  vg1 ewi-aor---   4.00m                                                     /dev/sdb3(0)                   </span><br><span class="line">  [lv2_rmeta_1]  vg1 ewi-aor---   4.00m                                                     /dev/sdb4(0)         </span><br><span class="line"></span><br><span class="line">说明： Cpy%Sync 18.77该值是100%说明复制ok </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">格式化逻辑卷：</span><br><span class="line">[root@zutuanxue ~]# mkfs.ext4 /dev/vg1/lv2</span><br><span class="line">挂载使用</span><br><span class="line">[root@zutuanxue ~]# mount /dev/vg1/lv2 /lv2/</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# touch /lv2/file&#123;1..10&#125;</span><br><span class="line">[root@zutuanxue ~]# mkdir /lv2/dir&#123;1..10&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">测试验证：</span><br><span class="line">思路：损坏一个磁盘，测试数据是否在第二个物理卷中</span><br><span class="line">1. 使用dd命令破坏一个物理卷</span><br><span class="line">[root@zutuanxue ~]# dd if=/dev/zero of=/dev/sdb3 bs=1M count=100</span><br><span class="line"></span><br><span class="line">2. 再次查看物理卷发现有一个unknown Device    pvs命令</span><br><span class="line"> [unknown]  vg1 lvm2 a-m   &lt;2.00g 1016.00m</span><br><span class="line"></span><br><span class="line">3. 将损坏的盘从卷组中移除</span><br><span class="line">[root@zutuanxue ~]# vgreduce vg1 --removemissing --force</span><br><span class="line"></span><br><span class="line">4. 再次查看挂载点/lv2数据依然存在</span><br><span class="line"></span><br><span class="line">自己也可以再次测试：</span><br><span class="line">1. 再拿刚刚人为损坏的盘做成物理卷再次加入到vg1卷组中</span><br><span class="line">[root@zutuanxue /]# pvcreate /dev/sdb3 </span><br><span class="line"> </span><br><span class="line">[root@zutuanxue /]# vgextend vg1 /dev/sdb3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. 修复</span><br><span class="line">[root@zutuanxue /]# lvconvert --repair /dev/vg1/lv2 /dev/sdb[34]</span><br></pre></td></tr></table></figure>

<h2 id="三、逻辑卷快照"><a href="#三、逻辑卷快照" class="headerlink" title="三、逻辑卷快照"></a>三、逻辑卷快照</h2><p>快照的作用：保存做快照那一刻数据的状态，方便用户实现数据回滚，避免重要数据被覆盖。</p>
<p>快照的大小：快照需要占用卷组空间，快照的大小决定了允许有多少数据发生改变，如果制作快照时分配的容量与对应的逻辑卷相同，那么就允许逻辑卷中所有的数据发生改变。</p>
<p>COW：copy on write 当系统检测到做快照的逻辑卷当中的数据发生了改变，会在改变前将逻辑卷中的PE的数据复制到快照中的PE，然后再写入新的数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 创建快照 (EXT4)</span><br><span class="line">[root@zutuanxue /]# lvcreate -L 200M -s -n lv1-snap /dev/vg1/lv1	给lv1逻辑卷创建快照</span><br><span class="line">[root@zutuanxue /]# mount -o ro /dev/vg1/lv1-snap /lv1-snap/	挂载快照</span><br><span class="line"></span><br><span class="line">[root@zutuanxue /]# lvscan </span><br><span class="line">  ACTIVE   Original &#x27;/dev/vg1/lv1&#x27; [2.00 GiB] inherit</span><br><span class="line">  ACTIVE   Snapshot &#x27;/dev/vg1/lv1-snap&#x27; [200.00 MiB] inherit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue /] dmsetup ls --tree</span><br><span class="line">vg1-lv2--snap (252:5)</span><br><span class="line"> ├─vg1-lv1--snap-cow (253:4)		保存原卷改变前的数据</span><br><span class="line"> │  └─ (8:17)</span><br><span class="line"> └─vg1-lv1-real (253:3)				真实的逻辑卷（原卷）</span><br><span class="line">    ├─ (8:17)</span><br><span class="line">    └─ (8:18)</span><br><span class="line">vg1-lv1 (253:2)</span><br><span class="line"> └─vg1-lv1-real (253:3)</span><br><span class="line">    ├─ (8:17)</span><br><span class="line">    └─ (8:18)</span><br><span class="line">    </span><br><span class="line">2. 修改原卷的数据</span><br><span class="line">[root@zutuanxue /]# dd if=/dev/zero of=/lv1/test bs=1M count=30</span><br><span class="line"></span><br><span class="line">3. 观察Snapshot</span><br><span class="line">[root@zutuanxue /]# lvs /dev/vg1/lv1-snap </span><br><span class="line">  LV       VG  Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  lv1-snap vg1 swi-aos--- 200.00m      lv1    0.02                                   </span><br><span class="line">[root@zutuanxue /]# lvs /dev/vg1/lv1-snap </span><br><span class="line">  LV       VG  Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  lv1-snap vg1 swi-aos--- 200.00m      lv1    15.10                                  </span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">XFS：</span><br><span class="line">[root@node1 ~]# mount -o nouuid,ro /dev/vg1/lv1-snap /lv1-snap</span><br><span class="line">挂载快照，尽量使用ro的方式，将不会破坏快照卷中的数据</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">快照实现自动扩容：</span><br><span class="line">/etc/lvm/lvm.conf </span><br><span class="line">snapshot_autoextend_threshold = 80</span><br><span class="line">snapshot_autoextend_percent = 20</span><br><span class="line">//当快照使用到80%时，自动扩容20%；当snapshot_autoextend_threshold = 100表示关闭自动扩容</span><br><span class="line"></span><br><span class="line">修改完成后建议重启</span><br></pre></td></tr></table></figure>

<h1 id="linux磁盘管理-RAID介绍"><a href="#linux磁盘管理-RAID介绍" class="headerlink" title="linux磁盘管理-RAID介绍"></a>linux磁盘管理-RAID介绍</h1><p> 阅读 (161995) </p>
<p> 分享</p>
<h2 id="一、RAID介绍"><a href="#一、RAID介绍" class="headerlink" title="一、RAID介绍"></a>一、RAID介绍</h2><p>RAID(Redundant Array of Independent Disk 独立冗余磁盘阵列)技术是加州大学伯克利分校1987年提出，最初是为了组合小的廉价磁盘来代替大的昂贵磁盘，同时希望磁盘失效时不会使对数据的访问受损失而开发出一定水平的数据保护技术。RAID就是一种由多块廉价磁盘构成的冗余阵列，在操作系统下是作为一个独立的大型存储设备出现。RAID可以充分发挥出多块硬盘的优势，可以提升硬盘速度，增大容量，提供容错功能，能够确保数据安全性，易于管理的优点，在任何一块硬盘出现问题的情况下都可以继续工作，不会 受到损坏硬盘的影响。</p>
<h2 id="二、常见的RAID级别"><a href="#二、常见的RAID级别" class="headerlink" title="二、常见的RAID级别"></a>二、常见的RAID级别</h2><h3 id="2-1、-RAID0"><a href="#2-1、-RAID0" class="headerlink" title="2.1、 RAID0"></a>2.1、 RAID0</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602994630063.png" alt="raid0.png"></p>
<p><strong>RAID0特点：</strong></p>
<ul>
<li>至少需要两块磁盘</li>
<li>数据条带化分布到磁盘，高的读写性能，100%高存储空间利用率</li>
<li>数据没有冗余策略，一块磁盘故障，数据将无法恢复</li>
<li>应用场景：<ul>
<li>对性能要求高但对数据安全性和可靠性要求不高的场景，比如音频、视频等的存储。</li>
</ul>
</li>
</ul>
<h3 id="2-2、-RAID1"><a href="#2-2、-RAID1" class="headerlink" title="2.2、 RAID1"></a>2.2、 RAID1</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602994658333.png" alt="raid1.png"></p>
<p><strong>RAID1特点：</strong></p>
<ul>
<li>至少需要2块磁盘</li>
<li>数据镜像备份写到磁盘上(工作盘和镜像盘)，可靠性高，磁盘利用率为50%</li>
<li>读性能可以，但写性能不佳</li>
<li>一块磁盘故障，不会影响数据的读写</li>
<li>应用场景：<ul>
<li>对数据安全可靠要求较高的场景，比如邮件系统、交易系统等。</li>
</ul>
</li>
</ul>
<h3 id="2-3、-RAID5"><a href="#2-3、-RAID5" class="headerlink" title="2.3、 RAID5"></a>2.3、 RAID5</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602994685133.png" alt="raid5.png"></p>
<p><strong>RAID5特点：</strong></p>
<ul>
<li>至少需要3块磁盘</li>
<li>数据条带化存储在磁盘，读写性能好，磁盘利用率为(n-1)&#x2F;n</li>
<li>以奇偶校验(分散)做数据冗余</li>
<li>一块磁盘故障，可根据其他数据块和对应的校验数据重构损坏数据（消耗性能）</li>
<li>是目前综合性能最佳的数据保护解决方案</li>
<li>兼顾了存储性能、数据安全和存储成本等各方面因素（性价比高）</li>
<li>适用于大部分的应用场景</li>
</ul>
<h3 id="2-4、-RAID6"><a href="#2-4、-RAID6" class="headerlink" title="2.4、 RAID6"></a>2.4、 RAID6</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602994696875.png" alt="raid6.png"></p>
<p><strong>RAID6特点：</strong></p>
<ul>
<li>至少需要<strong>4</strong>块磁盘</li>
<li>数据条带化存储在磁盘，读取性能好，容错能力强</li>
<li>采用双重校验方式保证数据的安全性</li>
<li>如果2块磁盘同时故障，可以通过两个校验数据来重建两个磁盘的数据</li>
<li>成本要比其他等级高，并且更复杂</li>
<li>一般用于对数据安全性要求非常高的场合</li>
</ul>
<h3 id="2-5、-RAID10"><a href="#2-5、-RAID10" class="headerlink" title="2.5、 RAID10"></a>2.5、 RAID10</h3><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602994712492.png" alt="raid10.png"></p>
<p><strong>RAID10特点：</strong></p>
<ul>
<li>RAID10是raid1+raid0的组合</li>
<li>至少需要4块磁盘</li>
<li>两块硬盘为一组先做raid1，再将做好raid1的两组做raid0</li>
<li>兼顾数据的冗余（raid1镜像）和读写性能（raid0数据条带化）</li>
<li>磁盘利用率为50%，成本较高</li>
</ul>
<h2 id="三、RAID总结"><a href="#三、RAID总结" class="headerlink" title="三、RAID总结"></a>三、RAID总结</h2><table>
<thead>
<tr>
<th>类型</th>
<th>读写性能</th>
<th>可靠性</th>
<th>磁盘利用率</th>
<th>成本</th>
</tr>
</thead>
<tbody><tr>
<td>RAID0</td>
<td>最好</td>
<td>最低</td>
<td>100%</td>
<td>较低</td>
</tr>
<tr>
<td>RAID1</td>
<td>读快；写一般</td>
<td>高</td>
<td>50%</td>
<td>高</td>
</tr>
<tr>
<td>RAID5</td>
<td>读:近似RAID0 写:多了校验</td>
<td>RAID0&lt;RAID5&lt;RAID1</td>
<td>(n-1)&#x2F;n</td>
<td>RAID0&lt;RAID5&lt;RAID1</td>
</tr>
<tr>
<td>RAID6</td>
<td>读：近似RAID0 写:多了双重校验</td>
<td>RAID6&gt;RAID5</td>
<td>RAID6&lt;RAID5</td>
<td>RAID6&gt;RAID1</td>
</tr>
<tr>
<td>RAID10</td>
<td>读：RAID10&#x3D;RAID0 写：RAID10&#x3D;RAID1</td>
<td>高</td>
<td>50%</td>
<td>最高</td>
</tr>
</tbody></table>
<h2 id="四、RAID分类"><a href="#四、RAID分类" class="headerlink" title="四、RAID分类"></a>四、RAID分类</h2><h3 id="软RAID"><a href="#软RAID" class="headerlink" title="软RAID"></a>软RAID</h3><p>软RAID运行于操作系统底层，将SCSI或者IDE控制器提交上来的物理磁盘，虚拟成虚拟磁盘，再提交给管理程序来进行管理。软RAID有以下特点：</p>
<ul>
<li>节省成本，系统支持就可以使用相应功能</li>
<li>占用内存空间</li>
<li>占用CPU资源</li>
<li>如果程序或者操作系统故障就无法运行</li>
</ul>
<h3 id="硬RAID"><a href="#硬RAID" class="headerlink" title="硬RAID"></a>硬RAID</h3><p>通过用硬件来实现RAID功能的就是硬RAID，独立的RAID卡，主板集成的RAID芯片都是硬RAID。RAID卡就是用来实现RAID功能的板卡。硬RAID的特点：</p>
<ul>
<li>硬RAID有独立的运算单元，性能好</li>
<li>可能需要单独购买额外的硬件</li>
<li>不同RAID卡支持的功能不同，需要根据自己的需求选择</li>
</ul>
<h1 id="创建一个软raid阵列"><a href="#创建一个软raid阵列" class="headerlink" title="创建一个软raid阵列"></a>创建一个软raid阵列</h1><p> 阅读 (215967) </p>
<p> 分享</p>
<h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>添加一个20G的虚拟硬盘，分成10个2G的分区</p>
<h2 id="一、创建raid0"><a href="#一、创建raid0" class="headerlink" title="一、创建raid0"></a>一、创建raid0</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">系统中如果没有mdadm命令请安装相关工具：</span><br><span class="line">[root@zutuanxue ~]# which mdadm</span><br><span class="line">/usr/sbin/mdadm</span><br><span class="line">[root@zutuanxue ~]# rpm -qf /usr/sbin/mdadm </span><br><span class="line">mdadm-4.1-4.el8.x86_64</span><br><span class="line">[root@zutuanxue ~]# dnf install -y mdadm</span><br><span class="line"></span><br><span class="line">创建raid0：</span><br><span class="line">[root@zutuanxue ~]# mdadm --create /dev/md0 --raid-devices=2 /dev/sdb1 /dev/sdb2 --level=0</span><br><span class="line">mdadm: Defaulting to version 1.2 metadata</span><br><span class="line">mdadm: array /dev/md0 started.</span><br><span class="line">或者</span><br><span class="line">[root@zutuanxue ~]# mdadm -C /dev/md0 -l 0 -n 2 /dev/sdb1 /dev/sdb2</span><br><span class="line">-C:创建软raid</span><br><span class="line">-l：指定raid级别</span><br><span class="line">-n：指定raid中设备个数</span><br><span class="line"></span><br><span class="line">查看RAID信息：</span><br><span class="line">/proc/mdstat文件记录了所有raid信息</span><br><span class="line">[root@zutuanxue ~]# cat /proc/mdstat </span><br><span class="line">Personalities : [raid0] </span><br><span class="line">md0 : active raid0 sdb2[1] sdb1[0]</span><br><span class="line">#md0为raid0，两个成员sdb2（第二个成员），sdb1（第一个成员）</span><br><span class="line">      41905152 blocks super 1.2 512k chunks</span><br><span class="line">#一共有多少个块（每块1K）	数据段的大小是512K</span><br><span class="line">#chunk决定了阵列中每个成员盘写入的数据量，大于这个值才会到下一个盘读写</span><br><span class="line">unused devices: &lt;none&gt;</span><br><span class="line"></span><br><span class="line">查看指定的RAID信息：</span><br><span class="line">[root@zutuanxue ~]# mdadm -D/--detail /dev/md0</span><br><span class="line">[root@zutuanxue ~]# mdadm  --detail /dev/md0</span><br><span class="line">/dev/md0:	#名称</span><br><span class="line">         Version : 1.2	#工具版本</span><br><span class="line">   Creation Time : Wed Dec 11 03:05:31 2019	#建立时间</span><br><span class="line">   Raid Level : raid0	#类型</span><br><span class="line">   Array Size : 41905152 (39.96 GiB 42.91 GB)#容量</span><br><span class="line">   Raid Devices : 2	#组成RAID的硬盘数量</span><br><span class="line">   Total Devices : 2#成员总数，包含备用磁盘</span><br><span class="line">   Persistence : Superblock is persistent</span><br><span class="line"></span><br><span class="line">   Update Time : Wed Dec 11 03:05:31 2019</span><br><span class="line">   State : clean 	#raid的状态</span><br><span class="line">   Active Devices : 2	#活跃的设备数量</span><br><span class="line">   Working Devices : 2	#工作的设备数量</span><br><span class="line">   Failed Devices : 0	#故障的数量</span><br><span class="line">   Spare Devices : 0	#备用设备数量</span><br><span class="line"></span><br><span class="line">   Chunk Size : 512K	</span><br><span class="line"></span><br><span class="line">	 Consistency Policy : none</span><br><span class="line"></span><br><span class="line">   Name : localhost.localdomain:0  (local to host localhost.localdomain)</span><br><span class="line">   UUID : 06b2d3b2:3ace3ddf:b5b65dd7:eb40b040</span><br><span class="line">   Events : 0</span><br><span class="line"></span><br><span class="line">Number Major Minor RaidDevice State</span><br><span class="line"> 0     8     17    0      	active sync   /dev/sdb1</span><br><span class="line"> 1     8     33    1      	active sync   /dev/sdb2</span><br><span class="line"></span><br><span class="line">格式化挂载使用：</span><br><span class="line">[root@zutuanxue ~]# mkfs.ext4 /dev/md0</span><br><span class="line">[root@zutuanxue ~]# mkdir /md0</span><br><span class="line">[root@zutuanxue ~]# mount /dev/md0 /md0/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看空间使用情况：</span><br><span class="line">[root@zutuanxue ~]# df -h</span><br><span class="line">文件系统             容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/md0           3.9G  16M  3.7G    1% /md0</span><br><span class="line">#可用空间100%</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">测试：</span><br><span class="line">[root@zutuanxue ~]# iostat -m -d /dev/sdb1 /dev/sdb2 2</span><br><span class="line">[root@zutuanxue ~]# dd if=/dev/zero of=/md0/file bs=1M count=1024</span><br></pre></td></tr></table></figure>

<h2 id="二、创建RAID1"><a href="#二、创建RAID1" class="headerlink" title="二、创建RAID1"></a>二、创建RAID1</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">创建raid1：</span><br><span class="line">[root@zutuanxue ~]# mdadm -C /dev/md1 -l 1 -n 2 /dev/sdb3 /dev/sdb4 </span><br><span class="line">查看状态信息：</span><br><span class="line">root@zutuanxue ~]# watch -n1 &quot;cat /proc/mdstat&quot; 	watch命令监控该文件变化情况,1秒钟显示一次</span><br><span class="line">或者直接查看</span><br><span class="line">[root@zutuanxue ~]# cat /proc/mdstat </span><br><span class="line">Personalities : [raid0] [raid1] </span><br><span class="line">md1 : active raid1 sdb4[1] sdb3[0]</span><br><span class="line">      20953024 blocks super 1.2 [2/2] [UU]</span><br><span class="line">      #两个UU说明状态ok，一个盘故障则显示_U</span><br><span class="line">      [==============&gt;......]  resync = 73.5% (15404032/20953024) finish=0.4min speed=205582K/sec</span><br><span class="line">unused devices: &lt;none&gt;</span><br><span class="line">      #以上信息说明两块盘在进行同步，100%说明同步完成</span><br><span class="line"></span><br><span class="line">查看raid1详细信息</span><br><span class="line">[root@zutuanxue ~]# mdadm -D /dev/md1   </span><br><span class="line"></span><br><span class="line">格式化挂载使用：</span><br><span class="line">[root@zutuanxue ~]# mkfs.ext4 /dev/md1</span><br><span class="line">[root@zutuanxue ~]# mount /dev/md1 /md1</span><br><span class="line"></span><br><span class="line">查看空间使用情况：</span><br><span class="line">[root@zutuanxue ~]# df -h</span><br><span class="line">文件系统             容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/md1            2.0G  6.0M  1.9G    1% /md1</span><br><span class="line">#可用空间50%</span><br><span class="line"></span><br><span class="line">测试验证热插拔：</span><br><span class="line">1. 模拟一块盘故障（将磁盘标记为失效）</span><br><span class="line">[root@zutuanxue ~]# mdadm /dev/md1 -f /dev/sdb3</span><br><span class="line">mdadm: set /dev/sdb1 faulty in /dev/md1</span><br><span class="line"></span><br><span class="line">#-f or --fail  表示失效</span><br><span class="line"></span><br><span class="line">2. 查看raid1状态</span><br><span class="line">[root@zutuanxue ~]# cat /proc/mdstat </span><br><span class="line">Personalities : [raid0] [raid1] </span><br><span class="line">md1 : active raid1 sdb4[1] sdb3[0](F)	F表示失效失败</span><br><span class="line">      20953024 blocks super 1.2 [2/1] [_U]</span><br><span class="line">      #_表示有一块盘失效</span><br><span class="line">unused devices: &lt;none&gt;</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# mdadm -D /dev/md1</span><br><span class="line">。。。</span><br><span class="line">Number Major Minor RaidDevice State</span><br><span class="line">-      0     0     0      		removed</span><br><span class="line">1      8     33    1          active sync  /dev/sdb4</span><br><span class="line">0      8     17    -          faulty       /dev/sdb3</span><br><span class="line"> #失效盘等待移除</span><br><span class="line">       </span><br><span class="line">3. 移除故障或者失效硬盘（热拔）</span><br><span class="line">[root@zutuanxue ~]# mdadm /dev/md1 -r /dev/sdb3</span><br><span class="line">mdadm: hot removed /dev/sdb3 from /dev/md1</span><br><span class="line"></span><br><span class="line">#-r or --remove 表示移除</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# mdadm -D /dev/md1</span><br><span class="line">。。。</span><br><span class="line">  Number   Major   Minor   RaidDevice State</span><br><span class="line">       -       0        0        0      removed</span><br><span class="line">       1       8       33        1      active sync   /dev/sdb4</span><br><span class="line"></span><br><span class="line">4. 加入新的磁盘到raid1中（热插）</span><br><span class="line">[root@zutuanxue ~]# mdadm  /dev/md1 -a /dev/sdb5</span><br><span class="line">mdadm: added /dev/sdd5</span><br><span class="line"></span><br><span class="line">#-a or --add 表示增加</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# cat /proc/mdstat </span><br></pre></td></tr></table></figure>

<h2 id="三、创建RAID5"><a href="#三、创建RAID5" class="headerlink" title="三、创建RAID5"></a>三、创建RAID5</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">创建raid5:</span><br><span class="line">[root@zutuanxue ~]# mdadm -C /dev/md5 -l 5 -n 3 -x 1 /dev/sdb&#123;6,7,8,9&#125;</span><br><span class="line"></span><br><span class="line">#-x, --spare-devices=  表示指定热备盘</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# cat /proc/mdstat </span><br><span class="line">Personalities : [raid0] [raid1] [raid6] [raid5] [raid4] </span><br><span class="line">md5 : active raid5 sdb8[4] sdb9[3](S) sdb7[1] sdb6[0]	#S备用盘</span><br><span class="line">      4188160 blocks super 1.2 level 5, 512k chunk, algorithm 2 [3/3] [UUU]</span><br><span class="line">      </span><br><span class="line">unused devices: &lt;none&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">说明：热备盘表示当其中一块盘故障后，热备盘会立马顶上去，而不需要人为手动干预。</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# mdadm -D /dev/md5 		查看详细信息</span><br><span class="line">。。。</span><br><span class="line">    Number   Major   Minor   RaidDevice State</span><br><span class="line">       0       8       22        0      active sync   /dev/sdb6</span><br><span class="line">       1       8       23        1      active sync   /dev/sdb7</span><br><span class="line">       4       8       24        2      active sync   /dev/sdb8</span><br><span class="line"></span><br><span class="line">       3       8       25        -      spare   /dev/sdb9</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">格式化挂载使用：</span><br><span class="line">[root@zutuanxue ~]# mkfs.ext4 /dev/md5</span><br><span class="line">[root@zutuanxue ~]# mkdir /md5</span><br><span class="line">[root@zutuanxue ~]# mount /dev/md5 /md5/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看空间使用情况：</span><br><span class="line">[root@zutuanxue ~]# df -h</span><br><span class="line">文件系统             容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/md5             3.9G   16M  3.7G    1% /md5</span><br><span class="line">#可用空间 （磁盘数量-1）x 单一磁盘容量</span><br><span class="line"></span><br><span class="line">测试热备磁盘作用：</span><br><span class="line">1. 标记一块活动盘失效</span><br><span class="line">[root@zutuanxue /]# mdadm /dev/md5 -f /dev/sdb6</span><br><span class="line">mdadm: set /dev/sdb6 faulty in /dev/md5</span><br><span class="line"></span><br><span class="line">立即查看状态：</span><br><span class="line">[root@zutuanxue /]# cat /proc/mdstat </span><br><span class="line">Personalities : [raid0] [raid1] [raid6] [raid5] [raid4] </span><br><span class="line">md5 : active raid5 sdb8[4] sdb9[3] sdb7[1] sdb6[0](F)</span><br><span class="line">说明：</span><br><span class="line">sdb6(F)失效后，原来的sdb9(S)热备盘立马顶上去同步数据</span><br><span class="line">      4188160 blocks super 1.2 level 5, 512k chunk, algorithm 2 [3/2] [_UU]</span><br><span class="line">      [==&gt;..................]  recovery = 13.0% ..          </span><br><span class="line">unused devices: &lt;none&gt;</span><br><span class="line"></span><br><span class="line">[root@zutuanxue /]# mdadm -D /dev/md5</span><br><span class="line">...</span><br><span class="line">      Number   Major   Minor   RaidDevice State</span><br><span class="line">       3       8       25        0      active sync   /dev/sdb9</span><br><span class="line">       1       8       23        1      active sync   /dev/sdb7</span><br><span class="line">       4       8       24        2      active sync   /dev/sdb8</span><br><span class="line"></span><br><span class="line">       0       8       22        -      faulty   /dev/sdb6</span><br><span class="line"></span><br><span class="line">       </span><br><span class="line">2. 移除失效的盘</span><br><span class="line">[root@zutuanxue /]# mdadm  /dev/md5 -r /dev/sdb6 </span><br><span class="line">mdadm: hot removed /dev/sdb6 from /dev/md5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3. 为了日后考虑，再次添加一个热备盘到raid5中</span><br><span class="line">[root@zutuanxue /]# mdadm /dev/md5 -a /dev/sdb6</span><br><span class="line">mdadm: added /dev/sdb6</span><br></pre></td></tr></table></figure>

<h2 id="四、-保存RAID信息"><a href="#四、-保存RAID信息" class="headerlink" title="四、 保存RAID信息"></a>四、 保存RAID信息</h2><p>问：为什么要保存raid信息？<br>答：如果不做信息的保存，在CentOS6中，重启系统后raid不能自动被识别到，7,8系统中不会出现这种状况。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 创建配置文件</span><br><span class="line">[root@zutuanxue ~]# mdadm -D --scan &gt;&gt; /etc/mdadm.conf </span><br><span class="line">[root@zutuanxue ~]# cat /etc/mdadm.conf </span><br><span class="line">ARRAY /dev/md/1 metadata=1.2 name=localhost.localdomain:1 UUID=170d690d:4f7ccd02:646c3ce0:8f6012be</span><br><span class="line">ARRAY /dev/md/0 metadata=1.2 name=localhost.localdomain:0 UUID=a845702e:9251cae9:25d1bc8b:9a337df2</span><br><span class="line">ARRAY /dev/md/5 metadata=1.2 spares=1 name=localhost.localdomain:5 UUID=d49e6cca:5312271b:7e8e83d5:adac4ed5</span><br></pre></td></tr></table></figure>

<h4 id="raid停止与启动"><a href="#raid停止与启动" class="headerlink" title="raid停止与启动"></a>raid停止与启动</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">以RAID5为例说明：</span><br><span class="line">停止raid:</span><br><span class="line">1. 卸载raid</span><br><span class="line">[root@zutuanxue ~]# umount /md5 </span><br><span class="line">2. 使用命令停止raid</span><br><span class="line">[root@zutuanxue ~]# mdadm --stop /dev/md5</span><br><span class="line">mdadm: stopped /dev/md5</span><br><span class="line"></span><br><span class="line">启动raid：</span><br><span class="line">1. 配置文件(/etc/mdadm.conf)存在如下启动</span><br><span class="line">[root@zutuanxue ~]# mdadm -A /dev/md5</span><br><span class="line">mdadm: /dev/md5 has been started with 3 drives and 1 spare.</span><br><span class="line"></span><br><span class="line">#-A：Assemble a pre-existing array  表示装载一个已存在的raid</span><br><span class="line"></span><br><span class="line">2. 配置文件(/etc/mdadm.conf)不存在如下启动</span><br><span class="line">[root@zutuanxue ~]# mdadm -A /dev/md5 /dev/sdb[6789]</span><br><span class="line">mdadm: /dev/md5 has been started with 3 drives and 1 spare.</span><br><span class="line"></span><br><span class="line">3. 如果设备名不知道，可以去查看每个设备的raid信息，使用uuid把raid设备重新组合</span><br><span class="line">[root@zutuanxue ~]# mdadm -E /dev/sdb6 | grep UUID</span><br><span class="line">     Array UUID : d49e6cca:5312271b:7e8e83d5:adac4ed5</span><br><span class="line">    Device UUID : b933b8d5:04a6e003:90e9b230:d13cacf5</span><br><span class="line"></span><br><span class="line"> 说明：同一个raid里每个磁盘查看的UUID都是这个值</span><br><span class="line">。。。</span><br><span class="line">[root@zutuanxue ~]# mdadm -E /dev/sdb7 | grep UUID</span><br><span class="line">     Array UUID : d49e6cca:5312271b:7e8e83d5:adac4ed5</span><br><span class="line">    Device UUID : b8ca85bd:7809faa4:48882a21:98ef9349</span><br><span class="line"></span><br><span class="line">通过以上方法找到后进行重新组合，如下：</span><br><span class="line">[root@zutuanxue ~]# mdadm -A --uuid=d49e6cca:5312271b:7e8e83d5:adac4ed5 /dev/md5</span><br><span class="line">mdadm: /dev/md5 has been started with 3 drives and 1 spare.</span><br></pre></td></tr></table></figure>

<h4 id="raid的删除"><a href="#raid的删除" class="headerlink" title="raid的删除"></a>raid的删除</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 卸载设备</span><br><span class="line">[root@zutuanxue ~]# umount /md5/</span><br><span class="line">2. 移除所有磁盘</span><br><span class="line">[root@zutuanxue ~]# mdadm /dev/md5 -f /dev/sdb[6789]</span><br><span class="line">mdadm: set /dev/sdb6 faulty in /dev/md5</span><br><span class="line">mdadm: set /dev/sdb7 faulty in /dev/md5</span><br><span class="line">mdadm: set /dev/sdb8 faulty in /dev/md5</span><br><span class="line">mdadm: set /dev/sdb9 faulty in /dev/md5</span><br><span class="line">[root@zutuanxue ~]# mdadm /dev/md5 -r /dev/sdb[6789]</span><br><span class="line">mdadm: hot removed /dev/sdb6 from /dev/md5</span><br><span class="line">mdadm: hot removed /dev/sdb7 from /dev/md5</span><br><span class="line">mdadm: hot removed /dev/sdb8 from /dev/md5</span><br><span class="line">mdadm: hot removed /dev/sdb9 from /dev/md5</span><br><span class="line"></span><br><span class="line">3. 停止raid</span><br><span class="line">[root@zutuanxue ~]# mdadm --stop /dev/md5</span><br><span class="line">mdadm: stopped /dev/md5</span><br><span class="line"></span><br><span class="line">4. 擦出超级块（superblock）清除相关信息</span><br><span class="line">[root@zutuanxue ~]# mdadm --zero-superblock /dev/sdb[6789]</span><br></pre></td></tr></table></figure>

<h1 id="CentOS-8启动流程"><a href="#CentOS-8启动流程" class="headerlink" title="CentOS 8启动流程"></a>CentOS 8启动流程</h1><p> 阅读 (191549) </p>
<p> 分享</p>
<h2 id="一、BIOS与UEFI"><a href="#一、BIOS与UEFI" class="headerlink" title="一、BIOS与UEFI"></a>一、BIOS与UEFI</h2><p><strong>BIOS</strong></p>
<p>Basic Input Output System的缩写，翻译过来就是“基本输入输出系统”，是一种业界标准的固件接口，第一次出现在1975年，是计算机启动时加载的第一个程序，主要功能是检测和设置计算机硬件，引导系统启动。</p>
<p><strong>UEFI</strong><br>Unified Extensible Firmware interface的缩写，翻译过来为统一可扩展固件接口，是BIOS的替代方案，前身是Intel在1998年开始开发的Inter Bot Initiative，后来被命名为可扩展固件接口（Extensible Firmware Interface EFI），2005年交由统一可扩展固件接口论坛，并更名为UEFI</p>
<p><strong>UEFI的优势</strong></p>
<p>1、支持硬盘容量更大：相比于传统BIOS+MBR只能支持2048G的硬盘分区和4个主分区相比，UEFI+GPT不会受到硬盘容量大小、分区数量的限制，不过在Windows系统上由于系统的限制，支持最多128个GPT磁盘分区，最大分区18EB，并且GPT格式是没有主分区和逻辑分区这个概念的</p>
<p>2、容错特性：UEFI是模块化构建，比BIOS容错和纠错特性强。</p>
<p>3、鼠标操作：UEFI内置图形驱动，可以提供原生分辨率的图形环境，用户进入后可以使用鼠标调整。</p>
<p>4、扩展性强：UEFI包含一个可编程的开放接口，厂商利用这个接口可以对功能进行扩展，如：备份和诊断</p>
<p>5、支持联网：在不进入操作系统的前提下就可以通过网络进行远程故障诊断</p>
<h2 id="二、CentOS8启动流程"><a href="#二、CentOS8启动流程" class="headerlink" title="二、CentOS8启动流程"></a>二、CentOS8启动流程</h2><p>现代计算机是软件与硬件的复杂组合，从接通电源开始，到可以登录到系统中，需要大量的软件和硬件的配合，我们一起来了解一下CentOS8的x86_64系统在启动过程中所涉及的任务，虚拟机的流程也是大致相同的，但是某些与硬件相关的步骤是由虚拟机的相关程序在软件中处理的。</p>
<p><strong>1、接通电源</strong></p>
<p> 系统固件（UEFI或BIOS初始化）运行开机自检，并初始化部分硬件</p>
<p><strong>2、系统固件搜索可启动设备</strong></p>
<p> 启动设备可能是UEFI启动固件中配置的，也可能是按照BIOS中配置的顺序搜索所有磁盘上的主启动记录（MBR）</p>
<p><strong>3、读取启动加载器</strong>（boot loader）</p>
<p> 系统固件会从MBR中读取启动加载器，然后将控制权交给启动加载器，在CentOS8中启动加载器为GRUB2</p>
<p><strong>4、grub.cfg</strong></p>
<p> GRUB2将从&#x2F;boot&#x2F;grub2&#x2F;grub.cfg文件中加载配置并显示一个菜单，在这个菜单中可以选择要启动的内核，我们可以使用grub2-mkconfig命令配合&#x2F;etc&#x2F;grub.d&#x2F;目录和&#x2F;etc&#x2F;default&#x2F;grub文件生成grub.cfg文件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cd /boot/grub2/</span><br><span class="line">[root@zutuanxue grub2]# ls</span><br><span class="line">device.map  fonts  grub.cfg  grubenv  i386-pc</span><br><span class="line">[root@zutuanxue grub2]# pwd</span><br><span class="line">/boot/grub2</span><br></pre></td></tr></table></figure>

<p><strong>5、initramfs</strong></p>
<p> 在选择内核或到达超时时间后，启动加载器会从磁盘加载内核(vmlinuz)和initramfs，并将它们放入内存中，initramfs中包含启动时所有必要硬件的内核模块（驱动）和初始化脚本等，使用lsinitrd和dracut命令配合&#x2F;etc&#x2F;dracut.conf.d&#x2F;目录可以查看和配置initramfs文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue grub2]# lsinitrd  | more</span><br><span class="line">Image: /boot/initramfs-4.18.0-80.el8.x86_64.img: 27M</span><br><span class="line">##可以在回显中看到系统的主要目录，包括/etc /usr /dev /lib /lib64等</span><br></pre></td></tr></table></figure>

<p><strong>6、启动加载器放权</strong></p>
<p> 启动加载器将控制权交给内核</p>
<p><strong>7、内核初始化</strong></p>
<p> 内核会在initramfs中寻找硬件的相关驱动并初始化相关硬件，然后启动&#x2F;usr&#x2F;sbin&#x2F;init（PID&#x3D;1），在CentOS8中&#x2F;sbin&#x2F;init是systemd的链接</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue grub2]# ll /sbin/init </span><br><span class="line">lrwxrwxrwx. 1 root root 22 5月  23 2019 /sbin/init -&gt; ../lib/systemd/systemd</span><br><span class="line">[root@zutuanxue grub2]# find / -name systemd</span><br><span class="line">/usr/lib/systemd/systemd</span><br></pre></td></tr></table></figure>

<p><strong>8、启动initrd.target并挂载</strong></p>
<p> systemd会执行initrd.target包含的所有单元，并将根文件系统挂载到&#x2F;sysroot&#x2F;目录,在initrd.target启动时的依赖单元，会按照&#x2F;etc&#x2F;fstab设置对硬盘进行挂载</p>
<p><strong>9、切换根文件系统</strong></p>
<p> 内核将根文件系统从initramfs切换为&#x2F;sysroot（硬盘上的根文件系统），systemd会找到磁盘上安装的systemd并自动重新执行</p>
<p><strong>10、启动相应目标</strong></p>
<p> 硬盘上安装的systemd会查找从内核命令行传递的目标或是系统中配置的默认目标并启动对应单元后就可以进入到对应的登录界面。默认目标是&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;default.target，</p>
<p><strong>注意：</strong><br>字符界面：</p>
<p> 如果默认目标为multi-user.target（字符界面），systemd会先执行sysinit.target初始化系统之后执行basic.target与getty.target准备基本系统环境和终端，再启动multi-user.target下的相关应用，同时执行&#x2F;etc&#x2F;rc.d&#x2F;rc.local(需要执行权限)与与登录服务（systemd-logind.service），开启登录界面</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl list-dependencies multi-user.target | grep target</span><br><span class="line">multi-user.target</span><br><span class="line">● ├─basic.target</span><br><span class="line">● │ ├─paths.target</span><br><span class="line">● │ ├─slices.target</span><br><span class="line">● │ ├─sockets.target</span><br><span class="line">● │ ├─sysinit.target</span><br><span class="line">● │ │ ├─cryptsetup.target</span><br><span class="line">● │ │ ├─local-fs.target</span><br><span class="line">● │ │ └─swap.target</span><br><span class="line">● │ └─timers.target</span><br><span class="line">● ├─getty.target</span><br><span class="line">● ├─nfs-client.target</span><br><span class="line">● │ └─remote-fs-pre.target</span><br><span class="line">● └─remote-fs.target</span><br><span class="line">●   └─nfs-client.target</span><br><span class="line">●     └─remote-fs-pre.target</span><br></pre></td></tr></table></figure>

<p>图形界面：</p>
<p> 在multi-user.target的基础上执行graphical.target启动所需要的服务，开启图形界面</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl list-dependencies graphical.target | grep target</span><br><span class="line">graphical.target</span><br><span class="line">● └─multi-user.target</span><br><span class="line">●   ├─basic.target</span><br><span class="line">●   │ ├─paths.target</span><br><span class="line">●   │ ├─slices.target</span><br><span class="line">●   │ ├─sockets.target</span><br><span class="line">●   │ ├─sysinit.target</span><br><span class="line">●   │ │ ├─cryptsetup.target</span><br><span class="line">●   │ │ ├─local-fs.target</span><br><span class="line">●   │ │ └─swap.target</span><br><span class="line">●   │ └─timers.target</span><br><span class="line">●   ├─getty.target</span><br><span class="line">●   ├─nfs-client.target</span><br><span class="line">●   │ └─remote-fs-pre.target</span><br><span class="line">●   └─remote-fs.target</span><br><span class="line">●     └─nfs-client.target</span><br><span class="line">●       └─remote-fs-pre.target</span><br></pre></td></tr></table></figure>

<h2 id="三、运行级别切换与相关配置文件"><a href="#三、运行级别切换与相关配置文件" class="headerlink" title="三、运行级别切换与相关配置文件"></a>三、运行级别切换与相关配置文件</h2><p><strong>运行级别切换</strong></p>
<p> 通过前面的课程我们了解到CentOS8在启动过程中需要判断对应的运行级别，在不同的运行级别中会启动不同的单元，那么运行级别如何切换呢？</p>
<p> 在CentOS8中运行级别的设置涉及到下面几个命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl isolate	.../init [0-6]	切换运行级别</span><br><span class="line">systemctl	get-default				查看当前的默认运行级别</span><br><span class="line">systemctl set-default ...		设置默认的运行级别</span><br><span class="line">runlevel										查看之前的运行级别和当前的运行级别</span><br></pre></td></tr></table></figure>


<p>运行级别对照</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@localhost system]# cd /usr/lib/systemd/system</span><br><span class="line">[root@localhost system]# ll runlevel*.target</span><br><span class="line">runlevel0.target -&gt; poweroff.target</span><br><span class="line">runlevel1.target -&gt; rescue.target</span><br><span class="line">runlevel2.target -&gt; multi-user.target</span><br><span class="line">runlevel3.target -&gt; multi-user.target</span><br><span class="line">runlevel4.target -&gt; multi-user.target</span><br><span class="line">runlevel5.target -&gt; graphical.target</span><br><span class="line">runlevel6.target -&gt; reboot.target</span><br></pre></td></tr></table></figure>

<p>所以当我们使用init [0-6]切换运行级别的时候系统执行的是systemctl isolate runlevel[0-6].target</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# runlevel #查看运行级别</span><br><span class="line">N 5</span><br><span class="line">[root@zutuanxue ~]# init 3	#切换到字符界面</span><br><span class="line">[root@zutuanxue ~]# runlevel 	#查看运行级别</span><br><span class="line">5 3</span><br><span class="line">[root@zutuanxue ~]# systemctl isolate graphical.target 	#切换到图形界面</span><br><span class="line">[root@zutuanxue ~]# runlevel </span><br><span class="line">3 5</span><br><span class="line"></span><br><span class="line">#########</span><br><span class="line">emergency.target</span><br><span class="line">[root@zutuanxue ~]# systemctl isolate emergency.target </span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996176505.png" alt="image20191224152253190.png"></p>
<p>注意：此为紧急模式，用于紧急处理系统的错误，无法使用rescue.target时，可以尝试使用此模式。</p>
<h2 id="四、Boot-Loader与GRUB2"><a href="#四、Boot-Loader与GRUB2" class="headerlink" title="四、Boot Loader与GRUB2"></a>四、Boot Loader与GRUB2</h2><p>前面的课程我们了解的CentOS8的启动流程，在这个流程中有一个叫启动加载器，也就是boot loader的工具，如果没有这个boot loader就无法加载内核。在CentOS8中使用的是启动加载器是Grub2，在了解Grub2之前，我们先聊一下boot loader</p>
<h3 id="4-1、Boot-Loader的两个阶段"><a href="#4-1、Boot-Loader的两个阶段" class="headerlink" title="4.1、Boot Loader的两个阶段"></a>4.1、Boot Loader的两个阶段</h3><p>我们知道在BIOS或者UEFI加载完成之后，会到MBR中读取boot loader，这个boot loader可以让用户选择加载的内核并且移交系统的控制权限等，而加载内核只能通过boot loader，但是boot loader在MBR中，这个MBR是硬盘的第一个扇区，一个扇区的大小是512字节，boot loader的大小只有446字节，即便是GPT磁盘也没有足够的空间存储boot loader所包含的内容，所以为了避免空间的限制，导致无法引导系统正常启动的问题，Linux将boot loader的工作过程分为了两步。</p>
<p>stage1 执行boot loader的主程序<br>主程序必须安装在MBR或者是启动扇区，由于空间限制，MBR或启动扇区仅存放最小化的boot loader，并不会存放相关的配置文件</p>
<p>stage2 通过主程序加载配置文件<br>通过boot loader的主程序加载所有相关的配置文件，这些配置文件中包括定义文件系统类型的和CentOS8中的grub.cfg文件，而这些文件通常都存放在&#x2F;boot当中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# ll -F /boot/grub2/</span><br><span class="line">总用量 32</span><br><span class="line">-rw-r--r--. 1 root root    64 12月 13 21:50 device.map</span><br><span class="line">drwxr-xr-x. 2 root root  4096 12月 13 21:50 fonts/</span><br><span class="line">-rw-r--r--. 1 root root  5032 12月 13 21:50 grub.cfg</span><br><span class="line">-rw-r--r--. 1 root root  1024 12月 13 21:50 grubenv</span><br><span class="line">drwxr-xr-x. 2 root root 12288 12月 13 21:50 i386-pc/</span><br><span class="line"></span><br><span class="line">device.map		设备对应文件，用来帮助系统判断磁盘与设备文件的对应关系</span><br><span class="line">fonts					开机过程中用到的字体文件</span><br><span class="line">grub.cfg			grub2的主配置文件</span><br><span class="line">grubenv				grub环境区块文件大小为1K，用来记录GRUB环境变量</span><br><span class="line">i386-PC				针对x86架构的电脑所需要的相关模块，包括电源管理支持，文件系统支持等模块</span><br></pre></td></tr></table></figure>

<p>在这些文件中最重要的就是grub.cfg文件，以及文件系统支持的相关模块</p>
<h3 id="4-2、GRUB2"><a href="#4-2、GRUB2" class="headerlink" title="4.2、GRUB2"></a>4.2、GRUB2</h3><p><strong>GRUB与LILO</strong><br>目前为止，linux下的启动加载器有两种，一种是LILO另外一种就是GRUB，由于GRUB的功能更强大，支持的文件系统较多，所以越来越多的操作系统使用GRUB做为boot loader，CentOS从7开始使用了功能更为强大的GRUB2</p>
<p><strong>GRUB2的优点</strong></p>
<ul>
<li>支持更多的文件系统</li>
<li>开机时可以手动调整启动参数</li>
<li>动态更新配置文件，修改完配置文件后不需要重新安装</li>
</ul>
<p><strong>GRUB2与硬盘</strong></p>
<p>由于grub2的主要任务是从硬盘当中加载内核，所以grub2必须要识别硬盘，但是grub2识别硬盘的方式与linux系统识别的方式还是有些区别的。在Linux系统中，硬盘一般会被识别为类似sda1这种形式，而在grub2中硬盘会统一被识别为hd的设备，排序方式全部是用数字进行排序，而不是用字母加数字的混合形式。这么做的目的是为了定义grub2的查找内核时的顺序。如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hd0,1		搜索第一块硬盘的第一个分区</span><br><span class="line">hd0,msdos1	搜索第一块MBR硬盘的第一个分区</span><br><span class="line">hd0,gpt1	搜索第一块GPT磁盘的第一个分区</span><br><span class="line">简单来说，两个数字，第一个数字表示硬盘序号，第二个数字表示分区序号</span><br></pre></td></tr></table></figure>

<p><strong>grub2配置文件</strong></p>
<p>了解了grub2中的硬盘识别方式，我们就可以了解一下grub2的配置文件了，这个文件建议各位不要随意更改</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#</span><br><span class="line"># DO NOT EDIT THIS FILE</span><br><span class="line">#</span><br><span class="line"># It is automatically generated by grub2-mkconfig using templates</span><br><span class="line"># from /etc/grub.d and settings from /etc/default/grub</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">此部分内容提示我们不要编辑这个文件，此文件是有grub2-mkconfig命令自动建立的，相关模板与设置存放在/etc/grub.d/目录以及/etc/default/grub中，也就是说grub.cfg文件的内容会调用/etc/grub.d目录下的内容，如果需要修改的话需要调整/etc/default/grub文件</span><br></pre></td></tr></table></figure>

<p>基本上grub2不希望用户去修改grub.cfg这个文件，如果需要调整的话需要通过修改其它文件并配合grub2-mkconfig命令来生成新的grub.cfg文件，但是各位还是要了解一下这个文件的大致格式</p>
<h3 id="x2F-etc-x2F-default-x2F-grub与-x2F-etc-x2F-grub-d-x2F"><a href="#x2F-etc-x2F-default-x2F-grub与-x2F-etc-x2F-grub-d-x2F" class="headerlink" title="&#x2F;etc&#x2F;default&#x2F;grub与&#x2F;etc&#x2F;grub.d&#x2F;"></a>&#x2F;etc&#x2F;default&#x2F;grub与&#x2F;etc&#x2F;grub.d&#x2F;</h3><p>在前面的课程中我们知道了grub2的配置文件是grub.cfg，但是此文件内容比较复杂，且官方不建议我们手动修改，如果需要修改的话需要通过&#x2F;etc&#x2F;default&#x2F;grub文件以及&#x2F;etc&#x2F;grub.d&#x2F;目录内的内容来实现，那我们一起来看一下</p>
<p><strong>&#x2F;etc&#x2F;default&#x2F;grub</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# vim /etc/default/grub</span><br><span class="line">GRUB_TIMEOUT=5	定义在启动菜单默认的等待时间，单位是秒</span><br><span class="line">GRUB_DISTRIBUTOR=&quot;$(sed &#x27;s, release .*$,,g&#x27; /etc/system-release)&quot;		定义获取操作系统名称的方式</span><br><span class="line">GRUB_DEFAULT=saved	定义开机时默认启动的项目，可以是数字，也可以是标题名称，(这个标题就是开机时看到的那个标题），还可以是saved（表示默认启动上次启动成功的操作系统）	</span><br><span class="line">GRUB_DISABLE_SUBMENU=true	是否隐藏子菜单</span><br><span class="line">GRUB_TERMINAL_OUTPUT=&quot;console&quot;	定义启动时的界面使用哪种终端输出，值包含console，serial，gfxterm，vga_text等</span><br><span class="line">GRUB_CMDLINE_LINUX=&quot;resume=/dev/mapper/cl-swap rd.lvm.lv=cl/root rd.lvm.lv=cl/swap rhgb quiet&quot;	定义额外的启动参数</span><br><span class="line">GRUB_DISABLE_RECOVERY=&quot;true&quot;	是否启用修复模式</span><br><span class="line">GRUB_ENABLE_BLSCFG=true	是否启用bootloader规范</span><br><span class="line"></span><br><span class="line">修改完成之后需要使用</span><br><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg,重新生成配置文件</span><br></pre></td></tr></table></figure>

<p><strong>&#x2F;etc&#x2F;grub.d&#x2F;</strong></p>
<p>00_header 设置默认参数</p>
<p>00_tuned 额外调整的值</p>
<p>01_menu_auto_hide 与菜单隐藏相关的设置</p>
<p>01_users 与用户相关的设置</p>
<p>10_linux 与内核相关的设置</p>
<p>20_ppc_terminfo 与终端相关的设置</p>
<p>20_linux_xen 与虚拟化相关的设置</p>
<p>30_os-prober 与操作系统检测相关</p>
<p>30_uefi-firmware 与UEFI启动设置相关，需要硬件支持</p>
<p>40_custom&amp;41_custom 自定义设置</p>
<p>注：这些文件会按照数字的顺序由小到大加载</p>
<h1 id="linux启动常见问题"><a href="#linux启动常见问题" class="headerlink" title="linux启动常见问题"></a>linux启动常见问题</h1><p> 阅读 (166312) </p>
<p> 分享</p>
<h2 id="一、忘记root密码"><a href="#一、忘记root密码" class="headerlink" title="一、忘记root密码"></a>一、忘记root密码</h2><p>日常生活中，我们会接触到很多账号和密码，而这些账号和密码我们不能都很好的记忆，对于linux也是一样的，如果root密码忘记了怎么办？岂不是都无法登陆使用Linux了？现在我就教各位，在不知道root密码的前提下，如何给root设置一个新的密码</p>
<p>step 1 重启你的linux系统，在下图这个界面中按“E”</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996319687.png" alt="image20200112153327155.png"></p>
<p>step 2 将光标移动到开头为linux这行的行位，删除rhgb quiet并添加rd.break</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996339150.png" alt="image20200112153507293.png"></p>
<p>step 3 按键盘上的ctrl+x组合键继续启动linux，等待出现提示符后执行mount命令</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996350235.png" alt="image20200112153640666.png"></p>
<p>step 4 执行chroot命令将根目录切换为&#x2F;sysroot(因为硬盘上的数据都存放在&#x2F;sysroot目录中)</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996365227.png" alt="image20200112153755987.png"></p>
<p>step 5 看到提示符发生变化后执行passwd命令修改root密码</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996379180.png" alt="image20200112153933632.png"></p>
<p>注：由于字符编码问题可能会出现不能正常显示的情况，如：</p>
<p>![image-20200112154028844](第九章 启动流程.assets&#x2F;image-20200112154028844.png)没有关系，不影响密码的设置</p>
<p>step 6 修改完密码之后，建立autorelabel文件</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996393570.png" alt="image20200112154548103.png"></p>
<p>step 7 输入两次exit退出，系统会继续启动</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996407104.png" alt="image20200112154627704.png"></p>
<p>启动完成之后就可以用我们刚才设置的账号及密码进行登录了</p>
<h2 id="二、GRUB2加密"><a href="#二、GRUB2加密" class="headerlink" title="二、GRUB2加密"></a>二、GRUB2加密</h2><p>前面我们知道了，如果不知道root密码的话，也是可以以root身份登录系统，那这样岂不是很危险？所以GRUB2又提供了一种保护机制，这种保护机制就是为grub2设置密码，如果用户不知道这个密码，是无法编辑启动时所看到的那个菜单的，这样也就组织了root密码被修改的问题，那么如何为grub2加密呢？</p>
<p>setp 1 以root用户的身份登录系统并打开终端，在终端中输入grub2-setpassword命令，系统就会提示我们设置一个密码，这个密码就是grub2的密码</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996426298.png" alt="image20200112155155252.png"></p>
<p>step 2 重启系统，验证是否加密成功<br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996443802.png" alt="image20200112155226916.png"></p>
<p>step 3 在启动菜单界面按”E”编辑内容时，系统会提示输入用户名和密码，这个用户名是root，密码就是我们前面设置的grub2密码</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996455058.png" alt="image20200112155403705.png"></p>
<p>注意：密码在输入的时候是不会显示任何信息的</p>
<p>step 4 如果密码输入错误就会返回启动菜单界面</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996465934.png" alt="image20200112155529537.png"></p>
<h2 id="三、删除-x2F-修改GRUB2密码"><a href="#三、删除-x2F-修改GRUB2密码" class="headerlink" title="三、删除&#x2F;修改GRUB2密码"></a>三、删除&#x2F;修改GRUB2密码</h2><p>前面我们学会了如何为grub2设置密码，这样能有效的避免root用户密码被修改，但是如果我忘记了grub2的密码怎么办呢？</p>
<p>如果忘记了grub2密码，你可以让系统正常启动，然后用root用户登录系统，登录完成后使用grub2-setpassword命令重新设置一个grub2密码，或者删除&#x2F;boot&#x2F;grub2&#x2F;user.cfg文件将密码删除。</p>
<p>但是如果连root密码也不知道呢？这个时候，我们就需要用到修复模式了</p>
<p>step 1 插入系统光盘，选择从光盘启动</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996486589.png" alt="image20200112160255030.png"></p>
<p>step 2 选择故障排除（troubleshooting）</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996498711.png" alt="image20200112160449625.png"></p>
<p>step 3 选择修复系统</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996515055.png" alt="image20200112160639592.png"></p>
<p>step 4 启动完成后，系统提示我们，修复模式会查找硬盘上是否安装有Linux系统，并将其挂载到&#x2F;mnt&#x2F;sysimage目录下，我们希望它如何操作，选择1是以读写的形式挂载，选择2是以只读的形式挂载，选择3是直接获取一个shell，选择4是重启，这里面我们选择1</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996527693.png" alt="image20200112161205845.png"></p>
<p>step 5 稍微等一下之后系统会提示我们已经挂载到&#x2F;mnt&#x2F;sysimage目录下了，按“enter”会得到一个shell</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996543674.png" alt="image20200112161319135.png"></p>
<p>step 6 执行chroot &#x2F;mnt&#x2F;sysimage将工作目录切换到硬盘中</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996554318.png" alt="image20200112161421279.png"></p>
<p>step 7 接下来就像没有忘记root密码一样，可以重新设置grub2密码，或者删除user.cfg文件了，然后输入两次exit重启</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/18/1602996566428.png" alt="image20200112161615836.png"></p>
<p><img src="blog\source_posts\test-pic\1602996588086.png" alt="image20200112161628253.png"></p>
<h1 id="linux-计划任务"><a href="#linux-计划任务" class="headerlink" title="linux 计划任务"></a>linux 计划任务</h1><p> 阅读 (191034) </p>
<p> 分享</p>
<h2 id="一、什么是计划任务"><a href="#一、什么是计划任务" class="headerlink" title="一、什么是计划任务"></a>一、什么是计划任务</h2><p>每个人在生活当中或多或少都有一些工作，有的工作是按照一定周期循环的， 例如每天固定时间的闹铃、工作打卡等等； 有的工作则是临时发生的，例如刚好有亲友到访，需要你在一个特定的时间去车站迎接！ 这个时候 Linux 的计划任务就可以派上场了！ 在不考虑硬件与我们服务器的连接状态下，我们的 Linux 可以帮你提醒很多任务， 那么 Linux 的例行性工作是如何进行的？ Linux 是通过 crontab 与 at 命令来实现的</p>
<p><strong>at ：</strong></p>
<p>at 是个可以处理仅执行一次就结束工作的命令，需要一个叫atd的服务支持，所以这个服务要启动</p>
<p><strong>crontab ：</strong></p>
<p>crontab 这个命令所设定的工作将会按照一定的周期去执行！ 可循环的时间为分钟、小时、日期、每周、每月等。crontab 除了可以使用命令执行外，也可以通过编辑 &#x2F;etc&#x2F;crontab 来支持。与at相同，crontab也需要一个叫crond的服务</p>
<p>那么计划任务在系统当中到底有什么作用呢？</p>
<p><strong>1、进行日志的切割 (log rotate)：</strong><br>Linux 会主动的将系统所发生的各种信息都记录到日志中。随着使用时间的增长，日志文件会越来越大！我们知道大型文件不但占容量还会造成读写效能的困扰， 因此适时的将日志文件数据挪一挪，让旧的数据与新的数据分别存放，这样既能记录日志信息又能提高读写效率。这就是 logrotate 的任务！</p>
<p><strong>2、日志文件分析 logwatch 的任务：</strong> 如果系统发生了问题等，绝大部分的错误信息都会被记录到日志文件中， 因此系统管理员的重要任务之一就是分析日志。但你不可能手动通过 vim 等软件去查看日志文件，因为数据量太大！ 我们可以通过一个叫“ logwatch ”的程序分析日志信息，在启动邮件服务的前提下，你的 root 老是会收到标题为 logwatch 的信件</p>
<p><strong>3、建立 locate 的数据库：</strong><br>有时候我们会通过locate命令来查询文件。而文件名数据库是放置到 &#x2F;var&#x2F;lib&#x2F;mlocate&#x2F; 中。 这个数据库也是通过计划任务定期的执行updatedb命令去更新的</p>
<p><strong>4、RPM 软件日志文件的建立：</strong></p>
<p>系统会经常安装或卸载软件包。为了方便查询，系统也会将这些软件包的名称进行记录！ 所以计划任务也会定期帮助我们更新rpm数据库</p>
<p><strong>5、移除临时文件：</strong><br>软件在运行中会产生一些临时文件，但是当这个软件关闭时，这些临时文件可能并不会主动的被删除。有些时候这些文件对于系统来讲没有什么用处了，还占用磁盘空间。系统通过计划任务来定期来删除这些临时文件！</p>
<h2 id="二、仅执行一次的计划任务"><a href="#二、仅执行一次的计划任务" class="headerlink" title="二、仅执行一次的计划任务"></a>二、仅执行一次的计划任务</h2><p>首先，我们先来谈谈仅运行一次的计划任务at</p>
<h3 id="2-1、-atd-的启动与-at-运行的方式"><a href="#2-1、-atd-的启动与-at-运行的方式" class="headerlink" title="2.1、 atd 的启动与 at 运行的方式"></a>2.1、 atd 的启动与 at 运行的方式</h3><p>在使用at之前我们要确保atd服务是运行的，这个需要我们去检查一下，因为并不是所有的发行版linux默认都是开启这个服务的，但是在CentOS中是默认开启的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl status atd</span><br><span class="line">● atd.service - Job spooling tools</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/atd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Mon 2020-01-13 09:34:03 CST; 1h 17min ago</span><br><span class="line">#查询atd服务的状态</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl is-enabled atd</span><br><span class="line">enabled</span><br><span class="line"></span><br><span class="line">#查询是否开启默认启动</span><br><span class="line"></span><br><span class="line">如果没有启动</span><br><span class="line">[root@zutuanxue ~]# systemctl start atd  </span><br><span class="line"># 启动</span><br><span class="line">[root@zutuanxue ~]# systemctl enable atd</span><br><span class="line">#设置为开启启动</span><br></pre></td></tr></table></figure>

<p><strong>at的工作模式</strong></p>
<p>at在运行的时候会将定义好的工作以文本文件的方式写入 &#x2F;var&#x2F;spool&#x2F;at&#x2F; 目录内，该工作便能等待 atd 这个服务的调用，但是出于安全考虑，并不是所有的人都可以使用 at 计划任务！所以系统给我们提供了两个文件 &#x2F;etc&#x2F;at.allow 与 &#x2F;etc&#x2F;at.deny 来进行 at 的使用限制！ 加上这两个文件后， at 的工作情况其实是这样的：</p>
<p>先找寻 &#x2F;etc&#x2F;at.allow 这个文件，写在这个文件中的用户才能使用 at ，没有在这个文件中的用户则不能使用 at (即使没有写在 at.deny 当中)；</p>
<p>如果 &#x2F;etc&#x2F;at.allow 不存在，就寻找 &#x2F;etc&#x2F;at.deny 这个文件，若写在这个 at.deny 的用户则不能使用 at ，而没有在这个 at.deny 文件中的用户，就可以使用 at ；</p>
<p>如果两个文件都不存在，那么只有 root 可以使用 at 这个命令。</p>
<p>在大多数发行版当中，由于假设系统上的所有用户都是可信任的， 因此系统通常会保留一个空的 &#x2F;etc&#x2F;at.deny 文件，允许所有人使用 at 。如果有需要的话可以手动建立at.allow文件</p>
<h3 id="2-2、at的使用"><a href="#2-2、at的使用" class="headerlink" title="2.2、at的使用"></a>2.2、at的使用</h3><p>单一计划任务的进行就使用 at 这个命令！将 at 加上一个时间即可！基本的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# at  [-mldv] TIME  </span><br><span class="line">[root@zutuanxue ~]# at -c 工作序号 </span><br><span class="line">选项与参数：  </span><br><span class="line">-m ：当 at 的工作完成后，发邮件通知用户，需要mail服务</span><br><span class="line">-l ：at -l 相当于 atq，查看用户使用at定制的工作</span><br><span class="line">-d ：at -d 相当于 atrm ，删除一个工作；  </span><br><span class="line">-v ：详细信息；  </span><br><span class="line">-c ：查看指定工作的具体内容。  </span><br><span class="line">TIME：时间格式  </span><br><span class="line">		HH:MM      ex&gt; 16:00    </span><br><span class="line">		在今天指定的时刻进行，若该时刻已超过，则明天的这个时间进行此工作。   </span><br><span class="line">		HH:MM  YYYY-MM-DD   ex&gt; 16:00 2021-07-30    </span><br><span class="line">		指定在某年某月的某一天的时间进行该工作！     </span><br><span class="line">		HH:MM[am|pm] [Month] [Date]  ex&gt;  04am Jun 15    			另外一种年月日和时间的指定方式     </span><br><span class="line">		HH:MM[am|pm] + number [minutes|hours|days|weeks]    		ex&gt; now  + 5 minutes 	五分钟之后</span><br><span class="line">		ex&gt; 04am + 3 days    	三天后的上午四点  </span><br></pre></td></tr></table></figure>

<p>at在使用过程中的时间指定很重要，另外在使用过程中如果涉及到路径的指定，强烈建议使用绝对路径，定义完成at之后使用键盘上的ctrl+d结束</p>
<p><strong>1、at 的管理</strong></p>
<p>有的时候我用at定义完计划任务之后，发现命令有错误，此时我们就可以使用atq 与 atrm 进行管理。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# atq  </span><br><span class="line">[root@zutuanxue ~]# atrm 工作编号 </span><br><span class="line">[root@zutuanxue at]# atq</span><br><span class="line">2	Fri Feb 21 16:00:00 2020 a root</span><br><span class="line"># 在 2020-02-21 的 16:00 有一项工作，该项工作是root设置的，工作编号为2</span><br><span class="line">[root@zutuanxue ~]# atrm 2  </span><br><span class="line">[root@zutuanxue ~]# atq  # 没有任何信息，表示该工作被移除了！  </span><br></pre></td></tr></table></figure>

<p>这样，你可以利用 atq 来查询，利用 atrm 来删除，利用 at 来直接定义计划任务但是如果系统当前非常忙碌话，能不能让指定的工作在较闲的时候执行呢？那就是batch！</p>
<p><strong>2、batch：系统有空时才进行后台任务</strong></p>
<p>batch是at的一个辅助工具，也是利用at进行工作的，只是加入一些判断功能。它会在 CPU 的工作负载小于 0.8 的时候，才执行指定的工作！ 这个负载指的是 CPU 在单一时间点所负责的工作数量。不是 CPU 的使用率！ 比如说，如果我运行一个程序，这个程序可以使CPU 的使用率持续达到 100% ， 但是 CPU 的负载接近与1，因为 CPU 仅负责一个工作，而我同时运行了两个这样的程序，那么 CPU 的使用率还是 100% ，但是工作负载则变成 2 了。</p>
<p>也就是说，当 CPU 的负载越大，CPU 必须要在不同的工作之间进行频繁的切换。所以会非常忙碌！ 而用户还要额外进行 at 完成工作，就不太合理！所以才有 batch 命令的产生！</p>
<p>CentOS从7开始，batch 已经不再支持时间参数了，所以我们在使用batch定制计划任务的时候可以这样输入</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@zutuanxue at]# batch</span><br><span class="line">warning: commands will be executed using /bin/sh</span><br><span class="line">at&gt; cp /etc/passwd /root</span><br><span class="line">at&gt; &lt;EOT&gt;</span><br><span class="line">job 4 at Mon Jan 13 11:31:00 2020</span><br><span class="line">[root@zutuanxue at]# cd</span><br><span class="line">[root@zutuanxue ~]# ls</span><br><span class="line">公共  模板  视频  图片  文档  下载  音乐  桌面  anaconda-ks.cfg  initial-setup-ks.cfg  passwd</span><br></pre></td></tr></table></figure>

<p>所以，batch可以通过cpu负载自动判断是否可以执行指定的工作。</p>
<h2 id="三、周期执行的计划任务"><a href="#三、周期执行的计划任务" class="headerlink" title="三、周期执行的计划任务"></a>三、周期执行的计划任务</h2><p>相对于 at 是仅执行一次的工作，周期执行的计划任务则是由 crond这个系统服务来控制的。同样各位在使用的时候也要确认一下此服务的状态</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl status crond</span><br><span class="line">● crond.service - Command Scheduler</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/crond.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Mon 2020-01-13 09:34:03 CST; 2h 0min ago</span><br><span class="line">[root@zutuanxue ~]# systemctl is-enabled crond</span><br><span class="line">enabled</span><br></pre></td></tr></table></figure>

<h3 id="3-1、如何使用"><a href="#3-1、如何使用" class="headerlink" title="3.1、如何使用"></a>3.1、如何使用</h3><p>用户使用的是 crontab 这个命令来定义周期性的计划任务，但是为了安全性的问题， 与 at 同样的，我们可以限制使用 crontab 的用户账号！使用的限制数据有：</p>
<p><strong>&#x2F;etc&#x2F;cron.allow：</strong><br>将可以使用 crontab 的账号写入其中，若不在这个文件内的用户则不可使用 crontab；</p>
<p><strong>&#x2F;etc&#x2F;cron.deny：</strong><br>将不可以使用 crontab 的账号写入其中，若未记录到这个文件当中的用户，就可以使用 crontab 。</p>
<p>与 at 一样，以优先级来说， &#x2F;etc&#x2F;cron.allow 比 &#x2F;etc&#x2F;cron.deny 要高， 一般系统默认是提供 &#x2F;etc&#x2F;cron.deny ， 你可以将允许使用 crontab 用户写入 &#x2F;etc&#x2F;cron.deny 当中，一个账号一行。crontab 建立计划任务会存放在 &#x2F;var&#x2F;spool&#x2F;cron&#x2F; 目录中，</p>
<p>crontab 的使用:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# crontab</span><br><span class="line">-u ：只有root可以使用，指定其它用户的名称</span><br><span class="line">-e ：建立计划任务  </span><br><span class="line">-l ：查看计划任务  </span><br><span class="line">-r ：删除所有计划任务，若只删除一项，只能使用-e进行编辑  </span><br><span class="line">[root@zutuanxue ~]# crontab -e</span><br><span class="line">#执行后会打开一个vim的页面，每个任务一行  </span><br><span class="line">0	12 	* 	*  *			cp	/etc/passwd /root</span><br><span class="line">分 时 日 	月 周				工作内容</span><br></pre></td></tr></table></figure>

<p>编辑完毕之后输入“ :wq ”保存退出， 在cron中每项工作 (每行) 的格式都是具有六个字段，这六个字段的意义为：</p>
<table>
<thead>
<tr>
<th>意义</th>
<th>分钟</th>
<th>小时</th>
<th>日期</th>
<th>月份</th>
<th>周</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>范围</td>
<td>0-59</td>
<td>0-23</td>
<td>1-31</td>
<td>1-12</td>
<td>0-7</td>
<td>工作内容</td>
</tr>
</tbody></table>
<p>比较有趣的是那个『周』！周的数字为 0 或 7 时，都代表『星期天』的意思！另外，还有一些辅助的字符，大概有底下这些：</p>
<table>
<thead>
<tr>
<th align="left">特殊字符</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">*(星号)</td>
<td align="left">代表任何时刻</td>
</tr>
<tr>
<td align="left">,(逗号)</td>
<td align="left">代表分隔时段的意思。如3:00 与 6:00 时，就是：0 3,6 * * *</td>
</tr>
<tr>
<td align="left">-(减号)</td>
<td align="left">代表一段时间范围内，如：8 点到 12 点之间的每小时的 20 分都进行一项工作：20 8-12 * * *</td>
</tr>
<tr>
<td align="left">&#x2F;n(斜线)</td>
<td align="left">n 代表数字，间隔的单位的意思，如每五分钟进行一次，则：*&#x2F;5 * * * * 也可以写成 0-59&#x2F;</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# crontab -l		#查看root的计划任务</span><br><span class="line">0 16 1 * *	cp /etc/passwd /root</span><br><span class="line">root@zutuanxue ~]# crontab -u oracle -l	</span><br><span class="line">#查看指定用户的计划任务</span><br><span class="line">no crontab for oracle</span><br><span class="line">[root@zutuanxue ~]# crontab -r	#删除所有计划任务</span><br><span class="line">[root@zutuanxue ~]# crontab -l</span><br><span class="line">no crontab for root</span><br></pre></td></tr></table></figure>

<p>注意：crontab在使用的时候如果遇到路径，同样建议使用绝对路径，如果只是要删除某个项目，使用 crontab -e 来重新编辑，如果使用 -r 的参数，是会将所有的 crontab 内容都删掉。</p>
<h3 id="3-2、系统的配置文件：-x2F-etc-x2F-crontab-x2F-etc-x2F-cron-d-x2F"><a href="#3-2、系统的配置文件：-x2F-etc-x2F-crontab-x2F-etc-x2F-cron-d-x2F" class="headerlink" title="3.2、系统的配置文件： &#x2F;etc&#x2F;crontab, &#x2F;etc&#x2F;cron.d&#x2F;*"></a>3.2、系统的配置文件： &#x2F;etc&#x2F;crontab, &#x2F;etc&#x2F;cron.d&#x2F;*</h3><p>crontab -e是针对用户 来设计的，系统的计划任务是通过&#x2F;etc&#x2F;crontab文件来实现的，我们只要编辑&#x2F;etc&#x2F;crontab 这个文件就可以，由于cron的最低检测时间是分钟，所以编辑好这个文件，系统就会自动定期执行了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /etc/crontab</span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line"></span><br><span class="line"># For details see man 4 crontabs</span><br><span class="line"></span><br><span class="line"># Example of job definition:</span><br><span class="line"># .---------------- minute (0 - 59)</span><br><span class="line"># |  .------------- hour (0 - 23)</span><br><span class="line"># |  |  .---------- day of month (1 - 31)</span><br><span class="line"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="line"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"># |  |  |  |  |</span><br><span class="line"># *  *  *  *  * user-name  command to be executed</span><br></pre></td></tr></table></figure>

<p>与crontab -e的内容类似，但是多了几个部分</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHELL=/bin/bash			shell类型</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin	执行文件搜索位置</span><br><span class="line">MAILTO=root		发生错误时通知邮件发送给谁</span><br><span class="line"></span><br><span class="line">*  *  *  *  * user-name  command to be executed</span><br><span class="line">#比crontab -e多了一个执行者的身份，因为并不是所有工作都需要root用户去执行</span><br></pre></td></tr></table></figure>

<p><strong>额外的文件</strong></p>
<p>crond有三个相关联的地方，他们分别是：</p>
<p>&#x2F;etc&#x2F;crontab 系统计划任务的配置文件</p>
<p>&#x2F;etc&#x2F;cron.d&#x2F; 此目录和下面的几个目录都是系统计划任务存放运行脚本的位置。</p>
<p>&#x2F;etc&#x2F;cron.hourly&#x2F;</p>
<p>&#x2F;etc&#x2F;cron.daily&#x2F;</p>
<p>&#x2F;etc&#x2F;cron.weekly&#x2F;</p>
<p>&#x2F;etc&#x2F;cron.monthly&#x2F;</p>
<p>&#x2F;var&#x2F;spool&#x2F;cron&#x2F;* 用户定制的计划任务存放位置</p>
<h2 id="四、anacron"><a href="#四、anacron" class="headerlink" title="四、anacron"></a>四、anacron</h2><p>有些时候，在cron需要执行相应工作的时候，你的系统关机了，该如何处理？这个时候就需要使用anacron</p>
<h3 id="4-1、什么是-anacron"><a href="#4-1、什么是-anacron" class="headerlink" title="4.1、什么是 anacron"></a>4.1、什么是 anacron</h3><p>anacron 并不是用来取代 crontab 的，anacron 存在的目的就在于处理由于一些原因导致cron无法完成的工作</p>
<p>其实 anacron 也是每个小时被 crond 执行一次，然后 anacron 再去检测相关的工作任务有没有被执行，如果有未完成的工作， 就执行该工作任务，执行完毕或无须执行任何工作时，anacron 就停止了。我们可以通过&#x2F;etc&#x2F;cron.d&#x2F;0hourly的内容查看到</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /etc/cron.d/0hourly </span><br><span class="line"># Run the hourly jobs</span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line">01 * * * * root run-parts /etc/cron.hourly</span><br></pre></td></tr></table></figure>

<p>由于 anacron 默认会以一天、七天、一个月为期去检测系统未进行的 crontab 任务，因此对于某些特殊的使用环境非常有帮助。</p>
<p>那么 anacron 又是怎么知道我们的系统何时关机？这就得要使用 anacron 读取的时间记录文件 (timestamps) 了！ anacron 会去分析现在的时间与时间记录文件所记载的上次执行 anacron 的时间，两者比较后若发现有差异， 那就是在某些时刻没有进行 crontab ！此时 anacron 就会开始执行未进行的 crontab 任务了！</p>
<h2 id="4-2、anacron-与-x2F-etc-x2F-anacrontab"><a href="#4-2、anacron-与-x2F-etc-x2F-anacrontab" class="headerlink" title="4.2、anacron 与 &#x2F;etc&#x2F;anacrontab"></a>4.2、anacron 与 &#x2F;etc&#x2F;anacrontab</h2><p>anacron 其实是一个程序并非一个服务！这个程序在系统当中已经加入 crontab 的工作！同时 anacron 会每个小时被主动执行一次！所以 anacron 的配置文件应该放置在 &#x2F;etc&#x2F;cron.hourly目录中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /etc/cron.hourly/0anacron </span><br><span class="line">#!/bin/sh</span><br><span class="line"># Check whether 0anacron was run today already</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">/usr/sbin/anacron -s</span><br><span class="line">实际上，也仅仅是执行anacron -s命令，这个命令会根据/etc/anacrontab文件的定义去执行各项工作</span><br></pre></td></tr></table></figure>

<p><strong>anacrontab</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /etc/anacrontab </span><br><span class="line"># /etc/anacrontab: configuration file for anacron</span><br><span class="line"></span><br><span class="line"># See anacron(8) and anacrontab(5) for details.</span><br><span class="line"></span><br><span class="line">SHELL=/bin/sh</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line"># the maximal random delay added to the base delay of the jobs</span><br><span class="line">RANDOM_DELAY=45		#最大随机延迟时间，单位是分钟</span><br><span class="line"># the jobs will be started during the following hours only</span><br><span class="line">START_HOURS_RANGE=3-22	#仅执行延迟多少个小时之内的任务</span><br><span class="line"></span><br><span class="line">#period in days   delay in minutes   job-identifier   command</span><br><span class="line">1	5	cron.daily		nice run-parts /etc/cron.daily</span><br><span class="line">7	25	cron.weekly		nice run-parts /etc/cron.weekly</span><br><span class="line">@monthly 45	cron.monthly		nice run-parts /etc/cron.monthly</span><br><span class="line">间隔时间(天)	延迟时间(分钟)	工作名称	执行的内容</span><br></pre></td></tr></table></figure>

<p>以 &#x2F;etc&#x2F;cron.daily&#x2F; 那一行的为例</p>
<p>每隔一天，在开机后的第5分钟去执行cron.daily目录下的脚本</p>
<h1 id="shell-数据处理"><a href="#shell-数据处理" class="headerlink" title="shell 数据处理"></a>shell 数据处理</h1><p> 阅读 (33954) </p>
<p> 分享</p>
<h2 id="一、linux中的常用符号"><a href="#一、linux中的常用符号" class="headerlink" title="一、linux中的常用符号"></a>一、linux中的常用符号</h2><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>代表任意字符串</td>
</tr>
<tr>
<td>？</td>
<td>代表任意字符</td>
</tr>
<tr>
<td>&#x2F;</td>
<td>代表根目录或作为路径间隔符使用</td>
</tr>
<tr>
<td>\</td>
<td>转义字符。</td>
</tr>
<tr>
<td>&lt;ENTER&gt;</td>
<td>续行符。可以使用续行符将一个命令行分写在多行上</td>
</tr>
<tr>
<td>$</td>
<td>变量值置换，如：$PATH表示环境变量PATH的值</td>
</tr>
<tr>
<td>’</td>
<td>在’…’中间的字符都会被当做普通字符处理</td>
</tr>
<tr>
<td>‘’</td>
<td>在’’…’’中间的字符会被当做文字处理并允许变量值置换</td>
</tr>
<tr>
<td>&#96;</td>
<td>命令替换，置换`…&#96;中命令的执行结果</td>
</tr>
<tr>
<td>&lt;</td>
<td>输入重定向字符</td>
</tr>
<tr>
<td>&gt;</td>
<td>输出重定向字符</td>
</tr>
<tr>
<td>|</td>
<td>管道字符</td>
</tr>
<tr>
<td>&amp;</td>
<td>后台执行字符。在一个命令之后加上字符“&amp;”，该命令就会以后台方式执行</td>
</tr>
<tr>
<td>;</td>
<td>按照顺序执行的多个命令</td>
</tr>
<tr>
<td>()</td>
<td>在子Shell中执行命令</td>
</tr>
<tr>
<td>{}</td>
<td>在当前Shell中执行命令</td>
</tr>
<tr>
<td>!</td>
<td>执行命令历史记录中的命令</td>
</tr>
<tr>
<td>~</td>
<td>代表登录用户的宿主目录（自家目录）</td>
</tr>
</tbody></table>
<h2 id="二、历史记录"><a href="#二、历史记录" class="headerlink" title="二、历史记录"></a>二、历史记录</h2><p>linux系统在shell中保留了用户键入的每一个命令的历史记录，并且提供了很多种方法让用户通过历史记录找到曾经使用过的命令，并且调用这个历史记录的命令。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# history</span><br><span class="line">    1  ifconfig</span><br><span class="line">    2  nmcli connection modify ens33 ipv4.addresses 192.168.2.220/24 ipv4.gateway 192.168.2.1 ipv4.method manual autoconnect yes</span><br><span class="line">    3  route -n</span><br><span class="line">    4  nmcli connection down ens33</span><br><span class="line">   .</span><br><span class="line">   .</span><br><span class="line">   .</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>语法</th>
<th>替换</th>
</tr>
</thead>
<tbody><tr>
<td>！！</td>
<td>前一个命令</td>
</tr>
<tr>
<td>！n</td>
<td>命令号n</td>
</tr>
<tr>
<td>！-n</td>
<td>倒数第n个命令</td>
</tr>
<tr>
<td>！cmd</td>
<td>最后用来启动cmd的命令</td>
</tr>
</tbody></table>
<p><strong>与历史记录相关的文件和变量</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# echo $HISTFILE</span><br><span class="line">/root/.bash_history</span><br><span class="line">#用户的历史记录保存的位置</span><br><span class="line">[root@zutuanxue ~]# echo $HISTFILESIZE</span><br><span class="line">1000</span><br><span class="line">#启动时，从历史记录中读取的记录条数</span><br><span class="line">[root@zutuanxue ~]# echo $HISTSIZE</span><br><span class="line">1000</span><br><span class="line">#退出时，被写入历史记录的最大条数</span><br></pre></td></tr></table></figure>

<p><strong>历史记录技巧</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">esc+./alt+.	调用上一条命令的最后一部分内容</span><br><span class="line">ctrl+r	在历史记录中搜索给出关键字的命令</span><br></pre></td></tr></table></figure>

<h2 id="三、标准输入、标准输出、标准错误"><a href="#三、标准输入、标准输出、标准错误" class="headerlink" title="三、标准输入、标准输出、标准错误"></a>三、标准输入、标准输出、标准错误</h2><p>在linux系统中，大多数时候我们从键盘读取输入，在终端显示输出，而我们在键盘中输入的内容，多数都是执行命令，这些命令属于终端程序，除了终端程序还有图形程序和屏幕程序（如vim），不管是哪一种程序都会涉及到输入，输出，错误，多数情况下，我们在键盘输入信息，在显示器查看信息（正确的信息和错误的信息），这些输入的信息我们称之为标准输入（可以用0表示），输出的信息我们称之为标准输出（可以用1表示），而错误的信息（可以用2表示），我们称之为标准错误。在日常使用中我们除了可以使用键盘输入信息，从显示器读取信息之外，还可以指定程序从键盘以外的地方读取需要输入的内容，也可以让程序将信息输出到显示器以外的地方。</p>
<p><strong>重定向输入和输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#重定向输出</span><br><span class="line">[root@zutuanxue ~]# mkdir a</span><br><span class="line">[root@zutuanxue ~]# cd a</span><br><span class="line">[root@zutuanxue a]# mkdir aa ab ac</span><br><span class="line">[root@zutuanxue a]# cd aa</span><br><span class="line">[root@zutuanxue aa]# touch bb bc bd</span><br><span class="line">[root@zutuanxue ~]# ls a/ &gt; test	</span><br><span class="line">[root@zutuanxue ~]# cat test</span><br><span class="line">aa</span><br><span class="line">ab</span><br><span class="line">ac</span><br><span class="line">[root@zutuanxue ~]# ls a/aa/ &gt;&gt; test</span><br><span class="line">[root@zutuanxue ~]# cat test</span><br><span class="line">aa</span><br><span class="line">ab</span><br><span class="line">ac</span><br><span class="line">bb</span><br><span class="line">bc</span><br><span class="line">bd</span><br><span class="line"></span><br><span class="line">&gt;覆盖</span><br><span class="line">&gt;&gt;追加</span><br><span class="line">#重定向输入</span><br><span class="line">[root@zutuanxue ~]# wc -l test</span><br><span class="line">6 hello</span><br><span class="line">[root@zutuanxue ~]# wc -l &lt; test </span><br><span class="line">6</span><br><span class="line">注意：第一个例子，会输出文件名；第二个不会，因为它仅仅知道从标准输入读取内容。</span><br></pre></td></tr></table></figure>

<p>我们知道标准输入可以用0来表示，标准输出可以用1来表示，标准错误可以用2来表示，而有些时候这些输出的信息中即包含了正确的信息，也包含了错误的信息，如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# ls /etc/rc.d/</span><br><span class="line">init.d  rc0.d  rc1.d  rc2.d  rc3.d  rc4.d  rc5.d  rc6.d  rc.local</span><br><span class="line">[root@zutuanxue ~]# head -1 /etc/rc.d/*</span><br><span class="line">==&gt; /etc/rc.d/init.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/init.d&#x27; 时出错: 是一个目录</span><br><span class="line"></span><br><span class="line">==&gt; /etc/rc.d/rc0.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc0.d&#x27; 时出错: 是一个目录</span><br><span class="line"></span><br><span class="line">==&gt; /etc/rc.d/rc1.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc1.d&#x27; 时出错: 是一个目录</span><br><span class="line"></span><br><span class="line">==&gt; /etc/rc.d/rc2.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc2.d&#x27; 时出错: 是一个目录</span><br><span class="line"></span><br><span class="line">==&gt; /etc/rc.d/rc3.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc3.d&#x27; 时出错: 是一个目录</span><br><span class="line"></span><br><span class="line">==&gt; /etc/rc.d/rc4.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc4.d&#x27; 时出错: 是一个目录</span><br><span class="line"></span><br><span class="line">==&gt; /etc/rc.d/rc5.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc5.d&#x27; 时出错: 是一个目录</span><br><span class="line"></span><br><span class="line">==&gt; /etc/rc.d/rc6.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc6.d&#x27; 时出错: 是一个目录</span><br><span class="line"></span><br><span class="line">==&gt; /etc/rc.d/rc.local &lt;==</span><br><span class="line">#!/bin/bash</span><br></pre></td></tr></table></figure>

<p>我们通过ls命令查看&#x2F;etc&#x2F;rc.d这个目录的时候，我们发现，这个目录中即有目录，也有文件，而当我们使用“head -1”命令去查看文件的第一行内容的时候， 很显然目录是无法查看第一行的，这时就会有报错，当我想把这些信息都写入到一个指定的文件中而不想看到这些内容我该如何去做？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# head -1 /etc/rc.d/* &gt; test</span><br><span class="line">head: 读取&#x27;/etc/rc.d/init.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc0.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc1.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc2.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc3.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc4.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc5.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc6.d&#x27; 时出错: 是一个目录</span><br><span class="line">[root@zutuanxue ~]# cat test</span><br><span class="line">==&gt; /etc/rc.d/init.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc0.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc1.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc2.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc3.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc4.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc5.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc6.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc.local &lt;==</span><br><span class="line">#!/bin/bash</span><br></pre></td></tr></table></figure>

<p>我们可以利用之前的&gt;将输出的信息重定向到一个指定的文件，但是仍然会收到错误提示，这是为什么呢？因为在linux当中正确的输出和错误的输出实际上是两种数据流，默认情况下这两种数据流都会在显示器上打印出来，而我们使用的&gt;相当于1&gt;,也就是将正确的信息写入到了test文件中，错误的信息依旧会看到。利用前面的提到0，1，2这三个数字，我们可以这样做</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# head -1 /etc/rc.d/* &gt; test 2&gt; test.err</span><br><span class="line">[root@zutuanxue ~]# cat test</span><br><span class="line">==&gt; /etc/rc.d/init.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc0.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc1.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc2.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc3.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc4.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc5.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc6.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc.local &lt;==</span><br><span class="line">#!/bin/bash</span><br><span class="line">[root@zutuanxue ~]# cat test.err </span><br><span class="line">head: 读取&#x27;/etc/rc.d/init.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc0.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc1.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc2.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc3.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc4.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc5.d&#x27; 时出错: 是一个目录</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc6.d&#x27; 时出错: 是一个目录</span><br></pre></td></tr></table></figure>

<p>但是这依然是两个文件，能不能将这些信息都写入到一个文件中呢？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# head -1 /etc/rc.d/* &gt; test.both 2&gt;&amp;1</span><br><span class="line">[root@zutuanxue ~]# cat test.both </span><br><span class="line">==&gt; /etc/rc.d/init.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/init.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc0.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc0.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc1.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc1.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc2.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc2.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc3.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc3.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc4.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc4.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc5.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc5.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc6.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc6.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc.local &lt;==</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# head -1 /etc/rc.d/* &gt;&amp; test.both1</span><br><span class="line">[root@zutuanxue ~]# cat test.both1 </span><br><span class="line">==&gt; /etc/rc.d/init.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/init.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc0.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc0.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc1.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc1.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc2.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc2.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc3.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc3.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc4.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc4.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc5.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc5.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc6.d &lt;==</span><br><span class="line">head: 读取&#x27;/etc/rc.d/rc6.d&#x27; 时出错: 是一个目录</span><br><span class="line">==&gt; /etc/rc.d/rc.local &lt;==</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">这两种使用方式都是告诉shell将错误信息写入到正确信息所写入的文件中。</span><br><span class="line">如果这些错误信息是我们早就知道的，并且还不想看到的呢？</span><br><span class="line">[root@zutuanxue ~]# head -1 /etc/rc.d/* 2&gt; /dev/null </span><br><span class="line">==&gt; /etc/rc.d/init.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc0.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc1.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc2.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc3.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc4.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc5.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc6.d &lt;==</span><br><span class="line">==&gt; /etc/rc.d/rc.local &lt;==</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">/dev/null:表示的是一个黑洞，通常用于丢弃不需要的数据输出</span><br></pre></td></tr></table></figure>

<p>综上所述针对于输入输出重定向与合并的用法有</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>cmd &lt; file</td>
<td>从file重定向标准输入</td>
</tr>
<tr>
<td>cmd &gt; file</td>
<td>把标准输出重定向到file中，如果file存在的话，覆盖（损坏）它</td>
</tr>
<tr>
<td>cmd&gt;&gt;file</td>
<td>把标准输出重定向到file中，如果file存在，附加给它</td>
</tr>
<tr>
<td>cmd 2&gt;file</td>
<td>把标准错误重定向到file，如果file 存在，覆盖（损坏）它</td>
</tr>
<tr>
<td>cmd 2&gt;&gt; file</td>
<td>把标准错误重定向到file中，如果file 存在，附加给他</td>
</tr>
<tr>
<td>cmd&gt;file 2&gt;&amp;1</td>
<td>合并标准输出和标准错误，并且重定向到file中（可移植的语法）</td>
</tr>
<tr>
<td>cmd &gt;&amp; file</td>
<td>合并标准输出和标准错误，并且重定向到file中（方便的语法）</td>
</tr>
</tbody></table>
<h2 id="四、管道"><a href="#四、管道" class="headerlink" title="四、管道"></a>四、管道</h2><p>在前面，我们已经看到，进程的输出可以被重定向到终端显示器以外的地方，或者可以让进程从终端键盘以外的地方读取输入。一种最常用，最有力的重定向形式是把这二者结合起来，在这种形式下，一个命令的输出（标准输出）被直接“用管道输送”到另一个命令的输入（标准输入）中，从而构成了 Linux（和Unix）所谓的管道（pipe）。当两个命令用管道连接起来时，第一个进程的标准输出流被直接连接到第二个进程的标准输入序列。为了用bash创建管道，用一个垂直的小节线 | 把这两个命令连接起来。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/10/25/1603601398337.png" alt="image20200323144226709.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# pwd</span><br><span class="line">/root</span><br><span class="line">[root@zutuanxue ~]# ls | grep ana</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">注意：从管道读数据是一次性操作，数据一旦被读，它就从管道中被抛弃，释放空间以便写更多的数据。它只能处理经由前面一个指令传出的正确输出信息，对错误信息信息没有直接处理能力。然后，传递给下一个命令，作为标准的输入。</span><br></pre></td></tr></table></figure>

<h2 id="五、数据处理常用工具"><a href="#五、数据处理常用工具" class="headerlink" title="五、数据处理常用工具"></a>五、数据处理常用工具</h2><h3 id="5-1、find文件查找命令"><a href="#5-1、find文件查找命令" class="headerlink" title="5.1、find文件查找命令"></a>5.1、find文件查找命令</h3><p>. 代表当前目录</p>
<p>~ 代表用户家目录</p>
<p><strong>find命令选项</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-name	按照文件名查找文件。</span><br><span class="line">[root@zutuanxue ~]# find ~ -name &quot;test.*&quot;</span><br><span class="line">/root/test.err</span><br><span class="line">/root/test.both</span><br><span class="line">/root/test.both1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-perm	按照文件权限来查找文件。</span><br><span class="line">[root@zutuanxue ~]# chmod 777 hello</span><br><span class="line">[root@zutuanxue ~]# find . -perm 777</span><br><span class="line">./hello</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-user	按照文件属主来查找文件。</span><br><span class="line">-group	按照文件所属的组来查找文件。</span><br><span class="line">-uid	查找指定uid</span><br><span class="line">-gid	查找指定gid</span><br><span class="line">[root@zutuanxue ~]# chown hello.hello test</span><br><span class="line">[root@zutuanxue ~]# find . -user hello</span><br><span class="line">./test</span><br><span class="line">[root@zutuanxue ~]# find . -group hello</span><br><span class="line">./test</span><br><span class="line">[root@zutuanxue ~]# chown root.hello hello</span><br><span class="line">[root@zutuanxue ~]# find . -user root -group hello</span><br><span class="line">./hello</span><br><span class="line">[root@zutuanxue ~]# find . -uid 1000</span><br><span class="line">./test</span><br><span class="line">[root@zutuanxue ~]# find . -gid 1000</span><br><span class="line">./test</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-mtime -n +n	按照文件的更改时间来查找文件， -n表示n天以内，+n表示n天以前。还有-atime和-ctime 选项</span><br><span class="line">-amin/-cmin/-mmin n		 查找系统中最后N分钟</span><br><span class="line"></span><br><span class="line">　　</span><br><span class="line">#如果-mtime +2 表示当前时间-2day以前的mtime的文件。即文件的mtime小于 sysdate -2</span><br><span class="line">#如果-mtime -2 表示当前时间-2day以后的mtime的文件。即文件的mtime大于 sysdate -2</span><br><span class="line">#如果-mtime  2 表示文件mtime在sysdate -2 与 sysdate-1 之间的文件。</span><br><span class="line">#！！！！！实际上再记不住，记住一般删除旧数据，一定是选择+。</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# find /etc -mtime -2 </span><br><span class="line">/etc</span><br><span class="line">/etc/cups</span><br><span class="line">/etc/cups/subscriptions.conf</span><br><span class="line">/etc/resolv.conf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-nogroup	查找无有效所属组的文件，即该文件所属的组在/etc/groups中不存在。</span><br><span class="line">-nouser	查找无有效属主的文件，即该文件的属主在/etc/passwd中不存在。</span><br><span class="line">[root@zutuanxue ~]# chown 1400.1400 hello</span><br><span class="line">[root@zutuanxue ~]# ll hello</span><br><span class="line">-rwxrwxrwx 1 1400 1400 8 3月  22 23:25 hello</span><br><span class="line">[root@zutuanxue ~]# find . -nogroup</span><br><span class="line">./hello</span><br><span class="line">[root@zutuanxue ~]# find . -nouser</span><br><span class="line">./hello</span><br><span class="line"></span><br><span class="line">-newer file1 查找更改时间比文件file1新的文件。</span><br><span class="line">[root@zutuanxue ~]# find /etc -newer initial-setup-ks.cfg </span><br><span class="line">/etc</span><br><span class="line">/etc/dnf/modules.d</span><br><span class="line">/etc/dnf/modules.d/httpd.module</span><br><span class="line">/etc/logrotate.d</span><br><span class="line">还有anewer和cnewer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-type	查找某一类型的文件，诸如：</span><br><span class="line">b - 块设备文件。</span><br><span class="line">d - 目录。</span><br><span class="line">c - 字符设备文件。</span><br><span class="line">p - 管道文件。</span><br><span class="line">l - 符号链接文件。</span><br><span class="line">f - 普通文件。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# find /etc -newer initial-setup-ks.cfg -type f</span><br><span class="line">/etc/dnf/modules.d/httpd.module</span><br><span class="line">/etc/logrotate.d/glusterfs</span><br><span class="line">/etc/pki/nssdb/cert9.db</span><br><span class="line">/etc/pki/nssdb/key4.db</span><br><span class="line">/etc/yum.repos.d/server.repo</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-size n[bcwkMG] 查找文件长度为n块的文件，带有c时表示文件长度以字节计。</span><br><span class="line">			b	512字节一块</span><br><span class="line">			c	字节</span><br><span class="line">			w	字（2字节）</span><br><span class="line">			k	k字节（1024）</span><br><span class="line">			M	M字节（1024x1024字节）</span><br><span class="line">			G	G字节（1024x1024x1024字节）</span><br><span class="line">[root@zutuanxue ~]# find . -size +1M</span><br><span class="line">./.cache/tracker/meta.db</span><br><span class="line">./.cache/tracker/meta.db-wal</span><br><span class="line">./.cache/mozilla/firefox/mduza4q4.default/startupCache/startupCache.8.little</span><br><span class="line">./.cache/mozilla/firefox/mduza4q4.default/startupCache/scriptCache-child-current.bin</span><br><span class="line">./.cache/mozilla/firefox/mduza4q4.default/startupCache/scriptCache-current.bin</span><br><span class="line">./.mozilla/firefox/mduza4q4.default/places.sqlite</span><br><span class="line">./.mozilla/firefox/mduza4q4.default/favicons.sqlite</span><br><span class="line"># 在使用的时候注意一下单位，如find . -size 4k使用4k时会显示所有大与3k小于等于4k的文件，如果使用的是4096c则是查找大小为4k的文件</span><br><span class="line">[root@zutuanxue ~]# find . -size 4k</span><br><span class="line">.</span><br><span class="line">./.cache/mozilla/firefox/mduza4q4.default/startupCache/urlCache-current.bin</span><br><span class="line">./.cache/mozilla/firefox/mduza4q4.default/startupCache/urlCache.bin</span><br><span class="line">./.cache/mozilla/firefox/mduza4q4.default/safebrowsing</span><br><span class="line">./.config/pulse</span><br><span class="line">./.mozilla/firefox/mduza4q4.default</span><br><span class="line">./.mozilla/firefox/mduza4q4.default/datareporting/archived/2020-02</span><br><span class="line">./.mozilla/firefox/mduza4q4.default/saved-telemetry-pings</span><br><span class="line">[root@zutuanxue ~]# find . -size 4096c</span><br><span class="line">.</span><br><span class="line">./.cache/mozilla/firefox/mduza4q4.default/safebrowsing</span><br><span class="line">./.config/pulse</span><br><span class="line">./.mozilla/firefox/mduza4q4.default</span><br><span class="line">./.mozilla/firefox/mduza4q4.default/datareporting/archived/2020-02</span><br><span class="line">./.mozilla/firefox/mduza4q4.default/saved-telemetry-pings</span><br><span class="line">[root@zutuanxue ~]# find . -size 4k |wc -l</span><br><span class="line">8</span><br><span class="line">[root@zutuanxue ~]# find . -size 4096c |wc -l</span><br><span class="line">6</span><br><span class="line">[root@zutuanxue ~]# ll -h .cache/mozilla/firefox/mduza4q4.default/startupCache/urlCache-current.bin </span><br><span class="line">-rw-r--r-- 1 root root 3.1K 2月  24 02:34 .cache/mozilla/firefox/mduza4q4.default/startupCache/urlCache-current.bin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-follow：如果find命令遇到符号链接文件，就跟踪至链接所指向的文件。</span><br><span class="line">[root@zutuanxue ~]# ln -s /etc/ linketc</span><br><span class="line">[root@zutuanxue ~]# find . -name passwd</span><br><span class="line">[root@zutuanxue ~]# find . -name passwd -follow</span><br><span class="line">./linketc/pam.d/passwd</span><br><span class="line">./linketc/passwd</span><br><span class="line"></span><br><span class="line">-exec   command   &#123;&#125; \;      —–将查到的文件执行command操作,&#123;&#125; 和 \;之间有空格</span><br><span class="line">-ok 和-exec相同，只不过在操作前要询用户</span><br><span class="line">[root@zutuanxue ~]# find /etc -name passwd -exec grep &quot;hello&quot; &#123;&#125; \;</span><br><span class="line">hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">[root@zutuanxue ~]# find /etc -name passwd -ok grep &quot;hello&quot; &#123;&#125; \;</span><br><span class="line">&lt; grep ... /etc/pam.d/passwd &gt; ? y</span><br><span class="line">&lt; grep ... /etc/passwd &gt; ? y</span><br><span class="line">hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-empty	查找空文件或目录</span><br><span class="line">[root@zutuanxue ~]# find /etc -empty</span><br><span class="line">/etc/crypttab</span><br><span class="line">/etc/dnf/aliases.d</span><br><span class="line">/etc/dnf/modules.defaults.d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-inum	查找i节点编号为指定数值的文件</span><br><span class="line">-samefile	查找相同的文件</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# ln hello hello1</span><br><span class="line">[root@zutuanxue ~]# ln hello hello2</span><br><span class="line">[root@zutuanxue ~]# ll -i hello</span><br><span class="line">34510098 -rwxrwxrwx 3 1400 1400 8 3月  22 23:25 hello</span><br><span class="line">[root@zutuanxue ~]# find . -inum 34510098</span><br><span class="line">./hello</span><br><span class="line">./hello1</span><br><span class="line">./hello2</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# find . -samefile hello</span><br><span class="line">./hello</span><br><span class="line">./hello1</span><br><span class="line">./hello2</span><br></pre></td></tr></table></figure>

<h3 id="5-2、grep-amp-egrep-数据检索命令"><a href="#5-2、grep-amp-egrep-数据检索命令" class="headerlink" title="5.2、grep&amp;egrep 数据检索命令"></a>5.2、grep&amp;egrep 数据检索命令</h3><p>一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来，最常用。egrep是grep的扩展，支持更多的正则表达式元字符,等同于grep -E。</p>
<p>useradd HELLO</p>
<p>useradd helo</p>
<p>useradd helllo</p>
<p><strong>grep 与 正则表达式符号</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">^ 行的开始 如：&#x27;^grep&#x27;匹配所有以grep开头的行。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;^he&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">$	行的结束 如：&#x27;grep$&#x27;匹配所有以grep结尾的行。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;sh$&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">.	匹配一个非换行符(&#x27;\n&#x27;)的字符如：&#x27;gr.p&#x27;匹配gr后接一个任意字符，然后是p。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;t.e&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">* 匹配零个或多个先前字符 如：&#x27; *grep&#x27; (注意*前有空格)匹配所有零个或多个空格后紧跟grep的行，需要用egrep 或者grep带上 -E 选项。 .*一起用代表任意字符。</span><br><span class="line">[root@zutuanxue ~]# grep -E &#x27;el*lo&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">[]	匹配一个指定范围内的字符，如&#x27;[Gg]rep&#x27;匹配Grep和grep。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;[Hh]el&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">[^] 匹配一个不在指定范围内的字符，如：&#x27;[^A-FH-Z]rep&#x27;匹配不包含A-F和H-Z的一个字母开头，紧跟rep的行。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;[^A-Z]ello&#x27; /etc/passwd</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;[^a-z]ello&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">\?	匹配零个或一个先前的字符。如：&#x27;gre\?p&#x27;匹配gr后跟一个或零个e字符，然后是p的行。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;hell\?o&#x27; /etc/passwd</span><br><span class="line">hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">helo:x:1002:1002::/home/helo:/bin/bash</span><br><span class="line"></span><br><span class="line">x\&#123;m\&#125; 重复字符x，m次，如：&#x27;o\&#123;5\&#125;&#x27;匹配包含5个o的行。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;l\&#123;2\&#125;&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">x\&#123;m,\&#125; 重复字符x,至少m次，如：&#x27;o\&#123;5,\&#125;&#x27;匹配至少有5个o的行。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;l\&#123;2,\&#125;&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">x\&#123;m,n\&#125; 重复字符x，至少m次，不多于n次，如：&#x27;o\&#123;5,10\&#125;&#x27;匹配5--10个o的行。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;l\&#123;1,3\&#125;&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">\b 单词锁定符，如: &#x27;\bgrep\b&#x27;只匹配grep。</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;hell&#x27; /etc/passwd</span><br><span class="line">hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">helllo:x:1003:1003::/home/helllo:/bin/bash</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;\bhell\b&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">egrep和 grep -E的扩展集</span><br><span class="line">+	匹配一个或多个先前的字符。如：&#x27;[a-z]+able&#x27;，匹配一个或多个小写字母后跟able的串.</span><br><span class="line">[root@zutuanxue ~]# grep -E &#x27;[a-z]+llo&#x27; /etc/passwd</span><br><span class="line">hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">helllo:x:1003:1003::/home/helllo:/bin/bash</span><br><span class="line">[root@zutuanxue ~]# grep -E &#x27;[a-z]+lo&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line">?	作用同\?,如：&#x27;gre?p&#x27;匹配gr后跟一个或零个e字符，然后是p的行。</span><br><span class="line">[root@zutuanxue ~]# grep -E &#x27;hel?lo&#x27; /etc/passwd</span><br><span class="line">hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">helo:x:1002:1002::/home/helo:/bin/bash</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;hel?lo&#x27; /etc/passwd</span><br><span class="line">[root@zutuanxue ~]# grep &#x27;hel\?lo&#x27; /etc/passwd</span><br><span class="line">hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">helo:x:1002:1002::/home/helo:/bin/bash</span><br><span class="line"></span><br><span class="line">a|b|c 匹配a或b或c。如：grep|sed匹配grep或sed</span><br><span class="line">[root@zutuanxue ~]# grep -E &#x27;llo|lllo&#x27; /etc/passwd</span><br><span class="line">hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">helllo:x:1003:1003::/home/helllo:/bin/bash</span><br><span class="line"></span><br><span class="line">*	0次或多次</span><br><span class="line">?	0次或1次</span><br><span class="line">+	1次或多次</span><br><span class="line"></span><br><span class="line">-E		支持扩展正则，相当于egrep</span><br><span class="line">-i		不区分大小写</span><br><span class="line">-v		取反，显示不匹配的</span><br><span class="line">--color=auto	高亮显示</span><br></pre></td></tr></table></figure>

<h3 id="5-3、sort-对文件内容进行排序"><a href="#5-3、sort-对文件内容进行排序" class="headerlink" title="5.3、sort 对文件内容进行排序"></a>5.3、sort 对文件内容进行排序</h3><p><strong>常用命令选项</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-b 忽略每行前面开始出的空格字符。</span><br><span class="line">[root@zutuanxue ~]# sort passwd</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line"> hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">    HELLO:x:1001:1001::/home/HELLO:/bin/bash</span><br><span class="line">      helo:x:1002:1002::/home/helo:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">nobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">[root@zutuanxue ~]# sort -b passwd</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line"> hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">    HELLO:x:1001:1001::/home/HELLO:/bin/bash</span><br><span class="line">      helo:x:1002:1002::/home/helo:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">nobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">-c 检查文件是否已经按照顺序排序。</span><br><span class="line">[root@zutuanxue ~]# sort -c passwd </span><br><span class="line">sort：passwd:2：无序： bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">-t	用指定的符号做为分隔符</span><br><span class="line">-k	指定区间</span><br><span class="line">-n 	依照数值的大小排序。</span><br><span class="line">-r 以相反的顺序来排序。</span><br><span class="line">[root@zutuanxue ~]# sort -t &#x27;:&#x27; -k 3 -r -n  passwd </span><br><span class="line">nobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin</span><br><span class="line">      helo:x:1002:1002::/home/helo:/bin/bash</span><br><span class="line">    HELLO:x:1001:1001::/home/HELLO:/bin/bash</span><br><span class="line"> hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">   apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">或者</span><br><span class="line">[root@zutuanxue ~]# sort -t &#x27;:&#x27; -k 3rn passwd </span><br><span class="line">nobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin</span><br><span class="line">      helo:x:1002:1002::/home/helo:/bin/bash</span><br><span class="line">    HELLO:x:1001:1001::/home/HELLO:/bin/bash</span><br><span class="line"> hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">   apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-o&lt;输出文件&gt; 将排序后的结果存入指定的文件。</span><br><span class="line">[root@zutuanxue ~]# sort -t &#x27;:&#x27; -k 3 -r -n  passwd -o /root/passwd-sort</span><br><span class="line">[root@zutuanxue ~]# cat /root/passwd-sort </span><br><span class="line">nobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin</span><br><span class="line">      helo:x:1002:1002::/home/helo:/bin/bash</span><br><span class="line">    HELLO:x:1001:1001::/home/HELLO:/bin/bash</span><br><span class="line"> hello:x:1000:1000:hello:/home/hello:/bin/bash</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">   apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>

<h3 id="5-4、uniq-数据去重"><a href="#5-4、uniq-数据去重" class="headerlink" title="5.4、uniq 数据去重"></a>5.4、uniq 数据去重</h3><p>一般配合sort使用</p>
<p><strong>案例文档</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat testuniq</span><br><span class="line">192.168.98.2</span><br><span class="line">192.168.98.8</span><br><span class="line">192.168.98.3</span><br><span class="line">192.168.98.3</span><br><span class="line">192.168.98.9</span><br><span class="line">192.168.98.8</span><br><span class="line">192.168.98.8</span><br><span class="line">192.168.98.0</span><br><span class="line">192.168.98.3</span><br></pre></td></tr></table></figure>

<p><strong>常用命令选项</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-c	在每列旁边显示该行重复出现的次数。</span><br><span class="line">[root@zutuanxue ~]# uniq -c testuniq </span><br><span class="line">      1 192.168.98.2</span><br><span class="line">      1 192.168.98.8</span><br><span class="line">      2 192.168.98.3</span><br><span class="line">      1 192.168.98.9</span><br><span class="line">      2 192.168.98.8</span><br><span class="line">      1 192.168.98.0</span><br><span class="line">      1 192.168.98.3</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# uniq -c testuniq | sort</span><br><span class="line">      1 192.168.98.0</span><br><span class="line">      1 192.168.98.2</span><br><span class="line">      1 192.168.98.3</span><br><span class="line">      1 192.168.98.8</span><br><span class="line">      1 192.168.98.9</span><br><span class="line">      2 192.168.98.3</span><br><span class="line">      2 192.168.98.8</span><br><span class="line"></span><br><span class="line">-d	仅显示重复出现的行列。</span><br><span class="line">[root@zutuanxue ~]# uniq -d testuniq </span><br><span class="line">192.168.98.3</span><br><span class="line">192.168.98.8</span><br><span class="line"></span><br><span class="line">-u	仅显示出一次的行列。</span><br><span class="line">[root@zutuanxue ~]# uniq -u testuniq </span><br><span class="line">192.168.98.2</span><br><span class="line">192.168.98.8</span><br><span class="line">192.168.98.9</span><br><span class="line">192.168.98.0</span><br><span class="line">192.168.98.3</span><br><span class="line">[root@zutuanxue ~]# uniq -u testuniq | sort</span><br><span class="line">192.168.98.0</span><br><span class="line">192.168.98.2</span><br><span class="line">192.168.98.3</span><br><span class="line">192.168.98.8</span><br><span class="line">192.168.98.9</span><br></pre></td></tr></table></figure>

<h3 id="5-5、tree-以树状结构列出目录内容"><a href="#5-5、tree-以树状结构列出目录内容" class="headerlink" title="5.5、tree 以树状结构列出目录内容"></a>5.5、tree 以树状结构列出目录内容</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-a 显示所有文件和目录,默认不显示隐藏文件</span><br><span class="line">[root@zutuanxue ~]# tree -a</span><br><span class="line"></span><br><span class="line">-C 在文件和目录清单加上色彩，便于区分各种类型。</span><br><span class="line">[root@zutuanxue ~]# tree -C</span><br><span class="line"></span><br><span class="line">-d 只显示目录。</span><br><span class="line">[root@zutuanxue ~]# tree -d</span><br><span class="line"></span><br><span class="line">-D 列出文件或目录的更改时间。</span><br><span class="line">[root@zutuanxue ~]# tree -D</span><br><span class="line">.</span><br><span class="line">├── [Feb  4 15:07]  公共</span><br><span class="line">├── [Feb  4 15:07]  模板</span><br><span class="line"></span><br><span class="line">-f 在每个文件或目录之前，显示完整的路径名称。</span><br><span class="line">[root@zutuanxue ~]# tree -f</span><br><span class="line">.</span><br><span class="line">├── ./公共</span><br><span class="line">├── ./模板</span><br><span class="line"></span><br><span class="line">-F 加上文件类型标记，在执行文件，目录，Socket，管道名称名称，各自加上&quot;*&quot;,&quot;/&quot;,&quot;@&quot;,&quot;|&quot;号。</span><br><span class="line">[root@zutuanxue ~]# tree -F</span><br><span class="line">.</span><br><span class="line">├── 公共/</span><br><span class="line">├── 模板/</span><br><span class="line"></span><br><span class="line">-g -u 列出文件或目录的所属群组、主名称，没有对应的名称时，则显示群组、主的识别码。</span><br><span class="line">[root@zutuanxue ~]# tree -g</span><br><span class="line">.</span><br><span class="line">├── [root    ]  公共</span><br><span class="line">├── [root    ]  模板</span><br><span class="line"></span><br><span class="line">-i 不以阶梯状列出文件或目录名称。</span><br><span class="line">[root@zutuanxue ~]# tree -i</span><br><span class="line">.</span><br><span class="line">公共</span><br><span class="line">模板</span><br><span class="line">视频</span><br><span class="line"></span><br><span class="line">-n 不在文件和目录清单加上色彩。</span><br><span class="line">[root@zutuanxue ~]# tree -n</span><br><span class="line">.</span><br><span class="line">├── 公共</span><br><span class="line">├── 模板</span><br><span class="line"></span><br><span class="line">-p 列出权限标示。</span><br><span class="line">[root@zutuanxue ~]# tree -p</span><br><span class="line">.</span><br><span class="line">├── [drwxr-xr-x]  公共</span><br><span class="line">├── [drwxr-xr-x]  模板</span><br><span class="line"></span><br><span class="line">-s 列出文件或目录大小。</span><br><span class="line">[root@zutuanxue ~]# tree -s</span><br><span class="line">.</span><br><span class="line">├── [          6]  公共</span><br><span class="line">├── [          6]  模板</span><br><span class="line"></span><br><span class="line">-t 用文件和目录的更改时间排序。</span><br><span class="line">[root@zutuanxue ~]# tree -t</span><br><span class="line">.</span><br><span class="line">├── anaconda-ks.cfg</span><br><span class="line">├── initial-setup-ks.cfg</span><br><span class="line">├── 公共</span><br><span class="line"></span><br><span class="line">-u 列出文件或目录的拥有者名称，没有对应的名称时，则显示用户识别码。</span><br><span class="line">[root@zutuanxue ~]# tree -u</span><br><span class="line">.</span><br><span class="line">├── [root    ]  公共</span><br><span class="line">├── [root    ]  模板</span><br><span class="line"></span><br><span class="line">-L 显示目录层数，数值为正整数</span><br><span class="line">[root@zutuanxue ~]# tree -a -L 2</span><br><span class="line">.</span><br><span class="line">├── .cache</span><br><span class="line">│   ├── dconf</span><br><span class="line">│   ├── event-sound-cache.tdb.d5b6fe70a77f4945aa0999abdd33e686.x86_64-redhat-linux-gnu</span><br><span class="line">│   ├── evolution</span><br><span class="line">│   ├── gnome-shell</span><br><span class="line">│   ├── gnome-software</span><br></pre></td></tr></table></figure>

<h3 id="5-6、xargs命令"><a href="#5-6、xargs命令" class="headerlink" title="5.6、xargs命令"></a>5.6、xargs命令</h3><p>xargs 是给命令传递参数的一个过滤器，也是组合多个命令的一个工具。用于一些不支持管道输入的命令如ls</p>
<p><strong>案例文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat xargtest </span><br><span class="line">a a a</span><br><span class="line">b b b</span><br><span class="line">c c c</span><br><span class="line">d d d</span><br><span class="line">e</span><br><span class="line">f</span><br><span class="line">g</span><br><span class="line">h</span><br><span class="line">i</span><br><span class="line">j</span><br><span class="line">k</span><br><span class="line">l</span><br></pre></td></tr></table></figure>

<p><strong>常用命令选项</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-n num 后面加列数</span><br><span class="line">[root@zutuanxue ~]# cat xargtest | xargs -n 2</span><br><span class="line">a a</span><br><span class="line">a b</span><br><span class="line">b b</span><br><span class="line">c c</span><br><span class="line">c d</span><br><span class="line">d d</span><br><span class="line">e f</span><br><span class="line">g h</span><br><span class="line">i j</span><br><span class="line">k l</span><br><span class="line">[root@zutuanxue ~]# cat xargtest | xargs</span><br><span class="line">a a a b b b c c c d d d e f g h i j k l</span><br><span class="line"></span><br><span class="line">-I	指定替换的字符串，并在后续的命令中用指定的字符串表示接收到的输入内容，并执行，可以用任意字符代替（不推荐有特殊含义的字符，如*等，如果使用请记得转意），一般为[]或&#123;&#125;</span><br><span class="line">[root@zutuanxue ~]# mkdir testx</span><br><span class="line">[root@zutuanxue ~]# find /var/ -name &quot;*.log&quot; | xargs  -I a cp a ./testx</span><br><span class="line">[root@zutuanxue ~]# ls testx | wc -l</span><br><span class="line">39</span><br><span class="line"></span><br><span class="line">-i	类似-I，相当于固定就是使用&#123;&#125;来表示接收到的输入内容</span><br><span class="line">[root@zutuanxue ~]# find /var/ -name &quot;*.log&quot; | xargs  -i cp &#123;&#125; ./testx</span><br><span class="line">[root@zutuanxue ~]# ls testx | wc -l</span><br><span class="line">39</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-d 指定分隔符</span><br><span class="line">[root@zutuanxue ~]# echo &quot;a9b9c9d9&quot; | xargs -d 9</span><br><span class="line">a b c d </span><br></pre></td></tr></table></figure>

<h1 id="Linux系统监控工具-glances"><a href="#Linux系统监控工具-glances" class="headerlink" title="Linux系统监控工具-glances"></a>Linux系统监控工具-glances</h1><p> 阅读 (480526) </p>
<p> 分享</p>
<h2 id="一、glances介绍"><a href="#一、glances介绍" class="headerlink" title="一、glances介绍"></a>一、glances介绍</h2><p>glances是一个基于python语言开发，可以为linux或者UNIX性能提供监视和分析性能数据的功能。glances在用户的终端上显示重要的系统信息，并动态的进行更新，让管理员实时掌握系统资源的使用情况，而动态监控并不会消耗大量的系统资源，比如CPU资源，通常消耗小于2%，glances默认每两秒更新一次数据。同时glances还可以将相同的数据捕获到一个文件，便于以后对报告进行分析和图形绘制，支持的文件格式有.csv电子表格格式和和html格式。</p>
<p>glances可以分析系统的：</p>
<ul>
<li>CPU使用率</li>
<li>内存使用率</li>
<li>内核统计信息和运行队列信息</li>
<li>磁盘I&#x2F;O速度、传输和读&#x2F;写比率</li>
<li>磁盘适配器</li>
<li>网络I&#x2F;O速度、传输和读&#x2F;写比率</li>
<li>页面监控</li>
<li>进程监控-消耗资源最多的进程</li>
<li>计算机信息和系统资源</li>
</ul>
<h2 id="二、glances安装方式"><a href="#二、glances安装方式" class="headerlink" title="二、glances安装方式"></a>二、glances安装方式</h2><ol>
<li>源码安装</li>
<li>基于pip命令安装</li>
<li>基于epel公网yum源</li>
</ol>
<p>由于源码安装需要解决大量的依赖包的问题，对于小白同学学习压力较大，所以本文将重点介绍基于yum的安装方法，让大家快速安装，并能及时体验到glances监控的强大和高效。</p>
<h2 id="三、基于epel公网源安装glances"><a href="#三、基于epel公网源安装glances" class="headerlink" title="三、基于epel公网源安装glances"></a>三、基于epel公网源安装glances</h2><p>由于glances运行需要python环境，所以我们需要首先安装好python环境，这里我给大家使用的是一个脚本安装python3.7.3，目前的最新版本。</p>
<h4 id="3-1、python3-7-3安装脚本"><a href="#3-1、python3-7-3安装脚本" class="headerlink" title="3.1、python3.7.3安装脚本"></a>3.1、python3.7.3安装脚本</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># </span><br><span class="line">#Name: </span><br><span class="line">#Author: zutuanxue_com</span><br><span class="line">#Created Time: 2019/10/1 11:20</span><br><span class="line">#Release: </span><br><span class="line">#Description:python 3.7.3安装脚本</span><br><span class="line"></span><br><span class="line">#变量</span><br><span class="line">source_url=&quot;https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tgz&quot;</span><br><span class="line">source_pkg=&quot;Python-3.7.3.tgz&quot;</span><br><span class="line">source_doc=&quot;Python-3.7.3&quot;</span><br><span class="line"></span><br><span class="line">cpu_count=`egrep &quot;flags&quot; /proc/cpuinfo |wc -l`</span><br><span class="line"></span><br><span class="line">#程序</span><br><span class="line">check () &#123;</span><br><span class="line">  [ &quot;$USER&quot; != &quot;root&quot; ]&amp;&amp;echo &quot;need be root so that&quot;&amp;&amp;exit 1</span><br><span class="line">  [ ! -x /usr/bin/wget ]&amp;&amp;echo &quot;not found command: wget&quot;&amp;&amp;exit 1 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">install_python () &#123;</span><br><span class="line"></span><br><span class="line">check</span><br><span class="line"></span><br><span class="line">#1、download python source package</span><br><span class="line">if ! (wget $source_url &amp;&gt;/dev/null) ;then</span><br><span class="line">   echo &quot;$source_pkg download fail&quot;</span><br><span class="line">   exit 1</span><br><span class="line">fi</span><br><span class="line">#2、Decompression source package</span><br><span class="line">if [ -f $source_pkg ];then</span><br><span class="line">    tar xf $source_pkg</span><br><span class="line">else</span><br><span class="line">    echo &quot;not found package: $source_pkg&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">#3、python install pre</span><br><span class="line">if ! (yum -y install gcc-* openssl-* libffi-devel  curses-devel lm_sensors sqlite-devel &amp;&gt;/dev/null);then</span><br><span class="line">    echo &quot;yum install software package fail&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#4、configure python install env</span><br><span class="line">if [ -d $source_doc ];then</span><br><span class="line">    </span><br><span class="line"> </span><br><span class="line">   #5、python configure</span><br><span class="line">   cd $source_doc</span><br><span class="line">   </span><br><span class="line">   sed -i.bak &#x27;212s/#//&#x27; Modules/Setup.dist</span><br><span class="line">   sed -i &#x27;213s/#//&#x27; Modules/Setup.dist</span><br><span class="line">   sed -i &#x27;214s/#//&#x27; Modules/Setup.dist</span><br><span class="line">   </span><br><span class="line">   echo &quot;python configure...please waiting&quot;</span><br><span class="line">   if ./configure --enable-optimizations --with-openssl=/usr/bin/openssl &amp;&gt;/dev/null ;then</span><br><span class="line"> </span><br><span class="line">           #6、python make </span><br><span class="line">           echo &quot;python make...please waiting&quot;</span><br><span class="line">           if make -j $cpu_count &amp;&gt;/dev/null ;then</span><br><span class="line">          </span><br><span class="line">                #7、python install</span><br><span class="line">                echo &quot;python install...please waiting&quot;</span><br><span class="line">                if make install &amp; &gt; /dev/null;then</span><br><span class="line">                    echo &quot;$source_doc install success&quot;</span><br><span class="line">                else</span><br><span class="line">                    echo &quot;python make install fail&quot;</span><br><span class="line">                    exit 1</span><br><span class="line">                fi</span><br><span class="line">            else</span><br><span class="line">                echo &quot;python make fail&quot;</span><br><span class="line">                exit 1</span><br><span class="line">            fi</span><br><span class="line">    else</span><br><span class="line">         echo &quot;python configure fail&quot;</span><br><span class="line">         exit 1</span><br><span class="line">    fi</span><br><span class="line">else</span><br><span class="line">   echo &quot;not found $source_doc&quot;</span><br><span class="line">   exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">post_install</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">#Post-installation settings</span><br><span class="line">post_install () &#123;</span><br><span class="line">#update pip tool</span><br><span class="line">pip3 install --upgrade pip</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#函数调用</span><br><span class="line"></span><br><span class="line">install_python &amp;&amp; rm -rf $source_doc</span><br></pre></td></tr></table></figure>

<h4 id="3-2、glances-安装"><a href="#3-2、glances-安装" class="headerlink" title="3.2、glances 安装"></a>3.2、glances 安装</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manager01 ~]# pip install glances</span><br><span class="line">Collecting glances</span><br><span class="line">  Downloading https://files.pythonhosted.org/packages/32/34/72f9202ad5b7ada314507a50b9ab1fb604d2f468b138679e0a4fedeb91fa/Glances-3.1.0.tar.gz (6.7MB)</span><br><span class="line">     |████████████████████████████████| 6.7MB 659kB/s </span><br><span class="line">Collecting psutil&gt;=5.3.0 (from glances)</span><br><span class="line">  Downloading https://files.pythonhosted.org/packages/1c/ca/5b8c1fe032a458c2c4bcbe509d1401dca9dda35c7fc46b36bb81c2834740/psutil-5.6.3.tar.gz (435kB)</span><br><span class="line">     |████████████████████████████████| 440kB 575kB/s </span><br><span class="line">Installing collected packages: psutil, glances</span><br><span class="line">  Running setup.py install for psutil ... done</span><br><span class="line">  Running setup.py install for glances ... done</span><br><span class="line">Successfully installed glances-3.1.0 psutil-5.6.3</span><br></pre></td></tr></table></figure>

<h4 id="3-3、温度监控工具安装"><a href="#3-3、温度监控工具安装" class="headerlink" title="3.3、温度监控工具安装"></a>3.3、温度监控工具安装</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manager01 ~]# yum -y install lm_sensors</span><br></pre></td></tr></table></figure>

<h4 id="3-4、epel公网源安装"><a href="#3-4、epel公网源安装" class="headerlink" title="3.4、epel公网源安装"></a>3.4、epel公网源安装</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manager01 ~]# yum install epel* -y</span><br><span class="line">[root@manager01 ~]# yum -y install glances</span><br></pre></td></tr></table></figure>

<h2 id="四、glances监控"><a href="#四、glances监控" class="headerlink" title="四、glances监控"></a>四、glances监控</h2><h4 id="4-1、开启glances监控"><a href="#4-1、开启glances监控" class="headerlink" title="4.1、开启glances监控"></a>4.1、开启glances监控</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manager01 ~]# glances</span><br></pre></td></tr></table></figure>

<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/12/7/1607301391828.png" alt="glances_1.png"></p>
<p><strong>glances 工作界面的说明 :</strong><br>在上图 的上部是 CPU 、Load（负载）、Mem（内存使用）、 Swap（交换分区）的使用情况。在上图的中上部是网络接口、Processes（进程）的使用情况。通常包括如下字段：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%CPU：该进程占用的 CPU 使用率</span><br><span class="line">%MEM：该进程占用的物理内存和总内存的百分比</span><br><span class="line">VIRT: 虚拟内存大小</span><br><span class="line">RES: 进程占用的物理内存值</span><br><span class="line">PID: 进程 ID 号</span><br><span class="line">USER: 进程所有者的用户名</span><br><span class="line">NI: 进程优先级</span><br><span class="line">S: 进程状态，其中 S 表示休眠，R 表示正在运行，Z 表示僵死状态。</span><br><span class="line">TIME+: 该进程启动后占用的总的 CPU 时间</span><br><span class="line">IO_R 和 IO_W: 进程的读写 I/O 速率</span><br><span class="line">Command: 进程名称</span><br></pre></td></tr></table></figure>

<p>在上图的左侧是网络、磁盘IO、磁盘分区使用情况。 另外 glances 可以使用交互式的方式运行该工具，用户可以使用如下快捷键：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">h ： 显示帮助信息</span><br><span class="line">q ： 离开程序退出</span><br><span class="line">c ：按照 CPU 实时负载对系统进程进行排序</span><br><span class="line">m ：按照内存使用状况对系统进程排序</span><br><span class="line">i：按照 I/O 使用状况对系统进程排序</span><br><span class="line">p： 按照进程名称排序</span><br><span class="line">d ： 显示磁盘读写状况 </span><br><span class="line">w ： 删除日志文件</span><br><span class="line">l ：显示日志</span><br><span class="line">s： 显示传感器信息</span><br><span class="line">f ： 显示系统信息</span><br><span class="line">1 ：轮流显示每个 CPU 内核的使用情况（次选项仅仅使用在多核 CPU 系统）</span><br></pre></td></tr></table></figure>

<h4 id="4-2、glances-使用方法"><a href="#4-2、glances-使用方法" class="headerlink" title="4.2、glances 使用方法"></a>4.2、glances 使用方法</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">glances 是一个命令行工具包括如下命令选项：</span><br><span class="line">-b：显示网络连接速度 Byte/ 秒</span><br><span class="line">-B @IP|host ：绑定服务器端 IP 地址或者主机名称</span><br><span class="line">-c @IP|host：连接 glances 服务器端</span><br><span class="line">-C file：设置配置文件默认是 /etc/glances/glances.conf </span><br><span class="line">-d：关闭磁盘 I/O 模块</span><br><span class="line">-e：显示传感器温度</span><br><span class="line">-f file：设置输出文件（格式是 HTML 或者 CSV）</span><br><span class="line">-m：关闭挂载的磁盘模块</span><br><span class="line">-n：关闭网络模块</span><br><span class="line">-p PORT：设置运行端口默认是 61209 </span><br><span class="line">-P password：设置客户端 / 服务器密码</span><br><span class="line">-s：设置 glances 运行模式为服务器</span><br><span class="line">-t sec：设置屏幕刷新的时间间隔，单位为秒，默认值为 2 秒，数值许可范围：1~32767 </span><br><span class="line">-h : 显示帮助信息</span><br><span class="line">-v : 显示版本信息</span><br></pre></td></tr></table></figure>

<h2 id="五、glances-C-x2F-S模式"><a href="#五、glances-C-x2F-S模式" class="headerlink" title="五、glances C&#x2F;S模式"></a>五、glances C&#x2F;S模式</h2><p>glances还支持C&#x2F;S模式监控，被监控机运行服务端，监控端运行客户端既可以实现远程监控。</p>
<p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/12/7/1607301423160.png" alt="glances_cs.png"></p>
<p>注意：C&#x2F;S模式都必须安装glances才可以实现</p>
<h4 id="5-1、服务端启动"><a href="#5-1、服务端启动" class="headerlink" title="5.1、服务端启动"></a>5.1、服务端启动</h4><p><strong>服务端使用的端口默认是61209,如果使用服务端请注意开启防火墙。</strong><br><img src="https://www.zutuanxue.com:8000/static/media/images/2020/12/7/1607301474604.png" alt="glances_服务端.png"></p>
<h4 id="5-2、客户端访问"><a href="#5-2、客户端访问" class="headerlink" title="5.2、客户端访问"></a>5.2、客户端访问</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@zutuanxue ~]# glances -c 192.168.10.100</span><br></pre></td></tr></table></figure>

<h2 id="六、其他数据保存方式"><a href="#六、其他数据保存方式" class="headerlink" title="六、其他数据保存方式"></a>六、其他数据保存方式</h2><h4 id="6-1、导出数据为CSV电子表格"><a href="#6-1、导出数据为CSV电子表格" class="headerlink" title="6.1、导出数据为CSV电子表格"></a>6.1、导出数据为CSV电子表格</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@manager01 ~]# glances --export-csv /tmp/1.csv</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-15</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-16</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-17</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-2</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-3</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-6</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-5</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-8</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-7</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-9</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-1</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-1/</url>
    <content><![CDATA[<p><object data="1.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-10</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-10/</url>
    <content><![CDATA[<p><object data="10.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c交换-4</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E4%BA%A4%E6%8D%A2-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-12</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-12/</url>
    <content><![CDATA[<p><object data="12.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-11</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-11/</url>
    <content><![CDATA[<p><object data="11.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-14</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-14/</url>
    <content><![CDATA[<p><object data="14.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-13</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-13/</url>
    <content><![CDATA[<p><object data="13.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-15</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-15/</url>
    <content><![CDATA[<p><object data="15.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-16</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-16/</url>
    <content><![CDATA[<p><object data="16.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-17</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-17/</url>
    <content><![CDATA[<p><object data="17.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-18</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-18/</url>
    <content><![CDATA[<p><object data="18.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-19</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-19/</url>
    <content><![CDATA[<p><object data="19.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-3</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-3/</url>
    <content><![CDATA[<p><object data="3.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-2</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-2/</url>
    <content><![CDATA[<p><object data="2.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-4</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-4/</url>
    <content><![CDATA[<p><object data="4.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-5</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-5/</url>
    <content><![CDATA[<p><object data="5.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-6</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-6/</url>
    <content><![CDATA[<p><object data="6.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-8</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-8/</url>
    <content><![CDATA[<p><object data="8.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-7</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-7/</url>
    <content><![CDATA[<p><object data="7.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>路由交换配制与管理完全手册-h3c路由-9</title>
    <url>/2022/11/12/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E9%85%8D%E5%88%B6%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%8C%E5%85%A8%E6%89%8B%E5%86%8C-h3c%E8%B7%AF%E7%94%B1-9/</url>
    <content><![CDATA[<p><object data="9.pdf" type="application/pdf" width="100%" height="600"></object></p>
]]></content>
  </entry>
  <entry>
    <title>部署高可用集群</title>
    <url>/2022/11/12/%E9%83%A8%E7%BD%B2%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>部署IPv6网络</title>
    <url>/2022/11/17/%E9%83%A8%E7%BD%B2IPv6%E7%BD%91%E7%BB%9C/</url>
    <content><![CDATA[]]></content>
  </entry>
</search>
